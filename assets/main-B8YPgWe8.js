var zf=Object.defineProperty;var Gf=(T,_,E)=>_ in T?zf(T,_,{enumerable:!0,configurable:!0,writable:!0,value:E}):T[_]=E;var kn=(T,_,E)=>Gf(T,typeof _!="symbol"?_+"":_,E);function _mergeNamespaces(T,_){for(var E=0;E<_.length;E++){const C=_[E];if(typeof C!="string"&&!Array.isArray(C)){for(const A in C)if(A!=="default"&&!(A in T)){const R=Object.getOwnPropertyDescriptor(C,A);R&&Object.defineProperty(T,A,R.get?R:{enumerable:!0,get:()=>C[A]})}}}return Object.freeze(Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))C(A);new MutationObserver(A=>{for(const R of A)if(R.type==="childList")for(const I of R.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&C(I)}).observe(document,{childList:!0,subtree:!0});function E(A){const R={};return A.integrity&&(R.integrity=A.integrity),A.referrerPolicy&&(R.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?R.credentials="include":A.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function C(A){if(A.ep)return;A.ep=!0;const R=E(A);fetch(A.href,R)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}function getAugmentedNamespace(T){if(Object.prototype.hasOwnProperty.call(T,"__esModule"))return T;var _=T.default;if(typeof _=="function"){var E=function C(){return this instanceof C?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};E.prototype=_.prototype}else E={};return Object.defineProperty(E,"__esModule",{value:!0}),Object.keys(T).forEach(function(C){var A=Object.getOwnPropertyDescriptor(T,C);Object.defineProperty(E,C,A.get?A:{enumerable:!0,get:function(){return T[C]}})}),E}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var T=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),I=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),D=Symbol.iterator;function O(me){return me===null||typeof me!="object"?null:(me=D&&me[D]||me["@@iterator"],typeof me=="function"?me:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,W={};function X(me,xe,Ae){this.props=me,this.context=xe,this.refs=W,this.updater=Ae||L}X.prototype.isReactComponent={},X.prototype.setState=function(me,xe){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,me,xe,"setState")},X.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function Y(){}Y.prototype=X.prototype;function K(me,xe,Ae){this.props=me,this.context=xe,this.refs=W,this.updater=Ae||L}var Q=K.prototype=new Y;Q.constructor=K,z(Q,X.prototype),Q.isPureReactComponent=!0;var ee=Array.isArray,J=Object.prototype.hasOwnProperty,ie={current:null},re={key:!0,ref:!0,__self:!0,__source:!0};function se(me,xe,Ae){var De,Ie={},je=null,Ye=null;if(xe!=null)for(De in xe.ref!==void 0&&(Ye=xe.ref),xe.key!==void 0&&(je=""+xe.key),xe)J.call(xe,De)&&!re.hasOwnProperty(De)&&(Ie[De]=xe[De]);var ke=arguments.length-2;if(ke===1)Ie.children=Ae;else if(1<ke){for(var Le=Array(ke),Ne=0;Ne<ke;Ne++)Le[Ne]=arguments[Ne+2];Ie.children=Le}if(me&&me.defaultProps)for(De in ke=me.defaultProps,ke)Ie[De]===void 0&&(Ie[De]=ke[De]);return{$$typeof:T,type:me,key:je,ref:Ye,props:Ie,_owner:ie.current}}function ne(me,xe){return{$$typeof:T,type:me.type,key:xe,ref:me.ref,props:me.props,_owner:me._owner}}function oe(me){return typeof me=="object"&&me!==null&&me.$$typeof===T}function fe(me){var xe={"=":"=0",":":"=2"};return"$"+me.replace(/[=:]/g,function(Ae){return xe[Ae]})}var he=/\/+/g;function ge(me,xe){return typeof me=="object"&&me!==null&&me.key!=null?fe(""+me.key):xe.toString(36)}function ye(me,xe,Ae,De,Ie){var je=typeof me;(je==="undefined"||je==="boolean")&&(me=null);var Ye=!1;if(me===null)Ye=!0;else switch(je){case"string":case"number":Ye=!0;break;case"object":switch(me.$$typeof){case T:case _:Ye=!0}}if(Ye)return Ye=me,Ie=Ie(Ye),me=De===""?"."+ge(Ye,0):De,ee(Ie)?(Ae="",me!=null&&(Ae=me.replace(he,"$&/")+"/"),ye(Ie,xe,Ae,"",function(Ne){return Ne})):Ie!=null&&(oe(Ie)&&(Ie=ne(Ie,Ae+(!Ie.key||Ye&&Ye.key===Ie.key?"":(""+Ie.key).replace(he,"$&/")+"/")+me)),xe.push(Ie)),1;if(Ye=0,De=De===""?".":De+":",ee(me))for(var ke=0;ke<me.length;ke++){je=me[ke];var Le=De+ge(je,ke);Ye+=ye(je,xe,Ae,Le,Ie)}else if(Le=O(me),typeof Le=="function")for(me=Le.call(me),ke=0;!(je=me.next()).done;)je=je.value,Le=De+ge(je,ke++),Ye+=ye(je,xe,Ae,Le,Ie);else if(je==="object")throw xe=String(me),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.");return Ye}function we(me,xe,Ae){if(me==null)return me;var De=[],Ie=0;return ye(me,De,"","",function(je){return xe.call(Ae,je,Ie++)}),De}function le(me){if(me._status===-1){var xe=me._result;xe=xe(),xe.then(function(Ae){(me._status===0||me._status===-1)&&(me._status=1,me._result=Ae)},function(Ae){(me._status===0||me._status===-1)&&(me._status=2,me._result=Ae)}),me._status===-1&&(me._status=0,me._result=xe)}if(me._status===1)return me._result.default;throw me._result}var de={current:null},ce={transition:null},ve={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:ce,ReactCurrentOwner:ie};function be(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:we,forEach:function(me,xe,Ae){we(me,function(){xe.apply(this,arguments)},Ae)},count:function(me){var xe=0;return we(me,function(){xe++}),xe},toArray:function(me){return we(me,function(xe){return xe})||[]},only:function(me){if(!oe(me))throw Error("React.Children.only expected to receive a single React element child.");return me}},react_production_min.Component=X,react_production_min.Fragment=E,react_production_min.Profiler=A,react_production_min.PureComponent=K,react_production_min.StrictMode=C,react_production_min.Suspense=B,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,react_production_min.act=be,react_production_min.cloneElement=function(me,xe,Ae){if(me==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+me+".");var De=z({},me.props),Ie=me.key,je=me.ref,Ye=me._owner;if(xe!=null){if(xe.ref!==void 0&&(je=xe.ref,Ye=ie.current),xe.key!==void 0&&(Ie=""+xe.key),me.type&&me.type.defaultProps)var ke=me.type.defaultProps;for(Le in xe)J.call(xe,Le)&&!re.hasOwnProperty(Le)&&(De[Le]=xe[Le]===void 0&&ke!==void 0?ke[Le]:xe[Le])}var Le=arguments.length-2;if(Le===1)De.children=Ae;else if(1<Le){ke=Array(Le);for(var Ne=0;Ne<Le;Ne++)ke[Ne]=arguments[Ne+2];De.children=ke}return{$$typeof:T,type:me.type,key:Ie,ref:je,props:De,_owner:Ye}},react_production_min.createContext=function(me){return me={$$typeof:I,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},me.Provider={$$typeof:R,_context:me},me.Consumer=me},react_production_min.createElement=se,react_production_min.createFactory=function(me){var xe=se.bind(null,me);return xe.type=me,xe},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(me){return{$$typeof:F,render:me}},react_production_min.isValidElement=oe,react_production_min.lazy=function(me){return{$$typeof:V,_payload:{_status:-1,_result:me},_init:le}},react_production_min.memo=function(me,xe){return{$$typeof:U,type:me,compare:xe===void 0?null:xe}},react_production_min.startTransition=function(me){var xe=ce.transition;ce.transition={};try{me()}finally{ce.transition=xe}},react_production_min.unstable_act=be,react_production_min.useCallback=function(me,xe){return de.current.useCallback(me,xe)},react_production_min.useContext=function(me){return de.current.useContext(me)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(me){return de.current.useDeferredValue(me)},react_production_min.useEffect=function(me,xe){return de.current.useEffect(me,xe)},react_production_min.useId=function(){return de.current.useId()},react_production_min.useImperativeHandle=function(me,xe,Ae){return de.current.useImperativeHandle(me,xe,Ae)},react_production_min.useInsertionEffect=function(me,xe){return de.current.useInsertionEffect(me,xe)},react_production_min.useLayoutEffect=function(me,xe){return de.current.useLayoutEffect(me,xe)},react_production_min.useMemo=function(me,xe){return de.current.useMemo(me,xe)},react_production_min.useReducer=function(me,xe,Ae){return de.current.useReducer(me,xe,Ae)},react_production_min.useRef=function(me){return de.current.useRef(me)},react_production_min.useState=function(me){return de.current.useState(me)},react_production_min.useSyncExternalStore=function(me,xe,Ae){return de.current.useSyncExternalStore(me,xe,Ae)},react_production_min.useTransition=function(){return de.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var T=requireReact(),_=Symbol.for("react.element"),E=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,A=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function I(F,B,U){var V,D={},O=null,L=null;U!==void 0&&(O=""+U),B.key!==void 0&&(O=""+B.key),B.ref!==void 0&&(L=B.ref);for(V in B)C.call(B,V)&&!R.hasOwnProperty(V)&&(D[V]=B[V]);if(F&&F.defaultProps)for(V in B=F.defaultProps,B)D[V]===void 0&&(D[V]=B[V]);return{$$typeof:_,type:F,key:O,ref:L,props:D,_owner:A.current}}return reactJsxRuntime_production_min.Fragment=E,reactJsxRuntime_production_min.jsx=I,reactJsxRuntime_production_min.jsxs=I,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(T){function _(ce,ve){var be=ce.length;ce.push(ve);e:for(;0<be;){var me=be-1>>>1,xe=ce[me];if(0<A(xe,ve))ce[me]=ve,ce[be]=xe,be=me;else break e}}function E(ce){return ce.length===0?null:ce[0]}function C(ce){if(ce.length===0)return null;var ve=ce[0],be=ce.pop();if(be!==ve){ce[0]=be;e:for(var me=0,xe=ce.length,Ae=xe>>>1;me<Ae;){var De=2*(me+1)-1,Ie=ce[De],je=De+1,Ye=ce[je];if(0>A(Ie,be))je<xe&&0>A(Ye,Ie)?(ce[me]=Ye,ce[je]=be,me=je):(ce[me]=Ie,ce[De]=be,me=De);else if(je<xe&&0>A(Ye,be))ce[me]=Ye,ce[je]=be,me=je;else break e}}return ve}function A(ce,ve){var be=ce.sortIndex-ve.sortIndex;return be!==0?be:ce.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var R=performance;T.unstable_now=function(){return R.now()}}else{var I=Date,F=I.now();T.unstable_now=function(){return I.now()-F}}var B=[],U=[],V=1,D=null,O=3,L=!1,z=!1,W=!1,X=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(ce){for(var ve=E(U);ve!==null;){if(ve.callback===null)C(U);else if(ve.startTime<=ce)C(U),ve.sortIndex=ve.expirationTime,_(B,ve);else break;ve=E(U)}}function ee(ce){if(W=!1,Q(ce),!z)if(E(B)!==null)z=!0,le(J);else{var ve=E(U);ve!==null&&de(ee,ve.startTime-ce)}}function J(ce,ve){z=!1,W&&(W=!1,Y(se),se=-1),L=!0;var be=O;try{for(Q(ve),D=E(B);D!==null&&(!(D.expirationTime>ve)||ce&&!fe());){var me=D.callback;if(typeof me=="function"){D.callback=null,O=D.priorityLevel;var xe=me(D.expirationTime<=ve);ve=T.unstable_now(),typeof xe=="function"?D.callback=xe:D===E(B)&&C(B),Q(ve)}else C(B);D=E(B)}if(D!==null)var Ae=!0;else{var De=E(U);De!==null&&de(ee,De.startTime-ve),Ae=!1}return Ae}finally{D=null,O=be,L=!1}}var ie=!1,re=null,se=-1,ne=5,oe=-1;function fe(){return!(T.unstable_now()-oe<ne)}function he(){if(re!==null){var ce=T.unstable_now();oe=ce;var ve=!0;try{ve=re(!0,ce)}finally{ve?ge():(ie=!1,re=null)}}else ie=!1}var ge;if(typeof K=="function")ge=function(){K(he)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,we=ye.port2;ye.port1.onmessage=he,ge=function(){we.postMessage(null)}}else ge=function(){X(he,0)};function le(ce){re=ce,ie||(ie=!0,ge())}function de(ce,ve){se=X(function(){ce(T.unstable_now())},ve)}T.unstable_IdlePriority=5,T.unstable_ImmediatePriority=1,T.unstable_LowPriority=4,T.unstable_NormalPriority=3,T.unstable_Profiling=null,T.unstable_UserBlockingPriority=2,T.unstable_cancelCallback=function(ce){ce.callback=null},T.unstable_continueExecution=function(){z||L||(z=!0,le(J))},T.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<ce?Math.floor(1e3/ce):5},T.unstable_getCurrentPriorityLevel=function(){return O},T.unstable_getFirstCallbackNode=function(){return E(B)},T.unstable_next=function(ce){switch(O){case 1:case 2:case 3:var ve=3;break;default:ve=O}var be=O;O=ve;try{return ce()}finally{O=be}},T.unstable_pauseExecution=function(){},T.unstable_requestPaint=function(){},T.unstable_runWithPriority=function(ce,ve){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var be=O;O=ce;try{return ve()}finally{O=be}},T.unstable_scheduleCallback=function(ce,ve,be){var me=T.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?me+be:me):be=me,ce){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=be+xe,ce={id:V++,callback:ve,priorityLevel:ce,startTime:be,expirationTime:xe,sortIndex:-1},be>me?(ce.sortIndex=be,_(U,ce),E(B)===null&&ce===E(U)&&(W?(Y(se),se=-1):W=!0,de(ee,be-me))):(ce.sortIndex=xe,_(B,ce),z||L||(z=!0,le(J))),ce},T.unstable_shouldYield=fe,T.unstable_wrapCallback=function(ce){var ve=O;return function(){var be=O;O=ve;try{return ce.apply(this,arguments)}finally{O=be}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var T=requireReact(),_=requireScheduler();function E(G){for(var q="https://reactjs.org/docs/error-decoder.html?invariant="+G,Z=1;Z<arguments.length;Z++)q+="&args[]="+encodeURIComponent(arguments[Z]);return"Minified React error #"+G+"; visit "+q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C=new Set,A={};function R(G,q){I(G,q),I(G+"Capture",q)}function I(G,q){for(A[G]=q,G=0;G<q.length;G++)C.add(q[G])}var F=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B=Object.prototype.hasOwnProperty,U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V={},D={};function O(G){return B.call(D,G)?!0:B.call(V,G)?!1:U.test(G)?D[G]=!0:(V[G]=!0,!1)}function L(G,q,Z,te){if(Z!==null&&Z.type===0)return!1;switch(typeof q){case"function":case"symbol":return!0;case"boolean":return te?!1:Z!==null?!Z.acceptsBooleans:(G=G.toLowerCase().slice(0,5),G!=="data-"&&G!=="aria-");default:return!1}}function z(G,q,Z,te){if(q===null||typeof q>"u"||L(G,q,Z,te))return!0;if(te)return!1;if(Z!==null)switch(Z.type){case 3:return!q;case 4:return q===!1;case 5:return isNaN(q);case 6:return isNaN(q)||1>q}return!1}function W(G,q,Z,te,ae,ue,_e){this.acceptsBooleans=q===2||q===3||q===4,this.attributeName=te,this.attributeNamespace=ae,this.mustUseProperty=Z,this.propertyName=G,this.type=q,this.sanitizeURL=ue,this.removeEmptyString=_e}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(G){X[G]=new W(G,0,!1,G,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(G){var q=G[0];X[q]=new W(q,1,!1,G[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(G){X[G]=new W(G,2,!1,G.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(G){X[G]=new W(G,2,!1,G,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(G){X[G]=new W(G,3,!1,G.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(G){X[G]=new W(G,3,!0,G,null,!1,!1)}),["capture","download"].forEach(function(G){X[G]=new W(G,4,!1,G,null,!1,!1)}),["cols","rows","size","span"].forEach(function(G){X[G]=new W(G,6,!1,G,null,!1,!1)}),["rowSpan","start"].forEach(function(G){X[G]=new W(G,5,!1,G.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function K(G){return G[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(G){var q=G.replace(Y,K);X[q]=new W(q,1,!1,G,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(G){var q=G.replace(Y,K);X[q]=new W(q,1,!1,G,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(G){var q=G.replace(Y,K);X[q]=new W(q,1,!1,G,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(G){X[G]=new W(G,1,!1,G.toLowerCase(),null,!1,!1)}),X.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(G){X[G]=new W(G,1,!1,G.toLowerCase(),null,!0,!0)});function Q(G,q,Z,te){var ae=X.hasOwnProperty(q)?X[q]:null;(ae!==null?ae.type!==0:te||!(2<q.length)||q[0]!=="o"&&q[0]!=="O"||q[1]!=="n"&&q[1]!=="N")&&(z(q,Z,ae,te)&&(Z=null),te||ae===null?O(q)&&(Z===null?G.removeAttribute(q):G.setAttribute(q,""+Z)):ae.mustUseProperty?G[ae.propertyName]=Z===null?ae.type===3?!1:"":Z:(q=ae.attributeName,te=ae.attributeNamespace,Z===null?G.removeAttribute(q):(ae=ae.type,Z=ae===3||ae===4&&Z===!0?"":""+Z,te?G.setAttributeNS(te,q,Z):G.setAttribute(q,Z))))}var ee=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),ie=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),fe=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ve(G){return G===null||typeof G!="object"?null:(G=ce&&G[ce]||G["@@iterator"],typeof G=="function"?G:null)}var be=Object.assign,me;function xe(G){if(me===void 0)try{throw Error()}catch(Z){var q=Z.stack.trim().match(/\n( *(at )?)/);me=q&&q[1]||""}return`
`+me+G}var Ae=!1;function De(G,q){if(!G||Ae)return"";Ae=!0;var Z=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(q)if(q=function(){throw Error()},Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(He){var te=He}Reflect.construct(G,[],q)}else{try{q.call()}catch(He){te=He}G.call(q.prototype)}else{try{throw Error()}catch(He){te=He}G()}}catch(He){if(He&&te&&typeof He.stack=="string"){for(var ae=He.stack.split(`
`),ue=te.stack.split(`
`),_e=ae.length-1,Ce=ue.length-1;1<=_e&&0<=Ce&&ae[_e]!==ue[Ce];)Ce--;for(;1<=_e&&0<=Ce;_e--,Ce--)if(ae[_e]!==ue[Ce]){if(_e!==1||Ce!==1)do if(_e--,Ce--,0>Ce||ae[_e]!==ue[Ce]){var Oe=`
`+ae[_e].replace(" at new "," at ");return G.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",G.displayName)),Oe}while(1<=_e&&0<=Ce);break}}}finally{Ae=!1,Error.prepareStackTrace=Z}return(G=G?G.displayName||G.name:"")?xe(G):""}function Ie(G){switch(G.tag){case 5:return xe(G.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 2:case 15:return G=De(G.type,!1),G;case 11:return G=De(G.type.render,!1),G;case 1:return G=De(G.type,!0),G;default:return""}}function je(G){if(G==null)return null;if(typeof G=="function")return G.displayName||G.name||null;if(typeof G=="string")return G;switch(G){case re:return"Fragment";case ie:return"Portal";case ne:return"Profiler";case se:return"StrictMode";case ge:return"Suspense";case ye:return"SuspenseList"}if(typeof G=="object")switch(G.$$typeof){case fe:return(G.displayName||"Context")+".Consumer";case oe:return(G._context.displayName||"Context")+".Provider";case he:var q=G.render;return G=G.displayName,G||(G=q.displayName||q.name||"",G=G!==""?"ForwardRef("+G+")":"ForwardRef"),G;case we:return q=G.displayName||null,q!==null?q:je(G.type)||"Memo";case le:q=G._payload,G=G._init;try{return je(G(q))}catch{}}return null}function Ye(G){var q=G.type;switch(G.tag){case 24:return"Cache";case 9:return(q.displayName||"Context")+".Consumer";case 10:return(q._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return G=q.render,G=G.displayName||G.name||"",q.displayName||(G!==""?"ForwardRef("+G+")":"ForwardRef");case 7:return"Fragment";case 5:return q;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(q);case 8:return q===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof q=="function")return q.displayName||q.name||null;if(typeof q=="string")return q}return null}function ke(G){switch(typeof G){case"boolean":case"number":case"string":case"undefined":return G;case"object":return G;default:return""}}function Le(G){var q=G.type;return(G=G.nodeName)&&G.toLowerCase()==="input"&&(q==="checkbox"||q==="radio")}function Ne(G){var q=Le(G)?"checked":"value",Z=Object.getOwnPropertyDescriptor(G.constructor.prototype,q),te=""+G[q];if(!G.hasOwnProperty(q)&&typeof Z<"u"&&typeof Z.get=="function"&&typeof Z.set=="function"){var ae=Z.get,ue=Z.set;return Object.defineProperty(G,q,{configurable:!0,get:function(){return ae.call(this)},set:function(_e){te=""+_e,ue.call(this,_e)}}),Object.defineProperty(G,q,{enumerable:Z.enumerable}),{getValue:function(){return te},setValue:function(_e){te=""+_e},stopTracking:function(){G._valueTracker=null,delete G[q]}}}}function Qe(G){G._valueTracker||(G._valueTracker=Ne(G))}function et(G){if(!G)return!1;var q=G._valueTracker;if(!q)return!0;var Z=q.getValue(),te="";return G&&(te=Le(G)?G.checked?"true":"false":G.value),G=te,G!==Z?(q.setValue(G),!0):!1}function Je(G){if(G=G||(typeof document<"u"?document:void 0),typeof G>"u")return null;try{return G.activeElement||G.body}catch{return G.body}}function ut(G,q){var Z=q.checked;return be({},q,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Z??G._wrapperState.initialChecked})}function lt(G,q){var Z=q.defaultValue==null?"":q.defaultValue,te=q.checked!=null?q.checked:q.defaultChecked;Z=ke(q.value!=null?q.value:Z),G._wrapperState={initialChecked:te,initialValue:Z,controlled:q.type==="checkbox"||q.type==="radio"?q.checked!=null:q.value!=null}}function it(G,q){q=q.checked,q!=null&&Q(G,"checked",q,!1)}function Bt(G,q){it(G,q);var Z=ke(q.value),te=q.type;if(Z!=null)te==="number"?(Z===0&&G.value===""||G.value!=Z)&&(G.value=""+Z):G.value!==""+Z&&(G.value=""+Z);else if(te==="submit"||te==="reset"){G.removeAttribute("value");return}q.hasOwnProperty("value")?ar(G,q.type,Z):q.hasOwnProperty("defaultValue")&&ar(G,q.type,ke(q.defaultValue)),q.checked==null&&q.defaultChecked!=null&&(G.defaultChecked=!!q.defaultChecked)}function Yt(G,q,Z){if(q.hasOwnProperty("value")||q.hasOwnProperty("defaultValue")){var te=q.type;if(!(te!=="submit"&&te!=="reset"||q.value!==void 0&&q.value!==null))return;q=""+G._wrapperState.initialValue,Z||q===G.value||(G.value=q),G.defaultValue=q}Z=G.name,Z!==""&&(G.name=""),G.defaultChecked=!!G._wrapperState.initialChecked,Z!==""&&(G.name=Z)}function ar(G,q,Z){(q!=="number"||Je(G.ownerDocument)!==G)&&(Z==null?G.defaultValue=""+G._wrapperState.initialValue:G.defaultValue!==""+Z&&(G.defaultValue=""+Z))}var Kt=Array.isArray;function zt(G,q,Z,te){if(G=G.options,q){q={};for(var ae=0;ae<Z.length;ae++)q["$"+Z[ae]]=!0;for(Z=0;Z<G.length;Z++)ae=q.hasOwnProperty("$"+G[Z].value),G[Z].selected!==ae&&(G[Z].selected=ae),ae&&te&&(G[Z].defaultSelected=!0)}else{for(Z=""+ke(Z),q=null,ae=0;ae<G.length;ae++){if(G[ae].value===Z){G[ae].selected=!0,te&&(G[ae].defaultSelected=!0);return}q!==null||G[ae].disabled||(q=G[ae])}q!==null&&(q.selected=!0)}}function jt(G,q){if(q.dangerouslySetInnerHTML!=null)throw Error(E(91));return be({},q,{value:void 0,defaultValue:void 0,children:""+G._wrapperState.initialValue})}function Qt(G,q){var Z=q.value;if(Z==null){if(Z=q.children,q=q.defaultValue,Z!=null){if(q!=null)throw Error(E(92));if(Kt(Z)){if(1<Z.length)throw Error(E(93));Z=Z[0]}q=Z}q==null&&(q=""),Z=q}G._wrapperState={initialValue:ke(Z)}}function ir(G,q){var Z=ke(q.value),te=ke(q.defaultValue);Z!=null&&(Z=""+Z,Z!==G.value&&(G.value=Z),q.defaultValue==null&&G.defaultValue!==Z&&(G.defaultValue=Z)),te!=null&&(G.defaultValue=""+te)}function It(G){var q=G.textContent;q===G._wrapperState.initialValue&&q!==""&&q!==null&&(G.value=q)}function bn(G){switch(G){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function on(G,q){return G==null||G==="http://www.w3.org/1999/xhtml"?bn(q):G==="http://www.w3.org/2000/svg"&&q==="foreignObject"?"http://www.w3.org/1999/xhtml":G}var Or,Pr=function(G){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(q,Z,te,ae){MSApp.execUnsafeLocalFunction(function(){return G(q,Z,te,ae)})}:G}(function(G,q){if(G.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in G)G.innerHTML=q;else{for(Or=Or||document.createElement("div"),Or.innerHTML="<svg>"+q.valueOf().toString()+"</svg>",q=Or.firstChild;G.firstChild;)G.removeChild(G.firstChild);for(;q.firstChild;)G.appendChild(q.firstChild)}});function Mr(G,q){if(q){var Z=G.firstChild;if(Z&&Z===G.lastChild&&Z.nodeType===3){Z.nodeValue=q;return}}G.textContent=q}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fr=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(G){fr.forEach(function(q){q=q+G.charAt(0).toUpperCase()+G.substring(1),jr[q]=jr[G]})});function Ur(G,q,Z){return q==null||typeof q=="boolean"||q===""?"":Z||typeof q!="number"||q===0||jr.hasOwnProperty(G)&&jr[G]?(""+q).trim():q+"px"}function St(G,q){G=G.style;for(var Z in q)if(q.hasOwnProperty(Z)){var te=Z.indexOf("--")===0,ae=Ur(Z,q[Z],te);Z==="float"&&(Z="cssFloat"),te?G.setProperty(Z,ae):G[Z]=ae}}var Ue=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function We(G,q){if(q){if(Ue[G]&&(q.children!=null||q.dangerouslySetInnerHTML!=null))throw Error(E(137,G));if(q.dangerouslySetInnerHTML!=null){if(q.children!=null)throw Error(E(60));if(typeof q.dangerouslySetInnerHTML!="object"||!("__html"in q.dangerouslySetInnerHTML))throw Error(E(61))}if(q.style!=null&&typeof q.style!="object")throw Error(E(62))}}function Ft(G,q){if(G.indexOf("-")===-1)return typeof q.is=="string";switch(G){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lt=null;function gt(G){return G=G.target||G.srcElement||window,G.correspondingUseElement&&(G=G.correspondingUseElement),G.nodeType===3?G.parentNode:G}var Ct=null,pr=null,cr=null;function vt(G){if(G=As(G)){if(typeof Ct!="function")throw Error(E(280));var q=G.stateNode;q&&(q=co(q),Ct(G.stateNode,G.type,q))}}function xt(G){pr?cr?cr.push(G):cr=[G]:pr=G}function Et(){if(pr){var G=pr,q=cr;if(cr=pr=null,vt(G),q)for(G=0;G<q.length;G++)vt(q[G])}}function kr(G,q){return G(q)}function dr(){}var an=!1;function _n(G,q,Z){if(an)return G(q,Z);an=!0;try{return kr(G,q,Z)}finally{an=!1,(pr!==null||cr!==null)&&(dr(),Et())}}function Vr(G,q){var Z=G.stateNode;if(Z===null)return null;var te=co(Z);if(te===null)return null;Z=te[q];e:switch(q){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(te=!te.disabled)||(G=G.type,te=!(G==="button"||G==="input"||G==="select"||G==="textarea")),G=!te;break e;default:G=!1}if(G)return null;if(Z&&typeof Z!="function")throw Error(E(231,q,typeof Z));return Z}var Dr=!1;if(F)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Dr=!1}function ln(G,q,Z,te,ae,ue,_e,Ce,Oe){var He=Array.prototype.slice.call(arguments,3);try{q.apply(Z,He)}catch(rt){this.onError(rt)}}var Lr=!1,zr=null,Jr=!1,un=null,xn={onError:function(G){Lr=!0,zr=G}};function Fn(G,q,Z,te,ae,ue,_e,Ce,Oe){Lr=!1,zr=null,ln.apply(xn,arguments)}function Ee(G,q,Z,te,ae,ue,_e,Ce,Oe){if(Fn.apply(this,arguments),Lr){if(Lr){var He=zr;Lr=!1,zr=null}else throw Error(E(198));Jr||(Jr=!0,un=He)}}function Pe(G){var q=G,Z=G;if(G.alternate)for(;q.return;)q=q.return;else{G=q;do q=G,(q.flags&4098)!==0&&(Z=q.return),G=q.return;while(G)}return q.tag===3?Z:null}function Me(G){if(G.tag===13){var q=G.memoizedState;if(q===null&&(G=G.alternate,G!==null&&(q=G.memoizedState)),q!==null)return q.dehydrated}return null}function $e(G){if(Pe(G)!==G)throw Error(E(188))}function ze(G){var q=G.alternate;if(!q){if(q=Pe(G),q===null)throw Error(E(188));return q!==G?null:G}for(var Z=G,te=q;;){var ae=Z.return;if(ae===null)break;var ue=ae.alternate;if(ue===null){if(te=ae.return,te!==null){Z=te;continue}break}if(ae.child===ue.child){for(ue=ae.child;ue;){if(ue===Z)return $e(ae),G;if(ue===te)return $e(ae),q;ue=ue.sibling}throw Error(E(188))}if(Z.return!==te.return)Z=ae,te=ue;else{for(var _e=!1,Ce=ae.child;Ce;){if(Ce===Z){_e=!0,Z=ae,te=ue;break}if(Ce===te){_e=!0,te=ae,Z=ue;break}Ce=Ce.sibling}if(!_e){for(Ce=ue.child;Ce;){if(Ce===Z){_e=!0,Z=ue,te=ae;break}if(Ce===te){_e=!0,te=ue,Z=ae;break}Ce=Ce.sibling}if(!_e)throw Error(E(189))}}if(Z.alternate!==te)throw Error(E(190))}if(Z.tag!==3)throw Error(E(188));return Z.stateNode.current===Z?G:q}function Ke(G){return G=ze(G),G!==null?st(G):null}function st(G){if(G.tag===5||G.tag===6)return G;for(G=G.child;G!==null;){var q=st(G);if(q!==null)return q;G=G.sibling}return null}var mt=_.unstable_scheduleCallback,ct=_.unstable_cancelCallback,Ot=_.unstable_shouldYield,qt=_.unstable_requestPaint,$t=_.unstable_now,mr=_.unstable_getCurrentPriorityLevel,Ze=_.unstable_ImmediatePriority,Ut=_.unstable_UserBlockingPriority,Xt=_.unstable_NormalPriority,Gr=_.unstable_LowPriority,cn=_.unstable_IdlePriority,Zn=null,Wr=null;function Xs(G){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Zn,G,void 0,(G.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Ks,ki=Math.log,Ys=Math.LN2;function Ks(G){return G>>>=0,G===0?32:31-(ki(G)/Ys|0)|0}var gi=64,Di=4194304;function yi(G){switch(G&-G){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return G&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return G&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return G}}function Vn(G,q){var Z=G.pendingLanes;if(Z===0)return 0;var te=0,ae=G.suspendedLanes,ue=G.pingedLanes,_e=Z&268435455;if(_e!==0){var Ce=_e&~ae;Ce!==0?te=yi(Ce):(ue&=_e,ue!==0&&(te=yi(ue)))}else _e=Z&~ae,_e!==0?te=yi(_e):ue!==0&&(te=yi(ue));if(te===0)return 0;if(q!==0&&q!==te&&(q&ae)===0&&(ae=te&-te,ue=q&-q,ae>=ue||ae===16&&(ue&4194240)!==0))return q;if((te&4)!==0&&(te|=Z&16),q=G.entangledLanes,q!==0)for(G=G.entanglements,q&=te;0<q;)Z=31-er(q),ae=1<<Z,te|=G[Z],q&=~ae;return te}function hs(G,q){switch(G){case 1:case 2:case 4:return q+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return q+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zs(G,q){for(var Z=G.suspendedLanes,te=G.pingedLanes,ae=G.expirationTimes,ue=G.pendingLanes;0<ue;){var _e=31-er(ue),Ce=1<<_e,Oe=ae[_e];Oe===-1?((Ce&Z)===0||(Ce&te)!==0)&&(ae[_e]=hs(Ce,q)):Oe<=q&&(G.expiredLanes|=Ce),ue&=~Ce}}function Fi(G){return G=G.pendingLanes&-1073741825,G!==0?G:G&1073741824?1073741824:0}function fs(){var G=gi;return gi<<=1,(gi&4194240)===0&&(gi=64),G}function Li(G){for(var q=[],Z=0;31>Z;Z++)q.push(G);return q}function Ln(G,q,Z){G.pendingLanes|=q,q!==536870912&&(G.suspendedLanes=0,G.pingedLanes=0),G=G.eventTimes,q=31-er(q),G[q]=Z}function Qs(G,q){var Z=G.pendingLanes&~q;G.pendingLanes=q,G.suspendedLanes=0,G.pingedLanes=0,G.expiredLanes&=q,G.mutableReadLanes&=q,G.entangledLanes&=q,q=G.entanglements;var te=G.eventTimes;for(G=G.expirationTimes;0<Z;){var ae=31-er(Z),ue=1<<ae;q[ae]=0,te[ae]=-1,G[ae]=-1,Z&=~ue}}function $i(G,q){var Z=G.entangledLanes|=q;for(G=G.entanglements;Z;){var te=31-er(Z),ae=1<<te;ae&q|G[te]&q&&(G[te]|=q),Z&=~ae}}var Gt=0;function ps(G){return G&=-G,1<G?4<G?(G&268435455)!==0?16:536870912:4:1}var kt,Ni,Mt,Rt,Bi,Qn=!1,vi=[],wn=null,Sn=null,En=null,Jn=new Map,ei=new Map,Tn=[],Js="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ms(G,q){switch(G){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Jn.delete(q.pointerId);break;case"gotpointercapture":case"lostpointercapture":ei.delete(q.pointerId)}}function ti(G,q,Z,te,ae,ue){return G===null||G.nativeEvent!==ue?(G={blockedOn:q,domEventName:Z,eventSystemFlags:te,nativeEvent:ue,targetContainers:[ae]},q!==null&&(q=As(q),q!==null&&Ni(q)),G):(G.eventSystemFlags|=te,q=G.targetContainers,ae!==null&&q.indexOf(ae)===-1&&q.push(ae),G)}function eo(G,q,Z,te,ae){switch(q){case"focusin":return wn=ti(wn,G,q,Z,te,ae),!0;case"dragenter":return Sn=ti(Sn,G,q,Z,te,ae),!0;case"mouseover":return En=ti(En,G,q,Z,te,ae),!0;case"pointerover":var ue=ae.pointerId;return Jn.set(ue,ti(Jn.get(ue)||null,G,q,Z,te,ae)),!0;case"gotpointercapture":return ue=ae.pointerId,ei.set(ue,ti(ei.get(ue)||null,G,q,Z,te,ae)),!0}return!1}function gs(G){var q=bi(G.target);if(q!==null){var Z=Pe(q);if(Z!==null){if(q=Z.tag,q===13){if(q=Me(Z),q!==null){G.blockedOn=q,Bi(G.priority,function(){Mt(Z)});return}}else if(q===3&&Z.stateNode.current.memoizedState.isDehydrated){G.blockedOn=Z.tag===3?Z.stateNode.containerInfo:null;return}}}G.blockedOn=null}function pe(G){if(G.blockedOn!==null)return!1;for(var q=G.targetContainers;0<q.length;){var Z=Hr(G.domEventName,G.eventSystemFlags,q[0],G.nativeEvent);if(Z===null){Z=G.nativeEvent;var te=new Z.constructor(Z.type,Z);Lt=te,Z.target.dispatchEvent(te),Lt=null}else return q=As(Z),q!==null&&Ni(q),G.blockedOn=Z,!1;q.shift()}return!0}function Se(G,q,Z){pe(G)&&Z.delete(q)}function Te(){Qn=!1,wn!==null&&pe(wn)&&(wn=null),Sn!==null&&pe(Sn)&&(Sn=null),En!==null&&pe(En)&&(En=null),Jn.forEach(Se),ei.forEach(Se)}function Re(G,q){G.blockedOn===q&&(G.blockedOn=null,Qn||(Qn=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Te)))}function Be(G){function q(ae){return Re(ae,G)}if(0<vi.length){Re(vi[0],G);for(var Z=1;Z<vi.length;Z++){var te=vi[Z];te.blockedOn===G&&(te.blockedOn=null)}}for(wn!==null&&Re(wn,G),Sn!==null&&Re(Sn,G),En!==null&&Re(En,G),Jn.forEach(q),ei.forEach(q),Z=0;Z<Tn.length;Z++)te=Tn[Z],te.blockedOn===G&&(te.blockedOn=null);for(;0<Tn.length&&(Z=Tn[0],Z.blockedOn===null);)gs(Z),Z.blockedOn===null&&Tn.shift()}var qe=ee.ReactCurrentBatchConfig,ot=!0;function wt(G,q,Z,te){var ae=Gt,ue=qe.transition;qe.transition=null;try{Gt=1,Dt(G,q,Z,te)}finally{Gt=ae,qe.transition=ue}}function Nt(G,q,Z,te){var ae=Gt,ue=qe.transition;qe.transition=null;try{Gt=4,Dt(G,q,Z,te)}finally{Gt=ae,qe.transition=ue}}function Dt(G,q,Z,te){if(ot){var ae=Hr(G,q,Z,te);if(ae===null)wa(G,q,te,Jt,Z),ms(G,te);else if(eo(ae,G,q,Z,te))te.stopPropagation();else if(ms(G,te),q&4&&-1<Js.indexOf(G)){for(;ae!==null;){var ue=As(ae);if(ue!==null&&kt(ue),ue=Hr(G,q,Z,te),ue===null&&wa(G,q,te,Jt,Z),ue===ae)break;ae=ue}ae!==null&&te.stopPropagation()}else wa(G,q,te,null,Z)}}var Jt=null;function Hr(G,q,Z,te){if(Jt=null,G=gt(te),G=bi(G),G!==null)if(q=Pe(G),q===null)G=null;else if(Z=q.tag,Z===13){if(G=Me(q),G!==null)return G;G=null}else if(Z===3){if(q.stateNode.current.memoizedState.isDehydrated)return q.tag===3?q.stateNode.containerInfo:null;G=null}else q!==G&&(G=null);return Jt=G,null}function $r(G){switch(G){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mr()){case Ze:return 1;case Ut:return 4;case Xt:case Gr:return 16;case cn:return 536870912;default:return 16}default:return 16}}var Xe=null,Vt=null,Zt=null;function dn(){if(Zt)return Zt;var G,q=Vt,Z=q.length,te,ae="value"in Xe?Xe.value:Xe.textContent,ue=ae.length;for(G=0;G<Z&&q[G]===ae[G];G++);var _e=Z-G;for(te=1;te<=_e&&q[Z-te]===ae[ue-te];te++);return Zt=ae.slice(G,1<te?1-te:void 0)}function Pn(G){var q=G.keyCode;return"charCode"in G?(G=G.charCode,G===0&&q===13&&(G=13)):G=q,G===10&&(G=13),32<=G||G===13?G:0}function to(){return!0}function Vl(){return!1}function en(G){function q(Z,te,ae,ue,_e){this._reactName=Z,this._targetInst=ae,this.type=te,this.nativeEvent=ue,this.target=_e,this.currentTarget=null;for(var Ce in G)G.hasOwnProperty(Ce)&&(Z=G[Ce],this[Ce]=Z?Z(ue):ue[Ce]);return this.isDefaultPrevented=(ue.defaultPrevented!=null?ue.defaultPrevented:ue.returnValue===!1)?to:Vl,this.isPropagationStopped=Vl,this}return be(q.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Z=this.nativeEvent;Z&&(Z.preventDefault?Z.preventDefault():typeof Z.returnValue!="unknown"&&(Z.returnValue=!1),this.isDefaultPrevented=to)},stopPropagation:function(){var Z=this.nativeEvent;Z&&(Z.stopPropagation?Z.stopPropagation():typeof Z.cancelBubble!="unknown"&&(Z.cancelBubble=!0),this.isPropagationStopped=to)},persist:function(){},isPersistent:to}),q}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(G){return G.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=en(ji),ys=be({},ji,{view:0,detail:0}),mh=en(ys),aa,la,vs,ro=be({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(G){return G.relatedTarget===void 0?G.fromElement===G.srcElement?G.toElement:G.fromElement:G.relatedTarget},movementX:function(G){return"movementX"in G?G.movementX:(G!==vs&&(vs&&G.type==="mousemove"?(aa=G.screenX-vs.screenX,la=G.screenY-vs.screenY):la=aa=0,vs=G),aa)},movementY:function(G){return"movementY"in G?G.movementY:la}}),zl=en(ro),gh=be({},ro,{dataTransfer:0}),yh=en(gh),vh=be({},ys,{relatedTarget:0}),ca=en(vh),bh=be({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),_h=en(bh),xh=be({},ji,{clipboardData:function(G){return"clipboardData"in G?G.clipboardData:window.clipboardData}}),wh=en(xh),Sh=be({},ji,{data:0}),Gl=en(Sh),Eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ch(G){var q=this.nativeEvent;return q.getModifierState?q.getModifierState(G):(G=Ph[G])?!!q[G]:!1}function da(){return Ch}var Ah=be({},ys,{key:function(G){if(G.key){var q=Eh[G.key]||G.key;if(q!=="Unidentified")return q}return G.type==="keypress"?(G=Pn(G),G===13?"Enter":String.fromCharCode(G)):G.type==="keydown"||G.type==="keyup"?Th[G.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(G){return G.type==="keypress"?Pn(G):0},keyCode:function(G){return G.type==="keydown"||G.type==="keyup"?G.keyCode:0},which:function(G){return G.type==="keypress"?Pn(G):G.type==="keydown"||G.type==="keyup"?G.keyCode:0}}),Rh=en(Ah),Ih=be({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wl=en(Ih),Oh=be({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),Mh=en(Oh),kh=be({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dh=en(kh),Fh=be({},ro,{deltaX:function(G){return"deltaX"in G?G.deltaX:"wheelDeltaX"in G?-G.wheelDeltaX:0},deltaY:function(G){return"deltaY"in G?G.deltaY:"wheelDeltaY"in G?-G.wheelDeltaY:"wheelDelta"in G?-G.wheelDelta:0},deltaZ:0,deltaMode:0}),Lh=en(Fh),$h=[9,13,27,32],ha=F&&"CompositionEvent"in window,bs=null;F&&"documentMode"in document&&(bs=document.documentMode);var Nh=F&&"TextEvent"in window&&!bs,Hl=F&&(!ha||bs&&8<bs&&11>=bs),ql=" ",Xl=!1;function Yl(G,q){switch(G){case"keyup":return $h.indexOf(q.keyCode)!==-1;case"keydown":return q.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kl(G){return G=G.detail,typeof G=="object"&&"data"in G?G.data:null}var Ui=!1;function Bh(G,q){switch(G){case"compositionend":return Kl(q);case"keypress":return q.which!==32?null:(Xl=!0,ql);case"textInput":return G=q.data,G===ql&&Xl?null:G;default:return null}}function jh(G,q){if(Ui)return G==="compositionend"||!ha&&Yl(G,q)?(G=dn(),Zt=Vt=Xe=null,Ui=!1,G):null;switch(G){case"paste":return null;case"keypress":if(!(q.ctrlKey||q.altKey||q.metaKey)||q.ctrlKey&&q.altKey){if(q.char&&1<q.char.length)return q.char;if(q.which)return String.fromCharCode(q.which)}return null;case"compositionend":return Hl&&q.locale!=="ko"?null:q.data;default:return null}}var Uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zl(G){var q=G&&G.nodeName&&G.nodeName.toLowerCase();return q==="input"?!!Uh[G.type]:q==="textarea"}function Ql(G,q,Z,te){xt(te),q=ao(q,"onChange"),0<q.length&&(Z=new oa("onChange","change",null,Z,te),G.push({event:Z,listeners:q}))}var _s=null,xs=null;function Vh(G){gu(G,0)}function no(G){var q=Hi(G);if(et(q))return G}function zh(G,q){if(G==="change")return q}var Jl=!1;if(F){var fa;if(F){var pa="oninput"in document;if(!pa){var eu=document.createElement("div");eu.setAttribute("oninput","return;"),pa=typeof eu.oninput=="function"}fa=pa}else fa=!1;Jl=fa&&(!document.documentMode||9<document.documentMode)}function tu(){_s&&(_s.detachEvent("onpropertychange",ru),xs=_s=null)}function ru(G){if(G.propertyName==="value"&&no(xs)){var q=[];Ql(q,xs,G,gt(G)),_n(Vh,q)}}function Gh(G,q,Z){G==="focusin"?(tu(),_s=q,xs=Z,_s.attachEvent("onpropertychange",ru)):G==="focusout"&&tu()}function Wh(G){if(G==="selectionchange"||G==="keyup"||G==="keydown")return no(xs)}function Hh(G,q){if(G==="click")return no(q)}function qh(G,q){if(G==="input"||G==="change")return no(q)}function Xh(G,q){return G===q&&(G!==0||1/G===1/q)||G!==G&&q!==q}var Cn=typeof Object.is=="function"?Object.is:Xh;function ws(G,q){if(Cn(G,q))return!0;if(typeof G!="object"||G===null||typeof q!="object"||q===null)return!1;var Z=Object.keys(G),te=Object.keys(q);if(Z.length!==te.length)return!1;for(te=0;te<Z.length;te++){var ae=Z[te];if(!B.call(q,ae)||!Cn(G[ae],q[ae]))return!1}return!0}function nu(G){for(;G&&G.firstChild;)G=G.firstChild;return G}function iu(G,q){var Z=nu(G);G=0;for(var te;Z;){if(Z.nodeType===3){if(te=G+Z.textContent.length,G<=q&&te>=q)return{node:Z,offset:q-G};G=te}e:{for(;Z;){if(Z.nextSibling){Z=Z.nextSibling;break e}Z=Z.parentNode}Z=void 0}Z=nu(Z)}}function su(G,q){return G&&q?G===q?!0:G&&G.nodeType===3?!1:q&&q.nodeType===3?su(G,q.parentNode):"contains"in G?G.contains(q):G.compareDocumentPosition?!!(G.compareDocumentPosition(q)&16):!1:!1}function ou(){for(var G=window,q=Je();q instanceof G.HTMLIFrameElement;){try{var Z=typeof q.contentWindow.location.href=="string"}catch{Z=!1}if(Z)G=q.contentWindow;else break;q=Je(G.document)}return q}function ma(G){var q=G&&G.nodeName&&G.nodeName.toLowerCase();return q&&(q==="input"&&(G.type==="text"||G.type==="search"||G.type==="tel"||G.type==="url"||G.type==="password")||q==="textarea"||G.contentEditable==="true")}function Yh(G){var q=ou(),Z=G.focusedElem,te=G.selectionRange;if(q!==Z&&Z&&Z.ownerDocument&&su(Z.ownerDocument.documentElement,Z)){if(te!==null&&ma(Z)){if(q=te.start,G=te.end,G===void 0&&(G=q),"selectionStart"in Z)Z.selectionStart=q,Z.selectionEnd=Math.min(G,Z.value.length);else if(G=(q=Z.ownerDocument||document)&&q.defaultView||window,G.getSelection){G=G.getSelection();var ae=Z.textContent.length,ue=Math.min(te.start,ae);te=te.end===void 0?ue:Math.min(te.end,ae),!G.extend&&ue>te&&(ae=te,te=ue,ue=ae),ae=iu(Z,ue);var _e=iu(Z,te);ae&&_e&&(G.rangeCount!==1||G.anchorNode!==ae.node||G.anchorOffset!==ae.offset||G.focusNode!==_e.node||G.focusOffset!==_e.offset)&&(q=q.createRange(),q.setStart(ae.node,ae.offset),G.removeAllRanges(),ue>te?(G.addRange(q),G.extend(_e.node,_e.offset)):(q.setEnd(_e.node,_e.offset),G.addRange(q)))}}for(q=[],G=Z;G=G.parentNode;)G.nodeType===1&&q.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<q.length;Z++)G=q[Z],G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}var Kh=F&&"documentMode"in document&&11>=document.documentMode,Vi=null,ga=null,Ss=null,ya=!1;function au(G,q,Z){var te=Z.window===Z?Z.document:Z.nodeType===9?Z:Z.ownerDocument;ya||Vi==null||Vi!==Je(te)||(te=Vi,"selectionStart"in te&&ma(te)?te={start:te.selectionStart,end:te.selectionEnd}:(te=(te.ownerDocument&&te.ownerDocument.defaultView||window).getSelection(),te={anchorNode:te.anchorNode,anchorOffset:te.anchorOffset,focusNode:te.focusNode,focusOffset:te.focusOffset}),Ss&&ws(Ss,te)||(Ss=te,te=ao(ga,"onSelect"),0<te.length&&(q=new oa("onSelect","select",null,q,Z),G.push({event:q,listeners:te}),q.target=Vi)))}function io(G,q){var Z={};return Z[G.toLowerCase()]=q.toLowerCase(),Z["Webkit"+G]="webkit"+q,Z["Moz"+G]="moz"+q,Z}var zi={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionend:io("Transition","TransitionEnd")},va={},lu={};F&&(lu=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function so(G){if(va[G])return va[G];if(!zi[G])return G;var q=zi[G],Z;for(Z in q)if(q.hasOwnProperty(Z)&&Z in lu)return va[G]=q[Z];return G}var uu=so("animationend"),cu=so("animationiteration"),du=so("animationstart"),hu=so("transitionend"),fu=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(G,q){fu.set(G,q),R(q,[G])}for(var ba=0;ba<pu.length;ba++){var _a=pu[ba],Zh=_a.toLowerCase(),Qh=_a[0].toUpperCase()+_a.slice(1);ri(Zh,"on"+Qh)}ri(uu,"onAnimationEnd"),ri(cu,"onAnimationIteration"),ri(du,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(hu,"onTransitionEnd"),I("onMouseEnter",["mouseout","mouseover"]),I("onMouseLeave",["mouseout","mouseover"]),I("onPointerEnter",["pointerout","pointerover"]),I("onPointerLeave",["pointerout","pointerover"]),R("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),R("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),R("onBeforeInput",["compositionend","keypress","textInput","paste"]),R("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),R("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),R("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function mu(G,q,Z){var te=G.type||"unknown-event";G.currentTarget=Z,Ee(te,q,void 0,G),G.currentTarget=null}function gu(G,q){q=(q&4)!==0;for(var Z=0;Z<G.length;Z++){var te=G[Z],ae=te.event;te=te.listeners;e:{var ue=void 0;if(q)for(var _e=te.length-1;0<=_e;_e--){var Ce=te[_e],Oe=Ce.instance,He=Ce.currentTarget;if(Ce=Ce.listener,Oe!==ue&&ae.isPropagationStopped())break e;mu(ae,Ce,He),ue=Oe}else for(_e=0;_e<te.length;_e++){if(Ce=te[_e],Oe=Ce.instance,He=Ce.currentTarget,Ce=Ce.listener,Oe!==ue&&ae.isPropagationStopped())break e;mu(ae,Ce,He),ue=Oe}}}if(Jr)throw G=un,Jr=!1,un=null,G}function rr(G,q){var Z=q[Aa];Z===void 0&&(Z=q[Aa]=new Set);var te=G+"__bubble";Z.has(te)||(yu(q,G,2,!1),Z.add(te))}function xa(G,q,Z){var te=0;q&&(te|=4),yu(Z,G,te,q)}var oo="_reactListening"+Math.random().toString(36).slice(2);function Ts(G){if(!G[oo]){G[oo]=!0,C.forEach(function(Z){Z!=="selectionchange"&&(Jh.has(Z)||xa(Z,!1,G),xa(Z,!0,G))});var q=G.nodeType===9?G:G.ownerDocument;q===null||q[oo]||(q[oo]=!0,xa("selectionchange",!1,q))}}function yu(G,q,Z,te){switch($r(q)){case 1:var ae=wt;break;case 4:ae=Nt;break;default:ae=Dt}Z=ae.bind(null,q,Z,G),ae=void 0,!Dr||q!=="touchstart"&&q!=="touchmove"&&q!=="wheel"||(ae=!0),te?ae!==void 0?G.addEventListener(q,Z,{capture:!0,passive:ae}):G.addEventListener(q,Z,!0):ae!==void 0?G.addEventListener(q,Z,{passive:ae}):G.addEventListener(q,Z,!1)}function wa(G,q,Z,te,ae){var ue=te;if((q&1)===0&&(q&2)===0&&te!==null)e:for(;;){if(te===null)return;var _e=te.tag;if(_e===3||_e===4){var Ce=te.stateNode.containerInfo;if(Ce===ae||Ce.nodeType===8&&Ce.parentNode===ae)break;if(_e===4)for(_e=te.return;_e!==null;){var Oe=_e.tag;if((Oe===3||Oe===4)&&(Oe=_e.stateNode.containerInfo,Oe===ae||Oe.nodeType===8&&Oe.parentNode===ae))return;_e=_e.return}for(;Ce!==null;){if(_e=bi(Ce),_e===null)return;if(Oe=_e.tag,Oe===5||Oe===6){te=ue=_e;continue e}Ce=Ce.parentNode}}te=te.return}_n(function(){var He=ue,rt=gt(Z),nt=[];e:{var tt=fu.get(G);if(tt!==void 0){var dt=oa,ft=G;switch(G){case"keypress":if(Pn(Z)===0)break e;case"keydown":case"keyup":dt=Rh;break;case"focusin":ft="focus",dt=ca;break;case"focusout":ft="blur",dt=ca;break;case"beforeblur":case"afterblur":dt=ca;break;case"click":if(Z.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Mh;break;case uu:case cu:case du:dt=_h;break;case hu:dt=Dh;break;case"scroll":dt=mh;break;case"wheel":dt=Lh;break;case"copy":case"cut":case"paste":dt=wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Wl}var yt=(q&4)!==0,gr=!yt&&G==="scroll",Ve=yt?tt!==null?tt+"Capture":null:tt;yt=[];for(var Fe=He,Ge;Fe!==null;){Ge=Fe;var at=Ge.stateNode;if(Ge.tag===5&&at!==null&&(Ge=at,Ve!==null&&(at=Vr(Fe,Ve),at!=null&&yt.push(Ps(Fe,at,Ge)))),gr)break;Fe=Fe.return}0<yt.length&&(tt=new dt(tt,ft,null,Z,rt),nt.push({event:tt,listeners:yt}))}}if((q&7)===0){e:{if(tt=G==="mouseover"||G==="pointerover",dt=G==="mouseout"||G==="pointerout",tt&&Z!==Lt&&(ft=Z.relatedTarget||Z.fromElement)&&(bi(ft)||ft[zn]))break e;if((dt||tt)&&(tt=rt.window===rt?rt:(tt=rt.ownerDocument)?tt.defaultView||tt.parentWindow:window,dt?(ft=Z.relatedTarget||Z.toElement,dt=He,ft=ft?bi(ft):null,ft!==null&&(gr=Pe(ft),ft!==gr||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(dt=null,ft=He),dt!==ft)){if(yt=zl,at="onMouseLeave",Ve="onMouseEnter",Fe="mouse",(G==="pointerout"||G==="pointerover")&&(yt=Wl,at="onPointerLeave",Ve="onPointerEnter",Fe="pointer"),gr=dt==null?tt:Hi(dt),Ge=ft==null?tt:Hi(ft),tt=new yt(at,Fe+"leave",dt,Z,rt),tt.target=gr,tt.relatedTarget=Ge,at=null,bi(rt)===He&&(yt=new yt(Ve,Fe+"enter",ft,Z,rt),yt.target=Ge,yt.relatedTarget=gr,at=yt),gr=at,dt&&ft)t:{for(yt=dt,Ve=ft,Fe=0,Ge=yt;Ge;Ge=Gi(Ge))Fe++;for(Ge=0,at=Ve;at;at=Gi(at))Ge++;for(;0<Fe-Ge;)yt=Gi(yt),Fe--;for(;0<Ge-Fe;)Ve=Gi(Ve),Ge--;for(;Fe--;){if(yt===Ve||Ve!==null&&yt===Ve.alternate)break t;yt=Gi(yt),Ve=Gi(Ve)}yt=null}else yt=null;dt!==null&&vu(nt,tt,dt,yt,!1),ft!==null&&gr!==null&&vu(nt,gr,ft,yt,!0)}}e:{if(tt=He?Hi(He):window,dt=tt.nodeName&&tt.nodeName.toLowerCase(),dt==="select"||dt==="input"&&tt.type==="file")var bt=zh;else if(Zl(tt))if(Jl)bt=qh;else{bt=Wh;var Tt=Gh}else(dt=tt.nodeName)&&dt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(bt=Hh);if(bt&&(bt=bt(G,He))){Ql(nt,bt,Z,rt);break e}Tt&&Tt(G,tt,He),G==="focusout"&&(Tt=tt._wrapperState)&&Tt.controlled&&tt.type==="number"&&ar(tt,"number",tt.value)}switch(Tt=He?Hi(He):window,G){case"focusin":(Zl(Tt)||Tt.contentEditable==="true")&&(Vi=Tt,ga=He,Ss=null);break;case"focusout":Ss=ga=Vi=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,au(nt,Z,rt);break;case"selectionchange":if(Kh)break;case"keydown":case"keyup":au(nt,Z,rt)}var Pt;if(ha)e:{switch(G){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Ui?Yl(G,Z)&&(At="onCompositionEnd"):G==="keydown"&&Z.keyCode===229&&(At="onCompositionStart");At&&(Hl&&Z.locale!=="ko"&&(Ui||At!=="onCompositionStart"?At==="onCompositionEnd"&&Ui&&(Pt=dn()):(Xe=rt,Vt="value"in Xe?Xe.value:Xe.textContent,Ui=!0)),Tt=ao(He,At),0<Tt.length&&(At=new Gl(At,G,null,Z,rt),nt.push({event:At,listeners:Tt}),Pt?At.data=Pt:(Pt=Kl(Z),Pt!==null&&(At.data=Pt)))),(Pt=Nh?Bh(G,Z):jh(G,Z))&&(He=ao(He,"onBeforeInput"),0<He.length&&(rt=new Gl("onBeforeInput","beforeinput",null,Z,rt),nt.push({event:rt,listeners:He}),rt.data=Pt))}gu(nt,q)})}function Ps(G,q,Z){return{instance:G,listener:q,currentTarget:Z}}function ao(G,q){for(var Z=q+"Capture",te=[];G!==null;){var ae=G,ue=ae.stateNode;ae.tag===5&&ue!==null&&(ae=ue,ue=Vr(G,Z),ue!=null&&te.unshift(Ps(G,ue,ae)),ue=Vr(G,q),ue!=null&&te.push(Ps(G,ue,ae))),G=G.return}return te}function Gi(G){if(G===null)return null;do G=G.return;while(G&&G.tag!==5);return G||null}function vu(G,q,Z,te,ae){for(var ue=q._reactName,_e=[];Z!==null&&Z!==te;){var Ce=Z,Oe=Ce.alternate,He=Ce.stateNode;if(Oe!==null&&Oe===te)break;Ce.tag===5&&He!==null&&(Ce=He,ae?(Oe=Vr(Z,ue),Oe!=null&&_e.unshift(Ps(Z,Oe,Ce))):ae||(Oe=Vr(Z,ue),Oe!=null&&_e.push(Ps(Z,Oe,Ce)))),Z=Z.return}_e.length!==0&&G.push({event:q,listeners:_e})}var ef=/\r\n?/g,tf=/\u0000|\uFFFD/g;function bu(G){return(typeof G=="string"?G:""+G).replace(ef,`
`).replace(tf,"")}function lo(G,q,Z){if(q=bu(q),bu(G)!==q&&Z)throw Error(E(425))}function uo(){}var Sa=null,Ea=null;function Ta(G,q){return G==="textarea"||G==="noscript"||typeof q.children=="string"||typeof q.children=="number"||typeof q.dangerouslySetInnerHTML=="object"&&q.dangerouslySetInnerHTML!==null&&q.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,rf=typeof clearTimeout=="function"?clearTimeout:void 0,_u=typeof Promise=="function"?Promise:void 0,nf=typeof queueMicrotask=="function"?queueMicrotask:typeof _u<"u"?function(G){return _u.resolve(null).then(G).catch(sf)}:Pa;function sf(G){setTimeout(function(){throw G})}function Ca(G,q){var Z=q,te=0;do{var ae=Z.nextSibling;if(G.removeChild(Z),ae&&ae.nodeType===8)if(Z=ae.data,Z==="/$"){if(te===0){G.removeChild(ae),Be(q);return}te--}else Z!=="$"&&Z!=="$?"&&Z!=="$!"||te++;Z=ae}while(Z);Be(q)}function ni(G){for(;G!=null;G=G.nextSibling){var q=G.nodeType;if(q===1||q===3)break;if(q===8){if(q=G.data,q==="$"||q==="$!"||q==="$?")break;if(q==="/$")return null}}return G}function xu(G){G=G.previousSibling;for(var q=0;G;){if(G.nodeType===8){var Z=G.data;if(Z==="$"||Z==="$!"||Z==="$?"){if(q===0)return G;q--}else Z==="/$"&&q++}G=G.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),$n="__reactFiber$"+Wi,Cs="__reactProps$"+Wi,zn="__reactContainer$"+Wi,Aa="__reactEvents$"+Wi,of="__reactListeners$"+Wi,af="__reactHandles$"+Wi;function bi(G){var q=G[$n];if(q)return q;for(var Z=G.parentNode;Z;){if(q=Z[zn]||Z[$n]){if(Z=q.alternate,q.child!==null||Z!==null&&Z.child!==null)for(G=xu(G);G!==null;){if(Z=G[$n])return Z;G=xu(G)}return q}G=Z,Z=G.parentNode}return null}function As(G){return G=G[$n]||G[zn],!G||G.tag!==5&&G.tag!==6&&G.tag!==13&&G.tag!==3?null:G}function Hi(G){if(G.tag===5||G.tag===6)return G.stateNode;throw Error(E(33))}function co(G){return G[Cs]||null}var Ra=[],qi=-1;function ii(G){return{current:G}}function nr(G){0>qi||(G.current=Ra[qi],Ra[qi]=null,qi--)}function tr(G,q){qi++,Ra[qi]=G.current,G.current=q}var si={},Cr=ii(si),qr=ii(!1),_i=si;function Xi(G,q){var Z=G.type.contextTypes;if(!Z)return si;var te=G.stateNode;if(te&&te.__reactInternalMemoizedUnmaskedChildContext===q)return te.__reactInternalMemoizedMaskedChildContext;var ae={},ue;for(ue in Z)ae[ue]=q[ue];return te&&(G=G.stateNode,G.__reactInternalMemoizedUnmaskedChildContext=q,G.__reactInternalMemoizedMaskedChildContext=ae),ae}function Xr(G){return G=G.childContextTypes,G!=null}function ho(){nr(qr),nr(Cr)}function wu(G,q,Z){if(Cr.current!==si)throw Error(E(168));tr(Cr,q),tr(qr,Z)}function Su(G,q,Z){var te=G.stateNode;if(q=q.childContextTypes,typeof te.getChildContext!="function")return Z;te=te.getChildContext();for(var ae in te)if(!(ae in q))throw Error(E(108,Ye(G)||"Unknown",ae));return be({},Z,te)}function fo(G){return G=(G=G.stateNode)&&G.__reactInternalMemoizedMergedChildContext||si,_i=Cr.current,tr(Cr,G),tr(qr,qr.current),!0}function Eu(G,q,Z){var te=G.stateNode;if(!te)throw Error(E(169));Z?(G=Su(G,q,_i),te.__reactInternalMemoizedMergedChildContext=G,nr(qr),nr(Cr),tr(Cr,G)):nr(qr),tr(qr,Z)}var Gn=null,po=!1,Ia=!1;function Tu(G){Gn===null?Gn=[G]:Gn.push(G)}function lf(G){po=!0,Tu(G)}function oi(){if(!Ia&&Gn!==null){Ia=!0;var G=0,q=Gt;try{var Z=Gn;for(Gt=1;G<Z.length;G++){var te=Z[G];do te=te(!0);while(te!==null)}Gn=null,po=!1}catch(ae){throw Gn!==null&&(Gn=Gn.slice(G+1)),mt(Ze,oi),ae}finally{Gt=q,Ia=!1}}return null}var Yi=[],Ki=0,mo=null,go=0,hn=[],fn=0,xi=null,Wn=1,Hn="";function wi(G,q){Yi[Ki++]=go,Yi[Ki++]=mo,mo=G,go=q}function Pu(G,q,Z){hn[fn++]=Wn,hn[fn++]=Hn,hn[fn++]=xi,xi=G;var te=Wn;G=Hn;var ae=32-er(te)-1;te&=~(1<<ae),Z+=1;var ue=32-er(q)+ae;if(30<ue){var _e=ae-ae%5;ue=(te&(1<<_e)-1).toString(32),te>>=_e,ae-=_e,Wn=1<<32-er(q)+ae|Z<<ae|te,Hn=ue+G}else Wn=1<<ue|Z<<ae|te,Hn=G}function Oa(G){G.return!==null&&(wi(G,1),Pu(G,1,0))}function Ma(G){for(;G===mo;)mo=Yi[--Ki],Yi[Ki]=null,go=Yi[--Ki],Yi[Ki]=null;for(;G===xi;)xi=hn[--fn],hn[fn]=null,Hn=hn[--fn],hn[fn]=null,Wn=hn[--fn],hn[fn]=null}var tn=null,rn=null,sr=!1,An=null;function Cu(G,q){var Z=yn(5,null,null,0);Z.elementType="DELETED",Z.stateNode=q,Z.return=G,q=G.deletions,q===null?(G.deletions=[Z],G.flags|=16):q.push(Z)}function Au(G,q){switch(G.tag){case 5:var Z=G.type;return q=q.nodeType!==1||Z.toLowerCase()!==q.nodeName.toLowerCase()?null:q,q!==null?(G.stateNode=q,tn=G,rn=ni(q.firstChild),!0):!1;case 6:return q=G.pendingProps===""||q.nodeType!==3?null:q,q!==null?(G.stateNode=q,tn=G,rn=null,!0):!1;case 13:return q=q.nodeType!==8?null:q,q!==null?(Z=xi!==null?{id:Wn,overflow:Hn}:null,G.memoizedState={dehydrated:q,treeContext:Z,retryLane:1073741824},Z=yn(18,null,null,0),Z.stateNode=q,Z.return=G,G.child=Z,tn=G,rn=null,!0):!1;default:return!1}}function ka(G){return(G.mode&1)!==0&&(G.flags&128)===0}function Da(G){if(sr){var q=rn;if(q){var Z=q;if(!Au(G,q)){if(ka(G))throw Error(E(418));q=ni(Z.nextSibling);var te=tn;q&&Au(G,q)?Cu(te,Z):(G.flags=G.flags&-4097|2,sr=!1,tn=G)}}else{if(ka(G))throw Error(E(418));G.flags=G.flags&-4097|2,sr=!1,tn=G}}}function Ru(G){for(G=G.return;G!==null&&G.tag!==5&&G.tag!==3&&G.tag!==13;)G=G.return;tn=G}function yo(G){if(G!==tn)return!1;if(!sr)return Ru(G),sr=!0,!1;var q;if((q=G.tag!==3)&&!(q=G.tag!==5)&&(q=G.type,q=q!=="head"&&q!=="body"&&!Ta(G.type,G.memoizedProps)),q&&(q=rn)){if(ka(G))throw Iu(),Error(E(418));for(;q;)Cu(G,q),q=ni(q.nextSibling)}if(Ru(G),G.tag===13){if(G=G.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(E(317));e:{for(G=G.nextSibling,q=0;G;){if(G.nodeType===8){var Z=G.data;if(Z==="/$"){if(q===0){rn=ni(G.nextSibling);break e}q--}else Z!=="$"&&Z!=="$!"&&Z!=="$?"||q++}G=G.nextSibling}rn=null}}else rn=tn?ni(G.stateNode.nextSibling):null;return!0}function Iu(){for(var G=rn;G;)G=ni(G.nextSibling)}function Zi(){rn=tn=null,sr=!1}function Fa(G){An===null?An=[G]:An.push(G)}var uf=ee.ReactCurrentBatchConfig;function Rs(G,q,Z){if(G=Z.ref,G!==null&&typeof G!="function"&&typeof G!="object"){if(Z._owner){if(Z=Z._owner,Z){if(Z.tag!==1)throw Error(E(309));var te=Z.stateNode}if(!te)throw Error(E(147,G));var ae=te,ue=""+G;return q!==null&&q.ref!==null&&typeof q.ref=="function"&&q.ref._stringRef===ue?q.ref:(q=function(_e){var Ce=ae.refs;_e===null?delete Ce[ue]:Ce[ue]=_e},q._stringRef=ue,q)}if(typeof G!="string")throw Error(E(284));if(!Z._owner)throw Error(E(290,G))}return G}function vo(G,q){throw G=Object.prototype.toString.call(q),Error(E(31,G==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":G))}function Ou(G){var q=G._init;return q(G._payload)}function Mu(G){function q(Ve,Fe){if(G){var Ge=Ve.deletions;Ge===null?(Ve.deletions=[Fe],Ve.flags|=16):Ge.push(Fe)}}function Z(Ve,Fe){if(!G)return null;for(;Fe!==null;)q(Ve,Fe),Fe=Fe.sibling;return null}function te(Ve,Fe){for(Ve=new Map;Fe!==null;)Fe.key!==null?Ve.set(Fe.key,Fe):Ve.set(Fe.index,Fe),Fe=Fe.sibling;return Ve}function ae(Ve,Fe){return Ve=pi(Ve,Fe),Ve.index=0,Ve.sibling=null,Ve}function ue(Ve,Fe,Ge){return Ve.index=Ge,G?(Ge=Ve.alternate,Ge!==null?(Ge=Ge.index,Ge<Fe?(Ve.flags|=2,Fe):Ge):(Ve.flags|=2,Fe)):(Ve.flags|=1048576,Fe)}function _e(Ve){return G&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Ce(Ve,Fe,Ge,at){return Fe===null||Fe.tag!==6?(Fe=Pl(Ge,Ve.mode,at),Fe.return=Ve,Fe):(Fe=ae(Fe,Ge),Fe.return=Ve,Fe)}function Oe(Ve,Fe,Ge,at){var bt=Ge.type;return bt===re?rt(Ve,Fe,Ge.props.children,at,Ge.key):Fe!==null&&(Fe.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===le&&Ou(bt)===Fe.type)?(at=ae(Fe,Ge.props),at.ref=Rs(Ve,Fe,Ge),at.return=Ve,at):(at=Vo(Ge.type,Ge.key,Ge.props,null,Ve.mode,at),at.ref=Rs(Ve,Fe,Ge),at.return=Ve,at)}function He(Ve,Fe,Ge,at){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Ge.containerInfo||Fe.stateNode.implementation!==Ge.implementation?(Fe=Cl(Ge,Ve.mode,at),Fe.return=Ve,Fe):(Fe=ae(Fe,Ge.children||[]),Fe.return=Ve,Fe)}function rt(Ve,Fe,Ge,at,bt){return Fe===null||Fe.tag!==7?(Fe=Ii(Ge,Ve.mode,at,bt),Fe.return=Ve,Fe):(Fe=ae(Fe,Ge),Fe.return=Ve,Fe)}function nt(Ve,Fe,Ge){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=Pl(""+Fe,Ve.mode,Ge),Fe.return=Ve,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case J:return Ge=Vo(Fe.type,Fe.key,Fe.props,null,Ve.mode,Ge),Ge.ref=Rs(Ve,null,Fe),Ge.return=Ve,Ge;case ie:return Fe=Cl(Fe,Ve.mode,Ge),Fe.return=Ve,Fe;case le:var at=Fe._init;return nt(Ve,at(Fe._payload),Ge)}if(Kt(Fe)||ve(Fe))return Fe=Ii(Fe,Ve.mode,Ge,null),Fe.return=Ve,Fe;vo(Ve,Fe)}return null}function tt(Ve,Fe,Ge,at){var bt=Fe!==null?Fe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return bt!==null?null:Ce(Ve,Fe,""+Ge,at);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case J:return Ge.key===bt?Oe(Ve,Fe,Ge,at):null;case ie:return Ge.key===bt?He(Ve,Fe,Ge,at):null;case le:return bt=Ge._init,tt(Ve,Fe,bt(Ge._payload),at)}if(Kt(Ge)||ve(Ge))return bt!==null?null:rt(Ve,Fe,Ge,at,null);vo(Ve,Ge)}return null}function dt(Ve,Fe,Ge,at,bt){if(typeof at=="string"&&at!==""||typeof at=="number")return Ve=Ve.get(Ge)||null,Ce(Fe,Ve,""+at,bt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case J:return Ve=Ve.get(at.key===null?Ge:at.key)||null,Oe(Fe,Ve,at,bt);case ie:return Ve=Ve.get(at.key===null?Ge:at.key)||null,He(Fe,Ve,at,bt);case le:var Tt=at._init;return dt(Ve,Fe,Ge,Tt(at._payload),bt)}if(Kt(at)||ve(at))return Ve=Ve.get(Ge)||null,rt(Fe,Ve,at,bt,null);vo(Fe,at)}return null}function ft(Ve,Fe,Ge,at){for(var bt=null,Tt=null,Pt=Fe,At=Fe=0,wr=null;Pt!==null&&At<Ge.length;At++){Pt.index>At?(wr=Pt,Pt=null):wr=Pt.sibling;var Ht=tt(Ve,Pt,Ge[At],at);if(Ht===null){Pt===null&&(Pt=wr);break}G&&Pt&&Ht.alternate===null&&q(Ve,Pt),Fe=ue(Ht,Fe,At),Tt===null?bt=Ht:Tt.sibling=Ht,Tt=Ht,Pt=wr}if(At===Ge.length)return Z(Ve,Pt),sr&&wi(Ve,At),bt;if(Pt===null){for(;At<Ge.length;At++)Pt=nt(Ve,Ge[At],at),Pt!==null&&(Fe=ue(Pt,Fe,At),Tt===null?bt=Pt:Tt.sibling=Pt,Tt=Pt);return sr&&wi(Ve,At),bt}for(Pt=te(Ve,Pt);At<Ge.length;At++)wr=dt(Pt,Ve,At,Ge[At],at),wr!==null&&(G&&wr.alternate!==null&&Pt.delete(wr.key===null?At:wr.key),Fe=ue(wr,Fe,At),Tt===null?bt=wr:Tt.sibling=wr,Tt=wr);return G&&Pt.forEach(function(mi){return q(Ve,mi)}),sr&&wi(Ve,At),bt}function yt(Ve,Fe,Ge,at){var bt=ve(Ge);if(typeof bt!="function")throw Error(E(150));if(Ge=bt.call(Ge),Ge==null)throw Error(E(151));for(var Tt=bt=null,Pt=Fe,At=Fe=0,wr=null,Ht=Ge.next();Pt!==null&&!Ht.done;At++,Ht=Ge.next()){Pt.index>At?(wr=Pt,Pt=null):wr=Pt.sibling;var mi=tt(Ve,Pt,Ht.value,at);if(mi===null){Pt===null&&(Pt=wr);break}G&&Pt&&mi.alternate===null&&q(Ve,Pt),Fe=ue(mi,Fe,At),Tt===null?bt=mi:Tt.sibling=mi,Tt=mi,Pt=wr}if(Ht.done)return Z(Ve,Pt),sr&&wi(Ve,At),bt;if(Pt===null){for(;!Ht.done;At++,Ht=Ge.next())Ht=nt(Ve,Ht.value,at),Ht!==null&&(Fe=ue(Ht,Fe,At),Tt===null?bt=Ht:Tt.sibling=Ht,Tt=Ht);return sr&&wi(Ve,At),bt}for(Pt=te(Ve,Pt);!Ht.done;At++,Ht=Ge.next())Ht=dt(Pt,Ve,At,Ht.value,at),Ht!==null&&(G&&Ht.alternate!==null&&Pt.delete(Ht.key===null?At:Ht.key),Fe=ue(Ht,Fe,At),Tt===null?bt=Ht:Tt.sibling=Ht,Tt=Ht);return G&&Pt.forEach(function(Vf){return q(Ve,Vf)}),sr&&wi(Ve,At),bt}function gr(Ve,Fe,Ge,at){if(typeof Ge=="object"&&Ge!==null&&Ge.type===re&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case J:e:{for(var bt=Ge.key,Tt=Fe;Tt!==null;){if(Tt.key===bt){if(bt=Ge.type,bt===re){if(Tt.tag===7){Z(Ve,Tt.sibling),Fe=ae(Tt,Ge.props.children),Fe.return=Ve,Ve=Fe;break e}}else if(Tt.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===le&&Ou(bt)===Tt.type){Z(Ve,Tt.sibling),Fe=ae(Tt,Ge.props),Fe.ref=Rs(Ve,Tt,Ge),Fe.return=Ve,Ve=Fe;break e}Z(Ve,Tt);break}else q(Ve,Tt);Tt=Tt.sibling}Ge.type===re?(Fe=Ii(Ge.props.children,Ve.mode,at,Ge.key),Fe.return=Ve,Ve=Fe):(at=Vo(Ge.type,Ge.key,Ge.props,null,Ve.mode,at),at.ref=Rs(Ve,Fe,Ge),at.return=Ve,Ve=at)}return _e(Ve);case ie:e:{for(Tt=Ge.key;Fe!==null;){if(Fe.key===Tt)if(Fe.tag===4&&Fe.stateNode.containerInfo===Ge.containerInfo&&Fe.stateNode.implementation===Ge.implementation){Z(Ve,Fe.sibling),Fe=ae(Fe,Ge.children||[]),Fe.return=Ve,Ve=Fe;break e}else{Z(Ve,Fe);break}else q(Ve,Fe);Fe=Fe.sibling}Fe=Cl(Ge,Ve.mode,at),Fe.return=Ve,Ve=Fe}return _e(Ve);case le:return Tt=Ge._init,gr(Ve,Fe,Tt(Ge._payload),at)}if(Kt(Ge))return ft(Ve,Fe,Ge,at);if(ve(Ge))return yt(Ve,Fe,Ge,at);vo(Ve,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?(Ge=""+Ge,Fe!==null&&Fe.tag===6?(Z(Ve,Fe.sibling),Fe=ae(Fe,Ge),Fe.return=Ve,Ve=Fe):(Z(Ve,Fe),Fe=Pl(Ge,Ve.mode,at),Fe.return=Ve,Ve=Fe),_e(Ve)):Z(Ve,Fe)}return gr}var Qi=Mu(!0),ku=Mu(!1),bo=ii(null),_o=null,Ji=null,La=null;function $a(){La=Ji=_o=null}function Na(G){var q=bo.current;nr(bo),G._currentValue=q}function Ba(G,q,Z){for(;G!==null;){var te=G.alternate;if((G.childLanes&q)!==q?(G.childLanes|=q,te!==null&&(te.childLanes|=q)):te!==null&&(te.childLanes&q)!==q&&(te.childLanes|=q),G===Z)break;G=G.return}}function es(G,q){_o=G,La=Ji=null,G=G.dependencies,G!==null&&G.firstContext!==null&&((G.lanes&q)!==0&&(Yr=!0),G.firstContext=null)}function pn(G){var q=G._currentValue;if(La!==G)if(G={context:G,memoizedValue:q,next:null},Ji===null){if(_o===null)throw Error(E(308));Ji=G,_o.dependencies={lanes:0,firstContext:G}}else Ji=Ji.next=G;return q}var Si=null;function ja(G){Si===null?Si=[G]:Si.push(G)}function Du(G,q,Z,te){var ae=q.interleaved;return ae===null?(Z.next=Z,ja(q)):(Z.next=ae.next,ae.next=Z),q.interleaved=Z,qn(G,te)}function qn(G,q){G.lanes|=q;var Z=G.alternate;for(Z!==null&&(Z.lanes|=q),Z=G,G=G.return;G!==null;)G.childLanes|=q,Z=G.alternate,Z!==null&&(Z.childLanes|=q),Z=G,G=G.return;return Z.tag===3?Z.stateNode:null}var ai=!1;function Ua(G){G.updateQueue={baseState:G.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fu(G,q){G=G.updateQueue,q.updateQueue===G&&(q.updateQueue={baseState:G.baseState,firstBaseUpdate:G.firstBaseUpdate,lastBaseUpdate:G.lastBaseUpdate,shared:G.shared,effects:G.effects})}function Xn(G,q){return{eventTime:G,lane:q,tag:0,payload:null,callback:null,next:null}}function li(G,q,Z){var te=G.updateQueue;if(te===null)return null;if(te=te.shared,(Wt&2)!==0){var ae=te.pending;return ae===null?q.next=q:(q.next=ae.next,ae.next=q),te.pending=q,qn(G,Z)}return ae=te.interleaved,ae===null?(q.next=q,ja(te)):(q.next=ae.next,ae.next=q),te.interleaved=q,qn(G,Z)}function xo(G,q,Z){if(q=q.updateQueue,q!==null&&(q=q.shared,(Z&4194240)!==0)){var te=q.lanes;te&=G.pendingLanes,Z|=te,q.lanes=Z,$i(G,Z)}}function Lu(G,q){var Z=G.updateQueue,te=G.alternate;if(te!==null&&(te=te.updateQueue,Z===te)){var ae=null,ue=null;if(Z=Z.firstBaseUpdate,Z!==null){do{var _e={eventTime:Z.eventTime,lane:Z.lane,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null};ue===null?ae=ue=_e:ue=ue.next=_e,Z=Z.next}while(Z!==null);ue===null?ae=ue=q:ue=ue.next=q}else ae=ue=q;Z={baseState:te.baseState,firstBaseUpdate:ae,lastBaseUpdate:ue,shared:te.shared,effects:te.effects},G.updateQueue=Z;return}G=Z.lastBaseUpdate,G===null?Z.firstBaseUpdate=q:G.next=q,Z.lastBaseUpdate=q}function wo(G,q,Z,te){var ae=G.updateQueue;ai=!1;var ue=ae.firstBaseUpdate,_e=ae.lastBaseUpdate,Ce=ae.shared.pending;if(Ce!==null){ae.shared.pending=null;var Oe=Ce,He=Oe.next;Oe.next=null,_e===null?ue=He:_e.next=He,_e=Oe;var rt=G.alternate;rt!==null&&(rt=rt.updateQueue,Ce=rt.lastBaseUpdate,Ce!==_e&&(Ce===null?rt.firstBaseUpdate=He:Ce.next=He,rt.lastBaseUpdate=Oe))}if(ue!==null){var nt=ae.baseState;_e=0,rt=He=Oe=null,Ce=ue;do{var tt=Ce.lane,dt=Ce.eventTime;if((te&tt)===tt){rt!==null&&(rt=rt.next={eventTime:dt,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var ft=G,yt=Ce;switch(tt=q,dt=Z,yt.tag){case 1:if(ft=yt.payload,typeof ft=="function"){nt=ft.call(dt,nt,tt);break e}nt=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=yt.payload,tt=typeof ft=="function"?ft.call(dt,nt,tt):ft,tt==null)break e;nt=be({},nt,tt);break e;case 2:ai=!0}}Ce.callback!==null&&Ce.lane!==0&&(G.flags|=64,tt=ae.effects,tt===null?ae.effects=[Ce]:tt.push(Ce))}else dt={eventTime:dt,lane:tt,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},rt===null?(He=rt=dt,Oe=nt):rt=rt.next=dt,_e|=tt;if(Ce=Ce.next,Ce===null){if(Ce=ae.shared.pending,Ce===null)break;tt=Ce,Ce=tt.next,tt.next=null,ae.lastBaseUpdate=tt,ae.shared.pending=null}}while(!0);if(rt===null&&(Oe=nt),ae.baseState=Oe,ae.firstBaseUpdate=He,ae.lastBaseUpdate=rt,q=ae.shared.interleaved,q!==null){ae=q;do _e|=ae.lane,ae=ae.next;while(ae!==q)}else ue===null&&(ae.shared.lanes=0);Pi|=_e,G.lanes=_e,G.memoizedState=nt}}function $u(G,q,Z){if(G=q.effects,q.effects=null,G!==null)for(q=0;q<G.length;q++){var te=G[q],ae=te.callback;if(ae!==null){if(te.callback=null,te=Z,typeof ae!="function")throw Error(E(191,ae));ae.call(te)}}}var Is={},Nn=ii(Is),Os=ii(Is),Ms=ii(Is);function Ei(G){if(G===Is)throw Error(E(174));return G}function Va(G,q){switch(tr(Ms,q),tr(Os,G),tr(Nn,Is),G=q.nodeType,G){case 9:case 11:q=(q=q.documentElement)?q.namespaceURI:on(null,"");break;default:G=G===8?q.parentNode:q,q=G.namespaceURI||null,G=G.tagName,q=on(q,G)}nr(Nn),tr(Nn,q)}function ts(){nr(Nn),nr(Os),nr(Ms)}function Nu(G){Ei(Ms.current);var q=Ei(Nn.current),Z=on(q,G.type);q!==Z&&(tr(Os,G),tr(Nn,Z))}function za(G){Os.current===G&&(nr(Nn),nr(Os))}var lr=ii(0);function So(G){for(var q=G;q!==null;){if(q.tag===13){var Z=q.memoizedState;if(Z!==null&&(Z=Z.dehydrated,Z===null||Z.data==="$?"||Z.data==="$!"))return q}else if(q.tag===19&&q.memoizedProps.revealOrder!==void 0){if((q.flags&128)!==0)return q}else if(q.child!==null){q.child.return=q,q=q.child;continue}if(q===G)break;for(;q.sibling===null;){if(q.return===null||q.return===G)return null;q=q.return}q.sibling.return=q.return,q=q.sibling}return null}var Ga=[];function Wa(){for(var G=0;G<Ga.length;G++)Ga[G]._workInProgressVersionPrimary=null;Ga.length=0}var Eo=ee.ReactCurrentDispatcher,Ha=ee.ReactCurrentBatchConfig,Ti=0,ur=null,vr=null,_r=null,To=!1,ks=!1,Ds=0,cf=0;function Ar(){throw Error(E(321))}function qa(G,q){if(q===null)return!1;for(var Z=0;Z<q.length&&Z<G.length;Z++)if(!Cn(G[Z],q[Z]))return!1;return!0}function Xa(G,q,Z,te,ae,ue){if(Ti=ue,ur=q,q.memoizedState=null,q.updateQueue=null,q.lanes=0,Eo.current=G===null||G.memoizedState===null?pf:mf,G=Z(te,ae),ks){ue=0;do{if(ks=!1,Ds=0,25<=ue)throw Error(E(301));ue+=1,_r=vr=null,q.updateQueue=null,Eo.current=gf,G=Z(te,ae)}while(ks)}if(Eo.current=Ao,q=vr!==null&&vr.next!==null,Ti=0,_r=vr=ur=null,To=!1,q)throw Error(E(300));return G}function Ya(){var G=Ds!==0;return Ds=0,G}function Bn(){var G={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?ur.memoizedState=_r=G:_r=_r.next=G,_r}function mn(){if(vr===null){var G=ur.alternate;G=G!==null?G.memoizedState:null}else G=vr.next;var q=_r===null?ur.memoizedState:_r.next;if(q!==null)_r=q,vr=G;else{if(G===null)throw Error(E(310));vr=G,G={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},_r===null?ur.memoizedState=_r=G:_r=_r.next=G}return _r}function Fs(G,q){return typeof q=="function"?q(G):q}function Ka(G){var q=mn(),Z=q.queue;if(Z===null)throw Error(E(311));Z.lastRenderedReducer=G;var te=vr,ae=te.baseQueue,ue=Z.pending;if(ue!==null){if(ae!==null){var _e=ae.next;ae.next=ue.next,ue.next=_e}te.baseQueue=ae=ue,Z.pending=null}if(ae!==null){ue=ae.next,te=te.baseState;var Ce=_e=null,Oe=null,He=ue;do{var rt=He.lane;if((Ti&rt)===rt)Oe!==null&&(Oe=Oe.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),te=He.hasEagerState?He.eagerState:G(te,He.action);else{var nt={lane:rt,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Oe===null?(Ce=Oe=nt,_e=te):Oe=Oe.next=nt,ur.lanes|=rt,Pi|=rt}He=He.next}while(He!==null&&He!==ue);Oe===null?_e=te:Oe.next=Ce,Cn(te,q.memoizedState)||(Yr=!0),q.memoizedState=te,q.baseState=_e,q.baseQueue=Oe,Z.lastRenderedState=te}if(G=Z.interleaved,G!==null){ae=G;do ue=ae.lane,ur.lanes|=ue,Pi|=ue,ae=ae.next;while(ae!==G)}else ae===null&&(Z.lanes=0);return[q.memoizedState,Z.dispatch]}function Za(G){var q=mn(),Z=q.queue;if(Z===null)throw Error(E(311));Z.lastRenderedReducer=G;var te=Z.dispatch,ae=Z.pending,ue=q.memoizedState;if(ae!==null){Z.pending=null;var _e=ae=ae.next;do ue=G(ue,_e.action),_e=_e.next;while(_e!==ae);Cn(ue,q.memoizedState)||(Yr=!0),q.memoizedState=ue,q.baseQueue===null&&(q.baseState=ue),Z.lastRenderedState=ue}return[ue,te]}function Bu(){}function ju(G,q){var Z=ur,te=mn(),ae=q(),ue=!Cn(te.memoizedState,ae);if(ue&&(te.memoizedState=ae,Yr=!0),te=te.queue,Qa(zu.bind(null,Z,te,G),[G]),te.getSnapshot!==q||ue||_r!==null&&_r.memoizedState.tag&1){if(Z.flags|=2048,Ls(9,Vu.bind(null,Z,te,ae,q),void 0,null),xr===null)throw Error(E(349));(Ti&30)!==0||Uu(Z,q,ae)}return ae}function Uu(G,q,Z){G.flags|=16384,G={getSnapshot:q,value:Z},q=ur.updateQueue,q===null?(q={lastEffect:null,stores:null},ur.updateQueue=q,q.stores=[G]):(Z=q.stores,Z===null?q.stores=[G]:Z.push(G))}function Vu(G,q,Z,te){q.value=Z,q.getSnapshot=te,Gu(q)&&Wu(G)}function zu(G,q,Z){return Z(function(){Gu(q)&&Wu(G)})}function Gu(G){var q=G.getSnapshot;G=G.value;try{var Z=q();return!Cn(G,Z)}catch{return!0}}function Wu(G){var q=qn(G,1);q!==null&&Mn(q,G,1,-1)}function Hu(G){var q=Bn();return typeof G=="function"&&(G=G()),q.memoizedState=q.baseState=G,G={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:G},q.queue=G,G=G.dispatch=ff.bind(null,ur,G),[q.memoizedState,G]}function Ls(G,q,Z,te){return G={tag:G,create:q,destroy:Z,deps:te,next:null},q=ur.updateQueue,q===null?(q={lastEffect:null,stores:null},ur.updateQueue=q,q.lastEffect=G.next=G):(Z=q.lastEffect,Z===null?q.lastEffect=G.next=G:(te=Z.next,Z.next=G,G.next=te,q.lastEffect=G)),G}function qu(){return mn().memoizedState}function Po(G,q,Z,te){var ae=Bn();ur.flags|=G,ae.memoizedState=Ls(1|q,Z,void 0,te===void 0?null:te)}function Co(G,q,Z,te){var ae=mn();te=te===void 0?null:te;var ue=void 0;if(vr!==null){var _e=vr.memoizedState;if(ue=_e.destroy,te!==null&&qa(te,_e.deps)){ae.memoizedState=Ls(q,Z,ue,te);return}}ur.flags|=G,ae.memoizedState=Ls(1|q,Z,ue,te)}function Xu(G,q){return Po(8390656,8,G,q)}function Qa(G,q){return Co(2048,8,G,q)}function Yu(G,q){return Co(4,2,G,q)}function Ku(G,q){return Co(4,4,G,q)}function Zu(G,q){if(typeof q=="function")return G=G(),q(G),function(){q(null)};if(q!=null)return G=G(),q.current=G,function(){q.current=null}}function Qu(G,q,Z){return Z=Z!=null?Z.concat([G]):null,Co(4,4,Zu.bind(null,q,G),Z)}function Ja(){}function Ju(G,q){var Z=mn();q=q===void 0?null:q;var te=Z.memoizedState;return te!==null&&q!==null&&qa(q,te[1])?te[0]:(Z.memoizedState=[G,q],G)}function ec(G,q){var Z=mn();q=q===void 0?null:q;var te=Z.memoizedState;return te!==null&&q!==null&&qa(q,te[1])?te[0]:(G=G(),Z.memoizedState=[G,q],G)}function tc(G,q,Z){return(Ti&21)===0?(G.baseState&&(G.baseState=!1,Yr=!0),G.memoizedState=Z):(Cn(Z,q)||(Z=fs(),ur.lanes|=Z,Pi|=Z,G.baseState=!0),q)}function df(G,q){var Z=Gt;Gt=Z!==0&&4>Z?Z:4,G(!0);var te=Ha.transition;Ha.transition={};try{G(!1),q()}finally{Gt=Z,Ha.transition=te}}function rc(){return mn().memoizedState}function hf(G,q,Z){var te=hi(G);if(Z={lane:te,action:Z,hasEagerState:!1,eagerState:null,next:null},nc(G))ic(q,Z);else if(Z=Du(G,q,Z,te),Z!==null){var ae=Br();Mn(Z,G,te,ae),sc(Z,q,te)}}function ff(G,q,Z){var te=hi(G),ae={lane:te,action:Z,hasEagerState:!1,eagerState:null,next:null};if(nc(G))ic(q,ae);else{var ue=G.alternate;if(G.lanes===0&&(ue===null||ue.lanes===0)&&(ue=q.lastRenderedReducer,ue!==null))try{var _e=q.lastRenderedState,Ce=ue(_e,Z);if(ae.hasEagerState=!0,ae.eagerState=Ce,Cn(Ce,_e)){var Oe=q.interleaved;Oe===null?(ae.next=ae,ja(q)):(ae.next=Oe.next,Oe.next=ae),q.interleaved=ae;return}}catch{}finally{}Z=Du(G,q,ae,te),Z!==null&&(ae=Br(),Mn(Z,G,te,ae),sc(Z,q,te))}}function nc(G){var q=G.alternate;return G===ur||q!==null&&q===ur}function ic(G,q){ks=To=!0;var Z=G.pending;Z===null?q.next=q:(q.next=Z.next,Z.next=q),G.pending=q}function sc(G,q,Z){if((Z&4194240)!==0){var te=q.lanes;te&=G.pendingLanes,Z|=te,q.lanes=Z,$i(G,Z)}}var Ao={readContext:pn,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},pf={readContext:pn,useCallback:function(G,q){return Bn().memoizedState=[G,q===void 0?null:q],G},useContext:pn,useEffect:Xu,useImperativeHandle:function(G,q,Z){return Z=Z!=null?Z.concat([G]):null,Po(4194308,4,Zu.bind(null,q,G),Z)},useLayoutEffect:function(G,q){return Po(4194308,4,G,q)},useInsertionEffect:function(G,q){return Po(4,2,G,q)},useMemo:function(G,q){var Z=Bn();return q=q===void 0?null:q,G=G(),Z.memoizedState=[G,q],G},useReducer:function(G,q,Z){var te=Bn();return q=Z!==void 0?Z(q):q,te.memoizedState=te.baseState=q,G={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:G,lastRenderedState:q},te.queue=G,G=G.dispatch=hf.bind(null,ur,G),[te.memoizedState,G]},useRef:function(G){var q=Bn();return G={current:G},q.memoizedState=G},useState:Hu,useDebugValue:Ja,useDeferredValue:function(G){return Bn().memoizedState=G},useTransition:function(){var G=Hu(!1),q=G[0];return G=df.bind(null,G[1]),Bn().memoizedState=G,[q,G]},useMutableSource:function(){},useSyncExternalStore:function(G,q,Z){var te=ur,ae=Bn();if(sr){if(Z===void 0)throw Error(E(407));Z=Z()}else{if(Z=q(),xr===null)throw Error(E(349));(Ti&30)!==0||Uu(te,q,Z)}ae.memoizedState=Z;var ue={value:Z,getSnapshot:q};return ae.queue=ue,Xu(zu.bind(null,te,ue,G),[G]),te.flags|=2048,Ls(9,Vu.bind(null,te,ue,Z,q),void 0,null),Z},useId:function(){var G=Bn(),q=xr.identifierPrefix;if(sr){var Z=Hn,te=Wn;Z=(te&~(1<<32-er(te)-1)).toString(32)+Z,q=":"+q+"R"+Z,Z=Ds++,0<Z&&(q+="H"+Z.toString(32)),q+=":"}else Z=cf++,q=":"+q+"r"+Z.toString(32)+":";return G.memoizedState=q},unstable_isNewReconciler:!1},mf={readContext:pn,useCallback:Ju,useContext:pn,useEffect:Qa,useImperativeHandle:Qu,useInsertionEffect:Yu,useLayoutEffect:Ku,useMemo:ec,useReducer:Ka,useRef:qu,useState:function(){return Ka(Fs)},useDebugValue:Ja,useDeferredValue:function(G){var q=mn();return tc(q,vr.memoizedState,G)},useTransition:function(){var G=Ka(Fs)[0],q=mn().memoizedState;return[G,q]},useMutableSource:Bu,useSyncExternalStore:ju,useId:rc,unstable_isNewReconciler:!1},gf={readContext:pn,useCallback:Ju,useContext:pn,useEffect:Qa,useImperativeHandle:Qu,useInsertionEffect:Yu,useLayoutEffect:Ku,useMemo:ec,useReducer:Za,useRef:qu,useState:function(){return Za(Fs)},useDebugValue:Ja,useDeferredValue:function(G){var q=mn();return vr===null?q.memoizedState=G:tc(q,vr.memoizedState,G)},useTransition:function(){var G=Za(Fs)[0],q=mn().memoizedState;return[G,q]},useMutableSource:Bu,useSyncExternalStore:ju,useId:rc,unstable_isNewReconciler:!1};function Rn(G,q){if(G&&G.defaultProps){q=be({},q),G=G.defaultProps;for(var Z in G)q[Z]===void 0&&(q[Z]=G[Z]);return q}return q}function el(G,q,Z,te){q=G.memoizedState,Z=Z(te,q),Z=Z==null?q:be({},q,Z),G.memoizedState=Z,G.lanes===0&&(G.updateQueue.baseState=Z)}var Ro={isMounted:function(G){return(G=G._reactInternals)?Pe(G)===G:!1},enqueueSetState:function(G,q,Z){G=G._reactInternals;var te=Br(),ae=hi(G),ue=Xn(te,ae);ue.payload=q,Z!=null&&(ue.callback=Z),q=li(G,ue,ae),q!==null&&(Mn(q,G,ae,te),xo(q,G,ae))},enqueueReplaceState:function(G,q,Z){G=G._reactInternals;var te=Br(),ae=hi(G),ue=Xn(te,ae);ue.tag=1,ue.payload=q,Z!=null&&(ue.callback=Z),q=li(G,ue,ae),q!==null&&(Mn(q,G,ae,te),xo(q,G,ae))},enqueueForceUpdate:function(G,q){G=G._reactInternals;var Z=Br(),te=hi(G),ae=Xn(Z,te);ae.tag=2,q!=null&&(ae.callback=q),q=li(G,ae,te),q!==null&&(Mn(q,G,te,Z),xo(q,G,te))}};function oc(G,q,Z,te,ae,ue,_e){return G=G.stateNode,typeof G.shouldComponentUpdate=="function"?G.shouldComponentUpdate(te,ue,_e):q.prototype&&q.prototype.isPureReactComponent?!ws(Z,te)||!ws(ae,ue):!0}function ac(G,q,Z){var te=!1,ae=si,ue=q.contextType;return typeof ue=="object"&&ue!==null?ue=pn(ue):(ae=Xr(q)?_i:Cr.current,te=q.contextTypes,ue=(te=te!=null)?Xi(G,ae):si),q=new q(Z,ue),G.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=Ro,G.stateNode=q,q._reactInternals=G,te&&(G=G.stateNode,G.__reactInternalMemoizedUnmaskedChildContext=ae,G.__reactInternalMemoizedMaskedChildContext=ue),q}function lc(G,q,Z,te){G=q.state,typeof q.componentWillReceiveProps=="function"&&q.componentWillReceiveProps(Z,te),typeof q.UNSAFE_componentWillReceiveProps=="function"&&q.UNSAFE_componentWillReceiveProps(Z,te),q.state!==G&&Ro.enqueueReplaceState(q,q.state,null)}function tl(G,q,Z,te){var ae=G.stateNode;ae.props=Z,ae.state=G.memoizedState,ae.refs={},Ua(G);var ue=q.contextType;typeof ue=="object"&&ue!==null?ae.context=pn(ue):(ue=Xr(q)?_i:Cr.current,ae.context=Xi(G,ue)),ae.state=G.memoizedState,ue=q.getDerivedStateFromProps,typeof ue=="function"&&(el(G,q,ue,Z),ae.state=G.memoizedState),typeof q.getDerivedStateFromProps=="function"||typeof ae.getSnapshotBeforeUpdate=="function"||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(q=ae.state,typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount(),q!==ae.state&&Ro.enqueueReplaceState(ae,ae.state,null),wo(G,Z,ae,te),ae.state=G.memoizedState),typeof ae.componentDidMount=="function"&&(G.flags|=4194308)}function rs(G,q){try{var Z="",te=q;do Z+=Ie(te),te=te.return;while(te);var ae=Z}catch(ue){ae=`
Error generating stack: `+ue.message+`
`+ue.stack}return{value:G,source:q,stack:ae,digest:null}}function rl(G,q,Z){return{value:G,source:null,stack:Z??null,digest:q??null}}function nl(G,q){try{console.error(q.value)}catch(Z){setTimeout(function(){throw Z})}}var yf=typeof WeakMap=="function"?WeakMap:Map;function uc(G,q,Z){Z=Xn(-1,Z),Z.tag=3,Z.payload={element:null};var te=q.value;return Z.callback=function(){Lo||(Lo=!0,vl=te),nl(G,q)},Z}function cc(G,q,Z){Z=Xn(-1,Z),Z.tag=3;var te=G.type.getDerivedStateFromError;if(typeof te=="function"){var ae=q.value;Z.payload=function(){return te(ae)},Z.callback=function(){nl(G,q)}}var ue=G.stateNode;return ue!==null&&typeof ue.componentDidCatch=="function"&&(Z.callback=function(){nl(G,q),typeof te!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var _e=q.stack;this.componentDidCatch(q.value,{componentStack:_e!==null?_e:""})}),Z}function dc(G,q,Z){var te=G.pingCache;if(te===null){te=G.pingCache=new yf;var ae=new Set;te.set(q,ae)}else ae=te.get(q),ae===void 0&&(ae=new Set,te.set(q,ae));ae.has(Z)||(ae.add(Z),G=Of.bind(null,G,q,Z),q.then(G,G))}function hc(G){do{var q;if((q=G.tag===13)&&(q=G.memoizedState,q=q!==null?q.dehydrated!==null:!0),q)return G;G=G.return}while(G!==null);return null}function fc(G,q,Z,te,ae){return(G.mode&1)===0?(G===q?G.flags|=65536:(G.flags|=128,Z.flags|=131072,Z.flags&=-52805,Z.tag===1&&(Z.alternate===null?Z.tag=17:(q=Xn(-1,1),q.tag=2,li(Z,q,1))),Z.lanes|=1),G):(G.flags|=65536,G.lanes=ae,G)}var vf=ee.ReactCurrentOwner,Yr=!1;function Nr(G,q,Z,te){q.child=G===null?ku(q,null,Z,te):Qi(q,G.child,Z,te)}function pc(G,q,Z,te,ae){Z=Z.render;var ue=q.ref;return es(q,ae),te=Xa(G,q,Z,te,ue,ae),Z=Ya(),G!==null&&!Yr?(q.updateQueue=G.updateQueue,q.flags&=-2053,G.lanes&=~ae,Yn(G,q,ae)):(sr&&Z&&Oa(q),q.flags|=1,Nr(G,q,te,ae),q.child)}function mc(G,q,Z,te,ae){if(G===null){var ue=Z.type;return typeof ue=="function"&&!Tl(ue)&&ue.defaultProps===void 0&&Z.compare===null&&Z.defaultProps===void 0?(q.tag=15,q.type=ue,gc(G,q,ue,te,ae)):(G=Vo(Z.type,null,te,q,q.mode,ae),G.ref=q.ref,G.return=q,q.child=G)}if(ue=G.child,(G.lanes&ae)===0){var _e=ue.memoizedProps;if(Z=Z.compare,Z=Z!==null?Z:ws,Z(_e,te)&&G.ref===q.ref)return Yn(G,q,ae)}return q.flags|=1,G=pi(ue,te),G.ref=q.ref,G.return=q,q.child=G}function gc(G,q,Z,te,ae){if(G!==null){var ue=G.memoizedProps;if(ws(ue,te)&&G.ref===q.ref)if(Yr=!1,q.pendingProps=te=ue,(G.lanes&ae)!==0)(G.flags&131072)!==0&&(Yr=!0);else return q.lanes=G.lanes,Yn(G,q,ae)}return il(G,q,Z,te,ae)}function yc(G,q,Z){var te=q.pendingProps,ae=te.children,ue=G!==null?G.memoizedState:null;if(te.mode==="hidden")if((q.mode&1)===0)q.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(is,nn),nn|=Z;else{if((Z&1073741824)===0)return G=ue!==null?ue.baseLanes|Z:Z,q.lanes=q.childLanes=1073741824,q.memoizedState={baseLanes:G,cachePool:null,transitions:null},q.updateQueue=null,tr(is,nn),nn|=G,null;q.memoizedState={baseLanes:0,cachePool:null,transitions:null},te=ue!==null?ue.baseLanes:Z,tr(is,nn),nn|=te}else ue!==null?(te=ue.baseLanes|Z,q.memoizedState=null):te=Z,tr(is,nn),nn|=te;return Nr(G,q,ae,Z),q.child}function vc(G,q){var Z=q.ref;(G===null&&Z!==null||G!==null&&G.ref!==Z)&&(q.flags|=512,q.flags|=2097152)}function il(G,q,Z,te,ae){var ue=Xr(Z)?_i:Cr.current;return ue=Xi(q,ue),es(q,ae),Z=Xa(G,q,Z,te,ue,ae),te=Ya(),G!==null&&!Yr?(q.updateQueue=G.updateQueue,q.flags&=-2053,G.lanes&=~ae,Yn(G,q,ae)):(sr&&te&&Oa(q),q.flags|=1,Nr(G,q,Z,ae),q.child)}function bc(G,q,Z,te,ae){if(Xr(Z)){var ue=!0;fo(q)}else ue=!1;if(es(q,ae),q.stateNode===null)Oo(G,q),ac(q,Z,te),tl(q,Z,te,ae),te=!0;else if(G===null){var _e=q.stateNode,Ce=q.memoizedProps;_e.props=Ce;var Oe=_e.context,He=Z.contextType;typeof He=="object"&&He!==null?He=pn(He):(He=Xr(Z)?_i:Cr.current,He=Xi(q,He));var rt=Z.getDerivedStateFromProps,nt=typeof rt=="function"||typeof _e.getSnapshotBeforeUpdate=="function";nt||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Ce!==te||Oe!==He)&&lc(q,_e,te,He),ai=!1;var tt=q.memoizedState;_e.state=tt,wo(q,te,_e,ae),Oe=q.memoizedState,Ce!==te||tt!==Oe||qr.current||ai?(typeof rt=="function"&&(el(q,Z,rt,te),Oe=q.memoizedState),(Ce=ai||oc(q,Z,Ce,te,tt,Oe,He))?(nt||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(q.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(q.flags|=4194308),q.memoizedProps=te,q.memoizedState=Oe),_e.props=te,_e.state=Oe,_e.context=He,te=Ce):(typeof _e.componentDidMount=="function"&&(q.flags|=4194308),te=!1)}else{_e=q.stateNode,Fu(G,q),Ce=q.memoizedProps,He=q.type===q.elementType?Ce:Rn(q.type,Ce),_e.props=He,nt=q.pendingProps,tt=_e.context,Oe=Z.contextType,typeof Oe=="object"&&Oe!==null?Oe=pn(Oe):(Oe=Xr(Z)?_i:Cr.current,Oe=Xi(q,Oe));var dt=Z.getDerivedStateFromProps;(rt=typeof dt=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Ce!==nt||tt!==Oe)&&lc(q,_e,te,Oe),ai=!1,tt=q.memoizedState,_e.state=tt,wo(q,te,_e,ae);var ft=q.memoizedState;Ce!==nt||tt!==ft||qr.current||ai?(typeof dt=="function"&&(el(q,Z,dt,te),ft=q.memoizedState),(He=ai||oc(q,Z,He,te,tt,ft,Oe)||!1)?(rt||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(te,ft,Oe),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(te,ft,Oe)),typeof _e.componentDidUpdate=="function"&&(q.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(q.flags|=1024)):(typeof _e.componentDidUpdate!="function"||Ce===G.memoizedProps&&tt===G.memoizedState||(q.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Ce===G.memoizedProps&&tt===G.memoizedState||(q.flags|=1024),q.memoizedProps=te,q.memoizedState=ft),_e.props=te,_e.state=ft,_e.context=Oe,te=He):(typeof _e.componentDidUpdate!="function"||Ce===G.memoizedProps&&tt===G.memoizedState||(q.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Ce===G.memoizedProps&&tt===G.memoizedState||(q.flags|=1024),te=!1)}return sl(G,q,Z,te,ue,ae)}function sl(G,q,Z,te,ae,ue){vc(G,q);var _e=(q.flags&128)!==0;if(!te&&!_e)return ae&&Eu(q,Z,!1),Yn(G,q,ue);te=q.stateNode,vf.current=q;var Ce=_e&&typeof Z.getDerivedStateFromError!="function"?null:te.render();return q.flags|=1,G!==null&&_e?(q.child=Qi(q,G.child,null,ue),q.child=Qi(q,null,Ce,ue)):Nr(G,q,Ce,ue),q.memoizedState=te.state,ae&&Eu(q,Z,!0),q.child}function _c(G){var q=G.stateNode;q.pendingContext?wu(G,q.pendingContext,q.pendingContext!==q.context):q.context&&wu(G,q.context,!1),Va(G,q.containerInfo)}function xc(G,q,Z,te,ae){return Zi(),Fa(ae),q.flags|=256,Nr(G,q,Z,te),q.child}var ol={dehydrated:null,treeContext:null,retryLane:0};function al(G){return{baseLanes:G,cachePool:null,transitions:null}}function wc(G,q,Z){var te=q.pendingProps,ae=lr.current,ue=!1,_e=(q.flags&128)!==0,Ce;if((Ce=_e)||(Ce=G!==null&&G.memoizedState===null?!1:(ae&2)!==0),Ce?(ue=!0,q.flags&=-129):(G===null||G.memoizedState!==null)&&(ae|=1),tr(lr,ae&1),G===null)return Da(q),G=q.memoizedState,G!==null&&(G=G.dehydrated,G!==null)?((q.mode&1)===0?q.lanes=1:G.data==="$!"?q.lanes=8:q.lanes=1073741824,null):(_e=te.children,G=te.fallback,ue?(te=q.mode,ue=q.child,_e={mode:"hidden",children:_e},(te&1)===0&&ue!==null?(ue.childLanes=0,ue.pendingProps=_e):ue=zo(_e,te,0,null),G=Ii(G,te,Z,null),ue.return=q,G.return=q,ue.sibling=G,q.child=ue,q.child.memoizedState=al(Z),q.memoizedState=ol,G):ll(q,_e));if(ae=G.memoizedState,ae!==null&&(Ce=ae.dehydrated,Ce!==null))return bf(G,q,_e,te,Ce,ae,Z);if(ue){ue=te.fallback,_e=q.mode,ae=G.child,Ce=ae.sibling;var Oe={mode:"hidden",children:te.children};return(_e&1)===0&&q.child!==ae?(te=q.child,te.childLanes=0,te.pendingProps=Oe,q.deletions=null):(te=pi(ae,Oe),te.subtreeFlags=ae.subtreeFlags&14680064),Ce!==null?ue=pi(Ce,ue):(ue=Ii(ue,_e,Z,null),ue.flags|=2),ue.return=q,te.return=q,te.sibling=ue,q.child=te,te=ue,ue=q.child,_e=G.child.memoizedState,_e=_e===null?al(Z):{baseLanes:_e.baseLanes|Z,cachePool:null,transitions:_e.transitions},ue.memoizedState=_e,ue.childLanes=G.childLanes&~Z,q.memoizedState=ol,te}return ue=G.child,G=ue.sibling,te=pi(ue,{mode:"visible",children:te.children}),(q.mode&1)===0&&(te.lanes=Z),te.return=q,te.sibling=null,G!==null&&(Z=q.deletions,Z===null?(q.deletions=[G],q.flags|=16):Z.push(G)),q.child=te,q.memoizedState=null,te}function ll(G,q){return q=zo({mode:"visible",children:q},G.mode,0,null),q.return=G,G.child=q}function Io(G,q,Z,te){return te!==null&&Fa(te),Qi(q,G.child,null,Z),G=ll(q,q.pendingProps.children),G.flags|=2,q.memoizedState=null,G}function bf(G,q,Z,te,ae,ue,_e){if(Z)return q.flags&256?(q.flags&=-257,te=rl(Error(E(422))),Io(G,q,_e,te)):q.memoizedState!==null?(q.child=G.child,q.flags|=128,null):(ue=te.fallback,ae=q.mode,te=zo({mode:"visible",children:te.children},ae,0,null),ue=Ii(ue,ae,_e,null),ue.flags|=2,te.return=q,ue.return=q,te.sibling=ue,q.child=te,(q.mode&1)!==0&&Qi(q,G.child,null,_e),q.child.memoizedState=al(_e),q.memoizedState=ol,ue);if((q.mode&1)===0)return Io(G,q,_e,null);if(ae.data==="$!"){if(te=ae.nextSibling&&ae.nextSibling.dataset,te)var Ce=te.dgst;return te=Ce,ue=Error(E(419)),te=rl(ue,te,void 0),Io(G,q,_e,te)}if(Ce=(_e&G.childLanes)!==0,Yr||Ce){if(te=xr,te!==null){switch(_e&-_e){case 4:ae=2;break;case 16:ae=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ae=32;break;case 536870912:ae=268435456;break;default:ae=0}ae=(ae&(te.suspendedLanes|_e))!==0?0:ae,ae!==0&&ae!==ue.retryLane&&(ue.retryLane=ae,qn(G,ae),Mn(te,G,ae,-1))}return El(),te=rl(Error(E(421))),Io(G,q,_e,te)}return ae.data==="$?"?(q.flags|=128,q.child=G.child,q=Mf.bind(null,G),ae._reactRetry=q,null):(G=ue.treeContext,rn=ni(ae.nextSibling),tn=q,sr=!0,An=null,G!==null&&(hn[fn++]=Wn,hn[fn++]=Hn,hn[fn++]=xi,Wn=G.id,Hn=G.overflow,xi=q),q=ll(q,te.children),q.flags|=4096,q)}function Sc(G,q,Z){G.lanes|=q;var te=G.alternate;te!==null&&(te.lanes|=q),Ba(G.return,q,Z)}function ul(G,q,Z,te,ae){var ue=G.memoizedState;ue===null?G.memoizedState={isBackwards:q,rendering:null,renderingStartTime:0,last:te,tail:Z,tailMode:ae}:(ue.isBackwards=q,ue.rendering=null,ue.renderingStartTime=0,ue.last=te,ue.tail=Z,ue.tailMode=ae)}function Ec(G,q,Z){var te=q.pendingProps,ae=te.revealOrder,ue=te.tail;if(Nr(G,q,te.children,Z),te=lr.current,(te&2)!==0)te=te&1|2,q.flags|=128;else{if(G!==null&&(G.flags&128)!==0)e:for(G=q.child;G!==null;){if(G.tag===13)G.memoizedState!==null&&Sc(G,Z,q);else if(G.tag===19)Sc(G,Z,q);else if(G.child!==null){G.child.return=G,G=G.child;continue}if(G===q)break e;for(;G.sibling===null;){if(G.return===null||G.return===q)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}te&=1}if(tr(lr,te),(q.mode&1)===0)q.memoizedState=null;else switch(ae){case"forwards":for(Z=q.child,ae=null;Z!==null;)G=Z.alternate,G!==null&&So(G)===null&&(ae=Z),Z=Z.sibling;Z=ae,Z===null?(ae=q.child,q.child=null):(ae=Z.sibling,Z.sibling=null),ul(q,!1,ae,Z,ue);break;case"backwards":for(Z=null,ae=q.child,q.child=null;ae!==null;){if(G=ae.alternate,G!==null&&So(G)===null){q.child=ae;break}G=ae.sibling,ae.sibling=Z,Z=ae,ae=G}ul(q,!0,Z,null,ue);break;case"together":ul(q,!1,null,null,void 0);break;default:q.memoizedState=null}return q.child}function Oo(G,q){(q.mode&1)===0&&G!==null&&(G.alternate=null,q.alternate=null,q.flags|=2)}function Yn(G,q,Z){if(G!==null&&(q.dependencies=G.dependencies),Pi|=q.lanes,(Z&q.childLanes)===0)return null;if(G!==null&&q.child!==G.child)throw Error(E(153));if(q.child!==null){for(G=q.child,Z=pi(G,G.pendingProps),q.child=Z,Z.return=q;G.sibling!==null;)G=G.sibling,Z=Z.sibling=pi(G,G.pendingProps),Z.return=q;Z.sibling=null}return q.child}function _f(G,q,Z){switch(q.tag){case 3:_c(q),Zi();break;case 5:Nu(q);break;case 1:Xr(q.type)&&fo(q);break;case 4:Va(q,q.stateNode.containerInfo);break;case 10:var te=q.type._context,ae=q.memoizedProps.value;tr(bo,te._currentValue),te._currentValue=ae;break;case 13:if(te=q.memoizedState,te!==null)return te.dehydrated!==null?(tr(lr,lr.current&1),q.flags|=128,null):(Z&q.child.childLanes)!==0?wc(G,q,Z):(tr(lr,lr.current&1),G=Yn(G,q,Z),G!==null?G.sibling:null);tr(lr,lr.current&1);break;case 19:if(te=(Z&q.childLanes)!==0,(G.flags&128)!==0){if(te)return Ec(G,q,Z);q.flags|=128}if(ae=q.memoizedState,ae!==null&&(ae.rendering=null,ae.tail=null,ae.lastEffect=null),tr(lr,lr.current),te)break;return null;case 22:case 23:return q.lanes=0,yc(G,q,Z)}return Yn(G,q,Z)}var Tc,cl,Pc,Cc;Tc=function(G,q){for(var Z=q.child;Z!==null;){if(Z.tag===5||Z.tag===6)G.appendChild(Z.stateNode);else if(Z.tag!==4&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===q)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===q)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}},cl=function(){},Pc=function(G,q,Z,te){var ae=G.memoizedProps;if(ae!==te){G=q.stateNode,Ei(Nn.current);var ue=null;switch(Z){case"input":ae=ut(G,ae),te=ut(G,te),ue=[];break;case"select":ae=be({},ae,{value:void 0}),te=be({},te,{value:void 0}),ue=[];break;case"textarea":ae=jt(G,ae),te=jt(G,te),ue=[];break;default:typeof ae.onClick!="function"&&typeof te.onClick=="function"&&(G.onclick=uo)}We(Z,te);var _e;Z=null;for(He in ae)if(!te.hasOwnProperty(He)&&ae.hasOwnProperty(He)&&ae[He]!=null)if(He==="style"){var Ce=ae[He];for(_e in Ce)Ce.hasOwnProperty(_e)&&(Z||(Z={}),Z[_e]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(A.hasOwnProperty(He)?ue||(ue=[]):(ue=ue||[]).push(He,null));for(He in te){var Oe=te[He];if(Ce=ae!=null?ae[He]:void 0,te.hasOwnProperty(He)&&Oe!==Ce&&(Oe!=null||Ce!=null))if(He==="style")if(Ce){for(_e in Ce)!Ce.hasOwnProperty(_e)||Oe&&Oe.hasOwnProperty(_e)||(Z||(Z={}),Z[_e]="");for(_e in Oe)Oe.hasOwnProperty(_e)&&Ce[_e]!==Oe[_e]&&(Z||(Z={}),Z[_e]=Oe[_e])}else Z||(ue||(ue=[]),ue.push(He,Z)),Z=Oe;else He==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ce=Ce?Ce.__html:void 0,Oe!=null&&Ce!==Oe&&(ue=ue||[]).push(He,Oe)):He==="children"?typeof Oe!="string"&&typeof Oe!="number"||(ue=ue||[]).push(He,""+Oe):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(A.hasOwnProperty(He)?(Oe!=null&&He==="onScroll"&&rr("scroll",G),ue||Ce===Oe||(ue=[])):(ue=ue||[]).push(He,Oe))}Z&&(ue=ue||[]).push("style",Z);var He=ue;(q.updateQueue=He)&&(q.flags|=4)}},Cc=function(G,q,Z,te){Z!==te&&(q.flags|=4)};function $s(G,q){if(!sr)switch(G.tailMode){case"hidden":q=G.tail;for(var Z=null;q!==null;)q.alternate!==null&&(Z=q),q=q.sibling;Z===null?G.tail=null:Z.sibling=null;break;case"collapsed":Z=G.tail;for(var te=null;Z!==null;)Z.alternate!==null&&(te=Z),Z=Z.sibling;te===null?q||G.tail===null?G.tail=null:G.tail.sibling=null:te.sibling=null}}function Rr(G){var q=G.alternate!==null&&G.alternate.child===G.child,Z=0,te=0;if(q)for(var ae=G.child;ae!==null;)Z|=ae.lanes|ae.childLanes,te|=ae.subtreeFlags&14680064,te|=ae.flags&14680064,ae.return=G,ae=ae.sibling;else for(ae=G.child;ae!==null;)Z|=ae.lanes|ae.childLanes,te|=ae.subtreeFlags,te|=ae.flags,ae.return=G,ae=ae.sibling;return G.subtreeFlags|=te,G.childLanes=Z,q}function xf(G,q,Z){var te=q.pendingProps;switch(Ma(q),q.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(q),null;case 1:return Xr(q.type)&&ho(),Rr(q),null;case 3:return te=q.stateNode,ts(),nr(qr),nr(Cr),Wa(),te.pendingContext&&(te.context=te.pendingContext,te.pendingContext=null),(G===null||G.child===null)&&(yo(q)?q.flags|=4:G===null||G.memoizedState.isDehydrated&&(q.flags&256)===0||(q.flags|=1024,An!==null&&(xl(An),An=null))),cl(G,q),Rr(q),null;case 5:za(q);var ae=Ei(Ms.current);if(Z=q.type,G!==null&&q.stateNode!=null)Pc(G,q,Z,te,ae),G.ref!==q.ref&&(q.flags|=512,q.flags|=2097152);else{if(!te){if(q.stateNode===null)throw Error(E(166));return Rr(q),null}if(G=Ei(Nn.current),yo(q)){te=q.stateNode,Z=q.type;var ue=q.memoizedProps;switch(te[$n]=q,te[Cs]=ue,G=(q.mode&1)!==0,Z){case"dialog":rr("cancel",te),rr("close",te);break;case"iframe":case"object":case"embed":rr("load",te);break;case"video":case"audio":for(ae=0;ae<Es.length;ae++)rr(Es[ae],te);break;case"source":rr("error",te);break;case"img":case"image":case"link":rr("error",te),rr("load",te);break;case"details":rr("toggle",te);break;case"input":lt(te,ue),rr("invalid",te);break;case"select":te._wrapperState={wasMultiple:!!ue.multiple},rr("invalid",te);break;case"textarea":Qt(te,ue),rr("invalid",te)}We(Z,ue),ae=null;for(var _e in ue)if(ue.hasOwnProperty(_e)){var Ce=ue[_e];_e==="children"?typeof Ce=="string"?te.textContent!==Ce&&(ue.suppressHydrationWarning!==!0&&lo(te.textContent,Ce,G),ae=["children",Ce]):typeof Ce=="number"&&te.textContent!==""+Ce&&(ue.suppressHydrationWarning!==!0&&lo(te.textContent,Ce,G),ae=["children",""+Ce]):A.hasOwnProperty(_e)&&Ce!=null&&_e==="onScroll"&&rr("scroll",te)}switch(Z){case"input":Qe(te),Yt(te,ue,!0);break;case"textarea":Qe(te),It(te);break;case"select":case"option":break;default:typeof ue.onClick=="function"&&(te.onclick=uo)}te=ae,q.updateQueue=te,te!==null&&(q.flags|=4)}else{_e=ae.nodeType===9?ae:ae.ownerDocument,G==="http://www.w3.org/1999/xhtml"&&(G=bn(Z)),G==="http://www.w3.org/1999/xhtml"?Z==="script"?(G=_e.createElement("div"),G.innerHTML="<script><\/script>",G=G.removeChild(G.firstChild)):typeof te.is=="string"?G=_e.createElement(Z,{is:te.is}):(G=_e.createElement(Z),Z==="select"&&(_e=G,te.multiple?_e.multiple=!0:te.size&&(_e.size=te.size))):G=_e.createElementNS(G,Z),G[$n]=q,G[Cs]=te,Tc(G,q,!1,!1),q.stateNode=G;e:{switch(_e=Ft(Z,te),Z){case"dialog":rr("cancel",G),rr("close",G),ae=te;break;case"iframe":case"object":case"embed":rr("load",G),ae=te;break;case"video":case"audio":for(ae=0;ae<Es.length;ae++)rr(Es[ae],G);ae=te;break;case"source":rr("error",G),ae=te;break;case"img":case"image":case"link":rr("error",G),rr("load",G),ae=te;break;case"details":rr("toggle",G),ae=te;break;case"input":lt(G,te),ae=ut(G,te),rr("invalid",G);break;case"option":ae=te;break;case"select":G._wrapperState={wasMultiple:!!te.multiple},ae=be({},te,{value:void 0}),rr("invalid",G);break;case"textarea":Qt(G,te),ae=jt(G,te),rr("invalid",G);break;default:ae=te}We(Z,ae),Ce=ae;for(ue in Ce)if(Ce.hasOwnProperty(ue)){var Oe=Ce[ue];ue==="style"?St(G,Oe):ue==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Pr(G,Oe)):ue==="children"?typeof Oe=="string"?(Z!=="textarea"||Oe!=="")&&Mr(G,Oe):typeof Oe=="number"&&Mr(G,""+Oe):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(A.hasOwnProperty(ue)?Oe!=null&&ue==="onScroll"&&rr("scroll",G):Oe!=null&&Q(G,ue,Oe,_e))}switch(Z){case"input":Qe(G),Yt(G,te,!1);break;case"textarea":Qe(G),It(G);break;case"option":te.value!=null&&G.setAttribute("value",""+ke(te.value));break;case"select":G.multiple=!!te.multiple,ue=te.value,ue!=null?zt(G,!!te.multiple,ue,!1):te.defaultValue!=null&&zt(G,!!te.multiple,te.defaultValue,!0);break;default:typeof ae.onClick=="function"&&(G.onclick=uo)}switch(Z){case"button":case"input":case"select":case"textarea":te=!!te.autoFocus;break e;case"img":te=!0;break e;default:te=!1}}te&&(q.flags|=4)}q.ref!==null&&(q.flags|=512,q.flags|=2097152)}return Rr(q),null;case 6:if(G&&q.stateNode!=null)Cc(G,q,G.memoizedProps,te);else{if(typeof te!="string"&&q.stateNode===null)throw Error(E(166));if(Z=Ei(Ms.current),Ei(Nn.current),yo(q)){if(te=q.stateNode,Z=q.memoizedProps,te[$n]=q,(ue=te.nodeValue!==Z)&&(G=tn,G!==null))switch(G.tag){case 3:lo(te.nodeValue,Z,(G.mode&1)!==0);break;case 5:G.memoizedProps.suppressHydrationWarning!==!0&&lo(te.nodeValue,Z,(G.mode&1)!==0)}ue&&(q.flags|=4)}else te=(Z.nodeType===9?Z:Z.ownerDocument).createTextNode(te),te[$n]=q,q.stateNode=te}return Rr(q),null;case 13:if(nr(lr),te=q.memoizedState,G===null||G.memoizedState!==null&&G.memoizedState.dehydrated!==null){if(sr&&rn!==null&&(q.mode&1)!==0&&(q.flags&128)===0)Iu(),Zi(),q.flags|=98560,ue=!1;else if(ue=yo(q),te!==null&&te.dehydrated!==null){if(G===null){if(!ue)throw Error(E(318));if(ue=q.memoizedState,ue=ue!==null?ue.dehydrated:null,!ue)throw Error(E(317));ue[$n]=q}else Zi(),(q.flags&128)===0&&(q.memoizedState=null),q.flags|=4;Rr(q),ue=!1}else An!==null&&(xl(An),An=null),ue=!0;if(!ue)return q.flags&65536?q:null}return(q.flags&128)!==0?(q.lanes=Z,q):(te=te!==null,te!==(G!==null&&G.memoizedState!==null)&&te&&(q.child.flags|=8192,(q.mode&1)!==0&&(G===null||(lr.current&1)!==0?br===0&&(br=3):El())),q.updateQueue!==null&&(q.flags|=4),Rr(q),null);case 4:return ts(),cl(G,q),G===null&&Ts(q.stateNode.containerInfo),Rr(q),null;case 10:return Na(q.type._context),Rr(q),null;case 17:return Xr(q.type)&&ho(),Rr(q),null;case 19:if(nr(lr),ue=q.memoizedState,ue===null)return Rr(q),null;if(te=(q.flags&128)!==0,_e=ue.rendering,_e===null)if(te)$s(ue,!1);else{if(br!==0||G!==null&&(G.flags&128)!==0)for(G=q.child;G!==null;){if(_e=So(G),_e!==null){for(q.flags|=128,$s(ue,!1),te=_e.updateQueue,te!==null&&(q.updateQueue=te,q.flags|=4),q.subtreeFlags=0,te=Z,Z=q.child;Z!==null;)ue=Z,G=te,ue.flags&=14680066,_e=ue.alternate,_e===null?(ue.childLanes=0,ue.lanes=G,ue.child=null,ue.subtreeFlags=0,ue.memoizedProps=null,ue.memoizedState=null,ue.updateQueue=null,ue.dependencies=null,ue.stateNode=null):(ue.childLanes=_e.childLanes,ue.lanes=_e.lanes,ue.child=_e.child,ue.subtreeFlags=0,ue.deletions=null,ue.memoizedProps=_e.memoizedProps,ue.memoizedState=_e.memoizedState,ue.updateQueue=_e.updateQueue,ue.type=_e.type,G=_e.dependencies,ue.dependencies=G===null?null:{lanes:G.lanes,firstContext:G.firstContext}),Z=Z.sibling;return tr(lr,lr.current&1|2),q.child}G=G.sibling}ue.tail!==null&&$t()>ss&&(q.flags|=128,te=!0,$s(ue,!1),q.lanes=4194304)}else{if(!te)if(G=So(_e),G!==null){if(q.flags|=128,te=!0,Z=G.updateQueue,Z!==null&&(q.updateQueue=Z,q.flags|=4),$s(ue,!0),ue.tail===null&&ue.tailMode==="hidden"&&!_e.alternate&&!sr)return Rr(q),null}else 2*$t()-ue.renderingStartTime>ss&&Z!==1073741824&&(q.flags|=128,te=!0,$s(ue,!1),q.lanes=4194304);ue.isBackwards?(_e.sibling=q.child,q.child=_e):(Z=ue.last,Z!==null?Z.sibling=_e:q.child=_e,ue.last=_e)}return ue.tail!==null?(q=ue.tail,ue.rendering=q,ue.tail=q.sibling,ue.renderingStartTime=$t(),q.sibling=null,Z=lr.current,tr(lr,te?Z&1|2:Z&1),q):(Rr(q),null);case 22:case 23:return Sl(),te=q.memoizedState!==null,G!==null&&G.memoizedState!==null!==te&&(q.flags|=8192),te&&(q.mode&1)!==0?(nn&1073741824)!==0&&(Rr(q),q.subtreeFlags&6&&(q.flags|=8192)):Rr(q),null;case 24:return null;case 25:return null}throw Error(E(156,q.tag))}function wf(G,q){switch(Ma(q),q.tag){case 1:return Xr(q.type)&&ho(),G=q.flags,G&65536?(q.flags=G&-65537|128,q):null;case 3:return ts(),nr(qr),nr(Cr),Wa(),G=q.flags,(G&65536)!==0&&(G&128)===0?(q.flags=G&-65537|128,q):null;case 5:return za(q),null;case 13:if(nr(lr),G=q.memoizedState,G!==null&&G.dehydrated!==null){if(q.alternate===null)throw Error(E(340));Zi()}return G=q.flags,G&65536?(q.flags=G&-65537|128,q):null;case 19:return nr(lr),null;case 4:return ts(),null;case 10:return Na(q.type._context),null;case 22:case 23:return Sl(),null;case 24:return null;default:return null}}var Mo=!1,Ir=!1,Sf=typeof WeakSet=="function"?WeakSet:Set,ht=null;function ns(G,q){var Z=G.ref;if(Z!==null)if(typeof Z=="function")try{Z(null)}catch(te){hr(G,q,te)}else Z.current=null}function dl(G,q,Z){try{Z()}catch(te){hr(G,q,te)}}var Ac=!1;function Ef(G,q){if(Sa=ot,G=ou(),ma(G)){if("selectionStart"in G)var Z={start:G.selectionStart,end:G.selectionEnd};else e:{Z=(Z=G.ownerDocument)&&Z.defaultView||window;var te=Z.getSelection&&Z.getSelection();if(te&&te.rangeCount!==0){Z=te.anchorNode;var ae=te.anchorOffset,ue=te.focusNode;te=te.focusOffset;try{Z.nodeType,ue.nodeType}catch{Z=null;break e}var _e=0,Ce=-1,Oe=-1,He=0,rt=0,nt=G,tt=null;t:for(;;){for(var dt;nt!==Z||ae!==0&&nt.nodeType!==3||(Ce=_e+ae),nt!==ue||te!==0&&nt.nodeType!==3||(Oe=_e+te),nt.nodeType===3&&(_e+=nt.nodeValue.length),(dt=nt.firstChild)!==null;)tt=nt,nt=dt;for(;;){if(nt===G)break t;if(tt===Z&&++He===ae&&(Ce=_e),tt===ue&&++rt===te&&(Oe=_e),(dt=nt.nextSibling)!==null)break;nt=tt,tt=nt.parentNode}nt=dt}Z=Ce===-1||Oe===-1?null:{start:Ce,end:Oe}}else Z=null}Z=Z||{start:0,end:0}}else Z=null;for(Ea={focusedElem:G,selectionRange:Z},ot=!1,ht=q;ht!==null;)if(q=ht,G=q.child,(q.subtreeFlags&1028)!==0&&G!==null)G.return=q,ht=G;else for(;ht!==null;){q=ht;try{var ft=q.alternate;if((q.flags&1024)!==0)switch(q.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var yt=ft.memoizedProps,gr=ft.memoizedState,Ve=q.stateNode,Fe=Ve.getSnapshotBeforeUpdate(q.elementType===q.type?yt:Rn(q.type,yt),gr);Ve.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:var Ge=q.stateNode.containerInfo;Ge.nodeType===1?Ge.textContent="":Ge.nodeType===9&&Ge.documentElement&&Ge.removeChild(Ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(at){hr(q,q.return,at)}if(G=q.sibling,G!==null){G.return=q.return,ht=G;break}ht=q.return}return ft=Ac,Ac=!1,ft}function Ns(G,q,Z){var te=q.updateQueue;if(te=te!==null?te.lastEffect:null,te!==null){var ae=te=te.next;do{if((ae.tag&G)===G){var ue=ae.destroy;ae.destroy=void 0,ue!==void 0&&dl(q,Z,ue)}ae=ae.next}while(ae!==te)}}function ko(G,q){if(q=q.updateQueue,q=q!==null?q.lastEffect:null,q!==null){var Z=q=q.next;do{if((Z.tag&G)===G){var te=Z.create;Z.destroy=te()}Z=Z.next}while(Z!==q)}}function hl(G){var q=G.ref;if(q!==null){var Z=G.stateNode;switch(G.tag){case 5:G=Z;break;default:G=Z}typeof q=="function"?q(G):q.current=G}}function Rc(G){var q=G.alternate;q!==null&&(G.alternate=null,Rc(q)),G.child=null,G.deletions=null,G.sibling=null,G.tag===5&&(q=G.stateNode,q!==null&&(delete q[$n],delete q[Cs],delete q[Aa],delete q[of],delete q[af])),G.stateNode=null,G.return=null,G.dependencies=null,G.memoizedProps=null,G.memoizedState=null,G.pendingProps=null,G.stateNode=null,G.updateQueue=null}function Ic(G){return G.tag===5||G.tag===3||G.tag===4}function Oc(G){e:for(;;){for(;G.sibling===null;){if(G.return===null||Ic(G.return))return null;G=G.return}for(G.sibling.return=G.return,G=G.sibling;G.tag!==5&&G.tag!==6&&G.tag!==18;){if(G.flags&2||G.child===null||G.tag===4)continue e;G.child.return=G,G=G.child}if(!(G.flags&2))return G.stateNode}}function fl(G,q,Z){var te=G.tag;if(te===5||te===6)G=G.stateNode,q?Z.nodeType===8?Z.parentNode.insertBefore(G,q):Z.insertBefore(G,q):(Z.nodeType===8?(q=Z.parentNode,q.insertBefore(G,Z)):(q=Z,q.appendChild(G)),Z=Z._reactRootContainer,Z!=null||q.onclick!==null||(q.onclick=uo));else if(te!==4&&(G=G.child,G!==null))for(fl(G,q,Z),G=G.sibling;G!==null;)fl(G,q,Z),G=G.sibling}function pl(G,q,Z){var te=G.tag;if(te===5||te===6)G=G.stateNode,q?Z.insertBefore(G,q):Z.appendChild(G);else if(te!==4&&(G=G.child,G!==null))for(pl(G,q,Z),G=G.sibling;G!==null;)pl(G,q,Z),G=G.sibling}var Sr=null,In=!1;function ui(G,q,Z){for(Z=Z.child;Z!==null;)Mc(G,q,Z),Z=Z.sibling}function Mc(G,q,Z){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Zn,Z)}catch{}switch(Z.tag){case 5:Ir||ns(Z,q);case 6:var te=Sr,ae=In;Sr=null,ui(G,q,Z),Sr=te,In=ae,Sr!==null&&(In?(G=Sr,Z=Z.stateNode,G.nodeType===8?G.parentNode.removeChild(Z):G.removeChild(Z)):Sr.removeChild(Z.stateNode));break;case 18:Sr!==null&&(In?(G=Sr,Z=Z.stateNode,G.nodeType===8?Ca(G.parentNode,Z):G.nodeType===1&&Ca(G,Z),Be(G)):Ca(Sr,Z.stateNode));break;case 4:te=Sr,ae=In,Sr=Z.stateNode.containerInfo,In=!0,ui(G,q,Z),Sr=te,In=ae;break;case 0:case 11:case 14:case 15:if(!Ir&&(te=Z.updateQueue,te!==null&&(te=te.lastEffect,te!==null))){ae=te=te.next;do{var ue=ae,_e=ue.destroy;ue=ue.tag,_e!==void 0&&((ue&2)!==0||(ue&4)!==0)&&dl(Z,q,_e),ae=ae.next}while(ae!==te)}ui(G,q,Z);break;case 1:if(!Ir&&(ns(Z,q),te=Z.stateNode,typeof te.componentWillUnmount=="function"))try{te.props=Z.memoizedProps,te.state=Z.memoizedState,te.componentWillUnmount()}catch(Ce){hr(Z,q,Ce)}ui(G,q,Z);break;case 21:ui(G,q,Z);break;case 22:Z.mode&1?(Ir=(te=Ir)||Z.memoizedState!==null,ui(G,q,Z),Ir=te):ui(G,q,Z);break;default:ui(G,q,Z)}}function kc(G){var q=G.updateQueue;if(q!==null){G.updateQueue=null;var Z=G.stateNode;Z===null&&(Z=G.stateNode=new Sf),q.forEach(function(te){var ae=kf.bind(null,G,te);Z.has(te)||(Z.add(te),te.then(ae,ae))})}}function On(G,q){var Z=q.deletions;if(Z!==null)for(var te=0;te<Z.length;te++){var ae=Z[te];try{var ue=G,_e=q,Ce=_e;e:for(;Ce!==null;){switch(Ce.tag){case 5:Sr=Ce.stateNode,In=!1;break e;case 3:Sr=Ce.stateNode.containerInfo,In=!0;break e;case 4:Sr=Ce.stateNode.containerInfo,In=!0;break e}Ce=Ce.return}if(Sr===null)throw Error(E(160));Mc(ue,_e,ae),Sr=null,In=!1;var Oe=ae.alternate;Oe!==null&&(Oe.return=null),ae.return=null}catch(He){hr(ae,q,He)}}if(q.subtreeFlags&12854)for(q=q.child;q!==null;)Dc(q,G),q=q.sibling}function Dc(G,q){var Z=G.alternate,te=G.flags;switch(G.tag){case 0:case 11:case 14:case 15:if(On(q,G),jn(G),te&4){try{Ns(3,G,G.return),ko(3,G)}catch(yt){hr(G,G.return,yt)}try{Ns(5,G,G.return)}catch(yt){hr(G,G.return,yt)}}break;case 1:On(q,G),jn(G),te&512&&Z!==null&&ns(Z,Z.return);break;case 5:if(On(q,G),jn(G),te&512&&Z!==null&&ns(Z,Z.return),G.flags&32){var ae=G.stateNode;try{Mr(ae,"")}catch(yt){hr(G,G.return,yt)}}if(te&4&&(ae=G.stateNode,ae!=null)){var ue=G.memoizedProps,_e=Z!==null?Z.memoizedProps:ue,Ce=G.type,Oe=G.updateQueue;if(G.updateQueue=null,Oe!==null)try{Ce==="input"&&ue.type==="radio"&&ue.name!=null&&it(ae,ue),Ft(Ce,_e);var He=Ft(Ce,ue);for(_e=0;_e<Oe.length;_e+=2){var rt=Oe[_e],nt=Oe[_e+1];rt==="style"?St(ae,nt):rt==="dangerouslySetInnerHTML"?Pr(ae,nt):rt==="children"?Mr(ae,nt):Q(ae,rt,nt,He)}switch(Ce){case"input":Bt(ae,ue);break;case"textarea":ir(ae,ue);break;case"select":var tt=ae._wrapperState.wasMultiple;ae._wrapperState.wasMultiple=!!ue.multiple;var dt=ue.value;dt!=null?zt(ae,!!ue.multiple,dt,!1):tt!==!!ue.multiple&&(ue.defaultValue!=null?zt(ae,!!ue.multiple,ue.defaultValue,!0):zt(ae,!!ue.multiple,ue.multiple?[]:"",!1))}ae[Cs]=ue}catch(yt){hr(G,G.return,yt)}}break;case 6:if(On(q,G),jn(G),te&4){if(G.stateNode===null)throw Error(E(162));ae=G.stateNode,ue=G.memoizedProps;try{ae.nodeValue=ue}catch(yt){hr(G,G.return,yt)}}break;case 3:if(On(q,G),jn(G),te&4&&Z!==null&&Z.memoizedState.isDehydrated)try{Be(q.containerInfo)}catch(yt){hr(G,G.return,yt)}break;case 4:On(q,G),jn(G);break;case 13:On(q,G),jn(G),ae=G.child,ae.flags&8192&&(ue=ae.memoizedState!==null,ae.stateNode.isHidden=ue,!ue||ae.alternate!==null&&ae.alternate.memoizedState!==null||(yl=$t())),te&4&&kc(G);break;case 22:if(rt=Z!==null&&Z.memoizedState!==null,G.mode&1?(Ir=(He=Ir)||rt,On(q,G),Ir=He):On(q,G),jn(G),te&8192){if(He=G.memoizedState!==null,(G.stateNode.isHidden=He)&&!rt&&(G.mode&1)!==0)for(ht=G,rt=G.child;rt!==null;){for(nt=ht=rt;ht!==null;){switch(tt=ht,dt=tt.child,tt.tag){case 0:case 11:case 14:case 15:Ns(4,tt,tt.return);break;case 1:ns(tt,tt.return);var ft=tt.stateNode;if(typeof ft.componentWillUnmount=="function"){te=tt,Z=tt.return;try{q=te,ft.props=q.memoizedProps,ft.state=q.memoizedState,ft.componentWillUnmount()}catch(yt){hr(te,Z,yt)}}break;case 5:ns(tt,tt.return);break;case 22:if(tt.memoizedState!==null){$c(nt);continue}}dt!==null?(dt.return=tt,ht=dt):$c(nt)}rt=rt.sibling}e:for(rt=null,nt=G;;){if(nt.tag===5){if(rt===null){rt=nt;try{ae=nt.stateNode,He?(ue=ae.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none"):(Ce=nt.stateNode,Oe=nt.memoizedProps.style,_e=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ce.style.display=Ur("display",_e))}catch(yt){hr(G,G.return,yt)}}}else if(nt.tag===6){if(rt===null)try{nt.stateNode.nodeValue=He?"":nt.memoizedProps}catch(yt){hr(G,G.return,yt)}}else if((nt.tag!==22&&nt.tag!==23||nt.memoizedState===null||nt===G)&&nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===G)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===G)break e;rt===nt&&(rt=null),nt=nt.return}rt===nt&&(rt=null),nt.sibling.return=nt.return,nt=nt.sibling}}break;case 19:On(q,G),jn(G),te&4&&kc(G);break;case 21:break;default:On(q,G),jn(G)}}function jn(G){var q=G.flags;if(q&2){try{e:{for(var Z=G.return;Z!==null;){if(Ic(Z)){var te=Z;break e}Z=Z.return}throw Error(E(160))}switch(te.tag){case 5:var ae=te.stateNode;te.flags&32&&(Mr(ae,""),te.flags&=-33);var ue=Oc(G);pl(G,ue,ae);break;case 3:case 4:var _e=te.stateNode.containerInfo,Ce=Oc(G);fl(G,Ce,_e);break;default:throw Error(E(161))}}catch(Oe){hr(G,G.return,Oe)}G.flags&=-3}q&4096&&(G.flags&=-4097)}function Tf(G,q,Z){ht=G,Fc(G)}function Fc(G,q,Z){for(var te=(G.mode&1)!==0;ht!==null;){var ae=ht,ue=ae.child;if(ae.tag===22&&te){var _e=ae.memoizedState!==null||Mo;if(!_e){var Ce=ae.alternate,Oe=Ce!==null&&Ce.memoizedState!==null||Ir;Ce=Mo;var He=Ir;if(Mo=_e,(Ir=Oe)&&!He)for(ht=ae;ht!==null;)_e=ht,Oe=_e.child,_e.tag===22&&_e.memoizedState!==null?Nc(ae):Oe!==null?(Oe.return=_e,ht=Oe):Nc(ae);for(;ue!==null;)ht=ue,Fc(ue),ue=ue.sibling;ht=ae,Mo=Ce,Ir=He}Lc(G)}else(ae.subtreeFlags&8772)!==0&&ue!==null?(ue.return=ae,ht=ue):Lc(G)}}function Lc(G){for(;ht!==null;){var q=ht;if((q.flags&8772)!==0){var Z=q.alternate;try{if((q.flags&8772)!==0)switch(q.tag){case 0:case 11:case 15:Ir||ko(5,q);break;case 1:var te=q.stateNode;if(q.flags&4&&!Ir)if(Z===null)te.componentDidMount();else{var ae=q.elementType===q.type?Z.memoizedProps:Rn(q.type,Z.memoizedProps);te.componentDidUpdate(ae,Z.memoizedState,te.__reactInternalSnapshotBeforeUpdate)}var ue=q.updateQueue;ue!==null&&$u(q,ue,te);break;case 3:var _e=q.updateQueue;if(_e!==null){if(Z=null,q.child!==null)switch(q.child.tag){case 5:Z=q.child.stateNode;break;case 1:Z=q.child.stateNode}$u(q,_e,Z)}break;case 5:var Ce=q.stateNode;if(Z===null&&q.flags&4){Z=Ce;var Oe=q.memoizedProps;switch(q.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&Z.focus();break;case"img":Oe.src&&(Z.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(q.memoizedState===null){var He=q.alternate;if(He!==null){var rt=He.memoizedState;if(rt!==null){var nt=rt.dehydrated;nt!==null&&Be(nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ir||q.flags&512&&hl(q)}catch(tt){hr(q,q.return,tt)}}if(q===G){ht=null;break}if(Z=q.sibling,Z!==null){Z.return=q.return,ht=Z;break}ht=q.return}}function $c(G){for(;ht!==null;){var q=ht;if(q===G){ht=null;break}var Z=q.sibling;if(Z!==null){Z.return=q.return,ht=Z;break}ht=q.return}}function Nc(G){for(;ht!==null;){var q=ht;try{switch(q.tag){case 0:case 11:case 15:var Z=q.return;try{ko(4,q)}catch(Oe){hr(q,Z,Oe)}break;case 1:var te=q.stateNode;if(typeof te.componentDidMount=="function"){var ae=q.return;try{te.componentDidMount()}catch(Oe){hr(q,ae,Oe)}}var ue=q.return;try{hl(q)}catch(Oe){hr(q,ue,Oe)}break;case 5:var _e=q.return;try{hl(q)}catch(Oe){hr(q,_e,Oe)}}}catch(Oe){hr(q,q.return,Oe)}if(q===G){ht=null;break}var Ce=q.sibling;if(Ce!==null){Ce.return=q.return,ht=Ce;break}ht=q.return}}var Pf=Math.ceil,Do=ee.ReactCurrentDispatcher,ml=ee.ReactCurrentOwner,gn=ee.ReactCurrentBatchConfig,Wt=0,xr=null,yr=null,Er=0,nn=0,is=ii(0),br=0,Bs=null,Pi=0,Fo=0,gl=0,js=null,Kr=null,yl=0,ss=1/0,Kn=null,Lo=!1,vl=null,ci=null,$o=!1,di=null,No=0,Us=0,bl=null,Bo=-1,jo=0;function Br(){return(Wt&6)!==0?$t():Bo!==-1?Bo:Bo=$t()}function hi(G){return(G.mode&1)===0?1:(Wt&2)!==0&&Er!==0?Er&-Er:uf.transition!==null?(jo===0&&(jo=fs()),jo):(G=Gt,G!==0||(G=window.event,G=G===void 0?16:$r(G.type)),G)}function Mn(G,q,Z,te){if(50<Us)throw Us=0,bl=null,Error(E(185));Ln(G,Z,te),((Wt&2)===0||G!==xr)&&(G===xr&&((Wt&2)===0&&(Fo|=Z),br===4&&fi(G,Er)),Zr(G,te),Z===1&&Wt===0&&(q.mode&1)===0&&(ss=$t()+500,po&&oi()))}function Zr(G,q){var Z=G.callbackNode;Zs(G,q);var te=Vn(G,G===xr?Er:0);if(te===0)Z!==null&&ct(Z),G.callbackNode=null,G.callbackPriority=0;else if(q=te&-te,G.callbackPriority!==q){if(Z!=null&&ct(Z),q===1)G.tag===0?lf(jc.bind(null,G)):Tu(jc.bind(null,G)),nf(function(){(Wt&6)===0&&oi()}),Z=null;else{switch(ps(te)){case 1:Z=Ze;break;case 4:Z=Ut;break;case 16:Z=Xt;break;case 536870912:Z=cn;break;default:Z=Xt}Z=Xc(Z,Bc.bind(null,G))}G.callbackPriority=q,G.callbackNode=Z}}function Bc(G,q){if(Bo=-1,jo=0,(Wt&6)!==0)throw Error(E(327));var Z=G.callbackNode;if(os()&&G.callbackNode!==Z)return null;var te=Vn(G,G===xr?Er:0);if(te===0)return null;if((te&30)!==0||(te&G.expiredLanes)!==0||q)q=Uo(G,te);else{q=te;var ae=Wt;Wt|=2;var ue=Vc();(xr!==G||Er!==q)&&(Kn=null,ss=$t()+500,Ai(G,q));do try{Rf();break}catch(Ce){Uc(G,Ce)}while(!0);$a(),Do.current=ue,Wt=ae,yr!==null?q=0:(xr=null,Er=0,q=br)}if(q!==0){if(q===2&&(ae=Fi(G),ae!==0&&(te=ae,q=_l(G,ae))),q===1)throw Z=Bs,Ai(G,0),fi(G,te),Zr(G,$t()),Z;if(q===6)fi(G,te);else{if(ae=G.current.alternate,(te&30)===0&&!Cf(ae)&&(q=Uo(G,te),q===2&&(ue=Fi(G),ue!==0&&(te=ue,q=_l(G,ue))),q===1))throw Z=Bs,Ai(G,0),fi(G,te),Zr(G,$t()),Z;switch(G.finishedWork=ae,G.finishedLanes=te,q){case 0:case 1:throw Error(E(345));case 2:Ri(G,Kr,Kn);break;case 3:if(fi(G,te),(te&130023424)===te&&(q=yl+500-$t(),10<q)){if(Vn(G,0)!==0)break;if(ae=G.suspendedLanes,(ae&te)!==te){Br(),G.pingedLanes|=G.suspendedLanes&ae;break}G.timeoutHandle=Pa(Ri.bind(null,G,Kr,Kn),q);break}Ri(G,Kr,Kn);break;case 4:if(fi(G,te),(te&4194240)===te)break;for(q=G.eventTimes,ae=-1;0<te;){var _e=31-er(te);ue=1<<_e,_e=q[_e],_e>ae&&(ae=_e),te&=~ue}if(te=ae,te=$t()-te,te=(120>te?120:480>te?480:1080>te?1080:1920>te?1920:3e3>te?3e3:4320>te?4320:1960*Pf(te/1960))-te,10<te){G.timeoutHandle=Pa(Ri.bind(null,G,Kr,Kn),te);break}Ri(G,Kr,Kn);break;case 5:Ri(G,Kr,Kn);break;default:throw Error(E(329))}}}return Zr(G,$t()),G.callbackNode===Z?Bc.bind(null,G):null}function _l(G,q){var Z=js;return G.current.memoizedState.isDehydrated&&(Ai(G,q).flags|=256),G=Uo(G,q),G!==2&&(q=Kr,Kr=Z,q!==null&&xl(q)),G}function xl(G){Kr===null?Kr=G:Kr.push.apply(Kr,G)}function Cf(G){for(var q=G;;){if(q.flags&16384){var Z=q.updateQueue;if(Z!==null&&(Z=Z.stores,Z!==null))for(var te=0;te<Z.length;te++){var ae=Z[te],ue=ae.getSnapshot;ae=ae.value;try{if(!Cn(ue(),ae))return!1}catch{return!1}}}if(Z=q.child,q.subtreeFlags&16384&&Z!==null)Z.return=q,q=Z;else{if(q===G)break;for(;q.sibling===null;){if(q.return===null||q.return===G)return!0;q=q.return}q.sibling.return=q.return,q=q.sibling}}return!0}function fi(G,q){for(q&=~gl,q&=~Fo,G.suspendedLanes|=q,G.pingedLanes&=~q,G=G.expirationTimes;0<q;){var Z=31-er(q),te=1<<Z;G[Z]=-1,q&=~te}}function jc(G){if((Wt&6)!==0)throw Error(E(327));os();var q=Vn(G,0);if((q&1)===0)return Zr(G,$t()),null;var Z=Uo(G,q);if(G.tag!==0&&Z===2){var te=Fi(G);te!==0&&(q=te,Z=_l(G,te))}if(Z===1)throw Z=Bs,Ai(G,0),fi(G,q),Zr(G,$t()),Z;if(Z===6)throw Error(E(345));return G.finishedWork=G.current.alternate,G.finishedLanes=q,Ri(G,Kr,Kn),Zr(G,$t()),null}function wl(G,q){var Z=Wt;Wt|=1;try{return G(q)}finally{Wt=Z,Wt===0&&(ss=$t()+500,po&&oi())}}function Ci(G){di!==null&&di.tag===0&&(Wt&6)===0&&os();var q=Wt;Wt|=1;var Z=gn.transition,te=Gt;try{if(gn.transition=null,Gt=1,G)return G()}finally{Gt=te,gn.transition=Z,Wt=q,(Wt&6)===0&&oi()}}function Sl(){nn=is.current,nr(is)}function Ai(G,q){G.finishedWork=null,G.finishedLanes=0;var Z=G.timeoutHandle;if(Z!==-1&&(G.timeoutHandle=-1,rf(Z)),yr!==null)for(Z=yr.return;Z!==null;){var te=Z;switch(Ma(te),te.tag){case 1:te=te.type.childContextTypes,te!=null&&ho();break;case 3:ts(),nr(qr),nr(Cr),Wa();break;case 5:za(te);break;case 4:ts();break;case 13:nr(lr);break;case 19:nr(lr);break;case 10:Na(te.type._context);break;case 22:case 23:Sl()}Z=Z.return}if(xr=G,yr=G=pi(G.current,null),Er=nn=q,br=0,Bs=null,gl=Fo=Pi=0,Kr=js=null,Si!==null){for(q=0;q<Si.length;q++)if(Z=Si[q],te=Z.interleaved,te!==null){Z.interleaved=null;var ae=te.next,ue=Z.pending;if(ue!==null){var _e=ue.next;ue.next=ae,te.next=_e}Z.pending=te}Si=null}return G}function Uc(G,q){do{var Z=yr;try{if($a(),Eo.current=Ao,To){for(var te=ur.memoizedState;te!==null;){var ae=te.queue;ae!==null&&(ae.pending=null),te=te.next}To=!1}if(Ti=0,_r=vr=ur=null,ks=!1,Ds=0,ml.current=null,Z===null||Z.return===null){br=1,Bs=q,yr=null;break}e:{var ue=G,_e=Z.return,Ce=Z,Oe=q;if(q=Er,Ce.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var He=Oe,rt=Ce,nt=rt.tag;if((rt.mode&1)===0&&(nt===0||nt===11||nt===15)){var tt=rt.alternate;tt?(rt.updateQueue=tt.updateQueue,rt.memoizedState=tt.memoizedState,rt.lanes=tt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var dt=hc(_e);if(dt!==null){dt.flags&=-257,fc(dt,_e,Ce,ue,q),dt.mode&1&&dc(ue,He,q),q=dt,Oe=He;var ft=q.updateQueue;if(ft===null){var yt=new Set;yt.add(Oe),q.updateQueue=yt}else ft.add(Oe);break e}else{if((q&1)===0){dc(ue,He,q),El();break e}Oe=Error(E(426))}}else if(sr&&Ce.mode&1){var gr=hc(_e);if(gr!==null){(gr.flags&65536)===0&&(gr.flags|=256),fc(gr,_e,Ce,ue,q),Fa(rs(Oe,Ce));break e}}ue=Oe=rs(Oe,Ce),br!==4&&(br=2),js===null?js=[ue]:js.push(ue),ue=_e;do{switch(ue.tag){case 3:ue.flags|=65536,q&=-q,ue.lanes|=q;var Ve=uc(ue,Oe,q);Lu(ue,Ve);break e;case 1:Ce=Oe;var Fe=ue.type,Ge=ue.stateNode;if((ue.flags&128)===0&&(typeof Fe.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(ci===null||!ci.has(Ge)))){ue.flags|=65536,q&=-q,ue.lanes|=q;var at=cc(ue,Ce,q);Lu(ue,at);break e}}ue=ue.return}while(ue!==null)}Gc(Z)}catch(bt){q=bt,yr===Z&&Z!==null&&(yr=Z=Z.return);continue}break}while(!0)}function Vc(){var G=Do.current;return Do.current=Ao,G===null?Ao:G}function El(){(br===0||br===3||br===2)&&(br=4),xr===null||(Pi&268435455)===0&&(Fo&268435455)===0||fi(xr,Er)}function Uo(G,q){var Z=Wt;Wt|=2;var te=Vc();(xr!==G||Er!==q)&&(Kn=null,Ai(G,q));do try{Af();break}catch(ae){Uc(G,ae)}while(!0);if($a(),Wt=Z,Do.current=te,yr!==null)throw Error(E(261));return xr=null,Er=0,br}function Af(){for(;yr!==null;)zc(yr)}function Rf(){for(;yr!==null&&!Ot();)zc(yr)}function zc(G){var q=qc(G.alternate,G,nn);G.memoizedProps=G.pendingProps,q===null?Gc(G):yr=q,ml.current=null}function Gc(G){var q=G;do{var Z=q.alternate;if(G=q.return,(q.flags&32768)===0){if(Z=xf(Z,q,nn),Z!==null){yr=Z;return}}else{if(Z=wf(Z,q),Z!==null){Z.flags&=32767,yr=Z;return}if(G!==null)G.flags|=32768,G.subtreeFlags=0,G.deletions=null;else{br=6,yr=null;return}}if(q=q.sibling,q!==null){yr=q;return}yr=q=G}while(q!==null);br===0&&(br=5)}function Ri(G,q,Z){var te=Gt,ae=gn.transition;try{gn.transition=null,Gt=1,If(G,q,Z,te)}finally{gn.transition=ae,Gt=te}return null}function If(G,q,Z,te){do os();while(di!==null);if((Wt&6)!==0)throw Error(E(327));Z=G.finishedWork;var ae=G.finishedLanes;if(Z===null)return null;if(G.finishedWork=null,G.finishedLanes=0,Z===G.current)throw Error(E(177));G.callbackNode=null,G.callbackPriority=0;var ue=Z.lanes|Z.childLanes;if(Qs(G,ue),G===xr&&(yr=xr=null,Er=0),(Z.subtreeFlags&2064)===0&&(Z.flags&2064)===0||$o||($o=!0,Xc(Xt,function(){return os(),null})),ue=(Z.flags&15990)!==0,(Z.subtreeFlags&15990)!==0||ue){ue=gn.transition,gn.transition=null;var _e=Gt;Gt=1;var Ce=Wt;Wt|=4,ml.current=null,Ef(G,Z),Dc(Z,G),Yh(Ea),ot=!!Sa,Ea=Sa=null,G.current=Z,Tf(Z),qt(),Wt=Ce,Gt=_e,gn.transition=ue}else G.current=Z;if($o&&($o=!1,di=G,No=ae),ue=G.pendingLanes,ue===0&&(ci=null),Xs(Z.stateNode),Zr(G,$t()),q!==null)for(te=G.onRecoverableError,Z=0;Z<q.length;Z++)ae=q[Z],te(ae.value,{componentStack:ae.stack,digest:ae.digest});if(Lo)throw Lo=!1,G=vl,vl=null,G;return(No&1)!==0&&G.tag!==0&&os(),ue=G.pendingLanes,(ue&1)!==0?G===bl?Us++:(Us=0,bl=G):Us=0,oi(),null}function os(){if(di!==null){var G=ps(No),q=gn.transition,Z=Gt;try{if(gn.transition=null,Gt=16>G?16:G,di===null)var te=!1;else{if(G=di,di=null,No=0,(Wt&6)!==0)throw Error(E(331));var ae=Wt;for(Wt|=4,ht=G.current;ht!==null;){var ue=ht,_e=ue.child;if((ht.flags&16)!==0){var Ce=ue.deletions;if(Ce!==null){for(var Oe=0;Oe<Ce.length;Oe++){var He=Ce[Oe];for(ht=He;ht!==null;){var rt=ht;switch(rt.tag){case 0:case 11:case 15:Ns(8,rt,ue)}var nt=rt.child;if(nt!==null)nt.return=rt,ht=nt;else for(;ht!==null;){rt=ht;var tt=rt.sibling,dt=rt.return;if(Rc(rt),rt===He){ht=null;break}if(tt!==null){tt.return=dt,ht=tt;break}ht=dt}}}var ft=ue.alternate;if(ft!==null){var yt=ft.child;if(yt!==null){ft.child=null;do{var gr=yt.sibling;yt.sibling=null,yt=gr}while(yt!==null)}}ht=ue}}if((ue.subtreeFlags&2064)!==0&&_e!==null)_e.return=ue,ht=_e;else e:for(;ht!==null;){if(ue=ht,(ue.flags&2048)!==0)switch(ue.tag){case 0:case 11:case 15:Ns(9,ue,ue.return)}var Ve=ue.sibling;if(Ve!==null){Ve.return=ue.return,ht=Ve;break e}ht=ue.return}}var Fe=G.current;for(ht=Fe;ht!==null;){_e=ht;var Ge=_e.child;if((_e.subtreeFlags&2064)!==0&&Ge!==null)Ge.return=_e,ht=Ge;else e:for(_e=Fe;ht!==null;){if(Ce=ht,(Ce.flags&2048)!==0)try{switch(Ce.tag){case 0:case 11:case 15:ko(9,Ce)}}catch(bt){hr(Ce,Ce.return,bt)}if(Ce===_e){ht=null;break e}var at=Ce.sibling;if(at!==null){at.return=Ce.return,ht=at;break e}ht=Ce.return}}if(Wt=ae,oi(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Zn,G)}catch{}te=!0}return te}finally{Gt=Z,gn.transition=q}}return!1}function Wc(G,q,Z){q=rs(Z,q),q=uc(G,q,1),G=li(G,q,1),q=Br(),G!==null&&(Ln(G,1,q),Zr(G,q))}function hr(G,q,Z){if(G.tag===3)Wc(G,G,Z);else for(;q!==null;){if(q.tag===3){Wc(q,G,Z);break}else if(q.tag===1){var te=q.stateNode;if(typeof q.type.getDerivedStateFromError=="function"||typeof te.componentDidCatch=="function"&&(ci===null||!ci.has(te))){G=rs(Z,G),G=cc(q,G,1),q=li(q,G,1),G=Br(),q!==null&&(Ln(q,1,G),Zr(q,G));break}}q=q.return}}function Of(G,q,Z){var te=G.pingCache;te!==null&&te.delete(q),q=Br(),G.pingedLanes|=G.suspendedLanes&Z,xr===G&&(Er&Z)===Z&&(br===4||br===3&&(Er&130023424)===Er&&500>$t()-yl?Ai(G,0):gl|=Z),Zr(G,q)}function Hc(G,q){q===0&&((G.mode&1)===0?q=1:(q=Di,Di<<=1,(Di&130023424)===0&&(Di=4194304)));var Z=Br();G=qn(G,q),G!==null&&(Ln(G,q,Z),Zr(G,Z))}function Mf(G){var q=G.memoizedState,Z=0;q!==null&&(Z=q.retryLane),Hc(G,Z)}function kf(G,q){var Z=0;switch(G.tag){case 13:var te=G.stateNode,ae=G.memoizedState;ae!==null&&(Z=ae.retryLane);break;case 19:te=G.stateNode;break;default:throw Error(E(314))}te!==null&&te.delete(q),Hc(G,Z)}var qc;qc=function(G,q,Z){if(G!==null)if(G.memoizedProps!==q.pendingProps||qr.current)Yr=!0;else{if((G.lanes&Z)===0&&(q.flags&128)===0)return Yr=!1,_f(G,q,Z);Yr=(G.flags&131072)!==0}else Yr=!1,sr&&(q.flags&1048576)!==0&&Pu(q,go,q.index);switch(q.lanes=0,q.tag){case 2:var te=q.type;Oo(G,q),G=q.pendingProps;var ae=Xi(q,Cr.current);es(q,Z),ae=Xa(null,q,te,G,ae,Z);var ue=Ya();return q.flags|=1,typeof ae=="object"&&ae!==null&&typeof ae.render=="function"&&ae.$$typeof===void 0?(q.tag=1,q.memoizedState=null,q.updateQueue=null,Xr(te)?(ue=!0,fo(q)):ue=!1,q.memoizedState=ae.state!==null&&ae.state!==void 0?ae.state:null,Ua(q),ae.updater=Ro,q.stateNode=ae,ae._reactInternals=q,tl(q,te,G,Z),q=sl(null,q,te,!0,ue,Z)):(q.tag=0,sr&&ue&&Oa(q),Nr(null,q,ae,Z),q=q.child),q;case 16:te=q.elementType;e:{switch(Oo(G,q),G=q.pendingProps,ae=te._init,te=ae(te._payload),q.type=te,ae=q.tag=Ff(te),G=Rn(te,G),ae){case 0:q=il(null,q,te,G,Z);break e;case 1:q=bc(null,q,te,G,Z);break e;case 11:q=pc(null,q,te,G,Z);break e;case 14:q=mc(null,q,te,Rn(te.type,G),Z);break e}throw Error(E(306,te,""))}return q;case 0:return te=q.type,ae=q.pendingProps,ae=q.elementType===te?ae:Rn(te,ae),il(G,q,te,ae,Z);case 1:return te=q.type,ae=q.pendingProps,ae=q.elementType===te?ae:Rn(te,ae),bc(G,q,te,ae,Z);case 3:e:{if(_c(q),G===null)throw Error(E(387));te=q.pendingProps,ue=q.memoizedState,ae=ue.element,Fu(G,q),wo(q,te,null,Z);var _e=q.memoizedState;if(te=_e.element,ue.isDehydrated)if(ue={element:te,isDehydrated:!1,cache:_e.cache,pendingSuspenseBoundaries:_e.pendingSuspenseBoundaries,transitions:_e.transitions},q.updateQueue.baseState=ue,q.memoizedState=ue,q.flags&256){ae=rs(Error(E(423)),q),q=xc(G,q,te,Z,ae);break e}else if(te!==ae){ae=rs(Error(E(424)),q),q=xc(G,q,te,Z,ae);break e}else for(rn=ni(q.stateNode.containerInfo.firstChild),tn=q,sr=!0,An=null,Z=ku(q,null,te,Z),q.child=Z;Z;)Z.flags=Z.flags&-3|4096,Z=Z.sibling;else{if(Zi(),te===ae){q=Yn(G,q,Z);break e}Nr(G,q,te,Z)}q=q.child}return q;case 5:return Nu(q),G===null&&Da(q),te=q.type,ae=q.pendingProps,ue=G!==null?G.memoizedProps:null,_e=ae.children,Ta(te,ae)?_e=null:ue!==null&&Ta(te,ue)&&(q.flags|=32),vc(G,q),Nr(G,q,_e,Z),q.child;case 6:return G===null&&Da(q),null;case 13:return wc(G,q,Z);case 4:return Va(q,q.stateNode.containerInfo),te=q.pendingProps,G===null?q.child=Qi(q,null,te,Z):Nr(G,q,te,Z),q.child;case 11:return te=q.type,ae=q.pendingProps,ae=q.elementType===te?ae:Rn(te,ae),pc(G,q,te,ae,Z);case 7:return Nr(G,q,q.pendingProps,Z),q.child;case 8:return Nr(G,q,q.pendingProps.children,Z),q.child;case 12:return Nr(G,q,q.pendingProps.children,Z),q.child;case 10:e:{if(te=q.type._context,ae=q.pendingProps,ue=q.memoizedProps,_e=ae.value,tr(bo,te._currentValue),te._currentValue=_e,ue!==null)if(Cn(ue.value,_e)){if(ue.children===ae.children&&!qr.current){q=Yn(G,q,Z);break e}}else for(ue=q.child,ue!==null&&(ue.return=q);ue!==null;){var Ce=ue.dependencies;if(Ce!==null){_e=ue.child;for(var Oe=Ce.firstContext;Oe!==null;){if(Oe.context===te){if(ue.tag===1){Oe=Xn(-1,Z&-Z),Oe.tag=2;var He=ue.updateQueue;if(He!==null){He=He.shared;var rt=He.pending;rt===null?Oe.next=Oe:(Oe.next=rt.next,rt.next=Oe),He.pending=Oe}}ue.lanes|=Z,Oe=ue.alternate,Oe!==null&&(Oe.lanes|=Z),Ba(ue.return,Z,q),Ce.lanes|=Z;break}Oe=Oe.next}}else if(ue.tag===10)_e=ue.type===q.type?null:ue.child;else if(ue.tag===18){if(_e=ue.return,_e===null)throw Error(E(341));_e.lanes|=Z,Ce=_e.alternate,Ce!==null&&(Ce.lanes|=Z),Ba(_e,Z,q),_e=ue.sibling}else _e=ue.child;if(_e!==null)_e.return=ue;else for(_e=ue;_e!==null;){if(_e===q){_e=null;break}if(ue=_e.sibling,ue!==null){ue.return=_e.return,_e=ue;break}_e=_e.return}ue=_e}Nr(G,q,ae.children,Z),q=q.child}return q;case 9:return ae=q.type,te=q.pendingProps.children,es(q,Z),ae=pn(ae),te=te(ae),q.flags|=1,Nr(G,q,te,Z),q.child;case 14:return te=q.type,ae=Rn(te,q.pendingProps),ae=Rn(te.type,ae),mc(G,q,te,ae,Z);case 15:return gc(G,q,q.type,q.pendingProps,Z);case 17:return te=q.type,ae=q.pendingProps,ae=q.elementType===te?ae:Rn(te,ae),Oo(G,q),q.tag=1,Xr(te)?(G=!0,fo(q)):G=!1,es(q,Z),ac(q,te,ae),tl(q,te,ae,Z),sl(null,q,te,!0,G,Z);case 19:return Ec(G,q,Z);case 22:return yc(G,q,Z)}throw Error(E(156,q.tag))};function Xc(G,q){return mt(G,q)}function Df(G,q,Z,te){this.tag=G,this.key=Z,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=q,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=te,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(G,q,Z,te){return new Df(G,q,Z,te)}function Tl(G){return G=G.prototype,!(!G||!G.isReactComponent)}function Ff(G){if(typeof G=="function")return Tl(G)?1:0;if(G!=null){if(G=G.$$typeof,G===he)return 11;if(G===we)return 14}return 2}function pi(G,q){var Z=G.alternate;return Z===null?(Z=yn(G.tag,q,G.key,G.mode),Z.elementType=G.elementType,Z.type=G.type,Z.stateNode=G.stateNode,Z.alternate=G,G.alternate=Z):(Z.pendingProps=q,Z.type=G.type,Z.flags=0,Z.subtreeFlags=0,Z.deletions=null),Z.flags=G.flags&14680064,Z.childLanes=G.childLanes,Z.lanes=G.lanes,Z.child=G.child,Z.memoizedProps=G.memoizedProps,Z.memoizedState=G.memoizedState,Z.updateQueue=G.updateQueue,q=G.dependencies,Z.dependencies=q===null?null:{lanes:q.lanes,firstContext:q.firstContext},Z.sibling=G.sibling,Z.index=G.index,Z.ref=G.ref,Z}function Vo(G,q,Z,te,ae,ue){var _e=2;if(te=G,typeof G=="function")Tl(G)&&(_e=1);else if(typeof G=="string")_e=5;else e:switch(G){case re:return Ii(Z.children,ae,ue,q);case se:_e=8,ae|=8;break;case ne:return G=yn(12,Z,q,ae|2),G.elementType=ne,G.lanes=ue,G;case ge:return G=yn(13,Z,q,ae),G.elementType=ge,G.lanes=ue,G;case ye:return G=yn(19,Z,q,ae),G.elementType=ye,G.lanes=ue,G;case de:return zo(Z,ae,ue,q);default:if(typeof G=="object"&&G!==null)switch(G.$$typeof){case oe:_e=10;break e;case fe:_e=9;break e;case he:_e=11;break e;case we:_e=14;break e;case le:_e=16,te=null;break e}throw Error(E(130,G==null?G:typeof G,""))}return q=yn(_e,Z,q,ae),q.elementType=G,q.type=te,q.lanes=ue,q}function Ii(G,q,Z,te){return G=yn(7,G,te,q),G.lanes=Z,G}function zo(G,q,Z,te){return G=yn(22,G,te,q),G.elementType=de,G.lanes=Z,G.stateNode={isHidden:!1},G}function Pl(G,q,Z){return G=yn(6,G,null,q),G.lanes=Z,G}function Cl(G,q,Z){return q=yn(4,G.children!==null?G.children:[],G.key,q),q.lanes=Z,q.stateNode={containerInfo:G.containerInfo,pendingChildren:null,implementation:G.implementation},q}function Lf(G,q,Z,te,ae){this.tag=q,this.containerInfo=G,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Li(0),this.expirationTimes=Li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.identifierPrefix=te,this.onRecoverableError=ae,this.mutableSourceEagerHydrationData=null}function Al(G,q,Z,te,ae,ue,_e,Ce,Oe){return G=new Lf(G,q,Z,Ce,Oe),q===1?(q=1,ue===!0&&(q|=8)):q=0,ue=yn(3,null,null,q),G.current=ue,ue.stateNode=G,ue.memoizedState={element:te,isDehydrated:Z,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(ue),G}function $f(G,q,Z){var te=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:te==null?null:""+te,children:G,containerInfo:q,implementation:Z}}function Yc(G){if(!G)return si;G=G._reactInternals;e:{if(Pe(G)!==G||G.tag!==1)throw Error(E(170));var q=G;do{switch(q.tag){case 3:q=q.stateNode.context;break e;case 1:if(Xr(q.type)){q=q.stateNode.__reactInternalMemoizedMergedChildContext;break e}}q=q.return}while(q!==null);throw Error(E(171))}if(G.tag===1){var Z=G.type;if(Xr(Z))return Su(G,Z,q)}return q}function Kc(G,q,Z,te,ae,ue,_e,Ce,Oe){return G=Al(Z,te,!0,G,ae,ue,_e,Ce,Oe),G.context=Yc(null),Z=G.current,te=Br(),ae=hi(Z),ue=Xn(te,ae),ue.callback=q??null,li(Z,ue,ae),G.current.lanes=ae,Ln(G,ae,te),Zr(G,te),G}function Go(G,q,Z,te){var ae=q.current,ue=Br(),_e=hi(ae);return Z=Yc(Z),q.context===null?q.context=Z:q.pendingContext=Z,q=Xn(ue,_e),q.payload={element:G},te=te===void 0?null:te,te!==null&&(q.callback=te),G=li(ae,q,_e),G!==null&&(Mn(G,ae,_e,ue),xo(G,ae,_e)),_e}function Wo(G){if(G=G.current,!G.child)return null;switch(G.child.tag){case 5:return G.child.stateNode;default:return G.child.stateNode}}function Zc(G,q){if(G=G.memoizedState,G!==null&&G.dehydrated!==null){var Z=G.retryLane;G.retryLane=Z!==0&&Z<q?Z:q}}function Rl(G,q){Zc(G,q),(G=G.alternate)&&Zc(G,q)}function Nf(){return null}var Qc=typeof reportError=="function"?reportError:function(G){console.error(G)};function Il(G){this._internalRoot=G}Ho.prototype.render=Il.prototype.render=function(G){var q=this._internalRoot;if(q===null)throw Error(E(409));Go(G,q,null,null)},Ho.prototype.unmount=Il.prototype.unmount=function(){var G=this._internalRoot;if(G!==null){this._internalRoot=null;var q=G.containerInfo;Ci(function(){Go(null,G,null,null)}),q[zn]=null}};function Ho(G){this._internalRoot=G}Ho.prototype.unstable_scheduleHydration=function(G){if(G){var q=Rt();G={blockedOn:null,target:G,priority:q};for(var Z=0;Z<Tn.length&&q!==0&&q<Tn[Z].priority;Z++);Tn.splice(Z,0,G),Z===0&&gs(G)}};function Ol(G){return!(!G||G.nodeType!==1&&G.nodeType!==9&&G.nodeType!==11)}function qo(G){return!(!G||G.nodeType!==1&&G.nodeType!==9&&G.nodeType!==11&&(G.nodeType!==8||G.nodeValue!==" react-mount-point-unstable "))}function Jc(){}function Bf(G,q,Z,te,ae){if(ae){if(typeof te=="function"){var ue=te;te=function(){var He=Wo(_e);ue.call(He)}}var _e=Kc(q,te,G,0,null,!1,!1,"",Jc);return G._reactRootContainer=_e,G[zn]=_e.current,Ts(G.nodeType===8?G.parentNode:G),Ci(),_e}for(;ae=G.lastChild;)G.removeChild(ae);if(typeof te=="function"){var Ce=te;te=function(){var He=Wo(Oe);Ce.call(He)}}var Oe=Al(G,0,!1,null,null,!1,!1,"",Jc);return G._reactRootContainer=Oe,G[zn]=Oe.current,Ts(G.nodeType===8?G.parentNode:G),Ci(function(){Go(q,Oe,Z,te)}),Oe}function Xo(G,q,Z,te,ae){var ue=Z._reactRootContainer;if(ue){var _e=ue;if(typeof ae=="function"){var Ce=ae;ae=function(){var Oe=Wo(_e);Ce.call(Oe)}}Go(q,_e,G,ae)}else _e=Bf(Z,q,G,ae,te);return Wo(_e)}kt=function(G){switch(G.tag){case 3:var q=G.stateNode;if(q.current.memoizedState.isDehydrated){var Z=yi(q.pendingLanes);Z!==0&&($i(q,Z|1),Zr(q,$t()),(Wt&6)===0&&(ss=$t()+500,oi()))}break;case 13:Ci(function(){var te=qn(G,1);if(te!==null){var ae=Br();Mn(te,G,1,ae)}}),Rl(G,1)}},Ni=function(G){if(G.tag===13){var q=qn(G,134217728);if(q!==null){var Z=Br();Mn(q,G,134217728,Z)}Rl(G,134217728)}},Mt=function(G){if(G.tag===13){var q=hi(G),Z=qn(G,q);if(Z!==null){var te=Br();Mn(Z,G,q,te)}Rl(G,q)}},Rt=function(){return Gt},Bi=function(G,q){var Z=Gt;try{return Gt=G,q()}finally{Gt=Z}},Ct=function(G,q,Z){switch(q){case"input":if(Bt(G,Z),q=Z.name,Z.type==="radio"&&q!=null){for(Z=G;Z.parentNode;)Z=Z.parentNode;for(Z=Z.querySelectorAll("input[name="+JSON.stringify(""+q)+'][type="radio"]'),q=0;q<Z.length;q++){var te=Z[q];if(te!==G&&te.form===G.form){var ae=co(te);if(!ae)throw Error(E(90));et(te),Bt(te,ae)}}}break;case"textarea":ir(G,Z);break;case"select":q=Z.value,q!=null&&zt(G,!!Z.multiple,q,!1)}},kr=wl,dr=Ci;var jf={usingClientEntryPoint:!1,Events:[As,Hi,co,xt,Et,wl]},Vs={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uf={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(G){return G=Ke(G),G===null?null:G.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||Nf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yo.isDisabled&&Yo.supportsFiber)try{Zn=Yo.inject(Uf),Wr=Yo}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jf,reactDom_production_min.createPortal=function(G,q){var Z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ol(q))throw Error(E(200));return $f(G,q,null,Z)},reactDom_production_min.createRoot=function(G,q){if(!Ol(G))throw Error(E(299));var Z=!1,te="",ae=Qc;return q!=null&&(q.unstable_strictMode===!0&&(Z=!0),q.identifierPrefix!==void 0&&(te=q.identifierPrefix),q.onRecoverableError!==void 0&&(ae=q.onRecoverableError)),q=Al(G,1,!1,null,null,Z,!1,te,ae),G[zn]=q.current,Ts(G.nodeType===8?G.parentNode:G),new Il(q)},reactDom_production_min.findDOMNode=function(G){if(G==null)return null;if(G.nodeType===1)return G;var q=G._reactInternals;if(q===void 0)throw typeof G.render=="function"?Error(E(188)):(G=Object.keys(G).join(","),Error(E(268,G)));return G=Ke(q),G=G===null?null:G.stateNode,G},reactDom_production_min.flushSync=function(G){return Ci(G)},reactDom_production_min.hydrate=function(G,q,Z){if(!qo(q))throw Error(E(200));return Xo(null,G,q,!0,Z)},reactDom_production_min.hydrateRoot=function(G,q,Z){if(!Ol(G))throw Error(E(405));var te=Z!=null&&Z.hydratedSources||null,ae=!1,ue="",_e=Qc;if(Z!=null&&(Z.unstable_strictMode===!0&&(ae=!0),Z.identifierPrefix!==void 0&&(ue=Z.identifierPrefix),Z.onRecoverableError!==void 0&&(_e=Z.onRecoverableError)),q=Kc(q,null,G,1,Z??null,ae,!1,ue,_e),G[zn]=q.current,Ts(G),te)for(G=0;G<te.length;G++)Z=te[G],ae=Z._getVersion,ae=ae(Z._source),q.mutableSourceEagerHydrationData==null?q.mutableSourceEagerHydrationData=[Z,ae]:q.mutableSourceEagerHydrationData.push(Z,ae);return new Ho(q)},reactDom_production_min.render=function(G,q,Z){if(!qo(q))throw Error(E(200));return Xo(null,G,q,!1,Z)},reactDom_production_min.unmountComponentAtNode=function(G){if(!qo(G))throw Error(E(40));return G._reactRootContainer?(Ci(function(){Xo(null,null,G,!1,function(){G._reactRootContainer=null,G[zn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=wl,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(G,q,Z,te){if(!qo(Z))throw Error(E(200));if(G==null||G._reactInternals===void 0)throw Error(E(38));return Xo(G,q,Z,!1,te)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T)}catch(_){console.error(_)}}return T(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var T=requireReactDom();return client.createRoot=T.createRoot,client.hydrateRoot=T.hydrateRoot,client}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]),cx=(...T)=>T.filter(Boolean).map(_=>_.trim()).join(" ");function getErrorMessage$1(T,_){return`${T} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext$1(T={}){const{name:_,strict:E=!0,hookName:C="useContext",providerName:A="Provider",errorMessage:R,defaultValue:I}=T,F=reactExports.createContext(I);F.displayName=_;function B(){var V;const U=reactExports.useContext(F);if(!U&&E){const D=new Error(R??getErrorMessage$1(C,A));throw D.name="ContextError",(V=Error.captureStackTrace)==null||V.call(Error,D,B),D}return U}return[F.Provider,B,F]}function callAll$1(...T){return function(...E){T.forEach(C=>C==null?void 0:C(...E))}}const clsx$1=(...T)=>T.map(_=>{var E;return(E=_==null?void 0:_.trim)==null?void 0:E.call(_)}).filter(Boolean).join(" "),eventRegex=/^on[A-Z]/;function mergeProps$1(...T){let _={};for(let E of T){for(let C in _){if(eventRegex.test(C)&&typeof _[C]=="function"&&typeof E[C]=="function"){_[C]=callAll$1(_[C],E[C]);continue}if(C==="className"||C==="class"){_[C]=clsx$1(_[C],E[C]);continue}if(C==="style"){_[C]=Object.assign({},_[C]??{},E[C]??{});continue}_[C]=E[C]!==void 0?E[C]:_[C]}for(let C in E)_[C]===void 0&&(_[C]=E[C])}return _}const EMPTY_STYLES=Object.freeze({}),EMPTY_SLOT_STYLES=Object.freeze({});function memoize(T){var _=Object.create(null);return function(E){return _[E]===void 0&&(_[E]=T(E)),_[E]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid$1=memoize(function(T){return reactPropsRegex.test(T)||T.charCodeAt(0)===111&&T.charCodeAt(1)===110&&T.charCodeAt(2)<91});function sheetForTag(T){if(T.sheet)return T.sheet;for(var _=0;_<document.styleSheets.length;_++)if(document.styleSheets[_].ownerNode===T)return document.styleSheets[_]}function createStyleElement(T){var _=document.createElement("style");return _.setAttribute("data-emotion",T.key),T.nonce!==void 0&&_.setAttribute("nonce",T.nonce),_.appendChild(document.createTextNode("")),_.setAttribute("data-s",""),_}var StyleSheet=function(){function T(E){var C=this;this._insertTag=function(A){var R;C.tags.length===0?C.insertionPoint?R=C.insertionPoint.nextSibling:C.prepend?R=C.container.firstChild:R=C.before:R=C.tags[C.tags.length-1].nextSibling,C.container.insertBefore(A,R),C.tags.push(A)},this.isSpeedy=E.speedy===void 0?!0:E.speedy,this.tags=[],this.ctr=0,this.nonce=E.nonce,this.key=E.key,this.container=E.container,this.prepend=E.prepend,this.insertionPoint=E.insertionPoint,this.before=null}var _=T.prototype;return _.hydrate=function(C){C.forEach(this._insertTag)},_.insert=function(C){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var A=this.tags[this.tags.length-1];if(this.isSpeedy){var R=sheetForTag(A);try{R.insertRule(C,R.cssRules.length)}catch{}}else A.appendChild(document.createTextNode(C));this.ctr++},_.flush=function(){this.tags.forEach(function(C){var A;return(A=C.parentNode)==null?void 0:A.removeChild(C)}),this.tags=[],this.ctr=0},T}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$2=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(T,_){return charat(T,0)^45?(((_<<2^charat(T,0))<<2^charat(T,1))<<2^charat(T,2))<<2^charat(T,3):0}function trim(T){return T.trim()}function match$3(T,_){return(T=_.exec(T))?T[0]:T}function replace(T,_,E){return T.replace(_,E)}function indexof(T,_){return T.indexOf(_)}function charat(T,_){return T.charCodeAt(_)|0}function substr(T,_,E){return T.slice(_,E)}function strlen(T){return T.length}function sizeof(T){return T.length}function append(T,_){return _.push(T),T}function combine(T,_){return T.map(_).join("")}var line=1,column=1,length$1=0,position=0,character=0,characters="";function node(T,_,E,C,A,R,I){return{value:T,root:_,parent:E,type:C,props:A,children:R,line,column,length:I,return:""}}function copy(T,_){return assign(node("",null,null,"",null,null,0),T,{length:-T.length},_)}function char(){return character}function prev$1(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next$1(){return character=position<length$1?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(T,_){return substr(characters,T,_)}function token(T){switch(T){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(T){return line=column=1,length$1=strlen(characters=T),position=0,[]}function dealloc(T){return characters="",T}function delimit(T){return trim(slice(position-1,delimiter(T===91?T+2:T===40?T+1:T)))}function whitespace(T){for(;(character=peek())&&character<33;)next$1();return token(T)>2||token(character)>3?"":" "}function escaping(T,_){for(;--_&&next$1()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(T,caret()+(_<6&&peek()==32&&next$1()==32))}function delimiter(T){for(;next$1();)switch(character){case T:return position;case 34:case 39:T!==34&&T!==39&&delimiter(character);break;case 40:T===41&&delimiter(T);break;case 92:next$1();break}return position}function commenter(T,_){for(;next$1()&&T+character!==57;)if(T+character===84&&peek()===47)break;return"/*"+slice(_,position-1)+"*"+from(T===47?T:next$1())}function identifier(T){for(;!token(peek());)next$1();return slice(T,position)}function compile(T){return dealloc(parse$3("",null,null,null,[""],T=alloc(T),0,[0],T))}function parse$3(T,_,E,C,A,R,I,F,B){for(var U=0,V=0,D=I,O=0,L=0,z=0,W=1,X=1,Y=1,K=0,Q="",ee=A,J=R,ie=C,re=Q;X;)switch(z=K,K=next$1()){case 40:if(z!=108&&charat(re,D-1)==58){indexof(re+=replace(delimit(K),"&","&\f"),"&\f")!=-1&&(Y=-1);break}case 34:case 39:case 91:re+=delimit(K);break;case 9:case 10:case 13:case 32:re+=whitespace(z);break;case 92:re+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next$1(),caret()),_,E),B);break;default:re+="/"}break;case 123*W:F[U++]=strlen(re)*Y;case 125*W:case 59:case 0:switch(K){case 0:case 125:X=0;case 59+V:Y==-1&&(re=replace(re,/\f/g,"")),L>0&&strlen(re)-D&&append(L>32?declaration(re+";",C,E,D-1):declaration(replace(re," ","")+";",C,E,D-2),B);break;case 59:re+=";";default:if(append(ie=ruleset(re,_,E,U,V,A,F,Q,ee=[],J=[],D),R),K===123)if(V===0)parse$3(re,_,ie,ie,ee,R,D,F,J);else switch(O===99&&charat(re,3)===110?100:O){case 100:case 108:case 109:case 115:parse$3(T,ie,ie,C&&append(ruleset(T,ie,ie,0,0,A,F,Q,A,ee=[],D),J),A,J,D,F,C?ee:J);break;default:parse$3(re,ie,ie,ie,[""],J,0,F,J)}}U=V=L=0,W=Y=1,Q=re="",D=I;break;case 58:D=1+strlen(re),L=z;default:if(W<1){if(K==123)--W;else if(K==125&&W++==0&&prev$1()==125)continue}switch(re+=from(K),K*W){case 38:Y=V>0?1:(re+="\f",-1);break;case 44:F[U++]=(strlen(re)-1)*Y,Y=1;break;case 64:peek()===45&&(re+=delimit(next$1())),O=peek(),V=D=strlen(Q=re+=identifier(caret())),K++;break;case 45:z===45&&strlen(re)==2&&(W=0)}}return R}function ruleset(T,_,E,C,A,R,I,F,B,U,V){for(var D=A-1,O=A===0?R:[""],L=sizeof(O),z=0,W=0,X=0;z<C;++z)for(var Y=0,K=substr(T,D+1,D=abs$2(W=I[z])),Q=T;Y<L;++Y)(Q=trim(W>0?O[Y]+" "+K:replace(K,/&\f/g,O[Y])))&&(B[X++]=Q);return node(T,_,E,A===0?RULESET:F,B,U,V)}function comment(T,_,E){return node(T,_,E,COMMENT,from(char()),substr(T,2,-2),0)}function declaration(T,_,E,C){return node(T,_,E,DECLARATION,substr(T,0,C),substr(T,C+1,-1),C)}function serialize$1(T,_){for(var E="",C=sizeof(T),A=0;A<C;A++)E+=_(T[A],A,T,_)||"";return E}function stringify$1(T,_,E,C){switch(T.type){case LAYER:if(T.children.length)break;case IMPORT:case DECLARATION:return T.return=T.return||T.value;case COMMENT:return"";case KEYFRAMES:return T.return=T.value+"{"+serialize$1(T.children,C)+"}";case RULESET:T.value=T.props.join(",")}return strlen(E=serialize$1(T.children,C))?T.return=T.value+"{"+E+"}":""}function middleware(T){var _=sizeof(T);return function(E,C,A,R){for(var I="",F=0;F<_;F++)I+=T[F](E,C,A,R)||"";return I}}function rulesheet(T){return function(_){_.root||(_=_.return)&&T(_)}}var identifierWithPointTracking=function(_,E,C){for(var A=0,R=0;A=R,R=peek(),A===38&&R===12&&(E[C]=1),!token(R);)next$1();return slice(_,position)},toRules=function(_,E){var C=-1,A=44;do switch(token(A)){case 0:A===38&&peek()===12&&(E[C]=1),_[C]+=identifierWithPointTracking(position-1,E,C);break;case 2:_[C]+=delimit(A);break;case 4:if(A===44){_[++C]=peek()===58?"&\f":"",E[C]=_[C].length;break}default:_[C]+=from(A)}while(A=next$1());return _},getRules=function(_,E){return dealloc(toRules(alloc(_),E))},fixedElements=new WeakMap,compat=function(_){if(!(_.type!=="rule"||!_.parent||_.length<1)){for(var E=_.value,C=_.parent,A=_.column===C.column&&_.line===C.line;C.type!=="rule";)if(C=C.parent,!C)return;if(!(_.props.length===1&&E.charCodeAt(0)!==58&&!fixedElements.get(C))&&!A){fixedElements.set(_,!0);for(var R=[],I=getRules(E,R),F=C.props,B=0,U=0;B<I.length;B++)for(var V=0;V<F.length;V++,U++)_.props[U]=R[B]?I[B].replace(/&\f/g,F[V]):F[V]+" "+I[B]}}},removeLabel=function(_){if(_.type==="decl"){var E=_.value;E.charCodeAt(0)===108&&E.charCodeAt(2)===98&&(_.return="",_.value="")}};function prefix$1(T,_){switch(hash(T,_)){case 5103:return WEBKIT+"print-"+T+T;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+T+T;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+T+MOZ+T+MS+T+T;case 6828:case 4268:return WEBKIT+T+MS+T+T;case 6165:return WEBKIT+T+MS+"flex-"+T+T;case 5187:return WEBKIT+T+replace(T,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+T;case 5443:return WEBKIT+T+MS+"flex-item-"+replace(T,/flex-|-self/,"")+T;case 4675:return WEBKIT+T+MS+"flex-line-pack"+replace(T,/align-content|flex-|-self/,"")+T;case 5548:return WEBKIT+T+MS+replace(T,"shrink","negative")+T;case 5292:return WEBKIT+T+MS+replace(T,"basis","preferred-size")+T;case 6060:return WEBKIT+"box-"+replace(T,"-grow","")+WEBKIT+T+MS+replace(T,"grow","positive")+T;case 4554:return WEBKIT+replace(T,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+T;case 6187:return replace(replace(replace(T,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),T,"")+T;case 5495:case 3959:return replace(T,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(T,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+T+T;case 4095:case 3583:case 4068:case 2532:return replace(T,/(.+)-inline(.+)/,WEBKIT+"$1$2")+T;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(T)-1-_>6)switch(charat(T,_+1)){case 109:if(charat(T,_+4)!==45)break;case 102:return replace(T,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(T,_+3)==108?"$3":"$2-$3"))+T;case 115:return~indexof(T,"stretch")?prefix$1(replace(T,"stretch","fill-available"),_)+T:T}break;case 4949:if(charat(T,_+1)!==115)break;case 6444:switch(charat(T,strlen(T)-3-(~indexof(T,"!important")&&10))){case 107:return replace(T,":",":"+WEBKIT)+T;case 101:return replace(T,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(T,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+T}break;case 5936:switch(charat(T,_+11)){case 114:return WEBKIT+T+MS+replace(T,/[svh]\w+-[tblr]{2}/,"tb")+T;case 108:return WEBKIT+T+MS+replace(T,/[svh]\w+-[tblr]{2}/,"tb-rl")+T;case 45:return WEBKIT+T+MS+replace(T,/[svh]\w+-[tblr]{2}/,"lr")+T}return WEBKIT+T+MS+T+T}return T}var prefixer=function(_,E,C,A){if(_.length>-1&&!_.return)switch(_.type){case DECLARATION:_.return=prefix$1(_.value,_.length);break;case KEYFRAMES:return serialize$1([copy(_,{value:replace(_.value,"@","@"+WEBKIT)})],A);case RULESET:if(_.length)return combine(_.props,function(R){switch(match$3(R,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy(_,{props:[replace(R,/:(read-\w+)/,":"+MOZ+"$1")]})],A);case"::placeholder":return serialize$1([copy(_,{props:[replace(R,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(_,{props:[replace(R,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(_,{props:[replace(R,/:(plac\w+)/,MS+"input-$1")]})],A)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(_){var E=_.key;if(E==="css"){var C=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(C,function(W){var X=W.getAttribute("data-emotion");X.indexOf(" ")!==-1&&(document.head.appendChild(W),W.setAttribute("data-s",""))})}var A=_.stylisPlugins||defaultStylisPlugins,R={},I,F=[];I=_.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+E+' "]'),function(W){for(var X=W.getAttribute("data-emotion").split(" "),Y=1;Y<X.length;Y++)R[X[Y]]=!0;F.push(W)});var B,U=[compat,removeLabel];{var V,D=[stringify$1,rulesheet(function(W){V.insert(W)})],O=middleware(U.concat(A,D)),L=function(X){return serialize$1(compile(X),O)};B=function(X,Y,K,Q){V=K,L(X?X+"{"+Y.styles+"}":Y.styles),Q&&(z.inserted[Y.name]=!0)}}var z={key:E,sheet:new StyleSheet({key:E,container:I,nonce:_.nonce,speedy:_.speedy,prepend:_.prepend,insertionPoint:_.insertionPoint}),nonce:_.nonce,inserted:R,registered:{},insert:B};return z.sheet.hydrate(F),z},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var T=typeof Symbol=="function"&&Symbol.for,_=T?Symbol.for("react.element"):60103,E=T?Symbol.for("react.portal"):60106,C=T?Symbol.for("react.fragment"):60107,A=T?Symbol.for("react.strict_mode"):60108,R=T?Symbol.for("react.profiler"):60114,I=T?Symbol.for("react.provider"):60109,F=T?Symbol.for("react.context"):60110,B=T?Symbol.for("react.async_mode"):60111,U=T?Symbol.for("react.concurrent_mode"):60111,V=T?Symbol.for("react.forward_ref"):60112,D=T?Symbol.for("react.suspense"):60113,O=T?Symbol.for("react.suspense_list"):60120,L=T?Symbol.for("react.memo"):60115,z=T?Symbol.for("react.lazy"):60116,W=T?Symbol.for("react.block"):60121,X=T?Symbol.for("react.fundamental"):60117,Y=T?Symbol.for("react.responder"):60118,K=T?Symbol.for("react.scope"):60119;function Q(J){if(typeof J=="object"&&J!==null){var ie=J.$$typeof;switch(ie){case _:switch(J=J.type,J){case B:case U:case C:case R:case A:case D:return J;default:switch(J=J&&J.$$typeof,J){case F:case V:case z:case L:case I:return J;default:return ie}}case E:return ie}}}function ee(J){return Q(J)===U}return reactIs_production_min.AsyncMode=B,reactIs_production_min.ConcurrentMode=U,reactIs_production_min.ContextConsumer=F,reactIs_production_min.ContextProvider=I,reactIs_production_min.Element=_,reactIs_production_min.ForwardRef=V,reactIs_production_min.Fragment=C,reactIs_production_min.Lazy=z,reactIs_production_min.Memo=L,reactIs_production_min.Portal=E,reactIs_production_min.Profiler=R,reactIs_production_min.StrictMode=A,reactIs_production_min.Suspense=D,reactIs_production_min.isAsyncMode=function(J){return ee(J)||Q(J)===B},reactIs_production_min.isConcurrentMode=ee,reactIs_production_min.isContextConsumer=function(J){return Q(J)===F},reactIs_production_min.isContextProvider=function(J){return Q(J)===I},reactIs_production_min.isElement=function(J){return typeof J=="object"&&J!==null&&J.$$typeof===_},reactIs_production_min.isForwardRef=function(J){return Q(J)===V},reactIs_production_min.isFragment=function(J){return Q(J)===C},reactIs_production_min.isLazy=function(J){return Q(J)===z},reactIs_production_min.isMemo=function(J){return Q(J)===L},reactIs_production_min.isPortal=function(J){return Q(J)===E},reactIs_production_min.isProfiler=function(J){return Q(J)===R},reactIs_production_min.isStrictMode=function(J){return Q(J)===A},reactIs_production_min.isSuspense=function(J){return Q(J)===D},reactIs_production_min.isValidElementType=function(J){return typeof J=="string"||typeof J=="function"||J===C||J===U||J===R||J===A||J===D||J===O||typeof J=="object"&&J!==null&&(J.$$typeof===z||J.$$typeof===L||J.$$typeof===I||J.$$typeof===F||J.$$typeof===V||J.$$typeof===X||J.$$typeof===Y||J.$$typeof===K||J.$$typeof===W)},reactIs_production_min.typeOf=Q,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var T=requireReactIs(),_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},E={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},C={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},A={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},R={};R[T.ForwardRef]=C,R[T.Memo]=A;function I(z){return T.isMemo(z)?A:R[z.$$typeof]||_}var F=Object.defineProperty,B=Object.getOwnPropertyNames,U=Object.getOwnPropertySymbols,V=Object.getOwnPropertyDescriptor,D=Object.getPrototypeOf,O=Object.prototype;function L(z,W,X){if(typeof W!="string"){if(O){var Y=D(W);Y&&Y!==O&&L(z,Y,X)}var K=B(W);U&&(K=K.concat(U(W)));for(var Q=I(z),ee=I(W),J=0;J<K.length;++J){var ie=K[J];if(!E[ie]&&!(X&&X[ie])&&!(ee&&ee[ie])&&!(Q&&Q[ie])){var re=V(W,ie);try{F(z,ie,re)}catch{}}}}return z}return hoistNonReactStatics_cjs=L,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser$1=!0;function getRegisteredStyles(T,_,E){var C="";return E.split(" ").forEach(function(A){T[A]!==void 0?_.push(T[A]+";"):A&&(C+=A+" ")}),C}var registerStyles=function(_,E,C){var A=_.key+"-"+E.name;(C===!1||isBrowser$1===!1)&&_.registered[A]===void 0&&(_.registered[A]=E.styles)},insertStyles=function(_,E,C){registerStyles(_,E,C);var A=_.key+"-"+E.name;if(_.inserted[E.name]===void 0){var R=E;do _.insert(E===R?"."+A:"",R,_.sheet,!0),R=R.next;while(R!==void 0)}};function murmur2(T){for(var _=0,E,C=0,A=T.length;A>=4;++C,A-=4)E=T.charCodeAt(C)&255|(T.charCodeAt(++C)&255)<<8|(T.charCodeAt(++C)&255)<<16|(T.charCodeAt(++C)&255)<<24,E=(E&65535)*1540483477+((E>>>16)*59797<<16),E^=E>>>24,_=(E&65535)*1540483477+((E>>>16)*59797<<16)^(_&65535)*1540483477+((_>>>16)*59797<<16);switch(A){case 3:_^=(T.charCodeAt(C+2)&255)<<16;case 2:_^=(T.charCodeAt(C+1)&255)<<8;case 1:_^=T.charCodeAt(C)&255,_=(_&65535)*1540483477+((_>>>16)*59797<<16)}return _^=_>>>13,_=(_&65535)*1540483477+((_>>>16)*59797<<16),((_^_>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(_){return _.charCodeAt(1)===45},isProcessableValue=function(_){return _!=null&&typeof _!="boolean"},processStyleName=memoize(function(T){return isCustomProperty(T)?T:T.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(_,E){switch(_){case"animation":case"animationName":if(typeof E=="string")return E.replace(animationRegex,function(C,A,R){return cursor$1={name:A,styles:R,next:cursor$1},A})}return unitlessKeys[_]!==1&&!isCustomProperty(_)&&typeof E=="number"&&E!==0?E+"px":E};function handleInterpolation(T,_,E){if(E==null)return"";var C=E;if(C.__emotion_styles!==void 0)return C;switch(typeof E){case"boolean":return"";case"object":{var A=E;if(A.anim===1)return cursor$1={name:A.name,styles:A.styles,next:cursor$1},A.name;var R=E;if(R.styles!==void 0){var I=R.next;if(I!==void 0)for(;I!==void 0;)cursor$1={name:I.name,styles:I.styles,next:cursor$1},I=I.next;var F=R.styles+";";return F}return createStringFromObject(T,_,E)}case"function":{if(T!==void 0){var B=cursor$1,U=E(T);return cursor$1=B,handleInterpolation(T,_,U)}break}}var V=E;if(_==null)return V;var D=_[V];return D!==void 0?D:V}function createStringFromObject(T,_,E){var C="";if(Array.isArray(E))for(var A=0;A<E.length;A++)C+=handleInterpolation(T,_,E[A])+";";else for(var R in E){var I=E[R];if(typeof I!="object"){var F=I;_!=null&&_[F]!==void 0?C+=R+"{"+_[F]+"}":isProcessableValue(F)&&(C+=processStyleName(R)+":"+processStyleValue(R,F)+";")}else if(Array.isArray(I)&&typeof I[0]=="string"&&(_==null||_[I[0]]===void 0))for(var B=0;B<I.length;B++)isProcessableValue(I[B])&&(C+=processStyleName(R)+":"+processStyleValue(R,I[B])+";");else{var U=handleInterpolation(T,_,I);switch(R){case"animation":case"animationName":{C+=processStyleName(R)+":"+U+";";break}default:C+=R+"{"+U+"}"}}}return C}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor$1;function serializeStyles(T,_,E){if(T.length===1&&typeof T[0]=="object"&&T[0]!==null&&T[0].styles!==void 0)return T[0];var C=!0,A="";cursor$1=void 0;var R=T[0];if(R==null||R.raw===void 0)C=!1,A+=handleInterpolation(E,_,R);else{var I=R;A+=I[0]}for(var F=1;F<T.length;F++)if(A+=handleInterpolation(E,_,T[F]),C){var B=R;A+=B[F]}labelPattern.lastIndex=0;for(var U="",V;(V=labelPattern.exec(A))!==null;)U+="-"+V[1];var D=murmur2(A)+U;return{name:D,styles:A,next:cursor$1}}var syncFallback=function(_){return _()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(_){return reactExports.forwardRef(function(E,C){var A=reactExports.useContext(EmotionCacheContext);return _(E,A,C)})},ThemeContext=reactExports.createContext({}),hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(_,E){var C={};for(var A in E)hasOwn.call(E,A)&&(C[A]=E[A]);return C[typePropName]=_,C},Insertion$1=function(_){var E=_.cache,C=_.serialized,A=_.isStringTag;return registerStyles(E,C,A),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(E,C,A)}),null},Emotion=withEmotionCache(function(T,_,E){var C=T.css;typeof C=="string"&&_.registered[C]!==void 0&&(C=_.registered[C]);var A=T[typePropName],R=[C],I="";typeof T.className=="string"?I=getRegisteredStyles(_.registered,R,T.className):T.className!=null&&(I=T.className+" ");var F=serializeStyles(R,void 0,reactExports.useContext(ThemeContext));I+=_.key+"-"+F.name;var B={};for(var U in T)hasOwn.call(T,U)&&U!=="css"&&U!==typePropName&&(B[U]=T[U]);return B.className=I,E&&(B.ref=E),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:_,serialized:F,isStringTag:typeof A=="string"}),reactExports.createElement(A,B))}),Emotion$1=Emotion,jsx=function(_,E){var C=arguments;if(E==null||!hasOwn.call(E,"css"))return reactExports.createElement.apply(void 0,C);var A=C.length,R=new Array(A);R[0]=Emotion$1,R[1]=createEmotionProps(_,E);for(var I=2;I<A;I++)R[I]=C[I];return reactExports.createElement.apply(null,R)};(function(T){var _;_||(_=T.JSX||(T.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(T,_){var E=T.styles,C=serializeStyles([E],void 0,reactExports.useContext(ThemeContext)),A=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var R=_.key+"-global",I=new _.sheet.constructor({key:R,nonce:_.sheet.nonce,container:_.sheet.container,speedy:_.sheet.isSpeedy}),F=!1,B=document.querySelector('style[data-emotion="'+R+" "+C.name+'"]');return _.sheet.tags.length&&(I.before=_.sheet.tags[0]),B!==null&&(F=!0,B.setAttribute("data-emotion",R),I.hydrate([B])),A.current=[I,F],function(){I.flush()}},[_]),useInsertionEffectWithLayoutFallback(function(){var R=A.current,I=R[0],F=R[1];if(F){R[1]=!1;return}if(C.next!==void 0&&insertStyles(_,C.next,!0),I.tags.length){var B=I.tags[I.tags.length-1].nextElementSibling;I.before=B,I.flush()}_.insert("",C,I,!1)},[_,C.name]),null});function css$2(){for(var T=arguments.length,_=new Array(T),E=0;E<T;E++)_[E]=arguments[E];return serializeStyles(_)}function assignRef(T,_){if(T!=null){if(typeof T=="function"){T(_);return}try{T.current=_}catch{throw new Error(`Cannot assign value '${_}' to ref '${T}'`)}}}function mergeRefs(...T){return _=>{T.forEach(E=>{assignRef(E,_)})}}function compact$1(T){const _=Object.assign({},T);for(let E in _)_[E]===void 0&&delete _[E];return _}function interopDefault(T){return T.default||T}const isObject$3=T=>T!=null&&typeof T=="object"&&!Array.isArray(T),isString$1=T=>typeof T=="string",isFunction$2=T=>typeof T=="function";function getElementRef(T){var E;const _=reactExports.version;return!isString$1(_)||_.startsWith("18.")?T==null?void 0:T.ref:(E=T==null?void 0:T.props)==null?void 0:E.ref}const[ChakraContextProvider,useChakraContext]=createContext$1({name:"ChakraContext",strict:!0,providerName:"<ChakraProvider />"});function ChakraProvider(T){const{value:_,children:E}=T;return jsxRuntimeExports.jsxs(ChakraContextProvider,{value:_,children:[!_._config.disableLayers&&jsxRuntimeExports.jsx(Global,{styles:_.layers.atRule}),jsxRuntimeExports.jsx(Global,{styles:_._global}),E]})}const splitPropFn=(T,_)=>{const E={},C={},A=Object.keys(T);for(const R of A)_(R)?C[R]=T[R]:E[R]=T[R];return[C,E]},splitProps=(T,_)=>{const E=isFunction$2(_)?_:C=>_.includes(C);return splitPropFn(T,E)},htmlProps=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function isHtmlProp(T){return typeof T=="string"&&htmlProps.has(T)}function useResolvedProps(T,_,E){const{css:C,isValidProperty:A}=useChakraContext(),{children:R,...I}=T,F=reactExports.useMemo(()=>{const[O,L]=splitProps(I,K=>E(K,_.variantKeys)),[z,W]=splitProps(L,_.variantKeys),[X,Y]=splitProps(W,A);return{forwardedProps:O,variantProps:z,styleProps:X,elementProps:Y}},[_.variantKeys,E,I,A]),{css:B,...U}=F.styleProps,V=reactExports.useMemo(()=>{const O={...F.variantProps};return _.variantKeys.includes("colorPalette")||(O.colorPalette=I.colorPalette),_.variantKeys.includes("orientation")||(O.orientation=I.orientation),_(O)},[_,F.variantProps,I.colorPalette,I.orientation]);return{styles:reactExports.useMemo(()=>C(V,...toArray$2(B),U),[C,V,B,U]),props:{...F.forwardedProps,...F.elementProps,children:R}}}const toArray$2=T=>(Array.isArray(T)?T:[T]).filter(Boolean).flat(),isPropValid=interopDefault(isPropValid$1),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=T=>T!=="theme",composeShouldForwardProps=(T,_,E)=>{let C;if(_){const A=_.shouldForwardProp;C=T.__emotion_forwardProp&&A?R=>T.__emotion_forwardProp(R)&&A(R):A}return typeof C!="function"&&E&&(C=T.__emotion_forwardProp),C};let isBrowser=typeof document<"u";const Insertion=({cache:T,serialized:_,isStringTag:E})=>{registerStyles(T,_,E);const C=useInsertionEffectAlwaysWithSyncFallback(()=>insertStyles(T,_,E));if(!isBrowser&&C!==void 0){let A=_.name,R=_.next;for(;R!==void 0;)A=cx(A,R.name),R=R.next;return jsxRuntimeExports.jsx("style",{"data-emotion":cx(T.key,A),dangerouslySetInnerHTML:{__html:C},nonce:T.sheet.nonce})}return null},createStyled=(T,_={},E={})=>{const C=T.__emotion_real===T,A=C&&T.__emotion_base||T;let R,I;E!==void 0&&(R=E.label,I=E.target);let F=[];const B=withEmotionCache((U,V,D)=>{var ye;const{cva:O,isValidProperty:L}=useChakraContext(),z=_.__cva__?_:O(_),W=mergeCva$1(T.__emotion_cva,z),X=we=>(le,de)=>we.includes(le)?!0:!(de!=null&&de.includes(le))&&!L(le);!E.shouldForwardProp&&E.forwardProps&&(E.shouldForwardProp=X(E.forwardProps));const Y=(we,le)=>{const de=typeof T=="string"&&T.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent,ce=!(le!=null&&le.includes(we))&&!L(we);return de(we)&&ce},K=composeShouldForwardProps(T,E,C)||Y,Q=reactExports.useMemo(()=>Object.assign({},E.defaultProps,compact$1(U)),[U]),{props:ee,styles:J}=useResolvedProps(Q,W,K);let ie="",re=[J],se=ee;if(ee.theme==null){se={};for(let we in ee)se[we]=ee[we];se.theme=reactExports.useContext(ThemeContext)}typeof ee.className=="string"?ie=getRegisteredStyles(V.registered,re,ee.className):ee.className!=null&&(ie=cx(ie,ee.className));const ne=serializeStyles(F.concat(re),V.registered,se);ie=cx(ie,`${V.key}-${ne.name}`),I!==void 0&&(ie=cx(ie,I));const oe=!K("as");let fe=oe&&ee.as||A,he={};for(let we in ee)if(!(oe&&we==="as")){if(isHtmlProp(we)){const le=we.replace("html","").toLowerCase();he[le]=ee[we];continue}K(we)&&(he[we]=ee[we])}he.className=ie.trim(),he.ref=D;const ge=E.forwardAsChild||((ye=E.forwardProps)==null?void 0:ye.includes("asChild"));if(ee.asChild&&!ge){const we=reactExports.Children.only(ee.children);fe=we.type,he.children=null,Reflect.deleteProperty(he,"asChild"),he=mergeProps$1(he,we.props),he.ref=mergeRefs(D,getElementRef(we))}return he.as&&ge?(he.as=void 0,jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion,{cache:V,serialized:ne,isStringTag:typeof fe=="string"}),jsxRuntimeExports.jsx(fe,{asChild:!0,...he,children:jsxRuntimeExports.jsx(ee.as,{children:he.children})})]})):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion,{cache:V,serialized:ne,isStringTag:typeof fe=="string"}),jsxRuntimeExports.jsx(fe,{...he})]})});return B.displayName=R!==void 0?R:`chakra(${typeof A=="string"?A:A.displayName||A.name||"Component"})`,B.__emotion_real=B,B.__emotion_base=A,B.__emotion_forwardProp=E.shouldForwardProp,B.__emotion_cva=_,Object.defineProperty(B,"toString",{value(){return`.${I}`}}),B},styledFn=createStyled.bind(),cache=new Map,chakraImpl=new Proxy(styledFn,{apply(T,_,E){return styledFn(...E)},get(T,_){return cache.has(_)||cache.set(_,styledFn(_)),cache.get(_)}}),chakra=chakraImpl,mergeCva$1=(T,_)=>T&&!_?T:!T&&_?_:T.merge(_);function useRecipe(T){const{key:_,recipe:E}=T,C=useChakraContext();return reactExports.useMemo(()=>{const A=E||(_!=null?C.getRecipe(_):{});return C.cva(structuredClone(A))},[_,E,C])}const upperFirst$1=T=>T.charAt(0).toUpperCase()+T.slice(1);function createRecipeContext(T){const{key:_,recipe:E}=T,C=upperFirst$1(_||E.className||"Component"),[A,R]=createContext$1({strict:!1,name:`${C}PropsContext`,providerName:`${C}PropsContext`});function I(U){const{unstyled:V,...D}=U,O=useRecipe({key:_,recipe:D.recipe||E}),[L,z]=reactExports.useMemo(()=>O.splitVariantProps(D),[O,D]);return{styles:V?EMPTY_STYLES:O(L),className:O.className,props:z}}const F=(U,V)=>{const D=chakra(U,{},V),O=reactExports.forwardRef((L,z)=>{const W=R(),X=reactExports.useMemo(()=>mergeProps$1(W,L),[L,W]),{styles:Y,className:K,props:Q}=I(X);return jsxRuntimeExports.jsx(D,{...Q,ref:z,css:[Y,X.css],className:cx(K,X.className)})});return O.displayName=U.displayName||U.name,O};function B(){return A}return{withContext:F,PropsProvider:A,withPropsProvider:B,usePropsContext:R,useRecipeResult:I}}var clamp$3=T=>Math.max(0,Math.min(1,T)),wrap$4=(T,_)=>T.map((E,C)=>T[(Math.max(_,0)+C)%T.length]),pipe$1=(...T)=>_=>T.reduce((E,C)=>C(E),_),noop$5=()=>{},isObject$2=T=>typeof T=="object"&&T!==null,MAX_Z_INDEX=2147483647,dataAttr$1=T=>T?"":void 0,ariaAttr=T=>T?"true":void 0,ELEMENT_NODE=1,DOCUMENT_NODE=9,DOCUMENT_FRAGMENT_NODE=11,isHTMLElement$1=T=>isObject$2(T)&&T.nodeType===ELEMENT_NODE&&typeof T.nodeName=="string",isDocument=T=>isObject$2(T)&&T.nodeType===DOCUMENT_NODE,isWindow=T=>isObject$2(T)&&T===T.window,getNodeName$1=T=>isHTMLElement$1(T)?T.localName||"":"#document";function isRootElement(T){return["html","body","#document"].includes(getNodeName$1(T))}var isNode$2=T=>isObject$2(T)&&T.nodeType!==void 0,isShadowRoot$1=T=>isNode$2(T)&&T.nodeType===DOCUMENT_FRAGMENT_NODE&&"host"in T,isInputElement=T=>isHTMLElement$1(T)&&T.localName==="input",isAnchorElement=T=>!!(T!=null&&T.matches("a[href]")),isElementVisible=T=>isHTMLElement$1(T)?T.offsetWidth>0||T.offsetHeight>0||T.getClientRects().length>0:!1,TEXTAREA_SELECT_REGEX=/(textarea|select)/;function isEditableElement(T){if(T==null||!isHTMLElement$1(T))return!1;try{return isInputElement(T)&&T.selectionStart!=null||TEXTAREA_SELECT_REGEX.test(T.localName)||T.isContentEditable||T.getAttribute("contenteditable")==="true"||T.getAttribute("contenteditable")===""}catch{return!1}}function contains(T,_){var C;if(!T||!_||!isHTMLElement$1(T)||!isHTMLElement$1(_))return!1;const E=(C=_.getRootNode)==null?void 0:C.call(_);if(T===_||T.contains(_))return!0;if(E&&isShadowRoot$1(E)){let A=_;for(;A;){if(T===A)return!0;A=A.parentNode||A.host}}return!1}function getDocument(T){return isDocument(T)?T:isWindow(T)?T.document:(T==null?void 0:T.ownerDocument)??document}function getDocumentElement$1(T){return getDocument(T).documentElement}function getWindow$1(T){var _;return isShadowRoot$1(T)?getWindow$1(T.host):isDocument(T)?T.defaultView??window:isHTMLElement$1(T)?((_=T.ownerDocument)==null?void 0:_.defaultView)??window:window}function getActiveElement(T){let _=T.activeElement;for(;_!=null&&_.shadowRoot;){const E=_.shadowRoot.activeElement;if(E===_)break;_=E}return _}function getParentNode$2(T){if(getNodeName$1(T)==="html")return T;const _=T.assignedSlot||T.parentNode||isShadowRoot$1(T)&&T.host||getDocumentElement$1(T);return isShadowRoot$1(_)?_.host:_}var styleCache=new WeakMap;function getComputedStyle$2(T){return styleCache.has(T)||styleCache.set(T,getWindow$1(T).getComputedStyle(T)),styleCache.get(T)}var isDom=()=>typeof document<"u";function getPlatform(){const T=navigator.userAgentData;return(T==null?void 0:T.platform)??navigator.platform}function getUserAgent(){const T=navigator.userAgentData;return T&&Array.isArray(T.brands)?T.brands.map(({brand:_,version:E})=>`${_}/${E}`).join(" "):navigator.userAgent}var pt=T=>isDom()&&T.test(getPlatform()),ua=T=>isDom()&&T.test(getUserAgent()),vn=T=>isDom()&&T.test(navigator.vendor),isTouchDevice=()=>isDom()&&!!navigator.maxTouchPoints,isIPhone=()=>pt(/^iPhone/i),isIPad=()=>pt(/^iPad/i)||isMac()&&navigator.maxTouchPoints>1,isIos=()=>isIPhone()||isIPad(),isApple=()=>isMac()||isIos(),isMac=()=>pt(/^Mac/i),isSafari=()=>isApple()&&vn(/apple/i),isFirefox=()=>ua(/Firefox/i),isAndroid=()=>ua(/Android/i);function getComposedPath(T){var _,E,C;return((_=T.composedPath)==null?void 0:_.call(T))??((C=(E=T.nativeEvent)==null?void 0:E.composedPath)==null?void 0:C.call(E))}function getEventTarget(T){const _=getComposedPath(T);return(_==null?void 0:_[0])??T.target}var isSelfTarget=T=>contains(T.currentTarget,getEventTarget(T));function isComposingEvent(T){return getNativeEvent(T).isComposing||T.keyCode===229}function isVirtualClick(T){return T.mozInputSource===0&&T.isTrusted?!0:isAndroid()&&T.pointerType?T.type==="click"&&T.buttons===1:T.detail===0&&!T.pointerType}var isLeftClick=T=>T.button===0,isContextMenuEvent=T=>T.button===2||isMac()&&T.ctrlKey&&T.button===0,isModifierKey=T=>T.ctrlKey||T.altKey||T.metaKey,isTouchEvent=T=>"touches"in T&&T.touches.length>0,keyMap={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},rtlKeyMap={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function getEventKey(T,_={}){const{dir:E="ltr",orientation:C="horizontal"}=_;let A=T.key;return A=keyMap[A]??A,E==="rtl"&&C==="horizontal"&&A in rtlKeyMap&&(A=rtlKeyMap[A]),A}function getNativeEvent(T){return T.nativeEvent??T}var pageKeys=new Set(["PageUp","PageDown"]),arrowKeys=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function getEventStep(T){return T.ctrlKey||T.metaKey?.1:pageKeys.has(T.key)||T.shiftKey&&arrowKeys.has(T.key)?10:1}function getEventPoint(T,_="client"){const E=isTouchEvent(T)?T.touches[0]||T.changedTouches[0]:T;return{x:E[`${_}X`],y:E[`${_}Y`]}}var addDomEvent=(T,_,E,C)=>{const A=typeof T=="function"?T():T;return A==null||A.addEventListener(_,E,C),()=>{A==null||A.removeEventListener(_,E,C)}};function getDescriptor(T,_){const{type:E="HTMLInputElement",property:C="value"}=_,A=getWindow$1(T)[E].prototype;return Object.getOwnPropertyDescriptor(A,C)??{}}function getElementType(T){if(T.localName==="input")return"HTMLInputElement";if(T.localName==="textarea")return"HTMLTextAreaElement";if(T.localName==="select")return"HTMLSelectElement"}function setElementValue(T,_,E="value"){var A;if(!T)return;const C=getElementType(T);C&&((A=getDescriptor(T,{type:C,property:E}).set)==null||A.call(T,_)),T.setAttribute(E,_)}function setElementChecked(T,_){var C;if(!T)return;(C=getDescriptor(T,{type:"HTMLInputElement",property:"checked"}).set)==null||C.call(T,_),_?T.setAttribute("checked",""):T.removeAttribute("checked")}function dispatchInputValueEvent(T,_){const{value:E,bubbles:C=!0}=_;if(!T)return;const A=getWindow$1(T);T instanceof A.HTMLInputElement&&(setElementValue(T,`${E}`),T.dispatchEvent(new A.Event("input",{bubbles:C})))}function dispatchInputCheckedEvent(T,_){const{checked:E,bubbles:C=!0}=_;if(!T)return;const A=getWindow$1(T);T instanceof A.HTMLInputElement&&(setElementChecked(T,E),T.dispatchEvent(new A.Event("click",{bubbles:C})))}function getClosestForm(T){return isFormElement(T)?T.form:T.closest("form")}function isFormElement(T){return T.matches("textarea, input, select, button")}function trackFormReset(T,_){if(!T)return;const E=getClosestForm(T),C=A=>{A.defaultPrevented||_()};return E==null||E.addEventListener("reset",C,{passive:!0}),()=>E==null?void 0:E.removeEventListener("reset",C)}function trackFieldsetDisabled(T,_){const E=T==null?void 0:T.closest("fieldset");if(!E)return;_(E.disabled);const C=getWindow$1(E),A=new C.MutationObserver(()=>_(E.disabled));return A.observe(E,{attributes:!0,attributeFilter:["disabled"]}),()=>A.disconnect()}function trackFormControl(T,_){if(!T)return;const{onFieldsetDisabledChange:E,onFormReset:C}=_,A=[trackFormReset(T,C),trackFieldsetDisabled(T,E)];return()=>A.forEach(R=>R==null?void 0:R())}var isFrame=T=>isHTMLElement$1(T)&&T.tagName==="IFRAME",hasTabIndex=T=>!Number.isNaN(parseInt(T.getAttribute("tabindex")||"0",10)),hasNegativeTabIndex=T=>parseInt(T.getAttribute("tabindex")||"0",10)<0,focusableSelector="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",getFocusables=(T,_=!1)=>{if(!T)return[];const E=Array.from(T.querySelectorAll(focusableSelector));(_==!0||_=="if-empty"&&E.length===0)&&isHTMLElement$1(T)&&isFocusable(T)&&E.unshift(T);const A=E.filter(isFocusable);return A.forEach((R,I)=>{if(isFrame(R)&&R.contentDocument){const F=R.contentDocument.body;A.splice(I,1,...getFocusables(F))}}),A};function isFocusable(T){return!T||T.closest("[inert]")?!1:T.matches(focusableSelector)&&isElementVisible(T)}function getTabbables(T,_){if(!T)return[];const C=Array.from(T.querySelectorAll(focusableSelector)).filter(isTabbable);return C.forEach((A,R)=>{if(isFrame(A)&&A.contentDocument){const I=A.contentDocument.body,F=getTabbables(I);C.splice(R,1,...F)}}),C.length,C}function isTabbable(T){return T!=null&&T.tabIndex>0?!0:isFocusable(T)&&!hasNegativeTabIndex(T)}function getTabbableEdges(T,_){const E=getTabbables(T,_),C=E[0]||null,A=E[E.length-1]||null;return[C,A]}function getTabIndex(T){return T.tabIndex<0&&(/^(audio|video|details)$/.test(T.localName)||isEditableElement(T))&&!hasTabIndex(T)?0:T.tabIndex}function getInitialFocus(T){const{root:_,getInitialEl:E,filter:C,enabled:A=!0}=T;if(!A)return;let R=null;if(R||(R=typeof E=="function"?E():E),R||(R=_==null?void 0:_.querySelector("[data-autofocus],[autofocus]")),!R){const I=getTabbables(_);R=C?I.filter(C)[0]:I[0]}return R||_||void 0}function isValidTabEvent(T){const _=T.currentTarget;if(!_)return!1;const[E,C]=getTabbableEdges(_),A=_.ownerDocument||document;return!(A.activeElement===E&&T.shiftKey||A.activeElement===C&&!T.shiftKey||!E&&!C)}function nextTick(T){const _=new Set;function E(C){const A=globalThis.requestAnimationFrame(C);_.add(()=>globalThis.cancelAnimationFrame(A))}return E(()=>E(T)),function(){_.forEach(A=>A())}}function raf$1(T){let _;const E=globalThis.requestAnimationFrame(()=>{_=T()});return()=>{globalThis.cancelAnimationFrame(E),_==null||_()}}function queueBeforeEvent(T,_,E){const C=raf$1(()=>{T.removeEventListener(_,A,!0),E()}),A=()=>{C(),E()};return T.addEventListener(_,A,{once:!0,capture:!0}),C}function observeAttributesImpl(T,_){if(!T)return;const{attributes:E,callback:C}=_,A=T.ownerDocument.defaultView||window,R=new A.MutationObserver(I=>{for(const F of I)F.type==="attributes"&&F.attributeName&&E.includes(F.attributeName)&&C(F)});return R.observe(T,{attributes:!0,attributeFilter:E}),()=>R.disconnect()}function observeAttributes(T,_){const{defer:E}=_,C=E?raf$1:R=>R(),A=[];return A.push(C(()=>{const R=typeof T=="function"?T():T;A.push(observeAttributesImpl(R,_))})),()=>{A.forEach(R=>R==null?void 0:R())}}function observeChildrenImpl(T,_){const{callback:E}=_;if(!T)return;const C=T.ownerDocument.defaultView||window,A=new C.MutationObserver(E);return A.observe(T,{childList:!0,subtree:!0}),()=>A.disconnect()}function observeChildren(T,_){const{defer:E}=_,C=E?raf$1:R=>R(),A=[];return A.push(C(()=>{const R=typeof T=="function"?T():T;A.push(observeChildrenImpl(R,_))})),()=>{A.forEach(R=>R==null?void 0:R())}}function clickIfLink(T){const _=()=>T.click();isFirefox()?queueBeforeEvent(T,"keyup",_):queueMicrotask(_)}function getNearestOverflowAncestor$1(T){const _=getParentNode$2(T);return isRootElement(_)?getDocument(_).body:isHTMLElement$1(_)&&isOverflowElement$1(_)?_:getNearestOverflowAncestor$1(_)}function getOverflowAncestors$1(T,_=[]){const E=getNearestOverflowAncestor$1(T),C=E===T.ownerDocument.body,A=getWindow$1(E);return C?_.concat(A,A.visualViewport||[],isOverflowElement$1(E)?E:[]):_.concat(E,getOverflowAncestors$1(E,[]))}var OVERFLOW_RE=/auto|scroll|overlay|hidden|clip/;function isOverflowElement$1(T){const _=getWindow$1(T),{overflow:E,overflowX:C,overflowY:A,display:R}=_.getComputedStyle(T);return OVERFLOW_RE.test(E+A+C)&&!["inline","contents"].includes(R)}function isScrollable(T){return T.scrollHeight>T.clientHeight||T.scrollWidth>T.clientWidth}function scrollIntoView(T,_){const{rootEl:E,...C}=_||{};!T||!E||!isOverflowElement$1(E)||!isScrollable(E)||T.scrollIntoView(C)}function getRelativePoint(T,_){const{left:E,top:C,width:A,height:R}=_.getBoundingClientRect(),I={x:T.x-E,y:T.y-C},F={x:clamp$3(I.x/A),y:clamp$3(I.y/R)};function B(U={}){const{dir:V="ltr",orientation:D="horizontal",inverted:O}=U,L=typeof O=="object"?O.x:O,z=typeof O=="object"?O.y:O;return D==="horizontal"?V==="rtl"||L?1-F.x:F.x:z?1-F.y:F.y}return{offset:I,percent:F,getPercentValue:B}}function requestPointerLock(T,_){const E=T.body,C="pointerLockElement"in T||"mozPointerLockElement"in T,A=()=>!!T.pointerLockElement;function R(){}function I(B){A(),console.error("PointerLock error occurred:",B),T.exitPointerLock()}if(!C)return;try{E.requestPointerLock()}catch{}const F=[addDomEvent(T,"pointerlockchange",R,!1),addDomEvent(T,"pointerlockerror",I,!1)];return()=>{F.forEach(B=>B()),T.exitPointerLock()}}var state="default",userSelect="",elementMap=new WeakMap;function disableTextSelectionImpl(T={}){const{target:_,doc:E}=T,C=E??document,A=C.documentElement;return isIos()?(state==="default"&&(userSelect=A.style.webkitUserSelect,A.style.webkitUserSelect="none"),state="disabled"):_&&(elementMap.set(_,_.style.userSelect),_.style.userSelect="none"),()=>restoreTextSelection({target:_,doc:C})}function restoreTextSelection(T={}){const{target:_,doc:E}=T,A=(E??document).documentElement;if(isIos()){if(state!=="disabled")return;state="restoring",setTimeout(()=>{nextTick(()=>{state==="restoring"&&(A.style.webkitUserSelect==="none"&&(A.style.webkitUserSelect=userSelect||""),userSelect="",state="default")})},300)}else if(_&&elementMap.has(_)){const R=elementMap.get(_);_.style.userSelect==="none"&&(_.style.userSelect=R??""),_.getAttribute("style")===""&&_.removeAttribute("style"),elementMap.delete(_)}}function disableTextSelection(T={}){const{defer:_,target:E,...C}=T,A=_?raf$1:I=>I(),R=[];return R.push(A(()=>{const I=typeof E=="function"?E():E;R.push(disableTextSelectionImpl({...C,target:I}))})),()=>{R.forEach(I=>I==null?void 0:I())}}function trackPointerMove(T,_){const{onPointerMove:E,onPointerUp:C}=_,R=[addDomEvent(T,"pointermove",I=>{const F=getEventPoint(I),B=Math.sqrt(F.x**2+F.y**2),U=I.pointerType==="touch"?10:5;if(!(B<U)){if(I.pointerType==="mouse"&&I.button===0){C();return}E({point:F,event:I})}},!1),addDomEvent(T,"pointerup",C,!1),addDomEvent(T,"pointercancel",C,!1),addDomEvent(T,"contextmenu",C,!1),disableTextSelection({doc:T})];return()=>{R.forEach(I=>I())}}function trackPress(T){const{pointerNode:_,keyboardNode:E=_,onPress:C,onPressStart:A,onPressEnd:R,isValidKey:I=Q=>Q.key==="Enter"}=T;if(!_)return noop$5;const F=getWindow$1(_),B=getDocument(_);let U=noop$5,V=noop$5,D=noop$5;const O=Q=>({point:getEventPoint(Q),event:Q});function L(Q){A==null||A(O(Q))}function z(Q){R==null||R(O(Q))}const X=addDomEvent(_,"pointerdown",Q=>{V();const J=addDomEvent(F,"pointerup",re=>{const se=getEventTarget(re);contains(_,se)?C==null||C(O(re)):R==null||R(O(re))},{passive:!C,once:!0}),ie=addDomEvent(F,"pointercancel",z,{passive:!R,once:!0});V=pipe$1(J,ie),B.activeElement===E&&Q.pointerType==="mouse"&&Q.preventDefault(),L(Q)},{passive:!A}),Y=addDomEvent(E,"focus",K);U=pipe$1(X,Y);function K(){const Q=re=>{if(!I(re))return;const se=oe=>{if(!I(oe))return;const fe=new F.PointerEvent("pointerup"),he=O(fe);C==null||C(he),R==null||R(he)};V(),V=addDomEvent(E,"keyup",se);const ne=new F.PointerEvent("pointerdown");L(ne)},ee=()=>{const re=new F.PointerEvent("pointercancel");z(re)},J=addDomEvent(E,"keydown",Q),ie=addDomEvent(E,"blur",ee);D=pipe$1(J,ie)}return()=>{U(),V(),D()}}function queryAll(T,_){return Array.from((T==null?void 0:T.querySelectorAll(_))??[])}var defaultItemToId=T=>T.id;function itemById(T,_,E=defaultItemToId){return T.find(C=>E(C)===_)}function indexOfId(T,_,E=defaultItemToId){const C=itemById(T,_,E);return C?T.indexOf(C):-1}function nextById(T,_,E=!0){let C=indexOfId(T,_);return C=E?(C+1)%T.length:Math.min(C+1,T.length-1),T[C]}function prevById(T,_,E=!0){let C=indexOfId(T,_);return C===-1?E?T[T.length-1]:null:(C=E?(C-1+T.length)%T.length:Math.max(0,C-1),T[C])}function trackElementRect(T,_){const{onEntry:E,measure:C,box:A="border-box"}=_,R=(Array.isArray(T)?T:[T]).filter(isHTMLElement$1),I=getWindow$1(R[0]),F=U=>{const V=R.map(D=>C(D));E({rects:V,entries:U})};F([]);const B=new I.ResizeObserver(F);return R.forEach(U=>B.observe(U,{box:A})),()=>B.disconnect()}var sanitize=T=>T.split("").map(_=>{const E=_.charCodeAt(0);return E>0&&E<128?_:E>=128&&E<=255?`/x${E.toString(16)}`.replace("/","\\"):""}).join("").trim(),getValueText=T=>{var _;return sanitize(((_=T.dataset)==null?void 0:_.valuetext)??T.textContent??"")},match$2=(T,_)=>T.trim().toLowerCase().startsWith(_.toLowerCase());function getByText(T,_,E,C=defaultItemToId){const A=E?indexOfId(T,E,C):-1;let R=E?wrap$4(T,A):T;return _.length===1&&(R=R.filter(F=>C(F)!==E)),R.find(F=>match$2(getValueText(F),_))}function setStyle(T,_){if(!T)return noop$5;const E=Object.keys(_).reduce((C,A)=>(C[A]=T.style.getPropertyValue(A),C),{});return Object.assign(T.style,_),()=>{Object.assign(T.style,E),T.style.length===0&&T.removeAttribute("style")}}function setStyleProperty(T,_,E){if(!T)return noop$5;const C=T.style.getPropertyValue(_);return T.style.setProperty(_,E),()=>{T.style.setProperty(_,C),T.style.length===0&&T.removeAttribute("style")}}function getByTypeaheadImpl(T,_){const{state:E,activeId:C,key:A,timeout:R=350,itemToId:I}=_,F=E.keysSoFar+A,U=F.length>1&&Array.from(F).every(z=>z===F[0])?F[0]:F;let V=T.slice();const D=getByText(V,U,C,I);function O(){clearTimeout(E.timer),E.timer=-1}function L(z){E.keysSoFar=z,O(),z!==""&&(E.timer=+setTimeout(()=>{L(""),O()},R))}return L(F),D}var getByTypeahead=Object.assign(getByTypeaheadImpl,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:isValidTypeaheadEvent});function isValidTypeaheadEvent(T){return T.key.length===1&&!T.ctrlKey&&!T.metaKey}var visuallyHiddenStyle={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},fps=1e3/60;function waitForElement(T,_){const E=T();if(isHTMLElement$1(E)&&E.isConnected)return _(E),()=>{};{const C=setInterval(()=>{const A=T();isHTMLElement$1(A)&&A.isConnected&&(_(A),clearInterval(C))},fps);return()=>clearInterval(C)}}function waitForElements(T,_){const E=[];return T==null||T.forEach(C=>{const A=waitForElement(C,_);E.push(A)}),()=>{E.forEach(C=>C())}}function getErrorMessage(T,_){return`${T} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext(T={}){const{name:_,strict:E=!0,hookName:C="useContext",providerName:A="Provider",errorMessage:R,defaultValue:I}=T,F=reactExports.createContext(I);F.displayName=_;function B(){var V;const U=reactExports.useContext(F);if(!U&&E){const D=new Error(R??getErrorMessage(C,A));throw D.name="ContextError",(V=Error.captureStackTrace)==null||V.call(Error,D,B),D}return U}return[F.Provider,B,F]}const[LocaleContextProvider,useLocaleContext]=createContext({name:"LocaleContext",hookName:"useLocaleContext",providerName:"<LocaleProvider />",strict:!1,defaultValue:{dir:"ltr",locale:"en-US"}});function composeRefs(...T){return _=>{const E=[];for(const C of T)if(typeof C=="function"){const A=C(_);typeof A=="function"&&E.push(A)}else C&&(C.current=_);if(E.length)return()=>{for(const C of E)C()}}}function toArray$1(T){return T?Array.isArray(T)?T:[T]:[]}var first=T=>T[0],last=T=>T[T.length-1],has=(T,_)=>T.indexOf(_)!==-1,add$1=(T,..._)=>T.concat(_),remove$2=(T,..._)=>T.filter(E=>!_.includes(E)),addOrRemove=(T,_)=>has(T,_)?remove$2(T,_):add$1(T,_);function nextIndex(T,_,E={}){const{step:C=1,loop:A=!0}=E,R=_+C,I=T.length,F=I-1;return _===-1?C>0?0:F:R<0?A?F:0:R>=I?A?0:_>I?I:_:R}function next(T,_,E={}){return T[nextIndex(T,_,E)]}function prevIndex(T,_,E={}){const{step:C=1,loop:A=!0}=E;return nextIndex(T,_,{step:-C,loop:A})}function prev(T,_,E={}){return T[prevIndex(T,_,E)]}var isArrayLike=T=>(T==null?void 0:T.constructor.name)==="Array",isArrayEqual=(T,_)=>{if(T.length!==_.length)return!1;for(let E=0;E<T.length;E++)if(!isEqual(T[E],_[E]))return!1;return!0},isEqual=(T,_)=>{if(Object.is(T,_))return!0;if(T==null&&_!=null||T!=null&&_==null)return!1;if(typeof(T==null?void 0:T.isEqual)=="function"&&typeof(_==null?void 0:_.isEqual)=="function")return T.isEqual(_);if(typeof T=="function"&&typeof _=="function")return T.toString()===_.toString();if(isArrayLike(T)&&isArrayLike(_))return isArrayEqual(Array.from(T),Array.from(_));if(typeof T!="object"||typeof _!="object")return!1;const E=Object.keys(_??Object.create(null)),C=E.length;for(let A=0;A<C;A++)if(!Reflect.has(T,E[A]))return!1;for(let A=0;A<C;A++){const R=E[A];if(!isEqual(T[R],_[R]))return!1}return!0},isArray=T=>Array.isArray(T),isObjectLike=T=>T!=null&&typeof T=="object",isObject$1=T=>isObjectLike(T)&&!isArray(T),isString=T=>typeof T=="string",isFunction$1=T=>typeof T=="function",isNull=T=>T==null,hasProp=(T,_)=>Object.prototype.hasOwnProperty.call(T,_),fnToString=Function.prototype.toString;fnToString.call(Object);var runIfFn=(T,..._)=>(typeof T=="function"?T(..._):T)??void 0,identity$2=T=>T(),noop$4=()=>{},callAll=(...T)=>(..._)=>{T.forEach(function(E){E==null||E(..._)})},uuid=(()=>{let T=0;return()=>(T++,T.toString(36))})(),tryCatch=(T,_)=>{var E;try{return T()}catch(C){return C instanceof Error&&((E=Error.captureStackTrace)==null||E.call(Error,C,tryCatch)),_==null?void 0:_()}},{floor:floor$2,abs:abs$1,round:round$3,min:min$2,max:max$2,pow:pow$1,sign:sign$2}=Math,isNaN$1=T=>Number.isNaN(T),nan=T=>isNaN$1(T)?0:T,mod=(T,_)=>(T%_+_)%_,wrap$3=(T,_)=>(T%_+_)%_,isValueAtMax=(T,_)=>nan(T)>=_,isValueAtMin=(T,_)=>nan(T)<=_,isValueWithinRange=(T,_,E)=>nan(T)>=_&&nan(T)<=E,roundValue=(T,_,E)=>round$3((nan(T)-_)/E)*E+_,clampValue=(T,_,E)=>min$2(max$2(nan(T),_),E),getValuePercent=(T,_,E)=>(nan(T)-_)/(E-_),getPercentValue=(T,_,E,C)=>clampValue(roundValue(T*(E-_)+_,_,C),_,E),roundToStepPrecision=(T,_)=>{let E=T,C=_.toString(),A=C.indexOf("."),R=A>=0?C.length-A:0;if(R>0){let I=pow$1(10,R);E=round$3(E*I)/I}return E},roundToDpr=(T,_)=>typeof _=="number"?floor$2(T*_+.5)/_:round$3(T),snapValueToStep=(T,_,E,C)=>{_=Number(_),E=Number(E);let A=(T-(isNaN$1(_)?0:_))%C,R=roundToStepPrecision(abs$1(A)*2>=C?T+sign$2(A)*(C-abs$1(A)):T-A,C);return isNaN$1(_)?!isNaN$1(E)&&R>E&&(R=_+floor$2(roundToStepPrecision((E-_)/C,C))*C):R<_?R=_:!isNaN$1(E)&&R>E&&(R=_+floor$2(roundToStepPrecision((E-_)/C,C))*C),roundToStepPrecision(R,C)},toFixedNumber=(T,_=0,E=10)=>{const C=Math.pow(E,_);return round$3(T*C)/C},countDecimals=T=>{if(!Number.isFinite(T))return 0;let _=1,E=0;for(;Math.round(T*_)/_!==T;)_*=10,E+=1;return E},decimalOp=(T,_,E)=>{let C=_==="+"?T+E:T-E;if(T%1!==0||E%1!==0){const A=10**Math.max(countDecimals(T),countDecimals(E));T=Math.round(T*A),E=Math.round(E*A),C=_==="+"?T+E:T-E,C/=A}return C},incrementValue=(T,_)=>decimalOp(nan(T),"+",_),decrementValue=(T,_)=>decimalOp(nan(T),"-",_);function compact(T){if(!isPlainObject2(T)||T===void 0)return T;const _=Reflect.ownKeys(T).filter(C=>typeof C=="string"),E={};for(const C of _){const A=T[C];A!==void 0&&(E[C]=compact(A))}return E}var isPlainObject2=T=>T&&typeof T=="object"&&T.constructor===Object;function setRafTimeout(T,_){const E=performance.now();let C;function A(R){C=requestAnimationFrame(A),R-E>=_&&T()}return C=requestAnimationFrame(A),()=>cancelAnimationFrame(C)}function warn(...T){T.length===1?T[0]:T[1],T.length===2&&T[0]}function ensure(T,_){if(T==null)throw new Error(_())}function ensureProps(T,_,E){let C=[];for(const A of _)T[A]==null&&C.push(A);if(C.length>0)throw new Error(`[zag-js${` > ${E}`}] missing required props: ${C.join(", ")}`)}var clsx=(...T)=>T.map(_=>{var E;return(E=_==null?void 0:_.trim)==null?void 0:E.call(_)}).filter(Boolean).join(" "),CSS_REGEX=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,serialize=T=>{const _={};let E;for(;E=CSS_REGEX.exec(T);)_[E[1]]=E[2];return _},css$1=(T,_)=>{if(isString(T)){if(isString(_))return`${T};${_}`;T=serialize(T)}else isString(_)&&(_=serialize(_));return Object.assign({},T??{},_??{})};function mergeProps(...T){let _={};for(let E of T){for(let C in _){if(C.startsWith("on")&&typeof _[C]=="function"&&typeof E[C]=="function"){_[C]=callAll(E[C],_[C]);continue}if(C==="className"||C==="class"){_[C]=clsx(_[C],E[C]);continue}if(C==="style"){_[C]=css$1(_[C],E[C]);continue}_[C]=E[C]!==void 0?E[C]:_[C]}for(let C in E)_[C]===void 0&&(_[C]=E[C])}return _}function memo$2(T,_,E){let C=[],A;return R=>{const I=T(R);return(I.length!==C.length||I.some((B,U)=>!isEqual(C[U],B)))&&(C=I,A=_(...I)),A}}function createGuards(){return{and:(...T)=>function(E){return T.every(C=>E.guard(C))},or:(...T)=>function(E){return T.some(C=>E.guard(C))},not:T=>function(E){return!E.guard(T)}}}function createMachine$1(T){return T}function setup(){return{guards:createGuards(),createMachine:T=>T,choose:T=>function({choose:E}){var C;return(C=E(T))==null?void 0:C.actions}}}var MachineStatus=(T=>(T.NotStarted="Not Started",T.Started="Started",T.Stopped="Stopped",T))(MachineStatus||{}),INIT_STATE="__init__";function createScope(T){const _=()=>{var F;return((F=T.getRootNode)==null?void 0:F.call(T))??document},E=()=>getDocument(_()),C=()=>E().defaultView??window,A=()=>getActiveElement(_());return{...T,getRootNode:_,getDoc:E,getWin:C,getActiveElement:A,isActiveElement:F=>F===A(),getById:F=>_().getElementById(F)}}function getRef(T){var C,A;let _=(C=Object.getOwnPropertyDescriptor(T.props,"ref"))==null?void 0:C.get,E=_&&"isReactWarning"in _&&_.isReactWarning;return E?T.ref:(_=(A=Object.getOwnPropertyDescriptor(T,"ref"))==null?void 0:A.get,E=_&&"isReactWarning"in _&&_.isReactWarning,E?T.props.ref:T.props.ref||T.ref)}const withAsChild=T=>{const _=reactExports.memo(reactExports.forwardRef((E,C)=>{const{asChild:A,children:R,...I}=E;if(!A)return reactExports.createElement(T,{...I,ref:C},R);const F=reactExports.Children.only(R);if(!reactExports.isValidElement(F))return null;const B=getRef(F);return reactExports.cloneElement(F,{...mergeProps(I,F.props),ref:C?composeRefs(C,B):B})}));return _.displayName=T.displayName||T.name,_},jsxFactory=()=>{const T=new Map;return new Proxy(withAsChild,{apply(_,E,C){return withAsChild(C[0])},get(_,E){const C=E;return T.has(C)||T.set(C,withAsChild(C)),T.get(C)}})},ark=jsxFactory(),createSplitProps=()=>(T,_)=>_.reduce((E,C)=>{const[A,R]=E,I=C;return R[I]!==void 0&&(A[I]=R[I]),delete R[I],[A,R]},[{},{...T}]),splitPresenceProps=T=>createSplitProps()(T,["immediate","lazyMount","onExitComplete","present","skipAnimationOnMount","unmountOnExit"]);function createNormalizer(T){return new Proxy({},{get(_,E){return E==="style"?C=>T({style:C}).style:T}})}var createProps$1=()=>T=>Array.from(new Set(T));function connect$9(T,_){const{state:E,send:C,context:A}=T,R=E.matches("mounted","unmountSuspended");return{skip:!A.get("initial"),present:R,setNode(I){I&&C({type:"NODE.SET",node:I})},unmount(){C({type:"UNMOUNT"})}}}var machine$9={props({props:T}){return{...T,present:!!T.present}},initialState({prop:T}){return T("present")?"mounted":"unmounted"},refs(){return{node:null,styles:null}},context({bindable:T}){return{unmountAnimationName:T(()=>({defaultValue:null})),prevAnimationName:T(()=>({defaultValue:null})),present:T(()=>({defaultValue:!1})),initial:T(()=>({sync:!0,defaultValue:!1}))}},exit:["clearInitial","cleanupNode"],watch({track:T,action:_,prop:E}){T([()=>E("present")],()=>{_(["setInitial","syncPresence"])})},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]},"UNMOUNT.SUSPEND":{target:"unmountSuspended"}}},unmountSuspended:{effects:["trackAnimationEvents"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]}}},unmounted:{on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}},implementations:{actions:{setInitial:({context:T})=>{T.get("initial")||queueMicrotask(()=>{T.set("initial",!0)})},clearInitial:({context:T})=>{T.set("initial",!1)},cleanupNode:({refs:T})=>{T.set("node",null),T.set("styles",null)},invokeOnExitComplete:({prop:T})=>{var _;(_=T("onExitComplete"))==null||_()},setNode:({refs:T,event:_})=>{T.set("node",_.node)},setStyles:({refs:T,event:_})=>{T.set("styles",getComputedStyle$2(_.node))},syncPresence:({context:T,refs:_,send:E,prop:C})=>{const A=C("present");if(A)return E({type:"MOUNT",src:"presence.changed"});const R=_.get("node");if(!A&&(R==null?void 0:R.ownerDocument.visibilityState)==="hidden")return E({type:"UNMOUNT",src:"visibilitychange"});raf$1(()=>{var F,B;const I=getAnimationName(_.get("styles"));T.set("unmountAnimationName",I),I==="none"||I===T.get("prevAnimationName")||((F=_.get("styles"))==null?void 0:F.display)==="none"||((B=_.get("styles"))==null?void 0:B.animationDuration)==="0s"?E({type:"UNMOUNT",src:"presence.changed"}):E({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName:({context:T,refs:_})=>{raf$1(()=>{T.set("prevAnimationName",getAnimationName(_.get("styles")))})},clearPrevAnimationName:({context:T})=>{T.set("prevAnimationName",null)}},effects:{trackAnimationEvents:({context:T,refs:_,send:E})=>{const C=_.get("node");if(!C)return;const A=F=>{var U,V;(((V=(U=F.composedPath)==null?void 0:U.call(F))==null?void 0:V[0])??F.target)===C&&T.set("prevAnimationName",getAnimationName(_.get("styles")))},R=F=>{const B=getAnimationName(_.get("styles"));getEventTarget(F)===C&&B===T.get("unmountAnimationName")&&E({type:"UNMOUNT",src:"animationend"})};C.addEventListener("animationstart",A),C.addEventListener("animationcancel",R),C.addEventListener("animationend",R);const I=setStyle(C,{animationFillMode:"forwards"});return()=>{C.removeEventListener("animationstart",A),C.removeEventListener("animationcancel",R),C.removeEventListener("animationend",R),nextTick(()=>I())}}}}};function getAnimationName(T){return(T==null?void 0:T.animationName)||"none"}createProps$1()(["onExitComplete","present","immediate"]);var reactDomExports=requireReactDom(),useSafeLayoutEffect$1=typeof globalThis.document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useBindable(T){const _=T().value??T().defaultValue,E=T().isEqual??Object.is,[C]=reactExports.useState(_),[A,R]=reactExports.useState(C),I=T().value!==void 0,F=reactExports.useRef(A);F.current=I?T().value:A;const B=reactExports.useRef(F.current);useSafeLayoutEffect$1(()=>{B.current=F.current},[A,T().value]);const U=D=>{var z,W;const O=B.current,L=isFunction$1(D)?D(O):D;T().debug&&console.log(`[bindable > ${T().debug}] setValue`,{next:L,prev:O}),I||R(L),E(L,O)||(W=(z=T()).onChange)==null||W.call(z,L,O)};function V(){return I?T().value:A}return{initial:C,ref:F,get:V,set(D){(T().sync?reactDomExports.flushSync:identity$2)(()=>U(D))},invoke(D,O){var L,z;(z=(L=T()).onChange)==null||z.call(L,D,O)},hash(D){var O,L;return((L=(O=T()).hash)==null?void 0:L.call(O,D))??String(D)}}}useBindable.cleanup=T=>{reactExports.useEffect(()=>T,[])};useBindable.ref=T=>{const _=reactExports.useRef(T);return{get:()=>_.current,set:E=>{_.current=E}}};function useRefs(T){const _=reactExports.useRef(T);return{get(E){return _.current[E]},set(E,C){_.current[E]=C}}}var useTrack=(T,_)=>{const E=reactExports.useRef(!1),C=reactExports.useRef(!1);reactExports.useEffect(()=>{if(E.current&&C.current)return _();C.current=!0},[...(T??[]).map(A=>typeof A=="function"?A():A)]),reactExports.useEffect(()=>(E.current=!0,()=>{E.current=!1}),[])};function useMachine(T,_={}){var fe,he,ge,ye;const E=reactExports.useMemo(()=>{const{id:we,ids:le,getRootNode:de}=_;return createScope({id:we,ids:le,getRootNode:de})},[_]),C=(...we)=>{T.debug&&console.log(...we)},A=((fe=T.props)==null?void 0:fe.call(T,{props:compact(_),scope:E}))??_,R=useProp(A),I=(he=T.context)==null?void 0:he.call(T,{prop:R,bindable:useBindable,scope:E,flush,getContext(){return B},getComputed(){return J},getRefs(){return W}}),F=useLiveRef(I),B={get(we){var le;return(le=F.current)==null?void 0:le[we].ref.current},set(we,le){var de;(de=F.current)==null||de[we].set(le)},initial(we){var le;return(le=F.current)==null?void 0:le[we].initial},hash(we){var de,ce;const le=(de=F.current)==null?void 0:de[we].get();return(ce=F.current)==null?void 0:ce[we].hash(le)}},U=reactExports.useRef(new Map),V=reactExports.useRef(null),D=reactExports.useRef(null),O=reactExports.useRef({type:""}),L=()=>({...O.current,current(){return O.current},previous(){return D.current}}),z=()=>({...ie,matches(...we){return we.includes(ie.ref.current)},hasTag(we){var le,de;return!!((de=(le=T.states[ie.ref.current])==null?void 0:le.tags)!=null&&de.includes(we))}}),W=useRefs(((ge=T.refs)==null?void 0:ge.call(T,{prop:R,context:B}))??{}),X=()=>({state:z(),context:B,event:L(),prop:R,send:oe,action:Y,guard:K,track:useTrack,refs:W,computed:J,flush,scope:E,choose:ee}),Y=we=>{const le=isFunction$1(we)?we(X()):we;if(!le)return;const de=le.map(ce=>{var be,me;const ve=(me=(be=T.implementations)==null?void 0:be.actions)==null?void 0:me[ce];return ve||warn(`[zag-js] No implementation found for action "${JSON.stringify(ce)}"`),ve});for(const ce of de)ce==null||ce(X())},K=we=>{var le,de;return isFunction$1(we)?we(X()):(de=(le=T.implementations)==null?void 0:le.guards)==null?void 0:de[we](X())},Q=we=>{const le=isFunction$1(we)?we(X()):we;if(!le)return;const de=le.map(ve=>{var me,xe;const be=(xe=(me=T.implementations)==null?void 0:me.effects)==null?void 0:xe[ve];return be||warn(`[zag-js] No implementation found for effect "${JSON.stringify(ve)}"`),be}),ce=[];for(const ve of de){const be=ve==null?void 0:ve(X());be&&ce.push(be)}return()=>ce.forEach(ve=>ve==null?void 0:ve())},ee=we=>toArray$1(we).find(le=>{let de=!le.guard;return isString(le.guard)?de=!!K(le.guard):isFunction$1(le.guard)&&(de=le.guard(X())),de}),J=we=>{ensure(T.computed,()=>"[zag-js] No computed object found on machine");const le=T.computed[we];return le({context:B,event:L(),prop:R,refs:W,scope:E,computed:J})},ie=useBindable(()=>({defaultValue:T.initialState({prop:R}),onChange(we,le){var ce,ve,be,me;if(le){const xe=U.current.get(le);xe==null||xe(),U.current.delete(le)}le&&Y((ce=T.states[le])==null?void 0:ce.exit),Y((ve=V.current)==null?void 0:ve.actions);const de=Q((be=T.states[we])==null?void 0:be.effects);if(de&&U.current.set(we,de),le===INIT_STATE){Y(T.entry);const xe=Q(T.effects);xe&&U.current.set(INIT_STATE,xe)}Y((me=T.states[we])==null?void 0:me.entry)}})),re=reactExports.useRef(void 0),se=reactExports.useRef(MachineStatus.NotStarted);useSafeLayoutEffect$1(()=>{queueMicrotask(()=>{const de=se.current===MachineStatus.Started;se.current=MachineStatus.Started,C(de?"rehydrating...":"initializing...");const ce=re.current??ie.initial;ie.invoke(ce,de?ie.get():INIT_STATE)});const we=U.current,le=ie.ref.current;return()=>{C("unmounting..."),re.current=le,se.current=MachineStatus.Stopped,we.forEach(de=>de==null?void 0:de()),U.current=new Map,V.current=null,queueMicrotask(()=>{Y(T.exit)})}},[]);const ne=()=>"ref"in ie?ie.ref.current:ie.get(),oe=we=>{queueMicrotask(()=>{var me,xe;if(se.current!==MachineStatus.Started)return;D.current=O.current,O.current=we,C("send",we);let le=ne();const de=((me=T.states[le].on)==null?void 0:me[we.type])??((xe=T.on)==null?void 0:xe[we.type]),ce=ee(de);if(!ce)return;V.current=ce;const ve=ce.target??le;C("transition",ce);const be=ve!==le;be?reactDomExports.flushSync(()=>ie.set(ve)):ce.reenter&&!be?ie.invoke(le,le):Y(ce.actions??[])})};return(ye=T.watch)==null||ye.call(T,X()),{state:z(),send:oe,context:B,prop:R,scope:E,refs:W,computed:J,event:L(),getStatus:()=>se.current}}function useLiveRef(T){const _=reactExports.useRef(T);return _.current=T,_}function useProp(T){const _=useLiveRef(T);return function(C){return _.current[C]}}function flush(T){queueMicrotask(()=>{reactDomExports.flushSync(()=>T())})}var normalizeProps=createNormalizer(T=>T);function useEvent(T,_={}){const{sync:E=!1}=_,C=useLatestRef(T);return reactExports.useCallback((...A)=>{var R;return E?queueMicrotask(()=>{var I;return(I=C.current)==null?void 0:I.call(C,...A)}):(R=C.current)==null?void 0:R.call(C,...A)},[E,C])}function useLatestRef(T){const _=reactExports.useRef(T);return _.current=T,_}const usePresence=(T={})=>{const{lazyMount:_,unmountOnExit:E,present:C,skipAnimationOnMount:A=!1,...R}=T,I=reactExports.useRef(!1),F={...R,present:C,onExitComplete:useEvent(T.onExitComplete)},B=useMachine(machine$9,F),U=connect$9(B);U.present&&(I.current=!0);const V=!U.present&&!I.current&&_||E&&!U.present&&I.current,D=()=>({"data-state":U.skip&&A?void 0:C?"open":"closed",hidden:!U.present});return{ref:U.setNode,getPresenceProps:D,present:U.present,unmounted:V}},[PresenceProvider,usePresenceContext]=createContext({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"});function useSlotRecipe(T){const{key:_,recipe:E}=T,C=useChakraContext();return reactExports.useMemo(()=>{const A=E||(_!=null?C.getSlotRecipe(_):{});return C.sva(structuredClone(A))},[_,E,C])}const upperFirst=T=>T.charAt(0).toUpperCase()+T.slice(1),createSlotRecipeContext=T=>{const{key:_,recipe:E}=T,C=upperFirst(_||E.className||"Component"),[A,R]=createContext$1({name:`${C}StylesContext`,errorMessage:`use${C}Styles returned is 'undefined'. Seems you forgot to wrap the components in "<${C}.Root />" `}),[I,F]=createContext$1({name:`${C}ClassNameContext`,errorMessage:`use${C}ClassNames returned is 'undefined'. Seems you forgot to wrap the components in "<${C}.Root />" `,strict:!1}),[B,U]=createContext$1({strict:!1,name:`${C}PropsContext`,providerName:`${C}PropsContext`,defaultValue:{}});function V(z){const{unstyled:W,...X}=z,Y=useSlotRecipe({key:_,recipe:X.recipe||E}),[K,Q]=reactExports.useMemo(()=>Y.splitVariantProps(X),[X,Y]);return{styles:reactExports.useMemo(()=>W?EMPTY_SLOT_STYLES:Y(K),[W,K,Y]),classNames:Y.classNameMap,props:Q}}function D(z,W={}){const{defaultProps:X}=W,Y=K=>{const Q=U(),ee=reactExports.useMemo(()=>mergeProps$1(X,Q,K),[Q,K]),{styles:J,classNames:ie,props:re}=V(ee);return jsxRuntimeExports.jsx(A,{value:J,children:jsxRuntimeExports.jsx(I,{value:ie,children:jsxRuntimeExports.jsx(z,{...re})})})};return Y.displayName=z.displayName||z.name,Y}return{StylesProvider:A,ClassNamesProvider:I,PropsProvider:B,usePropsContext:U,useRecipeResult:V,withProvider:(z,W,X)=>{const{defaultProps:Y,...K}=X??{},Q=chakra(z,{},K),ee=reactExports.forwardRef((J,ie)=>{var ye;const re=U(),se=reactExports.useMemo(()=>mergeProps$1(Y??{},re,J),[re,J]),{styles:ne,props:oe,classNames:fe}=V(se),he=fe[W],ge=jsxRuntimeExports.jsx(A,{value:ne,children:jsxRuntimeExports.jsx(I,{value:fe,children:jsxRuntimeExports.jsx(Q,{ref:ie,...oe,css:[ne[W],se.css],className:cx(se.className,he)})})});return((ye=X==null?void 0:X.wrapElement)==null?void 0:ye.call(X,ge,se))??ge});return ee.displayName=z.displayName||z.name,ee},withContext:(z,W,X)=>{const Y=chakra(z,{},X),K=reactExports.forwardRef((Q,ee)=>{const J=R(),ie=F(),re=ie==null?void 0:ie[W];return jsxRuntimeExports.jsx(Y,{...Q,css:[W?J[W]:void 0,Q.css],ref:ee,className:cx(Q.className,re)})});return K.displayName=z.displayName||z.name,K},withRootProvider:D,useStyles:R,useClassNames:F}},CheckIcon=T=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...T,children:jsxRuntimeExports.jsx("path",{d:"M20 6 9 17l-5-5"})}),ChevronUpIcon=T=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...T,children:jsxRuntimeExports.jsx("path",{d:"m18 15-6-6-6 6"})}),ChevronDownIcon=T=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...T,children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})}),CheckCircleIcon=T=>jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",...T,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"})}),WarningIcon=T=>jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",...T,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"})}),CloseIcon=T=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"currentColor",...T,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z"})}),CopyIcon=T=>jsxRuntimeExports.jsxs(chakra.svg,{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",...T,children:[jsxRuntimeExports.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]});function useCallbackRef(T,_=[]){const E=reactExports.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return reactExports.useInsertionEffect(()=>{E.current=T}),reactExports.useCallback((...C)=>{var A;return(A=E.current)==null?void 0:A.call(E,...C)},_)}function useDisclosure(T={}){const _=useCallbackRef(T.onOpen),E=useCallbackRef(T.onClose),[C,A]=reactExports.useState(T.defaultOpen||!1),R=T.open!==void 0?T.open:C,I=T.open!==void 0,F=reactExports.useCallback(()=>{I||A(!1),E==null||E()},[I,E]),B=reactExports.useCallback(()=>{I||A(!0),_==null||_()},[I,_]),U=reactExports.useCallback(()=>{R?F():B()},[R,B,F]);return{open:R,onOpen:B,onClose:F,onToggle:U,setOpen:A}}var createAnatomy=(T,_=[])=>({parts:(...E)=>{if(isEmpty(_))return createAnatomy(T,E);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...E)=>createAnatomy(T,[..._,...E]),rename:E=>createAnatomy(E,_),keys:()=>_,build:()=>[...new Set(_)].reduce((E,C)=>Object.assign(E,{[C]:{selector:[`&[data-scope="${toKebabCase(T)}"][data-part="${toKebabCase(C)}"]`,`& [data-scope="${toKebabCase(T)}"][data-part="${toKebabCase(C)}"]`].join(", "),attrs:{"data-scope":toKebabCase(T),"data-part":toKebabCase(C)}}}),{})}),toKebabCase=T=>T.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),isEmpty=T=>T.length===0,anatomy$n=createAnatomy("collapsible").parts("root","trigger","content","indicator");anatomy$n.build();createProps$1()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","defaultOpen","open"]);const[EnvironmentContextProvider,useEnvironmentContext]=createContext({name:"EnvironmentContext",hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1,defaultValue:{getRootNode:()=>document,getDocument:()=>document,getWindow:()=>window}});var __defProp$3=Object.defineProperty,__defNormalProp$3=(T,_,E)=>_ in T?__defProp$3(T,_,{enumerable:!0,configurable:!0,writable:!0,value:E}):T[_]=E,__publicField$3=(T,_,E)=>__defNormalProp$3(T,_+"",E),isEqualObject=(T,_)=>{if(Object.keys(T).length!==Object.keys(_).length)return!1;for(let E in T)if(T[E]!==_[E])return!1;return!0},Color$1=class{toHexInt(){return this.toFormat("rgba").toHexInt()}getChannelValue(_){if(_ in this)return this[_];throw new Error("Unsupported color channel: "+_)}getChannelValuePercent(_,E){const C=E??this.getChannelValue(_),{minValue:A,maxValue:R}=this.getChannelRange(_);return getValuePercent(C,A,R)}getChannelPercentValue(_,E){const{minValue:C,maxValue:A,step:R}=this.getChannelRange(_),I=getPercentValue(E,C,A,R);return snapValueToStep(I,C,A,R)}withChannelValue(_,E){const{minValue:C,maxValue:A}=this.getChannelRange(_);if(_ in this){let R=this.clone();return R[_]=clampValue(E,C,A),R}throw new Error("Unsupported color channel: "+_)}getColorAxes(_){let{xChannel:E,yChannel:C}=_,A=E||this.getChannels().find(F=>F!==C),R=C||this.getChannels().find(F=>F!==A),I=this.getChannels().find(F=>F!==A&&F!==R);return{xChannel:A,yChannel:R,zChannel:I}}incrementChannel(_,E){const{minValue:C,maxValue:A,step:R}=this.getChannelRange(_),I=snapValueToStep(clampValue(this.getChannelValue(_)+E,C,A),C,A,R);return this.withChannelValue(_,I)}decrementChannel(_,E){return this.incrementChannel(_,-E)}isEqual(_){return isEqualObject(this.toJSON(),_.toJSON())&&this.getChannelValue("alpha")===_.getChannelValue("alpha")}},_RGBColor=class Ko extends Color$1{constructor(_,E,C,A){super(),this.red=_,this.green=E,this.blue=C,this.alpha=A}static parse(_){let E=[];if(/^#[\da-f]+$/i.test(_)&&[4,5,7,9].includes(_.length)){const A=(_.length<6?_.replace(/[^#]/gi,"$&$&"):_).slice(1).split("");for(;A.length>0;)E.push(parseInt(A.splice(0,2).join(""),16));E[3]=E[3]!==void 0?E[3]/255:void 0}const C=_.match(/^rgba?\((.*)\)$/);return C!=null&&C[1]&&(E=C[1].split(",").map(A=>Number(A.trim())).map((A,R)=>clampValue(A,0,R<3?255:1))),E.length<3?void 0:new Ko(E[0],E[1],E[2],E[3]??1)}toString(_){switch(_){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;case"hsl":return this.toHSL().toString("hsl");case"hsb":return this.toHSB().toString("hsb");default:return this.toFormat(_).toString(_)}}toFormat(_){switch(_){case"rgba":return this;case"hsba":return this.toHSB();case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+_)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const _=this.red/255,E=this.green/255,C=this.blue/255,A=Math.min(_,E,C),R=Math.max(_,E,C),I=R-A,F=R===0?0:I/R;let B=0;if(I!==0){switch(R){case _:B=(E-C)/I+(E<C?6:0);break;case E:B=(C-_)/I+2;break;case C:B=(_-E)/I+4;break}B/=6}return new HSBColor(toFixedNumber(B*360,2),toFixedNumber(F*100,2),toFixedNumber(R*100,2),toFixedNumber(this.alpha,2))}toHSL(){const _=this.red/255,E=this.green/255,C=this.blue/255,A=Math.min(_,E,C),R=Math.max(_,E,C),I=(R+A)/2,F=R-A;let B=-1,U=-1;if(F===0)B=U=0;else{switch(U=F/(I<.5?R+A:2-R-A),R){case _:B=(E-C)/F+(E<C?6:0);break;case E:B=(C-_)/F+2;break;case C:B=(_-E)/F+4;break}B/=6}return new HSLColor(toFixedNumber(B*360,2),toFixedNumber(U*100,2),toFixedNumber(I*100,2),toFixedNumber(this.alpha,2))}clone(){return new Ko(this.red,this.green,this.blue,this.alpha)}getChannelFormatOptions(_){switch(_){case"red":case"green":case"blue":return{style:"decimal"};case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+_)}}formatChannelValue(_,E){let C=this.getChannelFormatOptions(_),A=this.getChannelValue(_);return new Intl.NumberFormat(E,C).format(A)}getChannelRange(_){switch(_){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+_)}}toJSON(){return{r:this.red,g:this.green,b:this.blue,a:this.alpha}}getFormat(){return"rgba"}getChannels(){return Ko.colorChannels}};__publicField$3(_RGBColor,"colorChannels",["red","green","blue"]);var RGBColor=_RGBColor,HSL_REGEX=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/,_HSLColor=class Zo extends Color$1{constructor(_,E,C,A){super(),this.hue=_,this.saturation=E,this.lightness=C,this.alpha=A}static parse(_){let E;if(E=_.match(HSL_REGEX)){const[C,A,R,I]=(E[1]??E[2]).split(",").map(F=>Number(F.trim().replace("%","")));return new Zo(mod(C,360),clampValue(A,0,100),clampValue(R,0,100),clampValue(I??1,0,1))}}toString(_){switch(_){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${toFixedNumber(this.saturation,2)}%, ${toFixedNumber(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${toFixedNumber(this.saturation,2)}%, ${toFixedNumber(this.lightness,2)}%, ${this.alpha})`;case"hsb":return this.toHSB().toString("hsb");case"rgb":return this.toRGB().toString("rgb");default:return this.toFormat(_).toString(_)}}toFormat(_){switch(_){case"hsla":return this;case"hsba":return this.toHSB();case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+_)}}toHSB(){let _=this.saturation/100,E=this.lightness/100,C=E+_*Math.min(E,1-E);return _=C===0?0:2*(1-E/C),new HSBColor(toFixedNumber(this.hue,2),toFixedNumber(_*100,2),toFixedNumber(C*100,2),toFixedNumber(this.alpha,2))}toRGB(){let _=this.hue,E=this.saturation/100,C=this.lightness/100,A=E*Math.min(C,1-C),R=(I,F=(I+_/30)%12)=>C-A*Math.max(Math.min(F-3,9-F,1),-1);return new RGBColor(Math.round(R(0)*255),Math.round(R(8)*255),Math.round(R(4)*255),toFixedNumber(this.alpha,2))}clone(){return new Zo(this.hue,this.saturation,this.lightness,this.alpha)}getChannelFormatOptions(_){switch(_){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"lightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+_)}}formatChannelValue(_,E){let C=this.getChannelFormatOptions(_),A=this.getChannelValue(_);return(_==="saturation"||_==="lightness")&&(A/=100),new Intl.NumberFormat(E,C).format(A)}getChannelRange(_){switch(_){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+_)}}toJSON(){return{h:this.hue,s:this.saturation,l:this.lightness,a:this.alpha}}getFormat(){return"hsla"}getChannels(){return Zo.colorChannels}};__publicField$3(_HSLColor,"colorChannels",["hue","saturation","lightness"]);var HSLColor=_HSLColor,HSB_REGEX=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/,_HSBColor=class Qo extends Color$1{constructor(_,E,C,A){super(),this.hue=_,this.saturation=E,this.brightness=C,this.alpha=A}static parse(_){let E;if(E=_.match(HSB_REGEX)){const[C,A,R,I]=(E[1]??E[2]).split(",").map(F=>Number(F.trim().replace("%","")));return new Qo(mod(C,360),clampValue(A,0,100),clampValue(R,0,100),clampValue(I??1,0,1))}}toString(_){switch(_){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${toFixedNumber(this.saturation,2)}%, ${toFixedNumber(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${toFixedNumber(this.saturation,2)}%, ${toFixedNumber(this.brightness,2)}%, ${this.alpha})`;case"hsl":return this.toHSL().toString("hsl");case"rgb":return this.toRGB().toString("rgb");default:return this.toFormat(_).toString(_)}}toFormat(_){switch(_){case"hsba":return this;case"hsla":return this.toHSL();case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+_)}}toHSL(){let _=this.saturation/100,E=this.brightness/100,C=E*(1-_/2);return _=C===0||C===1?0:(E-C)/Math.min(C,1-C),new HSLColor(toFixedNumber(this.hue,2),toFixedNumber(_*100,2),toFixedNumber(C*100,2),toFixedNumber(this.alpha,2))}toRGB(){let _=this.hue,E=this.saturation/100,C=this.brightness/100,A=(R,I=(R+_/60)%6)=>C-E*C*Math.max(Math.min(I,4-I,1),0);return new RGBColor(Math.round(A(5)*255),Math.round(A(3)*255),Math.round(A(1)*255),toFixedNumber(this.alpha,2))}clone(){return new Qo(this.hue,this.saturation,this.brightness,this.alpha)}getChannelFormatOptions(_){switch(_){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"brightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+_)}}formatChannelValue(_,E){let C=this.getChannelFormatOptions(_),A=this.getChannelValue(_);return(_==="saturation"||_==="brightness")&&(A/=100),new Intl.NumberFormat(E,C).format(A)}getChannelRange(_){switch(_){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+_)}}toJSON(){return{h:this.hue,s:this.saturation,b:this.brightness,a:this.alpha}}getFormat(){return"hsba"}getChannels(){return Qo.colorChannels}};__publicField$3(_HSBColor,"colorChannels",["hue","saturation","brightness"]);var HSBColor=_HSBColor,nativeColors="aliceblue:f0f8ff,antiquewhite:faebd7,aqua:00ffff,aquamarine:7fffd4,azure:f0ffff,beige:f5f5dc,bisque:ffe4c4,black:000000,blanchedalmond:ffebcd,blue:0000ff,blueviolet:8a2be2,brown:a52a2a,burlywood:deb887,cadetblue:5f9ea0,chartreuse:7fff00,chocolate:d2691e,coral:ff7f50,cornflowerblue:6495ed,cornsilk:fff8dc,crimson:dc143c,cyan:00ffff,darkblue:00008b,darkcyan:008b8b,darkgoldenrod:b8860b,darkgray:a9a9a9,darkgreen:006400,darkkhaki:bdb76b,darkmagenta:8b008b,darkolivegreen:556b2f,darkorange:ff8c00,darkorchid:9932cc,darkred:8b0000,darksalmon:e9967a,darkseagreen:8fbc8f,darkslateblue:483d8b,darkslategray:2f4f4f,darkturquoise:00ced1,darkviolet:9400d3,deeppink:ff1493,deepskyblue:00bfff,dimgray:696969,dodgerblue:1e90ff,firebrick:b22222,floralwhite:fffaf0,forestgreen:228b22,fuchsia:ff00ff,gainsboro:dcdcdc,ghostwhite:f8f8ff,gold:ffd700,goldenrod:daa520,gray:808080,green:008000,greenyellow:adff2f,honeydew:f0fff0,hotpink:ff69b4,indianred:cd5c5c,indigo:4b0082,ivory:fffff0,khaki:f0e68c,lavender:e6e6fa,lavenderblush:fff0f5,lawngreen:7cfc00,lemonchiffon:fffacd,lightblue:add8e6,lightcoral:f08080,lightcyan:e0ffff,lightgoldenrodyellow:fafad2,lightgrey:d3d3d3,lightgreen:90ee90,lightpink:ffb6c1,lightsalmon:ffa07a,lightseagreen:20b2aa,lightskyblue:87cefa,lightslategray:778899,lightsteelblue:b0c4de,lightyellow:ffffe0,lime:00ff00,limegreen:32cd32,linen:faf0e6,magenta:ff00ff,maroon:800000,mediumaquamarine:66cdaa,mediumblue:0000cd,mediumorchid:ba55d3,mediumpurple:9370d8,mediumseagreen:3cb371,mediumslateblue:7b68ee,mediumspringgreen:00fa9a,mediumturquoise:48d1cc,mediumvioletred:c71585,midnightblue:191970,mintcream:f5fffa,mistyrose:ffe4e1,moccasin:ffe4b5,navajowhite:ffdead,navy:000080,oldlace:fdf5e6,olive:808000,olivedrab:6b8e23,orange:ffa500,orangered:ff4500,orchid:da70d6,palegoldenrod:eee8aa,palegreen:98fb98,paleturquoise:afeeee,palevioletred:d87093,papayawhip:ffefd5,peachpuff:ffdab9,peru:cd853f,pink:ffc0cb,plum:dda0dd,powderblue:b0e0e6,purple:800080,rebeccapurple:663399,red:ff0000,rosybrown:bc8f8f,royalblue:4169e1,saddlebrown:8b4513,salmon:fa8072,sandybrown:f4a460,seagreen:2e8b57,seashell:fff5ee,sienna:a0522d,silver:c0c0c0,skyblue:87ceeb,slateblue:6a5acd,slategray:708090,snow:fffafa,springgreen:00ff7f,steelblue:4682b4,tan:d2b48c,teal:008080,thistle:d8bfd8,tomato:ff6347,turquoise:40e0d0,violet:ee82ee,wheat:f5deb3,white:ffffff,whitesmoke:f5f5f5,yellow:ffff00,yellowgreen:9acd32",makeMap=T=>{const _=new Map,E=T.split(",");for(let C=0;C<E.length;C++){const[A,R]=E[C].split(":");_.set(A,`#${R}`),A.includes("gray")&&_.set(A.replace("gray","grey"),`#${R}`)}return _},nativeColorMap=makeMap(nativeColors),parseColor=T=>{var E;if(nativeColorMap.has(T))return parseColor(nativeColorMap.get(T));const _=RGBColor.parse(T)||HSBColor.parse(T)||HSLColor.parse(T);if(!_){const C=new Error("Invalid color value: "+T);throw(E=Error.captureStackTrace)==null||E.call(Error,C,parseColor),C}return _};const sides=["top","right","bottom","left"],min$1=Math.min,max$1=Math.max,round$2=Math.round,floor$1=Math.floor,createCoords=T=>({x:T,y:T}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$2(T,_,E){return max$1(T,min$1(_,E))}function evaluate(T,_){return typeof T=="function"?T(_):T}function getSide(T){return T.split("-")[0]}function getAlignment(T){return T.split("-")[1]}function getOppositeAxis(T){return T==="x"?"y":"x"}function getAxisLength(T){return T==="y"?"height":"width"}function getSideAxis(T){return["top","bottom"].includes(getSide(T))?"y":"x"}function getAlignmentAxis(T){return getOppositeAxis(getSideAxis(T))}function getAlignmentSides(T,_,E){E===void 0&&(E=!1);const C=getAlignment(T),A=getAlignmentAxis(T),R=getAxisLength(A);let I=A==="x"?C===(E?"end":"start")?"right":"left":C==="start"?"bottom":"top";return _.reference[R]>_.floating[R]&&(I=getOppositePlacement(I)),[I,getOppositePlacement(I)]}function getExpandedPlacements(T){const _=getOppositePlacement(T);return[getOppositeAlignmentPlacement(T),_,getOppositeAlignmentPlacement(_)]}function getOppositeAlignmentPlacement(T){return T.replace(/start|end/g,_=>oppositeAlignmentMap[_])}function getSideList(T,_,E){const C=["left","right"],A=["right","left"],R=["top","bottom"],I=["bottom","top"];switch(T){case"top":case"bottom":return E?_?A:C:_?C:A;case"left":case"right":return _?R:I;default:return[]}}function getOppositeAxisPlacements(T,_,E,C){const A=getAlignment(T);let R=getSideList(getSide(T),E==="start",C);return A&&(R=R.map(I=>I+"-"+A),_&&(R=R.concat(R.map(getOppositeAlignmentPlacement)))),R}function getOppositePlacement(T){return T.replace(/left|right|bottom|top/g,_=>oppositeSideMap[_])}function expandPaddingObject(T){return{top:0,right:0,bottom:0,left:0,...T}}function getPaddingObject(T){return typeof T!="number"?expandPaddingObject(T):{top:T,right:T,bottom:T,left:T}}function rectToClientRect(T){const{x:_,y:E,width:C,height:A}=T;return{width:C,height:A,top:E,left:_,right:_+C,bottom:E+A,x:_,y:E}}function computeCoordsFromPlacement(T,_,E){let{reference:C,floating:A}=T;const R=getSideAxis(_),I=getAlignmentAxis(_),F=getAxisLength(I),B=getSide(_),U=R==="y",V=C.x+C.width/2-A.width/2,D=C.y+C.height/2-A.height/2,O=C[F]/2-A[F]/2;let L;switch(B){case"top":L={x:V,y:C.y-A.height};break;case"bottom":L={x:V,y:C.y+C.height};break;case"right":L={x:C.x+C.width,y:D};break;case"left":L={x:C.x-A.width,y:D};break;default:L={x:C.x,y:C.y}}switch(getAlignment(_)){case"start":L[I]-=O*(E&&U?-1:1);break;case"end":L[I]+=O*(E&&U?-1:1);break}return L}const computePosition$1=async(T,_,E)=>{const{placement:C="bottom",strategy:A="absolute",middleware:R=[],platform:I}=E,F=R.filter(Boolean),B=await(I.isRTL==null?void 0:I.isRTL(_));let U=await I.getElementRects({reference:T,floating:_,strategy:A}),{x:V,y:D}=computeCoordsFromPlacement(U,C,B),O=C,L={},z=0;for(let W=0;W<F.length;W++){const{name:X,fn:Y}=F[W],{x:K,y:Q,data:ee,reset:J}=await Y({x:V,y:D,initialPlacement:C,placement:O,strategy:A,middlewareData:L,rects:U,platform:I,elements:{reference:T,floating:_}});V=K??V,D=Q??D,L={...L,[X]:{...L[X],...ee}},J&&z<=50&&(z++,typeof J=="object"&&(J.placement&&(O=J.placement),J.rects&&(U=J.rects===!0?await I.getElementRects({reference:T,floating:_,strategy:A}):J.rects),{x:V,y:D}=computeCoordsFromPlacement(U,O,B)),W=-1)}return{x:V,y:D,placement:O,strategy:A,middlewareData:L}};async function detectOverflow(T,_){var E;_===void 0&&(_={});const{x:C,y:A,platform:R,rects:I,elements:F,strategy:B}=T,{boundary:U="clippingAncestors",rootBoundary:V="viewport",elementContext:D="floating",altBoundary:O=!1,padding:L=0}=evaluate(_,T),z=getPaddingObject(L),X=F[O?D==="floating"?"reference":"floating":D],Y=rectToClientRect(await R.getClippingRect({element:(E=await(R.isElement==null?void 0:R.isElement(X)))==null||E?X:X.contextElement||await(R.getDocumentElement==null?void 0:R.getDocumentElement(F.floating)),boundary:U,rootBoundary:V,strategy:B})),K=D==="floating"?{x:C,y:A,width:I.floating.width,height:I.floating.height}:I.reference,Q=await(R.getOffsetParent==null?void 0:R.getOffsetParent(F.floating)),ee=await(R.isElement==null?void 0:R.isElement(Q))?await(R.getScale==null?void 0:R.getScale(Q))||{x:1,y:1}:{x:1,y:1},J=rectToClientRect(R.convertOffsetParentRelativeRectToViewportRelativeRect?await R.convertOffsetParentRelativeRectToViewportRelativeRect({elements:F,rect:K,offsetParent:Q,strategy:B}):K);return{top:(Y.top-J.top+z.top)/ee.y,bottom:(J.bottom-Y.bottom+z.bottom)/ee.y,left:(Y.left-J.left+z.left)/ee.x,right:(J.right-Y.right+z.right)/ee.x}}const arrow$1=T=>({name:"arrow",options:T,async fn(_){const{x:E,y:C,placement:A,rects:R,platform:I,elements:F,middlewareData:B}=_,{element:U,padding:V=0}=evaluate(T,_)||{};if(U==null)return{};const D=getPaddingObject(V),O={x:E,y:C},L=getAlignmentAxis(A),z=getAxisLength(L),W=await I.getDimensions(U),X=L==="y",Y=X?"top":"left",K=X?"bottom":"right",Q=X?"clientHeight":"clientWidth",ee=R.reference[z]+R.reference[L]-O[L]-R.floating[z],J=O[L]-R.reference[L],ie=await(I.getOffsetParent==null?void 0:I.getOffsetParent(U));let re=ie?ie[Q]:0;(!re||!await(I.isElement==null?void 0:I.isElement(ie)))&&(re=F.floating[Q]||R.floating[z]);const se=ee/2-J/2,ne=re/2-W[z]/2-1,oe=min$1(D[Y],ne),fe=min$1(D[K],ne),he=oe,ge=re-W[z]-fe,ye=re/2-W[z]/2+se,we=clamp$2(he,ye,ge),le=!B.arrow&&getAlignment(A)!=null&&ye!==we&&R.reference[z]/2-(ye<he?oe:fe)-W[z]/2<0,de=le?ye<he?ye-he:ye-ge:0;return{[L]:O[L]+de,data:{[L]:we,centerOffset:ye-we-de,...le&&{alignmentOffset:de}},reset:le}}}),flip$1=function(T){return T===void 0&&(T={}),{name:"flip",options:T,async fn(_){var E,C;const{placement:A,middlewareData:R,rects:I,initialPlacement:F,platform:B,elements:U}=_,{mainAxis:V=!0,crossAxis:D=!0,fallbackPlacements:O,fallbackStrategy:L="bestFit",fallbackAxisSideDirection:z="none",flipAlignment:W=!0,...X}=evaluate(T,_);if((E=R.arrow)!=null&&E.alignmentOffset)return{};const Y=getSide(A),K=getSideAxis(F),Q=getSide(F)===F,ee=await(B.isRTL==null?void 0:B.isRTL(U.floating)),J=O||(Q||!W?[getOppositePlacement(F)]:getExpandedPlacements(F)),ie=z!=="none";!O&&ie&&J.push(...getOppositeAxisPlacements(F,W,z,ee));const re=[F,...J],se=await detectOverflow(_,X),ne=[];let oe=((C=R.flip)==null?void 0:C.overflows)||[];if(V&&ne.push(se[Y]),D){const ye=getAlignmentSides(A,I,ee);ne.push(se[ye[0]],se[ye[1]])}if(oe=[...oe,{placement:A,overflows:ne}],!ne.every(ye=>ye<=0)){var fe,he;const ye=(((fe=R.flip)==null?void 0:fe.index)||0)+1,we=re[ye];if(we)return{data:{index:ye,overflows:oe},reset:{placement:we}};let le=(he=oe.filter(de=>de.overflows[0]<=0).sort((de,ce)=>de.overflows[1]-ce.overflows[1])[0])==null?void 0:he.placement;if(!le)switch(L){case"bestFit":{var ge;const de=(ge=oe.filter(ce=>{if(ie){const ve=getSideAxis(ce.placement);return ve===K||ve==="y"}return!0}).map(ce=>[ce.placement,ce.overflows.filter(ve=>ve>0).reduce((ve,be)=>ve+be,0)]).sort((ce,ve)=>ce[1]-ve[1])[0])==null?void 0:ge[0];de&&(le=de);break}case"initialPlacement":le=F;break}if(A!==le)return{reset:{placement:le}}}return{}}}};function getSideOffsets(T,_){return{top:T.top-_.height,right:T.right-_.width,bottom:T.bottom-_.height,left:T.left-_.width}}function isAnySideFullyClipped(T){return sides.some(_=>T[_]>=0)}const hide$1=function(T){return T===void 0&&(T={}),{name:"hide",options:T,async fn(_){const{rects:E}=_,{strategy:C="referenceHidden",...A}=evaluate(T,_);switch(C){case"referenceHidden":{const R=await detectOverflow(_,{...A,elementContext:"reference"}),I=getSideOffsets(R,E.reference);return{data:{referenceHiddenOffsets:I,referenceHidden:isAnySideFullyClipped(I)}}}case"escaped":{const R=await detectOverflow(_,{...A,altBoundary:!0}),I=getSideOffsets(R,E.floating);return{data:{escapedOffsets:I,escaped:isAnySideFullyClipped(I)}}}default:return{}}}}};async function convertValueToCoords(T,_){const{placement:E,platform:C,elements:A}=T,R=await(C.isRTL==null?void 0:C.isRTL(A.floating)),I=getSide(E),F=getAlignment(E),B=getSideAxis(E)==="y",U=["left","top"].includes(I)?-1:1,V=R&&B?-1:1,D=evaluate(_,T);let{mainAxis:O,crossAxis:L,alignmentAxis:z}=typeof D=="number"?{mainAxis:D,crossAxis:0,alignmentAxis:null}:{mainAxis:D.mainAxis||0,crossAxis:D.crossAxis||0,alignmentAxis:D.alignmentAxis};return F&&typeof z=="number"&&(L=F==="end"?z*-1:z),B?{x:L*V,y:O*U}:{x:O*U,y:L*V}}const offset$1=function(T){return T===void 0&&(T=0),{name:"offset",options:T,async fn(_){var E,C;const{x:A,y:R,placement:I,middlewareData:F}=_,B=await convertValueToCoords(_,T);return I===((E=F.offset)==null?void 0:E.placement)&&(C=F.arrow)!=null&&C.alignmentOffset?{}:{x:A+B.x,y:R+B.y,data:{...B,placement:I}}}}},shift$1=function(T){return T===void 0&&(T={}),{name:"shift",options:T,async fn(_){const{x:E,y:C,placement:A}=_,{mainAxis:R=!0,crossAxis:I=!1,limiter:F={fn:X=>{let{x:Y,y:K}=X;return{x:Y,y:K}}},...B}=evaluate(T,_),U={x:E,y:C},V=await detectOverflow(_,B),D=getSideAxis(getSide(A)),O=getOppositeAxis(D);let L=U[O],z=U[D];if(R){const X=O==="y"?"top":"left",Y=O==="y"?"bottom":"right",K=L+V[X],Q=L-V[Y];L=clamp$2(K,L,Q)}if(I){const X=D==="y"?"top":"left",Y=D==="y"?"bottom":"right",K=z+V[X],Q=z-V[Y];z=clamp$2(K,z,Q)}const W=F.fn({..._,[O]:L,[D]:z});return{...W,data:{x:W.x-E,y:W.y-C,enabled:{[O]:R,[D]:I}}}}}},limitShift$1=function(T){return T===void 0&&(T={}),{options:T,fn(_){const{x:E,y:C,placement:A,rects:R,middlewareData:I}=_,{offset:F=0,mainAxis:B=!0,crossAxis:U=!0}=evaluate(T,_),V={x:E,y:C},D=getSideAxis(A),O=getOppositeAxis(D);let L=V[O],z=V[D];const W=evaluate(F,_),X=typeof W=="number"?{mainAxis:W,crossAxis:0}:{mainAxis:0,crossAxis:0,...W};if(B){const Q=O==="y"?"height":"width",ee=R.reference[O]-R.floating[Q]+X.mainAxis,J=R.reference[O]+R.reference[Q]-X.mainAxis;L<ee?L=ee:L>J&&(L=J)}if(U){var Y,K;const Q=O==="y"?"width":"height",ee=["top","left"].includes(getSide(A)),J=R.reference[D]-R.floating[Q]+(ee&&((Y=I.offset)==null?void 0:Y[D])||0)+(ee?0:X.crossAxis),ie=R.reference[D]+R.reference[Q]+(ee?0:((K=I.offset)==null?void 0:K[D])||0)-(ee?X.crossAxis:0);z<J?z=J:z>ie&&(z=ie)}return{[O]:L,[D]:z}}}},size$1=function(T){return T===void 0&&(T={}),{name:"size",options:T,async fn(_){var E,C;const{placement:A,rects:R,platform:I,elements:F}=_,{apply:B=()=>{},...U}=evaluate(T,_),V=await detectOverflow(_,U),D=getSide(A),O=getAlignment(A),L=getSideAxis(A)==="y",{width:z,height:W}=R.floating;let X,Y;D==="top"||D==="bottom"?(X=D,Y=O===(await(I.isRTL==null?void 0:I.isRTL(F.floating))?"start":"end")?"left":"right"):(Y=D,X=O==="end"?"top":"bottom");const K=W-V.top-V.bottom,Q=z-V.left-V.right,ee=min$1(W-V[X],K),J=min$1(z-V[Y],Q),ie=!_.middlewareData.shift;let re=ee,se=J;if((E=_.middlewareData.shift)!=null&&E.enabled.x&&(se=Q),(C=_.middlewareData.shift)!=null&&C.enabled.y&&(re=K),ie&&!O){const oe=max$1(V.left,0),fe=max$1(V.right,0),he=max$1(V.top,0),ge=max$1(V.bottom,0);L?se=z-2*(oe!==0||fe!==0?oe+fe:max$1(V.left,V.right)):re=W-2*(he!==0||ge!==0?he+ge:max$1(V.top,V.bottom))}await B({..._,availableWidth:se,availableHeight:re});const ne=await I.getDimensions(F.floating);return z!==ne.width||W!==ne.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(T){return isNode$1(T)?(T.nodeName||"").toLowerCase():"#document"}function getWindow(T){var _;return(T==null||(_=T.ownerDocument)==null?void 0:_.defaultView)||window}function getDocumentElement(T){var _;return(_=(isNode$1(T)?T.ownerDocument:T.document)||window.document)==null?void 0:_.documentElement}function isNode$1(T){return hasWindow()?T instanceof Node||T instanceof getWindow(T).Node:!1}function isElement$1(T){return hasWindow()?T instanceof Element||T instanceof getWindow(T).Element:!1}function isHTMLElement(T){return hasWindow()?T instanceof HTMLElement||T instanceof getWindow(T).HTMLElement:!1}function isShadowRoot(T){return!hasWindow()||typeof ShadowRoot>"u"?!1:T instanceof ShadowRoot||T instanceof getWindow(T).ShadowRoot}function isOverflowElement(T){const{overflow:_,overflowX:E,overflowY:C,display:A}=getComputedStyle$1(T);return/auto|scroll|overlay|hidden|clip/.test(_+C+E)&&!["inline","contents"].includes(A)}function isTableElement(T){return["table","td","th"].includes(getNodeName(T))}function isTopLayer(T){return[":popover-open",":modal"].some(_=>{try{return T.matches(_)}catch{return!1}})}function isContainingBlock(T){const _=isWebKit(),E=isElement$1(T)?getComputedStyle$1(T):T;return["transform","translate","scale","rotate","perspective"].some(C=>E[C]?E[C]!=="none":!1)||(E.containerType?E.containerType!=="normal":!1)||!_&&(E.backdropFilter?E.backdropFilter!=="none":!1)||!_&&(E.filter?E.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(C=>(E.willChange||"").includes(C))||["paint","layout","strict","content"].some(C=>(E.contain||"").includes(C))}function getContainingBlock(T){let _=getParentNode$1(T);for(;isHTMLElement(_)&&!isLastTraversableNode(_);){if(isContainingBlock(_))return _;if(isTopLayer(_))return null;_=getParentNode$1(_)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(T){return["html","body","#document"].includes(getNodeName(T))}function getComputedStyle$1(T){return getWindow(T).getComputedStyle(T)}function getNodeScroll(T){return isElement$1(T)?{scrollLeft:T.scrollLeft,scrollTop:T.scrollTop}:{scrollLeft:T.scrollX,scrollTop:T.scrollY}}function getParentNode$1(T){if(getNodeName(T)==="html")return T;const _=T.assignedSlot||T.parentNode||isShadowRoot(T)&&T.host||getDocumentElement(T);return isShadowRoot(_)?_.host:_}function getNearestOverflowAncestor(T){const _=getParentNode$1(T);return isLastTraversableNode(_)?T.ownerDocument?T.ownerDocument.body:T.body:isHTMLElement(_)&&isOverflowElement(_)?_:getNearestOverflowAncestor(_)}function getOverflowAncestors(T,_,E){var C;_===void 0&&(_=[]),E===void 0&&(E=!0);const A=getNearestOverflowAncestor(T),R=A===((C=T.ownerDocument)==null?void 0:C.body),I=getWindow(A);if(R){const F=getFrameElement(I);return _.concat(I,I.visualViewport||[],isOverflowElement(A)?A:[],F&&E?getOverflowAncestors(F):[])}return _.concat(A,getOverflowAncestors(A,[],E))}function getFrameElement(T){return T.parent&&Object.getPrototypeOf(T.parent)?T.frameElement:null}function getCssDimensions(T){const _=getComputedStyle$1(T);let E=parseFloat(_.width)||0,C=parseFloat(_.height)||0;const A=isHTMLElement(T),R=A?T.offsetWidth:E,I=A?T.offsetHeight:C,F=round$2(E)!==R||round$2(C)!==I;return F&&(E=R,C=I),{width:E,height:C,$:F}}function unwrapElement(T){return isElement$1(T)?T:T.contextElement}function getScale(T){const _=unwrapElement(T);if(!isHTMLElement(_))return createCoords(1);const E=_.getBoundingClientRect(),{width:C,height:A,$:R}=getCssDimensions(_);let I=(R?round$2(E.width):E.width)/C,F=(R?round$2(E.height):E.height)/A;return(!I||!Number.isFinite(I))&&(I=1),(!F||!Number.isFinite(F))&&(F=1),{x:I,y:F}}const noOffsets=createCoords(0);function getVisualOffsets(T){const _=getWindow(T);return!isWebKit()||!_.visualViewport?noOffsets:{x:_.visualViewport.offsetLeft,y:_.visualViewport.offsetTop}}function shouldAddVisualOffsets(T,_,E){return _===void 0&&(_=!1),!E||_&&E!==getWindow(T)?!1:_}function getBoundingClientRect(T,_,E,C){_===void 0&&(_=!1),E===void 0&&(E=!1);const A=T.getBoundingClientRect(),R=unwrapElement(T);let I=createCoords(1);_&&(C?isElement$1(C)&&(I=getScale(C)):I=getScale(T));const F=shouldAddVisualOffsets(R,E,C)?getVisualOffsets(R):createCoords(0);let B=(A.left+F.x)/I.x,U=(A.top+F.y)/I.y,V=A.width/I.x,D=A.height/I.y;if(R){const O=getWindow(R),L=C&&isElement$1(C)?getWindow(C):C;let z=O,W=getFrameElement(z);for(;W&&C&&L!==z;){const X=getScale(W),Y=W.getBoundingClientRect(),K=getComputedStyle$1(W),Q=Y.left+(W.clientLeft+parseFloat(K.paddingLeft))*X.x,ee=Y.top+(W.clientTop+parseFloat(K.paddingTop))*X.y;B*=X.x,U*=X.y,V*=X.x,D*=X.y,B+=Q,U+=ee,z=getWindow(W),W=getFrameElement(z)}}return rectToClientRect({width:V,height:D,x:B,y:U})}function getWindowScrollBarX(T,_){const E=getNodeScroll(T).scrollLeft;return _?_.left+E:getBoundingClientRect(getDocumentElement(T)).left+E}function getHTMLOffset(T,_,E){E===void 0&&(E=!1);const C=T.getBoundingClientRect(),A=C.left+_.scrollLeft-(E?0:getWindowScrollBarX(T,C)),R=C.top+_.scrollTop;return{x:A,y:R}}function convertOffsetParentRelativeRectToViewportRelativeRect(T){let{elements:_,rect:E,offsetParent:C,strategy:A}=T;const R=A==="fixed",I=getDocumentElement(C),F=_?isTopLayer(_.floating):!1;if(C===I||F&&R)return E;let B={scrollLeft:0,scrollTop:0},U=createCoords(1);const V=createCoords(0),D=isHTMLElement(C);if((D||!D&&!R)&&((getNodeName(C)!=="body"||isOverflowElement(I))&&(B=getNodeScroll(C)),isHTMLElement(C))){const L=getBoundingClientRect(C);U=getScale(C),V.x=L.x+C.clientLeft,V.y=L.y+C.clientTop}const O=I&&!D&&!R?getHTMLOffset(I,B,!0):createCoords(0);return{width:E.width*U.x,height:E.height*U.y,x:E.x*U.x-B.scrollLeft*U.x+V.x+O.x,y:E.y*U.y-B.scrollTop*U.y+V.y+O.y}}function getClientRects(T){return Array.from(T.getClientRects())}function getDocumentRect(T){const _=getDocumentElement(T),E=getNodeScroll(T),C=T.ownerDocument.body,A=max$1(_.scrollWidth,_.clientWidth,C.scrollWidth,C.clientWidth),R=max$1(_.scrollHeight,_.clientHeight,C.scrollHeight,C.clientHeight);let I=-E.scrollLeft+getWindowScrollBarX(T);const F=-E.scrollTop;return getComputedStyle$1(C).direction==="rtl"&&(I+=max$1(_.clientWidth,C.clientWidth)-A),{width:A,height:R,x:I,y:F}}function getViewportRect(T,_){const E=getWindow(T),C=getDocumentElement(T),A=E.visualViewport;let R=C.clientWidth,I=C.clientHeight,F=0,B=0;if(A){R=A.width,I=A.height;const U=isWebKit();(!U||U&&_==="fixed")&&(F=A.offsetLeft,B=A.offsetTop)}return{width:R,height:I,x:F,y:B}}function getInnerBoundingClientRect(T,_){const E=getBoundingClientRect(T,!0,_==="fixed"),C=E.top+T.clientTop,A=E.left+T.clientLeft,R=isHTMLElement(T)?getScale(T):createCoords(1),I=T.clientWidth*R.x,F=T.clientHeight*R.y,B=A*R.x,U=C*R.y;return{width:I,height:F,x:B,y:U}}function getClientRectFromClippingAncestor(T,_,E){let C;if(_==="viewport")C=getViewportRect(T,E);else if(_==="document")C=getDocumentRect(getDocumentElement(T));else if(isElement$1(_))C=getInnerBoundingClientRect(_,E);else{const A=getVisualOffsets(T);C={x:_.x-A.x,y:_.y-A.y,width:_.width,height:_.height}}return rectToClientRect(C)}function hasFixedPositionAncestor(T,_){const E=getParentNode$1(T);return E===_||!isElement$1(E)||isLastTraversableNode(E)?!1:getComputedStyle$1(E).position==="fixed"||hasFixedPositionAncestor(E,_)}function getClippingElementAncestors(T,_){const E=_.get(T);if(E)return E;let C=getOverflowAncestors(T,[],!1).filter(F=>isElement$1(F)&&getNodeName(F)!=="body"),A=null;const R=getComputedStyle$1(T).position==="fixed";let I=R?getParentNode$1(T):T;for(;isElement$1(I)&&!isLastTraversableNode(I);){const F=getComputedStyle$1(I),B=isContainingBlock(I);!B&&F.position==="fixed"&&(A=null),(R?!B&&!A:!B&&F.position==="static"&&!!A&&["absolute","fixed"].includes(A.position)||isOverflowElement(I)&&!B&&hasFixedPositionAncestor(T,I))?C=C.filter(V=>V!==I):A=F,I=getParentNode$1(I)}return _.set(T,C),C}function getClippingRect(T){let{element:_,boundary:E,rootBoundary:C,strategy:A}=T;const I=[...E==="clippingAncestors"?isTopLayer(_)?[]:getClippingElementAncestors(_,this._c):[].concat(E),C],F=I[0],B=I.reduce((U,V)=>{const D=getClientRectFromClippingAncestor(_,V,A);return U.top=max$1(D.top,U.top),U.right=min$1(D.right,U.right),U.bottom=min$1(D.bottom,U.bottom),U.left=max$1(D.left,U.left),U},getClientRectFromClippingAncestor(_,F,A));return{width:B.right-B.left,height:B.bottom-B.top,x:B.left,y:B.top}}function getDimensions(T){const{width:_,height:E}=getCssDimensions(T);return{width:_,height:E}}function getRectRelativeToOffsetParent(T,_,E){const C=isHTMLElement(_),A=getDocumentElement(_),R=E==="fixed",I=getBoundingClientRect(T,!0,R,_);let F={scrollLeft:0,scrollTop:0};const B=createCoords(0);if(C||!C&&!R)if((getNodeName(_)!=="body"||isOverflowElement(A))&&(F=getNodeScroll(_)),C){const O=getBoundingClientRect(_,!0,R,_);B.x=O.x+_.clientLeft,B.y=O.y+_.clientTop}else A&&(B.x=getWindowScrollBarX(A));const U=A&&!C&&!R?getHTMLOffset(A,F):createCoords(0),V=I.left+F.scrollLeft-B.x-U.x,D=I.top+F.scrollTop-B.y-U.y;return{x:V,y:D,width:I.width,height:I.height}}function isStaticPositioned(T){return getComputedStyle$1(T).position==="static"}function getTrueOffsetParent(T,_){if(!isHTMLElement(T)||getComputedStyle$1(T).position==="fixed")return null;if(_)return _(T);let E=T.offsetParent;return getDocumentElement(T)===E&&(E=E.ownerDocument.body),E}function getOffsetParent(T,_){const E=getWindow(T);if(isTopLayer(T))return E;if(!isHTMLElement(T)){let A=getParentNode$1(T);for(;A&&!isLastTraversableNode(A);){if(isElement$1(A)&&!isStaticPositioned(A))return A;A=getParentNode$1(A)}return E}let C=getTrueOffsetParent(T,_);for(;C&&isTableElement(C)&&isStaticPositioned(C);)C=getTrueOffsetParent(C,_);return C&&isLastTraversableNode(C)&&isStaticPositioned(C)&&!isContainingBlock(C)?E:C||getContainingBlock(T)||E}const getElementRects=async function(T){const _=this.getOffsetParent||getOffsetParent,E=this.getDimensions,C=await E(T.floating);return{reference:getRectRelativeToOffsetParent(T.reference,await _(T.floating),T.strategy),floating:{x:0,y:0,width:C.width,height:C.height}}};function isRTL(T){return getComputedStyle$1(T).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement:isElement$1,isRTL};function rectsAreEqual(T,_){return T.x===_.x&&T.y===_.y&&T.width===_.width&&T.height===_.height}function observeMove(T,_){let E=null,C;const A=getDocumentElement(T);function R(){var F;clearTimeout(C),(F=E)==null||F.disconnect(),E=null}function I(F,B){F===void 0&&(F=!1),B===void 0&&(B=1),R();const U=T.getBoundingClientRect(),{left:V,top:D,width:O,height:L}=U;if(F||_(),!O||!L)return;const z=floor$1(D),W=floor$1(A.clientWidth-(V+O)),X=floor$1(A.clientHeight-(D+L)),Y=floor$1(V),Q={rootMargin:-z+"px "+-W+"px "+-X+"px "+-Y+"px",threshold:max$1(0,min$1(1,B))||1};let ee=!0;function J(ie){const re=ie[0].intersectionRatio;if(re!==B){if(!ee)return I();re?I(!1,re):C=setTimeout(()=>{I(!1,1e-7)},1e3)}re===1&&!rectsAreEqual(U,T.getBoundingClientRect())&&I(),ee=!1}try{E=new IntersectionObserver(J,{...Q,root:A.ownerDocument})}catch{E=new IntersectionObserver(J,Q)}E.observe(T)}return I(!0),R}function autoUpdate(T,_,E,C){C===void 0&&(C={});const{ancestorScroll:A=!0,ancestorResize:R=!0,elementResize:I=typeof ResizeObserver=="function",layoutShift:F=typeof IntersectionObserver=="function",animationFrame:B=!1}=C,U=unwrapElement(T),V=A||R?[...U?getOverflowAncestors(U):[],...getOverflowAncestors(_)]:[];V.forEach(Y=>{A&&Y.addEventListener("scroll",E,{passive:!0}),R&&Y.addEventListener("resize",E)});const D=U&&F?observeMove(U,E):null;let O=-1,L=null;I&&(L=new ResizeObserver(Y=>{let[K]=Y;K&&K.target===U&&L&&(L.unobserve(_),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var Q;(Q=L)==null||Q.observe(_)})),E()}),U&&!B&&L.observe(U),L.observe(_));let z,W=B?getBoundingClientRect(T):null;B&&X();function X(){const Y=getBoundingClientRect(T);W&&!rectsAreEqual(W,Y)&&E(),W=Y,z=requestAnimationFrame(X)}return E(),()=>{var Y;V.forEach(K=>{A&&K.removeEventListener("scroll",E),R&&K.removeEventListener("resize",E)}),D==null||D(),(Y=L)==null||Y.disconnect(),L=null,B&&cancelAnimationFrame(z)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow=arrow$1,limitShift=limitShift$1,computePosition=(T,_,E)=>{const C=new Map,A={platform,...E},R={...A.platform,_c:C};return computePosition$1(T,_,{...A,platform:R})};function createDOMRect(T=0,_=0,E=0,C=0){if(typeof DOMRect=="function")return new DOMRect(T,_,E,C);const A={x:T,y:_,width:E,height:C,top:_,right:T+E,bottom:_+C,left:T};return{...A,toJSON:()=>A}}function getDOMRect(T){if(!T)return createDOMRect();const{x:_,y:E,width:C,height:A}=T;return createDOMRect(_,E,C,A)}function getAnchorElement(T,_){return{contextElement:isHTMLElement$1(T)?T:void 0,getBoundingClientRect:()=>{const E=T,C=_==null?void 0:_(E);return C||!E?getDOMRect(C):E.getBoundingClientRect()}}}var toVar=T=>({variable:T,reference:`var(${T})`}),cssVars={arrowSize:toVar("--arrow-size"),arrowSizeHalf:toVar("--arrow-size-half"),arrowBg:toVar("--arrow-background"),transformOrigin:toVar("--transform-origin"),arrowOffset:toVar("--arrow-offset")},getTransformOrigin=T=>({top:"bottom center","top-start":T?`${T.x}px bottom`:"left bottom","top-end":T?`${T.x}px bottom`:"right bottom",bottom:"top center","bottom-start":T?`${T.x}px top`:"top left","bottom-end":T?`${T.x}px top`:"top right",left:"right center","left-start":T?`right ${T.y}px`:"right top","left-end":T?`right ${T.y}px`:"right bottom",right:"left center","right-start":T?`left ${T.y}px`:"left top","right-end":T?`left ${T.y}px`:"left bottom"}),transformOriginMiddleware={name:"transformOrigin",fn({placement:T,elements:_,middlewareData:E}){const{arrow:C}=E,A=getTransformOrigin(C)[T],{floating:R}=_;return R.style.setProperty(cssVars.transformOrigin.variable,A),{data:{transformOrigin:A}}}},rectMiddleware={name:"rects",fn({rects:T}){return{data:T}}},shiftArrowMiddleware=T=>{if(T)return{name:"shiftArrow",fn({placement:_,middlewareData:E}){if(!E.arrow)return{};const{x:C,y:A}=E.arrow,R=_.split("-")[0];return Object.assign(T.style,{left:C!=null?`${C}px`:"",top:A!=null?`${A}px`:"",[R]:`calc(100% + ${cssVars.arrowOffset.reference})`}),{}}}};function getPlacementDetails(T){const[_,E]=T.split("-");return{side:_,align:E,hasAlign:E!=null}}function getPlacementSide(T){return T.split("-")[0]}var defaultOptions$1={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function roundByDpr(T,_){const E=T.devicePixelRatio||1;return Math.round(_*E)/E}function getBoundaryMiddleware(T){return runIfFn(T.boundary)}function getArrowMiddleware(T,_){if(T)return arrow({element:T,padding:_.arrowPadding})}function getOffsetMiddleware(T,_){if(!isNull(_.offset??_.gutter))return offset(({placement:E})=>{var U,V;const C=((T==null?void 0:T.clientHeight)||0)/2,A=((U=_.offset)==null?void 0:U.mainAxis)??_.gutter,R=typeof A=="number"?A+C:A??C,{hasAlign:I}=getPlacementDetails(E),F=I?void 0:_.shift,B=((V=_.offset)==null?void 0:V.crossAxis)??F;return compact({crossAxis:B,mainAxis:R,alignmentAxis:_.shift})})}function getFlipMiddleware(T){if(T.flip)return flip({boundary:getBoundaryMiddleware(T),padding:T.overflowPadding,fallbackPlacements:T.flip===!0?void 0:T.flip})}function getShiftMiddleware(T){if(!(!T.slide&&!T.overlap))return shift({boundary:getBoundaryMiddleware(T),mainAxis:T.slide,crossAxis:T.overlap,padding:T.overflowPadding,limiter:limitShift()})}function getSizeMiddleware(T){return size({padding:T.overflowPadding,apply({elements:_,rects:E,availableHeight:C,availableWidth:A}){const R=_.floating,I=Math.round(E.reference.width);A=Math.floor(A),C=Math.floor(C),R.style.setProperty("--reference-width",`${I}px`),R.style.setProperty("--available-width",`${A}px`),R.style.setProperty("--available-height",`${C}px`)}})}function hideWhenDetachedMiddleware(T){var _;if(T.hideWhenDetached)return hide({strategy:"referenceHidden",boundary:((_=T.boundary)==null?void 0:_.call(T))??"clippingAncestors"})}function getAutoUpdateOptions(T){return T?T===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:T:{}}function getPlacementImpl(T,_,E={}){const C=getAnchorElement(T,E.getAnchorRect);if(!_||!C)return;const A=Object.assign({},defaultOptions$1,E),R=_.querySelector("[data-part=arrow]"),I=[getOffsetMiddleware(R,A),getFlipMiddleware(A),getShiftMiddleware(A),getArrowMiddleware(R,A),shiftArrowMiddleware(R),transformOriginMiddleware,getSizeMiddleware(A),hideWhenDetachedMiddleware(A),rectMiddleware],{placement:F,strategy:B,onComplete:U,onPositioned:V}=A,D=async()=>{var ee;if(!C||!_)return;const W=await computePosition(C,_,{placement:F,middleware:I,strategy:B});U==null||U(W),V==null||V({placed:!0});const X=getWindow$1(_),Y=roundByDpr(X,W.x),K=roundByDpr(X,W.y);_.style.setProperty("--x",`${Y}px`),_.style.setProperty("--y",`${K}px`),A.hideWhenDetached&&(((ee=W.middlewareData.hide)==null?void 0:ee.referenceHidden)?(_.style.setProperty("visibility","hidden"),_.style.setProperty("pointer-events","none")):(_.style.removeProperty("visibility"),_.style.removeProperty("pointer-events")));const Q=_.firstElementChild;if(Q){const J=getComputedStyle$2(Q);_.style.setProperty("--z-index",J.zIndex)}},O=async()=>{E.updatePosition?(await E.updatePosition({updatePosition:D}),V==null||V({placed:!0})):await D()},L=getAutoUpdateOptions(A.listeners),z=A.listeners?autoUpdate(C,_,O,L):noop$4;return O(),()=>{z==null||z(),V==null||V({placed:!1})}}function getPlacement(T,_,E={}){const{defer:C,...A}=E,R=C?raf$1:F=>F(),I=[];return I.push(R(()=>{const F=typeof T=="function"?T():T,B=typeof _=="function"?_():_;I.push(getPlacementImpl(F,B,A))})),()=>{I.forEach(F=>F==null?void 0:F())}}var ARROW_FLOATING_STYLE={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function getPlacementStyles(T={}){const{placement:_,sameWidth:E,fitViewport:C,strategy:A="absolute"}=T;return{arrow:{position:"absolute",width:cssVars.arrowSize.reference,height:cssVars.arrowSize.reference,[cssVars.arrowSizeHalf.variable]:`calc(${cssVars.arrowSize.reference} / 2)`,[cssVars.arrowOffset.variable]:`calc(${cssVars.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:_?ARROW_FLOATING_STYLE[_.split("-")[0]]:void 0,background:cssVars.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:A,isolation:"isolate",minWidth:E?void 0:"max-content",width:E?"var(--reference-width)":void 0,maxWidth:C?"var(--available-width)":void 0,maxHeight:C?"var(--available-height)":void 0,pointerEvents:_?void 0:"none",top:"0px",left:"0px",transform:_?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function getWindowFrames(T){const _={each(E){var C;for(let A=0;A<((C=T.frames)==null?void 0:C.length);A+=1){const R=T.frames[A];R&&E(R)}},addEventListener(E,C,A){return _.each(R=>{try{R.document.addEventListener(E,C,A)}catch{}}),()=>{try{_.removeEventListener(E,C,A)}catch{}}},removeEventListener(E,C,A){_.each(R=>{try{R.document.removeEventListener(E,C,A)}catch{}})}};return _}function getParentWindow(T){const _=T.frameElement!=null?T.parent:null;return{addEventListener:(E,C,A)=>{try{_==null||_.addEventListener(E,C,A)}catch{}return()=>{try{_==null||_.removeEventListener(E,C,A)}catch{}}},removeEventListener:(E,C,A)=>{try{_==null||_.removeEventListener(E,C,A)}catch{}}}}var POINTER_OUTSIDE_EVENT="pointerdown.outside",FOCUS_OUTSIDE_EVENT="focus.outside";function isComposedPathFocusable(T){for(const _ of T)if(isHTMLElement$1(_)&&isFocusable(_))return!0;return!1}var isPointerEvent=T=>"clientY"in T;function isEventPointWithin(T,_){if(!isPointerEvent(_)||!T)return!1;const E=T.getBoundingClientRect();return E.width===0||E.height===0?!1:E.top<=_.clientY&&_.clientY<=E.top+E.height&&E.left<=_.clientX&&_.clientX<=E.left+E.width}function isPointInRect(T,_){return T.y<=_.y&&_.y<=T.y+T.height&&T.x<=_.x&&_.x<=T.x+T.width}function isEventWithinScrollbar(T,_){if(!_||!isPointerEvent(T))return!1;const E=_.scrollHeight>_.clientHeight,C=E&&T.clientX>_.offsetLeft+_.clientWidth,A=_.scrollWidth>_.clientWidth,R=A&&T.clientY>_.offsetTop+_.clientHeight,I={x:_.offsetLeft,y:_.offsetTop,width:_.clientWidth+(E?16:0),height:_.clientHeight+(A?16:0)},F={x:T.clientX,y:T.clientY};return isPointInRect(I,F)?C||R:!1}function trackInteractOutsideImpl(T,_){const{exclude:E,onFocusOutside:C,onPointerDownOutside:A,onInteractOutside:R,defer:I}=_;if(!T)return;const F=getDocument(T),B=getWindow$1(T),U=getWindowFrames(B),V=getParentWindow(B);function D(K,Q){if(!isHTMLElement$1(Q)||!Q.isConnected||contains(T,Q)||isEventPointWithin(T,K))return!1;const ee=F.querySelector(`[aria-controls="${T.id}"]`);if(ee){const ie=getNearestOverflowAncestor$1(ee);if(isEventWithinScrollbar(K,ie))return!1}const J=getNearestOverflowAncestor$1(T);return isEventWithinScrollbar(K,J)?!1:!(E!=null&&E(Q))}const O=new Set,L=isShadowRoot$1(T==null?void 0:T.getRootNode());function z(K){function Q(ee){var se;const J=I&&!isTouchDevice()?raf$1:ne=>ne(),ie=ee??K,re=((se=ie==null?void 0:ie.composedPath)==null?void 0:se.call(ie))??[ie==null?void 0:ie.target];J(()=>{const ne=L?re[0]:getEventTarget(K);if(!(!T||!D(K,ne))){if(A||R){const oe=callAll(A,R);T.addEventListener(POINTER_OUTSIDE_EVENT,oe,{once:!0})}fireCustomEvent(T,POINTER_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:ie,contextmenu:isContextMenuEvent(ie),focusable:isComposedPathFocusable(re),target:ne}})}})}K.pointerType==="touch"?(O.forEach(ee=>ee()),O.add(addDomEvent(F,"click",Q,{once:!0})),O.add(V.addEventListener("click",Q,{once:!0})),O.add(U.addEventListener("click",Q,{once:!0}))):Q()}const W=new Set,X=setTimeout(()=>{W.add(addDomEvent(F,"pointerdown",z,!0)),W.add(V.addEventListener("pointerdown",z,!0)),W.add(U.addEventListener("pointerdown",z,!0))},0);function Y(K){(I?raf$1:ee=>ee())(()=>{const ee=getEventTarget(K);if(!(!T||!D(K,ee))){if(C||R){const J=callAll(C,R);T.addEventListener(FOCUS_OUTSIDE_EVENT,J,{once:!0})}fireCustomEvent(T,FOCUS_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:K,contextmenu:!1,focusable:isFocusable(ee),target:ee}})}})}return isTouchDevice()||(W.add(addDomEvent(F,"focusin",Y,!0)),W.add(V.addEventListener("focusin",Y,!0)),W.add(U.addEventListener("focusin",Y,!0))),()=>{clearTimeout(X),O.forEach(K=>K()),W.forEach(K=>K())}}function trackInteractOutside(T,_){const{defer:E}=_,C=E?raf$1:R=>R(),A=[];return A.push(C(()=>{const R=typeof T=="function"?T():T;A.push(trackInteractOutsideImpl(R,_))})),()=>{A.forEach(R=>R==null?void 0:R())}}function fireCustomEvent(T,_,E){const C=T.ownerDocument.defaultView||window,A=new C.CustomEvent(_,E);return T.dispatchEvent(A)}function trackEscapeKeydown(T,_){const E=C=>{C.key==="Escape"&&(C.isComposing||_==null||_(C))};return addDomEvent(getDocument(T),"keydown",E,{capture:!0})}var layerStack={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(T=>T.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(T){var C;const _=this.indexOf(T),E=this.topMostPointerBlockingLayer()?this.indexOf((C=this.topMostPointerBlockingLayer())==null?void 0:C.node):-1;return _<E},isTopMost(T){const _=this.layers[this.count()-1];return(_==null?void 0:_.node)===T},getNestedLayers(T){return Array.from(this.layers).slice(this.indexOf(T)+1)},isInNestedLayer(T,_){return this.getNestedLayers(T).some(E=>contains(E.node,_))},isInBranch(T){return Array.from(this.branches).some(_=>contains(_,T))},add(T){const _=this.layers.push(T);T.node.style.setProperty("--layer-index",`${_}`)},addBranch(T){this.branches.push(T)},remove(T){const _=this.indexOf(T);_<0||(_<this.count()-1&&this.getNestedLayers(T).forEach(C=>C.dismiss()),this.layers.splice(_,1),T.style.removeProperty("--layer-index"))},removeBranch(T){const _=this.branches.indexOf(T);_>=0&&this.branches.splice(_,1)},indexOf(T){return this.layers.findIndex(_=>_.node===T)},dismiss(T){var _;(_=this.layers[this.indexOf(T)])==null||_.dismiss()},clear(){this.remove(this.layers[0].node)}},originalBodyPointerEvents;function assignPointerEventToLayers(){layerStack.layers.forEach(({node:T})=>{T.style.pointerEvents=layerStack.isBelowPointerBlockingLayer(T)?"none":"auto"})}function clearPointerEvent(T){T.style.pointerEvents=""}function disablePointerEventsOutside(T,_){const E=getDocument(T),C=[];if(layerStack.hasPointerBlockingLayer()&&!E.body.hasAttribute("data-inert")&&(originalBodyPointerEvents=document.body.style.pointerEvents,queueMicrotask(()=>{E.body.style.pointerEvents="none",E.body.setAttribute("data-inert","")})),_){const A=waitForElements(_,R=>{C.push(setStyle(R,{pointerEvents:"auto"}))});C.push(A)}return()=>{layerStack.hasPointerBlockingLayer()||(queueMicrotask(()=>{E.body.style.pointerEvents=originalBodyPointerEvents,E.body.removeAttribute("data-inert"),E.body.style.length===0&&E.body.removeAttribute("style")}),C.forEach(A=>A()))}}function trackDismissableElementImpl(T,_){const{warnOnMissingNode:E=!0}=_;if(E&&!T){warn("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!T)return;const{onDismiss:C,pointerBlocking:A,exclude:R,debug:I}=_,F={dismiss:C,node:T,pointerBlocking:A};layerStack.add(F),assignPointerEventToLayers();function B(L){var W,X;const z=getEventTarget(L.detail.originalEvent);layerStack.isBelowPointerBlockingLayer(T)||layerStack.isInBranch(z)||((W=_.onPointerDownOutside)==null||W.call(_,L),(X=_.onInteractOutside)==null||X.call(_,L),!L.defaultPrevented&&(I&&console.log("onPointerDownOutside:",L.detail.originalEvent),C==null||C()))}function U(L){var W,X;const z=getEventTarget(L.detail.originalEvent);layerStack.isInBranch(z)||((W=_.onFocusOutside)==null||W.call(_,L),(X=_.onInteractOutside)==null||X.call(_,L),!L.defaultPrevented&&(I&&console.log("onFocusOutside:",L.detail.originalEvent),C==null||C()))}function V(L){var z;layerStack.isTopMost(T)&&((z=_.onEscapeKeyDown)==null||z.call(_,L),!L.defaultPrevented&&C&&(L.preventDefault(),C()))}function D(L){var Y;if(!T)return!1;const z=typeof R=="function"?R():R,W=Array.isArray(z)?z:[z],X=(Y=_.persistentElements)==null?void 0:Y.map(K=>K()).filter(isHTMLElement$1);return X&&W.push(...X),W.some(K=>contains(K,L))||layerStack.isInNestedLayer(T,L)}const O=[A?disablePointerEventsOutside(T,_.persistentElements):void 0,trackEscapeKeydown(T,V),trackInteractOutside(T,{exclude:D,onFocusOutside:U,onPointerDownOutside:B,defer:_.defer})];return()=>{layerStack.remove(T),assignPointerEventToLayers(),clearPointerEvent(T),O.forEach(L=>L==null?void 0:L())}}function trackDismissableElement(T,_){const{defer:E}=_,C=E?raf$1:R=>R(),A=[];return A.push(C(()=>{const R=isFunction$1(T)?T():T;A.push(trackDismissableElementImpl(R,_))})),()=>{A.forEach(R=>R==null?void 0:R())}}function trackDismissableBranch(T,_={}){const{defer:E}=_,C=E?raf$1:R=>R(),A=[];return A.push(C(()=>{const R=isFunction$1(T)?T():T;if(!R){warn("[@zag-js/dismissable] branch node is `null` or `undefined`");return}layerStack.addBranch(R),A.push(()=>{layerStack.removeBranch(R)})})),()=>{A.forEach(R=>R==null?void 0:R())}}var anatomy$m=createAnatomy("color-picker",["root","label","control","trigger","positioner","content","area","areaThumb","valueText","areaBackground","channelSlider","channelSliderLabel","channelSliderTrack","channelSliderThumb","channelSliderValueText","channelInput","transparencyGrid","swatchGroup","swatchTrigger","swatchIndicator","swatch","eyeDropperTrigger","formatTrigger","formatSelect"]);anatomy$m.build();var getHiddenInputId$1=T=>{var _;return((_=T.ids)==null?void 0:_.hiddenInput)??`color-picker:${T.id}:hidden-input`},getControlId$2=T=>{var _;return((_=T.ids)==null?void 0:_.control)??`color-picker:${T.id}:control`},getTriggerId$6=T=>{var _;return((_=T.ids)==null?void 0:_.trigger)??`color-picker:${T.id}:trigger`},getContentId$6=T=>{var _;return((_=T.ids)==null?void 0:_.content)??`color-picker:${T.id}:content`},getPositionerId$5=T=>{var _;return((_=T.ids)==null?void 0:_.positioner)??`color-picker:${T.id}:positioner`},getFormatSelectId=T=>{var _;return((_=T.ids)==null?void 0:_.formatSelect)??`color-picker:${T.id}:format-select`},getAreaId=T=>{var _;return((_=T.ids)==null?void 0:_.area)??`color-picker:${T.id}:area`},getAreaThumbId=T=>{var _;return((_=T.ids)==null?void 0:_.areaThumb)??`color-picker:${T.id}:area-thumb`},getChannelSliderTrackId=(T,_)=>{var E,C;return((C=(E=T.ids)==null?void 0:E.channelSliderTrack)==null?void 0:C.call(E,_))??`color-picker:${T.id}:slider-track:${_}`},getChannelSliderThumbId=(T,_)=>{var E,C;return((C=(E=T.ids)==null?void 0:E.channelSliderThumb)==null?void 0:C.call(E,_))??`color-picker:${T.id}:slider-thumb:${_}`},getContentEl$5=T=>T.getById(getContentId$6(T)),getAreaThumbEl=T=>T.getById(getAreaThumbId(T)),getChannelSliderThumbEl=(T,_)=>T.getById(getChannelSliderThumbId(T,_)),getFormatSelectEl=T=>T.getById(getFormatSelectId(T)),getHiddenInputEl$1=T=>T.getById(getHiddenInputId$1(T)),getAreaEl=T=>T.getById(getAreaId(T)),getAreaValueFromPoint=(T,_)=>{const E=getAreaEl(T);if(!E)return;const{percent:C}=getRelativePoint(_,E);return C},getControlEl=T=>T.getById(getControlId$2(T)),getTriggerEl$6=T=>T.getById(getTriggerId$6(T)),getPositionerEl$5=T=>T.getById(getPositionerId$5(T)),getChannelSliderTrackEl=(T,_)=>T.getById(getChannelSliderTrackId(T,_)),getChannelSliderValueFromPoint=(T,_,E)=>{const C=getChannelSliderTrackEl(T,E);if(!C)return;const{percent:A}=getRelativePoint(_,C);return A},getChannelInputEls=T=>[...queryAll(getContentEl$5(T),"input[data-channel]"),...queryAll(getControlEl(T),"input[data-channel]")];function getChannelValue(T,_){if(_==null)return"";if(_==="hex")return T.toString("hex");if(_==="css")return T.toString("css");if(_ in T)return T.getChannelValue(_).toString();const E=T.getFormat()==="hsla";switch(_){case"hue":return E?T.toFormat("hsla").getChannelValue("hue").toString():T.toFormat("hsba").getChannelValue("hue").toString();case"saturation":return E?T.toFormat("hsla").getChannelValue("saturation").toString():T.toFormat("hsba").getChannelValue("saturation").toString();case"lightness":return T.toFormat("hsla").getChannelValue("lightness").toString();case"brightness":return T.toFormat("hsba").getChannelValue("brightness").toString();case"red":case"green":case"blue":return T.toFormat("rgba").getChannelValue(_).toString();default:return T.getChannelValue(_).toString()}}var parse$2=T=>parseColor(T),{and:and$6}=createGuards();and$6("isOpenControlled","closeOnSelect");function syncChannelInputs(T,_,E){const C=getChannelInputEls(T);raf$1(()=>{C.forEach(A=>{const R=A.dataset.channel;setElementValue(A,getChannelValue(E||_,R))})})}function syncFormatSelect(T,_){const E=getFormatSelectEl(T);E&&raf$1(()=>setElementValue(E,_))}createProps$1()(["closeOnSelect","dir","disabled","format","defaultFormat","getRootNode","id","ids","initialFocusEl","name","positioning","onFocusOutside","onFormatChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","onValueChangeEnd","defaultOpen","open","positioning","required","readOnly","value","defaultValue","invalid","openAutoFocus"]);createProps$1()(["xChannel","yChannel"]);createProps$1()(["channel","orientation"]);createProps$1()(["value","disabled"]);createProps$1()(["value","respectAlpha"]);createProps$1()(["size"]);const[RenderStrategyPropsProvider,useRenderStrategyPropsContext]=createContext({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),splitRenderStrategyProps=T=>createSplitProps()(T,["lazyMount","unmountOnExit"]);var anatomy$l=createAnatomy("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator");anatomy$l.build();var getRootId$7=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`accordion:${T.id}`},getItemTriggerId=(T,_)=>{var E,C;return((C=(E=T.ids)==null?void 0:E.itemTrigger)==null?void 0:C.call(E,_))??`accordion:${T.id}:trigger:${_}`},getRootEl$3=T=>T.getById(getRootId$7(T)),getTriggerEls=T=>{const E=`[aria-controls][data-ownedby='${CSS.escape(getRootId$7(T))}']:not([disabled])`;return queryAll(getRootEl$3(T),E)},getFirstTriggerEl$1=T=>first(getTriggerEls(T)),getLastTriggerEl$1=T=>last(getTriggerEls(T)),getNextTriggerEl$1=(T,_)=>nextById(getTriggerEls(T),getItemTriggerId(T,_)),getPrevTriggerEl$1=(T,_)=>prevById(getTriggerEls(T),getItemTriggerId(T,_)),{and:and$5,not:not$8}=createGuards();and$5("isExpanded","canToggle"),not$8("isExpanded");createProps$1()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value","defaultValue"]);createProps$1()(["value","disabled"]);const[AvatarProvider,useAvatarContext]=createContext({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),AvatarFallback$2=reactExports.forwardRef((T,_)=>{const E=useAvatarContext(),C=mergeProps(E.getFallbackProps(),T);return jsxRuntimeExports.jsx(ark.span,{...C,ref:_})});AvatarFallback$2.displayName="AvatarFallback";const AvatarImage$1=reactExports.forwardRef((T,_)=>{const E=useAvatarContext(),C=mergeProps(E.getImageProps(),T);return jsxRuntimeExports.jsx(ark.img,{...C,ref:_})});AvatarImage$1.displayName="AvatarImage";var anatomy$k=createAnatomy("avatar").parts("root","image","fallback"),parts$9=anatomy$k.build(),getRootId$6=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`avatar:${T.id}`},getImageId=T=>{var _;return((_=T.ids)==null?void 0:_.image)??`avatar:${T.id}:image`},getFallbackId=T=>{var _;return((_=T.ids)==null?void 0:_.fallback)??`avatar:${T.id}:fallback`},getRootEl$2=T=>T.getById(getRootId$6(T)),getImageEl=T=>T.getById(getImageId(T));function connect$8(T,_){const{state:E,send:C,prop:A,scope:R}=T,I=E.matches("loaded");return{loaded:I,setSrc(F){const B=getImageEl(R);B==null||B.setAttribute("src",F)},setLoaded(){C({type:"img.loaded",src:"api"})},setError(){C({type:"img.error",src:"api"})},getRootProps(){return _.element({...parts$9.root.attrs,dir:A("dir"),id:getRootId$6(R)})},getImageProps(){return _.img({...parts$9.image.attrs,hidden:!I,dir:A("dir"),id:getImageId(R),"data-state":I?"visible":"hidden",onLoad(){C({type:"img.loaded",src:"element"})},onError(){C({type:"img.error",src:"element"})}})},getFallbackProps(){return _.element({...parts$9.fallback.attrs,dir:A("dir"),id:getFallbackId(R),hidden:I,"data-state":I?"hidden":"visible"})}}}var machine$8={initialState(){return"loading"},effects:["trackImageRemoval","trackSrcChange"],on:{"src.change":{target:"loading"},"img.unmount":{target:"error"}},states:{loading:{entry:["checkImageStatus"],on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]},"img.error":{target:"error",actions:["invokeOnError"]}}},error:{on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{on:{"img.error":{target:"error",actions:["invokeOnError"]}}}},implementations:{actions:{invokeOnLoad({prop:T}){var _;(_=T("onStatusChange"))==null||_({status:"loaded"})},invokeOnError({prop:T}){var _;(_=T("onStatusChange"))==null||_({status:"error"})},checkImageStatus({send:T,scope:_}){const E=getImageEl(_);if(!(E!=null&&E.complete))return;const C=hasLoaded(E)?"img.loaded":"img.error";T({type:C,src:"ssr"})}},effects:{trackImageRemoval({send:T,scope:_}){const E=getRootEl$2(_);return observeChildren(E,{callback(C){Array.from(C[0].removedNodes).find(I=>I.nodeType===Node.ELEMENT_NODE&&I.matches("[data-scope=avatar][data-part=image]"))&&T({type:"img.unmount"})}})},trackSrcChange({send:T,scope:_}){const E=getImageEl(_);return observeAttributes(E,{attributes:["src","srcset"],callback(){T({type:"src.change"})}})}}}};function hasLoaded(T){return T.complete&&T.naturalWidth!==0&&T.naturalHeight!==0}createProps$1()(["dir","id","ids","onStatusChange","getRootNode"]);const useAvatar=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),{dir:C}=useLocaleContext(),A={id:_,dir:C,getRootNode:E,...T},R=useMachine(machine$8,A);return connect$8(R,normalizeProps)},AvatarRoot$1=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["id","ids","onStatusChange"]),A=useAvatar(E),R=mergeProps(A.getRootProps(),C);return jsxRuntimeExports.jsx(AvatarProvider,{value:A,children:jsxRuntimeExports.jsx(ark.div,{...R,ref:_})})});AvatarRoot$1.displayName="AvatarRoot";const AvatarRootProvider=reactExports.forwardRef((T,_)=>{const[{value:E},C]=createSplitProps()(T,["value"]),A=mergeProps(E.getRootProps(),C);return jsxRuntimeExports.jsx(AvatarProvider,{value:E,children:jsxRuntimeExports.jsx(ark.div,{...A,ref:_})})});AvatarRootProvider.displayName="AvatarRootProvider";function isValidKey(T){return!(T.metaKey||!isMac()&&T.altKey||T.ctrlKey||T.key==="Control"||T.key==="Shift"||T.key==="Meta")}var nonTextInputTypes=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function isKeyboardFocusEvent(T,_,E){const C=E?getEventTarget(E):null,A=getWindow$1(C);return T=T||C instanceof A.HTMLInputElement&&!nonTextInputTypes.has(C==null?void 0:C.type)||C instanceof A.HTMLTextAreaElement||C instanceof A.HTMLElement&&C.isContentEditable,!(T&&_==="keyboard"&&E instanceof A.KeyboardEvent&&!Reflect.has(FOCUS_VISIBLE_INPUT_KEYS,E.key))}var currentModality=null,changeHandlers=new Set,listenerMap=new Map,hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1,FOCUS_VISIBLE_INPUT_KEYS={Tab:!0,Escape:!0};function triggerChangeHandlers(T,_){for(let E of changeHandlers)E(T,_)}function handleKeyboardEvent(T){hasEventBeforeFocus=!0,isValidKey(T)&&(currentModality="keyboard",triggerChangeHandlers("keyboard",T))}function handlePointerEvent(T){currentModality="pointer",(T.type==="mousedown"||T.type==="pointerdown")&&(hasEventBeforeFocus=!0,triggerChangeHandlers("pointer",T))}function handleClickEvent(T){isVirtualClick(T)&&(hasEventBeforeFocus=!0,currentModality="virtual")}function handleFocusEvent(T){const _=getEventTarget(T);_===getWindow$1(_)||_===getDocument(_)||(!hasEventBeforeFocus&&!hasBlurredWindowRecently&&(currentModality="virtual",triggerChangeHandlers("virtual",T)),hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1)}function handleWindowBlur(){hasEventBeforeFocus=!1,hasBlurredWindowRecently=!0}function setupGlobalFocusEvents(T){if(typeof window>"u"||listenerMap.get(getWindow$1(T)))return;const _=getWindow$1(T),E=getDocument(T);let C=_.HTMLElement.prototype.focus;_.HTMLElement.prototype.focus=function(){currentModality="virtual",triggerChangeHandlers("virtual",null),hasEventBeforeFocus=!0,C.apply(this,arguments)},E.addEventListener("keydown",handleKeyboardEvent,!0),E.addEventListener("keyup",handleKeyboardEvent,!0),E.addEventListener("click",handleClickEvent,!0),_.addEventListener("focus",handleFocusEvent,!0),_.addEventListener("blur",handleWindowBlur,!1),typeof _.PointerEvent<"u"?(E.addEventListener("pointerdown",handlePointerEvent,!0),E.addEventListener("pointermove",handlePointerEvent,!0),E.addEventListener("pointerup",handlePointerEvent,!0)):(E.addEventListener("mousedown",handlePointerEvent,!0),E.addEventListener("mousemove",handlePointerEvent,!0),E.addEventListener("mouseup",handlePointerEvent,!0)),_.addEventListener("beforeunload",()=>{tearDownWindowFocusTracking(T)},{once:!0}),listenerMap.set(_,{focus:C})}var tearDownWindowFocusTracking=(T,_)=>{const E=getWindow$1(T),C=getDocument(T);listenerMap.has(E)&&(E.HTMLElement.prototype.focus=listenerMap.get(E).focus,C.removeEventListener("keydown",handleKeyboardEvent,!0),C.removeEventListener("keyup",handleKeyboardEvent,!0),C.removeEventListener("click",handleClickEvent,!0),E.removeEventListener("focus",handleFocusEvent,!0),E.removeEventListener("blur",handleWindowBlur,!1),typeof E.PointerEvent<"u"?(C.removeEventListener("pointerdown",handlePointerEvent,!0),C.removeEventListener("pointermove",handlePointerEvent,!0),C.removeEventListener("pointerup",handlePointerEvent,!0)):(C.removeEventListener("mousedown",handlePointerEvent,!0),C.removeEventListener("mousemove",handlePointerEvent,!0),C.removeEventListener("mouseup",handlePointerEvent,!0)),listenerMap.delete(E))};function isFocusVisible(){return currentModality==="keyboard"}function trackFocusVisible(T={}){const{isTextInput:_,autoFocus:E,onChange:C,root:A}=T;setupGlobalFocusEvents(A),C==null||C({isFocusVisible:E||isFocusVisible(),modality:currentModality});const R=(I,F)=>{isKeyboardFocusEvent(!!_,I,F)&&(C==null||C({isFocusVisible:isFocusVisible(),modality:I}))};return changeHandlers.add(R),()=>{changeHandlers.delete(R)}}var anatomy$j=createAnatomy("checkbox").parts("root","label","control","indicator");anatomy$j.build();createProps$1()(["defaultChecked","checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);const checkboxAnatomy=anatomy$j.extendWith("group"),[FieldProvider,useFieldContext]=createContext({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1}),[ClipboardProvider,useClipboardContext]=createContext({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),ClipboardControl=reactExports.forwardRef((T,_)=>{const E=useClipboardContext(),C=mergeProps(E.getControlProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});ClipboardControl.displayName="ClipboardControl";const ClipboardIndicator$1=reactExports.forwardRef((T,_)=>{const{children:E,copied:C,...A}=T,R=useClipboardContext(),I=mergeProps(R.getIndicatorProps({copied:R.copied}),A);return jsxRuntimeExports.jsx(ark.div,{...I,ref:_,children:R.copied?C:E})});ClipboardIndicator$1.displayName="ClipboardIndicator";const ClipboardInput$1=reactExports.forwardRef((T,_)=>{const E=useClipboardContext(),C=mergeProps(E.getInputProps(),T);return jsxRuntimeExports.jsx(ark.input,{...C,ref:_})});ClipboardInput$1.displayName="ClipboardInput";const ClipboardLabel$1=reactExports.forwardRef((T,_)=>{const E=useClipboardContext(),C=mergeProps(E.getLabelProps(),T);return jsxRuntimeExports.jsx(ark.label,{...C,ref:_})});ClipboardLabel$1.displayName="ClipboardLabel";var anatomy$i=createAnatomy("clipboard").parts("root","control","trigger","indicator","input","label"),parts$8=anatomy$i.build(),getRootId$5=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`clip:${T.id}`},getInputId$1=T=>{var _;return((_=T.ids)==null?void 0:_.input)??`clip:${T.id}:input`},getLabelId$3=T=>{var _;return((_=T.ids)==null?void 0:_.label)??`clip:${T.id}:label`},getInputEl$1=T=>T.getById(getInputId$1(T)),writeToClipboard=(T,_)=>copyText(T.getDoc(),_);function createNode(T,_){const E=T.createElement("pre");return Object.assign(E.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),E.textContent=_,E}function copyNode(T){const E=getWindow$1(T).getSelection();if(E==null)return Promise.reject(new Error);E.removeAllRanges();const C=T.ownerDocument,A=C.createRange();return A.selectNodeContents(T),E.addRange(A),C.execCommand("copy"),E.removeAllRanges(),Promise.resolve()}function copyText(T,_){var A;const E=T.defaultView||window;if(((A=E.navigator.clipboard)==null?void 0:A.writeText)!==void 0)return E.navigator.clipboard.writeText(_);if(!T.body)return Promise.reject(new Error);const C=createNode(T,_);return T.body.appendChild(C),copyNode(C),T.body.removeChild(C),Promise.resolve()}function connect$7(T,_){const{state:E,send:C,context:A,scope:R}=T,I=E.matches("copied");return{copied:I,value:A.get("value"),setValue(F){C({type:"VALUE.SET",value:F})},copy(){C({type:"COPY"})},getRootProps(){return _.element({...parts$8.root.attrs,"data-copied":dataAttr$1(I),id:getRootId$5(R)})},getLabelProps(){return _.label({...parts$8.label.attrs,htmlFor:getInputId$1(R),"data-copied":dataAttr$1(I),id:getLabelId$3(R)})},getControlProps(){return _.element({...parts$8.control.attrs,"data-copied":dataAttr$1(I)})},getInputProps(){return _.input({...parts$8.input.attrs,defaultValue:A.get("value"),"data-copied":dataAttr$1(I),readOnly:!0,"data-readonly":"true",id:getInputId$1(R),onFocus(F){F.currentTarget.select()},onCopy(){C({type:"INPUT.COPY"})}})},getTriggerProps(){return _.button({...parts$8.trigger.attrs,type:"button","aria-label":I?"Copied to clipboard":"Copy to clipboard","data-copied":dataAttr$1(I),onClick(){C({type:"COPY"})}})},getIndicatorProps(F){return _.element({...parts$8.indicator.attrs,hidden:F.copied!==I})}}}var machine$7={props({props:T}){return{timeout:3e3,defaultValue:"",...T}},initialState(){return"idle"},context({prop:T,bindable:_}){return{value:_(()=>({defaultValue:T("defaultValue"),value:T("value"),onChange(E){var C;(C=T("onValueChange"))==null||C({value:E})}}))}},watch({track:T,context:_,action:E}){T([()=>_.get("value")],()=>{E(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:T,send:_}){return setRafTimeout(()=>{_({type:"COPY.DONE"})},T("timeout"))}},actions:{setValue({context:T,event:_}){T.set("value",_.value)},copyToClipboard({context:T,scope:_}){writeToClipboard(_,T.get("value"))},invokeOnCopy({prop:T}){var _;(_=T("onStatusChange"))==null||_({copied:!0})},syncInputElement({context:T,scope:_}){const E=getInputEl$1(_);E&&setElementValue(E,T.get("value"))}}}};createProps$1()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);createProps$1()(["copied"]);const useClipboard=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),C={id:_,getRootNode:E,...T},A=useMachine(machine$7,C);return connect$7(A,normalizeProps)},ClipboardRoot$2=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["defaultValue","id","ids","onStatusChange","onValueChange","timeout","value"]),A=useClipboard(E),R=mergeProps(A.getRootProps(),C);return jsxRuntimeExports.jsx(ClipboardProvider,{value:A,children:jsxRuntimeExports.jsx(ark.div,{ref:_,...R})})});ClipboardRoot$2.displayName="ClipboardRoot";const ClipboardRootProvider=reactExports.forwardRef((T,_)=>{const[{value:E},C]=createSplitProps()(T,["value"]),A=mergeProps(E.getRootProps(),C);return jsxRuntimeExports.jsx(ClipboardProvider,{value:E,children:jsxRuntimeExports.jsx(ark.div,{ref:_,...A})})});ClipboardRootProvider.displayName="ClipboardRootProvider";const ClipboardTrigger$1=reactExports.forwardRef((T,_)=>{const E=useClipboardContext(),C=mergeProps(E.getTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});ClipboardTrigger$1.displayName="ClipboardTrigger";const ClipboardValueText=reactExports.forwardRef((T,_)=>{const E=useClipboardContext();return jsxRuntimeExports.jsx(ark.span,{...T,ref:_,children:T.children||E.value})});ClipboardValueText.displayName="ClipboardValueText";const colorPickerAnatomy$1=anatomy$m.extendWith("view");var __defProp$2=Object.defineProperty,__defNormalProp$2=(T,_,E)=>_ in T?__defProp$2(T,_,{enumerable:!0,configurable:!0,writable:!0,value:E}):T[_]=E,__publicField$2=(T,_,E)=>__defNormalProp$2(T,typeof _!="symbol"?_+"":_,E),fallback$1={itemToValue(T){return typeof T=="string"?T:isObject$1(T)&&hasProp(T,"value")?T.value:""},itemToString(T){return typeof T=="string"?T:isObject$1(T)&&hasProp(T,"label")?T.label:fallback$1.itemToValue(T)},isItemDisabled(T){return isObject$1(T)&&hasProp(T,"disabled")?!!T.disabled:!1}},ListCollection=class uh{constructor(_){this.options=_,__publicField$2(this,"items"),__publicField$2(this,"copy",E=>new uh({...this.options,items:E??[...this.items]})),__publicField$2(this,"isEqual",E=>isEqual(this.items,E.items)),__publicField$2(this,"setItems",E=>this.copy(E)),__publicField$2(this,"getValues",(E=this.items)=>Array.from(E).map(C=>this.getItemValue(C)).filter(Boolean)),__publicField$2(this,"find",E=>{if(E==null)return null;const C=this.items.findIndex(A=>this.getItemValue(A)===E);return C!=null?this.items[C]:null}),__publicField$2(this,"findMany",E=>Array.from(E).map(C=>this.find(C)).filter(C=>C!=null)),__publicField$2(this,"at",E=>this.items[E]??null),__publicField$2(this,"sortFn",(E,C)=>{const A=this.indexOf(E),R=this.indexOf(C);return(A??0)-(R??0)}),__publicField$2(this,"sort",E=>[...E].sort(this.sortFn.bind(this))),__publicField$2(this,"getItemValue",E=>{var C,A;return E==null?null:((A=(C=this.options).itemToValue)==null?void 0:A.call(C,E))??fallback$1.itemToValue(E)}),__publicField$2(this,"getItemDisabled",E=>{var C,A;return E==null?!1:((A=(C=this.options).isItemDisabled)==null?void 0:A.call(C,E))??fallback$1.isItemDisabled(E)}),__publicField$2(this,"stringifyItem",E=>{var C,A;return E==null?null:((A=(C=this.options).itemToString)==null?void 0:A.call(C,E))??fallback$1.itemToString(E)}),__publicField$2(this,"stringify",E=>E==null?null:this.stringifyItem(this.find(E))),__publicField$2(this,"stringifyItems",(E,C=", ")=>Array.from(E).map(A=>this.stringifyItem(A)).filter(Boolean).join(C)),__publicField$2(this,"stringifyMany",(E,C)=>this.stringifyItems(this.findMany(E),C)),__publicField$2(this,"has",E=>this.indexOf(E)!==-1),__publicField$2(this,"hasItem",E=>E==null?!1:this.has(this.getItemValue(E))),__publicField$2(this,"getNextValue",(E,C=1,A=!1)=>{let R=this.indexOf(E);if(R===-1)return null;for(R=A?Math.min(R+C,this.size-1):R+C;R<=this.size&&this.getItemDisabled(this.at(R));)R++;return this.getItemValue(this.at(R))}),__publicField$2(this,"getPreviousValue",(E,C=1,A=!1)=>{let R=this.indexOf(E);if(R===-1)return null;for(R=A?Math.max(R-C,0):R-C;R>=0&&this.getItemDisabled(this.at(R));)R--;return this.getItemValue(this.at(R))}),__publicField$2(this,"indexOf",E=>E==null?-1:this.items.findIndex(C=>this.getItemValue(C)===E)),__publicField$2(this,"getByText",(E,C)=>{let A=C!=null?wrap$2(this.items,this.indexOf(C)):this.items;return E.length===1&&(A=A.filter(I=>this.getItemValue(I)!==C)),A.find(I=>match$1(this.stringifyItem(I),E))}),__publicField$2(this,"search",(E,C)=>{const{state:A,currentValue:R,timeout:I=350}=C,F=A.keysSoFar+E,U=F.length>1&&Array.from(F).every(z=>z===F[0])?F[0]:F,V=this.getByText(U,R),D=this.getItemValue(V);function O(){clearTimeout(A.timer),A.timer=-1}function L(z){A.keysSoFar=z,O(),z!==""&&(A.timer=+setTimeout(()=>{L(""),O()},I))}return L(F),D}),__publicField$2(this,"update",(E,C)=>{let A=this.items.findIndex(R=>this.getItemValue(R)===E);return A===-1?this:this.copy([...this.items.slice(0,A),C,...this.items.slice(A+1)])}),__publicField$2(this,"insert",(E,...C)=>this.copy(insert(this.items,E,...C))),__publicField$2(this,"insertBefore",(E,...C)=>{let A=this.indexOf(E);if(A===-1)if(this.items.length===0)A=0;else return this;return this.copy(insert(this.items,A,...C))}),__publicField$2(this,"insertAfter",(E,...C)=>{let A=this.indexOf(E);if(A===-1)if(this.items.length===0)A=0;else return this;return this.copy(insert(this.items,A+1,...C))}),__publicField$2(this,"prepend",(...E)=>this.copy(insert(this.items,0,...E))),__publicField$2(this,"append",(...E)=>this.copy(insert(this.items,this.items.length,...E))),__publicField$2(this,"remove",(...E)=>{const C=E.map(A=>typeof A=="string"?A:this.getItemValue(A));return this.copy(this.items.filter(A=>{const R=this.getItemValue(A);return R==null?!1:!C.includes(R)}))}),__publicField$2(this,"move",(E,C)=>{const A=this.indexOf(E);return A===-1?this:this.copy(move(this.items,[A],C))}),__publicField$2(this,"reorder",(E,C)=>this.copy(move(this.items,[E],C))),__publicField$2(this,"compareValue",(E,C)=>{const A=this.indexOf(E),R=this.indexOf(C);return A<R?-1:A>R?1:0}),__publicField$2(this,"range",(E,C)=>{let A=[],R=E;for(;R!=null;){if(this.find(R)&&A.push(R),R===C)return A;R=this.getNextValue(R)}return[]}),__publicField$2(this,"getValueRange",(E,C)=>E&&C?this.compareValue(E,C)<=0?this.range(E,C):this.range(C,E):[]),__publicField$2(this,"toString",()=>{let E="";for(const C of this.items){const A=this.getItemValue(C),R=this.stringifyItem(C),I=this.getItemDisabled(C),F=[A,R,I].filter(Boolean).join(":");E+=F+","}return E}),__publicField$2(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[..._.items]}get size(){return this.items.length}get firstValue(){let _=0;for(;this.getItemDisabled(this.at(_));)_++;return this.getItemValue(this.at(_))}get lastValue(){let _=this.size-1;for(;this.getItemDisabled(this.at(_));)_--;return this.getItemValue(this.at(_))}*[Symbol.iterator](){yield*this.items}},match$1=(T,_)=>!!(T!=null&&T.toLowerCase().startsWith(_.toLowerCase())),wrap$2=(T,_)=>T.map((E,C)=>T[(Math.max(_,0)+C)%T.length]);function insert(T,_,...E){return[...T.slice(0,_),...E,...T.slice(_)]}function move(T,_,E){_=[..._].sort((A,R)=>A-R);const C=_.map(A=>T[A]);for(let A=_.length-1;A>=0;A--)T=[...T.slice(0,_[A]),...T.slice(_[A]+1)];return E=Math.max(0,E-_.filter(A=>A<E).length),[...T.slice(0,E),...C,...T.slice(E)]}const createListCollection=T=>new ListCollection(T);var counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=T=>T&&(T.host||unwrapHost(T.parentNode)),correctTargets=(T,_)=>_.map(E=>{if(T.contains(E))return E;const C=unwrapHost(E);return C&&T.contains(C)?C:(console.error("[zag-js > ariaHidden] target",E,"in not contained inside",T,". Doing nothing"),null)}).filter(E=>!!E),isIgnoredNode=T=>T.localName==="next-route-announcer"||T.localName==="script"||T.hasAttribute("aria-live")?!0:T.matches("[data-live-announcer]"),walkTreeOutside=(T,_)=>{const{parentNode:E,markerName:C,controlAttribute:A}=_,R=correctTargets(E,Array.isArray(T)?T:[T]);markerMap[C]||(markerMap[C]=new WeakMap);const I=markerMap[C],F=[],B=new Set,U=new Set(R),V=O=>{!O||B.has(O)||(B.add(O),V(O.parentNode))};R.forEach(V);const D=O=>{!O||U.has(O)||Array.prototype.forEach.call(O.children,L=>{if(B.has(L))D(L);else try{if(isIgnoredNode(L))return;const W=L.getAttribute(A)==="true",X=(counterMap.get(L)||0)+1,Y=(I.get(L)||0)+1;counterMap.set(L,X),I.set(L,Y),F.push(L),X===1&&W&&uncontrolledNodes.set(L,!0),Y===1&&L.setAttribute(C,""),W||L.setAttribute(A,"true")}catch(z){console.error("[zag-js > ariaHidden] cannot operate on ",L,z)}})};return D(E),B.clear(),lockCount++,()=>{F.forEach(O=>{const L=counterMap.get(O)-1,z=I.get(O)-1;counterMap.set(O,L),I.set(O,z),L||(uncontrolledNodes.has(O)||O.removeAttribute(A),uncontrolledNodes.delete(O)),z||O.removeAttribute(C)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},getParentNode=T=>(Array.isArray(T)?T[0]:T).ownerDocument.body,hideOthers=(T,_=getParentNode(T),E="data-aria-hidden")=>{if(_)return walkTreeOutside(T,{parentNode:_,markerName:E,controlAttribute:"aria-hidden"})},raf=T=>{const _=requestAnimationFrame(()=>T());return()=>cancelAnimationFrame(_)};function ariaHidden(T,_={}){const{defer:E=!0}=_,C=E?raf:R=>R(),A=[];return A.push(C(()=>{const I=(typeof T=="function"?T():T).filter(Boolean);I.length!==0&&A.push(hideOthers(I))})),()=>{A.forEach(R=>R==null?void 0:R())}}const[DialogProvider,useDialogContext]=createContext({name:"DialogContext",hookName:"useDialogContext",providerName:"<DialogProvider />"}),DialogBackdrop=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=useRenderStrategyPropsContext(),A=usePresence({...C,present:E.open}),R=mergeProps(E.getBackdropProps(),A.getPresenceProps(),T);return A.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...R,ref:composeRefs(A.ref,_)})});DialogBackdrop.displayName="DialogBackdrop";const DialogCloseTrigger=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=mergeProps(E.getCloseTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});DialogCloseTrigger.displayName="DialogCloseTrigger";const DialogContent=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=usePresenceContext(),A=mergeProps(E.getContentProps(),C.getPresenceProps(),T);return C.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...A,ref:composeRefs(C.ref,_)})});DialogContent.displayName="DialogContent";const DialogDescription=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=mergeProps(E.getDescriptionProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});DialogDescription.displayName="DialogDescription";const DialogPositioner=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=mergeProps(E.getPositionerProps(),T);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});DialogPositioner.displayName="DialogPositioner";var __defProp$1=Object.defineProperty,__defNormalProp$1=(T,_,E)=>_ in T?__defProp$1(T,_,{enumerable:!0,configurable:!0,writable:!0,value:E}):T[_]=E,__publicField$1=(T,_,E)=>__defNormalProp$1(T,typeof _!="symbol"?_+"":_,E),activeFocusTraps={activateTrap(T,_){if(T.length>0){const C=T[T.length-1];C!==_&&C.pause()}const E=T.indexOf(_);E===-1||T.splice(E,1),T.push(_)},deactivateTrap(T,_){const E=T.indexOf(_);E!==-1&&T.splice(E,1),T.length>0&&T[T.length-1].unpause()}},sharedTrapStack=[],FocusTrap=class{constructor(T,_){__publicField$1(this,"trapStack"),__publicField$1(this,"config"),__publicField$1(this,"doc"),__publicField$1(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),__publicField$1(this,"listenerCleanups",[]),__publicField$1(this,"handleFocus",C=>{const A=getEventTarget(C),R=this.findContainerIndex(A,C)>=0;if(R||isDocument(A))R&&(this.state.mostRecentlyFocusedNode=A);else{C.stopImmediatePropagation();let I,F=!0;if(this.state.mostRecentlyFocusedNode)if(getTabIndex(this.state.mostRecentlyFocusedNode)>0){const B=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:U}=this.state.containerGroups[B];if(U.length>0){const V=U.findIndex(D=>D===this.state.mostRecentlyFocusedNode);V>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?V+1<U.length&&(I=U[V+1],F=!1):V-1>=0&&(I=U[V-1],F=!1))}}else this.state.containerGroups.some(B=>B.tabbableNodes.some(U=>getTabIndex(U)>0))||(F=!1);else F=!1;F&&(I=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),I?this.tryFocus(I):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),__publicField$1(this,"handlePointerDown",C=>{const A=getEventTarget(C);if(!(this.findContainerIndex(A,C)>=0)){if(valueOrHandler(this.config.clickOutsideDeactivates,C)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}valueOrHandler(this.config.allowOutsideClick,C)||C.preventDefault()}}),__publicField$1(this,"handleClick",C=>{const A=getEventTarget(C);this.findContainerIndex(A,C)>=0||valueOrHandler(this.config.clickOutsideDeactivates,C)||valueOrHandler(this.config.allowOutsideClick,C)||(C.preventDefault(),C.stopImmediatePropagation())}),__publicField$1(this,"handleTabKey",C=>{if(this.config.isKeyForward(C)||this.config.isKeyBackward(C)){this.state.recentNavEvent=C;const A=this.config.isKeyBackward(C),R=this.findNextNavNode({event:C,isBackward:A});if(!R)return;isTabEvent(C)&&C.preventDefault(),this.tryFocus(R)}}),__publicField$1(this,"handleEscapeKey",C=>{isEscapeEvent(C)&&valueOrHandler(this.config.escapeDeactivates,C)!==!1&&(C.preventDefault(),this.deactivate())}),__publicField$1(this,"_mutationObserver"),__publicField$1(this,"setupMutationObserver",()=>{const C=this.doc.defaultView||window;this._mutationObserver=new C.MutationObserver(A=>{A.some(I=>Array.from(I.removedNodes).some(B=>B===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),__publicField$1(this,"updateObservedNodes",()=>{var C;(C=this._mutationObserver)==null||C.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(A=>{var R;(R=this._mutationObserver)==null||R.observe(A,{subtree:!0,childList:!0})})}),__publicField$1(this,"getInitialFocusNode",()=>{let C=this.getNodeForOption("initialFocus",{hasFallback:!0});if(C===!1)return!1;if(C===void 0||C&&!isFocusable(C))if(this.findContainerIndex(this.doc.activeElement)>=0)C=this.doc.activeElement;else{const A=this.state.tabbableGroups[0];C=A&&A.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else C===null&&(C=this.getNodeForOption("fallbackFocus"));if(!C)throw new Error("Your focus-trap needs to have at least one focusable element");return C.isConnected||(C=this.getNodeForOption("fallbackFocus")),C}),__publicField$1(this,"tryFocus",C=>{if(C!==!1&&C!==getActiveElement(this.doc)){if(!C||!C.focus){this.tryFocus(this.getInitialFocusNode());return}C.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=C,isSelectableInput(C)&&C.select()}}),__publicField$1(this,"deactivate",C=>{if(!this.state.active)return this;const A={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...C};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),activeFocusTraps.deactivateTrap(this.trapStack,this);const R=this.getOption(A,"onDeactivate"),I=this.getOption(A,"onPostDeactivate"),F=this.getOption(A,"checkCanReturnFocus"),B=this.getOption(A,"returnFocus","returnFocusOnDeactivate");R==null||R();const U=()=>{delay(()=>{if(B){const V=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(V)}I==null||I()})};if(B&&F){const V=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return F(V).then(U,U),this}return U(),this}),__publicField$1(this,"pause",C=>{if(this.state.paused||!this.state.active)return this;const A=this.getOption(C,"onPause"),R=this.getOption(C,"onPostPause");return this.state.paused=!0,A==null||A(),this.removeListeners(),this.updateObservedNodes(),R==null||R(),this}),__publicField$1(this,"unpause",C=>{if(!this.state.paused||!this.state.active)return this;const A=this.getOption(C,"onUnpause"),R=this.getOption(C,"onPostUnpause");return this.state.paused=!1,A==null||A(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),R==null||R(),this}),__publicField$1(this,"updateContainerElements",C=>(this.state.containers=Array.isArray(C)?C.filter(Boolean):[C].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),__publicField$1(this,"getReturnFocusNode",C=>{const A=this.getNodeForOption("setReturnFocus",{params:[C]});return A||(A===!1?!1:C)}),__publicField$1(this,"getOption",(C,A,R)=>C&&C[A]!==void 0?C[A]:this.config[R||A]),__publicField$1(this,"getNodeForOption",(C,{hasFallback:A=!1,params:R=[]}={})=>{let I=this.config[C];if(typeof I=="function"&&(I=I(...R)),I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error(`\`${C}\` was specified but was not a node, or did not return a node`)}let F=I;if(typeof I=="string"){try{F=this.doc.querySelector(I)}catch(B){throw new Error(`\`${C}\` appears to be an invalid selector; error="${B.message}"`)}if(!F&&!A)throw new Error(`\`${C}\` as selector refers to no known node`)}return F}),__publicField$1(this,"findNextNavNode",C=>{const{event:A,isBackward:R=!1}=C,I=C.target||getEventTarget(A);this.updateTabbableNodes();let F=null;if(this.state.tabbableGroups.length>0){const B=this.findContainerIndex(I,A),U=B>=0?this.state.containerGroups[B]:void 0;if(B<0)R?F=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:F=this.state.tabbableGroups[0].firstTabbableNode;else if(R){let V=this.state.tabbableGroups.findIndex(({firstTabbableNode:D})=>I===D);if(V<0&&((U==null?void 0:U.container)===I||isFocusable(I)&&!isTabbable(I)&&!(U!=null&&U.nextTabbableNode(I,!1)))&&(V=B),V>=0){const D=V===0?this.state.tabbableGroups.length-1:V-1,O=this.state.tabbableGroups[D];F=getTabIndex(I)>=0?O.lastTabbableNode:O.lastDomTabbableNode}else isTabEvent(A)||(F=U==null?void 0:U.nextTabbableNode(I,!1))}else{let V=this.state.tabbableGroups.findIndex(({lastTabbableNode:D})=>I===D);if(V<0&&((U==null?void 0:U.container)===I||isFocusable(I)&&!isTabbable(I)&&!(U!=null&&U.nextTabbableNode(I)))&&(V=B),V>=0){const D=V===this.state.tabbableGroups.length-1?0:V+1,O=this.state.tabbableGroups[D];F=getTabIndex(I)>=0?O.firstTabbableNode:O.firstDomTabbableNode}else isTabEvent(A)||(F=U==null?void 0:U.nextTabbableNode(I))}}else F=this.getNodeForOption("fallbackFocus");return F}),this.trapStack=_.trapStack||sharedTrapStack;const E={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(C){return isTabEvent(C)&&!C.shiftKey},isKeyBackward(C){return isTabEvent(C)&&C.shiftKey},..._};this.doc=E.document||getDocument(Array.isArray(T)?T[0]:T),this.config=E,this.updateContainerElements(T),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(T,_){const E=typeof(_==null?void 0:_.composedPath)=="function"?_.composedPath():void 0;return this.state.containerGroups.findIndex(({container:C,tabbableNodes:A})=>C.contains(T)||(E==null?void 0:E.includes(C))||A.find(R=>R===T))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(T=>{const _=getTabbables(T),E=getFocusables(T),C=_.length>0?_[0]:void 0,A=_.length>0?_[_.length-1]:void 0,R=E.find(U=>isTabbable(U)),I=E.slice().reverse().find(U=>isTabbable(U)),F=!!_.find(U=>getTabIndex(U)>0);function B(U,V=!0){const D=_.indexOf(U);return D<0?V?E.slice(E.indexOf(U)+1).find(O=>isTabbable(O)):E.slice(0,E.indexOf(U)).reverse().find(O=>isTabbable(O)):_[D+(V?1:-1)]}return{container:T,tabbableNodes:_,focusableNodes:E,posTabIndexesFound:F,firstTabbableNode:C,lastTabbableNode:A,firstDomTabbableNode:R,lastDomTabbableNode:I,nextTabbableNode:B}}),this.state.tabbableGroups=this.state.containerGroups.filter(T=>T.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(T=>T.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return activeFocusTraps.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?delay(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(addDomEvent(this.doc,"focusin",this.handleFocus,!0),addDomEvent(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),addDomEvent(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),addDomEvent(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),addDomEvent(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),addDomEvent(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(T=>T()),this.listenerCleanups=[],this}activate(T){if(this.state.active)return this;const _=this.getOption(T,"onActivate"),E=this.getOption(T,"onPostActivate"),C=this.getOption(T,"checkCanFocusTrap");C||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,_==null||_();const A=()=>{C&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),E==null||E()};return C?(C(this.state.containers.concat()).then(A,A),this):(A(),this)}},isTabEvent=T=>T.key==="Tab",valueOrHandler=(T,..._)=>typeof T=="function"?T(..._):T,isEscapeEvent=T=>!T.isComposing&&T.key==="Escape",delay=T=>setTimeout(T,0),isSelectableInput=T=>T.localName==="input"&&"select"in T&&typeof T.select=="function";function trapFocus(T,_={}){let E;const C=raf$1(()=>{const A=typeof T=="function"?T():T;if(A){E=new FocusTrap(A,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:A,..._,document:getDocument(A)});try{E.activate()}catch{}}});return function(){E==null||E.deactivate(),C()}}var LOCK_CLASSNAME="data-scroll-lock";function getPaddingProperty(T){const _=T.getBoundingClientRect().left;return Math.round(_)+T.scrollLeft?"paddingLeft":"paddingRight"}function preventBodyScroll(T){const _=T??document,E=_.defaultView??window,{documentElement:C,body:A}=_;if(A.hasAttribute(LOCK_CLASSNAME))return;A.setAttribute(LOCK_CLASSNAME,"");const I=E.innerWidth-C.clientWidth,F=()=>setStyleProperty(C,"--scrollbar-width",`${I}px`),B=getPaddingProperty(C),U=()=>setStyle(A,{overflow:"hidden",[B]:`${I}px`}),V=()=>{const{scrollX:O,scrollY:L,visualViewport:z}=E,W=(z==null?void 0:z.offsetLeft)??0,X=(z==null?void 0:z.offsetTop)??0,Y=setStyle(A,{position:"fixed",overflow:"hidden",top:`${-(L-Math.floor(X))}px`,left:`${-(O-Math.floor(W))}px`,right:"0",[B]:`${I}px`});return()=>{Y==null||Y(),E.scrollTo({left:O,top:L,behavior:"instant"})}},D=[F(),isIos()?V():U()];return()=>{D.forEach(O=>O==null?void 0:O()),A.removeAttribute(LOCK_CLASSNAME)}}var anatomy$h=createAnatomy("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),parts$7=anatomy$h.build(),getPositionerId$4=T=>{var _;return((_=T.ids)==null?void 0:_.positioner)??`dialog:${T.id}:positioner`},getBackdropId=T=>{var _;return((_=T.ids)==null?void 0:_.backdrop)??`dialog:${T.id}:backdrop`},getContentId$5=T=>{var _;return((_=T.ids)==null?void 0:_.content)??`dialog:${T.id}:content`},getTriggerId$5=T=>{var _;return((_=T.ids)==null?void 0:_.trigger)??`dialog:${T.id}:trigger`},getTitleId$1=T=>{var _;return((_=T.ids)==null?void 0:_.title)??`dialog:${T.id}:title`},getDescriptionId$1=T=>{var _;return((_=T.ids)==null?void 0:_.description)??`dialog:${T.id}:description`},getCloseTriggerId$1=T=>{var _;return((_=T.ids)==null?void 0:_.closeTrigger)??`dialog:${T.id}:close`},getContentEl$4=T=>T.getById(getContentId$5(T)),getPositionerEl$4=T=>T.getById(getPositionerId$4(T)),getBackdropEl=T=>T.getById(getBackdropId(T)),getTriggerEl$5=T=>T.getById(getTriggerId$5(T)),getTitleEl=T=>T.getById(getTitleId$1(T)),getDescriptionEl=T=>T.getById(getDescriptionId$1(T)),getCloseTriggerEl=T=>T.getById(getCloseTriggerId$1(T));function connect$6(T,_){const{state:E,send:C,context:A,prop:R,scope:I}=T,F=R("aria-label"),B=E.matches("open");return{open:B,setOpen(U){E.matches("open")!==U&&C({type:U?"OPEN":"CLOSE"})},getTriggerProps(){return _.button({...parts$7.trigger.attrs,dir:R("dir"),id:getTriggerId$5(I),"aria-haspopup":"dialog",type:"button","aria-expanded":B,"data-state":B?"open":"closed","aria-controls":getContentId$5(I),onClick(U){U.defaultPrevented||C({type:"TOGGLE"})}})},getBackdropProps(){return _.element({...parts$7.backdrop.attrs,dir:R("dir"),hidden:!B,id:getBackdropId(I),"data-state":B?"open":"closed"})},getPositionerProps(){return _.element({...parts$7.positioner.attrs,dir:R("dir"),id:getPositionerId$4(I),style:{pointerEvents:B?void 0:"none"}})},getContentProps(){const U=A.get("rendered");return _.element({...parts$7.content.attrs,dir:R("dir"),role:R("role"),hidden:!B,id:getContentId$5(I),tabIndex:-1,"data-state":B?"open":"closed","aria-modal":!0,"aria-label":F||void 0,"aria-labelledby":F||!U.title?void 0:getTitleId$1(I),"aria-describedby":U.description?getDescriptionId$1(I):void 0})},getTitleProps(){return _.element({...parts$7.title.attrs,dir:R("dir"),id:getTitleId$1(I)})},getDescriptionProps(){return _.element({...parts$7.description.attrs,dir:R("dir"),id:getDescriptionId$1(I)})},getCloseTriggerProps(){return _.button({...parts$7.closeTrigger.attrs,dir:R("dir"),id:getCloseTriggerId$1(I),type:"button",onClick(U){U.defaultPrevented||(U.stopPropagation(),C({type:"CLOSE"}))}})}}}var machine$6={props({props:T,scope:_}){const E=T.role==="alertdialog";return{role:"dialog",modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!E,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:E?()=>getCloseTriggerEl(_):void 0,...T}},initialState({prop:T}){return T("open")||T("defaultOpen")?"open":"closed"},context({bindable:T}){return{rendered:T(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:T,action:_,prop:E}){T([()=>E("open")],()=>{_(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:T})=>T("open")!=null},effects:{trackDismissableElement({scope:T,send:_,prop:E}){return trackDismissableElement(()=>getContentEl$4(T),{defer:!0,pointerBlocking:E("modal"),exclude:[getTriggerEl$5(T)],onInteractOutside(A){var R;(R=E("onInteractOutside"))==null||R(A),E("closeOnInteractOutside")||A.preventDefault()},persistentElements:E("persistentElements"),onFocusOutside:E("onFocusOutside"),onPointerDownOutside:E("onPointerDownOutside"),onEscapeKeyDown(A){var R;(R=E("onEscapeKeyDown"))==null||R(A),E("closeOnEscape")||A.preventDefault()},onDismiss(){_({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:T,prop:_}){if(_("preventScroll"))return preventBodyScroll(T.getDoc())},trapFocus({scope:T,prop:_}){return!_("trapFocus")||!_("modal")?void 0:trapFocus(()=>getContentEl$4(T),{preventScroll:!0,returnFocusOnDeactivate:!!_("restoreFocus"),initialFocus:_("initialFocusEl"),setReturnFocus:C=>{var A;return((A=_("finalFocusEl"))==null?void 0:A())??C}})},hideContentBelow({scope:T,prop:_}){return _("modal")?ariaHidden(()=>[getContentEl$4(T)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:T,scope:_}){raf$1(()=>{T.set("rendered",{title:!!getTitleEl(_),description:!!getDescriptionEl(_)})})},syncZIndex({scope:T}){raf$1(()=>{const _=getContentEl$4(T);if(!_)return;const E=getComputedStyle$2(_);[getPositionerEl$4(T),getBackdropEl(T)].forEach(A=>{A==null||A.style.setProperty("--z-index",E.zIndex)})})},invokeOnClose({prop:T}){var _;(_=T("onOpenChange"))==null||_({open:!1})},invokeOnOpen({prop:T}){var _;(_=T("onOpenChange"))==null||_({open:!0})},toggleVisibility({prop:T,send:_,event:E}){_({type:T("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:E})}}}};createProps$1()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const useDialog=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),{dir:C}=useLocaleContext(),A={id:_,getRootNode:E,dir:C,...T},R=useMachine(machine$6,A);return connect$6(R,normalizeProps)},DialogRoot=T=>{const[_,{children:E,...C}]=splitPresenceProps(T),[A]=splitRenderStrategyProps(_),R=useDialog(C),I=usePresence(mergeProps({present:R.open},_));return jsxRuntimeExports.jsx(DialogProvider,{value:R,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:A,children:jsxRuntimeExports.jsx(PresenceProvider,{value:I,children:E})})})},DialogRootProvider=T=>{const[_,{value:E,children:C}]=splitPresenceProps(T),[A]=splitRenderStrategyProps(_),R=usePresence(mergeProps({present:E.open},_));return jsxRuntimeExports.jsx(DialogProvider,{value:E,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:A,children:jsxRuntimeExports.jsx(PresenceProvider,{value:R,children:C})})})},DialogTitle=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=mergeProps(E.getTitleProps(),T);return jsxRuntimeExports.jsx(ark.h2,{...C,ref:_})});DialogTitle.displayName="DialogTitle";const DialogTrigger=reactExports.forwardRef((T,_)=>{const E=useDialogContext(),C=usePresenceContext(),A=mergeProps({...E.getTriggerProps(),"aria-controls":C.unmounted?void 0:E.getTriggerProps()["aria-controls"]},T);return jsxRuntimeExports.jsx(ark.button,{...A,ref:_})});DialogTrigger.displayName="DialogTrigger";var anatomy$g=createAnatomy("editable").parts("root","area","label","preview","input","editTrigger","submitTrigger","cancelTrigger","control");anatomy$g.build();createProps$1()(["activationMode","autoResize","dir","disabled","finalFocusEl","form","getRootNode","id","ids","invalid","maxLength","name","onEditChange","onFocusOutside","onInteractOutside","onPointerDownOutside","onValueChange","onValueCommit","onValueRevert","placeholder","readOnly","required","selectOnFocus","edit","defaultEdit","submitMode","translations","defaultValue","value"]);const FieldErrorText$1=reactExports.forwardRef((T,_)=>{const E=useFieldContext(),C=mergeProps(E.getErrorTextProps(),T);return E!=null&&E.invalid?jsxRuntimeExports.jsx(ark.span,{...C,ref:_}):null});FieldErrorText$1.displayName="FieldErrorText";const FieldHelperText$1=reactExports.forwardRef((T,_)=>{const E=useFieldContext(),C=mergeProps(E==null?void 0:E.getHelperTextProps(),T);return jsxRuntimeExports.jsx(ark.span,{...C,ref:_})});FieldHelperText$1.displayName="FieldHelperText";const FieldInput=reactExports.forwardRef((T,_)=>{const E=useFieldContext(),C=mergeProps(E==null?void 0:E.getInputProps(),T);return jsxRuntimeExports.jsx(ark.input,{...C,ref:_})});FieldInput.displayName="FieldInput";const FieldLabel$1=reactExports.forwardRef((T,_)=>{const E=useFieldContext(),C=mergeProps(E==null?void 0:E.getLabelProps(),T);return jsxRuntimeExports.jsx(ark.label,{...C,ref:_})});FieldLabel$1.displayName="FieldLabel";const useSafeLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,[FieldsetProvider,useFieldsetContext]=createContext({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),fieldAnatomy$1=createAnatomy("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator"),parts$6=fieldAnatomy$1.build(),useField=(T={})=>{const _=useFieldsetContext(),{ids:E,disabled:C=!!(_!=null&&_.disabled),invalid:A=!1,readOnly:R=!1,required:I=!1}=T,[F,B]=reactExports.useState(!1),[U,V]=reactExports.useState(!1),D=T.id??reactExports.useId(),O=reactExports.useRef(null),L=(E==null?void 0:E.control)??`field::${D}`,z=(E==null?void 0:E.errorText)??`field::${D}::error-text`,W=(E==null?void 0:E.helperText)??`field::${D}::helper-text`,X=(E==null?void 0:E.label)??`field::${D}::label`;useSafeLayoutEffect(()=>{const fe=O.current;if(!fe)return;const he=getWindow$1(fe),ge=he.document,ye=()=>{B(!!ge.getElementById(z)),V(!!ge.getElementById(W))};ye();const we=new he.MutationObserver(ye);return we.observe(fe,{childList:!0,subtree:!0}),()=>we.disconnect()},[z,W]);const Y=reactExports.useMemo(()=>{const fe=[];return F&&A&&fe.push(z),U&&fe.push(W),fe.join(" ")||void 0},[A,z,W,F,U]),K=reactExports.useMemo(()=>()=>({...parts$6.root.attrs,id:L,ref:O,role:"group","data-disabled":dataAttr$1(C),"data-invalid":dataAttr$1(A),"data-readonly":dataAttr$1(R)}),[C,A,R,L]),Q=reactExports.useMemo(()=>()=>({...parts$6.label.attrs,id:X,"data-disabled":dataAttr$1(C),"data-invalid":dataAttr$1(A),"data-readonly":dataAttr$1(R),htmlFor:D}),[C,A,R,D,X]),ee=reactExports.useMemo(()=>()=>({"aria-describedby":Y,"aria-invalid":ariaAttr(A),"data-invalid":dataAttr$1(A),"data-required":dataAttr$1(I),"data-readonly":dataAttr$1(R),id:D,required:I,disabled:C,readOnly:R}),[Y,A,I,R,D,C]),J=reactExports.useMemo(()=>()=>({...ee(),...parts$6.input.attrs}),[ee]),ie=reactExports.useMemo(()=>()=>({...ee(),...parts$6.textarea.attrs}),[ee]),re=reactExports.useMemo(()=>()=>({...ee(),...parts$6.select.attrs}),[ee]),se=reactExports.useMemo(()=>()=>({id:W,...parts$6.helperText.attrs,"data-disabled":dataAttr$1(C)}),[C,W]),ne=reactExports.useMemo(()=>()=>({id:z,...parts$6.errorText.attrs,"aria-live":"polite"}),[z]),oe=reactExports.useMemo(()=>()=>({"aria-hidden":!0,...parts$6.requiredIndicator.attrs}),[]);return{ariaDescribedby:Y,ids:{root:L,control:D,label:X,errorText:z,helperText:W},refs:{rootRef:O},disabled:C,invalid:A,readOnly:R,required:I,getLabelProps:Q,getRootProps:K,getInputProps:J,getTextareaProps:ie,getSelectProps:re,getHelperTextProps:se,getErrorTextProps:ne,getRequiredIndicatorProps:oe}},FieldRoot$1=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["id","ids","disabled","invalid","readOnly","required"]),A=useField(E),R=mergeProps(A.getRootProps(),C);return jsxRuntimeExports.jsx(FieldProvider,{value:A,children:jsxRuntimeExports.jsx(ark.div,{...R,ref:composeRefs(_,A.refs.rootRef)})})});FieldRoot$1.displayName="FieldRoot";var autoresizeTextarea=T=>{var U,V;if(!T)return;const _=getComputedStyle$2(T),E=getWindow$1(T),C=getDocument(T),A=()=>{requestAnimationFrame(()=>{T.style.height="auto";let D;_.boxSizing==="content-box"?D=T.scrollHeight-(parseFloat(_.paddingTop)+parseFloat(_.paddingBottom)):D=T.scrollHeight+parseFloat(_.borderTopWidth)+parseFloat(_.borderBottomWidth),_.maxHeight!=="none"&&D>parseFloat(_.maxHeight)?(_.overflowY==="hidden"&&(T.style.overflowY="scroll"),D=parseFloat(_.maxHeight)):_.overflowY!=="hidden"&&(T.style.overflowY="hidden"),T.style.height=`${D}px`})};T.addEventListener("input",A),(U=T.form)==null||U.addEventListener("reset",A);const R=Object.getPrototypeOf(T),I=Object.getOwnPropertyDescriptor(R,"value");Object.defineProperty(T,"value",{...I,set(){var D;(D=I==null?void 0:I.set)==null||D.apply(this,arguments),A()}});const F=new E.ResizeObserver(()=>{requestAnimationFrame(()=>A())});F.observe(T);const B=new E.MutationObserver(()=>A());return B.observe(T,{attributes:!0,attributeFilter:["rows","placeholder"]}),(V=C.fonts)==null||V.addEventListener("loadingdone",A),()=>{var D,O;T.removeEventListener("input",A),(D=T.form)==null||D.removeEventListener("reset",A),(O=C.fonts)==null||O.removeEventListener("loadingdone",A),F.disconnect(),B.disconnect()}};const FieldTextarea=reactExports.forwardRef((T,_)=>{const{autoresize:E,...C}=T,A=reactExports.useRef(null),R=useFieldContext(),I=mergeProps(R==null?void 0:R.getTextareaProps(),{style:{resize:E?"none":void 0}},C);return reactExports.useEffect(()=>{if(E)return autoresizeTextarea(A.current)},[E]),jsxRuntimeExports.jsx(ark.textarea,{...I,ref:composeRefs(_,A)})});FieldTextarea.displayName="FieldTextarea";const fieldsetAnatomy$1=createAnatomy("fieldset").parts("root","errorText","helperText","legend");fieldsetAnatomy$1.build();var anatomy$f=createAnatomy("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger");anatomy$f.build();createProps$1()(["accept","allowDrop","capture","dir","directory","disabled","getRootNode","id","ids","locale","maxFiles","maxFileSize","minFileSize","name","invalid","onFileAccept","onFileReject","onFileChange","preventDocumentDrop","required","translations","validate"]);createProps$1()(["file"]);var anatomy$e=createAnatomy("hoverCard").parts("arrow","arrowTip","trigger","positioner","content");anatomy$e.build();var getTriggerId$4=T=>{var _;return((_=T.ids)==null?void 0:_.trigger)??`hover-card:${T.id}:trigger`},getContentId$4=T=>{var _;return((_=T.ids)==null?void 0:_.content)??`hover-card:${T.id}:content`},getPositionerId$3=T=>{var _;return((_=T.ids)==null?void 0:_.positioner)??`hover-card:${T.id}:popper`},getTriggerEl$4=T=>T.getById(getTriggerId$4(T)),getContentEl$3=T=>T.getById(getContentId$4(T)),getPositionerEl$3=T=>T.getById(getPositionerId$3(T)),{not:not$7,and:and$4}=createGuards();and$4("isOpenControlled",not$7("isPointer")),not$7("isPointer"),and$4("isOpenControlled",not$7("isPointer")),not$7("isPointer");createProps$1()(["closeDelay","dir","getRootNode","id","ids","onOpenChange","defaultOpen","open","openDelay","positioning","onInteractOutside","onPointerDownOutside","onFocusOutside"]);var createPoint=(T,_)=>({x:T,y:_});function createRect(T){const{x:_,y:E,width:C,height:A}=T,R=_+C/2,I=E+A/2;return{x:_,y:E,width:C,height:A,minX:_,minY:E,maxX:_+C,maxY:E+A,midX:R,midY:I,center:createPoint(R,I)}}function getRectCorners(T){const _=createPoint(T.minX,T.minY),E=createPoint(T.maxX,T.minY),C=createPoint(T.maxX,T.maxY),A=createPoint(T.minX,T.maxY);return{top:_,right:E,bottom:C,left:A}}function getElementPolygon(T,_){const E=createRect(T),{top:C,right:A,left:R,bottom:I}=getRectCorners(E),[F]=_.split("-");return{top:[R,C,A,I],right:[C,A,I,R],bottom:[C,R,I,A],left:[A,C,R,I]}[F]}function isPointInPolygon(T,_){const{x:E,y:C}=_;let A=!1;for(let R=0,I=T.length-1;R<T.length;I=R++){const F=T[R].x,B=T[R].y,U=T[I].x,V=T[I].y;B>C!=V>C&&E<(U-F)*(C-B)/(V-B)+F&&(A=!A)}return A}var anatomy$d=createAnatomy("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem");anatomy$d.build();var getTriggerId$3=T=>{var _;return((_=T.ids)==null?void 0:_.trigger)??`menu:${T.id}:trigger`},getContextTriggerId=T=>{var _;return((_=T.ids)==null?void 0:_.contextTrigger)??`menu:${T.id}:ctx-trigger`},getContentId$3=T=>{var _;return((_=T.ids)==null?void 0:_.content)??`menu:${T.id}:content`},getPositionerId$2=T=>{var _;return((_=T.ids)==null?void 0:_.positioner)??`menu:${T.id}:popper`},getItemId$1=(T,_)=>`${T.id}/${_}`,getItemValue=T=>(T==null?void 0:T.dataset.value)??null,getContentEl$2=T=>T.getById(getContentId$3(T)),getPositionerEl$2=T=>T.getById(getPositionerId$2(T)),getTriggerEl$3=T=>T.getById(getTriggerId$3(T)),getItemEl$1=(T,_)=>_?T.getById(getItemId$1(T,_)):null,getContextTriggerEl=T=>T.getById(getContextTriggerId(T)),getElements$1=T=>{const E=`[role^="menuitem"][data-ownedby=${CSS.escape(getContentId$3(T))}]:not([data-disabled])`;return queryAll(getContentEl$2(T),E)},getFirstEl=T=>first(getElements$1(T)),getLastEl=T=>last(getElements$1(T)),isMatch=(T,_)=>_?T.id===_||T.dataset.value===_:!1,getNextEl=(T,_)=>{const E=getElements$1(T),C=E.findIndex(A=>isMatch(A,_.value));return next(E,C,{loop:_.loop??_.loopFocus})},getPrevEl=(T,_)=>{const E=getElements$1(T),C=E.findIndex(A=>isMatch(A,_.value));return prev(E,C,{loop:_.loop??_.loopFocus})},getElemByKey=(T,_)=>{const E=getElements$1(T),C=E.find(A=>isMatch(A,_.value));return getByTypeahead(E,{state:_.typeaheadState,key:_.key,activeId:(C==null?void 0:C.id)??null})},isTriggerItem=T=>{var _;return!!((_=T==null?void 0:T.getAttribute("role"))!=null&&_.startsWith("menuitem"))&&!!(T!=null&&T.hasAttribute("aria-controls"))},itemSelectEvent="menu:select";function dispatchSelectionEvent(T,_){if(!T)return;const E=getWindow$1(T),C=new E.CustomEvent(itemSelectEvent,{detail:{value:_}});T.dispatchEvent(C)}var{not:not$6,and:and$3,or:or$1}=createGuards();not$6("isSubmenu"),or$1("isOpenAutoFocusEvent","isArrowDownEvent"),and$3(not$6("isTriggerItem"),"isOpenControlled"),not$6("isTriggerItem"),and$3("isSubmenu","isOpenControlled"),not$6("isPointerSuspended"),and$3(not$6("isPointerSuspended"),not$6("isTriggerItem")),and$3(not$6("isTriggerItemHighlighted"),not$6("isHighlightedItemEditable"),"closeOnSelect","isOpenControlled"),and$3(not$6("isTriggerItemHighlighted"),not$6("isHighlightedItemEditable"),"closeOnSelect"),and$3(not$6("isTriggerItemHighlighted"),not$6("isHighlightedItemEditable"));function closeRootMenu(T){let _=T.parent;for(;_&&_.computed("isSubmenu");)_=_.refs.get("parent");_==null||_.send({type:"CLOSE"})}function isWithinPolygon(T,_){return T?isPointInPolygon(T,_):!1}function resolveItemId(T,_,E){const C=Object.keys(T).length>0;if(!_)return null;if(!C)return getItemId$1(E,_);for(const A in T){const R=T[A],I=getTriggerId$3(R.scope);if(I===_)return I}return getItemId$1(E,_)}createProps$1()(["anchorPoint","aria-label","closeOnSelect","composite","defaultHighlightedValue","defaultOpen","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","open","positioning","typeahead"]);createProps$1()(["closeOnSelect","disabled","value","valueText"]);createProps$1()(["htmlFor"]);createProps$1()(["id"]);createProps$1()(["checked","closeOnSelect","disabled","onCheckedChange","type","value","valueText"]);const[NumberInputProvider,useNumberInputContext]=createContext({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),NumberInputControl$1=reactExports.forwardRef((T,_)=>{const E=useNumberInputContext(),C=mergeProps(E.getControlProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});NumberInputControl$1.displayName="NumberInputControl";const NumberInputDecrementTrigger$1=reactExports.forwardRef((T,_)=>{const E=useNumberInputContext(),C=mergeProps(E.getDecrementTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});NumberInputDecrementTrigger$1.displayName="NumberInputDecrementTrigger";const NumberInputIncrementTrigger$1=reactExports.forwardRef((T,_)=>{const E=useNumberInputContext(),C=mergeProps(E.getIncrementTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});NumberInputIncrementTrigger$1.displayName="NumberInputIncrementTrigger";const NumberInputInput$1=reactExports.forwardRef((T,_)=>{const E=useNumberInputContext(),C=mergeProps(E.getInputProps(),T),A=useFieldContext();return jsxRuntimeExports.jsx(ark.input,{"aria-describedby":A==null?void 0:A.ariaDescribedby,...C,ref:_})});NumberInputInput$1.displayName="NumberInputInput";const NumberInputLabel=reactExports.forwardRef((T,_)=>{const E=useNumberInputContext(),C=mergeProps(E.getLabelProps(),T);return jsxRuntimeExports.jsx(ark.label,{...C,ref:_})});NumberInputLabel.displayName="NumberInputLabel";let $488c6ddbf4ef74c2$var$formatterCache=new Map,$488c6ddbf4ef74c2$var$supportsSignDisplay=!1;try{$488c6ddbf4ef74c2$var$supportsSignDisplay=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let $488c6ddbf4ef74c2$var$supportsUnit=!1;try{$488c6ddbf4ef74c2$var$supportsUnit=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const $488c6ddbf4ef74c2$var$UNITS={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5{format(_){let E="";if(!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null?E=$488c6ddbf4ef74c2$export$711b50b3c525e0f2(this.numberFormatter,this.options.signDisplay,_):E=this.numberFormatter.format(_),this.options.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var C;let{unit:A,unitDisplay:R="short",locale:I}=this.resolvedOptions();if(!A)return E;let F=(C=$488c6ddbf4ef74c2$var$UNITS[A])===null||C===void 0?void 0:C[R];E+=F[I]||F.default}return E}formatToParts(_){return this.numberFormatter.formatToParts(_)}formatRange(_,E){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(_,E);if(E<_)throw new RangeError("End date must be >= start date");return`${this.format(_)} – ${this.format(E)}`}formatRangeToParts(_,E){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(_,E);if(E<_)throw new RangeError("End date must be >= start date");let C=this.numberFormatter.formatToParts(_),A=this.numberFormatter.formatToParts(E);return[...C.map(R=>({...R,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...A.map(R=>({...R,source:"endRange"}))]}resolvedOptions(){let _=this.numberFormatter.resolvedOptions();return!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null&&(_={..._,signDisplay:this.options.signDisplay}),!$488c6ddbf4ef74c2$var$supportsUnit&&this.options.style==="unit"&&(_={..._,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),_}constructor(_,E={}){this.numberFormatter=$488c6ddbf4ef74c2$var$getCachedNumberFormatter(_,E),this.options=E}}function $488c6ddbf4ef74c2$var$getCachedNumberFormatter(T,_={}){let{numberingSystem:E}=_;if(E&&T.includes("-nu-")&&(T.includes("-u-")||(T+="-u-"),T+=`-nu-${E}`),_.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var C;let{unit:I,unitDisplay:F="short"}=_;if(!I)throw new Error('unit option must be provided with style: "unit"');if(!(!((C=$488c6ddbf4ef74c2$var$UNITS[I])===null||C===void 0)&&C[F]))throw new Error(`Unsupported unit ${I} with unitDisplay = ${F}`);_={..._,style:"decimal"}}let A=T+(_?Object.entries(_).sort((I,F)=>I[0]<F[0]?-1:1).join():"");if($488c6ddbf4ef74c2$var$formatterCache.has(A))return $488c6ddbf4ef74c2$var$formatterCache.get(A);let R=new Intl.NumberFormat(T,_);return $488c6ddbf4ef74c2$var$formatterCache.set(A,R),R}function $488c6ddbf4ef74c2$export$711b50b3c525e0f2(T,_,E){if(_==="auto")return T.format(E);if(_==="never")return T.format(Math.abs(E));{let C=!1;if(_==="always"?C=E>0||Object.is(E,0):_==="exceptZero"&&(Object.is(E,-0)||Object.is(E,0)?E=Math.abs(E):C=E>0),C){let A=T.format(-E),R=T.format(E),I=A.replace(R,"").replace(/\u200e|\u061C/,"");return[...I].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),A.replace(R,"!!!").replace(I,"+").replace("!!!",R)}else return T.format(E)}}const $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX=new RegExp("^.*\\(.*\\).*$"),$6c7bd7858deea686$var$NUMBERING_SYSTEMS=["latn","arab","hanidec","deva","beng"];class $6c7bd7858deea686$export$cd11ab140839f11d{parse(_){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).parse(_)}isValidPartialNumber(_,E,C){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).isValidPartialNumber(_,E,C)}getNumberingSystem(_){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).options.numberingSystem}constructor(_,E={}){this.locale=_,this.options=E}}const $6c7bd7858deea686$var$numberParserCache=new Map;function $6c7bd7858deea686$var$getNumberParserImpl(T,_,E){let C=$6c7bd7858deea686$var$getCachedNumberParser(T,_);if(!T.includes("-nu-")&&!C.isValidPartialNumber(E)){for(let A of $6c7bd7858deea686$var$NUMBERING_SYSTEMS)if(A!==C.options.numberingSystem){let R=$6c7bd7858deea686$var$getCachedNumberParser(T+(T.includes("-u-")?"-nu-":"-u-nu-")+A,_);if(R.isValidPartialNumber(E))return R}}return C}function $6c7bd7858deea686$var$getCachedNumberParser(T,_){let E=T+(_?Object.entries(_).sort((A,R)=>A[0]<R[0]?-1:1).join():""),C=$6c7bd7858deea686$var$numberParserCache.get(E);return C||(C=new $6c7bd7858deea686$var$NumberParserImpl(T,_),$6c7bd7858deea686$var$numberParserCache.set(E,C)),C}class $6c7bd7858deea686$var$NumberParserImpl{parse(_){let E=this.sanitize(_);if(this.symbols.group&&(E=$6c7bd7858deea686$var$replaceAll(E,this.symbols.group,"")),this.symbols.decimal&&(E=E.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(E=E.replace(this.symbols.minusSign,"-")),E=E.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let I=E.indexOf("-");E=E.replace("-","");let F=E.indexOf(".");F===-1&&(F=E.length),E=E.replace(".",""),F-2===0?E=`0.${E}`:F-2===-1?E=`0.0${E}`:F-2===-2?E="0.00":E=`${E.slice(0,F-2)}.${E.slice(F-2)}`,I>-1&&(E=`-${E}`)}let C=E?+E:NaN;if(isNaN(C))return NaN;if(this.options.style==="percent"){var A,R;let I={...this.options,style:"decimal",minimumFractionDigits:Math.min(((A=this.options.minimumFractionDigits)!==null&&A!==void 0?A:0)+2,20),maximumFractionDigits:Math.min(((R=this.options.maximumFractionDigits)!==null&&R!==void 0?R:0)+2,20)};return new $6c7bd7858deea686$export$cd11ab140839f11d(this.locale,I).parse(new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(this.locale,I).format(C))}return this.options.currencySign==="accounting"&&$6c7bd7858deea686$var$CURRENCY_SIGN_REGEX.test(_)&&(C=-1*C),C}sanitize(_){return _=_.replace(this.symbols.literals,""),this.symbols.minusSign&&(_=_.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(_=_.replace(",",this.symbols.decimal),_=_.replace("،",this.symbols.decimal)),this.symbols.group&&(_=$6c7bd7858deea686$var$replaceAll(_,".",this.symbols.group))),this.options.locale==="fr-FR"&&(_=$6c7bd7858deea686$var$replaceAll(_,"."," ")),_}isValidPartialNumber(_,E=-1/0,C=1/0){return _=this.sanitize(_),this.symbols.minusSign&&_.startsWith(this.symbols.minusSign)&&E<0?_=_.slice(this.symbols.minusSign.length):this.symbols.plusSign&&_.startsWith(this.symbols.plusSign)&&C>0&&(_=_.slice(this.symbols.plusSign.length)),this.symbols.group&&_.startsWith(this.symbols.group)||this.symbols.decimal&&_.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(_=$6c7bd7858deea686$var$replaceAll(_,this.symbols.group,"")),_=_.replace(this.symbols.numeral,""),this.symbols.decimal&&(_=_.replace(this.symbols.decimal,"")),_.length===0)}constructor(_,E={}){this.locale=_,this.formatter=new Intl.NumberFormat(_,E),this.options=this.formatter.resolvedOptions(),this.symbols=$6c7bd7858deea686$var$getSymbols(_,this.formatter,this.options,E);var C,A;this.options.style==="percent"&&(((C=this.options.minimumFractionDigits)!==null&&C!==void 0?C:0)>18||((A=this.options.maximumFractionDigits)!==null&&A!==void 0?A:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const $6c7bd7858deea686$var$nonLiteralParts=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),$6c7bd7858deea686$var$pluralNumbers=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $6c7bd7858deea686$var$getSymbols(T,_,E,C){var A,R,I,F;let B=new Intl.NumberFormat(T,{...E,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),U=B.formatToParts(-10000.111),V=B.formatToParts(10000.111),D=$6c7bd7858deea686$var$pluralNumbers.map(oe=>B.formatToParts(oe));var O;let L=(O=(A=U.find(oe=>oe.type==="minusSign"))===null||A===void 0?void 0:A.value)!==null&&O!==void 0?O:"-",z=(R=V.find(oe=>oe.type==="plusSign"))===null||R===void 0?void 0:R.value;!z&&((C==null?void 0:C.signDisplay)==="exceptZero"||(C==null?void 0:C.signDisplay)==="always")&&(z="+");let X=(I=new Intl.NumberFormat(T,{...E,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(oe=>oe.type==="decimal"))===null||I===void 0?void 0:I.value,Y=(F=U.find(oe=>oe.type==="group"))===null||F===void 0?void 0:F.value,K=U.filter(oe=>!$6c7bd7858deea686$var$nonLiteralParts.has(oe.type)).map(oe=>$6c7bd7858deea686$var$escapeRegex(oe.value)),Q=D.flatMap(oe=>oe.filter(fe=>!$6c7bd7858deea686$var$nonLiteralParts.has(fe.type)).map(fe=>$6c7bd7858deea686$var$escapeRegex(fe.value))),ee=[...new Set([...K,...Q])].sort((oe,fe)=>fe.length-oe.length),J=ee.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${ee.join("|")}|[\\p{White_Space}]`,"gu"),ie=[...new Intl.NumberFormat(E.locale,{useGrouping:!1}).format(9876543210)].reverse(),re=new Map(ie.map((oe,fe)=>[oe,fe])),se=new RegExp(`[${ie.join("")}]`,"g");return{minusSign:L,plusSign:z,decimal:X,group:Y,literals:J,numeral:se,index:oe=>String(re.get(oe))}}function $6c7bd7858deea686$var$replaceAll(T,_,E){return T.replaceAll?T.replaceAll(_,E):T.split(_).join(E)}function $6c7bd7858deea686$var$escapeRegex(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var anatomy$c=createAnatomy("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),parts$5=anatomy$c.build(),getRootId$4=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`number-input:${T.id}`},getInputId=T=>{var _;return((_=T.ids)==null?void 0:_.input)??`number-input:${T.id}:input`},getIncrementTriggerId=T=>{var _;return((_=T.ids)==null?void 0:_.incrementTrigger)??`number-input:${T.id}:inc`},getDecrementTriggerId=T=>{var _;return((_=T.ids)==null?void 0:_.decrementTrigger)??`number-input:${T.id}:dec`},getScrubberId=T=>{var _;return((_=T.ids)==null?void 0:_.scrubber)??`number-input:${T.id}:scrubber`},getCursorId=T=>`number-input:${T.id}:cursor`,getLabelId$2=T=>{var _;return((_=T.ids)==null?void 0:_.label)??`number-input:${T.id}:label`},getInputEl=T=>T.getById(getInputId(T)),getIncrementTriggerEl=T=>T.getById(getIncrementTriggerId(T)),getDecrementTriggerEl=T=>T.getById(getDecrementTriggerId(T)),getCursorEl=T=>T.getDoc().getElementById(getCursorId(T)),getPressedTriggerEl=(T,_)=>{let E=null;return _==="increment"&&(E=getIncrementTriggerEl(T)),_==="decrement"&&(E=getDecrementTriggerEl(T)),E},setupVirtualCursor=(T,_)=>{if(!isSafari())return createVirtualCursor(T,_),()=>{var E;(E=getCursorEl(T))==null||E.remove()}},preventTextSelection=T=>{const _=T.getDoc(),E=_.documentElement,C=_.body;return C.style.pointerEvents="none",E.style.userSelect="none",E.style.cursor="ew-resize",()=>{C.style.pointerEvents="",E.style.userSelect="",E.style.cursor="",E.style.length||E.removeAttribute("style"),C.style.length||C.removeAttribute("style")}},getMousemoveValue=(T,_)=>{const{point:E,isRtl:C,event:A}=_,R=T.getWin(),I=roundToDpr(A.movementX,R.devicePixelRatio),F=roundToDpr(A.movementY,R.devicePixelRatio);let B=I>0?"increment":I<0?"decrement":null;C&&B==="increment"&&(B="decrement"),C&&B==="decrement"&&(B="increment");const U={x:E.x+I,y:E.y+F},V=R.innerWidth,D=roundToDpr(7.5,R.devicePixelRatio);return U.x=wrap$3(U.x+D,V)-D,{hint:B,point:U}},createVirtualCursor=(T,_)=>{const E=T.getDoc(),C=E.createElement("div");C.className="scrubber--cursor",C.id=getCursorId(T),Object.assign(C.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:MAX_Z_INDEX,transform:_?`translate3d(${_.x}px, ${_.y}px, 0px)`:void 0,willChange:"transform"}),C.innerHTML=`
      <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
        <g transform="translate(2 3)">
          <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
          <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
        </g>
      </svg>`,E.body.appendChild(C)};function connect$5(T,_){const{state:E,send:C,prop:A,scope:R,computed:I}=T,F=E.hasTag("focus"),B=I("isDisabled"),U=A("readOnly"),V=I("isValueEmpty"),D=I("isOutOfRange")||!!A("invalid"),O=B||!I("canIncrement")||U,L=B||!I("canDecrement")||U,z=A("translations");return{focused:F,invalid:D,empty:V,value:I("formattedValue"),valueAsNumber:I("valueAsNumber"),setValue(W){C({type:"VALUE.SET",value:W})},clearValue(){C({type:"VALUE.CLEAR"})},increment(){C({type:"VALUE.INCREMENT"})},decrement(){C({type:"VALUE.DECREMENT"})},setToMax(){C({type:"VALUE.SET",value:A("max")})},setToMin(){C({type:"VALUE.SET",value:A("min")})},focus(){var W;(W=getInputEl(R))==null||W.focus()},getRootProps(){return _.element({id:getRootId$4(R),...parts$5.root.attrs,dir:A("dir"),"data-disabled":dataAttr$1(B),"data-focus":dataAttr$1(F),"data-invalid":dataAttr$1(D)})},getLabelProps(){return _.label({...parts$5.label.attrs,dir:A("dir"),"data-disabled":dataAttr$1(B),"data-focus":dataAttr$1(F),"data-invalid":dataAttr$1(D),id:getLabelId$2(R),htmlFor:getInputId(R)})},getControlProps(){return _.element({...parts$5.control.attrs,dir:A("dir"),role:"group","aria-disabled":B,"data-focus":dataAttr$1(F),"data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(D),"aria-invalid":ariaAttr(D)})},getValueTextProps(){return _.element({...parts$5.valueText.attrs,dir:A("dir"),"data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(D),"data-focus":dataAttr$1(F)})},getInputProps(){return _.input({...parts$5.input.attrs,dir:A("dir"),name:A("name"),form:A("form"),id:getInputId(R),role:"spinbutton",defaultValue:I("formattedValue"),pattern:A("pattern"),inputMode:A("inputMode"),"aria-invalid":ariaAttr(D),"data-invalid":dataAttr$1(D),disabled:B,"data-disabled":dataAttr$1(B),readOnly:U,required:A("required"),autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text","aria-roledescription":"numberfield","aria-valuemin":A("min"),"aria-valuemax":A("max"),"aria-valuenow":Number.isNaN(I("valueAsNumber"))?void 0:I("valueAsNumber"),"aria-valuetext":I("valueText"),onFocus(){C({type:"INPUT.FOCUS"})},onBlur(){C({type:"INPUT.BLUR"})},onInput(W){C({type:"INPUT.CHANGE",target:W.currentTarget,hint:"set"})},onBeforeInput(W){try{const{selectionStart:X,selectionEnd:Y,value:K}=W.currentTarget,Q=K.slice(0,X)+(W.data??"")+K.slice(Y);I("parser").isValidPartialNumber(Q)||W.preventDefault()}catch{}},onKeyDown(W){if(W.defaultPrevented||U||isComposingEvent(W))return;const X=getEventStep(W)*A("step"),K={ArrowUp(){C({type:"INPUT.ARROW_UP",step:X}),W.preventDefault()},ArrowDown(){C({type:"INPUT.ARROW_DOWN",step:X}),W.preventDefault()},Home(){isModifierKey(W)||(C({type:"INPUT.HOME"}),W.preventDefault())},End(){isModifierKey(W)||(C({type:"INPUT.END"}),W.preventDefault())},Enter(){C({type:"INPUT.ENTER"})}}[W.key];K==null||K(W)}})},getDecrementTriggerProps(){return _.button({...parts$5.decrementTrigger.attrs,dir:A("dir"),id:getDecrementTriggerId(R),disabled:L,"data-disabled":dataAttr$1(L),"aria-label":z.decrementLabel,type:"button",tabIndex:-1,"aria-controls":getInputId(R),onPointerDown(W){var X;L||!isLeftClick(W)||(C({type:"TRIGGER.PRESS_DOWN",hint:"decrement",pointerType:W.pointerType}),W.pointerType==="mouse"&&W.preventDefault(),W.pointerType==="touch"&&((X=W.currentTarget)==null||X.focus({preventScroll:!0})))},onPointerUp(W){C({type:"TRIGGER.PRESS_UP",hint:"decrement",pointerType:W.pointerType})},onPointerLeave(){L||C({type:"TRIGGER.PRESS_UP",hint:"decrement"})}})},getIncrementTriggerProps(){return _.button({...parts$5.incrementTrigger.attrs,dir:A("dir"),id:getIncrementTriggerId(R),disabled:O,"data-disabled":dataAttr$1(O),"aria-label":z.incrementLabel,type:"button",tabIndex:-1,"aria-controls":getInputId(R),onPointerDown(W){var X;O||!isLeftClick(W)||(C({type:"TRIGGER.PRESS_DOWN",hint:"increment",pointerType:W.pointerType}),W.pointerType==="mouse"&&W.preventDefault(),W.pointerType==="touch"&&((X=W.currentTarget)==null||X.focus({preventScroll:!0})))},onPointerUp(W){C({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:W.pointerType})},onPointerLeave(W){C({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:W.pointerType})}})},getScrubberProps(){return _.element({...parts$5.scrubber.attrs,dir:A("dir"),"data-disabled":dataAttr$1(B),id:getScrubberId(R),role:"presentation",onMouseDown(W){if(B)return;const X=getEventPoint(W),K=getWindow$1(W.currentTarget).devicePixelRatio;X.x=X.x-roundToDpr(7.5,K),X.y=X.y-roundToDpr(7.5,K),C({type:"SCRUBBER.PRESS_DOWN",point:X}),W.preventDefault()},style:{cursor:B?void 0:"ew-resize"}})}}}function recordCursor(T){if(!(!T||T.ownerDocument.activeElement!==T))try{const{selectionStart:_,selectionEnd:E,value:C}=T,A=C.substring(0,_),R=C.substring(E);return{start:_,end:E,value:C,beforeTxt:A,afterTxt:R}}catch{}}function restoreCursor(T,_){if(!(!T||T.ownerDocument.activeElement!==T)){if(!_){T.setSelectionRange(T.value.length,T.value.length);return}try{const{value:E}=T,{beforeTxt:C="",afterTxt:A="",start:R}=_;let I=E.length;if(E.endsWith(A))I=E.length-A.length;else if(E.startsWith(C))I=C.length;else if(R!=null){const F=C[R-1],B=E.indexOf(F,R-1);B!==-1&&(I=B+1)}T.setSelectionRange(I,I)}catch{}}}var createFormatter=(T,_={})=>new Intl.NumberFormat(T,_),createParser=(T,_={})=>new $6c7bd7858deea686$export$cd11ab140839f11d(T,_),parseValue=(T,_)=>{const{prop:E,computed:C}=_;return E("formatOptions")?C("parser").parse(String(T)):parseFloat(T)},formatValue=(T,_)=>{const{prop:E,computed:C}=_;return Number.isNaN(T)?"":E("formatOptions")?C("formatter").format(T):T.toString()},getDefaultStep=(T,_)=>{let E=T!==void 0&&!Number.isNaN(T)?T:1;return(_==null?void 0:_.style)==="percent"&&(T===void 0||Number.isNaN(T))&&(E=.01),E},{choose,guards,createMachine}=setup(),{not:not$5,and:and$2}=guards,machine$5=createMachine({props({props:T}){const _=getDefaultStep(T.step,T.formatOptions);return{dir:"ltr",locale:"en-US",focusInputOnChange:!0,clampValueOnBlur:!T.allowOverflow,allowOverflow:!1,inputMode:"decimal",pattern:"[0-9]*(.[0-9]+)?",defaultValue:"",step:_,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,spinOnPress:!0,...T,translations:{incrementLabel:"increment value",decrementLabel:"decrease value",...T.translations}}},initialState(){return"idle"},context({prop:T,bindable:_,getComputed:E}){return{value:_(()=>({defaultValue:T("defaultValue"),value:T("value"),onChange(C){var I;const A=E(),R=parseValue(C,{computed:A,prop:T});(I=T("onValueChange"))==null||I({value:C,valueAsNumber:R})}})),hint:_(()=>({defaultValue:null})),scrubberCursorPoint:_(()=>({defaultValue:null,hash(C){return C?`x:${C.x}, y:${C.y}`:""}})),fieldsetDisabled:_(()=>({defaultValue:!1}))}},computed:{isRtl:({prop:T})=>T("dir")==="rtl",valueAsNumber:({context:T,computed:_,prop:E})=>parseValue(T.get("value"),{computed:_,prop:E}),formattedValue:({computed:T,prop:_})=>formatValue(T("valueAsNumber"),{computed:T,prop:_}),isAtMin:({computed:T,prop:_})=>isValueAtMin(T("valueAsNumber"),_("min")),isAtMax:({computed:T,prop:_})=>isValueAtMax(T("valueAsNumber"),_("max")),isOutOfRange:({computed:T,prop:_})=>!isValueWithinRange(T("valueAsNumber"),_("min"),_("max")),isValueEmpty:({context:T})=>T.get("value")==="",isDisabled:({prop:T,context:_})=>!!T("disabled")||_.get("fieldsetDisabled"),canIncrement:({prop:T,computed:_})=>T("allowOverflow")||!_("isAtMax"),canDecrement:({prop:T,computed:_})=>T("allowOverflow")||!_("isAtMin"),valueText:({prop:T,context:_})=>{var E,C;return(C=(E=T("translations")).valueText)==null?void 0:C.call(E,_.get("value"))},formatter:memo$2(({prop:T})=>[T("locale"),T("formatOptions")],(T,_)=>createFormatter(T,_)),parser:memo$2(({prop:T})=>[T("locale"),T("formatOptions")],(T,_)=>createParser(T,_))},watch({track:T,action:_,context:E,computed:C,prop:A}){T([()=>E.get("value"),()=>A("locale")],()=>{_(["syncInputElement"])}),T([()=>C("isOutOfRange")],()=>{_(["invokeOnInvalid"])}),T([()=>E.hash("scrubberCursorPoint")],()=>{_(["setVirtualCursorPosition"])})},effects:["trackFormControl"],on:{"VALUE.SET":{actions:["setRawValue"]},"VALUE.CLEAR":{actions:["clearValue"]},"VALUE.INCREMENT":{actions:["increment"]},"VALUE.DECREMENT":{actions:["decrement"]}},states:{idle:{on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","invokeOnFocus","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","invokeOnFocus","setHint","setCursorPoint"]},"INPUT.FOCUS":{target:"focused",actions:["focusInput","invokeOnFocus"]}}},focused:{tags:["focus"],effects:["attachWheelListener"],on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","setHint","setCursorPoint"]},"INPUT.ARROW_UP":{actions:["increment"]},"INPUT.ARROW_DOWN":{actions:["decrement"]},"INPUT.HOME":{actions:["decrementToMin"]},"INPUT.END":{actions:["incrementToMax"]},"INPUT.CHANGE":{actions:["setValue","setHint"]},"INPUT.BLUR":[{guard:and$2("clampValueOnBlur",not$5("isInRange")),target:"idle",actions:["setClampedValue","clearHint","invokeOnBlur"]},{guard:not$5("isInRange"),target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur","invokeOnInvalid"]},{target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur"]}],"INPUT.ENTER":{actions:["setFormattedValue","clearHint","invokeOnBlur"]}}},"before:spin":{tags:["focus"],effects:["trackButtonDisabled","waitForChangeDelay"],entry:choose([{guard:"isIncrementHint",actions:["increment"]},{guard:"isDecrementHint",actions:["decrement"]}]),on:{CHANGE_DELAY:{target:"spinning",guard:and$2("isInRange","spinOnPress")},"TRIGGER.PRESS_UP":[{guard:"isTouchPointer",target:"focused",actions:["clearHint"]},{target:"focused",actions:["focusInput","clearHint"]}]}},spinning:{tags:["focus"],effects:["trackButtonDisabled","spinValue"],on:{SPIN:[{guard:"isIncrementHint",actions:["increment"]},{guard:"isDecrementHint",actions:["decrement"]}],"TRIGGER.PRESS_UP":{target:"focused",actions:["focusInput","clearHint"]}}},scrubbing:{tags:["focus"],effects:["activatePointerLock","trackMousemove","setupVirtualCursor","preventTextSelection"],on:{"SCRUBBER.POINTER_UP":{target:"focused",actions:["focusInput","clearCursorPoint"]},"SCRUBBER.POINTER_MOVE":[{guard:"isIncrementHint",actions:["increment","setCursorPoint"]},{guard:"isDecrementHint",actions:["decrement","setCursorPoint"]}]}}},implementations:{guards:{clampValueOnBlur:({prop:T})=>T("clampValueOnBlur"),spinOnPress:({prop:T})=>!!T("spinOnPress"),isInRange:({computed:T})=>!T("isOutOfRange"),isDecrementHint:({context:T,event:_})=>(_.hint??T.get("hint"))==="decrement",isIncrementHint:({context:T,event:_})=>(_.hint??T.get("hint"))==="increment",isTouchPointer:({event:T})=>T.pointerType==="touch"},effects:{waitForChangeDelay({send:T}){const _=setTimeout(()=>{T({type:"CHANGE_DELAY"})},300);return()=>clearTimeout(_)},spinValue({send:T}){const _=setInterval(()=>{T({type:"SPIN"})},50);return()=>clearInterval(_)},trackFormControl({context:T,scope:_}){const E=getInputEl(_);return trackFormControl(E,{onFieldsetDisabledChange(C){T.set("fieldsetDisabled",C)},onFormReset(){T.set("value",T.initial("value"))}})},setupVirtualCursor({context:T,scope:_}){const E=T.get("scrubberCursorPoint");return setupVirtualCursor(_,E)},preventTextSelection({scope:T}){return preventTextSelection(T)},trackButtonDisabled({context:T,scope:_,send:E}){const C=T.get("hint"),A=getPressedTriggerEl(_,C);return observeAttributes(A,{attributes:["disabled"],callback(){E({type:"TRIGGER.PRESS_UP",src:"attr"})}})},attachWheelListener({scope:T,send:_,prop:E}){const C=getInputEl(T);if(!C||!T.isActiveElement(C)||!E("allowMouseWheel"))return;function A(R){R.preventDefault();const I=Math.sign(R.deltaY)*-1;I===1?_({type:"VALUE.INCREMENT"}):I===-1&&_({type:"VALUE.DECREMENT"})}return addDomEvent(C,"wheel",A,{passive:!1})},activatePointerLock({scope:T}){if(!isSafari())return requestPointerLock(T.getDoc())},trackMousemove({scope:T,send:_,context:E,computed:C}){const A=T.getDoc();function R(F){const B=E.get("scrubberCursorPoint"),U=C("isRtl"),V=getMousemoveValue(T,{point:B,isRtl:U,event:F});V.hint&&_({type:"SCRUBBER.POINTER_MOVE",hint:V.hint,point:V.point})}function I(){_({type:"SCRUBBER.POINTER_UP"})}return callAll(addDomEvent(A,"mousemove",R,!1),addDomEvent(A,"mouseup",I,!1))}},actions:{focusInput({scope:T,prop:_}){if(!_("focusInputOnChange"))return;const E=getInputEl(T);T.isActiveElement(E)||raf$1(()=>E==null?void 0:E.focus({preventScroll:!0}))},increment({context:T,event:_,prop:E,computed:C}){let A=incrementValue(C("valueAsNumber"),_.step??E("step"));E("allowOverflow")||(A=clampValue(A,E("min"),E("max"))),T.set("value",formatValue(A,{computed:C,prop:E}))},decrement({context:T,event:_,prop:E,computed:C}){let A=decrementValue(C("valueAsNumber"),_.step??E("step"));E("allowOverflow")||(A=clampValue(A,E("min"),E("max"))),T.set("value",formatValue(A,{computed:C,prop:E}))},setClampedValue({context:T,prop:_,computed:E}){const C=clampValue(E("valueAsNumber"),_("min"),_("max"));T.set("value",formatValue(C,{computed:E,prop:_}))},setRawValue({context:T,event:_,prop:E,computed:C}){let A=parseValue(_.value,{computed:C,prop:E});E("allowOverflow")||(A=clampValue(A,E("min"),E("max"))),T.set("value",formatValue(A,{computed:C,prop:E}))},setValue({context:T,event:_}){var C;const E=((C=_.target)==null?void 0:C.value)??_.value;T.set("value",E)},clearValue({context:T}){T.set("value","")},incrementToMax({context:T,prop:_,computed:E}){const C=formatValue(_("max"),{computed:E,prop:_});T.set("value",C)},decrementToMin({context:T,prop:_,computed:E}){const C=formatValue(_("min"),{computed:E,prop:_});T.set("value",C)},setHint({context:T,event:_}){T.set("hint",_.hint)},clearHint({context:T}){T.set("hint",null)},invokeOnFocus({computed:T,prop:_}){var E;(E=_("onFocusChange"))==null||E({focused:!0,value:T("formattedValue"),valueAsNumber:T("valueAsNumber")})},invokeOnBlur({computed:T,prop:_}){var E;(E=_("onFocusChange"))==null||E({focused:!1,value:T("formattedValue"),valueAsNumber:T("valueAsNumber")})},invokeOnInvalid({computed:T,prop:_,event:E}){var A;if(E.type==="INPUT.CHANGE")return;const C=T("valueAsNumber")>_("max")?"rangeOverflow":"rangeUnderflow";(A=_("onValueInvalid"))==null||A({reason:C,value:T("formattedValue"),valueAsNumber:T("valueAsNumber")})},syncInputElement({context:T,event:_,computed:E,scope:C}){const A=_.type.endsWith("CHANGE")?T.get("value"):E("formattedValue"),R=getInputEl(C),I=recordCursor(R);raf$1(()=>{setElementValue(R,A),restoreCursor(R,I)})},setFormattedValue({context:T,computed:_}){T.set("value",_("formattedValue"))},setCursorPoint({context:T,event:_}){T.set("scrubberCursorPoint",_.point)},clearCursorPoint({context:T}){T.set("scrubberCursorPoint",null)},setVirtualCursorPosition({context:T,scope:_}){const E=getCursorEl(_),C=T.get("scrubberCursorPoint");!E||!C||(E.style.transform=`translate3d(${C.x}px, ${C.y}px, 0px)`)}}}});createProps$1()(["allowMouseWheel","allowOverflow","clampValueOnBlur","dir","disabled","focusInputOnChange","form","formatOptions","getRootNode","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","required","readOnly","spinOnPress","step","translations","value","defaultValue"]);const useNumberInput=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),{dir:C,locale:A}=useLocaleContext(),R=useFieldContext(),I={id:_,ids:{label:R==null?void 0:R.ids.label,input:R==null?void 0:R.ids.control},disabled:R==null?void 0:R.disabled,readOnly:R==null?void 0:R.readOnly,required:R==null?void 0:R.required,invalid:R==null?void 0:R.invalid,dir:C,locale:A,getRootNode:E,...T},F=useMachine(machine$5,I);return connect$5(F,normalizeProps)},NumberInputRoot$1=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),A=useNumberInput(E),R=mergeProps(A.getRootProps(),C);return jsxRuntimeExports.jsx(NumberInputProvider,{value:A,children:jsxRuntimeExports.jsx(ark.div,{...R,ref:_})})});NumberInputRoot$1.displayName="NumberInputRoot";const NumberInputRootProvider=reactExports.forwardRef((T,_)=>{const[{value:E},C]=createSplitProps()(T,["value"]),A=mergeProps(E.getRootProps(),C);return jsxRuntimeExports.jsx(NumberInputProvider,{value:E,children:jsxRuntimeExports.jsx(ark.div,{...A,ref:_})})});NumberInputRootProvider.displayName="NumberInputRootProvider";const NumberInputScrubber=reactExports.forwardRef((T,_)=>{const E=useNumberInputContext(),C=mergeProps(E.getScrubberProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});NumberInputScrubber.displayName="NumberInputScrubber";const NumberInputValueText=reactExports.forwardRef((T,_)=>{const{children:E,...C}=T,A=useNumberInputContext(),R=mergeProps(A.getValueTextProps(),C);return jsxRuntimeExports.jsx(ark.span,{...R,ref:_,children:E||A.value})});NumberInputValueText.displayName="NumberInputValueText";var anatomy$b=createAnatomy("pinInput").parts("root","label","input","control");anatomy$b.build();createProps$1()(["autoFocus","blurOnComplete","count","defaultValue","dir","disabled","form","getRootNode","id","ids","invalid","mask","name","onValueChange","onValueComplete","onValueInvalid","otp","pattern","placeholder","readOnly","required","selectOnFocus","translations","type","value"]);var anatomy$a=createAnatomy("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger");anatomy$a.build();createProps$1()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","portalled","positioning"]);const Portal=T=>{var B;const{children:_,disabled:E}=T,[C,A]=reactExports.useState((B=T.container)==null?void 0:B.current),R=reactExports.useSyncExternalStore(subscribe$1,()=>!1,()=>!0),{getRootNode:I}=useEnvironmentContext();if(reactExports.useEffect(()=>{A(()=>{var U;return(U=T.container)==null?void 0:U.current})},[T.container]),R||E)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_});const F=C??getPortalNode(I);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reactExports.Children.map(_,U=>reactDomExports.createPortal(U,F))})},getPortalNode=T=>{const _=T==null?void 0:T(),E=_.getRootNode();return isShadowRoot$1(E)?E:getDocument(_).body},subscribe$1=()=>()=>{};var anatomy$9=createAnatomy("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange");anatomy$9.build();createProps$1()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange","defaultValue","formatOptions","locale"]);var anatomy$8=createAnatomy("qr-code").parts("root","frame","pattern","overlay","downloadTrigger");anatomy$8.build();createProps$1()(["ids","defaultValue","value","id","encoding","dir","getRootNode","onValueChange","pixelSize"]);var anatomy$7=createAnatomy("radio-group").parts("root","label","item","itemText","itemControl","indicator");anatomy$7.build();createProps$1()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value","defaultValue"]);createProps$1()(["value","disabled","invalid"]);var anatomy$6=createAnatomy("rating-group").parts("root","label","item","control");anatomy$6.build();createProps$1()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value","defaultValue"]);createProps$1()(["index"]);const segmentGroupAnatomy=anatomy$7.rename("segment-group");segmentGroupAnatomy.build();const[SelectProvider,useSelectContext]=createContext({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),SelectClearTrigger$2=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getClearTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});SelectClearTrigger$2.displayName="SelectClearTrigger";const SelectContent$2=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=usePresenceContext(),A=mergeProps(E.getContentProps(),C.getPresenceProps(),T);return C.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...A,ref:composeRefs(C.ref,_)})});SelectContent$2.displayName="SelectContent";const SelectContext$1=T=>T.children(useSelectContext()),SelectControl$1=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getControlProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});SelectControl$1.displayName="SelectControl";const SelectHiddenSelect$1=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getHiddenSelectProps(),T),A=E.value.length===0,R=useFieldContext();return jsxRuntimeExports.jsxs(ark.select,{"aria-describedby":R==null?void 0:R.ariaDescribedby,...C,ref:_,children:[A&&jsxRuntimeExports.jsx("option",{value:""}),E.collection.items.map((I,F)=>jsxRuntimeExports.jsx("option",{value:E.collection.getItemValue(I)??"",disabled:E.collection.getItemDisabled(I),children:E.collection.stringifyItem(I)},F))]})});SelectHiddenSelect$1.displayName="SelectHiddenSelect";const SelectIndicator$1=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getIndicatorProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});SelectIndicator$1.displayName="SelectIndicator";const[SelectItemProvider,useSelectItemContext]=createContext({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[SelectItemPropsProvider,useSelectItemPropsContext]=createContext({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),SelectItem$2=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["item","persistFocus"]),A=useSelectContext(),R=mergeProps(A.getItemProps(E),C),I=A.getItemState(E);return jsxRuntimeExports.jsx(SelectItemPropsProvider,{value:E,children:jsxRuntimeExports.jsx(SelectItemProvider,{value:I,children:jsxRuntimeExports.jsx(ark.div,{...R,ref:_})})})});SelectItem$2.displayName="SelectItem";const[SelectItemGroupPropsProvider,useSelectItemGroupPropsContext]=createContext({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),SelectItemGroup$1=reactExports.forwardRef((T,_)=>{const E=reactExports.useId(),[C,A]=createSplitProps()(T,["id"]),R={id:E,...C},I=useSelectContext(),F=mergeProps(I.getItemGroupProps(R),A);return jsxRuntimeExports.jsx(SelectItemGroupPropsProvider,{value:R,children:jsxRuntimeExports.jsx(ark.div,{...F,ref:_})})});SelectItemGroup$1.displayName="SelectItemGroup";const SelectItemGroupLabel$1=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=useSelectItemGroupPropsContext(),A=mergeProps(E.getItemGroupLabelProps({htmlFor:C.id}),T);return jsxRuntimeExports.jsx(ark.div,{...A,ref:_})});SelectItemGroupLabel$1.displayName="SelectItemGroupLabel";const SelectItemIndicator$1=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=useSelectItemPropsContext(),A=mergeProps(E.getItemIndicatorProps(C),T);return jsxRuntimeExports.jsx(ark.div,{...A,ref:_})});SelectItemIndicator$1.displayName="SelectItemIndicator";const SelectItemText=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=useSelectItemPropsContext(),A=mergeProps(E.getItemTextProps(C),T);return jsxRuntimeExports.jsx(ark.span,{...A,ref:_})});SelectItemText.displayName="SelectItemText";const SelectLabel=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getLabelProps(),T);return jsxRuntimeExports.jsx(ark.label,{...C,ref:_})});SelectLabel.displayName="SelectLabel";const SelectPositioner$1=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getPositionerProps(),T);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});SelectPositioner$1.displayName="SelectPositioner";var anatomy$5=createAnatomy("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),parts$4=anatomy$5.build(),collection=T=>new ListCollection(T);collection.empty=()=>new ListCollection({items:[]});var getRootId$3=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`select:${T.id}`},getContentId$2=T=>{var _;return((_=T.ids)==null?void 0:_.content)??`select:${T.id}:content`},getTriggerId$2=T=>{var _;return((_=T.ids)==null?void 0:_.trigger)??`select:${T.id}:trigger`},getClearTriggerId=T=>{var _;return((_=T.ids)==null?void 0:_.clearTrigger)??`select:${T.id}:clear-trigger`},getLabelId$1=T=>{var _;return((_=T.ids)==null?void 0:_.label)??`select:${T.id}:label`},getControlId$1=T=>{var _;return((_=T.ids)==null?void 0:_.control)??`select:${T.id}:control`},getItemId=(T,_)=>{var E,C;return((C=(E=T.ids)==null?void 0:E.item)==null?void 0:C.call(E,_))??`select:${T.id}:option:${_}`},getHiddenSelectId=T=>{var _;return((_=T.ids)==null?void 0:_.hiddenSelect)??`select:${T.id}:select`},getPositionerId$1=T=>{var _;return((_=T.ids)==null?void 0:_.positioner)??`select:${T.id}:positioner`},getItemGroupId=(T,_)=>{var E,C;return((C=(E=T.ids)==null?void 0:E.itemGroup)==null?void 0:C.call(E,_))??`select:${T.id}:optgroup:${_}`},getItemGroupLabelId=(T,_)=>{var E,C;return((C=(E=T.ids)==null?void 0:E.itemGroupLabel)==null?void 0:C.call(E,_))??`select:${T.id}:optgroup-label:${_}`},getHiddenSelectEl=T=>T.getById(getHiddenSelectId(T)),getContentEl$1=T=>T.getById(getContentId$2(T)),getTriggerEl$2=T=>T.getById(getTriggerId$2(T)),getClearTriggerEl=T=>T.getById(getClearTriggerId(T)),getPositionerEl$1=T=>T.getById(getPositionerId$1(T)),getItemEl=(T,_)=>T.getById(getItemId(T,_));function connect$4(T,_){const{context:E,prop:C,scope:A,state:R,computed:I,send:F}=T,B=C("disabled")||E.get("fieldsetDisabled"),U=C("invalid"),V=C("readOnly"),D=C("composite"),O=C("collection"),L=R.hasTag("open"),z=R.matches("focused"),W=E.get("highlightedValue"),X=E.get("highlightedItem"),Y=E.get("selectedItems"),K=E.get("currentPlacement"),Q=I("isTypingAhead"),ee=I("isInteractive"),J=W?getItemId(A,W):void 0;function ie(se){const ne=O.getItemDisabled(se.item),oe=O.getItemValue(se.item);return ensure(oe,()=>`[zag-js] No value found for item ${JSON.stringify(se.item)}`),{value:oe,disabled:!!(B||ne),highlighted:W===oe,selected:E.get("value").includes(oe)}}const re=getPlacementStyles({...C("positioning"),placement:K});return{open:L,focused:z,empty:E.get("value").length===0,highlightedItem:X,highlightedValue:W,selectedItems:Y,hasSelectedItems:I("hasSelectedItems"),value:E.get("value"),valueAsString:E.get("valueAsString"),collection:O,multiple:!!C("multiple"),disabled:!!B,reposition(se={}){F({type:"POSITIONING.SET",options:se})},focus(){var se;(se=getTriggerEl$2(A))==null||se.focus({preventScroll:!0})},setOpen(se){R.hasTag("open")!==se&&F({type:se?"OPEN":"CLOSE"})},selectValue(se){F({type:"ITEM.SELECT",value:se})},setValue(se){F({type:"VALUE.SET",value:se})},selectAll(){F({type:"VALUE.SET",value:O.getValues()})},highlightValue(se){F({type:"HIGHLIGHTED_VALUE.SET",value:se})},clearValue(se){F(se?{type:"ITEM.CLEAR",value:se}:{type:"VALUE.CLEAR"})},getItemState:ie,getRootProps(){return _.element({...parts$4.root.attrs,dir:C("dir"),id:getRootId$3(A),"data-invalid":dataAttr$1(U),"data-readonly":dataAttr$1(V)})},getLabelProps(){return _.label({dir:C("dir"),id:getLabelId$1(A),...parts$4.label.attrs,"data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(U),"data-readonly":dataAttr$1(V),htmlFor:getHiddenSelectId(A),onClick(se){var ne;se.defaultPrevented||B||(ne=getTriggerEl$2(A))==null||ne.focus({preventScroll:!0})}})},getControlProps(){return _.element({...parts$4.control.attrs,dir:C("dir"),id:getControlId$1(A),"data-state":L?"open":"closed","data-focus":dataAttr$1(z),"data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(U)})},getValueTextProps(){return _.element({...parts$4.valueText.attrs,dir:C("dir"),"data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(U),"data-focus":dataAttr$1(z)})},getTriggerProps(){return _.button({id:getTriggerId$2(A),disabled:B,dir:C("dir"),type:"button",role:"combobox","aria-controls":getContentId$2(A),"aria-expanded":L,"aria-haspopup":"listbox","data-state":L?"open":"closed","aria-invalid":U,"aria-labelledby":getLabelId$1(A),...parts$4.trigger.attrs,"data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(U),"data-readonly":dataAttr$1(V),"data-placement":K,"data-placeholder-shown":dataAttr$1(!I("hasSelectedItems")),onClick(se){ee&&(se.defaultPrevented||F({type:"TRIGGER.CLICK"}))},onFocus(){F({type:"TRIGGER.FOCUS"})},onBlur(){F({type:"TRIGGER.BLUR"})},onKeyDown(se){if(se.defaultPrevented||!ee)return;const oe={ArrowUp(){F({type:"TRIGGER.ARROW_UP"})},ArrowDown(fe){F({type:fe.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){F({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){F({type:"TRIGGER.ARROW_RIGHT"})},Home(){F({type:"TRIGGER.HOME"})},End(){F({type:"TRIGGER.END"})},Enter(){F({type:"TRIGGER.ENTER"})},Space(fe){F(Q?{type:"TRIGGER.TYPEAHEAD",key:fe.key}:{type:"TRIGGER.ENTER"})}}[getEventKey(se,{dir:C("dir"),orientation:"vertical"})];if(oe){oe(se),se.preventDefault();return}getByTypeahead.isValidEvent(se)&&(F({type:"TRIGGER.TYPEAHEAD",key:se.key}),se.preventDefault())}})},getIndicatorProps(){return _.element({...parts$4.indicator.attrs,dir:C("dir"),"aria-hidden":!0,"data-state":L?"open":"closed","data-disabled":dataAttr$1(B),"data-invalid":dataAttr$1(U),"data-readonly":dataAttr$1(V)})},getItemProps(se){const ne=ie(se);return _.element({id:getItemId(A,ne.value),role:"option",...parts$4.item.attrs,dir:C("dir"),"data-value":ne.value,"aria-selected":ne.selected,"data-state":ne.selected?"checked":"unchecked","data-highlighted":dataAttr$1(ne.highlighted),"data-disabled":dataAttr$1(ne.disabled),"aria-disabled":ariaAttr(ne.disabled),onPointerMove(oe){ne.disabled||oe.pointerType!=="mouse"||ne.value!==W&&F({type:"ITEM.POINTER_MOVE",value:ne.value})},onClick(oe){oe.defaultPrevented||ne.disabled||F({type:"ITEM.CLICK",src:"pointerup",value:ne.value})},onPointerLeave(oe){var he;ne.disabled||se.persistFocus||oe.pointerType!=="mouse"||!((he=T.event.previous())!=null&&he.type.includes("POINTER"))||F({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(se){const ne=ie(se);return _.element({...parts$4.itemText.attrs,"data-state":ne.selected?"checked":"unchecked","data-disabled":dataAttr$1(ne.disabled),"data-highlighted":dataAttr$1(ne.highlighted)})},getItemIndicatorProps(se){const ne=ie(se);return _.element({"aria-hidden":!0,...parts$4.itemIndicator.attrs,"data-state":ne.selected?"checked":"unchecked",hidden:!ne.selected})},getItemGroupLabelProps(se){const{htmlFor:ne}=se;return _.element({...parts$4.itemGroupLabel.attrs,id:getItemGroupLabelId(A,ne),dir:C("dir"),role:"presentation"})},getItemGroupProps(se){const{id:ne}=se;return _.element({...parts$4.itemGroup.attrs,"data-disabled":dataAttr$1(B),id:getItemGroupId(A,ne),"aria-labelledby":getItemGroupLabelId(A,ne),role:"group",dir:C("dir")})},getClearTriggerProps(){return _.button({...parts$4.clearTrigger.attrs,id:getClearTriggerId(A),type:"button","aria-label":"Clear value","data-invalid":dataAttr$1(U),disabled:B,hidden:!I("hasSelectedItems"),dir:C("dir"),onClick(se){se.defaultPrevented||F({type:"CLEAR.CLICK"})}})},getHiddenSelectProps(){const se=E.get("value"),ne=C("multiple")?se:se==null?void 0:se[0];return _.select({name:C("name"),form:C("form"),disabled:B,multiple:C("multiple"),required:C("required"),"aria-hidden":!0,id:getHiddenSelectId(A),defaultValue:ne,style:visuallyHiddenStyle,tabIndex:-1,onFocus(){var oe;(oe=getTriggerEl$2(A))==null||oe.focus({preventScroll:!0})},"aria-labelledby":getLabelId$1(A)})},getPositionerProps(){return _.element({...parts$4.positioner.attrs,dir:C("dir"),id:getPositionerId$1(A),style:re.floating})},getContentProps(){return _.element({hidden:!L,dir:C("dir"),id:getContentId$2(A),role:D?"listbox":"dialog",...parts$4.content.attrs,"data-state":L?"open":"closed","data-placement":K,"data-activedescendant":J,"aria-activedescendant":D?J:void 0,"aria-multiselectable":C("multiple")&&D?!0:void 0,"aria-labelledby":getLabelId$1(A),tabIndex:0,onKeyDown(se){if(!ee||!isSelfTarget(se))return;if(se.key==="Tab"&&!isValidTabEvent(se)){se.preventDefault();return}const ne={ArrowUp(){F({type:"CONTENT.ARROW_UP"})},ArrowDown(){F({type:"CONTENT.ARROW_DOWN"})},Home(){F({type:"CONTENT.HOME"})},End(){F({type:"CONTENT.END"})},Enter(){F({type:"ITEM.CLICK",src:"keydown.enter"})},Space(he){var ge;Q?F({type:"CONTENT.TYPEAHEAD",key:he.key}):(ge=ne.Enter)==null||ge.call(ne,he)}},oe=ne[getEventKey(se)];if(oe){oe(se),se.preventDefault();return}const fe=getEventTarget(se);isEditableElement(fe)||getByTypeahead.isValidEvent(se)&&(F({type:"CONTENT.TYPEAHEAD",key:se.key}),se.preventDefault())}})},getListProps(){return _.element({...parts$4.list.attrs,tabIndex:0,role:D?void 0:"listbox","aria-labelledby":getTriggerId$2(A),"aria-activedescendant":D?void 0:J,"aria-multiselectable":!D&&C("multiple")?!0:void 0})}}}var{and:and$1,not:not$4,or}=createGuards(),machine$4={props({props:T}){return{loopFocus:!1,closeOnSelect:!T.multiple,composite:!0,defaultValue:[],...T,collection:T.collection??collection.empty(),positioning:{placement:"bottom-start",gutter:8,...T.positioning}}},context({prop:T,bindable:_}){return{value:_(()=>({defaultValue:T("defaultValue"),value:T("value"),isEqual,onChange(E){var A;const C=T("collection").findMany(E);return(A=T("onValueChange"))==null?void 0:A({value:E,items:C})}})),highlightedValue:_(()=>({defaultValue:T("defaultHighlightedValue")||null,value:T("highlightedValue"),onChange(E){var C;(C=T("onHighlightChange"))==null||C({highlightedValue:E,highlightedItem:T("collection").find(E),highlightedIndex:T("collection").indexOf(E)})}})),currentPlacement:_(()=>({defaultValue:void 0})),fieldsetDisabled:_(()=>({defaultValue:!1})),highlightedItem:_(()=>({defaultValue:null})),selectedItems:_(()=>{const E=T("value")??T("defaultValue")??[];return{defaultValue:T("collection").findMany(E)}}),valueAsString:_(()=>{const E=T("value")??T("defaultValue")??[];return{defaultValue:T("collection").stringifyMany(E)}})}},refs(){return{typeahead:{...getByTypeahead.defaultOptions}}},computed:{hasSelectedItems:({context:T})=>T.get("value").length>0,isTypingAhead:({refs:T})=>T.get("typeahead").keysSoFar!=="",isDisabled:({prop:T,context:_})=>!!T("disabled")||!!_.get("fieldsetDisabled"),isInteractive:({prop:T})=>!(T("disabled")||T("readOnly"))},initialState({prop:T}){return T("open")||T("defaultOpen")?"open":"idle"},entry:["syncSelectElement"],watch({context:T,prop:_,track:E,action:C}){E([()=>T.get("value").toString()],()=>{C(["syncSelectedItems","syncSelectElement","dispatchChangeEvent"])}),E([()=>_("open")],()=>{C(["toggleVisibility"])}),E([()=>T.get("highlightedValue")],()=>{C(["syncHighlightedItem"])}),E([()=>_("collection").toString()],()=>{C(["syncCollection"])})},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]}},effects:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:or("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:and$1(not$4("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:not$4("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:and$1(not$4("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:not$4("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:not$4("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:not$4("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:not$4("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],effects:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":{target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:and$1("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:and$1("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:and$1("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{loop:({prop:T})=>!!T("loopFocus"),multiple:({prop:T})=>!!T("multiple"),hasSelectedItems:({computed:T})=>!!T("hasSelectedItems"),hasHighlightedItem:({context:T})=>T.get("highlightedValue")!=null,isFirstItemHighlighted:({context:T,prop:_})=>T.get("highlightedValue")===_("collection").firstValue,isLastItemHighlighted:({context:T,prop:_})=>T.get("highlightedValue")===_("collection").lastValue,closeOnSelect:({prop:T,event:_})=>!!(_.closeOnSelect??T("closeOnSelect")),isOpenControlled:({prop:T})=>T("open")!==void 0,isTriggerClickEvent:({event:T})=>{var _;return((_=T.previousEvent)==null?void 0:_.type)==="TRIGGER.CLICK"},isTriggerEnterEvent:({event:T})=>{var _;return((_=T.previousEvent)==null?void 0:_.type)==="TRIGGER.ENTER"},isTriggerArrowUpEvent:({event:T})=>{var _;return((_=T.previousEvent)==null?void 0:_.type)==="TRIGGER.ARROW_UP"},isTriggerArrowDownEvent:({event:T})=>{var _;return((_=T.previousEvent)==null?void 0:_.type)==="TRIGGER.ARROW_DOWN"}},effects:{trackFormControlState({context:T,scope:_}){return trackFormControl(getHiddenSelectEl(_),{onFieldsetDisabledChange(E){T.set("fieldsetDisabled",E)},onFormReset(){const E=T.initial("value");T.set("value",E)}})},trackDismissableElement({scope:T,send:_,prop:E}){const C=()=>getContentEl$1(T);let A=!0;return trackDismissableElement(C,{defer:!0,exclude:[getTriggerEl$2(T),getClearTriggerEl(T)],onFocusOutside:E("onFocusOutside"),onPointerDownOutside:E("onPointerDownOutside"),onInteractOutside(R){var I;(I=E("onInteractOutside"))==null||I(R),A=!(R.detail.focusable||R.detail.contextmenu)},onDismiss(){_({type:"CLOSE",src:"interact-outside",restoreFocus:A})}})},computePlacement({context:T,prop:_,scope:E}){const C=_("positioning");return T.set("currentPlacement",C.placement),getPlacement(()=>getTriggerEl$2(E),()=>getPositionerEl$1(E),{defer:!0,...C,onComplete(I){T.set("currentPlacement",I.placement)}})},scrollToHighlightedItem({context:T,prop:_,scope:E,event:C}){const A=I=>{const F=T.get("highlightedValue");if(F==null||C.current().type.includes("POINTER"))return;const B=getItemEl(E,F),U=getContentEl$1(E),V=_("scrollToIndexFn");if(V){const D=_("collection").indexOf(F);V==null||V({index:D,immediate:I});return}scrollIntoView(B,{rootEl:U,block:"nearest"})};return raf$1(()=>A(!0)),observeAttributes(()=>getContentEl$1(E),{defer:!0,attributes:["data-activedescendant"],callback(){A(!1)}})}},actions:{reposition({context:T,prop:_,scope:E,event:C}){const A=()=>getPositionerEl$1(E);getPlacement(getTriggerEl$2(E),A,{..._("positioning"),...C.options,defer:!0,listeners:!1,onComplete(R){T.set("currentPlacement",R.placement)}})},toggleVisibility({send:T,prop:_,event:E}){T({type:_("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:E})},highlightPreviousItem({context:T,prop:_}){const E=T.get("highlightedValue");if(E==null)return;const C=_("collection").getPreviousValue(E,1,_("loopFocus"));T.set("highlightedValue",C)},highlightNextItem({context:T,prop:_}){const E=T.get("highlightedValue");if(E==null)return;const C=_("collection").getNextValue(E,1,_("loopFocus"));T.set("highlightedValue",C)},highlightFirstItem({context:T,prop:_}){const E=_("collection").firstValue;T.set("highlightedValue",E)},highlightLastItem({context:T,prop:_}){const E=_("collection").lastValue;T.set("highlightedValue",E)},setInitialFocus({scope:T}){raf$1(()=>{const _=getInitialFocus({root:getContentEl$1(T)});_==null||_.focus({preventScroll:!0})})},focusTriggerEl({event:T,scope:_}){var C;const E=T.restoreFocus??((C=T.previousEvent)==null?void 0:C.restoreFocus);E!=null&&!E||raf$1(()=>{const A=getTriggerEl$2(_);A==null||A.focus({preventScroll:!0})})},selectHighlightedItem({context:T,prop:_,event:E}){let C=E.value??T.get("highlightedValue");if(C==null)return;C=_("deselectable")&&!_("multiple")&&T.get("value").includes(C)?null:C,T.set("value",R=>C==null?[]:_("multiple")?addOrRemove(R,C):[C])},highlightComputedFirstItem({context:T,prop:_,computed:E}){const C=_("collection"),A=E("hasSelectedItems")?C.sort(T.get("value"))[0]:C.firstValue;T.set("highlightedValue",A)},highlightComputedLastItem({context:T,prop:_,computed:E}){const C=_("collection"),A=E("hasSelectedItems")?C.sort(T.get("value"))[0]:C.lastValue;T.set("highlightedValue",A)},highlightFirstSelectedItem({context:T,prop:_,computed:E}){if(!E("hasSelectedItems"))return;const C=_("collection").sort(T.get("value"))[0];T.set("highlightedValue",C)},highlightItem({context:T,event:_}){T.set("highlightedValue",_.value)},highlightMatchingItem({context:T,prop:_,event:E,refs:C}){const A=_("collection").search(E.key,{state:C.get("typeahead"),currentValue:T.get("highlightedValue")});A!=null&&T.set("highlightedValue",A)},setHighlightedItem({context:T,event:_}){T.set("highlightedValue",_.value)},clearHighlightedItem({context:T}){T.set("highlightedValue",null)},selectItem({context:T,prop:_,event:E}){const A=_("deselectable")&&!_("multiple")&&T.get("value").includes(E.value)?null:E.value;T.set("value",R=>A==null?[]:_("multiple")?addOrRemove(R,A):[A])},clearItem({context:T,event:_}){T.set("value",E=>E.filter(C=>C!==_.value))},setSelectedItems({context:T,event:_}){T.set("value",_.value)},clearSelectedItems({context:T}){T.set("value",[])},selectPreviousItem({context:T,prop:_}){const[E]=T.get("value"),C=_("collection").getPreviousValue(E);C&&T.set("value",[C])},selectNextItem({context:T,prop:_}){const[E]=T.get("value"),C=_("collection").getNextValue(E);C&&T.set("value",[C])},selectFirstItem({context:T,prop:_}){const E=_("collection").firstValue;E&&T.set("value",[E])},selectLastItem({context:T,prop:_}){const E=_("collection").lastValue;E&&T.set("value",[E])},selectMatchingItem({context:T,prop:_,event:E,refs:C}){const A=_("collection").search(E.key,{state:C.get("typeahead"),currentValue:T.get("value")[0]});A!=null&&T.set("value",[A])},scrollContentToTop({prop:T,scope:_}){var E,C;T("scrollToIndexFn")?(E=T("scrollToIndexFn"))==null||E({index:0,immediate:!0}):(C=getContentEl$1(_))==null||C.scrollTo(0,0)},invokeOnOpen({prop:T}){var _;(_=T("onOpenChange"))==null||_({open:!0})},invokeOnClose({prop:T}){var _;(_=T("onOpenChange"))==null||_({open:!1})},syncSelectElement({context:T,prop:_,scope:E}){const C=getHiddenSelectEl(E);if(C){if(T.get("value").length===0&&!_("multiple")){C.selectedIndex=-1;return}for(const A of C.options)A.selected=T.get("value").includes(A.value)}},syncCollection({context:T,prop:_}){const E=_("collection"),C=E.find(T.get("highlightedValue"));C&&T.set("highlightedItem",C);const A=E.findMany(T.get("value"));T.set("selectedItems",A);const R=E.stringifyItems(A);T.set("valueAsString",R)},syncSelectedItems({context:T,prop:_}){const E=_("collection"),C=T.get("selectedItems"),R=T.get("value").map(I=>C.find(B=>E.getItemValue(B)===I)||E.find(I));T.set("selectedItems",R),T.set("valueAsString",E.stringifyItems(R))},syncHighlightedItem({context:T,prop:_}){const E=_("collection"),C=T.get("highlightedValue"),A=C?E.find(C):null;T.set("highlightedItem",A)},dispatchChangeEvent({scope:T}){queueMicrotask(()=>{const _=getHiddenSelectEl(T);if(!_)return;const E=T.getWin(),C=new E.Event("change",{bubbles:!0,composed:!0});_.dispatchEvent(C)})}}}};createProps$1()(["closeOnSelect","collection","dir","disabled","deselectable","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","defaultOpen","open","composite","positioning","required","readOnly","scrollToIndexFn","value","defaultValue","defaultHighlightedValue"]);createProps$1()(["item","persistFocus"]);createProps$1()(["id"]);createProps$1()(["htmlFor"]);const useSelect=T=>{const _=reactExports.useId(),{dir:E}=useLocaleContext(),{getRootNode:C}=useEnvironmentContext(),A=useFieldContext(),R={id:_,ids:{label:A==null?void 0:A.ids.label,hiddenSelect:A==null?void 0:A.ids.control},disabled:A==null?void 0:A.disabled,readOnly:A==null?void 0:A.readOnly,invalid:A==null?void 0:A.invalid,required:A==null?void 0:A.required,dir:E,getRootNode:C,...T},I=useMachine(machine$4,R);return connect$4(I,normalizeProps)},SelectImpl$1=(T,_)=>{const[E,C]=splitPresenceProps(T),[A,R]=createSplitProps()(C,["closeOnSelect","collection","composite","defaultHighlightedValue","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),I=useSelect(A),F=usePresence(mergeProps({present:I.open},E)),B=mergeProps(I.getRootProps(),R);return jsxRuntimeExports.jsx(SelectProvider,{value:I,children:jsxRuntimeExports.jsx(PresenceProvider,{value:F,children:jsxRuntimeExports.jsx(ark.div,{...B,ref:_})})})},SelectRoot$2=reactExports.forwardRef(SelectImpl$1),SelectImpl=(T,_)=>{const[E,C]=splitPresenceProps(T),[{value:A},R]=createSplitProps()(C,["value"]),I=usePresence(mergeProps({present:A.open},E)),F=mergeProps(A.getRootProps(),R);return jsxRuntimeExports.jsx(SelectProvider,{value:A,children:jsxRuntimeExports.jsx(PresenceProvider,{value:I,children:jsxRuntimeExports.jsx(ark.div,{...F,ref:_})})})},SelectRootProvider=reactExports.forwardRef(SelectImpl),SelectTrigger$2=reactExports.forwardRef((T,_)=>{const E=useSelectContext(),C=mergeProps(E.getTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});SelectTrigger$2.displayName="SelectTrigger";const SelectValueText$2=reactExports.forwardRef((T,_)=>{const{children:E,placeholder:C,...A}=T,R=useSelectContext(),I=mergeProps(R.getValueTextProps(),A);return jsxRuntimeExports.jsx(ark.span,{...I,ref:_,children:E||R.valueAsString||C})});SelectValueText$2.displayName="SelectValueText";var anatomy$4=createAnatomy("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator");anatomy$4.build();createProps$1()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value","defaultValue"]);createProps$1()(["index","name"]);const[SwitchProvider,useSwitchContext]=createContext({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),SwitchControl$1=reactExports.forwardRef((T,_)=>{const E=useSwitchContext(),C=mergeProps(E.getControlProps(),T);return jsxRuntimeExports.jsx(ark.span,{...C,ref:_})});SwitchControl$1.displayName="SwitchControl";const SwitchHiddenInput$1=reactExports.forwardRef((T,_)=>{const E=useSwitchContext(),C=mergeProps(E.getHiddenInputProps(),T),A=useFieldContext();return jsxRuntimeExports.jsx(ark.input,{"aria-describedby":A==null?void 0:A.ariaDescribedby,...C,ref:_})});SwitchHiddenInput$1.displayName="SwitchHiddenInput";const SwitchLabel$1=reactExports.forwardRef((T,_)=>{const E=useSwitchContext(),C=mergeProps(E.getLabelProps(),T);return jsxRuntimeExports.jsx(ark.span,{...C,ref:_})});SwitchLabel$1.displayName="SwitchLabel";var anatomy$3=createAnatomy("switch").parts("root","label","control","thumb"),parts$3=anatomy$3.build(),getRootId$2=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`switch:${T.id}`},getLabelId=T=>{var _;return((_=T.ids)==null?void 0:_.label)??`switch:${T.id}:label`},getThumbId=T=>{var _;return((_=T.ids)==null?void 0:_.thumb)??`switch:${T.id}:thumb`},getControlId=T=>{var _;return((_=T.ids)==null?void 0:_.control)??`switch:${T.id}:control`},getHiddenInputId=T=>{var _;return((_=T.ids)==null?void 0:_.hiddenInput)??`switch:${T.id}:input`},getRootEl$1=T=>T.getById(getRootId$2(T)),getHiddenInputEl=T=>T.getById(getHiddenInputId(T));function connect$3(T,_){const{context:E,send:C,prop:A,scope:R}=T,I=A("disabled"),F=A("readOnly"),B=!!E.get("checked"),U=!I&&E.get("focused"),V=!I&&E.get("focusVisible"),D={"data-active":dataAttr$1(E.get("active")),"data-focus":dataAttr$1(U),"data-focus-visible":dataAttr$1(V),"data-readonly":dataAttr$1(F),"data-hover":dataAttr$1(E.get("hovered")),"data-disabled":dataAttr$1(I),"data-state":B?"checked":"unchecked","data-invalid":dataAttr$1(A("invalid"))};return{checked:B,disabled:I,focused:U,setChecked(O){C({type:"CHECKED.SET",checked:O,isTrusted:!1})},toggleChecked(){C({type:"CHECKED.TOGGLE",checked:B,isTrusted:!1})},getRootProps(){return _.label({...parts$3.root.attrs,...D,dir:A("dir"),id:getRootId$2(R),htmlFor:getHiddenInputId(R),onPointerMove(){I||C({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){I||C({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(O){var z;if(I)return;getEventTarget(O)===getHiddenInputEl(R)&&O.stopPropagation(),isSafari()&&((z=getHiddenInputEl(R))==null||z.focus())}})},getLabelProps(){return _.element({...parts$3.label.attrs,...D,dir:A("dir"),id:getLabelId(R)})},getThumbProps(){return _.element({...parts$3.thumb.attrs,...D,dir:A("dir"),id:getThumbId(R),"aria-hidden":!0})},getControlProps(){return _.element({...parts$3.control.attrs,...D,dir:A("dir"),id:getControlId(R),"aria-hidden":!0})},getHiddenInputProps(){return _.input({id:getHiddenInputId(R),type:"checkbox",required:A("required"),defaultChecked:B,disabled:I,"aria-labelledby":getLabelId(R),"aria-invalid":A("invalid"),name:A("name"),form:A("form"),value:A("value"),style:visuallyHiddenStyle,onFocus(){const O=isFocusVisible();C({type:"CONTEXT.SET",context:{focused:!0,focusVisible:O}})},onBlur(){C({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(O){if(F){O.preventDefault();return}const L=O.currentTarget.checked;C({type:"CHECKED.SET",checked:L,isTrusted:!0})}})}}}var{not:not$3}=createGuards(),machine$3={props({props:T}){return{defaultChecked:!1,label:"switch",value:"on",...T}},initialState(){return"ready"},context({prop:T,bindable:_}){return{checked:_(()=>({defaultValue:T("defaultChecked"),value:T("checked"),onChange(E){var C;(C=T("onCheckedChange"))==null||C({checked:E})}})),fieldsetDisabled:_(()=>({defaultValue:!1})),focusVisible:_(()=>({defaultValue:!1})),active:_(()=>({defaultValue:!1})),focused:_(()=>({defaultValue:!1})),hovered:_(()=>({defaultValue:!1}))}},computed:{isDisabled:({context:T,prop:_})=>_("disabled")||T.get("fieldsetDisabled")},watch({track:T,prop:_,context:E,action:C}){T([()=>_("disabled")],()=>{C(["removeFocusIfNeeded"])}),T([()=>E.get("checked")],()=>{C(["syncInputElement"])})},effects:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:not$3("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:not$3("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}},implementations:{guards:{isTrusted:({event:T})=>!!T.isTrusted},effects:{trackPressEvent({computed:T,scope:_,context:E}){if(!T("isDisabled"))return trackPress({pointerNode:getRootEl$1(_),keyboardNode:getHiddenInputEl(_),isValidKey:C=>C.key===" ",onPress:()=>E.set("active",!1),onPressStart:()=>E.set("active",!0),onPressEnd:()=>E.set("active",!1)})},trackFocusVisible({computed:T,scope:_}){if(!T("isDisabled"))return trackFocusVisible({root:_.getRootNode()})},trackFormControlState({context:T,send:_,scope:E}){return trackFormControl(getHiddenInputEl(E),{onFieldsetDisabledChange(C){T.set("fieldsetDisabled",C)},onFormReset(){const C=T.initial("checked");_({type:"CHECKED.SET",checked:!!C,src:"form-reset"})}})}},actions:{setContext({context:T,event:_}){for(const E in _.context)T.set(E,_.context[E])},syncInputElement({context:T,scope:_}){const E=getHiddenInputEl(_);E&&setElementChecked(E,!!T.get("checked"))},removeFocusIfNeeded({context:T,prop:_}){_("disabled")&&T.set("focused",!1)},setChecked({context:T,event:_}){T.set("checked",_.checked)},toggleChecked({context:T}){T.set("checked",!T.get("checked"))},dispatchChangeEvent({context:T,scope:_}){const E=getHiddenInputEl(_);dispatchInputCheckedEvent(E,{checked:T.get("checked")})}}}};createProps$1()(["checked","defaultChecked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);const useSwitch=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),{dir:C}=useLocaleContext(),A=useFieldContext(),R={id:_,ids:{label:A==null?void 0:A.ids.label,hiddenInput:A==null?void 0:A.ids.control},dir:C,disabled:A==null?void 0:A.disabled,readOnly:A==null?void 0:A.readOnly,invalid:A==null?void 0:A.invalid,required:A==null?void 0:A.required,getRootNode:E,...T},I=useMachine(machine$3,R);return connect$3(I,normalizeProps)},SwitchRoot$1=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),A=useSwitch(E),R=mergeProps(A.getRootProps(),C);return jsxRuntimeExports.jsx(SwitchProvider,{value:A,children:jsxRuntimeExports.jsx(ark.label,{...R,ref:_})})});SwitchRoot$1.displayName="SwitchRoot";const SwitchRootProvider=reactExports.forwardRef((T,_)=>{const[{value:E},C]=createSplitProps()(T,["value"]),A=mergeProps(E.getRootProps(),C);return jsxRuntimeExports.jsx(SwitchProvider,{value:E,children:jsxRuntimeExports.jsx(ark.label,{...A,ref:_})})});SwitchRootProvider.displayName="SwitchRootProvider";const SwitchThumb$1=reactExports.forwardRef((T,_)=>{const E=useSwitchContext(),C=mergeProps(E.getThumbProps(),T);return jsxRuntimeExports.jsx(ark.span,{...C,ref:_})});SwitchThumb$1.displayName="SwitchThumb";function useDebounce(T,_){const[E,C]=reactExports.useState(T);return reactExports.useEffect(()=>{const A=setTimeout(()=>{C(T)},_);return()=>{clearTimeout(A)}},[T,_]),E}const[TabsProvider,useTabsContext]=createContext({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),TabContent=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["value"]),A=useTabsContext(),R=useRenderStrategyPropsContext(),I=usePresence({...R,present:useDebounce(A.value===T.value,0),immediate:!0}),F=mergeProps(A.getContentProps(E),I.getPresenceProps(),C);return jsxRuntimeExports.jsx(PresenceProvider,{value:I,children:I.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...F,ref:composeRefs(I.ref,_)})})});TabContent.displayName="TabContent";const TabIndicator=reactExports.forwardRef((T,_)=>{const E=useTabsContext(),C=mergeProps(E.getIndicatorProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});TabIndicator.displayName="TabIndicator";const TabList=reactExports.forwardRef((T,_)=>{const E=useTabsContext(),C=mergeProps(E.getListProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});TabList.displayName="TabList";const TabTrigger=reactExports.forwardRef((T,_)=>{const[E,C]=createSplitProps()(T,["disabled","value"]),A=useTabsContext(),R=mergeProps(A.getTriggerProps(E),C);return jsxRuntimeExports.jsx(ark.button,{...R,ref:_})});TabTrigger.displayName="TabTrigger";var anatomy$2=createAnatomy("tabs").parts("root","list","trigger","content","indicator"),parts$2=anatomy$2.build(),getRootId$1=T=>{var _;return((_=T.ids)==null?void 0:_.root)??`tabs:${T.id}`},getListId=T=>{var _;return((_=T.ids)==null?void 0:_.list)??`tabs:${T.id}:list`},getContentId$1=(T,_)=>{var E;return((E=T.ids)==null?void 0:E.content)??`tabs:${T.id}:content-${_}`},getTriggerId$1=(T,_)=>{var E;return((E=T.ids)==null?void 0:E.trigger)??`tabs:${T.id}:trigger-${_}`},getIndicatorId=T=>{var _;return((_=T.ids)==null?void 0:_.indicator)??`tabs:${T.id}:indicator`},getListEl=T=>T.getById(getListId(T)),getContentEl=(T,_)=>T.getById(getContentId$1(T,_)),getTriggerEl$1=(T,_)=>T.getById(getTriggerId$1(T,_)),getIndicatorEl=T=>T.getById(getIndicatorId(T)),getElements=T=>{const E=`[role=tab][data-ownedby='${CSS.escape(getListId(T))}']:not([disabled])`;return queryAll(getListEl(T),E)},getFirstTriggerEl=T=>first(getElements(T)),getLastTriggerEl=T=>last(getElements(T)),getNextTriggerEl=(T,_)=>nextById(getElements(T),getTriggerId$1(T,_.value),_.loopFocus),getPrevTriggerEl=(T,_)=>prevById(getElements(T),getTriggerId$1(T,_.value),_.loopFocus),getOffsetRect=T=>({left:(T==null?void 0:T.offsetLeft)??0,top:(T==null?void 0:T.offsetTop)??0,width:(T==null?void 0:T.offsetWidth)??0,height:(T==null?void 0:T.offsetHeight)??0}),getRectById=(T,_)=>{const E=itemById(getElements(T),getTriggerId$1(T,_));return resolveRect(getOffsetRect(E))},resolveRect=T=>({width:`${T.width}px`,height:`${T.height}px`,left:`${T.left}px`,top:`${T.top}px`});function connect$2(T,_){const{state:E,send:C,context:A,prop:R,scope:I}=T,F=R("translations"),B=E.matches("focused"),U=R("orientation")==="vertical",V=R("orientation")==="horizontal",D=R("composite");function O(L){return{selected:A.get("value")===L.value,focused:A.get("focusedValue")===L.value,disabled:!!L.disabled}}return{value:A.get("value"),focusedValue:A.get("focusedValue"),setValue(L){C({type:"SET_VALUE",value:L})},clearValue(){C({type:"CLEAR_VALUE"})},setIndicatorRect(L){const z=getTriggerId$1(I,L);C({type:"SET_INDICATOR_RECT",id:z})},syncTabIndex(){C({type:"SYNC_TAB_INDEX"})},selectNext(L){C({type:"TAB_FOCUS",value:L,src:"selectNext"}),C({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(L){C({type:"TAB_FOCUS",value:L,src:"selectPrev"}),C({type:"ARROW_PREV",src:"selectPrev"})},focus(){var z;const L=A.get("value");L&&((z=getTriggerEl$1(I,L))==null||z.focus())},getRootProps(){return _.element({...parts$2.root.attrs,id:getRootId$1(I),"data-orientation":R("orientation"),"data-focus":dataAttr$1(B),dir:R("dir")})},getListProps(){return _.element({...parts$2.list.attrs,id:getListId(I),role:"tablist",dir:R("dir"),"data-focus":dataAttr$1(B),"aria-orientation":R("orientation"),"data-orientation":R("orientation"),"aria-label":F==null?void 0:F.listLabel,onKeyDown(L){if(L.defaultPrevented||!isSelfTarget(L)||isComposingEvent(L))return;const z={ArrowDown(){V||C({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){V||C({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){U||C({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){U||C({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){C({type:"HOME"})},End(){C({type:"END"})},Enter(){C({type:"ENTER"})}};let W=getEventKey(L,{dir:R("dir"),orientation:R("orientation")});const X=z[W];X&&(L.preventDefault(),X(L))}})},getTriggerState:O,getTriggerProps(L){const{value:z,disabled:W}=L,X=O(L);return _.button({...parts$2.trigger.attrs,role:"tab",type:"button",disabled:W,dir:R("dir"),"data-orientation":R("orientation"),"data-disabled":dataAttr$1(W),"aria-disabled":W,"data-value":z,"aria-selected":X.selected,"data-selected":dataAttr$1(X.selected),"data-focus":dataAttr$1(X.focused),"aria-controls":X.selected?getContentId$1(I,z):void 0,"data-ownedby":getListId(I),"data-ssr":dataAttr$1(A.get("ssr")),id:getTriggerId$1(I,z),tabIndex:X.selected&&D?0:-1,onFocus(){C({type:"TAB_FOCUS",value:z})},onBlur(Y){const K=Y.relatedTarget;(K==null?void 0:K.getAttribute("role"))!=="tab"&&C({type:"TAB_BLUR"})},onClick(Y){Y.defaultPrevented||W||(isSafari()&&Y.currentTarget.focus(),C({type:"TAB_CLICK",value:z}))}})},getContentProps(L){const{value:z}=L,W=A.get("value")===z;return _.element({...parts$2.content.attrs,dir:R("dir"),id:getContentId$1(I,z),tabIndex:D?0:-1,"aria-labelledby":getTriggerId$1(I,z),role:"tabpanel","data-ownedby":getListId(I),"data-selected":dataAttr$1(W),"data-orientation":R("orientation"),hidden:!W})},getIndicatorProps(){const L=A.get("indicatorRect"),z=A.get("indicatorTransition");return _.element({id:getIndicatorId(I),...parts$2.indicator.attrs,dir:R("dir"),"data-orientation":R("orientation"),style:{"--transition-property":"left, right, top, bottom, width, height","--left":L.left,"--top":L.top,"--width":L.width,"--height":L.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:z?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[V?"left":"top"]:V?"var(--left)":"var(--top)"}})}}}var{not:not$2}=createGuards(),machine$2={props({props:T}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(_){clickIfLink(_.node)},defaultValue:null,...T}},initialState(){return"idle"},context({prop:T,bindable:_}){return{value:_(()=>({defaultValue:T("defaultValue"),value:T("value"),onChange(E){var C;(C=T("onValueChange"))==null||C({value:E})}})),focusedValue:_(()=>({defaultValue:T("value")||T("defaultValue"),sync:!0,onChange(E){var C;(C=T("onFocusChange"))==null||C({focusedValue:E})}})),ssr:_(()=>({defaultValue:!0})),indicatorTransition:_(()=>({defaultValue:!1})),indicatorRect:_(()=>({defaultValue:{left:"0px",top:"0px",width:"0px",height:"0px"}}))}},watch({context:T,prop:_,track:E,action:C}){E([()=>T.get("value")],()=>{C(["allowIndicatorTransition","syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),E([()=>_("dir"),()=>_("orientation")],()=>{C(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],ENTER:{guard:not$2("selectOnFocus"),actions:["selectFocusedTab"]},TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:T})=>T("activationMode")==="automatic"},actions:{selectFocusedTab({context:T,prop:_}){raf$1(()=>{const E=T.get("focusedValue");if(!E)return;const A=_("deselectable")&&T.get("value")===E?null:E;T.set("value",A)})},setFocusedValue({context:T,event:_,flush:E}){_.value!=null&&E(()=>{T.set("focusedValue",_.value)})},clearFocusedValue({context:T}){T.set("focusedValue",null)},setValue({context:T,event:_,prop:E}){const C=E("deselectable")&&T.get("value")===T.get("focusedValue");T.set("value",C?null:_.value)},clearValue({context:T}){T.set("value",null)},focusFirstTab({scope:T}){raf$1(()=>{var _;(_=getFirstTriggerEl(T))==null||_.focus()})},focusLastTab({scope:T}){raf$1(()=>{var _;(_=getLastTriggerEl(T))==null||_.focus()})},focusNextTab({context:T,prop:_,scope:E,event:C}){const A=C.value??T.get("focusedValue");if(!A)return;const R=getNextTriggerEl(E,{value:A,loopFocus:_("loopFocus")});raf$1(()=>{_("composite")?R==null||R.focus():(R==null?void 0:R.dataset.value)!=null&&T.set("focusedValue",R.dataset.value)})},focusPrevTab({context:T,prop:_,scope:E,event:C}){const A=C.value??T.get("focusedValue");if(!A)return;const R=getPrevTriggerEl(E,{value:A,loopFocus:_("loopFocus")});raf$1(()=>{_("composite")?R==null||R.focus():(R==null?void 0:R.dataset.value)!=null&&T.set("focusedValue",R.dataset.value)})},syncTabIndex({context:T,scope:_}){raf$1(()=>{const E=T.get("value");if(!E)return;const C=getContentEl(_,E);if(!C)return;getFocusables(C).length>0?C.removeAttribute("tabindex"):C.setAttribute("tabindex","0")})},cleanupObserver({refs:T}){const _=T.get("indicatorCleanup");_&&_()},allowIndicatorTransition({context:T}){T.set("indicatorTransition",!0)},setIndicatorRect({context:T,event:_,scope:E}){const C=_.id??T.get("value");if(!getIndicatorEl(E))return;if(!C){T.set("indicatorTransition",!1);return}getTriggerEl$1(E,C)&&(T.set("indicatorRect",getRectById(E,C)),nextTick(()=>{T.set("indicatorTransition",!1)}))},syncSsr({context:T}){T.set("ssr",!1)},syncIndicatorRect({context:T,refs:_,scope:E}){const C=_.get("indicatorCleanup");C&&C();const A=T.get("value");if(!A){T.set("indicatorTransition",!1);return}const R=getTriggerEl$1(E,A),I=getIndicatorEl(E);if(!R||!I)return;const F=trackElementRect([R],{measure(B){return getOffsetRect(B)},onEntry({rects:B}){const[U]=B;T.set("indicatorRect",resolveRect(U))}});_.set("indicatorCleanup",F)},navigateIfNeeded({context:T,prop:_,scope:E}){var R;const C=T.get("value");if(!C)return;const A=getTriggerEl$1(E,C);isAnchorElement(A)&&((R=_("navigate"))==null||R({value:C,node:A}))}}}};createProps$1()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]);createProps$1()(["disabled","value"]);createProps$1()(["value"]);const useTabs=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),{dir:C}=useLocaleContext(),A={id:_,dir:C,getRootNode:E,...T},R=useMachine(machine$2,A);return connect$2(R,normalizeProps)},TabsRoot$1=reactExports.forwardRef((T,_)=>{const[E,C]=splitRenderStrategyProps(T),[A,R]=createSplitProps()(C,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),I=useTabs(A),F=mergeProps(I.getRootProps(),R);return jsxRuntimeExports.jsx(TabsProvider,{value:I,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:E,children:jsxRuntimeExports.jsx(ark.div,{...F,ref:_})})})});TabsRoot$1.displayName="TabsRoot";const TabsRootProvider=reactExports.forwardRef((T,_)=>{const[E,C]=splitRenderStrategyProps(T),[{value:A},R]=createSplitProps()(C,["value"]),I=mergeProps(A.getRootProps(),R);return jsxRuntimeExports.jsx(TabsProvider,{value:A,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:E,children:jsxRuntimeExports.jsx(ark.div,{...I,ref:_})})})});TabsRootProvider.displayName="TabsRootProvider";var anatomy$1=createAnatomy("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),parts$1=anatomy$1.build(),getRegionId=T=>`toast-group:${T}`,getRegionEl=(T,_)=>T.getById(`toast-group:${_}`),getRootId=T=>`toast:${T.id}`,getRootEl=T=>T.getById(getRootId(T)),getTitleId=T=>`toast:${T.id}:title`,getDescriptionId=T=>`toast:${T.id}:description`,getCloseTriggerId=T=>`toast${T.id}:close`,defaultTimeouts={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function getToastDuration(T,_){return T??defaultTimeouts[_]??defaultTimeouts.DEFAULT}var getOffsets=T=>typeof T=="string"?{left:T,right:T,bottom:T,top:T}:T;function getGroupPlacementStyle(T,_){var W;const{prop:E,computed:C,context:A}=T,{offsets:R,gap:I}=E("store").attrs,F=A.get("heights"),B=getOffsets(R),U=E("dir")==="rtl",V=_.replace("-start",U?"-right":"-left").replace("-end",U?"-left":"-right"),D=V.includes("right"),O=V.includes("left"),L={position:"fixed",pointerEvents:C("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${I}px`,"--first-height":`${((W=F[0])==null?void 0:W.height)||0}px`,zIndex:MAX_Z_INDEX};let z="center";if(D&&(z="flex-end"),O&&(z="flex-start"),L.alignItems=z,V.includes("top")){const X=B.top;L.top=`max(env(safe-area-inset-top, 0px), ${X})`}if(V.includes("bottom")){const X=B.bottom;L.bottom=`max(env(safe-area-inset-bottom, 0px), ${X})`}if(!V.includes("left")){const X=B.right;L.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${X})`}if(!V.includes("right")){const X=B.left;L.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${X})`}return L}function getPlacementStyle(T,_){const{prop:E,context:C,computed:A}=T,R=E("parent"),I=R.computed("placement"),{gap:F}=R.prop("store").attrs,[B]=I.split("-"),U=C.get("mounted"),V=C.get("remainingTime"),D=A("height"),O=A("frontmost"),L=!O,z=!E("stacked"),W=E("stacked"),Y=E("type")==="loading"?Number.MAX_SAFE_INTEGER:V,K=A("heightIndex")*F+A("heightBefore"),Q={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${E("removeDelay")}ms`,"--duration":`${Y}ms`,"--initial-height":`${D}px`,"--offset":`${K}px`,"--index":E("index"),"--z-index":A("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},ee=J=>Object.assign(Q,J);return B==="top"?ee({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):B==="bottom"&&ee({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),U&&(ee({"--y":"0","--opacity":"1"}),W&&ee({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),_||ee({"--opacity":"0",pointerEvents:"none"}),L&&z&&(ee({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),_||ee({"--y":"calc(var(--sign) * 40%)"})),L&&W&&!_&&ee({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),O&&!_&&ee({"--y":"calc(var(--lift) * -100%)"}),Q}function getGhostBeforeStyle(T,_){const{computed:E}=T,C={position:"absolute",inset:"0",scale:"1 2",pointerEvents:_?"none":"auto"},A=R=>Object.assign(C,R);return E("frontmost")&&!_&&A({height:"calc(var(--initial-height) + 80%)"}),C}function getGhostAfterStyle(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function groupConnect(T,_){const{context:E,prop:C,send:A,refs:R,computed:I}=T;return{getCount(){return E.get("toasts").length},getToasts(){return E.get("toasts")},getGroupProps(F={}){const{label:B="Notifications"}=F,{hotkey:U}=C("store").attrs,V=U.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=I("placement"),[O,L="center"]=D.split("-");return _.element({...parts$1.group.attrs,dir:C("dir"),tabIndex:-1,"aria-label":`${D} ${B} ${V}`,id:getRegionId(D),"data-placement":D,"data-side":O,"data-align":L,"aria-live":"polite",role:"region",style:getGroupPlacementStyle(T,D),onMouseMove(){A({type:"REGION.POINTER_ENTER",placement:D})},onMouseLeave(){A({type:"REGION.POINTER_LEAVE",placement:D})},onFocus(z){A({type:"REGION.FOCUS",target:z.relatedTarget})},onBlur(z){R.get("isFocusWithin")&&!contains(z.currentTarget,z.relatedTarget)&&queueMicrotask(()=>A({type:"REGION.BLUR"}))}})},subscribe(F){return C("store").subscribe(()=>F(E.get("toasts")))}}}var groupMachine={props({props:T}){return{dir:"ltr",id:uuid(),...T,store:T.store}},initialState({prop:T}){return T("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,dismissableCleanup:void 0}},context({bindable:T}){return{toasts:T(()=>({defaultValue:[],sync:!0,hash:_=>_.map(E=>E.id).join(",")})),heights:T(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:T})=>T.get("toasts").length,overlap:({prop:T})=>T("store").attrs.overlap,placement:({prop:T})=>T("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:T,context:_,action:E}){T([()=>_.hash("toasts")],()=>{queueMicrotask(()=>{E(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["collapseToasts","resumeToasts","restoreLastFocusedEl"]},{target:"stack",actions:["resumeToasts","restoreLastFocusedEl"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","collapseToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:T})=>T("overlap")},effects:{subscribeToStore({context:T,prop:_}){return _("store").subscribe(E=>{if(E.dismiss){T.set("toasts",C=>C.filter(A=>A.id!==E.id));return}T.set("toasts",C=>{const A=C.findIndex(R=>R.id===E.id);return A!==-1?[...C.slice(0,A),{...C[A],...E},...C.slice(A+1)]:[E,...C]})})},trackHotKeyPress({prop:T,send:_}){return addDomEvent(document,"keydown",C=>{const{hotkey:A}=T("store").attrs;A.every(I=>C[I]||C.code===I)&&_({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:T,send:_,scope:E}){const{pauseOnPageIdle:C}=T("store").attrs;if(!C)return;const A=E.getDoc();return addDomEvent(A,"visibilitychange",()=>{const R=A.visibilityState==="hidden";_({type:R?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:T,context:_,computed:E,scope:C}){var U;const A=_.get("toasts"),R=E("placement"),I=A.length>0;if(!I){(U=T.get("dismissableCleanup"))==null||U();return}if(I&&T.get("dismissableCleanup"))return;const B=trackDismissableBranch(()=>getRegionEl(C,R),{defer:!0});T.set("dismissableCleanup",B)},clearDismissableBranch({refs:T}){var _;(_=T.get("dismissableCleanup"))==null||_()},focusRegionEl({scope:T,computed:_}){queueMicrotask(()=>{var E;(E=getRegionEl(T,_("placement")))==null||E.focus()})},pauseToasts({prop:T}){T("store").pause()},resumeToasts({prop:T}){T("store").resume()},expandToasts({prop:T}){T("store").expand()},collapseToasts({prop:T}){T("store").collapse()},removeToast({prop:T,event:_}){T("store").remove(_.id)},removeHeight({event:T,context:_}){(T==null?void 0:T.id)!=null&&queueMicrotask(()=>{_.set("heights",E=>E.filter(C=>C.id!==T.id))})},collapsedIfEmpty({send:T,computed:_}){!_("overlap")||_("count")>1||T({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:T,event:_}){T.get("isFocusWithin")||!_.target||(T.set("isFocusWithin",!0),T.set("lastFocusedEl",_.target))},restoreLastFocusedEl({refs:T}){var _;T.get("lastFocusedEl")&&((_=T.get("lastFocusedEl"))==null||_.focus({preventScroll:!0}),T.set("lastFocusedEl",null),T.set("isFocusWithin",!1))},clearLastFocusedEl({refs:T}){var _;T.get("lastFocusedEl")&&((_=T.get("lastFocusedEl"))==null||_.focus({preventScroll:!0}),T.set("lastFocusedEl",null),T.set("isFocusWithin",!1))}}}};function connect$1(T,_){const{state:E,send:C,prop:A,scope:R,context:I,computed:F}=T,B=E.hasTag("visible"),U=E.hasTag("paused"),V=I.get("mounted"),D=F("frontmost"),O=A("parent").computed("placement"),L=A("type"),z=A("stacked"),W=A("title"),X=A("description"),Y=A("action"),[K,Q="center"]=O.split("-");return{type:L,title:W,description:X,placement:O,visible:B,paused:U,closable:!!A("closable"),pause(){C({type:"PAUSE"})},resume(){C({type:"RESUME"})},dismiss(){C({type:"DISMISS",src:"programmatic"})},getRootProps(){return _.element({...parts$1.root.attrs,dir:A("dir"),id:getRootId(R),"data-state":B?"open":"closed","data-type":L,"data-placement":O,"data-align":Q,"data-side":K,"data-mounted":dataAttr$1(V),"data-paused":dataAttr$1(U),"data-first":dataAttr$1(D),"data-sibling":dataAttr$1(!D),"data-stack":dataAttr$1(z),"data-overlap":dataAttr$1(!z),role:"status","aria-atomic":"true","aria-describedby":X?getDescriptionId(R):void 0,"aria-labelledby":W?getTitleId(R):void 0,tabIndex:0,style:getPlacementStyle(T,B),onKeyDown(ee){ee.defaultPrevented||ee.key=="Escape"&&(C({type:"DISMISS",src:"keyboard"}),ee.preventDefault())}})},getGhostBeforeProps(){return _.element({"data-ghost":"before",style:getGhostBeforeStyle(T,B)})},getGhostAfterProps(){return _.element({"data-ghost":"after",style:getGhostAfterStyle()})},getTitleProps(){return _.element({...parts$1.title.attrs,id:getTitleId(R)})},getDescriptionProps(){return _.element({...parts$1.description.attrs,id:getDescriptionId(R)})},getActionTriggerProps(){return _.button({...parts$1.actionTrigger.attrs,type:"button",onClick(ee){var J;ee.defaultPrevented||((J=Y==null?void 0:Y.onClick)==null||J.call(Y),C({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return _.button({id:getCloseTriggerId(R),...parts$1.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(ee){ee.defaultPrevented||C({type:"DISMISS",src:"user"})}})}}}var{not:not$1}=createGuards(),machine$1={props({props:T}){return ensureProps(T,["id","type","parent","removeDelay"],"toast"),{closable:!0,...T,duration:getToastDuration(T.duration,T.type)}},initialState({prop:T}){return T("type")==="loading"||T("duration")===1/0?"visible:persist":"visible"},context({prop:T,bindable:_}){return{remainingTime:_(()=>({defaultValue:getToastDuration(T("duration"),T("type"))})),createdAt:_(()=>({defaultValue:Date.now()})),mounted:_(()=>({defaultValue:!1})),initialHeight:_(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:T})=>{const _=T("parent").context.get("toasts"),E=_.findIndex(C=>C.id===T("id"));return _.length-E},height:({prop:T})=>{const E=T("parent").context.get("heights").find(C=>C.id===T("id"));return(E==null?void 0:E.height)??0},heightIndex:({prop:T})=>T("parent").context.get("heights").findIndex(E=>E.id===T("id")),frontmost:({prop:T})=>T("index")===0,heightBefore:({prop:T})=>{const _=T("parent").context.get("heights"),E=_.findIndex(C=>C.id===T("id"));return _.reduce((C,A,R)=>R>=E?C:C+A.height,0)},shouldPersist:({prop:T})=>T("type")==="loading"||T("duration")===1/0},watch({track:T,prop:_,send:E}){T([()=>_("message")],()=>{const C=_("message");C&&E({type:C,src:"programmatic"})}),T([()=>_("type"),()=>_("duration")],()=>{E({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:not$1("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:T,send:_}){return setRafTimeout(()=>{_({type:"REMOVE",src:"timer"})},T("removeDelay"))},waitForDuration({send:T,context:_,computed:E}){if(!E("shouldPersist"))return setRafTimeout(()=>{T({type:"DISMISS",src:"timer"})},_.get("remainingTime"))},waitForNextTick({send:T}){return setRafTimeout(()=>{T({type:"SHOW",src:"timer"})},0)},trackHeight({scope:T,prop:_}){let E;return raf$1(()=>{const C=getRootEl(T);if(!C)return;const A=()=>{const F=C.style.height;C.style.height="auto";const B=C.getBoundingClientRect().height;C.style.height=F;const U={id:_("id"),height:B};setHeight(_("parent"),U)},R=T.getWin(),I=new R.MutationObserver(A);I.observe(C,{childList:!0,subtree:!0,characterData:!0}),E=()=>I.disconnect()}),()=>E==null?void 0:E()}},guards:{isLoadingType:({prop:T})=>T("type")==="loading",shouldPersist:({computed:T})=>T("shouldPersist")},actions:{setMounted({context:T}){raf$1(()=>{T.set("mounted",!0)})},measureHeight({scope:T,prop:_,context:E}){queueMicrotask(()=>{const C=getRootEl(T);if(!C)return;const A=C.style.height;C.style.height="auto";const R=C.getBoundingClientRect().height;C.style.height=A,E.set("initialHeight",R);const I={id:_("id"),height:R};setHeight(_("parent"),I)})},setCloseTimer({refs:T}){T.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:T,refs:_,prop:E}){_.set("closeTimerStartTime",Date.now()),T.set("remainingTime",getToastDuration(E("duration"),E("type")))},syncRemainingTime({context:T,refs:_}){T.set("remainingTime",E=>{const C=_.get("closeTimerStartTime"),A=Date.now()-C;return _.set("lastCloseStartTimerStartTime",Date.now()),E-A})},notifyParentToRemove({prop:T}){T("parent").send({type:"TOAST.REMOVE",id:T("id")})},invokeOnDismiss({prop:T,event:_}){var E;(E=T("onStatusChange"))==null||E({status:"dismissing",src:_.src})},invokeOnUnmount({prop:T}){var _;(_=T("onStatusChange"))==null||_({status:"unmounted"})},invokeOnVisible({prop:T}){var _;(_=T("onStatusChange"))==null||_({status:"visible"})}}}};function setHeight(T,_){const{id:E,height:C}=_;T.context.set("heights",A=>A.find(I=>I.id===E)?A.map(I=>I.id===E?{...I,height:C}:I):[{id:E,height:C},...A])}var withDefaults=(T,_)=>({..._,...compact(T)});function createToastStore(T){const _=withDefaults(T,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let E=[],C=[],A=new Set;const R=oe=>(E.push(oe),()=>{const fe=E.indexOf(oe);E.splice(fe,1)}),I=oe=>(E.forEach(fe=>fe(oe)),oe),F=oe=>{C.length>=_.max||(I(oe),C.unshift(oe))},B=oe=>{const fe=oe.id??`toast:${uuid()}`,he=C.find(ge=>ge.id===fe);return A.has(fe)&&A.delete(fe),he?C=C.map(ge=>ge.id===fe?I({...ge,...oe,id:fe}):ge):F({id:fe,duration:_.duration,removeDelay:_.removeDelay,type:"info",...oe,stacked:!_.overlap,gap:_.gap}),fe},U=oe=>(A.add(oe),oe?(E.forEach(fe=>fe({id:oe,dismiss:!0})),C=C.filter(fe=>fe.id!==oe)):(C.forEach(fe=>{E.forEach(he=>he({id:fe.id,dismiss:!0}))}),C=[]),oe);return{attrs:_,subscribe:R,create:B,update:(oe,fe)=>B({id:oe,...fe}),remove:U,dismiss:oe=>{oe!=null?C=C.map(fe=>fe.id===oe?I({...fe,message:"DISMISS"}):fe):C=C.map(fe=>I({...fe,message:"DISMISS"}))},error:oe=>B({...oe,type:"error"}),success:oe=>B({...oe,type:"success"}),info:oe=>B({...oe,type:"info"}),warning:oe=>B({...oe,type:"warning"}),loading:oe=>B({...oe,type:"loading"}),getVisibleToasts:()=>C.filter(oe=>!A.has(oe.id)),getCount:()=>C.length,promise:(oe,fe,he={})=>{if(!fe)return;let ge;fe.loading!==void 0&&(ge=B({...he,...fe.loading,promise:oe,type:"loading"}));let ye=ge!==void 0,we;const le=runIfFn(oe).then(async ce=>{if(we=["resolve",ce],isHttpResponse(ce)&&!ce.ok){ye=!1;const ve=runIfFn(fe.error,`HTTP Error! status: ${ce.status}`);B({...he,...ve,id:ge,type:"error"})}else if(fe.success!==void 0){ye=!1;const ve=runIfFn(fe.success,ce);B({...he,...ve,id:ge,type:"success"})}}).catch(async ce=>{if(we=["reject",ce],fe.error!==void 0){ye=!1;const ve=runIfFn(fe.error,ce);B({...he,...ve,id:ge,type:"error"})}}).finally(()=>{var ce;ye&&(U(ge),ge=void 0),(ce=fe.finally)==null||ce.call(fe)});return{id:ge,unwrap:()=>new Promise((ce,ve)=>le.then(()=>we[0]==="reject"?ve(we[1]):ce(we[1])).catch(ve))}},pause:oe=>{oe!=null?C=C.map(fe=>fe.id===oe?I({...fe,message:"PAUSE"}):fe):C=C.map(fe=>I({...fe,message:"PAUSE"}))},resume:oe=>{oe!=null?C=C.map(fe=>fe.id===oe?I({...fe,message:"RESUME"}):fe):C=C.map(fe=>I({...fe,message:"RESUME"}))},isVisible:oe=>!A.has(oe)&&!!C.find(fe=>fe.id===oe),isDismissed:oe=>A.has(oe),expand:()=>{C=C.map(oe=>I({...oe,stacked:!0}))},collapse:()=>{C=C.map(oe=>I({...oe,stacked:!1}))}}}var isHttpResponse=T=>T&&typeof T=="object"&&"ok"in T&&typeof T.ok=="boolean"&&"status"in T&&typeof T.status=="number",group={connect:groupConnect,machine:groupMachine};const createToaster=T=>createToastStore(T),[ToastProvider,useToastContext]=createContext({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),ToastActionTrigger$1=reactExports.forwardRef((T,_)=>{const E=useToastContext(),C=mergeProps(E.getActionTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});ToastActionTrigger$1.displayName="ToastActionTrigger";const ToastCloseTrigger$1=reactExports.forwardRef((T,_)=>{const E=useToastContext(),C=mergeProps(E.getCloseTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});ToastCloseTrigger$1.displayName="ToastCloseTrigger";const ToastDescription$1=reactExports.forwardRef((T,_)=>{const E=useToastContext(),C=mergeProps(E.getDescriptionProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});ToastDescription$1.displayName="ToastDescription";const ToastRoot$1=reactExports.forwardRef((T,_)=>{const E=useToastContext(),C=mergeProps(E.getRootProps(),T);return jsxRuntimeExports.jsxs("div",{...C,ref:_,children:[jsxRuntimeExports.jsx("div",{...E.getGhostBeforeProps()}),T.children,jsxRuntimeExports.jsx("div",{...E.getGhostAfterProps()})]})});ToastRoot$1.displayName="ToastRoot";const ToastTitle$1=reactExports.forwardRef((T,_)=>{const E=useToastContext(),C=mergeProps(E.getTitleProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});ToastTitle$1.displayName="ToastTitle";const Toaster$2=reactExports.forwardRef((T,_)=>{const{toaster:E,children:C,...A}=T,R=useLocaleContext(),I=useEnvironmentContext(),F=useMachine(group.machine,{store:E,id:reactExports.useId(),dir:R==null?void 0:R.dir,getRootNode:I==null?void 0:I.getRootNode}),B=group.connect(F,normalizeProps),U=mergeProps(B.getGroupProps(),A);return jsxRuntimeExports.jsx(ark.div,{...U,ref:_,children:B.getToasts().map((V,D)=>jsxRuntimeExports.jsx(ToastActor,{value:V,parent:F,index:D,children:O=>C(O)},V.id))})});Toaster$2.displayName="Toaster";const ToastActor=T=>{const _={...T.value,parent:T.parent,index:T.index},E=useMachine(machine$1,{..._}),C=connect$1(E,normalizeProps);return jsxRuntimeExports.jsx(ToastProvider,{value:C,children:T.children(T.value)})};ToastActor.displayName="ToastActor";const[TooltipProvider,useTooltipContext]=createContext({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),TooltipArrow$1=reactExports.forwardRef((T,_)=>{const E=useTooltipContext(),C=mergeProps(E.getArrowProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});TooltipArrow$1.displayName="TooltipArrow";const TooltipArrowTip$1=reactExports.forwardRef((T,_)=>{const E=useTooltipContext(),C=mergeProps(E.getArrowTipProps(),T);return jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});TooltipArrowTip$1.displayName="TooltipArrowTip";const TooltipContent$1=reactExports.forwardRef((T,_)=>{const E=useTooltipContext(),C=usePresenceContext(),A=mergeProps(E.getContentProps(),C.getPresenceProps(),T);return C.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...A,ref:composeRefs(C.ref,_)})});TooltipContent$1.displayName="TooltipContent";const TooltipPositioner$1=reactExports.forwardRef((T,_)=>{const E=useTooltipContext(),C=mergeProps(E.getPositionerProps(),T);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...C,ref:_})});TooltipPositioner$1.displayName="TooltipPositioner";const GET_ORIGINAL_SYMBOL=Symbol(),getProto$1=Object.getPrototypeOf,objectsToTrack=new WeakMap,isObjectToTrack=T=>T&&(objectsToTrack.has(T)?objectsToTrack.get(T):getProto$1(T)===Object.prototype||getProto$1(T)===Array.prototype),getUntracked=T=>isObjectToTrack(T)&&T[GET_ORIGINAL_SYMBOL]||null,markToTrack=(T,_=!0)=>{objectsToTrack.set(T,_)};function glob(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function globalRef(T,_){const E=glob();return E?(E[T]||(E[T]=_()),E[T]):_()}var refSet=globalRef("__zag__refSet",()=>new WeakSet),isReactElement=T=>typeof T=="object"&&T!==null&&"$$typeof"in T&&"props"in T,isVueElement=T=>typeof T=="object"&&T!==null&&"__v_isVNode"in T,isDOMElement=T=>typeof T=="object"&&T!==null&&"nodeType"in T&&typeof T.nodeName=="string",isElement=T=>isReactElement(T)||isVueElement(T)||isDOMElement(T),isObject=T=>T!==null&&typeof T=="object",canProxy=T=>isObject(T)&&!refSet.has(T)&&(Array.isArray(T)||!(Symbol.iterator in T))&&!isElement(T)&&!(T instanceof WeakMap)&&!(T instanceof WeakSet)&&!(T instanceof Error)&&!(T instanceof Number)&&!(T instanceof Date)&&!(T instanceof String)&&!(T instanceof RegExp)&&!(T instanceof ArrayBuffer)&&!(T instanceof Promise),proxyStateMap=globalRef("__zag__proxyStateMap",()=>new WeakMap),buildProxyFunction=(T=Object.is,_=(F,B)=>new Proxy(F,B),E=new WeakMap,C=(F,B)=>{const U=E.get(F);if((U==null?void 0:U[0])===B)return U[1];const V=Array.isArray(F)?[]:Object.create(Object.getPrototypeOf(F));return markToTrack(V,!0),E.set(F,[B,V]),Reflect.ownKeys(F).forEach(D=>{const O=Reflect.get(F,D);refSet.has(O)?(markToTrack(O,!1),V[D]=O):proxyStateMap.has(O)?V[D]=snapshot(O):V[D]=O}),Object.freeze(V)},A=new WeakMap,R=[1,1],I=F=>{if(!isObject(F))throw new Error("object required");const B=A.get(F);if(B)return B;let U=R[0];const V=new Set,D=(re,se=++R[0])=>{U!==se&&(U=se,V.forEach(ne=>ne(re,se)))};let O=R[1];const L=(re=++R[1])=>(O!==re&&!V.size&&(O=re,W.forEach(([se])=>{const ne=se[1](re);ne>U&&(U=ne)})),U),z=re=>(se,ne)=>{const oe=[...se];oe[1]=[re,...oe[1]],D(oe,ne)},W=new Map,X=(re,se)=>{if(V.size){const ne=se[3](z(re));W.set(re,[se,ne])}else W.set(re,[se])},Y=re=>{var ne;const se=W.get(re);se&&(W.delete(re),(ne=se[1])==null||ne.call(se))},K=re=>(V.add(re),V.size===1&&W.forEach(([ne,oe],fe)=>{const he=ne[3](z(fe));W.set(fe,[ne,he])}),()=>{V.delete(re),V.size===0&&W.forEach(([ne,oe],fe)=>{oe&&(oe(),W.set(fe,[ne]))})}),Q=Array.isArray(F)?[]:Object.create(Object.getPrototypeOf(F)),J=_(Q,{deleteProperty(re,se){const ne=Reflect.get(re,se);Y(se);const oe=Reflect.deleteProperty(re,se);return oe&&D(["delete",[se],ne]),oe},set(re,se,ne,oe){var ye;const fe=Reflect.has(re,se),he=Reflect.get(re,se,oe);if(fe&&(T(he,ne)||A.has(ne)&&T(he,A.get(ne))))return!0;Y(se),isObject(ne)&&(ne=getUntracked(ne)||ne);let ge=ne;if(!((ye=Object.getOwnPropertyDescriptor(re,se))!=null&&ye.set)){!proxyStateMap.has(ne)&&canProxy(ne)&&(ge=proxy(ne));const we=!refSet.has(ge)&&proxyStateMap.get(ge);we&&X(se,we)}return Reflect.set(re,se,ge,oe),D(["set",[se],ne,he]),!0}});A.set(F,J);const ie=[Q,L,C,K];return proxyStateMap.set(J,ie),Reflect.ownKeys(F).forEach(re=>{const se=Object.getOwnPropertyDescriptor(F,re);se.get||se.set?Object.defineProperty(Q,re,se):J[re]=F[re]}),J})=>[I,proxyStateMap,refSet,T,_,canProxy,E,C,A,R],[proxyFunction]=buildProxyFunction();function proxy(T={}){return proxyFunction(T)}function subscribe(T,_,E){const C=proxyStateMap.get(T);let A;const R=[],I=C[3];let F=!1;const U=I(V=>{R.push(V),A||(A=Promise.resolve().then(()=>{A=void 0,F&&_(R.splice(0))}))});return F=!0,()=>{F=!1,U()}}function snapshot(T){const _=proxyStateMap.get(T),[E,C,A]=_;return A(E,C())}var anatomy=createAnatomy("tooltip").parts("trigger","arrow","arrowTip","positioner","content"),parts=anatomy.build(),getTriggerId=T=>{var _;return((_=T.ids)==null?void 0:_.trigger)??`tooltip:${T.id}:trigger`},getContentId=T=>{var _;return((_=T.ids)==null?void 0:_.content)??`tooltip:${T.id}:content`},getArrowId=T=>{var _;return((_=T.ids)==null?void 0:_.arrow)??`tooltip:${T.id}:arrow`},getPositionerId=T=>{var _;return((_=T.ids)==null?void 0:_.positioner)??`tooltip:${T.id}:popper`},getTriggerEl=T=>T.getById(getTriggerId(T)),getPositionerEl=T=>T.getById(getPositionerId(T)),store=proxy({id:null});function connect(T,_){const{state:E,context:C,send:A,scope:R,prop:I,event:F}=T,B=I("id"),U=!!I("aria-label"),V=E.matches("open","closing"),D=getTriggerId(R),O=getContentId(R),L=I("disabled"),z=getPlacementStyles({...I("positioning"),placement:C.get("currentPlacement")});return{open:V,setOpen(W){E.matches("open","closing")!==W&&A({type:W?"open":"close"})},reposition(W={}){A({type:"positioning.set",options:W})},getTriggerProps(){return _.button({...parts.trigger.attrs,id:D,dir:I("dir"),"data-expanded":dataAttr$1(V),"data-state":V?"open":"closed","aria-describedby":V?O:void 0,onClick(W){W.defaultPrevented||L||I("closeOnClick")&&A({type:"close",src:"trigger.click"})},onFocus(W){queueMicrotask(()=>{W.defaultPrevented||L||F.src!=="trigger.pointerdown"&&isFocusVisible()&&A({type:"open",src:"trigger.focus"})})},onBlur(W){W.defaultPrevented||L||B===store.id&&A({type:"close",src:"trigger.blur"})},onPointerDown(W){W.defaultPrevented||L||I("closeOnPointerDown")&&B===store.id&&A({type:"close",src:"trigger.pointerdown"})},onPointerMove(W){W.defaultPrevented||L||W.pointerType!=="touch"&&A({type:"pointer.move"})},onPointerLeave(){L||A({type:"pointer.leave"})},onPointerCancel(){L||A({type:"pointer.leave"})}})},getArrowProps(){return _.element({id:getArrowId(R),...parts.arrow.attrs,dir:I("dir"),style:z.arrow})},getArrowTipProps(){return _.element({...parts.arrowTip.attrs,dir:I("dir"),style:z.arrowTip})},getPositionerProps(){return _.element({id:getPositionerId(R),...parts.positioner.attrs,dir:I("dir"),style:z.floating})},getContentProps(){return _.element({...parts.content.attrs,dir:I("dir"),hidden:!V,"data-state":V?"open":"closed",role:U?void 0:"tooltip",id:U?void 0:O,"data-placement":C.get("currentPlacement"),onPointerEnter(){A({type:"content.pointer.move"})},onPointerLeave(){A({type:"content.pointer.leave"})},style:{pointerEvents:I("interactive")?"auto":"none"}})}}}var{and,not}=createGuards(),machine={initialState:({prop:T})=>T("open")||T("defaultOpen")?"open":"closed",props({props:T}){return{id:"x",openDelay:1e3,closeDelay:500,closeOnPointerDown:!0,closeOnEscape:!0,interactive:!1,closeOnScroll:!0,closeOnClick:!0,disabled:!1,...T,positioning:{placement:"bottom",...T.positioning}}},effects:["trackFocusVisible","trackStore"],context:({bindable:T})=>({currentPlacement:T(()=>({defaultValue:void 0})),hasPointerMoveOpened:T(()=>({defaultValue:!1}))}),watch({track:T,action:_,prop:E}){T([()=>E("disabled")],()=>{_(["closeIfDisabled"])}),T([()=>E("open")],()=>{_(["toggleVisibility"])})},states:{closed:{entry:["clearGlobalId"],on:{"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],"pointer.leave":{actions:["clearPointerMoveOpened"]},"pointer.move":[{guard:and("noVisibleTooltip",not("hasPointerMoveOpened")),target:"opening"},{guard:not("hasPointerMoveOpened"),target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]}},opening:{effects:["trackScroll","trackPointerlockChange","waitForOpenDelay"],on:{"after.openDelay":[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"controlled.open":{target:"open"},"controlled.close":{target:"closed"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],"pointer.leave":[{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose","toggleVisibility"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],close:[{guard:"isOpenControlled",actions:["invokeOnClose","toggleVisibility"]},{target:"closed",actions:["invokeOnClose"]}]}},open:{effects:["trackEscapeKey","trackScroll","trackPointerlockChange","trackPositioning"],entry:["setGlobalId"],on:{"controlled.close":{target:"closed"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"pointer.leave":[{guard:"isVisible",target:"closing",actions:["clearPointerMoveOpened"]},{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],"content.pointer.leave":{guard:"isInteractive",target:"closing"},"positioning.set":{actions:["reposition"]}}},closing:{effects:["trackPositioning","waitForCloseDelay"],on:{"after.closeDelay":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"controlled.close":{target:"closed"},"controlled.open":{target:"open"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"pointer.move":[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen","toggleVisibility"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"content.pointer.move":{guard:"isInteractive",target:"open"},"positioning.set":{actions:["reposition"]}}}},implementations:{guards:{noVisibleTooltip:()=>store.id===null,isVisible:({prop:T})=>T("id")===store.id,isInteractive:({prop:T})=>!!T("interactive"),hasPointerMoveOpened:({context:T})=>T.get("hasPointerMoveOpened"),isOpenControlled:({prop:T})=>T("open")!==void 0},actions:{setGlobalId:({prop:T})=>{store.id=T("id")},clearGlobalId:({prop:T})=>{T("id")===store.id&&(store.id=null)},invokeOnOpen:({prop:T})=>{var _;(_=T("onOpenChange"))==null||_({open:!0})},invokeOnClose:({prop:T})=>{var _;(_=T("onOpenChange"))==null||_({open:!1})},closeIfDisabled:({prop:T,send:_})=>{T("disabled")&&_({type:"close",src:"disabled.change"})},reposition:({context:T,event:_,prop:E,scope:C})=>{if(_.type!=="positioning.set")return;const A=()=>getPositionerEl(C);return getPlacement(getTriggerEl(C),A,{...E("positioning"),..._.options,defer:!0,listeners:!1,onComplete(R){T.set("currentPlacement",R.placement)}})},toggleVisibility:({prop:T,event:_,send:E})=>{queueMicrotask(()=>{E({type:T("open")?"controlled.open":"controlled.close",previousEvent:_})})},setPointerMoveOpened:({context:T})=>{T.set("hasPointerMoveOpened",!0)},clearPointerMoveOpened:({context:T})=>{T.set("hasPointerMoveOpened",!1)}},effects:{trackFocusVisible:({scope:T})=>{var _;return trackFocusVisible({root:(_=T.getRootNode)==null?void 0:_.call(T)})},trackPositioning:({context:T,prop:_,scope:E})=>{T.get("currentPlacement")||T.set("currentPlacement",_("positioning").placement);const C=()=>getPositionerEl(E);return getPlacement(getTriggerEl(E),C,{..._("positioning"),defer:!0,onComplete(A){T.set("currentPlacement",A.placement)}})},trackPointerlockChange:({send:T,scope:_})=>{const E=_.getDoc();return addDomEvent(E,"pointerlockchange",()=>T({type:"close",src:"pointerlock:change"}),!1)},trackScroll:({send:T,prop:_,scope:E})=>{if(!_("closeOnScroll"))return;const C=getTriggerEl(E);if(!C)return;const R=getOverflowAncestors$1(C).map(I=>addDomEvent(I,"scroll",()=>{T({type:"close",src:"scroll"})},{passive:!0,capture:!0}));return()=>{R.forEach(I=>I==null?void 0:I())}},trackStore:({prop:T,send:_})=>{let E;return queueMicrotask(()=>{E=subscribe(store,()=>{store.id!==T("id")&&_({type:"close",src:"id.change"})})}),()=>E==null?void 0:E()},trackEscapeKey:({send:T,prop:_})=>_("closeOnEscape")?addDomEvent(document,"keydown",C=>{isComposingEvent(C)||C.key==="Escape"&&(C.stopPropagation(),T({type:"close",src:"keydown.escape"}))},!0):void 0,waitForOpenDelay:({send:T,prop:_})=>{const E=setTimeout(()=>{T({type:"after.openDelay"})},_("openDelay"));return()=>clearTimeout(E)},waitForCloseDelay:({send:T,prop:_})=>{const E=setTimeout(()=>{T({type:"after.closeDelay"})},_("closeDelay"));return()=>clearTimeout(E)}}}};createProps$1()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","defaultOpen","open","openDelay","positioning"]);const useTooltip=T=>{const _=reactExports.useId(),{getRootNode:E}=useEnvironmentContext(),{dir:C}=useLocaleContext(),A={id:_,dir:C,getRootNode:E,...T},R=useMachine(machine,A);return connect(R,normalizeProps)},TooltipRoot$1=T=>{const[_,{children:E,...C}]=splitPresenceProps(T),A=useTooltip(C),R=usePresence(mergeProps({present:A.open},_));return jsxRuntimeExports.jsx(TooltipProvider,{value:A,children:jsxRuntimeExports.jsx(PresenceProvider,{value:R,children:E})})},TooltipRootProvider=T=>{const[_,{value:E,children:C}]=splitPresenceProps(T),A=usePresence(mergeProps({present:E.open},_));return jsxRuntimeExports.jsx(TooltipProvider,{value:E,children:jsxRuntimeExports.jsx(PresenceProvider,{value:A,children:C})})},TooltipTrigger$1=reactExports.forwardRef((T,_)=>{const E=useTooltipContext(),C=mergeProps(E.getTriggerProps(),T);return jsxRuntimeExports.jsx(ark.button,{...C,ref:_})});TooltipTrigger$1.displayName="TooltipTrigger";function omit(T,_=[]){const E=Object.assign({},T);for(const C of _)C in E&&delete E[C];return E}const colorMix=(T,_)=>{var B;if(!T||typeof T!="string")return{invalid:!0,value:T};const[E,C]=T.split("/");if(!E||!C||E==="currentBg")return{invalid:!0,value:E};const A=_(`colors.${E}`),R=(B=_.raw(`opacity.${C}`))==null?void 0:B.value;if(!R&&isNaN(Number(C)))return{invalid:!0,value:E};const I=R?Number(R)*100+"%":`${C}%`,F=A??E;return{invalid:!1,color:F,value:`color-mix(in srgb, ${F} ${I}, transparent)`}},createColorMixTransform=T=>(_,E)=>{const C=E.utils.colorMix(_);if(C.invalid)return{[T]:_};const A="--mix-"+T;return{[A]:C.value,[T]:`var(${A}, ${C.color})`}};function clone(T){if(T===null||typeof T!="object")return T;if(Array.isArray(T))return T.map(E=>clone(E));const _=Object.create(Object.getPrototypeOf(T));for(const E of Object.keys(T))_[E]=clone(T[E]);return _}function merge(T,_){if(_==null)return T;for(const E of Object.keys(_))if(!(_[E]===void 0||E==="__proto__"))if(!isObject$3(T[E])&&isObject$3(_[E]))Object.assign(T,{[E]:_[E]});else if(T[E]&&isObject$3(_[E]))merge(T[E],_[E]);else if(Array.isArray(_[E])&&Array.isArray(T[E])){let C=0;for(;C<_[E].length;C++)isObject$3(T[E][C])&&isObject$3(_[E][C])?merge(T[E][C],_[E][C]):T[E][C]=_[E][C]}else Object.assign(T,{[E]:_[E]});return T}function mergeWith(T,..._){for(const E of _)merge(T,E);return T}const defineConditions=T=>T,defineRecipe=T=>T,defineSlotRecipe=T=>T,defineKeyframes=T=>T,defineGlobalStyles=T=>T,defineStyle=T=>T,defineTextStyles=T=>T,defineAnimationStyles=T=>T,defineLayerStyles=T=>T;function createProxy(){const T=_=>_;return new Proxy(T,{get(){return T}})}const defineTokens=createProxy(),defineSemanticTokens=createProxy(),defineConfig=T=>T,mergeConfigs=(...T)=>mergeWith({},...T.map(clone)),escRegex=/[^a-zA-Z0-9_\u0081-\uffff-]/g;function esc$1(T){return`${T}`.replace(escRegex,_=>`\\${_}`)}const dashCaseRegex=/[A-Z]/g;function dashCase(T){return T.replace(dashCaseRegex,_=>`-${_.toLowerCase()}`)}function cssVar(T,_={}){const{fallback:E="",prefix:C=""}=_,A=dashCase(["-",C,esc$1(T)].filter(Boolean).join("-"));return{var:A,ref:`var(${A}${E?`, ${E}`:""})`}}const isCssVar=T=>/^var\(--.+\)$/.test(T),wrap$1=(T,_)=>_!=null?`${T}(${_})`:_,deg=T=>{if(isCssVar(T)||T==null)return T;const _=typeof T=="string"&&!T.endsWith("deg");return typeof T=="number"||_?`${T}deg`:T},createFocusRing=T=>({values:["outside","inside","mixed","none"],transform(_,{token:E}){const C=E("colors.colorPalette.focusRing");return{inside:{"--focus-ring-color":C,[T]:{outlineOffset:"0px",outlineWidth:"var(--focus-ring-width, 1px)",outlineColor:"var(--focus-ring-color)",outlineStyle:"var(--focus-ring-style, solid)",borderColor:"var(--focus-ring-color)"}},outside:{"--focus-ring-color":C,[T]:{outlineWidth:"var(--focus-ring-width, 2px)",outlineOffset:"var(--focus-ring-offset, 2px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"var(--focus-ring-color)"}},mixed:{"--focus-ring-color":C,[T]:{outlineWidth:"var(--focus-ring-width, 3px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"color-mix(in srgb, var(--focus-ring-color), transparent 60%)",borderColor:"var(--focus-ring-color)"}},none:{"--focus-ring-color":C,[T]:{outline:"none"}}}[_]??{}}}),divideColor=createColorMixTransform("borderColor"),createTransition=T=>({transition:T,transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"}),defaultConditions=defineConditions({hover:["@media (hover: hover)","&:is(:hover, [data-hover]):not(:disabled, [data-disabled])"],active:"&:is(:active, [data-active]):not(:disabled, [data-disabled], [data-state=open])",focus:"&:is(:focus, [data-focus])",focusWithin:"&:is(:focus-within, [data-focus-within])",focusVisible:"&:is(:focus-visible, [data-focus-visible])",disabled:"&:is(:disabled, [disabled], [data-disabled], [aria-disabled=true])",visited:"&:visited",target:"&:target",readOnly:"&:is([data-readonly], [aria-readonly=true], [readonly])",readWrite:"&:read-write",empty:"&:is(:empty, [data-empty])",checked:"&:is(:checked, [data-checked], [aria-checked=true], [data-state=checked])",enabled:"&:enabled",expanded:"&:is([aria-expanded=true], [data-expanded], [data-state=expanded])",highlighted:"&[data-highlighted]",complete:"&[data-complete]",incomplete:"&[data-incomplete]",dragging:"&[data-dragging]",before:"&::before",after:"&::after",firstLetter:"&::first-letter",firstLine:"&::first-line",marker:"&::marker",selection:"&::selection",file:"&::file-selector-button",backdrop:"&::backdrop",first:"&:first-of-type",last:"&:last-of-type",notFirst:"&:not(:first-of-type)",notLast:"&:not(:last-of-type)",only:"&:only-child",even:"&:nth-of-type(even)",odd:"&:nth-of-type(odd)",peerFocus:".peer:is(:focus, [data-focus]) ~ &",peerHover:".peer:is(:hover, [data-hover]):not(:disabled, [data-disabled]) ~ &",peerActive:".peer:is(:active, [data-active]):not(:disabled, [data-disabled]) ~ &",peerFocusWithin:".peer:focus-within ~ &",peerFocusVisible:".peer:is(:focus-visible, [data-focus-visible]) ~ &",peerDisabled:".peer:is(:disabled, [disabled], [data-disabled]) ~ &",peerChecked:".peer:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) ~ &",peerInvalid:".peer:is(:invalid, [data-invalid], [aria-invalid=true]) ~ &",peerExpanded:".peer:is([aria-expanded=true], [data-expanded], [data-state=expanded]) ~ &",peerPlaceholderShown:".peer:placeholder-shown ~ &",groupFocus:".group:is(:focus, [data-focus]) &",groupHover:".group:is(:hover, [data-hover]):not(:disabled, [data-disabled]) &",groupActive:".group:is(:active, [data-active]):not(:disabled, [data-disabled]) &",groupFocusWithin:".group:focus-within &",groupFocusVisible:".group:is(:focus-visible, [data-focus-visible]) &",groupDisabled:".group:is(:disabled, [disabled], [data-disabled]) &",groupChecked:".group:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) &",groupExpanded:".group:is([aria-expanded=true], [data-expanded], [data-state=expanded]) &",groupInvalid:".group:invalid &",indeterminate:"&:is(:indeterminate, [data-indeterminate], [aria-checked=mixed], [data-state=indeterminate])",required:"&:is([data-required], [aria-required=true])",valid:"&:is([data-valid], [data-state=valid])",invalid:"&:is([data-invalid], [aria-invalid=true], [data-state=invalid])",autofill:"&:autofill",inRange:"&:is(:in-range, [data-in-range])",outOfRange:"&:is(:out-of-range, [data-outside-range])",placeholder:"&::placeholder, &[data-placeholder]",placeholderShown:"&:is(:placeholder-shown, [data-placeholder-shown])",pressed:"&:is([aria-pressed=true], [data-pressed])",selected:"&:is([aria-selected=true], [data-selected])",grabbed:"&:is([aria-grabbed=true], [data-grabbed])",underValue:"&[data-state=under-value]",overValue:"&[data-state=over-value]",atValue:"&[data-state=at-value]",default:"&:default",optional:"&:optional",open:"&:is([open], [data-open], [data-state=open])",closed:"&:is([closed], [data-closed], [data-state=closed])",fullscreen:"&is(:fullscreen, [data-fullscreen])",loading:"&:is([data-loading], [aria-busy=true])",hidden:"&:is([hidden], [data-hidden])",current:"&[data-current]",currentPage:"&[aria-current=page]",currentStep:"&[aria-current=step]",today:"&[data-today]",unavailable:"&[data-unavailable]",rangeStart:"&[data-range-start]",rangeEnd:"&[data-range-end]",now:"&[data-now]",topmost:"&[data-topmost]",motionReduce:"@media (prefers-reduced-motion: reduce)",motionSafe:"@media (prefers-reduced-motion: no-preference)",print:"@media print",landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",dark:".dark &, .dark .chakra-theme:not(.light) &",light:":root &, .light &",osDark:"@media (prefers-color-scheme: dark)",osLight:"@media (prefers-color-scheme: light)",highContrast:"@media (forced-colors: active)",lessContrast:"@media (prefers-contrast: less)",moreContrast:"@media (prefers-contrast: more)",ltr:"[dir=ltr] &",rtl:"[dir=rtl] &",scrollbar:"&::-webkit-scrollbar",scrollbarThumb:"&::-webkit-scrollbar-thumb",scrollbarTrack:"&::-webkit-scrollbar-track",horizontal:"&[data-orientation=horizontal]",vertical:"&[data-orientation=vertical]",icon:"& :where(svg)",starting:"@starting-style"}),currentBgVar=cssVar("bg-currentcolor"),isCurrentBgVar=T=>T===currentBgVar.ref||T==="currentBg",colorValues=T=>({...T("colors"),currentBg:currentBgVar}),defaultBaseConfig=defineConfig({conditions:defaultConditions,utilities:{background:{values:colorValues,shorthand:["bg"],transform(T,_){if(isCurrentBgVar(_.raw))return{background:currentBgVar.ref};const E=createColorMixTransform("background")(T,_);return{...E,[currentBgVar.var]:E==null?void 0:E.background}}},backgroundColor:{values:colorValues,shorthand:["bgColor"],transform(T,_){if(isCurrentBgVar(_.raw))return{backgroundColor:currentBgVar.ref};const E=createColorMixTransform("backgroundColor")(T,_);return{...E,[currentBgVar.var]:E==null?void 0:E.backgroundColor}}},backgroundSize:{shorthand:["bgSize"]},backgroundPosition:{shorthand:["bgPos"]},backgroundRepeat:{shorthand:["bgRepeat"]},backgroundAttachment:{shorthand:["bgAttachment"]},backgroundClip:{shorthand:["bgClip"],values:["text"],transform(T){return T==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:T}}},backgroundGradient:{shorthand:["bgGradient"],values(T){return{...T("gradients"),"to-t":"linear-gradient(to top, var(--gradient))","to-tr":"linear-gradient(to top right, var(--gradient))","to-r":"linear-gradient(to right, var(--gradient))","to-br":"linear-gradient(to bottom right, var(--gradient))","to-b":"linear-gradient(to bottom, var(--gradient))","to-bl":"linear-gradient(to bottom left, var(--gradient))","to-l":"linear-gradient(to left, var(--gradient))","to-tl":"linear-gradient(to top left, var(--gradient))"}},transform(T){return{"--gradient-stops":"var(--gradient-from), var(--gradient-to)","--gradient":"var(--gradient-via-stops, var(--gradient-stops))",backgroundImage:T}}},gradientFrom:{values:colorValues,transform:createColorMixTransform("--gradient-from")},gradientTo:{values:colorValues,transform:createColorMixTransform("--gradient-to")},gradientVia:{values:colorValues,transform(T,_){return{...createColorMixTransform("--gradient-via")(T,_),"--gradient-via-stops":"var(--gradient-from), var(--gradient-via), var(--gradient-to)"}}},backgroundImage:{values(T){return{...T("gradients"),...T("assets")}},shorthand:["bgImg","bgImage"]},border:{values:"borders"},borderTop:{values:"borders"},borderLeft:{values:"borders"},borderBlockStart:{values:"borders"},borderRight:{values:"borders"},borderBottom:{values:"borders"},borderBlockEnd:{values:"borders"},borderInlineStart:{values:"borders",shorthand:["borderStart"]},borderInlineEnd:{values:"borders",shorthand:["borderEnd"]},borderInline:{values:"borders",shorthand:["borderX"]},borderBlock:{values:"borders",shorthand:["borderY"]},borderColor:{values:colorValues,transform:createColorMixTransform("borderColor")},borderTopColor:{values:colorValues,transform:createColorMixTransform("borderTopColor")},borderBlockStartColor:{values:colorValues,transform:createColorMixTransform("borderBlockStartColor")},borderBottomColor:{values:colorValues,transform:createColorMixTransform("borderBottomColor")},borderBlockEndColor:{values:colorValues,transform:createColorMixTransform("borderBlockEndColor")},borderLeftColor:{values:colorValues,transform:createColorMixTransform("borderLeftColor")},borderInlineStartColor:{values:colorValues,shorthand:["borderStartColor"],transform:createColorMixTransform("borderInlineStartColor")},borderRightColor:{values:colorValues,transform:createColorMixTransform("borderRightColor")},borderInlineEndColor:{values:colorValues,shorthand:["borderEndColor"],transform:createColorMixTransform("borderInlineEndColor")},borderStyle:{values:"borderStyles"},borderTopStyle:{values:"borderStyles"},borderBlockStartStyle:{values:"borderStyles"},borderBottomStyle:{values:"borderStyles"},borderBlockEndStyle:{values:"borderStyles"},borderInlineStartStyle:{values:"borderStyles",shorthand:["borderStartStyle"]},borderInlineEndStyle:{values:"borderStyles",shorthand:["borderEndStyle"]},borderLeftStyle:{values:"borderStyles"},borderRightStyle:{values:"borderStyles"},borderRadius:{values:"radii",shorthand:["rounded"]},borderTopLeftRadius:{values:"radii",shorthand:["roundedTopLeft"]},borderStartStartRadius:{values:"radii",shorthand:["roundedStartStart","borderTopStartRadius"]},borderEndStartRadius:{values:"radii",shorthand:["roundedEndStart","borderBottomStartRadius"]},borderTopRightRadius:{values:"radii",shorthand:["roundedTopRight"]},borderStartEndRadius:{values:"radii",shorthand:["roundedStartEnd","borderTopEndRadius"]},borderEndEndRadius:{values:"radii",shorthand:["roundedEndEnd","borderBottomEndRadius"]},borderBottomLeftRadius:{values:"radii",shorthand:["roundedBottomLeft"]},borderBottomRightRadius:{values:"radii",shorthand:["roundedBottomRight"]},borderInlineStartRadius:{values:"radii",property:"borderRadius",shorthand:["roundedStart","borderStartRadius"],transform:T=>({borderStartStartRadius:T,borderEndStartRadius:T})},borderInlineEndRadius:{values:"radii",property:"borderRadius",shorthand:["roundedEnd","borderEndRadius"],transform:T=>({borderStartEndRadius:T,borderEndEndRadius:T})},borderTopRadius:{values:"radii",property:"borderRadius",shorthand:["roundedTop"],transform:T=>({borderTopLeftRadius:T,borderTopRightRadius:T})},borderBottomRadius:{values:"radii",property:"borderRadius",shorthand:["roundedBottom"],transform:T=>({borderBottomLeftRadius:T,borderBottomRightRadius:T})},borderLeftRadius:{values:"radii",property:"borderRadius",shorthand:["roundedLeft"],transform:T=>({borderTopLeftRadius:T,borderBottomLeftRadius:T})},borderRightRadius:{values:"radii",property:"borderRadius",shorthand:["roundedRight"],transform:T=>({borderTopRightRadius:T,borderBottomRightRadius:T})},borderWidth:{values:"borderWidths"},borderBlockStartWidth:{values:"borderWidths"},borderTopWidth:{values:"borderWidths"},borderBottomWidth:{values:"borderWidths"},borderBlockEndWidth:{values:"borderWidths"},borderRightWidth:{values:"borderWidths"},borderInlineWidth:{values:"borderWidths",shorthand:["borderXWidth"]},borderInlineStartWidth:{values:"borderWidths",shorthand:["borderStartWidth"]},borderInlineEndWidth:{values:"borderWidths",shorthand:["borderEndWidth"]},borderLeftWidth:{values:"borderWidths"},borderBlockWidth:{values:"borderWidths",shorthand:["borderYWidth"]},color:{values:colorValues,transform:createColorMixTransform("color")},fill:{values:colorValues,transform:createColorMixTransform("fill")},stroke:{values:colorValues,transform:createColorMixTransform("stroke")},accentColor:{values:colorValues,transform:createColorMixTransform("accentColor")},divideX:{values:{type:"string"},transform(T){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderInlineStartWidth:T,borderInlineEndWidth:"0px"}}}},divideY:{values:{type:"string"},transform(T){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderTopWidth:T,borderBottomWidth:"0px"}}}},divideColor:{values:colorValues,transform(T,_){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":divideColor(T,_)}}},divideStyle:{property:"borderStyle",transform(T){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderStyle:T}}}},boxShadow:{values:"shadows",shorthand:["shadow"]},boxShadowColor:{values:colorValues,transform:createColorMixTransform("--shadow-color"),shorthand:["shadowColor"]},mixBlendMode:{shorthand:["blendMode"]},backgroundBlendMode:{shorthand:["bgBlendMode"]},opacity:{values:"opacity"},filter:{transform(T){return T!=="auto"?{filter:T}:{filter:"var(--blur) var(--brightness) var(--contrast) var(--grayscale) var(--hue-rotate) var(--invert) var(--saturate) var(--sepia) var(--drop-shadow)"}}},blur:{values:"blurs",transform:T=>({"--blur":wrap$1("blur",T)})},brightness:{transform:T=>({"--brightness":wrap$1("brightness",T)})},contrast:{transform:T=>({"--contrast":wrap$1("contrast",T)})},grayscale:{transform:T=>({"--grayscale":wrap$1("grayscale",T)})},hueRotate:{transform:T=>({"--hue-rotate":wrap$1("hue-rotate",deg(T))})},invert:{transform:T=>({"--invert":wrap$1("invert",T)})},saturate:{transform:T=>({"--saturate":wrap$1("saturate",T)})},sepia:{transform:T=>({"--sepia":wrap$1("sepia",T)})},dropShadow:{transform:T=>({"--drop-shadow":wrap$1("drop-shadow",T)})},backdropFilter:{transform(T){return T!=="auto"?{backdropFilter:T}:{backdropFilter:"var(--backdrop-blur) var(--backdrop-brightness) var(--backdrop-contrast) var(--backdrop-grayscale) var(--backdrop-hue-rotate) var(--backdrop-invert) var(--backdrop-opacity) var(--backdrop-saturate) var(--backdrop-sepia)"}}},backdropBlur:{values:"blurs",transform:T=>({"--backdrop-blur":wrap$1("blur",T)})},backdropBrightness:{transform:T=>({"--backdrop-brightness":wrap$1("brightness",T)})},backdropContrast:{transform:T=>({"--backdrop-contrast":wrap$1("contrast",T)})},backdropGrayscale:{transform:T=>({"--backdrop-grayscale":wrap$1("grayscale",T)})},backdropHueRotate:{transform:T=>({"--backdrop-hue-rotate":wrap$1("hue-rotate",deg(T))})},backdropInvert:{transform:T=>({"--backdrop-invert":wrap$1("invert",T)})},backdropOpacity:{transform:T=>({"--backdrop-opacity":wrap$1("opacity",T)})},backdropSaturate:{transform:T=>({"--backdrop-saturate":wrap$1("saturate",T)})},backdropSepia:{transform:T=>({"--backdrop-sepia":wrap$1("sepia",T)})},flexBasis:{values:"sizes"},gap:{values:"spacing"},rowGap:{values:"spacing",shorthand:["gapY"]},columnGap:{values:"spacing",shorthand:["gapX"]},flexDirection:{shorthand:["flexDir"]},gridGap:{values:"spacing"},gridColumnGap:{values:"spacing"},gridRowGap:{values:"spacing"},outlineColor:{values:colorValues,transform:createColorMixTransform("outlineColor")},focusRing:createFocusRing("&:is(:focus, [data-focus])"),focusVisibleRing:createFocusRing("&:is(:focus-visible, [data-focus-visible])"),focusRingColor:{values:colorValues,transform:createColorMixTransform("--focus-ring-color")},focusRingOffset:{values:"spacing",transform:T=>({"--focus-ring-offset":T})},focusRingWidth:{values:"borderWidths",property:"outlineWidth",transform:T=>({"--focus-ring-width":T})},focusRingStyle:{values:"borderStyles",property:"outlineStyle",transform:T=>({"--focus-ring-style":T})},aspectRatio:{values:"aspectRatios"},width:{values:"sizes",shorthand:["w"]},inlineSize:{values:"sizes"},height:{values:"sizes",shorthand:["h"]},blockSize:{values:"sizes"},boxSize:{values:"sizes",property:"width",transform:T=>({width:T,height:T})},minWidth:{values:"sizes",shorthand:["minW"]},minInlineSize:{values:"sizes"},minHeight:{values:"sizes",shorthand:["minH"]},minBlockSize:{values:"sizes"},maxWidth:{values:"sizes",shorthand:["maxW"]},maxInlineSize:{values:"sizes"},maxHeight:{values:"sizes",shorthand:["maxH"]},maxBlockSize:{values:"sizes"},hideFrom:{values:"breakpoints",transform:(T,{raw:_,token:E})=>({[E.raw(`breakpoints.${_}`)?`@breakpoint ${_}`:`@media screen and (min-width: ${T})`]:{display:"none"}})},hideBelow:{values:"breakpoints",transform(T,{raw:_,token:E}){return{[E.raw(`breakpoints.${_}`)?`@breakpoint ${_}Down`:`@media screen and (max-width: ${T})`]:{display:"none"}}}},overscrollBehavior:{shorthand:["overscroll"]},overscrollBehaviorX:{shorthand:["overscrollX"]},overscrollBehaviorY:{shorthand:["overscrollY"]},scrollbar:{values:["visible","hidden"],transform(T){switch(T){case"visible":return{msOverflowStyle:"auto",scrollbarWidth:"auto","&::-webkit-scrollbar":{display:"block"}};case"hidden":return{msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};default:return{}}}},scrollbarColor:{values:colorValues,transform:createColorMixTransform("scrollbarColor")},scrollbarGutter:{values:"spacing"},scrollbarWidth:{values:"sizes"},scrollMargin:{values:"spacing"},scrollMarginTop:{values:"spacing"},scrollMarginBottom:{values:"spacing"},scrollMarginLeft:{values:"spacing"},scrollMarginRight:{values:"spacing"},scrollMarginX:{values:"spacing",transform:T=>({scrollMarginLeft:T,scrollMarginRight:T})},scrollMarginY:{values:"spacing",transform:T=>({scrollMarginTop:T,scrollMarginBottom:T})},scrollPadding:{values:"spacing"},scrollPaddingTop:{values:"spacing"},scrollPaddingBottom:{values:"spacing"},scrollPaddingLeft:{values:"spacing"},scrollPaddingRight:{values:"spacing"},scrollPaddingInline:{values:"spacing",shorthand:["scrollPaddingX"]},scrollPaddingBlock:{values:"spacing",shorthand:["scrollPaddingY"]},scrollSnapType:{values:{none:"none",x:"x var(--scroll-snap-strictness)",y:"y var(--scroll-snap-strictness)",both:"both var(--scroll-snap-strictness)"}},scrollSnapStrictness:{values:["mandatory","proximity"],transform:T=>({"--scroll-snap-strictness":T})},scrollSnapMargin:{values:"spacing"},scrollSnapMarginTop:{values:"spacing"},scrollSnapMarginBottom:{values:"spacing"},scrollSnapMarginLeft:{values:"spacing"},scrollSnapMarginRight:{values:"spacing"},listStylePosition:{shorthand:["listStylePos"]},listStyleImage:{values:"assets",shorthand:["listStyleImg"]},position:{shorthand:["pos"]},zIndex:{values:"zIndex"},inset:{values:"spacing"},insetInline:{values:"spacing",shorthand:["insetX"]},insetBlock:{values:"spacing",shorthand:["insetY"]},top:{values:"spacing"},insetBlockStart:{values:"spacing"},bottom:{values:"spacing"},insetBlockEnd:{values:"spacing"},left:{values:"spacing"},right:{values:"spacing"},insetInlineStart:{values:"spacing",shorthand:["insetStart"]},insetInlineEnd:{values:"spacing",shorthand:["insetEnd"]},ring:{transform(T){return{"--ring-offset-shadow":"var(--ring-inset) 0 0 0 var(--ring-offset-width) var(--ring-offset-color)","--ring-shadow":"var(--ring-inset) 0 0 0 calc(var(--ring-width) + var(--ring-offset-width)) var(--ring-color)","--ring-width":T,boxShadow:"var(--ring-offset-shadow), var(--ring-shadow), var(--shadow, 0 0 #0000)"}}},ringColor:{values:colorValues,transform:createColorMixTransform("--ring-color")},ringOffset:{transform:T=>({"--ring-offset-width":T})},ringOffsetColor:{values:colorValues,transform:createColorMixTransform("--ring-offset-color")},ringInset:{transform:T=>({"--ring-inset":T})},margin:{values:"spacing",shorthand:["m"]},marginTop:{values:"spacing",shorthand:["mt"]},marginBlockStart:{values:"spacing"},marginRight:{values:"spacing",shorthand:["mr"]},marginBottom:{values:"spacing",shorthand:["mb"]},marginBlockEnd:{values:"spacing"},marginLeft:{values:"spacing",shorthand:["ml"]},marginInlineStart:{values:"spacing",shorthand:["ms","marginStart"]},marginInlineEnd:{values:"spacing",shorthand:["me","marginEnd"]},marginInline:{values:"spacing",shorthand:["mx","marginX"]},marginBlock:{values:"spacing",shorthand:["my","marginY"]},padding:{values:"spacing",shorthand:["p"]},paddingTop:{values:"spacing",shorthand:["pt"]},paddingRight:{values:"spacing",shorthand:["pr"]},paddingBottom:{values:"spacing",shorthand:["pb"]},paddingBlockStart:{values:"spacing"},paddingBlockEnd:{values:"spacing"},paddingLeft:{values:"spacing",shorthand:["pl"]},paddingInlineStart:{values:"spacing",shorthand:["ps","paddingStart"]},paddingInlineEnd:{values:"spacing",shorthand:["pe","paddingEnd"]},paddingInline:{values:"spacing",shorthand:["px","paddingX"]},paddingBlock:{values:"spacing",shorthand:["py","paddingY"]},textDecoration:{shorthand:["textDecor"]},textDecorationColor:{values:colorValues,transform:createColorMixTransform("textDecorationColor")},textShadow:{values:"shadows"},transform:{transform:T=>{let _=T;return T==="auto"&&(_="translateX(var(--translate-x, 0)) translateY(var(--translate-y, 0)) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),T==="auto-gpu"&&(_="translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),{transform:_}}},skewX:{transform:T=>({"--skew-x":deg(T)})},skewY:{transform:T=>({"--skew-y":deg(T)})},scaleX:{transform:T=>({"--scale-x":T})},scaleY:{transform:T=>({"--scale-y":T})},scale:{transform(T){return T!=="auto"?{scale:T}:{scale:"var(--scale-x, 1) var(--scale-y, 1)"}}},spaceXReverse:{values:{type:"boolean"},transform(T){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":T?"1":void 0}}}},spaceX:{property:"marginInlineStart",values:"spacing",transform:T=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":"0",marginInlineStart:`calc(${T} * calc(1 - var(--space-x-reverse)))`,marginInlineEnd:`calc(${T} * var(--space-x-reverse))`}})},spaceYReverse:{values:{type:"boolean"},transform(T){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":T?"1":void 0}}}},spaceY:{property:"marginTop",values:"spacing",transform:T=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":"0",marginTop:`calc(${T} * calc(1 - var(--space-y-reverse)))`,marginBottom:`calc(${T} * var(--space-y-reverse))`}})},rotate:{transform(T){return T!=="auto"?{rotate:deg(T)}:{rotate:"var(--rotate-x, 0) var(--rotate-y, 0) var(--rotate-z, 0)"}}},rotateX:{transform(T){return{"--rotate-x":deg(T)}}},rotateY:{transform(T){return{"--rotate-y":deg(T)}}},translate:{transform(T){return T!=="auto"?{translate:T}:{translate:"var(--translate-x) var(--translate-y)"}}},translateX:{values:"spacing",transform:T=>({"--translate-x":T})},translateY:{values:"spacing",transform:T=>({"--translate-y":T})},transition:{values:["all","common","colors","opacity","position","backgrounds","size","shadow","transform"],transform(T){switch(T){case"all":return createTransition("all");case"position":return createTransition("left, right, top, bottom, inset-inline, inset-block");case"colors":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke");case"opacity":return createTransition("opacity");case"shadow":return createTransition("box-shadow");case"transform":return createTransition("transform");case"size":return createTransition("width, height");case"backgrounds":return createTransition("background, background-color, background-image, background-position");case"common":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter");default:return{transition:T}}}},transitionDuration:{values:"durations"},transitionProperty:{values:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, translate, transform",colors:"background-color, border-color, color, fill, stroke",size:"width, height",position:"left, right, top, bottom, inset-inline, inset-block",background:"background, background-color, background-image, background-position"}},transitionTimingFunction:{values:"easings"},animation:{values:"animations"},animationDuration:{values:"durations"},animationDelay:{values:"durations"},animationTimingFunction:{values:"easings"},fontFamily:{values:"fonts"},fontSize:{values:"fontSizes"},fontWeight:{values:"fontWeights"},lineHeight:{values:"lineHeights"},letterSpacing:{values:"letterSpacings"},textIndent:{values:"spacing"},truncate:{values:{type:"boolean"},transform(T){return T===!0?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{}}},lineClamp:{transform(T){return T==="none"?{WebkitLineClamp:"unset"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:T,WebkitBoxOrient:"vertical",textWrap:"wrap"}}},srOnly:{values:{type:"boolean"},transform(T){return srMapping[T]||{}}},debug:{values:{type:"boolean"},transform(T){return T?{outline:"1px solid blue !important","& > *":{outline:"1px solid red !important"}}:{}}},caretColor:{values:colorValues,transform:createColorMixTransform("caretColor")},cursor:{values:"cursor"}}}),srMapping={true:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},false:{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto",whiteSpace:"normal"}};var userGeneratedStr="",userGenerated=userGeneratedStr.split(","),cssPropertiesStr="WebkitAppearance,WebkitBorderBefore,WebkitBorderBeforeColor,WebkitBorderBeforeStyle,WebkitBorderBeforeWidth,WebkitBoxReflect,WebkitLineClamp,WebkitMask,WebkitMaskAttachment,WebkitMaskClip,WebkitMaskComposite,WebkitMaskImage,WebkitMaskOrigin,WebkitMaskPosition,WebkitMaskPositionX,WebkitMaskPositionY,WebkitMaskRepeat,WebkitMaskRepeatX,WebkitMaskRepeatY,WebkitMaskSize,WebkitOverflowScrolling,WebkitTapHighlightColor,WebkitTextFillColor,WebkitTextStroke,WebkitTextStrokeColor,WebkitTextStrokeWidth,WebkitTouchCallout,WebkitUserModify,accentColor,alignContent,alignItems,alignSelf,alignTracks,all,animation,animationComposition,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationRange,animationRangeEnd,animationRangeStart,animationTimingFunction,animationTimeline,appearance,aspectRatio,azimuth,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundSize,blockSize,border,borderBlock,borderBlockColor,borderBlockStyle,borderBlockWidth,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderEndEndRadius,borderEndStartRadius,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInline,borderInlineEnd,borderInlineColor,borderInlineStyle,borderInlineWidth,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStartEndRadius,borderStartStartRadius,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxAlign,boxDecorationBreak,boxDirection,boxFlex,boxFlexGroup,boxLines,boxOrdinalGroup,boxOrient,boxPack,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,captionSide,caret,caretColor,caretShape,clear,clip,clipPath,color,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,containIntrinsicBlockSize,containIntrinsicHeight,containIntrinsicInlineSize,containIntrinsicWidth,container,containerName,containerType,content,contentVisibility,counterIncrement,counterReset,counterSet,cursor,direction,display,emptyCells,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,font,fontFamily,fontFeatureSettings,fontKerning,fontLanguageOverride,fontOpticalSizing,fontPalette,fontVariationSettings,fontSize,fontSizeAdjust,fontSmooth,fontStretch,fontStyle,fontSynthesis,fontSynthesisPosition,fontSynthesisSmallCaps,fontSynthesisStyle,fontSynthesisWeight,fontVariant,fontVariantAlternates,fontVariantCaps,fontVariantEastAsian,fontVariantEmoji,fontVariantLigatures,fontVariantNumeric,fontVariantPosition,fontWeight,forcedColorAdjust,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,hangingPunctuation,height,hyphenateCharacter,hyphenateLimitChars,hyphens,imageOrientation,imageRendering,imageResolution,imeMode,initialLetter,initialLetterAlign,inlineSize,inputSecurity,inset,insetBlock,insetBlockEnd,insetBlockStart,insetInline,insetInlineEnd,insetInlineStart,isolation,justifyContent,justifyItems,justifySelf,justifyTracks,left,letterSpacing,lineBreak,lineClamp,lineHeight,lineHeightStep,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlock,marginBlockEnd,marginBlockStart,marginBottom,marginInline,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marginTrim,mask,maskBorder,maskBorderMode,maskBorderOutset,maskBorderRepeat,maskBorderSlice,maskBorderSource,maskBorderWidth,maskClip,maskComposite,maskImage,maskMode,maskOrigin,maskPosition,maskRepeat,maskSize,maskType,masonryAutoFlow,mathDepth,mathShift,mathStyle,maxBlockSize,maxHeight,maxInlineSize,maxLines,maxWidth,minBlockSize,minHeight,minInlineSize,minWidth,mixBlendMode,objectFit,objectPosition,offset,offsetAnchor,offsetDistance,offsetPath,offsetPosition,offsetRotate,opacity,order,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowBlock,overflowClipBox,overflowClipMargin,overflowInline,overflowWrap,overflowX,overflowY,overlay,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlock,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInline,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,page,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,printColorAdjust,quotes,resize,right,rotate,rowGap,rubyAlign,rubyMerge,rubyPosition,scale,scrollbarColor,scrollbarGutter,scrollbarWidth,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockStart,scrollMarginBlockEnd,scrollMarginBottom,scrollMarginInline,scrollMarginInlineStart,scrollMarginInlineEnd,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockStart,scrollPaddingBlockEnd,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineStart,scrollPaddingInlineEnd,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapCoordinate,scrollSnapDestination,scrollSnapPointsX,scrollSnapPointsY,scrollSnapStop,scrollSnapType,scrollSnapTypeX,scrollSnapTypeY,scrollTimeline,scrollTimelineAxis,scrollTimelineName,shapeImageThreshold,shapeMargin,shapeOutside,tabSize,tableLayout,textAlign,textAlignLast,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkip,textDecorationSkipInk,textDecorationStyle,textDecorationThickness,textEmphasis,textEmphasisColor,textEmphasisPosition,textEmphasisStyle,textIndent,textJustify,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlineOffset,textUnderlinePosition,textWrap,timelineScope,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionBehavior,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,translate,unicodeBidi,userSelect,verticalAlign,viewTimeline,viewTimelineAxis,viewTimelineInset,viewTimelineName,viewTransitionName,visibility,whiteSpace,whiteSpaceCollapse,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,zIndex,zoom,alignmentBaseline,baselineShift,clipRule,colorInterpolation,colorRendering,dominantBaseline,fill,fillOpacity,fillRule,floodColor,floodOpacity,glyphOrientationVertical,lightingColor,marker,markerEnd,markerMid,markerStart,shapeRendering,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,textAnchor,vectorEffect",allCssProperties=cssPropertiesStr.split(",").concat(userGenerated),properties=new Map(allCssProperties.map(T=>[T,!0]));function memo$1(T){const _=Object.create(null);return E=>(_[E]===void 0&&(_[E]=T(E)),_[E])}var cssPropertySelectorRegex=/&|@/,isCssProperty=memo$1(T=>properties.has(T)||T.startsWith("--")||cssPropertySelectorRegex.test(T));const isNotNullish=T=>T!=null;function walkObject(T,_,E={}){const{stop:C,getKey:A}=E;function R(I,F=[]){if(isObject$3(I)||Array.isArray(I)){const B={};for(const[U,V]of Object.entries(I)){const D=(A==null?void 0:A(U,V))??U,O=[...F,D];if(C!=null&&C(I,O))return _(I,F);const L=R(V,O);isNotNullish(L)&&(B[D]=L)}return B}return _(I,F)}return R(T)}function mapObject(T,_){return Array.isArray(T)?T.map(E=>_(E)):isObject$3(T)?walkObject(T,E=>_(E)):T!=null?_(T):T}function flatten(T,_){const E={};return walkObject(T,(C,A)=>{C&&(E[A.join(".")]=C.value)},{stop:_}),E}var fastSafeStringify,hasRequiredFastSafeStringify;function requireFastSafeStringify(){if(hasRequiredFastSafeStringify)return fastSafeStringify;hasRequiredFastSafeStringify=1,fastSafeStringify=R,R.default=R,R.stable=U,R.stableStringify=U;var T="[...]",_="[Circular]",E=[],C=[];function A(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function R(O,L,z,W){typeof W>"u"&&(W=A()),F(O,"",0,[],void 0,0,W);var X;try{C.length===0?X=JSON.stringify(O,L,z):X=JSON.stringify(O,D(L),z)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;E.length!==0;){var Y=E.pop();Y.length===4?Object.defineProperty(Y[0],Y[1],Y[3]):Y[0][Y[1]]=Y[2]}}return X}function I(O,L,z,W){var X=Object.getOwnPropertyDescriptor(W,z);X.get!==void 0?X.configurable?(Object.defineProperty(W,z,{value:O}),E.push([W,z,L,X])):C.push([L,z,O]):(W[z]=O,E.push([W,z,L]))}function F(O,L,z,W,X,Y,K){Y+=1;var Q;if(typeof O=="object"&&O!==null){for(Q=0;Q<W.length;Q++)if(W[Q]===O){I(_,O,L,X);return}if(typeof K.depthLimit<"u"&&Y>K.depthLimit){I(T,O,L,X);return}if(typeof K.edgesLimit<"u"&&z+1>K.edgesLimit){I(T,O,L,X);return}if(W.push(O),Array.isArray(O))for(Q=0;Q<O.length;Q++)F(O[Q],Q,Q,W,O,Y,K);else{var ee=Object.keys(O);for(Q=0;Q<ee.length;Q++){var J=ee[Q];F(O[J],J,Q,W,O,Y,K)}}W.pop()}}function B(O,L){return O<L?-1:O>L?1:0}function U(O,L,z,W){typeof W>"u"&&(W=A());var X=V(O,"",0,[],void 0,0,W)||O,Y;try{C.length===0?Y=JSON.stringify(X,L,z):Y=JSON.stringify(X,D(L),z)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;E.length!==0;){var K=E.pop();K.length===4?Object.defineProperty(K[0],K[1],K[3]):K[0][K[1]]=K[2]}}return Y}function V(O,L,z,W,X,Y,K){Y+=1;var Q;if(typeof O=="object"&&O!==null){for(Q=0;Q<W.length;Q++)if(W[Q]===O){I(_,O,L,X);return}try{if(typeof O.toJSON=="function")return}catch{return}if(typeof K.depthLimit<"u"&&Y>K.depthLimit){I(T,O,L,X);return}if(typeof K.edgesLimit<"u"&&z+1>K.edgesLimit){I(T,O,L,X);return}if(W.push(O),Array.isArray(O))for(Q=0;Q<O.length;Q++)V(O[Q],Q,Q,W,O,Y,K);else{var ee={},J=Object.keys(O).sort(B);for(Q=0;Q<J.length;Q++){var ie=J[Q];V(O[ie],ie,Q,W,O,Y,K),ee[ie]=O[ie]}if(typeof X<"u")E.push([X,L,O]),X[L]=ee;else return ee}W.pop()}}function D(O){return O=typeof O<"u"?O:function(L,z){return z},function(L,z){if(C.length>0)for(var W=0;W<C.length;W++){var X=C[W];if(X[1]===L&&X[0]===z){z=X[2],C.splice(W,1);break}}return O.call(this,L,z)}}return fastSafeStringify}var fastSafeStringifyExports=requireFastSafeStringify();const stringify=getDefaultExportFromCjs(fastSafeStringifyExports),memo=T=>{const _=Object.create(null);function E(...C){const A=C.map(R=>stringify(R)).join("|");return _[A]===void 0&&(_[A]=T(...C)),_[A]}return E},BASE_FONT_SIZE=16,UNIT_PX="px",UNIT_EM="em",UNIT_REM="rem";function getUnit$1(T=""){const _=new RegExp(String.raw`-?\d+(?:\.\d+|\d*)`),E=new RegExp(`${UNIT_PX}|${UNIT_EM}|${UNIT_REM}`),C=T.match(new RegExp(`${_.source}(${E.source})`));return C==null?void 0:C[1]}function toPx(T=""){if(typeof T=="number")return`${T}px`;const _=getUnit$1(T);if(!_||_===UNIT_PX)return T;if(_===UNIT_EM||_===UNIT_REM)return`${parseFloat(T)*BASE_FONT_SIZE}${UNIT_PX}`}function toRem(T=""){const _=getUnit$1(T);if(!_||_===UNIT_REM)return T;if(_===UNIT_EM)return`${parseFloat(T)}${UNIT_REM}`;if(_===UNIT_PX)return`${parseFloat(T)/BASE_FONT_SIZE}${UNIT_REM}`}const capitalize$1=T=>T.charAt(0).toUpperCase()+T.slice(1);function createBreakpoints(T){const _=sort(T),E=Object.fromEntries(_);function C(O){return E[O]}function A(O){return build$1(C(O))}function R(){const O=Object.keys(E),L=getPermutations(O),z=O.flatMap(W=>{const X=C(W),Y=[`${W}Down`,build$1({max:adjust(X.min)})],K=[W,build$1({min:X.min})],Q=[`${W}Only`,A(W)];return[K,Q,Y]}).filter(([,W])=>W!=="").concat(L.map(([W,X])=>{const Y=C(W),K=C(X);return[`${W}To${capitalize$1(X)}`,build$1({min:Y.min,max:adjust(K.min)})]}));return Object.fromEntries(z)}function I(){const O=R();return Object.fromEntries(Object.entries(O))}const F=I(),B=O=>F[O];function U(){return["base",...Object.keys(E)]}function V(O){return build$1({min:C(O).min})}function D(O){return build$1({max:adjust(C(O).min)})}return{values:Object.values(E),only:A,keys:U,conditions:F,getCondition:B,up:V,down:D}}function adjust(T){const _=parseFloat(toPx(T)??"")-.04;return toRem(`${_}px`)}function sort(T){return Object.entries(T).sort(([,E],[,C])=>parseInt(E,10)<parseInt(C,10)?-1:1).map(([E,C],A,R)=>{var F;let I=null;return A<=R.length-1&&(I=(F=R[A+1])==null?void 0:F[1]),I!=null&&(I=adjust(I)),[E,{name:E,min:toRem(C),max:I}]})}function getPermutations(T){const _=[];return T.forEach((E,C)=>{let A=C;A++;let R=T[A];for(;R;)_.push([E,R]),A++,R=T[A]}),_}function build$1({min:T,max:_}){return T==null&&_==null?"":["@media screen",T&&`(min-width: ${T})`,_&&`(max-width: ${_})`].filter(Boolean).join(" and ")}const mapEntries$1=(T,_)=>Object.fromEntries(Object.entries(T).map(([E,C])=>_(E,C))),createConditions=T=>{const{breakpoints:_,conditions:E={}}=T,C=mapEntries$1(E,(V,D)=>[`_${V}`,D]),A=Object.assign({},C,_.conditions);function R(){return Object.keys(A)}function I(V){return R().includes(V)||/^@|&|&$/.test(V)||V.startsWith("_")}function F(V){return V.filter(D=>D!=="base").sort((D,O)=>{const L=I(D),z=I(O);return L&&!z?1:!L&&z?-1:0})}function B(V){return V.startsWith("@breakpoint")?_.getCondition(V.replace("@breakpoint ","")):V}function U(V){return Reflect.get(A,V)||V}return{keys:R,sort:F,has:I,resolve:U,breakpoints:_.keys(),expandAtRule:B}},createMediaQueryRegex=T=>({minMax:new RegExp(`(!?\\(\\s*min(-device-)?-${T})(.|
)+\\(\\s*max(-device)?-${T}`,"i"),min:new RegExp(`\\(\\s*min(-device)?-${T}`,"i"),maxMin:new RegExp(`(!?\\(\\s*max(-device)?-${T})(.|
)+\\(\\s*min(-device)?-${T}`,"i"),max:new RegExp(`\\(\\s*max(-device)?-${T}`,"i")}),widthRegex=createMediaQueryRegex("width"),heightRegex=createMediaQueryRegex("height"),createQueryTester=T=>({isMin:_testQuery(T.minMax,T.maxMin,T.min),isMax:_testQuery(T.maxMin,T.minMax,T.max)}),{isMin:isMinWidth,isMax:isMaxWidth}=createQueryTester(widthRegex),{isMin:isMinHeight,isMax:isMaxHeight}=createQueryTester(heightRegex),isPrint=/print/i,isPrintOnly=/^print$/i,isLength=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/,lengthExec=/(\d)/,maxValue=Number.MAX_VALUE,multipliers={ch:8.8984375,em:16,rem:16,ex:8.296875,px:1};function getQueryLength(T){const _=isLength.exec(T)||(isMinWidth(T)||isMinHeight(T)?lengthExec.exec(T):null);if(!_)return maxValue;if(_[0]==="0")return 0;const E=parseFloat(_[1]),C=_[2];return E*(multipliers[C]||1)}function _testQuery(T,_,E){return C=>T.test(C)||!_.test(C)&&E.test(C)}function _testIsPrint(T,_){const E=isPrint.test(T),C=isPrintOnly.test(T),A=isPrint.test(_),R=isPrintOnly.test(_);return E&&A?!C&&R?1:C&&!R?-1:T.localeCompare(_):E?1:A?-1:null}const sortAtParams=memo((T,_)=>{const E=_testIsPrint(T,_);if(E!==null)return E;const C=isMinWidth(T)||isMinHeight(T),A=isMaxWidth(T)||isMaxHeight(T),R=isMinWidth(_)||isMinHeight(_),I=isMaxWidth(_)||isMaxHeight(_);if(C&&I)return-1;if(A&&R)return 1;const F=getQueryLength(T),B=getQueryLength(_);return F===maxValue&&B===maxValue?T.localeCompare(_):F===maxValue?1:B===maxValue?-1:F!==B?F>B?A?-1:1:A?1:-1:T.localeCompare(_)});function sortQueries(T){return T.sort(([_],[E])=>sortAtParams(_,E))}function sortAtRules(T){const _=[],E=[],C={};for(const[I,F]of Object.entries(T))I.startsWith("@media")?_.push([I,F]):I.startsWith("@container")?E.push([I,F]):isObject$3(F)?C[I]=sortAtRules(F):C[I]=F;const A=sortQueries(_),R=sortQueries(E);return{...C,...Object.fromEntries(A),...Object.fromEntries(R)}}const importantRegex=/\s*!(important)?/i,isImportant=T=>isString$1(T)?importantRegex.test(T):!1,withoutImportant=T=>isString$1(T)?T.replace(importantRegex,"").trim():T;function createCssFn(T){const{transform:_,conditions:E,normalize:C}=T,A=mergeCss(T);return memo(function(...I){const F=A(...I),B=C(F),U=Object.create(null);return walkObject(B,(V,D)=>{const O=isImportant(V);if(V==null)return;const[L,...z]=E.sort(D).map(E.resolve);O&&(V=withoutImportant(V));let W=_(L,V)??Object.create(null);W=walkObject(W,X=>isString$1(X)&&O?`${X} !important`:X,{getKey:X=>E.expandAtRule(X)}),mergeByPath(U,z.flat(),W)}),sortAtRules(U)})}function mergeByPath(T,_,E){let C=T;for(const A of _)A&&(C[A]||(C[A]=Object.create(null)),C=C[A]);mergeWith(C,E)}function compactFn(...T){return T.filter(_=>isObject$3(_)&&Object.keys(compact$1(_)).length>0)}function mergeCss(T){function _(E){const C=compactFn(...E);return C.length===1?C:C.map(A=>T.normalize(A))}return memo(function(...C){return mergeWith({},..._(C))})}const uniq=(...T)=>{const _=T.filter(Boolean);return Array.from(new Set(_))},defaults=T=>({base:{},variants:{},defaultVariants:{},compoundVariants:[],...T});function createRecipeFn(T){const{css:_,conditions:E,normalize:C,layers:A}=T;function R(F={}){const{base:B,variants:U,defaultVariants:V,compoundVariants:D}=defaults(F),O=createCssFn({conditions:E,normalize:C,transform(K,Q){var ee;return(ee=U[K])==null?void 0:ee[Q]}}),L=(K={})=>{const Q=C({...V,...compact$1(K)});let ee={...B};mergeWith(ee,O(Q));const J=I(D,Q);return A.wrap("recipes",_(ee,J))},z=Object.keys(U),W=K=>{const Q=omit(K,["recipe"]),[ee,J]=splitProps(Q,z);return z.includes("colorPalette")||(ee.colorPalette=K.colorPalette||V.colorPalette),z.includes("orientation")&&(J.orientation=K.orientation),[ee,J]},X=Object.fromEntries(Object.entries(U).map(([K,Q])=>[K,Object.keys(Q)]));return Object.assign(K=>_(L(K)),{className:F.className,__cva__:!0,variantMap:X,variantKeys:z,raw:L,config:F,splitVariantProps:W,merge(K){return R(mergeCva(T)(this,K))}})}function I(F,B){let U={};return F.forEach(V=>{Object.entries(V).every(([O,L])=>O==="css"?!0:(Array.isArray(L)?L:[L]).some(W=>B[O]===W))&&(U=_(U,V.css))}),U}return R}function mergeCva(T){const{css:_}=T;return function(C,A){const R=defaults(A.config),I=uniq(C.variantKeys,Object.keys(A.variants)),F=_(C.base,R.base),B=Object.fromEntries(I.map(O=>[O,_(C.config.variants[O],R.variants[O])])),U=mergeWith(C.config.defaultVariants,R.defaultVariants),V=[...C.compoundVariants,...R.compoundVariants];return{className:cx(C.className,A.className),base:F,variants:B,defaultVariants:U,compoundVariants:V}}}const defaultLayers={reset:"reset",base:"base",tokens:"tokens",recipes:"recipes"},layerOrder={reset:0,base:1,tokens:2,recipes:3};function createLayers(T){const _=T.layers??defaultLayers,C=Object.values(_).sort((A,R)=>layerOrder[A]-layerOrder[R]);return{names:C,atRule:`@layer ${C.join(", ")};`,wrap(A,R){return T.disableLayers?R:{[`@layer ${_[A]}`]:R}}}}function createNormalizeFn(T){const{utility:_,normalize:E}=T,{hasShorthand:C,resolveShorthand:A}=_;return function(R){return walkObject(R,E,{stop:I=>Array.isArray(I),getKey:C?A:void 0})}}function createPreflight(T){const{preflight:_}=T;if(!_)return{};const{scope:E="",level:C="parent"}=isObject$3(_)?_:{};let A="";E&&C==="parent"?A=`${E} `:E&&C==="element"&&(A=`&${E}`);const R={"*":{margin:"0px",padding:"0px",font:"inherit",wordWrap:"break-word",WebkitTapHighlightColor:"transparent"},"*, *::before, *::after, *::backdrop":{boxSizing:"border-box",borderWidth:"0px",borderStyle:"solid",borderColor:"var(--global-color-border, currentColor)"},hr:{height:"0px",color:"inherit",borderTopWidth:"1px"},body:{minHeight:"100dvh",position:"relative"},img:{borderStyle:"none"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},iframe:{border:"none"},"img, video":{maxWidth:"100%",height:"auto"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},"ol, ul":{listStyle:"none"},"code, kbd, pre, samp":{fontSize:"1em"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},"button, input, optgroup, select, textarea":{color:"inherit"},"button, select":{textTransform:"none"},table:{textIndent:"0px",borderColor:"inherit",borderCollapse:"collapse"},"*::placeholder":{opacity:"unset",color:"#9ca3af",userSelect:"none"},textarea:{resize:"vertical"},summary:{display:"list-item"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},dialog:{padding:"0px"},a:{color:"inherit",textDecoration:"inherit"},"abbr:where([title])":{textDecoration:"underline dotted"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontSize:"1em","--font-mono-fallback":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New'",fontFamily:"var(--global-font-mono, var(--font-mono-fallback))"},'input[type="text"], input[type="email"], input[type="search"], input[type="password"]':{WebkitAppearance:"none",MozAppearance:"none"},"input[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration, ::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},'input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button':{height:"auto"},"input[type='number']":{MozAppearance:"textfield"},":-moz-ui-invalid":{boxShadow:"none"},":-moz-focusring":{outline:"auto"},"[hidden]:where(:not([hidden='until-found']))":{display:"none !important"}},I={[E||"html"]:{lineHeight:1.5,"--font-fallback":"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",WebkitTextSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",touchAction:"manipulation",MozTabSize:"4",tabSize:"4",fontFamily:"var(--global-font-body, var(--font-fallback))"}};if(C==="element"){const F=Object.entries(R).reduce((B,[U,V])=>(B[U]={[A]:V},B),{});Object.assign(I,F)}else A?I[A]=R:Object.assign(I,R);return I}function createSerializeFn(T){const{conditions:_,isValidProperty:E}=T;return function(A){return walkObject(A,R=>R,{getKey:(R,I)=>isObject$3(I)&&!_.has(R)&&!E(R)?parseSelectors(R).map(F=>"&"+F).join(", "):R})}}function parseSelectors(T){const _=[];let E=0,C="",A=!1;for(let R=0;R<T.length;R++){const I=T[R];if(I==="\\"&&!A){A=!0,C+=I;continue}if(A){A=!1,C+=I;continue}I==="("?E++:I===")"&&E--,I===","&&E===0?(_.push(C.trim()),C=""):C+=I}return C&&_.push(C.trim()),_}const getSlotRecipes=(T={})=>{const _=A=>{var R;return{base:((R=T.base)==null?void 0:R[A])??{},variants:{},defaultVariants:T.defaultVariants??{},compoundVariants:T.compoundVariants?getSlotCompoundVariant(T.compoundVariants,A):[]}},C=(T.slots??[]).map(A=>[A,_(A)]);for(const[A,R]of Object.entries(T.variants??{}))for(const[I,F]of Object.entries(R))C.forEach(([B,U])=>{var V;(V=U.variants)[A]??(V[A]={}),U.variants[A][I]=F[B]??{}});return Object.fromEntries(C)},getSlotCompoundVariant=(T,_)=>T.filter(E=>E.css[_]).map(E=>({...E,css:E.css[_]}));function createSlotRecipeFn(T){const{cva:_}=T;return function(C={}){const A=Object.entries(getSlotRecipes(C)).map(([D,O])=>[D,_(O)]);function R(D){const O=A.map(([L,z])=>[L,z(D)]);return Object.fromEntries(O)}const I=C.variants??{},F=Object.keys(I);function B(D){var W;const O=omit(D,["recipe"]),[L,z]=splitProps(O,F);return F.includes("colorPalette")||(L.colorPalette=D.colorPalette||((W=C.defaultVariants)==null?void 0:W.colorPalette)),F.includes("orientation")&&(z.orientation=D.orientation),[L,z]}const U=Object.fromEntries(Object.entries(I).map(([D,O])=>[D,Object.keys(O)]));let V={};return C.className&&(V=Object.fromEntries(C.slots.map(D=>[D,`${C.className}__${D}`]))),Object.assign(R,{variantMap:U,variantKeys:F,splitVariantProps:B,classNameMap:V})}}const createProps=()=>T=>Array.from(new Set(T)),rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|^-|[^\x80-\uFFFF\w-]/g,fcssescape=function(T,_){return _?T==="\0"?"�":T==="-"&&T.length===1?"\\-":T.slice(0,-1)+"\\"+T.charCodeAt(T.length-1).toString(16):"\\"+T},esc=T=>(T+"").replace(rcssescape,fcssescape),expandTokenReferences=(T,_)=>{let E="",C=0,A="char",R="",I="";const F=[];for(;C<T.length;){const B=T[C];if(B==="{"){const V=T.indexOf("}",C);if(V===-1)break;const D=T.slice(C+1,V),O=_(D);E+=O??D,C=V+1;continue}if(A==="token"&&B===","){T[C]===""&&C++,A="fallback",F.push(A);const V=_(R);V!=null&&V.endsWith(")")&&(E+=V.slice(0,-1)),R="",I="";continue}if(A==="fallback"&&I+B===", var("){const O=cssVarParser(T.slice(C+1))+C+1,L=T.slice(C+1,O);if(O===-1)break;E+=", var("+L+")",C=O+1,A=F.pop()??A,I="";continue}if(A==="token"||A==="fallback"){if(C++,B===")"){A=F.pop()??A??"char",I+=B;const V=R&&(_(R)??esc(R));if(I){if(I=I.slice(1).trim(),!I.startsWith("token(")&&I.endsWith(")")&&(I=I.slice(0,-1)),I.includes("token(")){const O=expandTokenReferences(I,_);O&&(I=O.slice(0,-1))}else if(I){const O=_(I);O&&(I=O)}}const D=E.at(-1);I?D!=null&&D.trim()?E+=V.slice(0,-1)+(", "+I+")"):E+=I:E+=V||")",R="",I="",A="char";continue}A==="token"&&(R+=B),A==="fallback"&&(I+=B);continue}const U=T.indexOf("token(",C);if(U!==-1){const V=U+6;E+=T.slice(C,U),C=V,A="token",F.push(A);continue}E+=B,C++}return E},cssVarParser=T=>{let _=0;const E=["("];for(;_<T.length;){const C=T[_];if(C==="(")E.push(C);else if(C===")"&&(E.pop(),E.length===0))return _;_++}return _};function mapToJson(T){const _={};return T.forEach((E,C)=>{E instanceof Map?_[C]=Object.fromEntries(E):_[C]=E}),_}const REFERENCE_REGEX=/({([^}]*)})/g,CURLY_REGEX=/[{}]/g,TOKEN_PATH_REGEX=/\w+\.\w+/,getReferences=T=>{if(!isString$1(T))return[];const _=T.match(REFERENCE_REGEX);return _?_.map(E=>E.replace(CURLY_REGEX,"")).map(E=>E.trim()):[]},hasReference=T=>REFERENCE_REGEX.test(T);function expandReferences(T){var E,C,A;if(!((E=T.extensions)!=null&&E.references))return((A=(C=T.extensions)==null?void 0:C.cssVar)==null?void 0:A.ref)??T.value;const _=T.extensions.references??{};return T.value=Object.keys(_).reduce((R,I)=>{const F=_[I];if(F.extensions.conditions)return R;const B=expandReferences(F);return R.replace(`{${I}}`,B)},T.value),delete T.extensions.references,T.value}function resolveReference(T){return isObject$3(T)&&T.reference?T.reference:String(T)}const toExpression=(T,..._)=>_.map(resolveReference).join(` ${T} `).replace(/calc/g,""),add=(...T)=>`calc(${toExpression("+",...T)})`,subtract=(...T)=>`calc(${toExpression("-",...T)})`,multiply=(...T)=>`calc(${toExpression("*",...T)})`,divide=(...T)=>`calc(${toExpression("/",...T)})`,negate=T=>{const _=resolveReference(T);return _!=null&&!Number.isNaN(parseFloat(_))?String(_).startsWith("-")?String(_).slice(1):`-${_}`:multiply(_,-1)},calc=Object.assign(T=>({add:(..._)=>calc(add(T,..._)),subtract:(..._)=>calc(subtract(T,..._)),multiply:(..._)=>calc(multiply(T,..._)),divide:(..._)=>calc(divide(T,..._)),negate:()=>calc(negate(T)),toString:()=>T.toString()}),{add,subtract,multiply,divide,negate}),addNegativeTokens={enforce:"pre",transform(T){const{prefix:_,allTokens:E,formatCssVar:C,formatTokenName:A,registerToken:R}=T;E.filter(({extensions:F})=>F.category==="spacing").forEach(F=>{const B=F.path.slice(),U=C(B,_);if(isString$1(F.value)&&F.value==="0rem")return;const V=structuredClone(F);Object.assign(V.extensions,{negative:!0,prop:`-${F.extensions.prop}`,originalPath:B}),V.value=calc.negate(U.ref);const D=V.path[V.path.length-1];D!=null&&(V.path[V.path.length-1]=`-${D}`),V.path&&(V.name=A(V.path)),R(V)})}},units=new Set(["spacing","sizes","borderWidths","fontSizes","radii"]),addPixelUnit={enforce:"post",transform(T){T.allTokens.filter(E=>units.has(E.extensions.category)&&!E.extensions.negative).forEach(E=>{Object.assign(E.extensions,{pixelValue:toPx(E.value)})})}},addVirtualPalette={enforce:"post",transform(T){const{allTokens:_,registerToken:E,formatTokenName:C}=T,A=_.filter(({extensions:F})=>F.category==="colors"),R=new Map,I=new Map;A.forEach(F=>{const{colorPalette:B}=F.extensions;B&&(B.keys.forEach(U=>{R.set(C(U),U)}),B.roots.forEach(U=>{var O;const V=C(U),D=I.get(V)||[];if(D.push(F),I.set(V,D),F.extensions.default&&U.length===1){const L=(O=B.keys[0])==null?void 0:O.filter(Boolean);if(!L.length)return;const z=U.concat(L);R.set(C(z),[])}}))}),R.forEach(F=>{const B=["colors","colorPalette",...F].filter(Boolean),U=C(B),V=C(B.slice(1));E({name:U,value:U,originalValue:U,path:B,extensions:{condition:"base",originalPath:B,category:"colors",prop:V,virtual:!0}},"pre")})}},removeEmptyTokens={enforce:"post",transform(T){T.allTokens=T.allTokens.filter(_=>_.value!=="")}},tokenMiddlewares=[addNegativeTokens,addVirtualPalette,addPixelUnit,removeEmptyTokens],addCssVariables={type:"extensions",enforce:"pre",name:"tokens/css-var",transform(T,_){const{prefix:E,formatCssVar:C}=_,{negative:A,originalPath:R}=T.extensions,I=A?R:T.path;return{cssVar:C(I.filter(Boolean),E)}}},addConditionalCssVariables={enforce:"post",type:"value",name:"tokens/conditionals",transform(T,_){const{prefix:E,formatCssVar:C}=_,A=getReferences(T.value);return A.length&&A.forEach(R=>{const I=C(R.split("."),E);T.value=T.value.replace(`{${I.ref}}`,I)}),T.value}},addColorPalette={type:"extensions",enforce:"pre",name:"tokens/colors/colorPalette",match(T){return T.extensions.category==="colors"&&!T.extensions.virtual},transform(T,_){let E=T.path.slice();if(E.pop(),E.shift(),E.length===0){const F=[...T.path];F.shift(),E=F}if(E.length===0)return{};const C=E.reduce((F,B,U,V)=>{const D=V.slice(0,U+1);return F.push(D),F},[]),A=E[0],R=_.formatTokenName(E),I=T.path.slice(T.path.indexOf(A)+1).reduce((F,B,U,V)=>(F.push(V.slice(U)),F),[]);return I.length===0&&I.push([""]),{colorPalette:{value:R,roots:C,keys:I}}}},tokenTransforms=[addCssVariables,addConditionalCssVariables,addColorPalette],isToken=T=>isObject$3(T)&&Object.prototype.hasOwnProperty.call(T,"value");function expandBreakpoints(T){return T?{breakpoints:mapObject(T,_=>({value:_})),sizes:Object.fromEntries(Object.entries(T).map(([_,E])=>[`breakpoint-${_}`,{value:E}]))}:{breakpoints:{},sizes:{}}}function createTokenDictionary(T){const{prefix:_="",tokens:E={},semanticTokens:C={},breakpoints:A={}}=T,R=ke=>ke.join("."),I=(ke,Le)=>cssVar(ke.join("-"),{prefix:Le}),F=[],B=new Map,U=new Map,V=new Map,D=new Map,O=new Map,L=new Map,z=new Map,W=new Map,X=[];function Y(ke,Le){F.push(ke),B.set(ke.name,ke),Le&&W.forEach(Ne=>{Ne.enforce===Le&&be(Ne,ke)})}const K=expandBreakpoints(A),Q=compact$1({...E,breakpoints:K.breakpoints,sizes:{...E.sizes,...K.sizes}});function ee(){walkObject(Q,(ke,Le)=>{const Ne=Le.includes("DEFAULT");Le=filterDefault(Le);const Qe=Le[0],et=R(Le),Je=isString$1(ke)?{value:ke}:ke,ut={value:Je.value,originalValue:Je.value,name:et,path:Le,extensions:{condition:"base",originalPath:Le,category:Qe,prop:R(Le.slice(1))}};Ne&&(ut.extensions.default=!0),Y(ut)},{stop:isToken}),walkObject(C,(ke,Le)=>{const Ne=Le.includes("DEFAULT");Le=filterBaseCondition(filterDefault(Le));const Qe=Le[0],et=R(Le),Je=isString$1(ke.value)?{value:{base:ke.value}}:ke,ut={value:Je.value.base||"",originalValue:Je.value.base||"",name:et,path:Le,extensions:{originalPath:Le,category:Qe,conditions:Je.value,condition:"base",prop:R(Le.slice(1))}};Ne&&(ut.extensions.default=!0),Y(ut)},{stop:isToken})}function J(ke){return B.get(ke)}function ie(ke){const{condition:Le}=ke.extensions;Le&&(U.has(Le)||U.set(Le,new Set),U.get(Le).add(ke))}function re(ke){const{category:Le,prop:Ne}=ke.extensions;Le&&(z.has(Le)||z.set(Le,new Map),z.get(Le).set(Ne,ke))}function se(ke){const{condition:Le,negative:Ne,virtual:Qe,cssVar:et}=ke.extensions;Ne||Qe||!Le||!et||(V.has(Le)||V.set(Le,new Map),V.get(Le).set(et.var,ke.value))}function ne(ke){const{category:Le,prop:Ne,cssVar:Qe,negative:et}=ke.extensions;if(!Le)return;L.has(Le)||L.set(Le,new Map);const Je=et?ke.extensions.conditions?ke.originalValue:ke.value:Qe.ref;L.get(Le).set(Ne,Je),O.set([Le,Ne].join("."),Je)}function oe(ke){const{colorPalette:Le,virtual:Ne,default:Qe}=ke.extensions;!Le||Ne||Le.roots.forEach(et=>{var Yt;const Je=R(et);D.has(Je)||D.set(Je,new Map);const ut=replaceRootWithColorPalette([...ke.path],[...et]),lt=R(ut),it=J(lt);if(!it||!it.extensions.cssVar)return;const{var:Bt}=it.extensions.cssVar;if(D.get(Je).set(Bt,ke.extensions.cssVar.ref),Qe&&et.length===1){const ar=R(["colors","colorPalette"]),Kt=J(ar);if(!Kt)return;const zt=R(ke.path),jt=J(zt);if(!jt)return;const Qt=(Yt=Le.keys[0])==null?void 0:Yt.filter(Boolean);if(!Qt.length)return;const ir=R(et.concat(Qt));D.has(ir)||D.set(ir,new Map),D.get(ir).set(Kt.extensions.cssVar.var,jt.extensions.cssVar.ref)}})}let fe={};function he(){F.forEach(ke=>{ie(ke),re(ke),se(ke),ne(ke),oe(ke)}),fe=mapToJson(L)}const ge=(ke,Le)=>{var it;if(!ke||typeof ke!="string")return{invalid:!0,value:ke};const[Ne,Qe]=ke.split("/");if(!Ne||!Qe)return{invalid:!0,value:Ne};const et=Le(Ne),Je=(it=J(`opacity.${Qe}`))==null?void 0:it.value;if(!Je&&isNaN(Number(Qe)))return{invalid:!0,value:Ne};const ut=Je?Number(Je)*100+"%":`${Qe}%`,lt=et??Ne;return{invalid:!1,color:lt,value:`color-mix(in srgb, ${lt} ${ut}, transparent)`}},ye=memo((ke,Le)=>O.get(ke)??Le),we=memo(ke=>fe[ke]||null),le=memo(ke=>expandTokenReferences(ke,Le=>{if(!Le)return;if(Le.includes("/")){const Qe=ge(Le,et=>ye(et));if(Qe.invalid)throw new Error("Invalid color mix at "+Le+": "+Qe.value);return Qe.value}const Ne=ye(Le);return Ne||(TOKEN_PATH_REGEX.test(Le)?esc(Le):Le)})),de={prefix:_,allTokens:F,tokenMap:B,registerToken:Y,getByName:J,formatTokenName:R,formatCssVar:I,flatMap:O,cssVarMap:V,categoryMap:z,colorPaletteMap:D,getVar:ye,getCategoryValues:we,expandReferenceInValue:le};function ce(...ke){ke.forEach(Le=>{W.set(Le.name,Le)})}function ve(...ke){X.push(...ke)}function be(ke,Le){if(Le.extensions.references||isFunction$2(ke.match)&&!ke.match(Le))return;const Qe=(et=>ke.transform(et,de))(Le);switch(!0){case ke.type==="extensions":Object.assign(Le.extensions,Qe);break;case ke.type==="value":Le.value=Qe;break;default:Le[ke.type]=Qe;break}}function me(ke){X.forEach(Le=>{Le.enforce===ke&&Le.transform(de)})}function xe(ke){W.forEach(Le=>{Le.enforce===ke&&F.forEach(Ne=>{be(Le,Ne)})})}function Ae(){F.forEach(ke=>{const Le=getConditionalTokens(ke);!Le||Le.length===0||Le.forEach(Ne=>{Y(Ne)})})}function De(ke){return getReferences(ke).map(Ne=>J(Ne)).filter(Boolean)}function Ie(){F.forEach(ke=>{if(!hasReference(ke.value))return;const Le=De(ke.value);ke.extensions.references=Le.reduce((Ne,Qe)=>(Ne[Qe.name]=Qe,Ne),{})})}function je(){F.forEach(ke=>{expandReferences(ke)})}function Ye(){me("pre"),xe("pre"),Ae(),Ie(),je(),me("post"),xe("post"),he()}return ee(),ce(...tokenTransforms),ve(...tokenMiddlewares),Ye(),de}function filterDefault(T){return T[0]==="DEFAULT"?T:T.filter(_=>_!=="DEFAULT")}function filterBaseCondition(T){return T.filter(_=>_!=="base")}function getConditionalTokens(T){if(!T.extensions.conditions)return;const{conditions:_}=T.extensions,E=[];return walkObject(_,(C,A)=>{const R=filterBaseCondition(A);if(!R.length)return;const I=structuredClone(T);I.value=C,I.extensions.condition=R.join(":"),E.push(I)}),E}function replaceRootWithColorPalette(T,_){const E=T.findIndex((C,A)=>_.every((R,I)=>T[A+I]===R));return E===-1||(T.splice(E,_.length),T.splice(E,0,"colorPalette")),T}createProps()(["aspectRatios","zIndex","opacity","colors","fonts","fontSizes","fontWeights","lineHeights","letterSpacings","sizes","shadows","spacing","radii","cursor","borders","borderWidths","borderStyles","durations","easings","animations","blurs","gradients","breakpoints","assets"]);function normalize$2(T){return T}function normalizeConfig(T){return Object.fromEntries(Object.entries(T).map(([_,E])=>[_,E]))}function createUtility(T){const _=normalizeConfig(T.config),E=T.tokens,C=new Map,A=new Map;function R(se,ne){_[se]=ne,I(se,ne)}const I=(se,ne)=>{const oe=W(ne);oe&&(A.set(se,oe),D(se,ne))},F=()=>{for(const[se,ne]of Object.entries(_))ne&&I(se,ne)},B=()=>{for(const[se,ne]of Object.entries(_)){const{shorthand:oe}=ne??{};if(!oe)continue;(Array.isArray(oe)?oe:[oe]).forEach(he=>C.set(he,se))}},U=()=>{const se=mapToJson(E.colorPaletteMap);R("colorPalette",{values:Object.keys(se),transform:memo(ne=>se[ne])})},V=new Map,D=(se,ne)=>{if(!ne)return;const oe=W(ne,he=>`type:Tokens["${he}"]`);if(typeof oe=="object"&&oe.type){V.set(se,new Set([`type:${oe.type}`]));return}if(oe){const he=new Set(Object.keys(oe));V.set(se,he)}const fe=V.get(se)??new Set;ne.property&&V.set(se,fe.add(`CssProperties["${ne.property}"]`))},O=()=>{for(const[se,ne]of Object.entries(_))ne&&D(se,ne)},L=(se,ne)=>{const oe=V.get(se)??new Set;V.set(se,new Set([...oe,...ne]))},z=()=>{const se=new Map;for(const[ne,oe]of V.entries()){if(oe.size===0){se.set(ne,["string"]);continue}const fe=Array.from(oe).map(he=>he.startsWith("CssProperties")?he:he.startsWith("type:")?he.replace("type:",""):JSON.stringify(he));se.set(ne,fe)}return se},W=(se,ne)=>{const{values:oe}=se,fe=he=>{const ge=ne==null?void 0:ne(he);return ge?{[ge]:ge}:void 0};return isString$1(oe)?(fe==null?void 0:fe(oe))??E.getCategoryValues(oe)??{}:Array.isArray(oe)?oe.reduce((he,ge)=>(he[ge]=ge,he),{}):isFunction$2(oe)?oe(ne?fe:E.getCategoryValues):oe},X=memo((se,ne)=>({[se]:se.startsWith("--")?E.getVar(ne,ne):ne})),Y=Object.assign(E.getVar,{raw:se=>E.getByName(se)}),K=memo((se,ne)=>{var ye;const oe=J(se);isString$1(ne)&&!ne.includes("_EMO_")&&(ne=E.expandReferenceInValue(ne));const fe=_[oe];if(!fe)return X(oe,ne);const he=(ye=A.get(oe))==null?void 0:ye[ne];if(!fe.transform)return X(se,he??ne);const ge=we=>colorMix(we,Y);return fe.transform(he??ne,{raw:ne,token:Y,utils:{colorMix:ge}})});function Q(){B(),U(),F(),O()}Q();const ee=C.size>0,J=memo(se=>C.get(se)??se);return{keys:()=>[...Array.from(C.keys()),...Object.keys(_)],hasShorthand:ee,transform:K,shorthands:C,resolveShorthand:J,register:R,getTypes:z,addPropertyType:L}}function createSystem(...T){const _=mergeConfigs(...T),{theme:E={},utilities:C={},globalCss:A={},cssVarsRoot:R=":where(:root, :host)",cssVarsPrefix:I="chakra",preflight:F}=_,B=createLayers(_),U=createTokenDictionary({breakpoints:E.breakpoints,tokens:E.tokens,semanticTokens:E.semanticTokens,prefix:I}),V=createBreakpoints(E.breakpoints??{}),D=createConditions({conditions:_.conditions??{},breakpoints:V}),O=createUtility({config:C,tokens:U});function L(){const{textStyles:ce,layerStyles:ve,animationStyles:be}=E,me=compact$1({textStyle:ce,layerStyle:ve,animationStyle:be});for(const[xe,Ae]of Object.entries(me)){const De=flatten(Ae??{},Ie=>isObject$3(Ie)&&"value"in Ie);O.register(xe,{values:Object.keys(De),transform(Ie){return Q(De[Ie])}})}}L(),O.addPropertyType("animationName",Object.keys(E.keyframes??{}));const z=new Set(["css",...O.keys(),...D.keys()]),W=memo(ce=>z.has(ce)||isCssProperty(ce)),X=ce=>Array.isArray(ce)?ce.reduce((ve,be,me)=>{const xe=D.breakpoints[me];return be!=null&&(ve[xe]=be),ve},{}):ce,Y=createNormalizeFn({utility:O,normalize:X}),K=createSerializeFn({conditions:D,isValidProperty:W}),Q=createCssFn({transform:O.transform,conditions:D,normalize:Y}),ee=createRecipeFn({css:Q,conditions:D,normalize:Y,layers:B}),J=createSlotRecipeFn({cva:ee});function ie(){const ce={};for(const[ve,be]of U.cssVarMap.entries()){const me=Object.fromEntries(be);if(Object.keys(me).length===0)continue;const xe=ve==="base"?R:D.resolve(ve),Ae=Q(K({[xe]:me}));mergeWith(ce,Ae)}return B.wrap("tokens",ce)}function re(){const ce=Object.fromEntries(Object.entries(E.keyframes??{}).map(([be,me])=>[`@keyframes ${be}`,me])),ve=Object.assign({},ce,Q(K(A)));return B.wrap("base",ve)}function se(ce){return splitProps(ce,W)}function ne(){const ce=createPreflight({preflight:F});return B.wrap("reset",ce)}const oe=getTokenMap(U),fe=(ce,ve)=>{var be;return((be=oe.get(ce))==null?void 0:be.value)||ve};fe.var=(ce,ve)=>{var be;return((be=oe.get(ce))==null?void 0:be.variable)||ve};function he(ce,ve){var be;return((be=E.recipes)==null?void 0:be[ce])??ve}function ge(ce,ve){var be;return((be=E.slotRecipes)==null?void 0:be[ce])??ve}function ye(ce){return Object.hasOwnProperty.call(E.recipes??{},ce)}function we(ce){return Object.hasOwnProperty.call(E.slotRecipes??{},ce)}function le(ce){return ye(ce)||we(ce)}const de=[ne(),re(),ie()];return{$$chakra:!0,_config:_,_global:de,breakpoints:V,tokens:U,conditions:D,utility:O,token:fe,properties:z,layers:B,isValidProperty:W,splitCssProps:se,normalizeValue:X,getTokenCss:ie,getGlobalCss:re,getPreflightCss:ne,css:Q,cva:ee,sva:J,getRecipe:he,getSlotRecipe:ge,hasRecipe:le,isRecipe:ye,isSlotRecipe:we}}function getTokenMap(T){const _=new Map;return T.allTokens.forEach(E=>{const{cssVar:C,virtual:A,conditions:R}=E.extensions,I=R||A?C.ref:E.value;_.set(E.name,{value:I,variable:C.ref})}),_}const breakpoints={sm:"480px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},empty="var(--chakra-empty,/*!*/ /*!*/)",globalCss=defineGlobalStyles({"*":{fontFeatureSettings:'"cv11"',"--ring-inset":empty,"--ring-offset-width":"0px","--ring-offset-color":"#fff","--ring-color":"rgba(66, 153, 225, 0.6)","--ring-offset-shadow":"0 0 #0000","--ring-shadow":"0 0 #0000",...Object.fromEntries(["brightness","contrast","grayscale","hue-rotate","invert","saturate","sepia","drop-shadow"].map(T=>[`--${T}`,empty])),...Object.fromEntries(["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"].map(T=>[`--backdrop-${T}`,empty])),"--global-font-mono":"fonts.mono","--global-font-body":"fonts.body","--global-color-border":"colors.border"},html:{color:"fg",bg:"bg",lineHeight:"1.5",colorPalette:"gray"},"*::placeholder, *[data-placeholder]":{color:"fg.muted/80"},"*::selection":{bg:"colorPalette.emphasized/80"}}),layerStyles=defineLayerStyles({"fill.muted":{value:{background:"colorPalette.muted",color:"colorPalette.fg"}},"fill.subtle":{value:{background:"colorPalette.subtle",color:"colorPalette.fg"}},"fill.surface":{value:{background:"colorPalette.subtle",color:"colorPalette.fg",boxShadow:"0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.muted"}},"fill.solid":{value:{background:"colorPalette.solid",color:"colorPalette.contrast"}},"outline.subtle":{value:{color:"colorPalette.fg",boxShadow:"inset 0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.subtle"}},"outline.solid":{value:{borderWidth:"1px",borderColor:"colorPalette.solid",color:"colorPalette.fg"}},"indicator.bottom":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",bottom:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.top":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",top:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.start":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineStart:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.end":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineEnd:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},disabled:{value:{opacity:"0.5",cursor:"not-allowed"}},none:{value:{}}}),animationStyles=defineAnimationStyles({"slide-fade-in":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-from-bottom, fade-in"},"&[data-placement^=bottom]":{animationName:"slide-from-top, fade-in"},"&[data-placement^=left]":{animationName:"slide-from-right, fade-in"},"&[data-placement^=right]":{animationName:"slide-from-left, fade-in"}}},"slide-fade-out":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-to-bottom, fade-out"},"&[data-placement^=bottom]":{animationName:"slide-to-top, fade-out"},"&[data-placement^=left]":{animationName:"slide-to-right, fade-out"},"&[data-placement^=right]":{animationName:"slide-to-left, fade-out"}}},"scale-fade-in":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-in, fade-in"}},"scale-fade-out":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-out, fade-out"}}}),badgeRecipe=defineRecipe({className:"chakra-badge",base:{display:"inline-flex",alignItems:"center",borderRadius:"l2",gap:"1",fontWeight:"medium",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap",userSelect:"none"},variants:{variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg"},outline:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},plain:{color:"colorPalette.fg"}},size:{xs:{textStyle:"2xs",px:"1",minH:"4"},sm:{textStyle:"xs",px:"1.5",minH:"5"},md:{textStyle:"sm",px:"2",minH:"6"},lg:{textStyle:"sm",px:"2.5",minH:"7"}}},defaultVariants:{variant:"subtle",size:"sm"}}),buttonRecipe=defineRecipe({className:"chakra-button",base:{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",borderRadius:"l2",whiteSpace:"nowrap",verticalAlign:"middle",borderWidth:"1px",borderColor:"transparent",cursor:"button",flexShrink:"0",outline:"0",lineHeight:"1.2",isolation:"isolate",fontWeight:"medium",transitionProperty:"common",transitionDuration:"moderate",focusVisibleRing:"outside",_disabled:{layerStyle:"disabled"},_icon:{flexShrink:"0"}},variants:{size:{"2xs":{h:"6",minW:"6",textStyle:"xs",px:"2",gap:"1",_icon:{width:"3.5",height:"3.5"}},xs:{h:"8",minW:"8",textStyle:"xs",px:"2.5",gap:"1",_icon:{width:"4",height:"4"}},sm:{h:"9",minW:"9",px:"3.5",textStyle:"sm",gap:"2",_icon:{width:"4",height:"4"}},md:{h:"10",minW:"10",textStyle:"sm",px:"4",gap:"2",_icon:{width:"5",height:"5"}},lg:{h:"11",minW:"11",textStyle:"md",px:"5",gap:"3",_icon:{width:"5",height:"5"}},xl:{h:"12",minW:"12",textStyle:"md",px:"5",gap:"2.5",_icon:{width:"5",height:"5"}},"2xl":{h:"16",minW:"16",textStyle:"lg",px:"7",gap:"3",_icon:{width:"6",height:"6"}}},variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"transparent",_hover:{bg:"colorPalette.solid/90"},_expanded:{bg:"colorPalette.solid/90"}},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"transparent",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},outline:{borderWidth:"1px",borderColor:"colorPalette.muted",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},ghost:{bg:"transparent",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},plain:{color:"colorPalette.fg"}}},defaultVariants:{size:"md",variant:"solid"}}),checkmarkRecipe=defineRecipe({className:"chakra-checkmark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"l1",focusVisibleRing:"outside",_icon:{boxSize:"full"},_invalid:{colorPalette:"red",borderColor:"border.error"},_disabled:{opacity:"0.5"}},variants:{size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5",p:"0.5"},lg:{boxSize:"6",p:"0.5"}},variant:{solid:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},outline:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg",borderColor:"colorPalette.solid"}},subtle:{bg:"colorPalette.muted",borderColor:"colorPalette.muted","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},plain:{"&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},inverted:{borderColor:"border",color:"colorPalette.fg","&:is([data-state=checked], [data-state=indeterminate])":{borderColor:"colorPalette.solid"}}}},defaultVariants:{variant:"solid",size:"md"}}),{variants:variants$1,defaultVariants:defaultVariants$1}=badgeRecipe,codeRecipe=defineRecipe({className:"chakra-code",base:{fontFamily:"mono",alignItems:"center",display:"inline-flex",borderRadius:"l2"},variants:variants$1,defaultVariants:defaultVariants$1}),colorSwatchRecipe=defineRecipe({className:"color-swatch",base:{boxSize:"var(--swatch-size)",shadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)","--checker-size":"8px","--checker-bg":"colors.bg","--checker-fg":"colors.bg.emphasized",background:"linear-gradient(var(--color), var(--color)), repeating-conic-gradient(var(--checker-fg) 0%, var(--checker-fg) 25%, var(--checker-bg) 0%, var(--checker-bg) 50%) 0% 50% / var(--checker-size) var(--checker-size) !important",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},variants:{size:{"2xs":{"--swatch-size":"sizes.3.5"},xs:{"--swatch-size":"sizes.4"},sm:{"--swatch-size":"sizes.4.5"},md:{"--swatch-size":"sizes.5"},lg:{"--swatch-size":"sizes.6"},xl:{"--swatch-size":"sizes.7"},"2xl":{"--swatch-size":"sizes.8"},inherit:{"--swatch-size":"inherit"},full:{"--swatch-size":"100%"}},shape:{square:{borderRadius:"none"},circle:{borderRadius:"full"},rounded:{borderRadius:"l1"}}},defaultVariants:{size:"md",shape:"rounded"}}),containerRecipe=defineRecipe({className:"chakra-container",base:{position:"relative",maxWidth:"8xl",w:"100%",mx:"auto",px:{base:"4",md:"6",lg:"8"}},variants:{centerContent:{true:{display:"flex",flexDirection:"column",alignItems:"center"}},fluid:{true:{maxWidth:"full"}}}}),headingRecipe=defineRecipe({className:"chakra-heading",base:{fontFamily:"heading",fontWeight:"semibold"},variants:{size:{xs:{textStyle:"xs"},sm:{textStyle:"sm"},md:{textStyle:"md"},lg:{textStyle:"lg"},xl:{textStyle:"xl"},"2xl":{textStyle:"2xl"},"3xl":{textStyle:"3xl"},"4xl":{textStyle:"4xl"},"5xl":{textStyle:"5xl"},"6xl":{textStyle:"6xl"},"7xl":{textStyle:"7xl"}}},defaultVariants:{size:"xl"}}),iconRecipe=defineRecipe({className:"chakra-icon",base:{display:"inline-block",lineHeight:"1em",flexShrink:"0",color:"currentcolor",verticalAlign:"middle"},variants:{size:{inherit:{},xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"},xl:{boxSize:"7"},"2xl":{boxSize:"8"}}},defaultVariants:{size:"inherit"}}),inputRecipe=defineRecipe({className:"chakra-input",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},height:"var(--input-height)",minW:"var(--input-height)","--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{"2xs":{textStyle:"xs",px:"2","--input-height":"sizes.7"},xs:{textStyle:"xs",px:"2","--input-height":"sizes.8"},sm:{textStyle:"sm",px:"2.5","--input-height":"sizes.9"},md:{textStyle:"sm",px:"3","--input-height":"sizes.10"},lg:{textStyle:"md",px:"4","--input-height":"sizes.11"},xl:{textStyle:"md",px:"4.5","--input-height":"sizes.12"},"2xl":{textStyle:"lg",px:"5","--input-height":"sizes.16"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside",focusRingColor:"var(--focus-color)"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside",focusRingColor:"var(--focus-color)"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),inputAddonRecipe=defineRecipe({className:"chakra-input-addon",base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",alignSelf:"stretch",borderRadius:"l2"},variants:{size:inputRecipe.variants.size,variant:{outline:{borderWidth:"1px",borderColor:"border",bg:"bg.muted"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.emphasized"},flushed:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}},defaultVariants:{size:"md",variant:"outline"}}),kbdRecipe=defineRecipe({className:"chakra-kbd",base:{display:"inline-flex",alignItems:"center",fontWeight:"medium",fontFamily:"mono",flexShrink:"0",whiteSpace:"nowrap",wordSpacing:"-0.5em",userSelect:"none",px:"1",borderRadius:"l2"},variants:{variant:{raised:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderWidth:"1px",borderBottomWidth:"2px",borderColor:"colorPalette.muted"},outline:{borderWidth:"1px",color:"colorPalette.fg"},subtle:{bg:"colorPalette.muted",color:"colorPalette.fg"},plain:{color:"colorPalette.fg"}},size:{sm:{textStyle:"xs",height:"4.5"},md:{textStyle:"sm",height:"5"},lg:{textStyle:"md",height:"6"}}},defaultVariants:{size:"md",variant:"raised"}}),linkRecipe=defineRecipe({className:"chakra-link",base:{display:"inline-flex",alignItems:"center",outline:"none",gap:"1.5",cursor:"pointer",borderRadius:"l1",focusRing:"outside"},variants:{variant:{underline:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"},plain:{color:"colorPalette.fg",_hover:{textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"}}}},defaultVariants:{variant:"plain"}}),markRecipe=defineRecipe({className:"chakra-mark",base:{bg:"transparent",color:"inherit",whiteSpace:"nowrap"},variants:{variant:{subtle:{bg:"colorPalette.subtle",color:"inherit"},solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},text:{fontWeight:"medium"},plain:{}}}}),radiomarkRecipe=defineRecipe({className:"chakra-radiomark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,verticalAlign:"top",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"full",cursor:"radio",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing",outlineOffset:"2px"},_invalid:{colorPalette:"red",borderColor:"red.500"},_disabled:{opacity:"0.5",cursor:"disabled"},"& .dot":{height:"100%",width:"100%",borderRadius:"full",bg:"currentColor",scale:"0.4"}},variants:{variant:{solid:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},subtle:{borderWidth:"1px",bg:"colorPalette.muted",borderColor:"colorPalette.muted",color:"transparent",_checked:{color:"colorPalette.fg"}},outline:{borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.fg",borderColor:"colorPalette.solid"},"& .dot":{scale:"0.6"}},inverted:{bg:"bg",borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.solid",borderColor:"currentcolor"}}},size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"}}},defaultVariants:{variant:"solid",size:"md"}}),separatorRecipe=defineRecipe({className:"chakra-separator",base:{display:"block",borderColor:"border"},variants:{variant:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"}},orientation:{vertical:{borderInlineStartWidth:"var(--separator-thickness)"},horizontal:{borderTopWidth:"var(--separator-thickness)"}},size:{xs:{"--separator-thickness":"0.5px"},sm:{"--separator-thickness":"1px"},md:{"--separator-thickness":"2px"},lg:{"--separator-thickness":"3px"}}},defaultVariants:{size:"sm",variant:"solid",orientation:"horizontal"}}),skeletonRecipe=defineRecipe({className:"chakra-skeleton",base:{},variants:{loading:{true:{borderRadius:"l2",boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none",flexShrink:"0","&::before, &::after, *":{visibility:"hidden"}},false:{background:"unset",animation:"fade-in var(--fade-duration, 0.1s) ease-out !important"}},variant:{pulse:{background:"bg.emphasized",animation:"pulse",animationDuration:"var(--duration, 1.2s)"},shine:{"--animate-from":"200%","--animate-to":"-200%","--start-color":"colors.bg.muted","--end-color":"colors.bg.emphasized",backgroundImage:"linear-gradient(270deg,var(--start-color),var(--end-color),var(--end-color),var(--start-color))",backgroundSize:"400% 100%",animation:"bg-position var(--duration, 5s) ease-in-out infinite"},none:{animation:"none"}}},defaultVariants:{variant:"pulse",loading:!0}}),skipNavLinkRecipe=defineRecipe({className:"chakra-skip-nav",base:{display:"inline-flex",bg:"bg.panel",padding:"2.5",borderRadius:"l2",fontWeight:"semibold",focusVisibleRing:"outside",textStyle:"sm",userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focusVisible:{clip:"auto",width:"auto",height:"auto",position:"fixed",top:"6",insetStart:"6"}}}),spinnerRecipe=defineRecipe({className:"chakra-spinner",base:{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderWidth:"2px",borderRadius:"full",width:"var(--spinner-size)",height:"var(--spinner-size)",animation:"spin",animationDuration:"slowest","--spinner-track-color":"transparent",borderBottomColor:"var(--spinner-track-color)",borderInlineStartColor:"var(--spinner-track-color)"},variants:{size:{inherit:{"--spinner-size":"1em"},xs:{"--spinner-size":"sizes.3"},sm:{"--spinner-size":"sizes.4"},md:{"--spinner-size":"sizes.5"},lg:{"--spinner-size":"sizes.8"},xl:{"--spinner-size":"sizes.10"}}},defaultVariants:{size:"md"}}),textareaRecipe=defineRecipe({className:"chakra-textarea",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},"--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{xs:{textStyle:"xs",px:"2",py:"1.5",scrollPaddingBottom:"1.5"},sm:{textStyle:"sm",px:"2.5",py:"2",scrollPaddingBottom:"2"},md:{textStyle:"sm",px:"3",py:"2",scrollPaddingBottom:"2"},lg:{textStyle:"md",px:"4",py:"3",scrollPaddingBottom:"3"},xl:{textStyle:"md",px:"4.5",py:"3.5",scrollPaddingBottom:"3.5"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),recipes={badge:badgeRecipe,button:buttonRecipe,code:codeRecipe,container:containerRecipe,heading:headingRecipe,input:inputRecipe,inputAddon:inputAddonRecipe,kbd:kbdRecipe,link:linkRecipe,mark:markRecipe,separator:separatorRecipe,skeleton:skeletonRecipe,skipNavLink:skipNavLinkRecipe,spinner:spinnerRecipe,textarea:textareaRecipe,icon:iconRecipe,checkmark:checkmarkRecipe,radiomark:radiomarkRecipe,colorSwatch:colorSwatchRecipe},semanticColors=defineSemanticTokens.colors({bg:{DEFAULT:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},emphasized:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},inverted:{value:{_light:"{colors.black}",_dark:"{colors.white}"}},panel:{value:{_light:"{colors.white}",_dark:"{colors.gray.950}"}},error:{value:{_light:"{colors.red.50}",_dark:"{colors.red.950}"}},warning:{value:{_light:"{colors.orange.50}",_dark:"{colors.orange.950}"}},success:{value:{_light:"{colors.green.50}",_dark:"{colors.green.950}"}},info:{value:{_light:"{colors.blue.50}",_dark:"{colors.blue.950}"}}},fg:{DEFAULT:{value:{_light:"{colors.black}",_dark:"{colors.gray.50}"}},muted:{value:{_light:"{colors.gray.600}",_dark:"{colors.gray.400}"}},subtle:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.500}"}},inverted:{value:{_light:"{colors.gray.50}",_dark:"{colors.black}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.300}"}},success:{value:{_light:"{colors.green.600}",_dark:"{colors.green.300}"}},info:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.300}"}}},border:{DEFAULT:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},inverted:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.500}",_dark:"{colors.orange.400}"}},success:{value:{_light:"{colors.green.500}",_dark:"{colors.green.400}"}},info:{value:{_light:"{colors.blue.500}",_dark:"{colors.blue.400}"}}},gray:{contrast:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},fg:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},subtle:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},muted:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},solid:{value:{_light:"{colors.gray.900}",_dark:"{colors.white}"}},focusRing:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.400}"}}},red:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.red.700}",_dark:"{colors.red.300}"}},subtle:{value:{_light:"{colors.red.100}",_dark:"{colors.red.900}"}},muted:{value:{_light:"{colors.red.200}",_dark:"{colors.red.800}"}},emphasized:{value:{_light:"{colors.red.300}",_dark:"{colors.red.700}"}},solid:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}},focusRing:{value:{_light:"{colors.red.400}",_dark:"{colors.red.400}"}}},orange:{contrast:{value:{_light:"white",_dark:"black"}},fg:{value:{_light:"{colors.orange.700}",_dark:"{colors.orange.300}"}},subtle:{value:{_light:"{colors.orange.100}",_dark:"{colors.orange.900}"}},muted:{value:{_light:"{colors.orange.200}",_dark:"{colors.orange.800}"}},emphasized:{value:{_light:"{colors.orange.300}",_dark:"{colors.orange.700}"}},solid:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}},focusRing:{value:{_light:"{colors.orange.400}",_dark:"{colors.orange.400}"}}},green:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.green.700}",_dark:"{colors.green.300}"}},subtle:{value:{_light:"{colors.green.100}",_dark:"{colors.green.900}"}},muted:{value:{_light:"{colors.green.200}",_dark:"{colors.green.800}"}},emphasized:{value:{_light:"{colors.green.300}",_dark:"{colors.green.700}"}},solid:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}},focusRing:{value:{_light:"{colors.green.400}",_dark:"{colors.green.400}"}}},blue:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.blue.700}",_dark:"{colors.blue.300}"}},subtle:{value:{_light:"{colors.blue.100}",_dark:"{colors.blue.900}"}},muted:{value:{_light:"{colors.blue.200}",_dark:"{colors.blue.800}"}},emphasized:{value:{_light:"{colors.blue.300}",_dark:"{colors.blue.700}"}},solid:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}},focusRing:{value:{_light:"{colors.blue.400}",_dark:"{colors.blue.400}"}}},yellow:{contrast:{value:{_light:"black",_dark:"black"}},fg:{value:{_light:"{colors.yellow.800}",_dark:"{colors.yellow.300}"}},subtle:{value:{_light:"{colors.yellow.100}",_dark:"{colors.yellow.900}"}},muted:{value:{_light:"{colors.yellow.200}",_dark:"{colors.yellow.800}"}},emphasized:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.700}"}},solid:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}},focusRing:{value:{_light:"{colors.yellow.400}",_dark:"{colors.yellow.400}"}}},teal:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.teal.700}",_dark:"{colors.teal.300}"}},subtle:{value:{_light:"{colors.teal.100}",_dark:"{colors.teal.900}"}},muted:{value:{_light:"{colors.teal.200}",_dark:"{colors.teal.800}"}},emphasized:{value:{_light:"{colors.teal.300}",_dark:"{colors.teal.700}"}},solid:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}},focusRing:{value:{_light:"{colors.teal.400}",_dark:"{colors.teal.400}"}}},purple:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.purple.700}",_dark:"{colors.purple.300}"}},subtle:{value:{_light:"{colors.purple.100}",_dark:"{colors.purple.900}"}},muted:{value:{_light:"{colors.purple.200}",_dark:"{colors.purple.800}"}},emphasized:{value:{_light:"{colors.purple.300}",_dark:"{colors.purple.700}"}},solid:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}},focusRing:{value:{_light:"{colors.purple.400}",_dark:"{colors.purple.400}"}}},pink:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.pink.700}",_dark:"{colors.pink.300}"}},subtle:{value:{_light:"{colors.pink.100}",_dark:"{colors.pink.900}"}},muted:{value:{_light:"{colors.pink.200}",_dark:"{colors.pink.800}"}},emphasized:{value:{_light:"{colors.pink.300}",_dark:"{colors.pink.700}"}},solid:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}},focusRing:{value:{_light:"{colors.pink.400}",_dark:"{colors.pink.400}"}}},cyan:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.cyan.700}",_dark:"{colors.cyan.300}"}},subtle:{value:{_light:"{colors.cyan.100}",_dark:"{colors.cyan.900}"}},muted:{value:{_light:"{colors.cyan.200}",_dark:"{colors.cyan.800}"}},emphasized:{value:{_light:"{colors.cyan.300}",_dark:"{colors.cyan.700}"}},solid:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}},focusRing:{value:{_light:"{colors.cyan.400}",_dark:"{colors.cyan.400}"}}}}),semanticRadii=defineSemanticTokens.radii({l1:{value:"{radii.xs}"},l2:{value:"{radii.sm}"},l3:{value:"{radii.md}"}}),semanticShadows=defineSemanticTokens.shadows({xs:{value:{_light:"0px 1px 2px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/20}",_dark:"0px 1px 1px {black/64}, 0px 0px 1px inset {colors.gray.300/20}"}},sm:{value:{_light:"0px 2px 4px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 2px 4px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},md:{value:{_light:"0px 4px 8px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 4px 8px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},lg:{value:{_light:"0px 8px 16px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 8px 16px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},xl:{value:{_light:"0px 16px 24px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 16px 24px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},"2xl":{value:{_light:"0px 24px 40px {colors.gray.900/16}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 24px 40px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},inner:{value:{_light:"inset 0 2px 4px 0 {black/5}",_dark:"inset 0 2px 4px 0 black"}},inset:{value:{_light:"inset 0 0 0 1px {black/5}",_dark:"inset 0 0 0 1px {colors.gray.300/5}"}}}),accordionAnatomy=anatomy$l.extendWith("itemBody"),actionBarAnatomy=createAnatomy("action-bar").parts("positioner","content","separator","selectionTrigger","closeTrigger"),alertAnatomy=createAnatomy("alert").parts("title","description","root","indicator","content"),breadcrumbAnatomy=createAnatomy("breadcrumb").parts("link","currentLink","item","list","root","ellipsis","separator"),blockquoteAnatomy=createAnatomy("blockquote").parts("root","icon","content","caption"),cardAnatomy=createAnatomy("card").parts("root","header","body","footer","title","description"),checkboxCardAnatomy=createAnatomy("checkbox-card",["root","control","label","description","addon","indicator","content"]),dataListAnatomy=createAnatomy("data-list").parts("root","item","itemLabel","itemValue"),dialogAnatomy=anatomy$h.extendWith("header","body","footer","backdrop"),drawerAnatomy=anatomy$h.extendWith("header","body","footer","backdrop"),editableAnatomy=anatomy$g.extendWith("textarea"),emptyStateAnatomy=createAnatomy("empty-state",["root","content","indicator","title","description"]),fieldAnatomy=fieldAnatomy$1.extendWith("requiredIndicator"),fieldsetAnatomy=fieldsetAnatomy$1.extendWith("content"),fileUploadAnatomy=anatomy$f.extendWith("itemContent","dropzoneContent","fileText"),listAnatomy=createAnatomy("list").parts("root","item","indicator"),menuAnatomy=anatomy$d.extendWith("itemCommand"),nativeSelectAnatomy=createAnatomy("select").parts("root","field","indicator"),popoverAnatomy=anatomy$a.extendWith("header","body","footer"),radioGroupAnatomy=anatomy$7.extendWith("itemAddon","itemIndicator"),radioCardAnatomy=radioGroupAnatomy.extendWith("itemContent","itemDescription"),ratingGroupAnatomy=anatomy$6.extendWith("itemIndicator"),selectAnatomy=anatomy$5.extendWith("indicatorGroup"),sliderAnatomy=anatomy$4.extendWith("markerIndicator"),statAnatomy=createAnatomy("stat").parts("root","label","helpText","valueText","valueUnit","indicator"),statusAnatomy=createAnatomy("status").parts("root","indicator"),stepsAnatomy=createAnatomy("steps",["root","list","item","trigger","indicator","separator","content","title","description","nextTrigger","prevTrigger","progress"]),switchAnatomy=anatomy$3.extendWith("indicator"),tableAnatomy=createAnatomy("table").parts("root","header","body","row","columnHeader","cell","footer","caption"),toastAnatomy=createAnatomy("toast").parts("root","title","description","indicator","closeTrigger","actionTrigger"),tabsAnatomy=createAnatomy("tabs").parts("root","trigger","list","content","contentGroup","indicator"),tagAnatomy=createAnatomy("tag").parts("root","label","closeTrigger","startElement","endElement"),timelineAnatomy=createAnatomy("timeline").parts("root","item","content","separator","indicator","connector","title","description"),colorPickerAnatomy=colorPickerAnatomy$1.extendWith("channelText"),accordionSlotRecipe=defineSlotRecipe({className:"chakra-accordion",slots:accordionAnatomy.keys(),base:{root:{width:"full","--accordion-radius":"radii.l2"},item:{overflowAnchor:"none"},itemTrigger:{display:"flex",alignItems:"center",textAlign:"start",width:"full",outline:"0",gap:"3",fontWeight:"medium",borderRadius:"var(--accordion-radius)",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{layerStyle:"disabled"}},itemBody:{pt:"var(--accordion-padding-y)",pb:"calc(var(--accordion-padding-y) * 2)"},itemContent:{overflow:"hidden",borderRadius:"var(--accordion-radius)",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}},itemIndicator:{transition:"rotate 0.2s",transformOrigin:"center",color:"fg.subtle",_open:{rotate:"180deg"},_icon:{width:"1.2em",height:"1.2em"}}},variants:{variant:{outline:{item:{borderBottomWidth:"1px"}},subtle:{itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{borderRadius:"var(--accordion-radius)",_open:{bg:"colorPalette.subtle"}}},enclosed:{root:{borderWidth:"1px",borderRadius:"var(--accordion-radius)",divideY:"1px",overflow:"hidden"},itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{_open:{bg:"bg.subtle"}}},plain:{}},size:{sm:{root:{"--accordion-padding-x":"spacing.3","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"sm",py:"var(--accordion-padding-y)"}},md:{root:{"--accordion-padding-x":"spacing.4","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"md",py:"var(--accordion-padding-y)"}},lg:{root:{"--accordion-padding-x":"spacing.4.5","--accordion-padding-y":"spacing.2.5"},itemTrigger:{textStyle:"lg",py:"var(--accordion-padding-y)"}}}},defaultVariants:{size:"md",variant:"outline"}}),actionBarSlotRecipe=defineSlotRecipe({className:"chakra-action-bar",slots:actionBarAnatomy.keys(),base:{positioner:{position:"fixed",display:"flex",justifyContent:"center",pointerEvents:"none",insetInline:"0",top:"unset",bottom:"calc(env(safe-area-inset-bottom) + 20px)"},content:{bg:"bg.panel",shadow:"md",display:"flex",alignItems:"center",gap:"3",borderRadius:"l3",py:"2.5",px:"3",pointerEvents:"auto",translate:"calc(-1 * var(--scrollbar-width) / 2) 0px",_open:{animationName:"slide-from-bottom, fade-in",animationDuration:"moderate"},_closed:{animationName:"slide-to-bottom, fade-out",animationDuration:"faster"}},separator:{width:"1px",height:"5",bg:"border"},selectionTrigger:{display:"inline-flex",alignItems:"center",gap:"2",alignSelf:"stretch",textStyle:"sm",px:"4",py:"1",borderRadius:"l2",borderWidth:"1px",borderStyle:"dashed"}}}),alertSlotRecipe=defineSlotRecipe({slots:alertAnatomy.keys(),className:"chakra-alert",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",borderRadius:"l3"},title:{fontWeight:"medium"},description:{display:"inline"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"1em",height:"1em",_icon:{boxSize:"full"}},content:{display:"flex",flex:"1",gap:"1"}},variants:{status:{info:{root:{colorPalette:"blue"}},warning:{root:{colorPalette:"orange"}},success:{root:{colorPalette:"green"}},error:{root:{colorPalette:"red"}},neutral:{root:{colorPalette:"gray"}}},inline:{true:{content:{display:"inline-flex",flexDirection:"row",alignItems:"center"}},false:{content:{display:"flex",flexDirection:"column"}}},variant:{subtle:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg"}},surface:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"},indicator:{color:"colorPalette.contrast"}}},size:{sm:{root:{gap:"2",px:"3",py:"3",textStyle:"xs"},indicator:{textStyle:"lg"}},md:{root:{gap:"3",px:"4",py:"4",textStyle:"sm"},indicator:{textStyle:"xl"}},lg:{root:{gap:"3",px:"4",py:"4",textStyle:"md"},indicator:{textStyle:"2xl"}}}},defaultVariants:{status:"info",variant:"subtle",size:"md",inline:!1}}),avatarSlotRecipe=defineSlotRecipe({slots:anatomy$k.keys(),className:"chakra-avatar",base:{root:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"medium",position:"relative",verticalAlign:"top",flexShrink:"0",userSelect:"none",width:"var(--avatar-size)",height:"var(--avatar-size)",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)","&[data-group-item]":{borderWidth:"2px",borderColor:"bg"}},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--avatar-radius)"},fallback:{lineHeight:"1",textTransform:"uppercase",fontWeight:"medium",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)"}},variants:{size:{full:{root:{"--avatar-size":"100%","--avatar-font-size":"100%"}},"2xs":{root:{"--avatar-font-size":"fontSizes.2xs","--avatar-size":"sizes.6"}},xs:{root:{"--avatar-font-size":"fontSizes.xs","--avatar-size":"sizes.8"}},sm:{root:{"--avatar-font-size":"fontSizes.sm","--avatar-size":"sizes.9"}},md:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.10"}},lg:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.11"}},xl:{root:{"--avatar-font-size":"fontSizes.lg","--avatar-size":"sizes.12"}},"2xl":{root:{"--avatar-font-size":"fontSizes.xl","--avatar-size":"sizes.16"}}},variant:{solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},subtle:{root:{bg:"colorPalette.muted",color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",borderWidth:"1px",borderColor:"colorPalette.muted"}}},shape:{square:{},rounded:{root:{"--avatar-radius":"radii.l3"}},full:{root:{"--avatar-radius":"radii.full"}}},borderless:{true:{root:{"&[data-group-item]":{borderWidth:"0px"}}}}},defaultVariants:{size:"md",shape:"full",variant:"subtle"}}),blockquoteSlotRecipe=defineSlotRecipe({className:"chakra-blockquote",slots:blockquoteAnatomy.keys(),base:{root:{position:"relative",display:"flex",flexDirection:"column",gap:"2"},caption:{textStyle:"sm",color:"fg.muted"},icon:{boxSize:"5"}},variants:{justify:{start:{root:{alignItems:"flex-start",textAlign:"start"}},center:{root:{alignItems:"center",textAlign:"center"}},end:{root:{alignItems:"flex-end",textAlign:"end"}}},variant:{subtle:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.muted"},icon:{color:"colorPalette.fg"}},solid:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.solid"},icon:{color:"colorPalette.solid"}},plain:{root:{paddingX:"5"},icon:{color:"colorPalette.solid"}}}},defaultVariants:{variant:"subtle",justify:"start"}}),breadcrumbSlotRecipe=defineSlotRecipe({className:"chakra-breadcrumb",slots:breadcrumbAnatomy.keys(),base:{list:{display:"flex",alignItems:"center",wordBreak:"break-word",color:"fg.muted",listStyle:"none"},link:{outline:"0",textDecoration:"none",borderRadius:"l1",focusRing:"outside",display:"inline-flex",alignItems:"center",gap:"2"},item:{display:"inline-flex",alignItems:"center"},separator:{color:"fg.muted",opacity:"0.8",_icon:{boxSize:"1em"},_rtl:{rotate:"180deg"}},ellipsis:{display:"inline-flex",alignItems:"center",justifyContent:"center",_icon:{boxSize:"1em"}}},variants:{variant:{underline:{link:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"0.2em",textDecorationColor:"colorPalette.muted"},currentLink:{color:"colorPalette.fg"}},plain:{link:{color:"fg.muted",_hover:{color:"fg"}},currentLink:{color:"fg"}}},size:{sm:{list:{gap:"1",textStyle:"xs"}},md:{list:{gap:"1.5",textStyle:"sm"}},lg:{list:{gap:"2",textStyle:"md"}}}},defaultVariants:{variant:"plain",size:"md"}}),cardSlotRecipe=defineSlotRecipe({className:"chakra-card",slots:cardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:"0",wordWrap:"break-word",borderRadius:"l3",color:"fg",textAlign:"start"},title:{fontWeight:"semibold"},description:{color:"fg.muted",fontSize:"sm"},header:{paddingInline:"var(--card-padding)",paddingTop:"var(--card-padding)",display:"flex",flexDirection:"column",gap:"1.5"},body:{padding:"var(--card-padding)",flex:"1",display:"flex",flexDirection:"column"},footer:{display:"flex",alignItems:"center",gap:"2",paddingInline:"var(--card-padding)",paddingBottom:"var(--card-padding)"}},variants:{size:{sm:{root:{"--card-padding":"spacing.4"},title:{textStyle:"md"}},md:{root:{"--card-padding":"spacing.6"},title:{textStyle:"lg"}},lg:{root:{"--card-padding":"spacing.7"},title:{textStyle:"xl"}}},variant:{elevated:{root:{bg:"bg.panel",boxShadow:"md"}},outline:{root:{bg:"bg.panel",borderWidth:"1px",borderColor:"border"}},subtle:{root:{bg:"bg.muted"}}}},defaultVariants:{variant:"outline",size:"md"}});var ed,td,rd,nd,id,sd,od,ad,ld,ud,cd,dd,hd,fd;const checkboxSlotRecipe=defineSlotRecipe({slots:checkboxAnatomy.keys(),className:"chakra-checkbox",base:{root:{display:"inline-flex",gap:"2",alignItems:"center",verticalAlign:"top",position:"relative"},control:checkmarkRecipe.base,label:{fontWeight:"medium",userSelect:"none",_disabled:{opacity:"0.5"}}},variants:{size:{xs:{root:{gap:"1.5"},label:{textStyle:"xs"},control:(td=(ed=checkmarkRecipe.variants)==null?void 0:ed.size)==null?void 0:td.xs},sm:{root:{gap:"2"},label:{textStyle:"sm"},control:(nd=(rd=checkmarkRecipe.variants)==null?void 0:rd.size)==null?void 0:nd.sm},md:{root:{gap:"2.5"},label:{textStyle:"sm"},control:(sd=(id=checkmarkRecipe.variants)==null?void 0:id.size)==null?void 0:sd.md},lg:{root:{gap:"3"},label:{textStyle:"md"},control:(ad=(od=checkmarkRecipe.variants)==null?void 0:od.size)==null?void 0:ad.lg}},variant:{outline:{control:(ud=(ld=checkmarkRecipe.variants)==null?void 0:ld.variant)==null?void 0:ud.outline},solid:{control:(dd=(cd=checkmarkRecipe.variants)==null?void 0:cd.variant)==null?void 0:dd.solid},subtle:{control:(fd=(hd=checkmarkRecipe.variants)==null?void 0:hd.variant)==null?void 0:fd.subtle}}},defaultVariants:{variant:"solid",size:"md"}});var pd,md,gd,yd,vd,bd,_d;const checkboxCardSlotRecipe=defineSlotRecipe({slots:checkboxCardAnatomy.keys(),className:"chakra-checkbox-card",base:{root:{display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",flex:"1",focusVisibleRing:"outside",_disabled:{opacity:"0.8"},_invalid:{outline:"2px solid",outlineColor:"border.error"}},control:{display:"inline-flex",flex:"1",position:"relative",borderRadius:"inherit",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"},label:{fontWeight:"medium",display:"flex",alignItems:"center",gap:"2",flex:"1",_disabled:{opacity:"0.5"}},description:{opacity:"0.64",textStyle:"sm",_disabled:{opacity:"0.5"}},addon:{_disabled:{opacity:"0.5"}},indicator:checkmarkRecipe.base,content:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"}},variants:{size:{sm:{root:{textStyle:"sm"},control:{padding:"3",gap:"1.5"},addon:{px:"3",py:"1.5",borderTopWidth:"1px"},indicator:(pd=checkmarkRecipe.variants)==null?void 0:pd.size.sm},md:{root:{textStyle:"sm"},control:{padding:"4",gap:"2.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(md=checkmarkRecipe.variants)==null?void 0:md.size.md},lg:{root:{textStyle:"md"},control:{padding:"4",gap:"3.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(gd=checkmarkRecipe.variants)==null?void 0:gd.size.lg}},variant:{surface:{root:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"},_disabled:{bg:"bg.muted"}},indicator:(yd=checkmarkRecipe.variants)==null?void 0:yd.variant.solid},subtle:{root:{bg:"bg.muted"},control:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},indicator:(vd=checkmarkRecipe.variants)==null?void 0:vd.variant.plain},outline:{root:{borderWidth:"1px",borderColor:"border",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},indicator:(bd=checkmarkRecipe.variants)==null?void 0:bd.variant.solid},solid:{root:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},indicator:(_d=checkmarkRecipe.variants)==null?void 0:_d.variant.inverted}},justify:{start:{root:{"--checkbox-card-justify":"flex-start"}},end:{root:{"--checkbox-card-justify":"flex-end"}},center:{root:{"--checkbox-card-justify":"center"}}},align:{start:{root:{"--checkbox-card-align":"flex-start"},content:{textAlign:"start"}},end:{root:{"--checkbox-card-align":"flex-end"},content:{textAlign:"end"}},center:{root:{"--checkbox-card-align":"center"},content:{textAlign:"center"}}},orientation:{vertical:{control:{flexDirection:"column"}},horizontal:{control:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}}),collapsibleSlotRecipe=defineSlotRecipe({slots:anatomy$n.keys(),className:"chakra-collapsible",base:{content:{overflow:"hidden",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}}}});var xd,wd,Sd,Ed,Td,Pd,Cd,Ad,Rd,Id,Od,Md,kd,Dd,Fd,Ld,$d,Nd;const colorPickerSlotRecipe=defineSlotRecipe({className:"colorPicker",slots:colorPickerAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},label:{color:"fg",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},valueText:{textAlign:"start"},control:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2",position:"relative"},swatchTrigger:{display:"flex",alignItems:"center",justifyContent:"center"},trigger:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexShrink:"0",gap:"2",textStyle:"sm",minH:"var(--input-height)",minW:"var(--input-height)",px:"1",rounded:"l2",_disabled:{opacity:"0.5"},"--focus-color":"colors.colorPalette.focusRing","&:focus-visible":{borderColor:"var(--focus-color)",outline:"1px solid var(--focus-color)"},"&[data-fit-content]":{"--input-height":"unset",px:"0",border:"0"}},content:{display:"flex",flexDirection:"column",bg:"bg.panel",borderRadius:"l3",boxShadow:"lg",width:"64",p:"4",gap:"3",zIndex:"dropdown",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},area:{height:"180px",borderRadius:"l2",overflow:"hidden"},areaThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",focusVisibleRing:"mixed",focusRingColor:"white"},areaBackground:{height:"full"},channelSlider:{borderRadius:"l2",flex:"1"},channelSliderTrack:{height:"var(--slider-height)",borderRadius:"inherit",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"},channelText:{textStyle:"xs",color:"fg.muted",fontWeight:"medium",textTransform:"capitalize"},swatchGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2"},swatch:{...colorSwatchRecipe.base,borderRadius:"l1"},swatchIndicator:{color:"white",rounded:"full"},channelSliderThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",transform:"translate(-50%, -50%)",focusVisibleRing:"outside",focusRingOffset:"1px"},channelInput:{...inputRecipe.base,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}},formatSelect:{textStyle:"xs",textTransform:"uppercase",borderWidth:"1px",minH:"6",focusRing:"inside",rounded:"l2"},transparencyGrid:{borderRadius:"l2"},view:{display:"flex",flexDirection:"column",gap:"2"}},variants:{size:{"2xs":{channelInput:(wd=(xd=inputRecipe.variants)==null?void 0:xd.size)==null?void 0:wd["2xs"],swatch:{"--swatch-size":"sizes.4.5"},trigger:{"--input-height":"sizes.7"},area:{"--thumb-size":"sizes.3"},channelSlider:{"--slider-height":"sizes.3","--thumb-size":"sizes.3"}},xs:{channelInput:(Ed=(Sd=inputRecipe.variants)==null?void 0:Sd.size)==null?void 0:Ed.xs,swatch:{"--swatch-size":"sizes.5"},trigger:{"--input-height":"sizes.8"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},sm:{channelInput:(Pd=(Td=inputRecipe.variants)==null?void 0:Td.size)==null?void 0:Pd.sm,swatch:{"--swatch-size":"sizes.6"},trigger:{"--input-height":"sizes.9"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},md:{channelInput:(Ad=(Cd=inputRecipe.variants)==null?void 0:Cd.size)==null?void 0:Ad.md,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.10"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},lg:{channelInput:(Id=(Rd=inputRecipe.variants)==null?void 0:Rd.size)==null?void 0:Id.lg,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.11"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},xl:{channelInput:(Md=(Od=inputRecipe.variants)==null?void 0:Od.size)==null?void 0:Md.xl,swatch:{"--swatch-size":"sizes.8"},trigger:{"--input-height":"sizes.12"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},"2xl":{channelInput:(Dd=(kd=inputRecipe.variants)==null?void 0:kd.size)==null?void 0:Dd["2xl"],swatch:{"--swatch-size":"sizes.10"},trigger:{"--input-height":"sizes.16"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}}},variant:{outline:{channelInput:(Ld=(Fd=inputRecipe.variants)==null?void 0:Fd.variant)==null?void 0:Ld.outline,trigger:{borderWidth:"1px"}},subtle:{channelInput:(Nd=($d=inputRecipe.variants)==null?void 0:$d.variant)==null?void 0:Nd.subtle,trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}}},defaultVariants:{size:"md",variant:"outline"}}),dataListSlotRecipe=defineSlotRecipe({slots:dataListAnatomy.keys(),className:"chakra-data-list",base:{itemLabel:{display:"flex",alignItems:"center",gap:"1"},itemValue:{display:"flex",minWidth:"0",flex:"1"}},variants:{orientation:{horizontal:{root:{display:"flex",flexDirection:"column"},item:{display:"inline-flex",alignItems:"center",gap:"4"},itemLabel:{minWidth:"120px"}},vertical:{root:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"column",gap:"1"}}},size:{sm:{root:{gap:"3"},item:{textStyle:"xs"}},md:{root:{gap:"4"},item:{textStyle:"sm"}},lg:{root:{gap:"5"},item:{textStyle:"md"}}},variant:{subtle:{itemLabel:{color:"fg.muted"}},bold:{itemLabel:{fontWeight:"medium"},itemValue:{color:"fg.muted"}}}},defaultVariants:{size:"md",orientation:"vertical",variant:"subtle"}}),dialogSlotRecipe=defineSlotRecipe({slots:dialogAnatomy.keys(),className:"chakra-dialog",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",left:0,top:0,w:"100vw",h:"100dvh",zIndex:"overlay",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",left:0,top:0,"--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",justifyContent:"center",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,borderRadius:"l3",textStyle:"sm",my:"var(--dialog-margin, var(--dialog-base-margin))","--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"moderate"},_closed:{animationDuration:"faster"}},header:{display:"flex",gap:"2",flex:0,px:"6",pt:"6",pb:"4"},body:{flex:"1",px:"6",pt:"2",pb:"6"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"},closeTrigger:{pos:"absolute",top:"2",insetEnd:"2"}},variants:{placement:{center:{positioner:{alignItems:"center"},content:{"--dialog-base-margin":"auto",mx:"auto"}},top:{positioner:{alignItems:"flex-start"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}},bottom:{positioner:{alignItems:"flex-end"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}}},scrollBehavior:{inside:{positioner:{overflow:"hidden"},content:{maxH:"calc(100% - 7.5rem)"},body:{overflow:"auto"}},outside:{positioner:{overflow:"auto",pointerEvents:"auto"}}},size:{xs:{content:{maxW:"sm"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},cover:{positioner:{padding:"10"},content:{width:"100%",height:"100%","--dialog-margin":"0"}},full:{content:{maxW:"100vw",minH:"100vh","--dialog-margin":"0",borderRadius:"0"}}},motionPreset:{scale:{content:{_open:{animationName:"scale-in, fade-in"},_closed:{animationName:"scale-out, fade-out"}}},"slide-in-bottom":{content:{_open:{animationName:"slide-from-bottom, fade-in"},_closed:{animationName:"slide-to-bottom, fade-out"}}},"slide-in-top":{content:{_open:{animationName:"slide-from-top, fade-in"},_closed:{animationName:"slide-to-top, fade-out"}}},"slide-in-left":{content:{_open:{animationName:"slide-from-left, fade-in"},_closed:{animationName:"slide-to-left, fade-out"}}},"slide-in-right":{content:{_open:{animationName:"slide-from-right, fade-in"},_closed:{animationName:"slide-to-right, fade-out"}}},none:{}}},defaultVariants:{size:"md",scrollBehavior:"outside",placement:"top",motionPreset:"scale"}}),drawerSlotRecipe=defineSlotRecipe({slots:drawerAnatomy.keys(),className:"chakra-drawer",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",insetInlineStart:0,top:0,w:"100vw",h:"100dvh",zIndex:"overlay",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",insetInlineStart:0,top:0,zIndex:"modal",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,zIndex:"modal",textStyle:"sm",maxH:"100dvh",color:"inherit",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"slowest",animationTimingFunction:"ease-in-smooth"},_closed:{animationDuration:"slower",animationTimingFunction:"ease-in-smooth"}},header:{display:"flex",alignItems:"center",gap:"2",flex:0,px:"6",pt:"6",pb:"4"},body:{px:"6",py:"2",flex:"1",overflow:"auto"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{flex:"1",textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"},closeTrigger:{pos:"absolute",top:"3",insetEnd:"2"}},variants:{size:{xs:{content:{maxW:"xs"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},full:{content:{maxW:"100vw",h:"100dvh"}}},placement:{start:{positioner:{justifyContent:"flex-start"},content:{_open:{animationName:{base:"slide-from-left-full, fade-in",_rtl:"slide-from-right-full, fade-in"}},_closed:{animationName:{base:"slide-to-left-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},end:{positioner:{justifyContent:"flex-end"},content:{_open:{animationName:{base:"slide-from-right-full, fade-in",_rtl:"slide-from-left-full, fade-in"}},_closed:{animationName:{base:"slide-to-right-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},top:{positioner:{alignItems:"flex-start"},content:{maxW:"100%",_open:{animationName:"slide-from-top-full, fade-in"},_closed:{animationName:"slide-to-top-full, fade-out"}}},bottom:{positioner:{alignItems:"flex-end"},content:{maxW:"100%",_open:{animationName:"slide-from-bottom-full, fade-in"},_closed:{animationName:"slide-to-bottom-full, fade-out"}}}},contained:{true:{positioner:{padding:"4"},content:{borderRadius:"l3"}}}},defaultVariants:{size:"xs",placement:"end"}}),sharedStyles=defineStyle({fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",borderRadius:"l2"}),editableSlotRecipe=defineSlotRecipe({slots:editableAnatomy.keys(),className:"chakra-editable",base:{root:{display:"inline-flex",alignItems:"center",position:"relative",gap:"1.5",width:"full"},preview:{...sharedStyles,py:"1",px:"1",display:"inline-flex",alignItems:"center",transitionProperty:"common",transitionDuration:"normal",cursor:"text",_hover:{bg:"bg.muted"},_disabled:{userSelect:"none"}},input:{...sharedStyles,outline:"0",py:"1",px:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",focusVisibleRing:"inside",focusRingWidth:"2px",_placeholder:{opacity:.6}},control:{display:"inline-flex",alignItems:"center",gap:"1.5"}},variants:{size:{sm:{root:{textStyle:"sm"},preview:{minH:"8"},input:{minH:"8"}},md:{root:{textStyle:"sm"},preview:{minH:"9"},input:{minH:"9"}},lg:{root:{textStyle:"md"},preview:{minH:"10"},input:{minH:"10"}}}},defaultVariants:{size:"md"}}),emptyStateSlotRecipe=defineSlotRecipe({slots:emptyStateAnatomy.keys(),className:"chakra-empty-state",base:{root:{width:"full"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.subtle",_icon:{boxSize:"1em"}},title:{fontWeight:"semibold"},description:{textStyle:"sm",color:"fg.muted"}},variants:{size:{sm:{root:{px:"4",py:"6"},title:{textStyle:"md"},content:{gap:"4"},indicator:{textStyle:"2xl"}},md:{root:{px:"8",py:"12"},title:{textStyle:"lg"},content:{gap:"6"},indicator:{textStyle:"4xl"}},lg:{root:{px:"12",py:"16"},title:{textStyle:"xl"},content:{gap:"8"},indicator:{textStyle:"6xl"}}}},defaultVariants:{size:"md"}}),fieldSlotRecipe=defineSlotRecipe({className:"chakra-field",slots:fieldAnatomy.keys(),base:{requiredIndicator:{color:"fg.error",lineHeight:"1"},root:{display:"flex",width:"100%",position:"relative",gap:"1.5"},label:{display:"flex",alignItems:"center",textAlign:"start",textStyle:"sm",fontWeight:"medium",gap:"1",userSelect:"none",_disabled:{opacity:"0.5"}},errorText:{display:"inline-flex",alignItems:"center",fontWeight:"medium",gap:"1",color:"fg.error",textStyle:"xs"},helperText:{color:"fg.muted",textStyle:"xs"}},variants:{orientation:{vertical:{root:{flexDirection:"column",alignItems:"flex-start"}},horizontal:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},label:{flex:"0 0 var(--field-label-width, 80px)"}}}},defaultVariants:{orientation:"vertical"}}),fieldsetSlotRecipe=defineSlotRecipe({className:"fieldset",slots:fieldsetAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",width:"full"},content:{display:"flex",flexDirection:"column",width:"full"},legend:{color:"fg",fontWeight:"medium",_disabled:{opacity:"0.5"}},helperText:{color:"fg.muted",textStyle:"sm"},errorText:{display:"inline-flex",alignItems:"center",color:"fg.error",gap:"2",fontWeight:"medium",textStyle:"sm"}},variants:{size:{sm:{root:{spaceY:"2"},content:{gap:"1.5"},legend:{textStyle:"sm"}},md:{root:{spaceY:"4"},content:{gap:"4"},legend:{textStyle:"sm"}},lg:{root:{spaceY:"6"},content:{gap:"4"},legend:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),fileUploadSlotRecipe=defineSlotRecipe({className:"chakra-file-upload",slots:fileUploadAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"flex-start"},label:{fontWeight:"medium",textStyle:"sm"},dropzone:{background:"bg",borderRadius:"l3",borderWidth:"2px",borderStyle:"dashed",display:"flex",alignItems:"center",flexDirection:"column",gap:"4",justifyContent:"center",minHeight:"2xs",px:"3",py:"2",transition:"backgrounds",focusVisibleRing:"outside",_hover:{bg:"bg.subtle"},_dragging:{bg:"colorPalette.subtle",borderStyle:"solid",borderColor:"colorPalette.solid"}},dropzoneContent:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"1",textStyle:"sm"},item:{pos:"relative",textStyle:"sm",animationName:"fade-in",animationDuration:"moderate",background:"bg",borderRadius:"l2",borderWidth:"1px",width:"100%",display:"flex",alignItems:"center",gap:"3",p:"4"},itemGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"3",_empty:{display:"none"}},itemName:{color:"fg",fontWeight:"medium",lineClamp:"1"},itemContent:{display:"flex",flexDirection:"column",gap:"0.5",flex:"1"},itemSizeText:{color:"fg.muted",textStyle:"xs"},itemDeleteTrigger:{display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-start",boxSize:"5",p:"2px",color:"fg.muted",cursor:"button"},itemPreview:{color:"fg.muted",_icon:{boxSize:"4.5"}}},defaultVariants:{}}),hoverCardSlotRecipe=defineSlotRecipe({className:"chakra-hover-card",slots:anatomy$e.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--hovercard-bg":"colors.bg.panel",bg:"var(--hovercard-bg)",boxShadow:"lg",maxWidth:"80",borderRadius:"l3",zIndex:"popover",transformOrigin:"var(--transform-origin)",outline:"0",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--hovercard-bg)"},arrowTip:{borderTopWidth:"0.5px",borderInlineStartWidth:"0.5px"}},variants:{size:{xs:{content:{padding:"3"}},sm:{content:{padding:"4"}},md:{content:{padding:"5"}},lg:{content:{padding:"6"}}}},defaultVariants:{size:"md"}}),listSlotRecipe=defineSlotRecipe({className:"chakra-list",slots:listAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"var(--list-gap)","& :where(ul, ol)":{marginTop:"var(--list-gap)"}},item:{whiteSpace:"normal",display:"list-item"},indicator:{marginEnd:"2",minHeight:"1lh",flexShrink:0,display:"inline-block",verticalAlign:"middle"}},variants:{variant:{marker:{root:{listStyle:"revert"},item:{_marker:{color:"fg.subtle"}}},plain:{item:{alignItems:"flex-start",display:"inline-flex"}}},align:{center:{item:{alignItems:"center"}},start:{item:{alignItems:"flex-start"}},end:{item:{alignItems:"flex-end"}}}},defaultVariants:{variant:"marker"}}),menuSlotRecipe=defineSlotRecipe({className:"chakra-menu",slots:menuAnatomy.keys(),base:{content:{outline:0,bg:"bg.panel",boxShadow:"lg",color:"fg",maxHeight:"var(--available-height)","--menu-z-index":"zIndex.dropdown",zIndex:"calc(var(--menu-z-index) + var(--layer-index, 0))",borderRadius:"l2",overflow:"hidden",overflowY:"auto",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},item:{textDecoration:"none",color:"fg",userSelect:"none",borderRadius:"l1",width:"100%",display:"flex",cursor:"menuitem",alignItems:"center",textAlign:"start",position:"relative",flex:"0 0 auto",outline:0,_disabled:{layerStyle:"disabled"},"&[data-type]":{ps:"8"}},itemText:{flex:"1"},itemIndicator:{position:"absolute",insetStart:"2",transform:"translateY(-50%)",top:"50%"},itemGroupLabel:{px:"2",py:"1.5",fontWeight:"semibold",textStyle:"sm"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},itemCommand:{opacity:"0.6",textStyle:"xs",ms:"auto",ps:"4",letterSpacing:"widest",fontFamily:"inherit"},separator:{height:"1px",bg:"bg.muted",my:"1",mx:"-1"}},variants:{variant:{subtle:{item:{_highlighted:{bg:"bg.emphasized/60"}}},solid:{item:{_highlighted:{bg:"colorPalette.solid",color:"colorPalette.contrast"}}}},size:{sm:{content:{minW:"8rem",padding:"1"},item:{gap:"1",textStyle:"xs",py:"1",px:"1.5"}},md:{content:{minW:"8rem",padding:"1.5"},item:{gap:"2",textStyle:"sm",py:"1.5",px:"2"}}}},defaultVariants:{size:"md",variant:"subtle"}}),selectSlotRecipe=defineSlotRecipe({className:"chakra-select",slots:selectAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",width:"full"},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",minH:"var(--select-trigger-height)","--input-height":"var(--select-trigger-height)",px:"var(--select-trigger-padding-x)",borderRadius:"l2",userSelect:"none",textAlign:"start",focusVisibleRing:"inside",_placeholderShown:{color:"fg.muted/80"},_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"}},indicatorGroup:{display:"flex",alignItems:"center",gap:"1",pos:"absolute",right:"0",top:"0",bottom:"0",px:"var(--select-trigger-padding-x)",pointerEvents:"none"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:{base:"fg.muted",_disabled:"fg.subtle",_invalid:"fg.error"}},content:{background:"bg.panel",display:"flex",flexDirection:"column",zIndex:"dropdown",borderRadius:"l2",outline:0,maxH:"96",overflowY:"auto",boxShadow:"md",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"fastest"}},item:{position:"relative",userSelect:"none",display:"flex",alignItems:"center",gap:"2",cursor:"option",justifyContent:"space-between",flex:"1",textAlign:"start",borderRadius:"l1",_highlighted:{bg:"bg.emphasized/60"},_disabled:{pointerEvents:"none",opacity:"0.5"},_icon:{width:"4",height:"4"}},control:{pos:"relative"},itemText:{flex:"1"},itemGroup:{_first:{mt:"0"}},itemGroupLabel:{py:"1",fontWeight:"medium"},label:{fontWeight:"medium",userSelect:"none",textStyle:"sm",_disabled:{layerStyle:"disabled"}},valueText:{lineClamp:"1",maxW:"80%"},clearTrigger:{color:"fg.muted",pointerEvents:"auto",focusVisibleRing:"inside",focusRingWidth:"2px",rounded:"l1"}},variants:{variant:{outline:{trigger:{bg:"transparent",borderWidth:"1px",borderColor:"border",_expanded:{borderColor:"border.emphasized"}}},subtle:{trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}},size:{xs:{root:{"--select-trigger-height":"sizes.8","--select-trigger-padding-x":"spacing.2"},content:{p:"1",gap:"1",textStyle:"xs"},trigger:{textStyle:"xs",gap:"1"},item:{py:"1",px:"2"},itemGroupLabel:{py:"1",px:"2"},indicator:{_icon:{width:"3.5",height:"3.5"}}},sm:{root:{"--select-trigger-height":"sizes.9","--select-trigger-padding-x":"spacing.2.5"},content:{p:"1",textStyle:"sm"},trigger:{textStyle:"sm",gap:"1"},indicator:{_icon:{width:"4",height:"4"}},item:{py:"1",px:"1.5"},itemGroup:{mt:"1"},itemGroupLabel:{py:"1",px:"1.5"}},md:{root:{"--select-trigger-height":"sizes.10","--select-trigger-padding-x":"spacing.3"},content:{p:"1",textStyle:"sm"},itemGroup:{mt:"1.5"},item:{py:"1.5",px:"2"},itemIndicator:{display:"flex",alignItems:"center",justifyContent:"center"},itemGroupLabel:{py:"1.5",px:"2"},trigger:{textStyle:"sm",gap:"2"},indicator:{_icon:{width:"4",height:"4"}}},lg:{root:{"--select-trigger-height":"sizes.12","--select-trigger-padding-x":"spacing.4"},content:{p:"1.5",textStyle:"md"},itemGroup:{mt:"2"},item:{py:"2",px:"3"},itemGroupLabel:{py:"2",px:"3"},trigger:{textStyle:"md",py:"3",gap:"2"},indicator:{_icon:{width:"5",height:"5"}}}}},defaultVariants:{size:"md",variant:"outline"}});var Bd,jd;const nativeSelectSlotRecipe=defineSlotRecipe({className:"chakra-native-select",slots:nativeSelectAnatomy.keys(),base:{root:{height:"fit-content",display:"flex",width:"100%",position:"relative"},field:{width:"100%",minWidth:"0",outline:"0",appearance:"none",borderRadius:"l2","--error-color":"colors.border.error",_disabled:{layerStyle:"disabled"},_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"},focusVisibleRing:"inside",lineHeight:"normal","& > option, & > optgroup":{bg:"bg"}},indicator:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)",height:"100%",color:"fg.muted",_disabled:{opacity:"0.5"},_invalid:{color:"fg.error"},_icon:{width:"1em",height:"1em"}}},variants:{variant:{outline:{field:(Bd=selectSlotRecipe.variants)==null?void 0:Bd.variant.outline.trigger},subtle:{field:(jd=selectSlotRecipe.variants)==null?void 0:jd.variant.subtle.trigger},plain:{field:{bg:"transparent",color:"fg",focusRingWidth:"2px"}}},size:{xs:{field:{textStyle:"xs",ps:"2",pe:"6",height:"6"},indicator:{textStyle:"sm",insetEnd:"1.5"}},sm:{field:{textStyle:"sm",ps:"2.5",pe:"8",height:"8"},indicator:{textStyle:"md",insetEnd:"2"}},md:{field:{textStyle:"sm",ps:"3",pe:"8",height:"10"},indicator:{textStyle:"lg",insetEnd:"2"}},lg:{field:{textStyle:"md",ps:"4",pe:"8",height:"11"},indicator:{textStyle:"xl",insetEnd:"3"}},xl:{field:{textStyle:"md",ps:"4.5",pe:"10",height:"12"},indicator:{textStyle:"xl",insetEnd:"3"}}}},defaultVariants:selectSlotRecipe.defaultVariants});function mapEntries(T,_){const E={};for(const C in T){const A=_(C,T[C]);E[A[0]]=A[1]}return E}const triggerStyle=defineStyle({display:"flex",justifyContent:"center",alignItems:"center",flex:"1",userSelect:"none",cursor:"button",lineHeight:"1",color:"fg.muted","--stepper-base-radius":"radii.l1","--stepper-radius":"calc(var(--stepper-base-radius) + 1px)",_icon:{boxSize:"1em"},_disabled:{opacity:"0.5"},_hover:{bg:"bg.muted"},_active:{bg:"bg.emphasized"}}),numberInputSlotRecipe=defineSlotRecipe({className:"chakra-number-input",slots:anatomy$c.keys(),base:{root:{position:"relative",zIndex:"0",isolation:"isolate"},input:{...inputRecipe.base,verticalAlign:"top",pe:"calc(var(--stepper-width) + 0.5rem)"},control:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",width:"var(--stepper-width)",height:"calc(100% - 2px)",zIndex:"1",borderStartWidth:"1px",divideY:"1px"},incrementTrigger:{...triggerStyle,borderTopEndRadius:"var(--stepper-radius)"},decrementTrigger:{...triggerStyle,borderBottomEndRadius:"var(--stepper-radius)"},valueText:{fontWeight:"medium",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}},variants:{size:{xs:{input:inputRecipe.variants.size.xs,control:{fontSize:"2xs","--stepper-width":"sizes.4"}},sm:{input:inputRecipe.variants.size.sm,control:{fontSize:"xs","--stepper-width":"sizes.5"}},md:{input:inputRecipe.variants.size.md,control:{fontSize:"sm","--stepper-width":"sizes.6"}},lg:{input:inputRecipe.variants.size.lg,control:{fontSize:"sm","--stepper-width":"sizes.6"}}},variant:mapEntries(inputRecipe.variants.variant,(T,_)=>[T,{input:_}])},defaultVariants:{size:"md",variant:"outline"}}),{variants,defaultVariants}=inputRecipe,pinInputSlotRecipe=defineSlotRecipe({className:"chakra-pin-input",slots:anatomy$b.keys(),base:{input:{...inputRecipe.base,textAlign:"center",width:"var(--input-height)"},control:{display:"inline-flex",gap:"2",isolation:"isolate"}},variants:{size:mapEntries(variants.size,(T,_)=>[T,{input:_}]),variant:mapEntries(variants.variant,(T,_)=>[T,{input:_}]),attached:{true:{control:{gap:"0",spaceX:"-1px"},input:{_notFirst:{borderStartRadius:"0"},_notLast:{borderEndRadius:"0"},_focusVisible:{zIndex:"1"}}}}},defaultVariants}),popoverSlotRecipe=defineSlotRecipe({className:"chakra-popover",slots:popoverAnatomy.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--popover-bg":"colors.bg.panel",bg:"var(--popover-bg)",boxShadow:"lg","--popover-size":"sizes.xs","--popover-mobile-size":"calc(100dvw - 1rem)",width:{base:"min(var(--popover-mobile-size), var(--popover-size))",sm:"var(--popover-size)"},borderRadius:"l3","--popover-z-index":"zIndex.popover",zIndex:"calc(var(--popover-z-index) + var(--layer-index, 0))",outline:"0",transformOrigin:"var(--transform-origin)",maxHeight:"var(--available-height)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"faster"}},header:{paddingInline:"var(--popover-padding)",paddingTop:"var(--popover-padding)"},body:{padding:"var(--popover-padding)",flex:"1"},footer:{display:"flex",alignItems:"center",paddingInline:"var(--popover-padding)",paddingBottom:"var(--popover-padding)"},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--popover-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px"}},variants:{size:{xs:{content:{"--popover-padding":"spacing.3"}},sm:{content:{"--popover-padding":"spacing.4"}},md:{content:{"--popover-padding":"spacing.5"}},lg:{content:{"--popover-padding":"spacing.6"}}}},defaultVariants:{size:"md"}}),progressSlotRecipe=defineSlotRecipe({slots:anatomy$9.keys(),className:"chakra-progress",base:{root:{textStyle:"sm",position:"relative"},track:{overflow:"hidden",position:"relative"},range:{display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"width, height",transitionDuration:"slow",height:"100%",bgColor:"var(--track-color)",_indeterminate:{"--animate-from-x":"-40%","--animate-to-x":"100%",position:"absolute",willChange:"left",minWidth:"50%",animation:"position 1s ease infinite normal none running",backgroundImage:"linear-gradient(to right, transparent 0%, var(--track-color) 50%, transparent 100%)"}},label:{display:"inline-flex",fontWeight:"medium",alignItems:"center",gap:"1"},valueText:{textStyle:"xs",lineHeight:"1",fontWeight:"medium"}},variants:{variant:{outline:{track:{shadow:"inset",bgColor:"bg.muted"},range:{bgColor:"colorPalette.solid"}},subtle:{track:{bgColor:"colorPalette.muted"},range:{bgColor:"colorPalette.solid/72"}}},shape:{square:{},rounded:{track:{borderRadius:"l1"}},full:{track:{borderRadius:"full"}}},striped:{true:{range:{backgroundImage:"linear-gradient(45deg, var(--stripe-color) 25%, transparent 25%, transparent 50%, var(--stripe-color) 50%, var(--stripe-color) 75%, transparent 75%, transparent)",backgroundSize:"var(--stripe-size) var(--stripe-size)","--stripe-size":"1rem","--stripe-color":{_light:"rgba(255, 255, 255, 0.3)",_dark:"rgba(0, 0, 0, 0.3)"}}}},animated:{true:{range:{"--animate-from":"var(--stripe-size)",animation:"bg-position 1s linear infinite"}}},size:{xs:{track:{h:"1.5"}},sm:{track:{h:"2"}},md:{track:{h:"2.5"}},lg:{track:{h:"3"}},xl:{track:{h:"4"}}}},defaultVariants:{variant:"outline",size:"md",shape:"rounded"}}),progressCircleSlotRecipe=defineSlotRecipe({className:"chakra-progress-circle",slots:anatomy$9.keys(),base:{root:{display:"inline-flex",textStyle:"sm",position:"relative"},circle:{_indeterminate:{animation:"spin 2s linear infinite"}},circleTrack:{"--track-color":"colors.colorPalette.muted",stroke:"var(--track-color)"},circleRange:{stroke:"colorPalette.solid",transitionProperty:"stroke-dasharray",transitionDuration:"0.6s",_indeterminate:{animation:"circular-progress 1.5s linear infinite"}},label:{display:"inline-flex"},valueText:{lineHeight:"1",fontWeight:"medium",letterSpacing:"tight",fontVariantNumeric:"tabular-nums"}},variants:{size:{xs:{circle:{"--size":"24px","--thickness":"4px"},valueText:{textStyle:"2xs"}},sm:{circle:{"--size":"32px","--thickness":"5px"},valueText:{textStyle:"2xs"}},md:{circle:{"--size":"40px","--thickness":"6px"},valueText:{textStyle:"xs"}},lg:{circle:{"--size":"48px","--thickness":"7px"},valueText:{textStyle:"sm"}},xl:{circle:{"--size":"64px","--thickness":"8px"},valueText:{textStyle:"sm"}}}},defaultVariants:{size:"md"}}),qrCodeSlotRecipe=defineSlotRecipe({slots:anatomy$8.keys(),className:"chakra-qr-code",base:{root:{position:"relative",width:"fit-content","--qr-code-overlay-size":"calc(var(--qr-code-size) / 3)"},frame:{width:"var(--qr-code-size)",height:"var(--qr-code-size)",fill:"currentColor"},overlay:{display:"flex",alignItems:"center",justifyContent:"center",width:"var(--qr-code-overlay-size)",height:"var(--qr-code-overlay-size)",padding:"1",bg:"bg",rounded:"l1"}},variants:{size:{"2xs":{root:{"--qr-code-size":"40px"}},xs:{root:{"--qr-code-size":"64px"}},sm:{root:{"--qr-code-size":"80px"}},md:{root:{"--qr-code-size":"120px"}},lg:{root:{"--qr-code-size":"160px"}},xl:{root:{"--qr-code-size":"200px"}},"2xl":{root:{"--qr-code-size":"240px"}},full:{root:{"--qr-code-size":"100%"}}}},defaultVariants:{size:"md"}});var Ud,Vd,zd,Gd,Wd,Hd,qd;const radioCardSlotRecipe=defineSlotRecipe({className:"chakra-radio-card",slots:radioCardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",isolation:"isolate"},item:{flex:"1",display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",_focus:{bg:"colorPalette.muted/20"},_disabled:{opacity:"0.8",borderColor:"border.disabled"},_checked:{zIndex:"1"}},label:{display:"inline-flex",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},itemText:{fontWeight:"medium",flex:"1"},itemDescription:{opacity:"0.64",textStyle:"sm"},itemControl:{display:"inline-flex",flex:"1",pos:"relative",rounded:"inherit",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)",_disabled:{bg:"bg.muted"}},itemIndicator:radiomarkRecipe.base,itemAddon:{roundedBottom:"inherit",_disabled:{color:"fg.muted"}},itemContent:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)"}},variants:{size:{sm:{item:{textStyle:"sm"},itemControl:{padding:"3",gap:"1.5"},itemAddon:{px:"3",py:"1.5",borderTopWidth:"1px"},itemIndicator:(Ud=radiomarkRecipe.variants)==null?void 0:Ud.size.sm},md:{item:{textStyle:"sm"},itemControl:{padding:"4",gap:"2.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(Vd=radiomarkRecipe.variants)==null?void 0:Vd.size.md},lg:{item:{textStyle:"md"},itemControl:{padding:"4",gap:"3.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(zd=radiomarkRecipe.variants)==null?void 0:zd.size.lg}},variant:{surface:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"}},itemIndicator:(Gd=radiomarkRecipe.variants)==null?void 0:Gd.variant.solid},subtle:{item:{bg:"bg.muted"},itemControl:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},itemIndicator:(Wd=radiomarkRecipe.variants)==null?void 0:Wd.variant.outline},outline:{item:{borderWidth:"1px",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},itemIndicator:(Hd=radiomarkRecipe.variants)==null?void 0:Hd.variant.solid},solid:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},itemIndicator:(qd=radiomarkRecipe.variants)==null?void 0:qd.variant.inverted}},justify:{start:{item:{"--radio-card-justify":"flex-start"}},end:{item:{"--radio-card-justify":"flex-end"}},center:{item:{"--radio-card-justify":"center"}}},align:{start:{item:{"--radio-card-align":"flex-start"},itemControl:{textAlign:"start"}},end:{item:{"--radio-card-align":"flex-end"},itemControl:{textAlign:"end"}},center:{item:{"--radio-card-align":"center"},itemControl:{textAlign:"center"}}},orientation:{vertical:{itemControl:{flexDirection:"column"}},horizontal:{itemControl:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}});var Xd,Yd,Kd,Zd,Qd,Jd,eh,th,rh,nh,ih,sh,oh,ah;const radioGroupSlotRecipe=defineSlotRecipe({className:"chakra-radio-group",slots:radioGroupAnatomy.keys(),base:{item:{display:"inline-flex",alignItems:"center",position:"relative",fontWeight:"medium",_disabled:{cursor:"disabled"}},itemControl:radiomarkRecipe.base,label:{userSelect:"none",textStyle:"sm",_disabled:{opacity:"0.5"}}},variants:{variant:{outline:{itemControl:(Yd=(Xd=radiomarkRecipe.variants)==null?void 0:Xd.variant)==null?void 0:Yd.outline},subtle:{itemControl:(Zd=(Kd=radiomarkRecipe.variants)==null?void 0:Kd.variant)==null?void 0:Zd.subtle},solid:{itemControl:(Jd=(Qd=radiomarkRecipe.variants)==null?void 0:Qd.variant)==null?void 0:Jd.solid}},size:{xs:{item:{textStyle:"xs",gap:"1.5"},itemControl:(th=(eh=radiomarkRecipe.variants)==null?void 0:eh.size)==null?void 0:th.xs},sm:{item:{textStyle:"sm",gap:"2"},itemControl:(nh=(rh=radiomarkRecipe.variants)==null?void 0:rh.size)==null?void 0:nh.sm},md:{item:{textStyle:"sm",gap:"2.5"},itemControl:(sh=(ih=radiomarkRecipe.variants)==null?void 0:ih.size)==null?void 0:sh.md},lg:{item:{textStyle:"md",gap:"3"},itemControl:(ah=(oh=radiomarkRecipe.variants)==null?void 0:oh.size)==null?void 0:ah.lg}}},defaultVariants:{size:"md",variant:"solid"}}),ratingGroupSlotRecipe=defineSlotRecipe({className:"chakra-rating-group",slots:ratingGroupAnatomy.keys(),base:{root:{display:"inline-flex"},control:{display:"inline-flex",alignItems:"center"},item:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},itemIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",position:"relative",_icon:{stroke:"currentColor",width:"100%",height:"100%",display:"inline-block",flexShrink:0,position:"absolute",left:0,top:0},"& [data-bg]":{color:"bg.emphasized"},"& [data-fg]":{color:"transparent"},"&[data-highlighted]:not([data-half])":{"& [data-fg]":{color:"colorPalette.solid"}},"&[data-half]":{"& [data-fg]":{color:"colorPalette.solid",clipPath:"inset(0 50% 0 0)"}}}},variants:{size:{xs:{item:{textStyle:"sm"}},sm:{item:{textStyle:"md"}},md:{item:{textStyle:"xl"}},lg:{item:{textStyle:"2xl"}}}},defaultVariants:{size:"md"}}),segmentGroupSlotRecipe=defineSlotRecipe({className:"chakra-segment-group",slots:segmentGroupAnatomy.keys(),base:{root:{"--segment-radius":"radii.l2",borderRadius:"l2",display:"inline-flex",boxShadow:"inset",minW:"max-content",textAlign:"center",position:"relative",isolation:"isolate",bg:"bg.muted",_vertical:{flexDirection:"column"}},item:{display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",fontSize:"sm",position:"relative",color:"fg",borderRadius:"var(--segment-radius)",_disabled:{opacity:"0.5"},"&:has(input:focus-visible)":{focusRing:"outside"},_before:{content:'""',position:"absolute",bg:"border",transition:"opacity 0.2s"},_horizontal:{_before:{insetInlineStart:0,insetBlock:"1.5",width:"1px"}},_vertical:{_before:{insetBlockStart:0,insetInline:"1.5",height:"1px"}},"& + &[data-state=checked], &[data-state=checked] + &, &:first-of-type":{_before:{opacity:"0"}},"&[data-state=checked][data-ssr]":{shadow:"sm",bg:"bg",borderRadius:"var(--segment-radius)"}},indicator:{shadow:"sm",pos:"absolute",bg:{_light:"bg",_dark:"bg.emphasized"},width:"var(--width)",height:"var(--height)",top:"var(--top)",left:"var(--left)",zIndex:-1,borderRadius:"var(--segment-radius)"}},variants:{size:{xs:{item:{textStyle:"xs",px:"3",gap:"1",height:"6"}},sm:{item:{textStyle:"sm",px:"4",gap:"2",height:"8"}},md:{item:{textStyle:"sm",px:"4",gap:"2",height:"10"}},lg:{item:{textStyle:"md",px:"4.5",gap:"3",height:"11"}}}},defaultVariants:{size:"md"}}),sliderSlotRecipe=defineSlotRecipe({className:"chakra-slider",slots:sliderAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",textStyle:"sm",position:"relative",isolation:"isolate",touchAction:"none"},label:{fontWeight:"medium",textStyle:"sm"},control:{display:"inline-flex",alignItems:"center",position:"relative"},track:{overflow:"hidden",borderRadius:"full",flex:"1"},range:{width:"inherit",height:"inherit",_disabled:{bg:"border.emphasized!"}},markerGroup:{position:"absolute!",zIndex:"1"},marker:{"--marker-bg":{base:"white",_underValue:"colors.bg"},display:"flex",alignItems:"center",gap:"calc(var(--slider-thumb-size) / 2)",color:"fg.muted",textStyle:"xs"},markerIndicator:{width:"var(--slider-marker-size)",height:"var(--slider-marker-size)",borderRadius:"full",bg:"var(--marker-bg)"},thumb:{width:"var(--slider-thumb-size)",height:"var(--slider-thumb-size)",display:"flex",alignItems:"center",justifyContent:"center",outline:0,zIndex:"2",borderRadius:"full",_focusVisible:{ring:"2px",ringColor:"colorPalette.focusRing",ringOffset:"2px",ringOffsetColor:"bg"}}},variants:{size:{sm:{root:{"--slider-thumb-size":"sizes.4","--slider-track-size":"sizes.1.5","--slider-marker-center":"6px","--slider-marker-size":"sizes.1","--slider-marker-inset":"3px"}},md:{root:{"--slider-thumb-size":"sizes.5","--slider-track-size":"sizes.2","--slider-marker-center":"8px","--slider-marker-size":"sizes.1","--slider-marker-inset":"4px"}},lg:{root:{"--slider-thumb-size":"sizes.6","--slider-track-size":"sizes.2.5","--slider-marker-center":"9px","--slider-marker-size":"sizes.1.5","--slider-marker-inset":"5px"}}},variant:{outline:{track:{shadow:"inset",bg:"bg.emphasized/72"},range:{bg:"colorPalette.solid"},thumb:{borderWidth:"2px",borderColor:"colorPalette.solid",bg:"bg",_disabled:{bg:"border.emphasized",borderColor:"border.emphasized"}}},solid:{track:{bg:"colorPalette.subtle",_disabled:{bg:"bg.muted"}},range:{bg:"colorPalette.solid"},thumb:{bg:"colorPalette.solid",_disabled:{bg:"border.emphasized"}}}},orientation:{vertical:{root:{display:"inline-flex"},control:{flexDirection:"column",height:"100%",minWidth:"var(--slider-thumb-size)","&[data-has-mark-label], &:has(.chakra-slider__marker-label)":{marginEnd:"4"}},track:{width:"var(--slider-track-size)"},thumb:{left:"50%",translate:"-50% 0"},markerGroup:{insetStart:"var(--slider-marker-center)",insetBlock:"var(--slider-marker-inset)"},marker:{flexDirection:"row"}},horizontal:{control:{flexDirection:"row",width:"100%",minHeight:"var(--slider-thumb-size)","&[data-has-mark-label], &:has(.chakra-slider__marker-label)":{marginBottom:"4"}},track:{height:"var(--slider-track-size)"},thumb:{top:"50%",translate:"0 -50%"},markerGroup:{top:"var(--slider-marker-center)",insetInline:"var(--slider-marker-inset)"},marker:{flexDirection:"column"}}}},defaultVariants:{size:"md",variant:"outline",orientation:"horizontal"}}),statSlotRecipe=defineSlotRecipe({className:"chakra-stat",slots:statAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",position:"relative",flex:"1"},label:{display:"inline-flex",gap:"1.5",alignItems:"center",color:"fg.muted",textStyle:"sm"},helpText:{color:"fg.muted",textStyle:"xs"},valueUnit:{color:"fg.muted",textStyle:"xs",fontWeight:"initial",letterSpacing:"initial"},valueText:{verticalAlign:"baseline",fontWeight:"semibold",letterSpacing:"tight",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums",display:"inline-flex",gap:"1"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginEnd:1,"& :where(svg)":{w:"1em",h:"1em"},"&[data-type=up]":{color:"fg.success"},"&[data-type=down]":{color:"fg.error"}}},variants:{size:{sm:{valueText:{textStyle:"xl"}},md:{valueText:{textStyle:"2xl"}},lg:{valueText:{textStyle:"3xl"}}}},defaultVariants:{size:"md"}}),statusSlotRecipe=defineSlotRecipe({className:"chakra-status",slots:statusAnatomy.keys(),base:{root:{display:"inline-flex",alignItems:"center",gap:"2"},indicator:{width:"0.64em",height:"0.64em",flexShrink:0,borderRadius:"full",forcedColorAdjust:"none",bg:"colorPalette.solid"}},variants:{size:{sm:{root:{textStyle:"xs"}},md:{root:{textStyle:"sm"}},lg:{root:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),stepsSlotRecipe=defineSlotRecipe({className:"chakra-steps",slots:stepsAnatomy.keys(),base:{root:{display:"flex",width:"full"},list:{display:"flex",justifyContent:"space-between","--steps-gutter":"spacing.3","--steps-thickness":"2px"},title:{fontWeight:"medium",color:"fg"},description:{color:"fg.muted"},separator:{bg:"border",flex:"1"},indicator:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0",borderRadius:"full",fontWeight:"medium",width:"var(--steps-size)",height:"var(--steps-size)",_icon:{flexShrink:"0",width:"var(--steps-icon-size)",height:"var(--steps-icon-size)"}},item:{position:"relative",display:"flex",gap:"3",flex:"1 0 0","&:last-of-type":{flex:"initial","& [data-part=separator]":{display:"none"}}},trigger:{display:"flex",alignItems:"center",gap:"3",textAlign:"start",focusVisibleRing:"outside",borderRadius:"l2"},content:{focusVisibleRing:"outside"}},variants:{orientation:{vertical:{root:{flexDirection:"row",height:"100%"},list:{flexDirection:"column",alignItems:"flex-start"},separator:{position:"absolute",width:"var(--steps-thickness)",height:"100%",maxHeight:"calc(100% - var(--steps-size) - var(--steps-gutter) * 2)",top:"calc(var(--steps-size) + var(--steps-gutter))",insetStart:"calc(var(--steps-size) / 2 - 1px)"},item:{alignItems:"flex-start"}},horizontal:{root:{flexDirection:"column",width:"100%"},list:{flexDirection:"row",alignItems:"center"},separator:{width:"100%",height:"var(--steps-thickness)",marginX:"var(--steps-gutter)"},item:{alignItems:"center"}}},variant:{solid:{indicator:{_incomplete:{borderWidth:"var(--steps-thickness)"},_current:{bg:"colorPalette.muted",borderWidth:"var(--steps-thickness)",borderColor:"colorPalette.solid",color:"colorPalette.fg"},_complete:{bg:"colorPalette.solid",borderColor:"colorPalette.solid",color:"colorPalette.contrast"}},separator:{_complete:{bg:"colorPalette.solid"}}},subtle:{indicator:{_incomplete:{bg:"bg.muted"},_current:{bg:"colorPalette.muted",color:"colorPalette.fg"},_complete:{bg:"colorPalette.emphasized",color:"colorPalette.fg"}},separator:{_complete:{bg:"colorPalette.emphasized"}}}},size:{xs:{root:{gap:"2.5"},list:{"--steps-size":"sizes.6","--steps-icon-size":"sizes.3.5",textStyle:"xs"},title:{textStyle:"sm"}},sm:{root:{gap:"3"},list:{"--steps-size":"sizes.8","--steps-icon-size":"sizes.4",textStyle:"xs"},title:{textStyle:"sm"}},md:{root:{gap:"4"},list:{"--steps-size":"sizes.10","--steps-icon-size":"sizes.4",textStyle:"sm"},title:{textStyle:"sm"}},lg:{root:{gap:"6"},list:{"--steps-size":"sizes.11","--steps-icon-size":"sizes.5",textStyle:"md"},title:{textStyle:"md"}}}},defaultVariants:{size:"md",variant:"solid",orientation:"horizontal"}}),switchSlotRecipe=defineSlotRecipe({slots:switchAnatomy.keys(),className:"chakra-switch",base:{root:{display:"inline-flex",gap:"2.5",alignItems:"center",position:"relative",verticalAlign:"middle","--switch-diff":"calc(var(--switch-width) - var(--switch-height))","--switch-x":{base:"var(--switch-diff)",_rtl:"calc(var(--switch-diff) * -1)"}},label:{lineHeight:"1",userSelect:"none",fontSize:"sm",fontWeight:"medium",_disabled:{opacity:"0.5"}},indicator:{position:"absolute",height:"var(--switch-height)",width:"var(--switch-height)",fontSize:"var(--switch-indicator-font-size)",fontWeight:"medium",flexShrink:0,userSelect:"none",display:"grid",placeContent:"center",transition:"inset-inline-start 0.12s ease",insetInlineStart:"calc(var(--switch-x) - 2px)",_checked:{insetInlineStart:"2px"}},control:{display:"inline-flex",gap:"0.5rem",flexShrink:0,justifyContent:"flex-start",cursor:"switch",borderRadius:"full",position:"relative",width:"var(--switch-width)",height:"var(--switch-height)",transition:"backgrounds",_disabled:{opacity:"0.5",cursor:"not-allowed"},_invalid:{outline:"2px solid",outlineColor:"border.error",outlineOffset:"2px"}},thumb:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transitionProperty:"translate",transitionDuration:"fast",borderRadius:"inherit",_checked:{translate:"var(--switch-x) 0"}}},variants:{variant:{solid:{control:{borderRadius:"full",bg:"bg.emphasized",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}},thumb:{bg:"white",width:"var(--switch-height)",height:"var(--switch-height)",scale:"0.8",boxShadow:"sm",_checked:{bg:"colorPalette.contrast"}}},raised:{control:{borderRadius:"full",height:"calc(var(--switch-height) / 2)",bg:"bg.muted",boxShadow:"inset",_checked:{bg:"colorPalette.solid/60"}},thumb:{width:"var(--switch-height)",height:"var(--switch-height)",position:"relative",top:"calc(var(--switch-height) * -0.25)",bg:"white",boxShadow:"xs",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}}}},size:{xs:{root:{"--switch-width":"sizes.6","--switch-height":"sizes.3","--switch-indicator-font-size":"fontSizes.xs"}},sm:{root:{"--switch-width":"sizes.8","--switch-height":"sizes.4","--switch-indicator-font-size":"fontSizes.xs"}},md:{root:{"--switch-width":"sizes.10","--switch-height":"sizes.5","--switch-indicator-font-size":"fontSizes.sm"}},lg:{root:{"--switch-width":"sizes.12","--switch-height":"sizes.6","--switch-indicator-font-size":"fontSizes.md"}}}},defaultVariants:{variant:"solid",size:"md"}}),tableSlotRecipe=defineSlotRecipe({className:"chakra-table",slots:tableAnatomy.keys(),base:{root:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full",textAlign:"start",verticalAlign:"top"},row:{_selected:{bg:"colorPalette.subtle"}},cell:{textAlign:"start",alignItems:"center"},columnHeader:{fontWeight:"medium",textAlign:"start",color:"fg"},caption:{fontWeight:"medium",textStyle:"xs"},footer:{fontWeight:"medium"}},variants:{interactive:{true:{body:{"& tr":{_hover:{bg:"colorPalette.subtle"}}}}},stickyHeader:{true:{header:{"& :where(tr)":{top:"var(--table-sticky-offset, 0)",position:"sticky",zIndex:1}}}},striped:{true:{row:{"&:nth-of-type(odd) td":{bg:"bg.muted"}}}},showColumnBorder:{true:{columnHeader:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}},cell:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}}}},variant:{line:{columnHeader:{borderBottomWidth:"1px"},cell:{borderBottomWidth:"1px"},row:{bg:"bg"}},outline:{root:{boxShadow:"0 0 0 1px {colors.border}",overflow:"hidden"},columnHeader:{borderBottomWidth:"1px"},header:{bg:"bg.muted"},row:{"&:not(:last-of-type)":{borderBottomWidth:"1px"}},footer:{borderTopWidth:"1px"}}},size:{sm:{root:{textStyle:"sm"},columnHeader:{px:"2",py:"2"},cell:{px:"2",py:"2"}},md:{root:{textStyle:"sm"},columnHeader:{px:"3",py:"3"},cell:{px:"3",py:"3"}},lg:{root:{textStyle:"md"},columnHeader:{px:"4",py:"3"},cell:{px:"4",py:"3"}}}},defaultVariants:{variant:"line",size:"md"}}),tabsSlotRecipe=defineSlotRecipe({slots:tabsAnatomy.keys(),className:"chakra-tabs",base:{root:{"--tabs-trigger-radius":"radii.l2",position:"relative",_horizontal:{display:"block"},_vertical:{display:"flex"}},list:{display:"inline-flex",position:"relative",isolation:"isolate","--tabs-indicator-shadow":"shadows.xs","--tabs-indicator-bg":"colors.bg",minH:"var(--tabs-height)",_horizontal:{flexDirection:"row"},_vertical:{flexDirection:"column"}},trigger:{outline:"0",minW:"var(--tabs-height)",height:"var(--tabs-height)",display:"flex",alignItems:"center",fontWeight:"medium",position:"relative",cursor:"button",gap:"2",_focusVisible:{zIndex:1,outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{cursor:"not-allowed",opacity:.5}},content:{focusVisibleRing:"inside",_horizontal:{width:"100%",pt:"var(--tabs-content-padding)"},_vertical:{height:"100%",ps:"var(--tabs-content-padding)"}},indicator:{width:"var(--width)",height:"var(--height)",borderRadius:"var(--tabs-indicator-radius)",bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",zIndex:-1}},variants:{fitted:{true:{list:{display:"flex"},trigger:{flex:1,textAlign:"center",justifyContent:"center"}}},justify:{start:{list:{justifyContent:"flex-start"}},center:{list:{justifyContent:"center"}},end:{list:{justifyContent:"flex-end"}}},size:{sm:{root:{"--tabs-height":"sizes.9","--tabs-content-padding":"spacing.3"},trigger:{py:"1",px:"3",textStyle:"sm"}},md:{root:{"--tabs-height":"sizes.10","--tabs-content-padding":"spacing.4"},trigger:{py:"2",px:"4",textStyle:"sm"}},lg:{root:{"--tabs-height":"sizes.11","--tabs-content-padding":"spacing.4.5"},trigger:{py:"2",px:"4.5",textStyle:"md"}}},variant:{line:{list:{display:"flex",borderColor:"border",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}},trigger:{color:"fg.muted",_disabled:{_active:{bg:"initial"}},_selected:{color:"fg",_horizontal:{layerStyle:"indicator.bottom","--indicator-offset-y":"-1px","--indicator-color":"colors.colorPalette.solid"},_vertical:{layerStyle:"indicator.end","--indicator-offset-x":"-1px"}}}},subtle:{trigger:{borderRadius:"var(--tabs-trigger-radius)",color:"fg.muted",_selected:{bg:"colorPalette.subtle",color:"colorPalette.fg"}}},enclosed:{list:{bg:"bg.muted",padding:"1",borderRadius:"l3",minH:"calc(var(--tabs-height) - 4px)"},trigger:{justifyContent:"center",color:"fg.muted",borderRadius:"var(--tabs-trigger-radius)",_selected:{bg:"bg",color:"colorPalette.fg",shadow:"xs"}}},outline:{list:{"--line-thickness":"1px","--line-offset":"calc(var(--line-thickness) * -1)",borderColor:"border",display:"flex",_horizontal:{_before:{content:'""',position:"absolute",bottom:"0px",width:"100%",borderBottomWidth:"var(--line-thickness)",borderBottomColor:"border"}},_vertical:{_before:{content:'""',position:"absolute",insetInline:"var(--line-offset)",height:"calc(100% - calc(var(--line-thickness) * 2))",borderEndWidth:"var(--line-thickness)",borderEndColor:"border"}}},trigger:{color:"fg.muted",borderWidth:"1px",borderColor:"transparent",_selected:{bg:"currentBg",color:"colorPalette.fg"},_horizontal:{borderTopRadius:"var(--tabs-trigger-radius)",marginBottom:"var(--line-offset)",marginEnd:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderBottomColor:"transparent"}},_vertical:{borderStartRadius:"var(--tabs-trigger-radius)",marginEnd:"var(--line-offset)",marginBottom:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderEndColor:"transparent"}}}},plain:{trigger:{color:"fg.muted",_selected:{color:"colorPalette.fg"},borderRadius:"var(--tabs-trigger-radius)","&[data-selected][data-ssr]":{bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",borderRadius:"var(--tabs-indicator-radius)"}}}}},defaultVariants:{size:"md",variant:"line"}});var lh;const badgeVariant=(lh=badgeRecipe.variants)==null?void 0:lh.variant,tagSlotRecipe=defineSlotRecipe({slots:tagAnatomy.keys(),className:"chakra-tag",base:{root:{display:"inline-flex",alignItems:"center",verticalAlign:"top",maxWidth:"100%",userSelect:"none",borderRadius:"l2",focusVisibleRing:"outside"},label:{lineClamp:"1"},closeTrigger:{display:"flex",alignItems:"center",justifyContent:"center",outline:"0",borderRadius:"l1",color:"currentColor",focusVisibleRing:"inside",focusRingWidth:"2px"},startElement:{flexShrink:0,boxSize:"var(--tag-element-size)",ms:"var(--tag-element-offset)","&:has([data-scope=avatar])":{boxSize:"var(--tag-avatar-size)",ms:"calc(var(--tag-element-offset) * 1.5)"},_icon:{boxSize:"100%"}},endElement:{flexShrink:0,boxSize:"var(--tag-element-size)",me:"var(--tag-element-offset)",_icon:{boxSize:"100%"},"&:has(button)":{ms:"calc(var(--tag-element-offset) * -1)"}}},variants:{size:{sm:{root:{px:"1.5",minH:"4.5",gap:"1","--tag-avatar-size":"spacing.3","--tag-element-size":"spacing.3","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},md:{root:{px:"1.5",minH:"5",gap:"1","--tag-avatar-size":"spacing.3.5","--tag-element-size":"spacing.3.5","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},lg:{root:{px:"2",minH:"6",gap:"1.5","--tag-avatar-size":"spacing.4.5","--tag-element-size":"spacing.4","--tag-element-offset":"-3px"},label:{textStyle:"sm"}},xl:{root:{px:"2.5",minH:"8",gap:"1.5","--tag-avatar-size":"spacing.6","--tag-element-size":"spacing.4.5","--tag-element-offset":"-4px"},label:{textStyle:"sm"}}},variant:{subtle:{root:badgeVariant==null?void 0:badgeVariant.subtle},solid:{root:badgeVariant==null?void 0:badgeVariant.solid},outline:{root:badgeVariant==null?void 0:badgeVariant.outline},surface:{root:badgeVariant==null?void 0:badgeVariant.surface}}},defaultVariants:{size:"md",variant:"surface"}}),timelineSlotRecipe=defineSlotRecipe({slots:timelineAnatomy.keys(),className:"chakra-timeline",base:{root:{display:"flex",flexDirection:"column",width:"full","--timeline-thickness":"1px","--timeline-gutter":"4px"},item:{display:"flex",position:"relative",alignItems:"flex-start",flexShrink:0,gap:"4",_last:{"& :where(.chakra-timeline__separator)":{display:"none"}}},separator:{position:"absolute",borderStartWidth:"var(--timeline-thickness)",ms:"calc(-1 * var(--timeline-thickness) / 2)",insetInlineStart:"calc(var(--timeline-indicator-size) / 2)",insetBlock:"0",borderColor:"border"},indicator:{outline:"2px solid {colors.bg}",position:"relative",flexShrink:"0",boxSize:"var(--timeline-indicator-size)",fontSize:"var(--timeline-font-size)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",fontWeight:"medium"},connector:{alignSelf:"stretch",position:"relative"},content:{pb:"6",display:"flex",flexDirection:"column",width:"full",gap:"2"},title:{display:"flex",fontWeight:"medium",flexWrap:"wrap",gap:"1.5",alignItems:"center",mt:"var(--timeline-margin)"},description:{color:"fg.muted",textStyle:"xs"}},variants:{variant:{subtle:{indicator:{bg:"colorPalette.muted"}},solid:{indicator:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},outline:{indicator:{bg:"currentBg",borderWidth:"1px",borderColor:"colorPalette.muted"}},plain:{}},size:{sm:{root:{"--timeline-indicator-size":"sizes.4","--timeline-font-size":"fontSizes.2xs"},title:{textStyle:"xs"}},md:{root:{"--timeline-indicator-size":"sizes.5","--timeline-font-size":"fontSizes.xs"},title:{textStyle:"sm"}},lg:{root:{"--timeline-indicator-size":"sizes.6","--timeline-font-size":"fontSizes.xs"},title:{mt:"0.5",textStyle:"sm"}},xl:{root:{"--timeline-indicator-size":"sizes.8","--timeline-font-size":"fontSizes.sm"},title:{mt:"1.5",textStyle:"sm"}}}},defaultVariants:{size:"md",variant:"solid"}}),toastSlotRecipe=defineSlotRecipe({slots:toastAnatomy.keys(),className:"chakra-toast",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",gap:"3",py:"4",ps:"4",pe:"6",borderRadius:"l2",translate:"var(--x) var(--y)",scale:"var(--scale)",zIndex:"var(--z-index)",height:"var(--height)",opacity:"var(--opacity)",willChange:"translate, opacity, scale",transition:"translate 400ms, scale 400ms, opacity 400ms, height 400ms, box-shadow 200ms",transitionTimingFunction:"cubic-bezier(0.21, 1.02, 0.73, 1)",_closed:{transition:"translate 400ms, scale 400ms, opacity 200ms",transitionTimingFunction:"cubic-bezier(0.06, 0.71, 0.55, 1)"},bg:"bg.panel",color:"fg",boxShadow:"xl","--toast-trigger-bg":"colors.bg.muted","&[data-type=warning]":{bg:"orange.solid",color:"orange.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=success]":{bg:"green.solid",color:"green.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=error]":{bg:"red.solid",color:"red.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"}},title:{fontWeight:"medium",textStyle:"sm",marginEnd:"2"},description:{display:"inline",textStyle:"sm",opacity:"0.8"},indicator:{flexShrink:"0",boxSize:"5"},actionTrigger:{textStyle:"sm",fontWeight:"medium",height:"8",px:"3",borderRadius:"l2",alignSelf:"center",borderWidth:"1px",borderColor:"var(--toast-border-color, inherit)",transition:"background 200ms",_hover:{bg:"var(--toast-trigger-bg)"}},closeTrigger:{position:"absolute",top:"1",insetEnd:"1",padding:"1",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"{currentColor/60}",borderRadius:"l2",textStyle:"md",transition:"background 200ms",_icon:{boxSize:"1em"}}}}),tooltipSlotRecipe=defineSlotRecipe({slots:anatomy.keys(),className:"chakra-tooltip",base:{content:{"--tooltip-bg":"colors.bg.inverted",bg:"var(--tooltip-bg)",color:"fg.inverted",px:"2.5",py:"1",borderRadius:"l2",fontWeight:"medium",textStyle:"xs",boxShadow:"md",maxW:"xs",zIndex:"tooltip",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"fast"}},arrow:{"--arrow-size":"sizes.2","--arrow-background":"var(--tooltip-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px",borderColor:"var(--tooltip-bg)"}}}),slotRecipes={accordion:accordionSlotRecipe,actionBar:actionBarSlotRecipe,alert:alertSlotRecipe,avatar:avatarSlotRecipe,blockquote:blockquoteSlotRecipe,breadcrumb:breadcrumbSlotRecipe,card:cardSlotRecipe,checkbox:checkboxSlotRecipe,checkboxCard:checkboxCardSlotRecipe,collapsible:collapsibleSlotRecipe,dataList:dataListSlotRecipe,dialog:dialogSlotRecipe,drawer:drawerSlotRecipe,editable:editableSlotRecipe,emptyState:emptyStateSlotRecipe,field:fieldSlotRecipe,fieldset:fieldsetSlotRecipe,fileUpload:fileUploadSlotRecipe,hoverCard:hoverCardSlotRecipe,list:listSlotRecipe,menu:menuSlotRecipe,nativeSelect:nativeSelectSlotRecipe,numberInput:numberInputSlotRecipe,pinInput:pinInputSlotRecipe,popover:popoverSlotRecipe,progress:progressSlotRecipe,progressCircle:progressCircleSlotRecipe,radioCard:radioCardSlotRecipe,radioGroup:radioGroupSlotRecipe,ratingGroup:ratingGroupSlotRecipe,segmentGroup:segmentGroupSlotRecipe,select:selectSlotRecipe,slider:sliderSlotRecipe,stat:statSlotRecipe,steps:stepsSlotRecipe,switch:switchSlotRecipe,table:tableSlotRecipe,tabs:tabsSlotRecipe,tag:tagSlotRecipe,toast:toastSlotRecipe,tooltip:tooltipSlotRecipe,status:statusSlotRecipe,timeline:timelineSlotRecipe,colorPicker:colorPickerSlotRecipe,qrCode:qrCodeSlotRecipe},textStyles=defineTextStyles({"2xs":{value:{fontSize:"2xs",lineHeight:"0.75rem"}},xs:{value:{fontSize:"xs",lineHeight:"1rem"}},sm:{value:{fontSize:"sm",lineHeight:"1.25rem"}},md:{value:{fontSize:"md",lineHeight:"1.5rem"}},lg:{value:{fontSize:"lg",lineHeight:"1.75rem"}},xl:{value:{fontSize:"xl",lineHeight:"1.875rem"}},"2xl":{value:{fontSize:"2xl",lineHeight:"2rem"}},"3xl":{value:{fontSize:"3xl",lineHeight:"2.375rem"}},"4xl":{value:{fontSize:"4xl",lineHeight:"2.75rem",letterSpacing:"-0.025em"}},"5xl":{value:{fontSize:"5xl",lineHeight:"3.75rem",letterSpacing:"-0.025em"}},"6xl":{value:{fontSize:"6xl",lineHeight:"4.5rem",letterSpacing:"-0.025em"}},"7xl":{value:{fontSize:"7xl",lineHeight:"5.75rem",letterSpacing:"-0.025em"}},none:{value:{}},label:{value:{fontSize:"sm",lineHeight:"1.25rem",fontWeight:"medium"}}}),animations=defineTokens.animations({spin:{value:"spin 1s linear infinite"},ping:{value:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},pulse:{value:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},bounce:{value:"bounce 1s infinite"}}),aspectRatios=defineTokens.aspectRatios({square:{value:"1 / 1"},landscape:{value:"4 / 3"},portrait:{value:"3 / 4"},wide:{value:"16 / 9"},ultrawide:{value:"18 / 5"},golden:{value:"1.618 / 1"}}),blurs=defineTokens.blurs({none:{value:" "},sm:{value:"4px"},md:{value:"8px"},lg:{value:"12px"},xl:{value:"16px"},"2xl":{value:"24px"},"3xl":{value:"40px"},"4xl":{value:"64px"}}),borders=defineTokens.borders({xs:{value:"0.5px solid"},sm:{value:"1px solid"},md:{value:"2px solid"},lg:{value:"4px solid"},xl:{value:"8px solid"}}),colors=defineTokens.colors({transparent:{value:"transparent"},current:{value:"currentColor"},black:{value:"#09090B"},white:{value:"#FFFFFF"},whiteAlpha:{50:{value:"rgba(255, 255, 255, 0.04)"},100:{value:"rgba(255, 255, 255, 0.06)"},200:{value:"rgba(255, 255, 255, 0.08)"},300:{value:"rgba(255, 255, 255, 0.16)"},400:{value:"rgba(255, 255, 255, 0.24)"},500:{value:"rgba(255, 255, 255, 0.36)"},600:{value:"rgba(255, 255, 255, 0.48)"},700:{value:"rgba(255, 255, 255, 0.64)"},800:{value:"rgba(255, 255, 255, 0.80)"},900:{value:"rgba(255, 255, 255, 0.92)"},950:{value:"rgba(255, 255, 255, 0.95)"}},blackAlpha:{50:{value:"rgba(0, 0, 0, 0.04)"},100:{value:"rgba(0, 0, 0, 0.06)"},200:{value:"rgba(0, 0, 0, 0.08)"},300:{value:"rgba(0, 0, 0, 0.16)"},400:{value:"rgba(0, 0, 0, 0.24)"},500:{value:"rgba(0, 0, 0, 0.36)"},600:{value:"rgba(0, 0, 0, 0.48)"},700:{value:"rgba(0, 0, 0, 0.64)"},800:{value:"rgba(0, 0, 0, 0.80)"},900:{value:"rgba(0, 0, 0, 0.92)"},950:{value:"rgba(0, 0, 0, 0.95)"}},gray:{50:{value:"#fafafa"},100:{value:"#f4f4f5"},200:{value:"#e4e4e7"},300:{value:"#d4d4d8"},400:{value:"#a1a1aa"},500:{value:"#71717a"},600:{value:"#52525b"},700:{value:"#3f3f46"},800:{value:"#27272a"},900:{value:"#18181b"},950:{value:"#111111"}},red:{50:{value:"#fef2f2"},100:{value:"#fee2e2"},200:{value:"#fecaca"},300:{value:"#fca5a5"},400:{value:"#f87171"},500:{value:"#ef4444"},600:{value:"#dc2626"},700:{value:"#991919"},800:{value:"#511111"},900:{value:"#300c0c"},950:{value:"#1f0808"}},orange:{50:{value:"#fff7ed"},100:{value:"#ffedd5"},200:{value:"#fed7aa"},300:{value:"#fdba74"},400:{value:"#fb923c"},500:{value:"#f97316"},600:{value:"#ea580c"},700:{value:"#92310a"},800:{value:"#6c2710"},900:{value:"#3b1106"},950:{value:"#220a04"}},yellow:{50:{value:"#fefce8"},100:{value:"#fef9c3"},200:{value:"#fef08a"},300:{value:"#fde047"},400:{value:"#facc15"},500:{value:"#eab308"},600:{value:"#ca8a04"},700:{value:"#845209"},800:{value:"#713f12"},900:{value:"#422006"},950:{value:"#281304"}},green:{50:{value:"#f0fdf4"},100:{value:"#dcfce7"},200:{value:"#bbf7d0"},300:{value:"#86efac"},400:{value:"#4ade80"},500:{value:"#22c55e"},600:{value:"#16a34a"},700:{value:"#116932"},800:{value:"#124a28"},900:{value:"#042713"},950:{value:"#03190c"}},teal:{50:{value:"#f0fdfa"},100:{value:"#ccfbf1"},200:{value:"#99f6e4"},300:{value:"#5eead4"},400:{value:"#2dd4bf"},500:{value:"#14b8a6"},600:{value:"#0d9488"},700:{value:"#0c5d56"},800:{value:"#114240"},900:{value:"#032726"},950:{value:"#021716"}},blue:{50:{value:"#eff6ff"},100:{value:"#dbeafe"},200:{value:"#bfdbfe"},300:{value:"#a3cfff"},400:{value:"#60a5fa"},500:{value:"#3b82f6"},600:{value:"#2563eb"},700:{value:"#173da6"},800:{value:"#1a3478"},900:{value:"#14204a"},950:{value:"#0c142e"}},cyan:{50:{value:"#ecfeff"},100:{value:"#cffafe"},200:{value:"#a5f3fc"},300:{value:"#67e8f9"},400:{value:"#22d3ee"},500:{value:"#06b6d4"},600:{value:"#0891b2"},700:{value:"#0c5c72"},800:{value:"#134152"},900:{value:"#072a38"},950:{value:"#051b24"}},purple:{50:{value:"#faf5ff"},100:{value:"#f3e8ff"},200:{value:"#e9d5ff"},300:{value:"#d8b4fe"},400:{value:"#c084fc"},500:{value:"#a855f7"},600:{value:"#9333ea"},700:{value:"#641ba3"},800:{value:"#4a1772"},900:{value:"#2f0553"},950:{value:"#1a032e"}},pink:{50:{value:"#fdf2f8"},100:{value:"#fce7f3"},200:{value:"#fbcfe8"},300:{value:"#f9a8d4"},400:{value:"#f472b6"},500:{value:"#ec4899"},600:{value:"#db2777"},700:{value:"#a41752"},800:{value:"#6d0e34"},900:{value:"#45061f"},950:{value:"#2c0514"}}}),cursor=defineTokens.cursor({button:{value:"pointer"},checkbox:{value:"default"},disabled:{value:"not-allowed"},menuitem:{value:"default"},option:{value:"default"},radio:{value:"default"},slider:{value:"default"},switch:{value:"pointer"}}),durations=defineTokens.durations({fastest:{value:"50ms"},faster:{value:"100ms"},fast:{value:"150ms"},moderate:{value:"200ms"},slow:{value:"300ms"},slower:{value:"400ms"},slowest:{value:"500ms"}}),easings=defineTokens.easings({"ease-in":{value:"cubic-bezier(0.42, 0, 1, 1)"},"ease-out":{value:"cubic-bezier(0, 0, 0.58, 1)"},"ease-in-out":{value:"cubic-bezier(0.42, 0, 0.58, 1)"},"ease-in-smooth":{value:"cubic-bezier(0.32, 0.72, 0, 1)"}}),fontSizes=defineTokens.fontSizes({"2xs":{value:"0.625rem"},xs:{value:"0.75rem"},sm:{value:"0.875rem"},md:{value:"1rem"},lg:{value:"1.125rem"},xl:{value:"1.25rem"},"2xl":{value:"1.5rem"},"3xl":{value:"1.875rem"},"4xl":{value:"2.25rem"},"5xl":{value:"3rem"},"6xl":{value:"3.75rem"},"7xl":{value:"4.5rem"},"8xl":{value:"6rem"},"9xl":{value:"8rem"}}),fontWeights=defineTokens.fontWeights({thin:{value:"100"},extralight:{value:"200"},light:{value:"300"},normal:{value:"400"},medium:{value:"500"},semibold:{value:"600"},bold:{value:"700"},extrabold:{value:"800"},black:{value:"900"}}),fallback='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fonts=defineTokens.fonts({heading:{value:`Inter, ${fallback}`},body:{value:`Inter, ${fallback}`},mono:{value:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}}),keyframes=defineKeyframes({spin:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},pulse:{"50%":{opacity:"0.5"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}},"bg-position":{from:{backgroundPosition:"var(--animate-from, 1rem) 0"},to:{backgroundPosition:"var(--animate-to, 0) 0"}},position:{from:{insetInlineStart:"var(--animate-from-x)",insetBlockStart:"var(--animate-from-y)"},to:{insetInlineStart:"var(--animate-to-x)",insetBlockStart:"var(--animate-to-y)"}},"circular-progress":{"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100%"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260%"}},"expand-height":{from:{height:"0"},to:{height:"var(--height)"}},"collapse-height":{from:{height:"var(--height)"},to:{height:"0"}},"expand-width":{from:{width:"0"},to:{width:"var(--width)"}},"collapse-width":{from:{height:"var(--width)"},to:{height:"0"}},"fade-in":{from:{opacity:0},to:{opacity:1}},"fade-out":{from:{opacity:1},to:{opacity:0}},"slide-from-left-full":{from:{translate:"-100% 0"},to:{translate:"0 0"}},"slide-from-right-full":{from:{translate:"100% 0"},to:{translate:"0 0"}},"slide-from-top-full":{from:{translate:"0 -100%"},to:{translate:"0 0"}},"slide-from-bottom-full":{from:{translate:"0 100%"},to:{translate:"0 0"}},"slide-to-left-full":{from:{translate:"0 0"},to:{translate:"-100% 0"}},"slide-to-right-full":{from:{translate:"0 0"},to:{translate:"100% 0"}},"slide-to-top-full":{from:{translate:"0 0"},to:{translate:"0 -100%"}},"slide-to-bottom-full":{from:{translate:"0 0"},to:{translate:"0 100%"}},"slide-from-top":{"0%":{translate:"0 -0.5rem"},to:{translate:"0"}},"slide-from-bottom":{"0%":{translate:"0 0.5rem"},to:{translate:"0"}},"slide-from-left":{"0%":{translate:"-0.5rem 0"},to:{translate:"0"}},"slide-from-right":{"0%":{translate:"0.5rem 0"},to:{translate:"0"}},"slide-to-top":{"0%":{translate:"0"},to:{translate:"0 -0.5rem"}},"slide-to-bottom":{"0%":{translate:"0"},to:{translate:"0 0.5rem"}},"slide-to-left":{"0%":{translate:"0"},to:{translate:"-0.5rem 0"}},"slide-to-right":{"0%":{translate:"0"},to:{translate:"0.5rem 0"}},"scale-in":{from:{scale:"0.95"},to:{scale:"1"}},"scale-out":{from:{scale:"1"},to:{scale:"0.95"}}}),letterSpacings=defineTokens.letterSpacings({tighter:{value:"-0.05em"},tight:{value:"-0.025em"},wide:{value:"0.025em"},wider:{value:"0.05em"},widest:{value:"0.1em"}}),lineHeights=defineTokens.lineHeights({shorter:{value:1.25},short:{value:1.375},moderate:{value:1.5},tall:{value:1.625},taller:{value:2}}),radii=defineTokens.radii({none:{value:"0"},"2xs":{value:"0.0625rem"},xs:{value:"0.125rem"},sm:{value:"0.25rem"},md:{value:"0.375rem"},lg:{value:"0.5rem"},xl:{value:"0.75rem"},"2xl":{value:"1rem"},"3xl":{value:"1.5rem"},"4xl":{value:"2rem"},full:{value:"9999px"}}),spacing=defineTokens.spacing({.5:{value:"0.125rem"},1:{value:"0.25rem"},1.5:{value:"0.375rem"},2:{value:"0.5rem"},2.5:{value:"0.625rem"},3:{value:"0.75rem"},3.5:{value:"0.875rem"},4:{value:"1rem"},4.5:{value:"1.125rem"},5:{value:"1.25rem"},6:{value:"1.5rem"},7:{value:"1.75rem"},8:{value:"2rem"},9:{value:"2.25rem"},10:{value:"2.5rem"},11:{value:"2.75rem"},12:{value:"3rem"},14:{value:"3.5rem"},16:{value:"4rem"},20:{value:"5rem"},24:{value:"6rem"},28:{value:"7rem"},32:{value:"8rem"},36:{value:"9rem"},40:{value:"10rem"},44:{value:"11rem"},48:{value:"12rem"},52:{value:"13rem"},56:{value:"14rem"},60:{value:"15rem"},64:{value:"16rem"},72:{value:"18rem"},80:{value:"20rem"},96:{value:"24rem"}}),largeSizes=defineTokens.sizes({"3xs":{value:"14rem"},"2xs":{value:"16rem"},xs:{value:"20rem"},sm:{value:"24rem"},md:{value:"28rem"},lg:{value:"32rem"},xl:{value:"36rem"},"2xl":{value:"42rem"},"3xl":{value:"48rem"},"4xl":{value:"56rem"},"5xl":{value:"64rem"},"6xl":{value:"72rem"},"7xl":{value:"80rem"},"8xl":{value:"90rem"}}),namedSizes=defineTokens.sizes({max:{value:"max-content"},min:{value:"min-content"},fit:{value:"fit-content"},prose:{value:"60ch"},full:{value:"100%"},dvh:{value:"100dvh"},svh:{value:"100svh"},lvh:{value:"100lvh"},dvw:{value:"100dvw"},svw:{value:"100svw"},lvw:{value:"100lvw"},vw:{value:"100vw"},vh:{value:"100vh"}}),fractionalSizes=defineTokens.sizes({"1/2":{value:"50%"},"1/3":{value:"33.333333%"},"2/3":{value:"66.666667%"},"1/4":{value:"25%"},"3/4":{value:"75%"},"1/5":{value:"20%"},"2/5":{value:"40%"},"3/5":{value:"60%"},"4/5":{value:"80%"},"1/6":{value:"16.666667%"},"2/6":{value:"33.333333%"},"3/6":{value:"50%"},"4/6":{value:"66.666667%"},"5/6":{value:"83.333333%"},"1/12":{value:"8.333333%"},"2/12":{value:"16.666667%"},"3/12":{value:"25%"},"4/12":{value:"33.333333%"},"5/12":{value:"41.666667%"},"6/12":{value:"50%"},"7/12":{value:"58.333333%"},"8/12":{value:"66.666667%"},"9/12":{value:"75%"},"10/12":{value:"83.333333%"},"11/12":{value:"91.666667%"}}),sizes=defineTokens.sizes({...largeSizes,...spacing,...fractionalSizes,...namedSizes}),zIndices=defineTokens.zIndex({hide:{value:-1},base:{value:0},docked:{value:10},dropdown:{value:1e3},sticky:{value:1100},banner:{value:1200},overlay:{value:1300},modal:{value:1400},popover:{value:1500},skipNav:{value:1600},toast:{value:1700},tooltip:{value:1800},max:{value:2147483647}}),defaultThemeConfig=defineConfig({preflight:!0,cssVarsPrefix:"chakra",cssVarsRoot:":where(html, .chakra-theme)",globalCss,theme:{breakpoints,keyframes,tokens:{aspectRatios,animations,blurs,borders,colors,durations,easings,fonts,fontSizes,fontWeights,letterSpacings,lineHeights,radii,spacing,sizes,zIndex:zIndices,cursor},semanticTokens:{colors:semanticColors,shadows:semanticShadows,radii:semanticRadii},recipes,slotRecipes,textStyles,layerStyles,animationStyles}}),defaultConfig=mergeConfigs(defaultBaseConfig,defaultThemeConfig),defaultSystem=createSystem(defaultConfig),dataAttr=T=>T?"":void 0,StyledGroup=chakra("div",{base:{display:"inline-flex",gap:"0.5rem",isolation:"isolate",position:"relative","& [data-group-item]":{_focusVisible:{zIndex:1}}},variants:{orientation:{horizontal:{flexDirection:"row"},vertical:{flexDirection:"column"}},attached:{true:{gap:"0!"}},grow:{true:{display:"flex","& > *":{flex:1}}},stacking:{"first-on-top":{"& > [data-group-item]":{zIndex:"calc(var(--group-count) - var(--group-index))"}},"last-on-top":{"& > [data-group-item]":{zIndex:"var(--group-index)"}}}},compoundVariants:[{orientation:"horizontal",attached:!0,css:{"& > *[data-first]":{borderEndRadius:"0!",marginEnd:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginEnd:"-1px"},"& > *[data-last]":{borderStartRadius:"0!"}}},{orientation:"vertical",attached:!0,css:{"& > *[data-first]":{borderBottomRadius:"0!",marginBottom:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginBottom:"-1px"},"& > *[data-last]":{borderTopRadius:"0!"}}}],defaultVariants:{orientation:"horizontal"}}),Group=reactExports.memo(reactExports.forwardRef(function(_,E){const{align:C="center",justify:A="flex-start",children:R,wrap:I,skip:F,...B}=_,U=reactExports.useMemo(()=>{let V=reactExports.Children.toArray(R).filter(reactExports.isValidElement);if(V.length===1)return V;const D=V.filter(L=>!(F!=null&&F(L))),O=D.length;return D.length===1?V:V.map(L=>{const z=L.props;if(F!=null&&F(L))return L;const W=D.indexOf(L);return reactExports.cloneElement(L,{...z,"data-group-item":"","data-first":dataAttr(W===0),"data-last":dataAttr(W===O-1),"data-between":dataAttr(W>0&&W<O-1),style:{"--group-count":O,"--group-index":W,...(z==null?void 0:z.style)??{}}})})},[R,F]);return jsxRuntimeExports.jsx(StyledGroup,{ref:E,alignItems:C,justifyContent:A,flexWrap:I,...B,className:cx("chakra-group",_.className),children:U})})),{withProvider:withProvider$7,withContext:withContext$d,useStyles:useAvatarStyles,useClassNames:useClassNames$1,PropsProvider}=createSlotRecipeContext({key:"avatar"});withProvider$7(AvatarRootProvider,"root",{forwardAsChild:!0});const AvatarRoot=withProvider$7(AvatarRoot$1,"root",{forwardAsChild:!0}),AvatarPropsProvider=PropsProvider,StyledFallback=chakra(AvatarFallback$2,{},{forwardAsChild:!0});function getFallbackChildren(T){return T.children||T.asChild?T.children:T.name?getInitials$1(T.name):jsxRuntimeExports.jsx(AvatarIcon,{})}function getInitials$1(T){const _=T.trim().split(" "),E=_[0]!=null?_[0]:"",C=_.length>1?_[_.length-1]:"";return E&&C?`${E.charAt(0)}${C.charAt(0)}`:E.charAt(0)}const AvatarFallback$1=reactExports.forwardRef(function(_,E){const C=useAvatarStyles(),A=useClassNames$1(),{name:R,...I}=_;return jsxRuntimeExports.jsx(StyledFallback,{ref:E,...I,className:cx(_.className,A.fallback),css:[C.fallback,_.css],children:getFallbackChildren(_)})}),AvatarImage=withContext$d(AvatarImage$1,"image",{forwardAsChild:!0,defaultProps:{draggable:"false",referrerPolicy:"no-referrer"}}),AvatarIcon=reactExports.forwardRef(function(_,E){return jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1.2em",width:"1.2em",ref:E,..._,children:jsxRuntimeExports.jsx("path",{d:"M20 22H18V20C18 18.3431 16.6569 17 15 17H9C7.34315 17 6 18.3431 6 20V22H4V20C4 17.2386 6.23858 15 9 15H15C17.7614 15 20 17.2386 20 20V22ZM12 13C8.68629 13 6 10.3137 6 7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7C18 10.3137 15.3137 13 12 13ZM12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"})})});reactExports.forwardRef(function(_,E){const C=useSlotRecipe({key:"avatar"}),[A,R]=reactExports.useMemo(()=>C.splitVariantProps(_),[_,C]);return jsxRuntimeExports.jsx(PropsProvider,{value:A,children:jsxRuntimeExports.jsx(Group,{gap:"0",spaceX:"-3",ref:E,...R})})});const Box=chakra("div");Box.displayName="Box";const Span=chakra("span"),AbsoluteCenter=chakra("div",{base:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},variants:{axis:{horizontal:{insetStart:"50%",translate:"-50%",_rtl:{translate:"50%"}},vertical:{top:"50%",translate:"0 -50%"},both:{insetStart:"50%",top:"50%",translate:"-50% -50%",_rtl:{translate:"50% -50%"}}}},defaultVariants:{axis:"both"}});AbsoluteCenter.displayName="AbsoluteCenter";const{withContext:withContext$c}=createRecipeContext({key:"spinner"}),Spinner=withContext$c("span"),Loader$2=reactExports.forwardRef(function(_,E){const{spinner:C=jsxRuntimeExports.jsx(Spinner,{size:"inherit",borderWidth:"0.125em",color:"inherit"}),spinnerPlacement:A="start",children:R,text:I,visible:F=!0,...B}=_;return F?I?jsxRuntimeExports.jsxs(Span,{ref:E,display:"contents",...B,children:[A==="start"&&C,I,A==="end"&&C]}):C?jsxRuntimeExports.jsxs(Span,{ref:E,display:"contents",...B,children:[jsxRuntimeExports.jsx(AbsoluteCenter,{display:"inline-flex",children:C}),jsxRuntimeExports.jsx(Span,{opacity:0,children:R})]}):jsxRuntimeExports.jsx(Span,{ref:E,display:"contents",...B,children:R}):R}),{useRecipeResult:useRecipeResult$1,usePropsContext}=createRecipeContext({key:"button"}),Button$1=reactExports.forwardRef(function(_,E){const C=usePropsContext(),A=reactExports.useMemo(()=>mergeProps$1(C,_),[C,_]),R=useRecipeResult$1(A),{loading:I,loadingText:F,children:B,spinner:U,spinnerPlacement:V,...D}=R.props;return jsxRuntimeExports.jsx(chakra.button,{type:"button",ref:E,...D,disabled:I||D.disabled,className:cx(R.className,A.className),css:[R.styles,A.css],children:!A.asChild&&I?jsxRuntimeExports.jsx(Loader$2,{spinner:U,text:F,spinnerPlacement:V,children:B}):B})}),IconButton=reactExports.forwardRef(function(_,E){return jsxRuntimeExports.jsx(Button$1,{px:"0",py:"0",_icon:{fontSize:"1.2em"},ref:E,..._})}),{withProvider:withProvider$6,withContext:withContext$b}=createSlotRecipeContext({key:"clipboard"});withProvider$6(ClipboardRootProvider,"root",{forwardAsChild:!0});const ClipboardRoot$1=withProvider$6(ClipboardRoot$2,"root",{forwardAsChild:!0}),ClipboardTrigger=withContext$b(ClipboardTrigger$1,"trigger",{forwardAsChild:!0});withContext$b(ClipboardControl,"control",{forwardAsChild:!0});const ClipboardIndicator=withContext$b(ClipboardIndicator$1,"indicator",{forwardAsChild:!0,defaultProps:{copied:jsxRuntimeExports.jsx(CheckIcon,{boxSize:"1em"}),children:jsxRuntimeExports.jsx(CopyIcon,{boxSize:"1em"})}}),ClipboardInput=withContext$b(ClipboardInput$1,"input",{forwardAsChild:!0}),ClipboardLabel=withContext$b(ClipboardLabel$1,"label",{forwardAsChild:!0});withContext$b(ClipboardValueText,"valueText",{forwardAsChild:!0});reactExports.forwardRef(function(_,E){return jsxRuntimeExports.jsx(ClipboardIndicator,{copied:"Copied",..._,ref:E,children:"Copy"})});function getSeparatorStyles(T){const{gap:_,direction:E}=T,C={column:{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},"column-reverse":{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},row:{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0},"row-reverse":{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0}};return{"&":mapObject(E,A=>C[A])}}function getValidChildren(T){return reactExports.Children.toArray(T).filter(_=>reactExports.isValidElement(_))}const Stack=reactExports.forwardRef(function(_,E){const{direction:C="column",align:A,justify:R,gap:I="0.5rem",wrap:F,children:B,separator:U,className:V,...D}=_,O=reactExports.useMemo(()=>getSeparatorStyles({gap:I,direction:C}),[I,C]),L=reactExports.useMemo(()=>U?getValidChildren(B).map((z,W,X)=>{const Y=typeof z.key<"u"?z.key:W,K=reactExports.cloneElement(U,{css:[O,U.props.css]});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[z,W===X.length-1?null:K]},Y)}):B,[B,U,O]);return jsxRuntimeExports.jsx(chakra.div,{ref:E,display:"flex",alignItems:A,justifyContent:R,flexDirection:C,flexWrap:F,gap:U?void 0:I,className:cx("chakra-stack",V),...D,children:L})}),{withRootProvider:withRootProvider$1,withContext:withContext$a}=createSlotRecipeContext({key:"drawer"});withRootProvider$1(DialogRootProvider,{defaultProps:{unmountOnExit:!0,lazyMount:!0}});const DrawerRoot$1=withRootProvider$1(DialogRoot,{defaultProps:{unmountOnExit:!0,lazyMount:!0}}),DrawerTrigger$1=withContext$a(DialogTrigger,"trigger",{forwardAsChild:!0}),DrawerPositioner=withContext$a(DialogPositioner,"positioner",{forwardAsChild:!0}),DrawerContent$1=withContext$a(DialogContent,"content",{forwardAsChild:!0});withContext$a(DialogDescription,"description",{forwardAsChild:!0});const DrawerTitle$1=withContext$a(DialogTitle,"title",{forwardAsChild:!0}),DrawerCloseTrigger$1=withContext$a(DialogCloseTrigger,"closeTrigger",{forwardAsChild:!0}),DrawerActionTrigger$1=reactExports.forwardRef(function(_,E){const C=useDialogContext();return jsxRuntimeExports.jsx(chakra.button,{..._,ref:E,onClick:()=>C.setOpen(!1)})}),DrawerBackdrop$1=withContext$a(DialogBackdrop,"backdrop",{forwardAsChild:!0}),DrawerBody$1=withContext$a("div","body"),DrawerFooter$1=withContext$a("div","footer"),DrawerHeader$1=withContext$a("div","header"),{useRecipeResult}=createRecipeContext({key:"icon"}),Icon=reactExports.forwardRef(function(_,E){const{styles:C,className:A,props:R}=useRecipeResult({asChild:!_.as,..._});return jsxRuntimeExports.jsx(chakra.svg,{ref:E,focusable:!1,"aria-hidden":"true",...R,css:[C,_.css],className:cx(A,_.className)})});function createIcon(T){const{viewBox:_="0 0 24 24",d:E,displayName:C,defaultProps:A={}}=T,R=reactExports.Children.toArray(T.path),I=reactExports.forwardRef((F,B)=>jsxRuntimeExports.jsx(Icon,{ref:B,asChild:!1,viewBox:_,...A,...F,children:R.length?R:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:E})}));return I.displayName=C,I}const{withProvider:withProvider$5,withContext:withContext$9,useStyles:useFieldStyles,useClassNames}=createSlotRecipeContext({key:"field"}),FieldRoot=withProvider$5(FieldRoot$1,"root",{forwardAsChild:!0}),FieldLabel=withContext$9(FieldLabel$1,"label",{forwardAsChild:!0}),FieldHelperText=withContext$9(FieldHelperText$1,"helperText",{forwardAsChild:!0}),FieldErrorText=withContext$9(FieldErrorText$1,"errorText",{forwardAsChild:!0});createIcon({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"});const FieldRequiredIndicator=reactExports.forwardRef(function(_,E){const{fallback:C,children:A="*",...R}=_,I=useFieldContext(),F=useClassNames(),B=useFieldStyles();return I!=null&&I.required?jsxRuntimeExports.jsx(chakra.span,{ref:E,"aria-hidden":"true",...R,className:cx(F.requiredIndicator,_.className),css:[B.requiredIndicator,_.css],children:A}):C}),Flex=reactExports.forwardRef(function(_,E){const{direction:C,align:A,justify:R,wrap:I,basis:F,grow:B,shrink:U,inline:V,...D}=_;return jsxRuntimeExports.jsx(chakra.div,{ref:E,...D,css:{display:V?"inline-flex":"flex",flexDirection:C,alignItems:A,justifyContent:R,flexWrap:I,flexBasis:F,flexGrow:B,flexShrink:U,..._.css}})}),Image$1=reactExports.forwardRef(function(_,E){const{align:C,fit:A="cover",...R}=_;return jsxRuntimeExports.jsx(chakra.img,{ref:E,objectFit:A,objectPosition:C,className:cx("chakra-image",_.className),...R})}),{withContext:withContext$8}=createRecipeContext({key:"input"}),Input=withContext$8(FieldInput),InputElement=chakra("div",{base:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",zIndex:2,color:"fg.muted",height:"full",fontSize:"sm",px:"3"},variants:{placement:{start:{insetInlineStart:"0"},end:{insetInlineEnd:"0"}}}}),{withProvider:withProvider$4,withContext:withContext$7}=createSlotRecipeContext({key:"numberInput"});withProvider$4(NumberInputRootProvider,"root",{forwardAsChild:!0});const NumberInputRoot=withProvider$4(NumberInputRoot$1,"root",{forwardAsChild:!0});withContext$7(NumberInputLabel,"label",{forwardAsChild:!0});const NumberInputInput=withContext$7(NumberInputInput$1,"input",{forwardAsChild:!0}),NumberInputIncrementTrigger=withContext$7(NumberInputIncrementTrigger$1,"incrementTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}}),NumberInputDecrementTrigger=withContext$7(NumberInputDecrementTrigger$1,"decrementTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}}),NumberInputControl=withContext$7(NumberInputControl$1,"control",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NumberInputIncrementTrigger,{}),jsxRuntimeExports.jsx(NumberInputDecrementTrigger,{})]})}});withContext$7(NumberInputScrubber,"scrubber",{forwardAsChild:!0});withContext$7(NumberInputValueText,"valueText",{forwardAsChild:!0});const{withProvider:withProvider$3,withContext:withContext$6}=createSlotRecipeContext({key:"select"});withProvider$3(SelectRootProvider,"root",{forwardAsChild:!0});const SelectRoot$1=withProvider$3(SelectRoot$2,"root",{forwardAsChild:!0,defaultProps:{positioning:{sameWidth:!0}}}),SelectTrigger$1=withContext$6(SelectTrigger$2,"trigger",{forwardAsChild:!0}),SelectPositioner=withContext$6(SelectPositioner$1,"positioner",{forwardAsChild:!0}),SelectContent$1=withContext$6(SelectContent$2,"content",{forwardAsChild:!0}),SelectValueText$1=withContext$6(SelectValueText$2,"valueText",{forwardAsChild:!0}),SelectClearTrigger$1=withContext$6(SelectClearTrigger$2,"clearTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CloseIcon,{boxSize:"1em"})}}),SelectItemGroup=withContext$6(SelectItemGroup$1,"itemGroup",{forwardAsChild:!0}),SelectItemGroupLabel=withContext$6(SelectItemGroupLabel$1,"itemGroupLabel",{forwardAsChild:!0}),SelectItem$1=withContext$6(SelectItem$2,"item",{forwardAsChild:!0});withContext$6(SelectItemText,"itemText",{forwardAsChild:!0});const SelectItemIndicator=withContext$6(SelectItemIndicator$1,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CheckIcon,{})}}),SelectIndicatorGroup=withContext$6("div","indicatorGroup"),SelectIndicator=withContext$6(SelectIndicator$1,"indicator",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}}),SelectControl=withContext$6(SelectControl$1,"control",{forwardAsChild:!0});withContext$6(SelectLabel,"label",{forwardAsChild:!0});const SelectContext=SelectContext$1,SelectHiddenSelect=SelectHiddenSelect$1,HStack=reactExports.forwardRef(function(_,E){return jsxRuntimeExports.jsx(Stack,{align:"center",..._,direction:"row",ref:E})}),VStack=reactExports.forwardRef(function(_,E){return jsxRuntimeExports.jsx(Stack,{align:"center",..._,direction:"column",ref:E})}),{withProvider:withProvider$2,withContext:withContext$5,useStyles:useSwitchStyles}=createSlotRecipeContext({key:"switch"});withProvider$2(SwitchRootProvider,"root",{forwardAsChild:!0});const SwitchRoot=withProvider$2(SwitchRoot$1,"root",{forwardAsChild:!0}),SwitchLabel=withContext$5(SwitchLabel$1,"label",{forwardAsChild:!0}),SwitchThumb=withContext$5(SwitchThumb$1,"thumb",{forwardAsChild:!0}),SwitchControl=withContext$5(SwitchControl$1,"control",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(SwitchThumb,{})}}),SwitchIndicator=reactExports.forwardRef(function(_,E){const C=useSwitchContext(),A=useSwitchStyles(),{fallback:R,children:I,...F}=_;return jsxRuntimeExports.jsx(chakra.span,{ref:E,"data-checked":dataAttr(C.checked),...F,css:[A.indicator,_.css],children:C.checked?I:R})}),SwitchThumbIndicator=reactExports.forwardRef(function(_,E){const C=useSwitchContext(),{fallback:A,children:R,...I}=_;return jsxRuntimeExports.jsx(chakra.span,{ref:E,"data-checked":dataAttr(C.checked),...I,children:C.checked?R:A})}),SwitchHiddenInput=SwitchHiddenInput$1,{withProvider:withProvider$1,withContext:withContext$4}=createSlotRecipeContext({key:"tabs"});withProvider$1(TabsRootProvider,"root",{forwardAsChild:!0});const TabsRoot=withProvider$1(TabsRoot$1,"root",{forwardAsChild:!0}),TabsTrigger=withContext$4(TabTrigger,"trigger",{forwardAsChild:!0}),TabsContent=withContext$4(TabContent,"content",{forwardAsChild:!0}),TabsContentGroup=withContext$4("div","contentGroup"),TabsList=withContext$4(TabList,"list",{forwardAsChild:!0});withContext$4(TabIndicator,"indicator",{forwardAsChild:!0});const{withContext:withContext$3}=createRecipeContext({key:"textarea"}),Textarea=withContext$3(FieldTextarea),{withProvider,withContext:withContext$2,useStyles:useToastStyles}=createSlotRecipeContext({key:"toast"}),Toaster$1=chakra(Toaster$2,{},{forwardAsChild:!0}),ToastRoot=withProvider(ToastRoot$1,"root",{forwardAsChild:!0}),ToastCloseTrigger=withContext$2(ToastCloseTrigger$1,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CloseIcon,{})}}),ToastTitle=withContext$2(ToastTitle$1,"title",{forwardAsChild:!0}),ToastDescription=withContext$2(ToastDescription$1,"description",{forwardAsChild:!0}),ToastActionTrigger=withContext$2(ToastActionTrigger$1,"actionTrigger",{forwardAsChild:!0}),iconMap={warning:WarningIcon,success:CheckCircleIcon,error:WarningIcon},ToastIndicator=reactExports.forwardRef(function(_,E){const C=useToastContext(),A=useToastStyles(),R=iconMap[C.type];return R?jsxRuntimeExports.jsx(R,{ref:E,..._,css:[A.indicator,_.css]}):null}),{withRootProvider,withContext:withContext$1}=createSlotRecipeContext({key:"tooltip"});withRootProvider(TooltipRootProvider);const TooltipRoot=withRootProvider(TooltipRoot$1,{defaultProps:{lazyMount:!0,unmountOnExit:!0}}),TooltipTrigger=withContext$1(TooltipTrigger$1,"trigger",{forwardAsChild:!0}),TooltipPositioner=withContext$1(TooltipPositioner$1,"positioner",{forwardAsChild:!0}),TooltipContent=withContext$1(TooltipContent$1,"content",{forwardAsChild:!0}),TooltipArrowTip=withContext$1(TooltipArrowTip$1,"arrowTip",{forwardAsChild:!0}),TooltipArrow=withContext$1(TooltipArrow$1,"arrow",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(TooltipArrowTip,{})}}),{withContext}=createRecipeContext({key:"text"}),Text$1=withContext("p"),canvasStyles={background:{container:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto"},image:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1},video:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1,transform:"scaleX(-1)"}},canvas:{container:{position:"relative",width:"100%",height:"100%",zIndex:"1",pointerEvents:"auto"}},subtitle:{container:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"15px 30px",borderRadius:"12px",minWidth:"60%",maxWidth:"95%",zIndex:2},text:{color:"white",fontSize:"1.5rem",textAlign:"center",lineHeight:"1.4",whiteSpace:"pre-wrap"}},wsStatus:{container:{position:"absolute",top:"20px",left:"20px",zIndex:2,padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"medium",color:"white",transition:"all 0.2s",cursor:"pointer",userSelect:"none",_hover:{opacity:.8}}}},toaster=createToaster({placement:"top-end",pauseOnPageIdle:!0,max:5});function Toaster(){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Toaster$1,{toaster,insetInline:{mdDown:"4"},children:T=>{var _;return jsxRuntimeExports.jsxs(ToastRoot,{width:{md:"sm"},children:[T.type==="loading"?jsxRuntimeExports.jsx(Spinner,{size:"sm",color:"blue.solid"}):jsxRuntimeExports.jsx(ToastIndicator,{}),jsxRuntimeExports.jsxs(Stack,{gap:"1",flex:"1",maxWidth:"100%",children:[T.title&&jsxRuntimeExports.jsx(ToastTitle,{children:T.title}),T.description&&jsxRuntimeExports.jsx(ToastDescription,{children:T.description})]}),T.action&&jsxRuntimeExports.jsx(ToastActionTrigger,{children:T.action.label}),((_=T.meta)==null?void 0:_.closable)&&jsxRuntimeExports.jsx(ToastCloseTrigger,{})]})}})})}const DEFAULT_CAMERA_CONFIG={width:320,height:240},CameraContext=reactExports.createContext(null);function CameraProvider({children:T}){const[_,E]=reactExports.useState(!1),[C,A]=reactExports.useState(!1),[R,I]=reactExports.useState(DEFAULT_CAMERA_CONFIG),F=reactExports.useRef(null),B=reactExports.useRef(null),U=reactExports.useRef(null),V=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(K=>K.kind==="videoinput"))throw new Error("No camera found on this device");const Y=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:R.width},height:{ideal:R.height}}});F.current=Y,U.current&&(U.current.srcObject=Y),E(!0)}catch(W){throw console.error("Failed to start camera:",W),toaster.create({title:`Failed to start camera: ${W}`,type:"error",duration:2e3}),W}},[R]),D=reactExports.useCallback(()=>{F.current&&(F.current.getTracks().forEach(W=>W.stop()),F.current=null,E(!1))},[]),O=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(K=>K.kind==="videoinput"))throw new Error("No camera found on this device");const Y=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:R.width},height:{ideal:R.height}}});B.current=Y,A(!0)}catch(W){throw console.error("Failed to start background camera:",W),toaster.create({title:`Failed to start background camera: ${W}`,type:"error",duration:2e3}),W}},[R]),L=reactExports.useCallback(()=>{B.current&&(B.current.getTracks().forEach(W=>W.stop()),B.current=null,A(!1))},[]),z=reactExports.useMemo(()=>({isStreaming:_,stream:F.current,startCamera:V,stopCamera:D,cameraConfig:R,setCameraConfig:I,videoRef:U,backgroundStream:B.current,startBackgroundCamera:O,stopBackgroundCamera:L,isBackgroundStreaming:C}),[_,V,D,R,C,O,L]);return jsxRuntimeExports.jsx(CameraContext.Provider,{value:z,children:T})}function useCamera(){const T=reactExports.useContext(CameraContext);if(!T)throw new Error("useCamera must be used within a CameraProvider");return T}function useLocalStorage(T,_,E){const[C,A]=reactExports.useState(()=>{try{const I=window.localStorage.getItem(T);return I?JSON.parse(I):_}catch(I){return console.error(`Error reading localStorage key "${T}":`,I),_}});return[C,I=>{try{const F=I instanceof Function?I(C):I,B=E!=null&&E.filter?E.filter(F):F;A(F),window.localStorage.setItem(T,JSON.stringify(B))}catch(F){console.error(`Error setting localStorage key "${T}":`,F)}}]}var extendStatics=function(T,_){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(E[A]=C[A])},extendStatics(T,_)};function __extends(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics(T,_);function E(){this.constructor=T}T.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}function __values(T){var _=typeof Symbol=="function"&&Symbol.iterator,E=_&&T[_],C=0;if(E)return E.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&C>=T.length&&(T=void 0),{value:T&&T[C++],done:!T}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(T,_){var E=typeof Symbol=="function"&&T[Symbol.iterator];if(!E)return T;var C=E.call(T),A,R=[],I;try{for(;(_===void 0||_-- >0)&&!(A=C.next()).done;)R.push(A.value)}catch(F){I={error:F}}finally{try{A&&!A.done&&(E=C.return)&&E.call(C)}finally{if(I)throw I.error}}return R}function __spreadArray(T,_,E){if(E||arguments.length===2)for(var C=0,A=_.length,R;C<A;C++)(R||!(C in _))&&(R||(R=Array.prototype.slice.call(_,0,C)),R[C]=_[C]);return T.concat(R||Array.prototype.slice.call(_))}typeof SuppressedError=="function"&&SuppressedError;function isFunction(T){return typeof T=="function"}function createErrorClass(T){var _=function(C){Error.call(C),C.stack=new Error().stack},E=T(_);return E.prototype=Object.create(Error.prototype),E.prototype.constructor=E,E}var UnsubscriptionError=createErrorClass(function(T){return function(E){T(this),this.message=E?E.length+` errors occurred during unsubscription:
`+E.map(function(C,A){return A+1+") "+C.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=E}});function arrRemove(T,_){if(T){var E=T.indexOf(_);0<=E&&T.splice(E,1)}}var Subscription=function(){function T(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}return T.prototype.unsubscribe=function(){var _,E,C,A,R;if(!this.closed){this.closed=!0;var I=this._parentage;if(I)if(this._parentage=null,Array.isArray(I))try{for(var F=__values(I),B=F.next();!B.done;B=F.next()){var U=B.value;U.remove(this)}}catch(W){_={error:W}}finally{try{B&&!B.done&&(E=F.return)&&E.call(F)}finally{if(_)throw _.error}}else I.remove(this);var V=this.initialTeardown;if(isFunction(V))try{V()}catch(W){R=W instanceof UnsubscriptionError?W.errors:[W]}var D=this._finalizers;if(D){this._finalizers=null;try{for(var O=__values(D),L=O.next();!L.done;L=O.next()){var z=L.value;try{execFinalizer(z)}catch(W){R=R??[],W instanceof UnsubscriptionError?R=__spreadArray(__spreadArray([],__read(R)),__read(W.errors)):R.push(W)}}}catch(W){C={error:W}}finally{try{L&&!L.done&&(A=O.return)&&A.call(O)}finally{if(C)throw C.error}}}if(R)throw new UnsubscriptionError(R)}},T.prototype.add=function(_){var E;if(_&&_!==this)if(this.closed)execFinalizer(_);else{if(_ instanceof T){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=(E=this._finalizers)!==null&&E!==void 0?E:[]).push(_)}},T.prototype._hasParent=function(_){var E=this._parentage;return E===_||Array.isArray(E)&&E.includes(_)},T.prototype._addParent=function(_){var E=this._parentage;this._parentage=Array.isArray(E)?(E.push(_),E):E?[E,_]:_},T.prototype._removeParent=function(_){var E=this._parentage;E===_?this._parentage=null:Array.isArray(E)&&arrRemove(E,_)},T.prototype.remove=function(_){var E=this._finalizers;E&&arrRemove(E,_),_ instanceof T&&_._removeParent(this)},T.EMPTY=function(){var _=new T;return _.closed=!0,_}(),T}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(T){return T instanceof Subscription||T&&"closed"in T&&isFunction(T.remove)&&isFunction(T.add)&&isFunction(T.unsubscribe)}function execFinalizer(T){isFunction(T)?T():T.unsubscribe()}var config$2={Promise:void 0},timeoutProvider={setTimeout:function(T,_){for(var E=[],C=2;C<arguments.length;C++)E[C-2]=arguments[C];return setTimeout.apply(void 0,__spreadArray([T,_],__read(E)))},clearTimeout:function(T){return clearTimeout(T)},delegate:void 0};function reportUnhandledError(T){timeoutProvider.setTimeout(function(){throw T})}function noop$3(){}function errorContext(T){T()}var Subscriber=function(T){__extends(_,T);function _(E){var C=T.call(this)||this;return C.isStopped=!1,E?(C.destination=E,isSubscription(E)&&E.add(C)):C.destination=EMPTY_OBSERVER,C}return _.create=function(E,C,A){return new SafeSubscriber(E,C,A)},_.prototype.next=function(E){this.isStopped||this._next(E)},_.prototype.error=function(E){this.isStopped||(this.isStopped=!0,this._error(E))},_.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,T.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(E){this.destination.next(E)},_.prototype._error=function(E){try{this.destination.error(E)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_}(Subscription),ConsumerObserver=function(){function T(_){this.partialObserver=_}return T.prototype.next=function(_){var E=this.partialObserver;if(E.next)try{E.next(_)}catch(C){handleUnhandledError(C)}},T.prototype.error=function(_){var E=this.partialObserver;if(E.error)try{E.error(_)}catch(C){handleUnhandledError(C)}else handleUnhandledError(_)},T.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(E){handleUnhandledError(E)}},T}(),SafeSubscriber=function(T){__extends(_,T);function _(E,C,A){var R=T.call(this)||this,I;return isFunction(E)||!E?I={next:E??void 0,error:C??void 0,complete:A??void 0}:I=E,R.destination=new ConsumerObserver(I),R}return _}(Subscriber);function handleUnhandledError(T){reportUnhandledError(T)}function defaultErrorHandler(T){throw T}var EMPTY_OBSERVER={closed:!0,next:noop$3,error:defaultErrorHandler,complete:noop$3},observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(T){return T}function pipeFromArray(T){return T.length===0?identity$1:T.length===1?T[0]:function(E){return T.reduce(function(C,A){return A(C)},E)}}var Observable=function(){function T(_){_&&(this._subscribe=_)}return T.prototype.lift=function(_){var E=new T;return E.source=this,E.operator=_,E},T.prototype.subscribe=function(_,E,C){var A=this,R=isSubscriber(_)?_:new SafeSubscriber(_,E,C);return errorContext(function(){var I=A,F=I.operator,B=I.source;R.add(F?F.call(R,B):B?A._subscribe(R):A._trySubscribe(R))}),R},T.prototype._trySubscribe=function(_){try{return this._subscribe(_)}catch(E){_.error(E)}},T.prototype.forEach=function(_,E){var C=this;return E=getPromiseCtor(E),new E(function(A,R){var I=new SafeSubscriber({next:function(F){try{_(F)}catch(B){R(B),I.unsubscribe()}},error:R,complete:A});C.subscribe(I)})},T.prototype._subscribe=function(_){var E;return(E=this.source)===null||E===void 0?void 0:E.subscribe(_)},T.prototype[observable]=function(){return this},T.prototype.pipe=function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];return pipeFromArray(_)(this)},T.prototype.toPromise=function(_){var E=this;return _=getPromiseCtor(_),new _(function(C,A){var R;E.subscribe(function(I){return R=I},function(I){return A(I)},function(){return C(R)})})},T.create=function(_){return new T(_)},T}();function getPromiseCtor(T){var _;return(_=T??config$2.Promise)!==null&&_!==void 0?_:Promise}function isObserver(T){return T&&isFunction(T.next)&&isFunction(T.error)&&isFunction(T.complete)}function isSubscriber(T){return T&&T instanceof Subscriber||isObserver(T)&&isSubscription(T)}var ObjectUnsubscribedError=createErrorClass(function(T){return function(){T(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(T){__extends(_,T);function _(){var E=T.call(this)||this;return E.closed=!1,E.currentObservers=null,E.observers=[],E.isStopped=!1,E.hasError=!1,E.thrownError=null,E}return _.prototype.lift=function(E){var C=new AnonymousSubject(this,this);return C.operator=E,C},_.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},_.prototype.next=function(E){var C=this;errorContext(function(){var A,R;if(C._throwIfClosed(),!C.isStopped){C.currentObservers||(C.currentObservers=Array.from(C.observers));try{for(var I=__values(C.currentObservers),F=I.next();!F.done;F=I.next()){var B=F.value;B.next(E)}}catch(U){A={error:U}}finally{try{F&&!F.done&&(R=I.return)&&R.call(I)}finally{if(A)throw A.error}}}})},_.prototype.error=function(E){var C=this;errorContext(function(){if(C._throwIfClosed(),!C.isStopped){C.hasError=C.isStopped=!0,C.thrownError=E;for(var A=C.observers;A.length;)A.shift().error(E)}})},_.prototype.complete=function(){var E=this;errorContext(function(){if(E._throwIfClosed(),!E.isStopped){E.isStopped=!0;for(var C=E.observers;C.length;)C.shift().complete()}})},_.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(_.prototype,"observed",{get:function(){var E;return((E=this.observers)===null||E===void 0?void 0:E.length)>0},enumerable:!1,configurable:!0}),_.prototype._trySubscribe=function(E){return this._throwIfClosed(),T.prototype._trySubscribe.call(this,E)},_.prototype._subscribe=function(E){return this._throwIfClosed(),this._checkFinalizedStatuses(E),this._innerSubscribe(E)},_.prototype._innerSubscribe=function(E){var C=this,A=this,R=A.hasError,I=A.isStopped,F=A.observers;return R||I?EMPTY_SUBSCRIPTION:(this.currentObservers=null,F.push(E),new Subscription(function(){C.currentObservers=null,arrRemove(F,E)}))},_.prototype._checkFinalizedStatuses=function(E){var C=this,A=C.hasError,R=C.thrownError,I=C.isStopped;A?E.error(R):I&&E.complete()},_.prototype.asObservable=function(){var E=new Observable;return E.source=this,E},_.create=function(E,C){return new AnonymousSubject(E,C)},_}(Observable),AnonymousSubject=function(T){__extends(_,T);function _(E,C){var A=T.call(this)||this;return A.destination=E,A.source=C,A}return _.prototype.next=function(E){var C,A;(A=(C=this.destination)===null||C===void 0?void 0:C.next)===null||A===void 0||A.call(C,E)},_.prototype.error=function(E){var C,A;(A=(C=this.destination)===null||C===void 0?void 0:C.error)===null||A===void 0||A.call(C,E)},_.prototype.complete=function(){var E,C;(C=(E=this.destination)===null||E===void 0?void 0:E.complete)===null||C===void 0||C.call(E)},_.prototype._subscribe=function(E){var C,A;return(A=(C=this.source)===null||C===void 0?void 0:C.subscribe(E))!==null&&A!==void 0?A:EMPTY_SUBSCRIPTION},_}(Subject);const Mi=class Mi{constructor(){kn(this,"ws",null);kn(this,"messageSubject",new Subject);kn(this,"stateSubject",new Subject);kn(this,"currentState","CLOSED")}static getInstance(){return Mi.instance||(Mi.instance=new Mi),Mi.instance}initializeConnection(){this.sendMessage({type:"fetch-backgrounds"}),this.sendMessage({type:"fetch-configs"}),this.sendMessage({type:"fetch-history-list"}),this.sendMessage({type:"create-new-history"})}connect(_){var E,C;(((E=this.ws)==null?void 0:E.readyState)===WebSocket.CONNECTING||((C=this.ws)==null?void 0:C.readyState)===WebSocket.OPEN)&&this.disconnect();try{this.ws=new WebSocket(_),this.currentState="CONNECTING",this.stateSubject.next("CONNECTING"),this.ws.onopen=()=>{this.currentState="OPEN",this.stateSubject.next("OPEN"),this.initializeConnection()},this.ws.onmessage=A=>{try{const R=JSON.parse(A.data);this.messageSubject.next(R)}catch(R){console.error("Failed to parse WebSocket message:",R),toaster.create({title:`Failed to parse WebSocket message: ${R}`,type:"error",duration:2e3})}},this.ws.onclose=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")},this.ws.onerror=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}catch(A){console.error("Failed to connect to WebSocket:",A),this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}sendMessage(_){var E;((E=this.ws)==null?void 0:E.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(_)):(console.warn("WebSocket is not open. Unable to send message:",_),toaster.create({title:"WebSocket is not open.",type:"error",duration:2e3}))}onMessage(_){return this.messageSubject.subscribe(_)}onStateChange(_){return this.stateSubject.subscribe(_)}disconnect(){var _;(_=this.ws)==null||_.close(),this.ws=null}getCurrentState(){return this.currentState}};kn(Mi,"instance");let WebSocketService=Mi;const wsService=WebSocketService.getInstance(),DEFAULT_WS_URL="ws://127.0.0.1:12393/client-ws",DEFAULT_BASE_URL="http://127.0.0.1:12393",WebSocketContext=React.createContext({sendMessage:wsService.sendMessage.bind(wsService),wsState:"CLOSED",reconnect:()=>wsService.connect(DEFAULT_WS_URL),wsUrl:DEFAULT_WS_URL,setWsUrl:()=>{},baseUrl:DEFAULT_BASE_URL,setBaseUrl:()=>{}});function useWebSocket(){const T=reactExports.useContext(WebSocketContext);if(!T)throw new Error("useWebSocket must be used within a WebSocketProvider");return T}const defaultWsUrl=DEFAULT_WS_URL,defaultBaseUrl=DEFAULT_BASE_URL,BgUrlContext=reactExports.createContext(null);function BgUrlProvider({children:T}){const{baseUrl:_}=useWebSocket(),E=`${_}/bg/ceiling-window-room-night.jpeg`,[C,A]=useLocalStorage("backgroundUrl",E),[R,I]=reactExports.useState([]),F=reactExports.useCallback(()=>{A(E)},[A,E]),B=reactExports.useCallback(z=>{I(W=>[...W,z])},[]),U=reactExports.useCallback(z=>{I(W=>W.filter(X=>X.name!==z))},[]),V=reactExports.useMemo(()=>C===E,[C,E]),[D,O]=reactExports.useState(!1),L=reactExports.useMemo(()=>({backgroundUrl:C,setBackgroundUrl:A,backgroundFiles:R,setBackgroundFiles:I,resetBackground:F,addBackgroundFile:B,removeBackgroundFile:U,isDefaultBackground:V,useCameraBackground:D,setUseCameraBackground:O}),[C,A,R,F,B,U,V,D]);return jsxRuntimeExports.jsx(BgUrlContext.Provider,{value:L,children:T})}function useBgUrl(){const T=reactExports.useContext(BgUrlContext);if(!T)throw new Error("useBgUrl must be used within a BgUrlProvider");return T}const Background=reactExports.memo(({children:T})=>{const _=reactExports.useRef(null),{backgroundStream:E,isBackgroundStreaming:C,startBackgroundCamera:A,stopBackgroundCamera:R}=useCamera(),{useCameraBackground:I,backgroundUrl:F}=useBgUrl();return reactExports.useEffect(()=>{I?A():R()},[I,A,R]),reactExports.useEffect(()=>{_.current&&E&&(_.current.srcObject=E)},[E]),jsxRuntimeExports.jsxs(Box,{...canvasStyles.background.container,children:[I?jsxRuntimeExports.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,style:{...canvasStyles.background.video,display:C?"block":"none",transform:"scaleX(-1)"}}):jsxRuntimeExports.jsx(Image$1,{...canvasStyles.background.image,src:F,alt:"background"}),T]})});Background.displayName="Background";const DEFAULT_SUBTITLE={text:"Hi, I'm some random AI VTuber. Who the hell are ya? Ahh, you must be amazed by my awesomeness, right? right?"},SubtitleContext=reactExports.createContext(null),SubtitleProvider=reactExports.memo(({children:T})=>{const[_,E]=reactExports.useState(DEFAULT_SUBTITLE.text),[C,A]=reactExports.useState(!0),R=reactExports.useMemo(()=>({subtitleText:_,setSubtitleText:E,showSubtitle:C,setShowSubtitle:A}),[_,C]);return jsxRuntimeExports.jsx(SubtitleContext.Provider,{value:R,children:T})});function useSubtitle(){const T=reactExports.useContext(SubtitleContext);if(!T)throw new Error("useSubtitle must be used within a SubtitleProvider");return T}const useSubtitleDisplay=()=>{const T=useSubtitle();return{subtitleText:reactExports.useMemo(()=>T?T.subtitleText:null,[T==null?void 0:T.subtitleText]),isLoaded:!!T}},SubtitleText=reactExports.memo(({text:T})=>jsxRuntimeExports.jsx(Text$1,{...canvasStyles.subtitle.text,children:T}));SubtitleText.displayName="SubtitleText";const Subtitle=reactExports.memo(()=>{const{subtitleText:T,isLoaded:_}=useSubtitleDisplay(),{showSubtitle:E}=useSubtitle();return!_||!T||!E?null:jsxRuntimeExports.jsx(Box,{...canvasStyles.subtitle.container,children:jsxRuntimeExports.jsx(SubtitleText,{text:T})})});Subtitle.displayName="Subtitle";const useWSStatus=()=>{const{wsState:T,reconnect:_}=useWebSocket(),E=reactExports.useCallback(()=>{T!=="OPEN"&&T!=="CONNECTING"&&_()},[T,_]);return reactExports.useMemo(()=>{switch(T){case"OPEN":return{color:"green.500",text:"Connected",isDisconnected:!1,handleClick:E};case"CONNECTING":return{color:"yellow.500",text:"Connecting",isDisconnected:!1,handleClick:E};default:return{color:"red.500",text:"Click to Reconnect",isDisconnected:!0,handleClick:E}}},[T,E])},StatusContent=({text:T})=>T,MemoizedStatusContent=reactExports.memo(StatusContent),WebSocketStatus=reactExports.memo(()=>{const{color:T,text:_,handleClick:E,isDisconnected:C}=useWSStatus();return jsxRuntimeExports.jsx(Box,{...canvasStyles.wsStatus.container,backgroundColor:T,onClick:E,cursor:C?"pointer":"default",_hover:{opacity:C?.8:1},children:jsxRuntimeExports.jsx(MemoizedStatusContent,{text:_})})});WebSocketStatus.displayName="WebSocketStatus";const DEFAULT_CONFIG$1={confName:"",confUid:"",configFiles:[]},ConfigContext=reactExports.createContext(null);function CharacterConfigProvider({children:T}){const[_,E]=reactExports.useState(DEFAULT_CONFIG$1.confName),[C,A]=reactExports.useState(DEFAULT_CONFIG$1.confUid),[R,I]=reactExports.useState(DEFAULT_CONFIG$1.configFiles),F=reactExports.useCallback(U=>{var V;return(V=R.find(D=>D.name===U))==null?void 0:V.filename},[R]),B=reactExports.useMemo(()=>({confName:_,confUid:C,configFiles:R,setConfName:E,setConfUid:A,setConfigFiles:I,getFilenameByName:F}),[_,C,R,F]);return reactExports.useEffect(()=>{var U,V;(V=(U=window.api)==null?void 0:U.updateConfigFiles)==null||V.call(U,R)},[R]),jsxRuntimeExports.jsx(ConfigContext.Provider,{value:B,children:T})}function useConfig(){const T=reactExports.useContext(ConfigContext);if(!T)throw new Error("useConfig must be used within a CharacterConfigProvider");return T}const DEFAULT_CONFIG={modelInfo:{scrollToResize:!0},isLoading:!1},Live2DConfigContext=reactExports.createContext(null);function Live2DConfigProvider({children:T}){const{confUid:_}=useConfig(),[E,C]=reactExports.useState(!1),[A,R]=reactExports.useState(DEFAULT_CONFIG.isLoading);reactExports.useEffect(()=>{var W;const z=(W=window.api)==null?void 0:W.onModeChanged(X=>{C(X==="pet")});return()=>z==null?void 0:z()},[]);const I=(z,W)=>`${z}_${W?"pet":"window"}`,[F,B]=useLocalStorage("modelInfo",DEFAULT_CONFIG.modelInfo,{filter:z=>z&&{...z,url:""}}),[U,V]=useLocalStorage("scale_memory",{}),D=z=>{if(z!=null&&z.url){if(!_){console.warn("Attempting to set model info without confUid"),toaster.create({title:"Attempting to set model info without confUid",type:"error",duration:2e3});return}if(JSON.stringify(z)!==JSON.stringify(F))if(z){const W=I(_,E);let X;const Y=U[W];Y!==void 0?X=Y:(X=Number(z.kScale||.001),V(K=>({...K,[W]:X}))),console.log("finalScale",X),B({...z,kScale:X,pointerInteractive:"pointerInteractive"in z?z.pointerInteractive:(F==null?void 0:F.pointerInteractive)??!1,scrollToResize:"scrollToResize"in z?z.scrollToResize:(F==null?void 0:F.scrollToResize)??!0})}else B(void 0)}},O=reactExports.useCallback(z=>{if(F){const W=I(_,E),X=Number(z.toFixed(8));V(Y=>({...Y,[W]:X})),B({...F,kScale:X})}},[F,_,E,V,B]);reactExports.useEffect(()=>{if(F){const z=I(_,E),W=U[z];W!==void 0&&W!==Number(F.kScale)&&D({...F,kScale:W})}},[E,F]);const L=reactExports.useMemo(()=>({modelInfo:F,setModelInfo:D,isLoading:A,setIsLoading:R,updateModelScale:O}),[F,A,O]);return jsxRuntimeExports.jsx(Live2DConfigContext.Provider,{value:L,children:T})}function useLive2DConfig(){const T=reactExports.useContext(Live2DConfigContext);if(!T)throw new Error("useLive2DConfig must be used within a Live2DConfigProvider");return T}var dist={},ortWeb_min={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(T,_,E)=>{if(_&&typeof _.init=="function"&&typeof _.createSessionHandler=="function"){const C=backends[T];if(C===void 0)backends[T]={backend:_,priority:E};else{if(C.priority>E)return;if(C.priority===E&&C.backend!==_)throw new Error(`cannot register backend "${T}" using priority ${E}`)}if(E>=0){const A=backendsSortedByPriority.indexOf(T);A!==-1&&backendsSortedByPriority.splice(A,1);for(let R=0;R<backendsSortedByPriority.length;R++)if(backends[backendsSortedByPriority[R]].priority<=E){backendsSortedByPriority.splice(R,0,T);return}backendsSortedByPriority.push(T)}return}throw new TypeError("not a valid backend")},resolveBackend=async T=>{const _=T.length===0?backendsSortedByPriority:T,E=[];for(const C of _){const A=backends[C];if(A){if(A.initialized)return A.backend;if(A.aborted)continue;const R=!!A.initPromise;try{return R||(A.initPromise=A.backend.init()),await A.initPromise,A.initialized=!0,A.backend}catch(I){R||E.push({name:C,err:I}),A.aborted=!0}finally{delete A.initPromise}}}throw new Error(`no available backend found. ERR: ${E.map(C=>`[${C.name}] ${C.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(_){if(_!==void 0){if(typeof _!="string"||["verbose","info","warning","error","fatal"].indexOf(_)===-1)throw new Error(`Unsupported logging level: ${_}`);this.logLevelInternal=_}}get logLevel(){return this.logLevelInternal}}const env$1=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=T=>{let _=1;for(let E=0;E<T.length;E++){const C=T[E];if(typeof C!="number"||!Number.isSafeInteger(C))throw new TypeError(`dims[${E}] must be an integer, got: ${C}`);if(C<0)throw new RangeError(`dims[${E}] must be a non-negative integer, got: ${C}`);_*=C}return _};let Tensor$1=class Oi{constructor(_,E,C){let A,R,I;if(typeof _=="string")if(A=_,I=C,_==="string"){if(!Array.isArray(E))throw new TypeError("A string tensor's data must be a string array.");R=E}else{const B=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(_);if(B===void 0)throw new TypeError(`Unsupported tensor type: ${_}.`);if(Array.isArray(E))R=B.from(E);else if(E instanceof B)R=E;else throw new TypeError(`A ${A} tensor's data must be type of ${B}`)}else if(I=E,Array.isArray(_)){if(_.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const B=typeof _[0];if(B==="string")A="string",R=_;else if(B==="boolean")A="bool",R=Uint8Array.from(_);else throw new TypeError(`Invalid element type of data array: ${B}.`)}else{const B=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(_.constructor);if(B===void 0)throw new TypeError(`Unsupported type for tensor data: ${_.constructor}.`);A=B,R=_}if(I===void 0)I=[R.length];else if(!Array.isArray(I))throw new TypeError("A tensor's dims must be a number array");const F=calculateSize(I);if(F!==R.length)throw new Error(`Tensor's size(${F}) does not match data length(${R.length}).`);this.dims=I,this.type=A,this.data=R,this.size=F}static bufferToTensor(_,E){if(_===void 0)throw new Error("Image buffer must be defined");if(E.height===void 0||E.width===void 0)throw new Error("Image height and width must be defined");const{height:C,width:A}=E,R=E.norm;let I,F;R===void 0||R.mean===void 0?I=255:I=R.mean,R===void 0||R.bias===void 0?F=0:F=R.bias;const B=E.bitmapFormat!==void 0?E.bitmapFormat:"RGBA",U=E.tensorFormat!==void 0&&E.tensorFormat!==void 0?E.tensorFormat:"RGB",V=C*A,D=U==="RGBA"?new Float32Array(V*4):new Float32Array(V*3);let O=4,L=0,z=1,W=2,X=3,Y=0,K=V,Q=V*2,ee=-1;B==="RGB"&&(O=3,L=0,z=1,W=2,X=-1),U==="RGBA"?ee=V*3:U==="RBG"?(Y=0,Q=V,K=V*2):U==="BGR"&&(Q=0,K=V,Y=V*2);for(let ie=0;ie<V;ie++,L+=O,W+=O,z+=O,X+=O)D[Y++]=(_[L]+F)/I,D[K++]=(_[z]+F)/I,D[Q++]=(_[W]+F)/I,ee!==-1&&X!==-1&&(D[ee++]=(_[X]+F)/I);return U==="RGBA"?new Oi("float32",D,[1,4,C,A]):new Oi("float32",D,[1,3,C,A])}static async fromImage(_,E){const C=typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement,A=typeof ImageData<"u"&&_ instanceof ImageData,R=typeof ImageBitmap<"u"&&_ instanceof ImageBitmap,I=typeof String<"u"&&(_ instanceof String||typeof _=="string");let F,B={};if(C){const U=document.createElement("canvas"),V=U.getContext("2d");if(V!=null){let D=_.naturalHeight,O=_.naturalWidth;if(E!==void 0&&E.resizedHeight!==void 0&&E.resizedWidth!==void 0&&(D=E.resizedHeight,O=E.resizedWidth),E!==void 0){if(B=E,E.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(B.tensorFormat="RGBA",E.height!==void 0&&E.height!==D)throw new Error("Image input config height doesn't match HTMLImageElement height");if(B.height=D,E.width!==void 0&&E.width!==O)throw new Error("Image input config width doesn't match HTMLImageElement width");B.width=O}else B.tensorFormat="RGBA",B.height=D,B.width=O;U.width=O,U.height=D,V.drawImage(_,0,0,O,D),F=V.getImageData(0,0,O,D).data}else throw new Error("Can not access image data")}else if(A){const U="RGBA";let V,D;if(E!==void 0&&E.resizedWidth!==void 0&&E.resizedHeight!==void 0?(V=E.resizedHeight,D=E.resizedWidth):(V=_.height,D=_.width),E!==void 0){if(B=E,E.bitmapFormat!==void 0&&E.bitmapFormat!==U)throw new Error("Image input config format must be RGBA for ImageData");B.bitmapFormat="RGBA"}else B.bitmapFormat="RGBA";if(B.height=V,B.width=D,E!==void 0){const O=document.createElement("canvas");O.width=D,O.height=V;const L=O.getContext("2d");if(L!=null)L.putImageData(_,0,0),F=L.getImageData(0,0,D,V).data;else throw new Error("Can not access image data")}else F=_.data}else if(R){if(E===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(E.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const U=document.createElement("canvas").getContext("2d");if(U!=null){const V=_.height,D=_.width;if(U.drawImage(_,0,0,D,V),F=U.getImageData(0,0,D,V).data,E!==void 0){if(E.height!==void 0&&E.height!==V)throw new Error("Image input config height doesn't match ImageBitmap height");if(B.height=V,E.width!==void 0&&E.width!==D)throw new Error("Image input config width doesn't match ImageBitmap width");B.width=D}else B.height=V,B.width=D;return Oi.bufferToTensor(F,B)}else throw new Error("Can not access image data")}else{if(I)return new Promise((U,V)=>{const D=document.createElement("canvas"),O=D.getContext("2d");if(!_||!O)return V();const L=new Image;L.crossOrigin="Anonymous",L.src=_,L.onload=()=>{D.width=L.width,D.height=L.height,O.drawImage(L,0,0,D.width,D.height);const z=O.getImageData(0,0,D.width,D.height);if(E!==void 0){if(E.height!==void 0&&E.height!==D.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(B.height=D.height,E.width!==void 0&&E.width!==D.width)throw new Error("Image input config width doesn't match ImageBitmap width");B.width=D.width}else B.height=D.height,B.width=D.width;U(Oi.bufferToTensor(z.data,B))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(F!==void 0)return Oi.bufferToTensor(F,B);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(_){var E,C;const A=document.createElement("canvas").getContext("2d");let R;if(A!=null){const I=this.dims[3],F=this.dims[2],B=this.dims[1],U=_!==void 0&&_.format!==void 0?_.format:"RGB",V=_!==void 0&&((E=_.norm)===null||E===void 0?void 0:E.mean)!==void 0?_.norm.mean:255,D=_!==void 0&&((C=_.norm)===null||C===void 0?void 0:C.bias)!==void 0?_.norm.bias:0,O=F*I;if(_!==void 0){if(_.height!==void 0&&_.height!==F)throw new Error("Image output config height doesn't match tensor height");if(_.width!==void 0&&_.width!==I)throw new Error("Image output config width doesn't match tensor width");if(_.format!==void 0&&B===4&&_.format!=="RGBA"||B===3&&_.format!=="RGB"&&_.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const L=4;let z=0,W=1,X=2,Y=3,K=0,Q=O,ee=O*2,J=-1;U==="RGBA"?(K=0,Q=O,ee=O*2,J=O*3):U==="RGB"?(K=0,Q=O,ee=O*2):U==="RBG"&&(K=0,ee=O,Q=O*2),R=A.createImageData(I,F);for(let ie=0;ie<F*I;z+=L,W+=L,X+=L,Y+=L,ie++)R.data[z]=(this.data[K++]-D)*V,R.data[W]=(this.data[Q++]-D)*V,R.data[X]=(this.data[ee++]-D)*V,R.data[Y]=J===-1?255:(this.data[J++]-D)*V}else throw new Error("Can not access image data");return R}reshape(_){return new Oi(this.type,this.data,_)}};const Tensor=Tensor$1;let InferenceSession$1=class ch{constructor(_){this.handler=_}async run(_,E,C){const A={};let R={};if(typeof _!="object"||_===null||_ instanceof Tensor||Array.isArray(_))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let I=!0;if(typeof E=="object"){if(E===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(E instanceof Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(E)){if(E.length===0)throw new TypeError("'fetches' cannot be an empty array.");I=!1;for(const U of E){if(typeof U!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(U)===-1)throw new RangeError(`'fetches' contains invalid output name: ${U}.`);A[U]=null}if(typeof C=="object"&&C!==null)R=C;else if(typeof C<"u")throw new TypeError("'options' must be an object.")}else{let U=!1;const V=Object.getOwnPropertyNames(E);for(const D of this.outputNames)if(V.indexOf(D)!==-1){const O=E[D];(O===null||O instanceof Tensor)&&(U=!0,I=!1,A[D]=O)}if(U){if(typeof C=="object"&&C!==null)R=C;else if(typeof C<"u")throw new TypeError("'options' must be an object.")}else R=E}}else if(typeof E<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const U of this.inputNames)if(typeof _[U]>"u")throw new Error(`input '${U}' is missing in 'feeds'.`);if(I)for(const U of this.outputNames)A[U]=null;const F=await this.handler.run(_,A,R),B={};for(const U in F)Object.hasOwnProperty.call(F,U)&&(B[U]=new Tensor(F[U].type,F[U].data,F[U].dims));return B}static async create(_,E,C,A){let R,I={};if(typeof _=="string"){if(R=_,typeof E=="object"&&E!==null)I=E;else if(typeof E<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof Uint8Array){if(R=_,typeof E=="object"&&E!==null)I=E;else if(typeof E<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_ instanceof SharedArrayBuffer){const D=_;let O=0,L=_.byteLength;if(typeof E=="object"&&E!==null)I=E;else if(typeof E=="number"){if(O=E,!Number.isSafeInteger(O))throw new RangeError("'byteOffset' must be an integer.");if(O<0||O>=D.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${D.byteLength}).`);if(L=_.byteLength-O,typeof C=="number"){if(L=C,!Number.isSafeInteger(L))throw new RangeError("'byteLength' must be an integer.");if(L<=0||O+L>D.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${D.byteLength-O}].`);if(typeof A=="object"&&A!==null)I=A;else if(typeof A<"u")throw new TypeError("'options' must be an object.")}else if(typeof C<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof E<"u")throw new TypeError("'options' must be an object.");R=new Uint8Array(D,O,L)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const B=(I.executionProviders||[]).map(D=>typeof D=="string"?D:D.name),V=await(await resolveBackend(B)).createSessionHandler(R,I);return new ch(V)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession=InferenceSession$1,lib$1=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession,Tensor,env:env$1,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(lib$1);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,function(module,exports){(function(T,_){module.exports=_(require$$0$1)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(T,_,E)=>{var C,A=(C=(C=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(R){function I(){return ve.buffer!=me&&Je(ve.buffer),xe}function F(){return ve.buffer!=me&&Je(ve.buffer),Ae}function B(){return ve.buffer!=me&&Je(ve.buffer),De}function U(){return ve.buffer!=me&&Je(ve.buffer),Ie}function V(){return ve.buffer!=me&&Je(ve.buffer),je}var D,O,L;R=R||{},D||(D=R!==void 0?R:{}),D.ready=new Promise(function(pe,Se){O=pe,L=Se});var z,W,X,Y,K,Q,ee=Object.assign({},D),J="./this.program",ie=(pe,Se)=>{throw Se},re=typeof window=="object",se=typeof importScripts=="function",ne=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",oe=D.ENVIRONMENT_IS_PTHREAD||!1,fe="";function he(pe){return D.locateFile?D.locateFile(pe,fe):fe+pe}if(ne){let pe;fe=se?E(908).dirname(fe)+"/":"//",Q=()=>{K||(Y=E(1384),K=E(908))},z=function(Se,Te){return Q(),Se=K.normalize(Se),Y.readFileSync(Se,Te?void 0:"utf8")},X=Se=>((Se=z(Se,!0)).buffer||(Se=new Uint8Array(Se)),Se),W=(Se,Te,Re)=>{Q(),Se=K.normalize(Se),Y.readFile(Se,function(Be,qe){Be?Re(Be):Te(qe.buffer)})},1<process.argv.length&&(J=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Se){if(!(Se instanceof Pr))throw Se}),process.on("unhandledRejection",function(Se){throw Se}),ie=(Se,Te)=>{if(Kt())throw process.exitCode=Se,Te;Te instanceof Pr||de("exiting due to exception: "+Te),process.exit(Se)},D.inspect=function(){return"[Emscripten Module object]"};try{pe=E(9925)}catch(Se){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Se}E.g.Worker=pe.Worker}else(re||se)&&(se?fe=self.location.href:typeof document<"u"&&document.currentScript&&(fe=document.currentScript.src),C&&(fe=C),fe=fe.indexOf("blob:")!==0?fe.substr(0,fe.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ne||(z=pe=>{var Se=new XMLHttpRequest;return Se.open("GET",pe,!1),Se.send(null),Se.responseText},se&&(X=pe=>{var Se=new XMLHttpRequest;return Se.open("GET",pe,!1),Se.responseType="arraybuffer",Se.send(null),new Uint8Array(Se.response)}),W=(pe,Se,Te)=>{var Re=new XMLHttpRequest;Re.open("GET",pe,!0),Re.responseType="arraybuffer",Re.onload=()=>{Re.status==200||Re.status==0&&Re.response?Se(Re.response):Te()},Re.onerror=Te,Re.send(null)}));ne&&typeof performance>"u"&&(E.g.performance=E(6953).performance);var ge=console.log.bind(console),ye=console.warn.bind(console);ne&&(Q(),ge=pe=>Y.writeSync(1,pe+`
`),ye=pe=>Y.writeSync(2,pe+`
`));var we,le=D.print||ge,de=D.printErr||ye;Object.assign(D,ee),ee=null,D.thisProgram&&(J=D.thisProgram),D.quit&&(ie=D.quit),D.wasmBinary&&(we=D.wasmBinary);var ce=D.noExitRuntime||!1;typeof WebAssembly!="object"&&It("no native wasm support detected");var ve,be,me,xe,Ae,De,Ie,je,Ye=!1,ke=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Le(pe,Se,Te){var Re=(Se>>>=0)+Te;for(Te=Se;pe[Te]&&!(Te>=Re);)++Te;if(16<Te-Se&&pe.buffer&&ke)return ke.decode(pe.buffer instanceof SharedArrayBuffer?pe.slice(Se,Te):pe.subarray(Se,Te));for(Re="";Se<Te;){var Be=pe[Se++];if(128&Be){var qe=63&pe[Se++];if((224&Be)==192)Re+=String.fromCharCode((31&Be)<<6|qe);else{var ot=63&pe[Se++];65536>(Be=(240&Be)==224?(15&Be)<<12|qe<<6|ot:(7&Be)<<18|qe<<12|ot<<6|63&pe[Se++])?Re+=String.fromCharCode(Be):(Be-=65536,Re+=String.fromCharCode(55296|Be>>10,56320|1023&Be))}}else Re+=String.fromCharCode(Be)}return Re}function Ne(pe,Se){return(pe>>>=0)?Le(F(),pe,Se):""}function Qe(pe,Se,Te,Re){if(!(0<Re))return 0;var Be=Te>>>=0;Re=Te+Re-1;for(var qe=0;qe<pe.length;++qe){var ot=pe.charCodeAt(qe);if(55296<=ot&&57343>=ot&&(ot=65536+((1023&ot)<<10)|1023&pe.charCodeAt(++qe)),127>=ot){if(Te>=Re)break;Se[Te++>>>0]=ot}else{if(2047>=ot){if(Te+1>=Re)break;Se[Te++>>>0]=192|ot>>6}else{if(65535>=ot){if(Te+2>=Re)break;Se[Te++>>>0]=224|ot>>12}else{if(Te+3>=Re)break;Se[Te++>>>0]=240|ot>>18,Se[Te++>>>0]=128|ot>>12&63}Se[Te++>>>0]=128|ot>>6&63}Se[Te++>>>0]=128|63&ot}}return Se[Te>>>0]=0,Te-Be}function et(pe){for(var Se=0,Te=0;Te<pe.length;++Te){var Re=pe.charCodeAt(Te);127>=Re?Se++:2047>=Re?Se+=2:55296<=Re&&57343>=Re?(Se+=4,++Te):Se+=3}return Se}function Je(pe){me=pe,D.HEAP8=xe=new Int8Array(pe),D.HEAP16=new Int16Array(pe),D.HEAP32=De=new Int32Array(pe),D.HEAPU8=Ae=new Uint8Array(pe),D.HEAPU16=new Uint16Array(pe),D.HEAPU32=Ie=new Uint32Array(pe),D.HEAPF32=new Float32Array(pe),D.HEAPF64=je=new Float64Array(pe)}oe&&(me=D.buffer);var ut=D.INITIAL_MEMORY||16777216;if(oe)ve=D.wasmMemory,me=D.buffer;else if(D.wasmMemory)ve=D.wasmMemory;else if(!((ve=new WebAssembly.Memory({initial:ut/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw de("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ne&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");ve&&(me=ve.buffer),ut=me.byteLength,Je(me);var lt,it=[],Bt=[],Yt=[],ar=[];function Kt(){return ce||!1}function zt(){var pe=D.preRun.shift();it.unshift(pe)}var jt,Qt=0,ir=null;function It(pe){throw oe?postMessage({cmd:"onAbort",arg:pe}):D.onAbort&&D.onAbort(pe),de(pe="Aborted("+pe+")"),Ye=!0,pe=new WebAssembly.RuntimeError(pe+". Build with -sASSERTIONS for more info."),L(pe),pe}function bn(){return jt.startsWith("data:application/octet-stream;base64,")}function on(){var pe=jt;try{if(pe==jt&&we)return new Uint8Array(we);if(X)return X(pe);throw"both async and sync fetching of the wasm failed"}catch(Se){It(Se)}}jt="ort-wasm-threaded.wasm",bn()||(jt=he(jt));var Or={};function Pr(pe){this.name="ExitStatus",this.message="Program terminated with exit("+pe+")",this.status=pe}function Mr(pe){(pe=St.Vb[pe])||It(),St.mc(pe)}function jr(pe){var Se=St.Cc();if(!Se)return 6;St.ac.push(Se),St.Vb[pe.Ub]=Se,Se.Ub=pe.Ub;var Te={cmd:"run",start_routine:pe.Ic,arg:pe.zc,pthread_ptr:pe.Ub};return Se.$b=()=>{Te.time=performance.now(),Se.postMessage(Te,pe.Nc)},Se.loaded&&(Se.$b(),delete Se.$b),0}function fr(pe){if(oe)return ct(1,1,pe);Kt()||(St.oc(),D.onExit&&D.onExit(pe),Ye=!0),ie(pe,new Pr(pe))}function Ur(pe,Se){if(!Se&&oe)throw Ft(pe),"unwind";Kt()||oe||(fs(),Ue(Yt),Fi(0),Zn[1].length&&Wr(1,10),Zn[2].length&&Wr(2,10),St.oc()),fr(pe)}var St={Yb:[],ac:[],qc:[],Vb:{},fc:function(){oe&&St.Ec()},Pc:function(){},Ec:function(){St.receiveObjectTransfer=St.Gc,St.threadInitTLS=St.pc,St.setExitStatus=St.nc,ce=!1},nc:function(){},oc:function(){for(var pe of Object.values(St.Vb))St.mc(pe);for(pe of St.Yb)pe.terminate();St.Yb=[]},mc:function(pe){var Se=pe.Ub;delete St.Vb[Se],St.Yb.push(pe),St.ac.splice(St.ac.indexOf(pe),1),pe.Ub=0,Gt(Se)},Gc:function(){},pc:function(){St.qc.forEach(pe=>pe())},Fc:function(pe,Se){pe.onmessage=Te=>{var Re=(Te=Te.data).cmd;if(pe.Ub&&(St.Bc=pe.Ub),Te.targetThread&&Te.targetThread!=Vn()){var Be=St.Vb[Te.Qc];Be?Be.postMessage(Te,Te.transferList):de('Internal error! Worker sent a message "'+Re+'" to target pthread '+Te.targetThread+", but that thread no longer exists!")}else Re==="processProxyingQueue"?Me(Te.queue):Re==="spawnThread"?jr(Te):Re==="cleanupThread"?Mr(Te.thread):Re==="killThread"?(Te=Te.thread,Re=St.Vb[Te],delete St.Vb[Te],Re.terminate(),Gt(Te),St.ac.splice(St.ac.indexOf(Re),1),Re.Ub=0):Re==="cancelThread"?St.Vb[Te.thread].postMessage({cmd:"cancel"}):Re==="loaded"?(pe.loaded=!0,Se&&Se(pe),pe.$b&&(pe.$b(),delete pe.$b)):Re==="print"?le("Thread "+Te.threadId+": "+Te.text):Re==="printErr"?de("Thread "+Te.threadId+": "+Te.text):Re==="alert"?alert("Thread "+Te.threadId+": "+Te.text):Te.target==="setimmediate"?pe.postMessage(Te):Re==="onAbort"?D.onAbort&&D.onAbort(Te.arg):Re&&de("worker sent an unknown command "+Re);St.Bc=void 0},pe.onerror=Te=>{throw de("worker sent an error! "+Te.filename+":"+Te.lineno+": "+Te.message),Te},ne&&(pe.on("message",function(Te){pe.onmessage({data:Te})}),pe.on("error",function(Te){pe.onerror(Te)}),pe.on("detachedExit",function(){})),pe.postMessage({cmd:"load",urlOrBlob:D.mainScriptUrlOrBlob||C,wasmMemory:ve,wasmModule:be})},yc:function(){var pe=he("ort-wasm-threaded.worker.js");St.Yb.push(new Worker(pe))},Cc:function(){return St.Yb.length==0&&(St.yc(),St.Fc(St.Yb[0])),St.Yb.pop()}};function Ue(pe){for(;0<pe.length;)pe.shift()(D)}function We(pe){var Se=Mt();return pe=pe(),Rt(Se),pe}function Ft(pe){if(oe)return ct(2,0,pe);try{Ur(pe)}catch(Se){Se instanceof Pr||Se=="unwind"||ie(1,Se)}}D.PThread=St,D.establishStackSpace=function(){var pe=Vn(),Se=B()[pe+44>>2>>>0];pe=B()[pe+48>>2>>>0],Ni(Se,Se-pe),Rt(Se)};var Lt=[];function gt(pe){var Se=Lt[pe];return Se||(pe>=Lt.length&&(Lt.length=pe+1),Lt[pe]=Se=lt.get(pe)),Se}D.invokeEntryPoint=function(pe,Se){pe=gt(pe)(Se),Kt()?St.nc(pe):ps(pe)};var Ct,pr,cr=[],vt=0,xt=0;function Et(pe){this.Zb=pe,this.Sb=pe-24,this.xc=function(Se){U()[this.Sb+4>>2>>>0]=Se},this.bc=function(){return U()[this.Sb+4>>2>>>0]},this.wc=function(Se){U()[this.Sb+8>>2>>>0]=Se},this.Dc=function(){return U()[this.Sb+8>>2>>>0]},this.rc=function(){B()[this.Sb>>2>>>0]=0},this.hc=function(Se){Se=Se?1:0,I()[this.Sb+12>>0>>>0]=Se},this.uc=function(){return I()[this.Sb+12>>0>>>0]!=0},this.ic=function(Se){Se=Se?1:0,I()[this.Sb+13>>0>>>0]=Se},this.kc=function(){return I()[this.Sb+13>>0>>>0]!=0},this.fc=function(Se,Te){this.cc(0),this.xc(Se),this.wc(Te),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(B(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(B(),this.Sb>>2,1)===1},this.cc=function(Se){U()[this.Sb+16>>2>>>0]=Se},this.tc=function(){return U()[this.Sb+16>>2>>>0]},this.vc=function(){if(vi(this.bc()))return U()[this.Zb>>2>>>0];var Se=this.tc();return Se!==0?Se:this.Zb}}function kr(pe){return Zs(new Et(pe).Sb)}function dr(pe,Se,Te,Re){return oe?ct(3,1,pe,Se,Te,Re):an(pe,Se,Te,Re)}function an(pe,Se,Te,Re){if(typeof SharedArrayBuffer>"u")return de("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Be=[];return oe&&Be.length===0?dr(pe,Se,Te,Re):(pe={Ic:Te,Ub:pe,zc:Re,Nc:Be},oe?(pe.Oc="spawnThread",postMessage(pe,Be),0):jr(pe))}function _n(pe,Se,Te){return oe?ct(4,1,pe,Se,Te):0}function Vr(pe,Se){if(oe)return ct(5,1,pe,Se)}function Dr(pe,Se){if(oe)return ct(6,1,pe,Se)}function Fr(pe,Se,Te){if(oe)return ct(7,1,pe,Se,Te)}function ln(pe,Se,Te){return oe?ct(8,1,pe,Se,Te):0}function Lr(pe,Se){if(oe)return ct(9,1,pe,Se)}function zr(pe,Se,Te){if(oe)return ct(10,1,pe,Se,Te)}function Jr(pe,Se,Te,Re){if(oe)return ct(11,1,pe,Se,Te,Re)}function un(pe,Se,Te,Re){if(oe)return ct(12,1,pe,Se,Te,Re)}function xn(pe,Se,Te,Re){if(oe)return ct(13,1,pe,Se,Te,Re)}function Fn(pe){if(oe)return ct(14,1,pe)}function Ee(pe,Se){if(oe)return ct(15,1,pe,Se)}function Pe(pe,Se,Te){if(oe)return ct(16,1,pe,Se,Te)}function Me(pe){Atomics.store(B(),pe>>2,1),Vn()&&$i(pe),Atomics.compareExchange(B(),pe>>2,1,0)}function $e(pe){return U()[pe>>>2]+4294967296*B()[pe+4>>>2]}function ze(pe,Se,Te,Re,Be,qe){return oe?ct(17,1,pe,Se,Te,Re,Be,qe):-52}function Ke(pe,Se,Te,Re,Be,qe){if(oe)return ct(18,1,pe,Se,Te,Re,Be,qe)}function st(pe){var Se=et(pe)+1,Te=hs(Se);return Te&&Qe(pe,I(),Te,Se),Te}function mt(pe,Se,Te){function Re(Dt){return(Dt=Dt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Dt[1]:"GMT"}if(oe)return ct(19,1,pe,Se,Te);var Be=new Date().getFullYear(),qe=new Date(Be,0,1),ot=new Date(Be,6,1);Be=qe.getTimezoneOffset();var wt=ot.getTimezoneOffset(),Nt=Math.max(Be,wt);B()[pe>>2>>>0]=60*Nt,B()[Se>>2>>>0]=+(Be!=wt),pe=Re(qe),Se=Re(ot),pe=st(pe),Se=st(Se),wt<Be?(U()[Te>>2>>>0]=pe,U()[Te+4>>2>>>0]=Se):(U()[Te>>2>>>0]=Se,U()[Te+4>>2>>>0]=pe)}function ct(pe,Se){var Te=arguments.length-2,Re=arguments;return We(()=>{for(var Be=Bi(8*Te),qe=Be>>3,ot=0;ot<Te;ot++){var wt=Re[2+ot];V()[qe+ot>>>0]=wt}return Qs(pe,Te,Be,Se)})}D.executeNotifiedProxyingQueue=Me,pr=ne?()=>{var pe=process.hrtime();return 1e3*pe[0]+pe[1]/1e6}:oe?()=>performance.now()-D.__performance_now_clock_drift:()=>performance.now();var Ot,qt=[],$t={};function mr(){if(!Ot){var pe,Se={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:J||"./this.program"};for(pe in $t)$t[pe]===void 0?delete Se[pe]:Se[pe]=$t[pe];var Te=[];for(pe in Se)Te.push(pe+"="+Se[pe]);Ot=Te}return Ot}function Ze(pe,Se){if(oe)return ct(20,1,pe,Se);var Te=0;return mr().forEach(function(Re,Be){var qe=Se+Te;for(Be=U()[pe+4*Be>>2>>>0]=qe,qe=0;qe<Re.length;++qe)I()[Be++>>0>>>0]=Re.charCodeAt(qe);I()[Be>>0>>>0]=0,Te+=Re.length+1}),0}function Ut(pe,Se){if(oe)return ct(21,1,pe,Se);var Te=mr();U()[pe>>2>>>0]=Te.length;var Re=0;return Te.forEach(function(Be){Re+=Be.length+1}),U()[Se>>2>>>0]=Re,0}function Xt(pe){return oe?ct(22,1,pe):52}function Gr(pe,Se,Te,Re){return oe?ct(23,1,pe,Se,Te,Re):52}function cn(pe,Se,Te,Re,Be){return oe?ct(24,1,pe,Se,Te,Re,Be):70}var Zn=[null,[],[]];function Wr(pe,Se){var Te=Zn[pe];Se===0||Se===10?((pe===1?le:de)(Le(Te,0)),Te.length=0):Te.push(Se)}function Xs(pe,Se,Te,Re){if(oe)return ct(25,1,pe,Se,Te,Re);for(var Be=0,qe=0;qe<Te;qe++){var ot=U()[Se>>2>>>0],wt=U()[Se+4>>2>>>0];Se+=8;for(var Nt=0;Nt<wt;Nt++)Wr(pe,F()[ot+Nt>>>0]);Be+=wt}return U()[Re>>2>>>0]=Be,0}var er=0;function ki(pe){return pe%4==0&&(pe%100!=0||pe%400==0)}var Ys=[31,29,31,30,31,30,31,31,30,31,30,31],Ks=[31,28,31,30,31,30,31,31,30,31,30,31];function gi(pe,Se,Te,Re){function Be(Xe,Vt,Zt){for(Xe=typeof Xe=="number"?Xe.toString():Xe||"";Xe.length<Vt;)Xe=Zt[0]+Xe;return Xe}function qe(Xe,Vt){return Be(Xe,Vt,"0")}function ot(Xe,Vt){function Zt(Pn){return 0>Pn?-1:0<Pn?1:0}var dn;return(dn=Zt(Xe.getFullYear()-Vt.getFullYear()))===0&&(dn=Zt(Xe.getMonth()-Vt.getMonth()))===0&&(dn=Zt(Xe.getDate()-Vt.getDate())),dn}function wt(Xe){switch(Xe.getDay()){case 0:return new Date(Xe.getFullYear()-1,11,29);case 1:return Xe;case 2:return new Date(Xe.getFullYear(),0,3);case 3:return new Date(Xe.getFullYear(),0,2);case 4:return new Date(Xe.getFullYear(),0,1);case 5:return new Date(Xe.getFullYear()-1,11,31);case 6:return new Date(Xe.getFullYear()-1,11,30)}}function Nt(Xe){var Vt=Xe.Wb;for(Xe=new Date(new Date(Xe.Xb+1900,0,1).getTime());0<Vt;){var Zt=Xe.getMonth(),dn=(ki(Xe.getFullYear())?Ys:Ks)[Zt];if(!(Vt>dn-Xe.getDate())){Xe.setDate(Xe.getDate()+Vt);break}Vt-=dn-Xe.getDate()+1,Xe.setDate(1),11>Zt?Xe.setMonth(Zt+1):(Xe.setMonth(0),Xe.setFullYear(Xe.getFullYear()+1))}return Zt=new Date(Xe.getFullYear()+1,0,4),Vt=wt(new Date(Xe.getFullYear(),0,4)),Zt=wt(Zt),0>=ot(Vt,Xe)?0>=ot(Zt,Xe)?Xe.getFullYear()+1:Xe.getFullYear():Xe.getFullYear()-1}var Dt=B()[Re+40>>2>>>0];for(var Jt in Re={Lc:B()[Re>>2>>>0],Kc:B()[Re+4>>2>>>0],dc:B()[Re+8>>2>>>0],jc:B()[Re+12>>2>>>0],ec:B()[Re+16>>2>>>0],Xb:B()[Re+20>>2>>>0],Tb:B()[Re+24>>2>>>0],Wb:B()[Re+28>>2>>>0],Rc:B()[Re+32>>2>>>0],Jc:B()[Re+36>>2>>>0],Mc:Dt?Ne(Dt):""},Te=Ne(Te),Dt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Te=Te.replace(new RegExp(Jt,"g"),Dt[Jt]);var Hr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),$r="January February March April May June July August September October November December".split(" ");for(Jt in Dt={"%a":function(Xe){return Hr[Xe.Tb].substring(0,3)},"%A":function(Xe){return Hr[Xe.Tb]},"%b":function(Xe){return $r[Xe.ec].substring(0,3)},"%B":function(Xe){return $r[Xe.ec]},"%C":function(Xe){return qe((Xe.Xb+1900)/100|0,2)},"%d":function(Xe){return qe(Xe.jc,2)},"%e":function(Xe){return Be(Xe.jc,2," ")},"%g":function(Xe){return Nt(Xe).toString().substring(2)},"%G":function(Xe){return Nt(Xe)},"%H":function(Xe){return qe(Xe.dc,2)},"%I":function(Xe){return(Xe=Xe.dc)==0?Xe=12:12<Xe&&(Xe-=12),qe(Xe,2)},"%j":function(Xe){for(var Vt=0,Zt=0;Zt<=Xe.ec-1;Vt+=(ki(Xe.Xb+1900)?Ys:Ks)[Zt++]);return qe(Xe.jc+Vt,3)},"%m":function(Xe){return qe(Xe.ec+1,2)},"%M":function(Xe){return qe(Xe.Kc,2)},"%n":function(){return`
`},"%p":function(Xe){return 0<=Xe.dc&&12>Xe.dc?"AM":"PM"},"%S":function(Xe){return qe(Xe.Lc,2)},"%t":function(){return"	"},"%u":function(Xe){return Xe.Tb||7},"%U":function(Xe){return qe(Math.floor((Xe.Wb+7-Xe.Tb)/7),2)},"%V":function(Xe){var Vt=Math.floor((Xe.Wb+7-(Xe.Tb+6)%7)/7);if(2>=(Xe.Tb+371-Xe.Wb-2)%7&&Vt++,Vt)Vt==53&&((Zt=(Xe.Tb+371-Xe.Wb)%7)==4||Zt==3&&ki(Xe.Xb)||(Vt=1));else{Vt=52;var Zt=(Xe.Tb+7-Xe.Wb-1)%7;(Zt==4||Zt==5&&ki(Xe.Xb%400-1))&&Vt++}return qe(Vt,2)},"%w":function(Xe){return Xe.Tb},"%W":function(Xe){return qe(Math.floor((Xe.Wb+7-(Xe.Tb+6)%7)/7),2)},"%y":function(Xe){return(Xe.Xb+1900).toString().substring(2)},"%Y":function(Xe){return Xe.Xb+1900},"%z":function(Xe){var Vt=0<=(Xe=Xe.Jc);return Xe=Math.abs(Xe)/60,(Vt?"+":"-")+("0000"+(Xe/60*100+Xe%60)).slice(-4)},"%Z":function(Xe){return Xe.Mc},"%%":function(){return"%"}},Te=Te.replace(/%%/g,"\0\0"),Dt)Te.includes(Jt)&&(Te=Te.replace(new RegExp(Jt,"g"),Dt[Jt](Re)));return Jt=function(Xe){var Vt=Array(et(Xe)+1);return Qe(Xe,Vt,0,Vt.length),Vt}(Te=Te.replace(/\0\0/g,"%")),Jt.length>Se?0:(function(Xe,Vt){I().set(Xe,Vt>>>0)}(Jt,pe),Jt.length-1)}St.fc();var Di=[null,fr,Ft,dr,_n,Vr,Dr,Fr,ln,Lr,zr,Jr,un,xn,Fn,Ee,Pe,ze,Ke,mt,Ze,Ut,Xt,Gr,cn,Xs],yi={b:function(pe){return hs(pe+24)+24},n:function(pe){return(pe=new Et(pe)).uc()||(pe.hc(!0),vt--),pe.ic(!1),cr.push(pe),pe.sc(),pe.vc()},ma:function(pe){throw de("Unexpected exception thrown, this is not properly supported - aborting"),Ye=!0,pe},x:function(){kt(0);var pe=cr.pop();if(pe.Hc()&&!pe.kc()){var Se=pe.Dc();Se&&gt(Se)(pe.Zb),kr(pe.Zb)}xt=0},e:function(){var pe=xt;if(!pe)return er=0;var Se=new Et(pe);Se.cc(pe);var Te=Se.bc();if(!Te)return er=0,pe;for(var Re=Array.prototype.slice.call(arguments),Be=0;Be<Re.length;Be++){var qe=Re[Be];if(qe===0||qe===Te)break;if(Qn(qe,Te,Se.Sb+16))return er=qe,pe}return er=Te,pe},l:function(){var pe=xt;if(!pe)return er=0;var Se=new Et(pe);Se.cc(pe);var Te=Se.bc();if(!Te)return er=0,pe;for(var Re=Array.prototype.slice.call(arguments),Be=0;Be<Re.length;Be++){var qe=Re[Be];if(qe===0||qe===Te)break;if(Qn(qe,Te,Se.Sb+16))return er=qe,pe}return er=Te,pe},h:function(){var pe=xt;if(!pe)return er=0;var Se=new Et(pe);Se.cc(pe);var Te=Se.bc();if(!Te)return er=0,pe;for(var Re=Array.prototype.slice.call(arguments),Be=0;Be<Re.length;Be++){var qe=Re[Be];if(qe===0||qe===Te)break;if(Qn(qe,Te,Se.Sb+16))return er=qe,pe}return er=Te,pe},t:kr,M:function(){var pe=cr.pop();pe||It("no exception to throw");var Se=pe.Zb;throw pe.kc()||(cr.push(pe),pe.ic(!0),pe.hc(!1),vt++),xt=Se,Se},c:function(pe,Se,Te){throw new Et(pe).fc(Se,Te),xt=pe,vt++,pe},pa:function(){return vt},Fa:function(pe){Li(pe,!se,1,!re),St.pc()},T:function(pe){oe?postMessage({cmd:"cleanupThread",thread:pe}):Mr(pe)},xa:an,j:function(pe){throw xt||(xt=pe),pe},H:_n,Ma:Vr,ua:Dr,wa:Fr,oa:ln,Ka:Lr,Ca:zr,Ja:Jr,V:un,va:xn,sa:Fn,La:Ee,ta:Pe,Ta:function(){},X:function(){It("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){It("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(pe,Se,Te,Re){if(pe==Se)setTimeout(()=>Me(Re));else if(oe)postMessage({targetThread:pe,cmd:"processProxyingQueue",queue:Re});else{if(!(pe=St.Vb[pe]))return;pe.postMessage({cmd:"processProxyingQueue",queue:Re})}return 1},Ea:function(){return-1},Pa:function(pe,Se){pe=new Date(1e3*$e(pe)),B()[Se>>2>>>0]=pe.getUTCSeconds(),B()[Se+4>>2>>>0]=pe.getUTCMinutes(),B()[Se+8>>2>>>0]=pe.getUTCHours(),B()[Se+12>>2>>>0]=pe.getUTCDate(),B()[Se+16>>2>>>0]=pe.getUTCMonth(),B()[Se+20>>2>>>0]=pe.getUTCFullYear()-1900,B()[Se+24>>2>>>0]=pe.getUTCDay(),pe=(pe.getTime()-Date.UTC(pe.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,B()[Se+28>>2>>>0]=pe},Qa:function(pe,Se){pe=new Date(1e3*$e(pe)),B()[Se>>2>>>0]=pe.getSeconds(),B()[Se+4>>2>>>0]=pe.getMinutes(),B()[Se+8>>2>>>0]=pe.getHours(),B()[Se+12>>2>>>0]=pe.getDate(),B()[Se+16>>2>>>0]=pe.getMonth(),B()[Se+20>>2>>>0]=pe.getFullYear()-1900,B()[Se+24>>2>>>0]=pe.getDay();var Te=new Date(pe.getFullYear(),0,1),Re=(pe.getTime()-Te.getTime())/864e5|0;B()[Se+28>>2>>>0]=Re,B()[Se+36>>2>>>0]=-60*pe.getTimezoneOffset(),Re=new Date(pe.getFullYear(),6,1).getTimezoneOffset(),pe=0|(Re!=(Te=Te.getTimezoneOffset())&&pe.getTimezoneOffset()==Math.min(Te,Re)),B()[Se+32>>2>>>0]=pe},Ra:function(pe){var Se=new Date(B()[pe+20>>2>>>0]+1900,B()[pe+16>>2>>>0],B()[pe+12>>2>>>0],B()[pe+8>>2>>>0],B()[pe+4>>2>>>0],B()[pe>>2>>>0],0),Te=B()[pe+32>>2>>>0],Re=Se.getTimezoneOffset(),Be=new Date(Se.getFullYear(),0,1),qe=new Date(Se.getFullYear(),6,1).getTimezoneOffset(),ot=Be.getTimezoneOffset(),wt=Math.min(ot,qe);return 0>Te?B()[pe+32>>2>>>0]=+(qe!=ot&&wt==Re):0<Te!=(wt==Re)&&(qe=Math.max(ot,qe),Se.setTime(Se.getTime()+6e4*((0<Te?wt:qe)-Re))),B()[pe+24>>2>>>0]=Se.getDay(),Te=(Se.getTime()-Be.getTime())/864e5|0,B()[pe+28>>2>>>0]=Te,B()[pe>>2>>>0]=Se.getSeconds(),B()[pe+4>>2>>>0]=Se.getMinutes(),B()[pe+8>>2>>>0]=Se.getHours(),B()[pe+12>>2>>>0]=Se.getDate(),B()[pe+16>>2>>>0]=Se.getMonth(),Se.getTime()/1e3|0},Aa:ze,Ba:Ke,Sa:function pe(Se,Te,Re){pe.Ac||(pe.Ac=!0,mt(Se,Te,Re))},y:function(){It("")},U:function(){if(!ne&&!se){var pe="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Ct||(Ct={}),Ct[pe]||(Ct[pe]=1,ne&&(pe="warning: "+pe),de(pe))}},ra:function(){return 4294901760},B:pr,Ia:function(pe,Se,Te){F().copyWithin(pe>>>0,Se>>>0,Se+Te>>>0)},F:function(){return ne?E(3993).cpus().length:navigator.hardwareConcurrency},Da:function(pe,Se,Te){qt.length=Se,Te>>=3;for(var Re=0;Re<Se;Re++)qt[Re]=V()[Te+Re>>>0];return(0>pe?Or[-pe-1]:Di[pe]).apply(null,qt)},qa:function(pe){var Se=F().length;if((pe>>>=0)<=Se||4294901760<pe)return!1;for(var Te=1;4>=Te;Te*=2){var Re=Se*(1+.2/Te);Re=Math.min(Re,pe+100663296);var Be=Math;Re=Math.max(pe,Re),Be=Be.min.call(Be,4294901760,Re+(65536-Re%65536)%65536);e:{try{ve.grow(Be-me.byteLength+65535>>>16),Je(ve.buffer);var qe=1;break e}catch{}qe=void 0}if(qe)return!0}return!1},Na:function(){throw"unwind"},Ga:Ze,Ha:Ut,J:Ur,I:Xt,S:Gr,ga:cn,R:Xs,d:function(){return er},na:function pe(Se,Te){pe.lc||(pe.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Be=new Uint8Array(1);return()=>(crypto.getRandomValues(Be),Be[0])}if(ne)try{var qe=E(Object(function(){var ot=new Error("Cannot find module 'crypto'");throw ot.code="MODULE_NOT_FOUND",ot}()));return()=>qe.randomBytes(1)[0]}catch{}return()=>It("randomDevice")}());for(var Re=0;Re<Te;Re++)I()[Se+Re>>0>>>0]=pe.lc();return 0},ia:function(pe,Se,Te){var Re=Mt();try{return gt(pe)(Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},ja:function(pe,Se,Te){var Re=Mt();try{return gt(pe)(Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},K:function(pe){var Se=Mt();try{return gt(pe)()}catch(Te){if(Rt(Se),Te!==Te+0)throw Te;kt(1,0)}},f:function(pe,Se){var Te=Mt();try{return gt(pe)(Se)}catch(Re){if(Rt(Te),Re!==Re+0)throw Re;kt(1,0)}},P:function(pe,Se,Te){var Re=Mt();try{return gt(pe)(Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},Q:function(pe,Se,Te){var Re=Mt();try{return gt(pe)(Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},k:function(pe,Se,Te){var Re=Mt();try{return gt(pe)(Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},p:function(pe,Se,Te,Re){var Be=Mt();try{return gt(pe)(Se,Te,Re)}catch(qe){if(Rt(Be),qe!==qe+0)throw qe;kt(1,0)}},q:function(pe,Se,Te,Re,Be){var qe=Mt();try{return gt(pe)(Se,Te,Re,Be)}catch(ot){if(Rt(qe),ot!==ot+0)throw ot;kt(1,0)}},N:function(pe,Se,Te,Re,Be,qe){var ot=Mt();try{return gt(pe)(Se,Te,Re,Be,qe)}catch(wt){if(Rt(ot),wt!==wt+0)throw wt;kt(1,0)}},s:function(pe,Se,Te,Re,Be,qe){var ot=Mt();try{return gt(pe)(Se,Te,Re,Be,qe)}catch(wt){if(Rt(ot),wt!==wt+0)throw wt;kt(1,0)}},w:function(pe,Se,Te,Re,Be,qe,ot){var wt=Mt();try{return gt(pe)(Se,Te,Re,Be,qe,ot)}catch(Nt){if(Rt(wt),Nt!==Nt+0)throw Nt;kt(1,0)}},L:function(pe,Se,Te,Re,Be,qe,ot,wt){var Nt=Mt();try{return gt(pe)(Se,Te,Re,Be,qe,ot,wt)}catch(Dt){if(Rt(Nt),Dt!==Dt+0)throw Dt;kt(1,0)}},E:function(pe,Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt,Hr){var $r=Mt();try{return gt(pe)(Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt,Hr)}catch(Xe){if(Rt($r),Xe!==Xe+0)throw Xe;kt(1,0)}},aa:function(pe,Se,Te,Re,Be,qe,ot,wt){var Nt=Mt();try{return ti(pe,Se,Te,Re,Be,qe,ot,wt)}catch(Dt){if(Rt(Nt),Dt!==Dt+0)throw Dt;kt(1,0)}},_:function(pe,Se,Te,Re,Be,qe,ot){var wt=Mt();try{return Sn(pe,Se,Te,Re,Be,qe,ot)}catch(Nt){if(Rt(wt),Nt!==Nt+0)throw Nt;kt(1,0)}},Z:function(pe,Se,Te,Re,Be){var qe=Mt();try{return eo(pe,Se,Te,Re,Be)}catch(ot){if(Rt(qe),ot!==ot+0)throw ot;kt(1,0)}},ca:function(pe,Se,Te,Re){var Be=Mt();try{return Js(pe,Se,Te,Re)}catch(qe){if(Rt(Be),qe!==qe+0)throw qe;kt(1,0)}},$:function(pe){var Se=Mt();try{return wn(pe)}catch(Te){if(Rt(Se),Te!==Te+0)throw Te;kt(1,0)}},ba:function(pe,Se){var Te=Mt();try{return ms(pe,Se)}catch(Re){if(Rt(Te),Re!==Re+0)throw Re;kt(1,0)}},Y:function(pe,Se,Te){var Re=Mt();try{return En(pe,Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},g:function(pe){var Se=Mt();try{gt(pe)()}catch(Te){if(Rt(Se),Te!==Te+0)throw Te;kt(1,0)}},r:function(pe,Se){var Te=Mt();try{gt(pe)(Se)}catch(Re){if(Rt(Te),Re!==Re+0)throw Re;kt(1,0)}},i:function(pe,Se,Te){var Re=Mt();try{gt(pe)(Se,Te)}catch(Be){if(Rt(Re),Be!==Be+0)throw Be;kt(1,0)}},ha:function(pe,Se,Te,Re){var Be=Mt();try{gt(pe)(Se,Te,Re)}catch(qe){if(Rt(Be),qe!==qe+0)throw qe;kt(1,0)}},m:function(pe,Se,Te,Re){var Be=Mt();try{gt(pe)(Se,Te,Re)}catch(qe){if(Rt(Be),qe!==qe+0)throw qe;kt(1,0)}},v:function(pe,Se,Te,Re,Be){var qe=Mt();try{gt(pe)(Se,Te,Re,Be)}catch(ot){if(Rt(qe),ot!==ot+0)throw ot;kt(1,0)}},u:function(pe,Se,Te,Re,Be,qe){var ot=Mt();try{gt(pe)(Se,Te,Re,Be,qe)}catch(wt){if(Rt(ot),wt!==wt+0)throw wt;kt(1,0)}},O:function(pe,Se,Te,Re,Be,qe,ot){var wt=Mt();try{gt(pe)(Se,Te,Re,Be,qe,ot)}catch(Nt){if(Rt(wt),Nt!==Nt+0)throw Nt;kt(1,0)}},A:function(pe,Se,Te,Re,Be,qe,ot,wt){var Nt=Mt();try{gt(pe)(Se,Te,Re,Be,qe,ot,wt)}catch(Dt){if(Rt(Nt),Dt!==Dt+0)throw Dt;kt(1,0)}},ka:function(pe,Se,Te,Re,Be,qe,ot,wt,Nt){var Dt=Mt();try{gt(pe)(Se,Te,Re,Be,qe,ot,wt,Nt)}catch(Jt){if(Rt(Dt),Jt!==Jt+0)throw Jt;kt(1,0)}},C:function(pe,Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt){var Hr=Mt();try{gt(pe)(Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt)}catch($r){if(Rt(Hr),$r!==$r+0)throw $r;kt(1,0)}},D:function(pe,Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt,Hr,$r,Xe,Vt,Zt){var dn=Mt();try{gt(pe)(Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt,Hr,$r,Xe,Vt,Zt)}catch(Pn){if(Rt(dn),Pn!==Pn+0)throw Pn;kt(1,0)}},fa:function(pe,Se,Te,Re,Be,qe,ot,wt){var Nt=Mt();try{Jn(pe,Se,Te,Re,Be,qe,ot,wt)}catch(Dt){if(Rt(Nt),Dt!==Dt+0)throw Dt;kt(1,0)}},da:function(pe,Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt,Hr){var $r=Mt();try{Tn(pe,Se,Te,Re,Be,qe,ot,wt,Nt,Dt,Jt,Hr)}catch(Xe){if(Rt($r),Xe!==Xe+0)throw Xe;kt(1,0)}},ea:function(pe,Se,Te,Re,Be,qe){var ot=Mt();try{ei(pe,Se,Te,Re,Be,qe)}catch(wt){if(Rt(ot),wt!==wt+0)throw wt;kt(1,0)}},o:function(pe){return pe},a:ve||D.wasmMemory,G:function(pe){er=pe},la:gi,z:function(pe,Se,Te,Re){return gi(pe,Se,Te,Re)}};(function(){function pe(Be,qe){D.asm=Be.exports,St.qc.push(D.asm.sb),lt=D.asm.ub,Bt.unshift(D.asm.Va),be=qe,oe||(Qt--,D.monitorRunDependencies&&D.monitorRunDependencies(Qt),Qt==0&&ir&&(Be=ir,ir=null,Be()))}function Se(Be){pe(Be.instance,Be.module)}function Te(Be){return function(){if(!we&&(re||se)){if(typeof fetch=="function"&&!jt.startsWith("file://"))return fetch(jt,{credentials:"same-origin"}).then(function(qe){if(!qe.ok)throw"failed to load wasm binary file at '"+jt+"'";return qe.arrayBuffer()}).catch(function(){return on()});if(W)return new Promise(function(qe,ot){W(jt,function(wt){qe(new Uint8Array(wt))},ot)})}return Promise.resolve().then(function(){return on()})}().then(function(qe){return WebAssembly.instantiate(qe,Re)}).then(function(qe){return qe}).then(Be,function(qe){de("failed to asynchronously prepare wasm: "+qe),It(qe)})}var Re={a:yi};if(oe||(Qt++,D.monitorRunDependencies&&D.monitorRunDependencies(Qt)),D.instantiateWasm)try{return D.instantiateWasm(Re,pe)}catch(Be){return de("Module.instantiateWasm callback failed with error: "+Be),!1}(we||typeof WebAssembly.instantiateStreaming!="function"||bn()||jt.startsWith("file://")||ne||typeof fetch!="function"?Te(Se):fetch(jt,{credentials:"same-origin"}).then(function(Be){return WebAssembly.instantiateStreaming(Be,Re).then(Se,function(qe){return de("wasm streaming compile failed: "+qe),de("falling back to ArrayBuffer instantiation"),Te(Se)})})).catch(L)})(),D.___wasm_call_ctors=function(){return(D.___wasm_call_ctors=D.asm.Va).apply(null,arguments)},D._OrtInit=function(){return(D._OrtInit=D.asm.Wa).apply(null,arguments)},D._OrtCreateSessionOptions=function(){return(D._OrtCreateSessionOptions=D.asm.Xa).apply(null,arguments)},D._OrtAppendExecutionProvider=function(){return(D._OrtAppendExecutionProvider=D.asm.Ya).apply(null,arguments)},D._OrtAddSessionConfigEntry=function(){return(D._OrtAddSessionConfigEntry=D.asm.Za).apply(null,arguments)},D._OrtReleaseSessionOptions=function(){return(D._OrtReleaseSessionOptions=D.asm._a).apply(null,arguments)},D._OrtCreateSession=function(){return(D._OrtCreateSession=D.asm.$a).apply(null,arguments)},D._OrtReleaseSession=function(){return(D._OrtReleaseSession=D.asm.ab).apply(null,arguments)},D._OrtGetInputCount=function(){return(D._OrtGetInputCount=D.asm.bb).apply(null,arguments)},D._OrtGetOutputCount=function(){return(D._OrtGetOutputCount=D.asm.cb).apply(null,arguments)},D._OrtGetInputName=function(){return(D._OrtGetInputName=D.asm.db).apply(null,arguments)},D._OrtGetOutputName=function(){return(D._OrtGetOutputName=D.asm.eb).apply(null,arguments)},D._OrtFree=function(){return(D._OrtFree=D.asm.fb).apply(null,arguments)},D._OrtCreateTensor=function(){return(D._OrtCreateTensor=D.asm.gb).apply(null,arguments)},D._OrtGetTensorData=function(){return(D._OrtGetTensorData=D.asm.hb).apply(null,arguments)},D._OrtReleaseTensor=function(){return(D._OrtReleaseTensor=D.asm.ib).apply(null,arguments)},D._OrtCreateRunOptions=function(){return(D._OrtCreateRunOptions=D.asm.jb).apply(null,arguments)},D._OrtAddRunConfigEntry=function(){return(D._OrtAddRunConfigEntry=D.asm.kb).apply(null,arguments)},D._OrtReleaseRunOptions=function(){return(D._OrtReleaseRunOptions=D.asm.lb).apply(null,arguments)},D._OrtRun=function(){return(D._OrtRun=D.asm.mb).apply(null,arguments)},D._OrtEndProfiling=function(){return(D._OrtEndProfiling=D.asm.nb).apply(null,arguments)};var Vn=D._pthread_self=function(){return(Vn=D._pthread_self=D.asm.ob).apply(null,arguments)},hs=D._malloc=function(){return(hs=D._malloc=D.asm.pb).apply(null,arguments)},Zs=D._free=function(){return(Zs=D._free=D.asm.qb).apply(null,arguments)},Fi=D._fflush=function(){return(Fi=D._fflush=D.asm.rb).apply(null,arguments)};D.__emscripten_tls_init=function(){return(D.__emscripten_tls_init=D.asm.sb).apply(null,arguments)};var fs=D.___funcs_on_exit=function(){return(fs=D.___funcs_on_exit=D.asm.tb).apply(null,arguments)},Li=D.__emscripten_thread_init=function(){return(Li=D.__emscripten_thread_init=D.asm.vb).apply(null,arguments)};D.__emscripten_thread_crashed=function(){return(D.__emscripten_thread_crashed=D.asm.wb).apply(null,arguments)};var Ln,Qs=D._emscripten_run_in_main_runtime_thread_js=function(){return(Qs=D._emscripten_run_in_main_runtime_thread_js=D.asm.xb).apply(null,arguments)},$i=D.__emscripten_proxy_execute_task_queue=function(){return($i=D.__emscripten_proxy_execute_task_queue=D.asm.yb).apply(null,arguments)},Gt=D.__emscripten_thread_free_data=function(){return(Gt=D.__emscripten_thread_free_data=D.asm.zb).apply(null,arguments)},ps=D.__emscripten_thread_exit=function(){return(ps=D.__emscripten_thread_exit=D.asm.Ab).apply(null,arguments)},kt=D._setThrew=function(){return(kt=D._setThrew=D.asm.Bb).apply(null,arguments)},Ni=D._emscripten_stack_set_limits=function(){return(Ni=D._emscripten_stack_set_limits=D.asm.Cb).apply(null,arguments)},Mt=D.stackSave=function(){return(Mt=D.stackSave=D.asm.Db).apply(null,arguments)},Rt=D.stackRestore=function(){return(Rt=D.stackRestore=D.asm.Eb).apply(null,arguments)},Bi=D.stackAlloc=function(){return(Bi=D.stackAlloc=D.asm.Fb).apply(null,arguments)},Qn=D.___cxa_can_catch=function(){return(Qn=D.___cxa_can_catch=D.asm.Gb).apply(null,arguments)},vi=D.___cxa_is_pointer_type=function(){return(vi=D.___cxa_is_pointer_type=D.asm.Hb).apply(null,arguments)},wn=D.dynCall_j=function(){return(wn=D.dynCall_j=D.asm.Ib).apply(null,arguments)},Sn=D.dynCall_iiiiij=function(){return(Sn=D.dynCall_iiiiij=D.asm.Jb).apply(null,arguments)},En=D.dynCall_jii=function(){return(En=D.dynCall_jii=D.asm.Kb).apply(null,arguments)},Jn=D.dynCall_viiiiij=function(){return(Jn=D.dynCall_viiiiij=D.asm.Lb).apply(null,arguments)},ei=D.dynCall_vjji=function(){return(ei=D.dynCall_vjji=D.asm.Mb).apply(null,arguments)},Tn=D.dynCall_viiijjjii=function(){return(Tn=D.dynCall_viiijjjii=D.asm.Nb).apply(null,arguments)},Js=D.dynCall_iij=function(){return(Js=D.dynCall_iij=D.asm.Ob).apply(null,arguments)},ms=D.dynCall_ji=function(){return(ms=D.dynCall_ji=D.asm.Pb).apply(null,arguments)},ti=D.dynCall_iiiiiij=function(){return(ti=D.dynCall_iiiiiij=D.asm.Qb).apply(null,arguments)},eo=D.dynCall_iiij=function(){return(eo=D.dynCall_iiij=D.asm.Rb).apply(null,arguments)};function gs(){function pe(){if(!Ln&&(Ln=!0,D.calledRun=!0,!Ye)&&(oe||Ue(Bt),O(D),D.onRuntimeInitialized&&D.onRuntimeInitialized(),!oe)){if(D.postRun)for(typeof D.postRun=="function"&&(D.postRun=[D.postRun]);D.postRun.length;){var Se=D.postRun.shift();ar.unshift(Se)}Ue(ar)}}if(!(0<Qt))if(oe)O(D),oe||Ue(Bt),postMessage({cmd:"loaded"});else{if(D.preRun)for(typeof D.preRun=="function"&&(D.preRun=[D.preRun]);D.preRun.length;)zt();Ue(it),0<Qt||(D.setStatus?(D.setStatus("Running..."),setTimeout(function(){setTimeout(function(){D.setStatus("")},1),pe()},1)):pe())}}if(D.UTF8ToString=Ne,D.stringToUTF8=function(pe,Se,Te){return Qe(pe,F(),Se,Te)},D.lengthBytesUTF8=et,D.keepRuntimeAlive=Kt,D.wasmMemory=ve,D.stackSave=Mt,D.stackRestore=Rt,D.stackAlloc=Bi,D.ExitStatus=Pr,D.PThread=St,ir=function pe(){Ln||gs(),Ln||(ir=pe)},D.preInit)for(typeof D.preInit=="function"&&(D.preInit=[D.preInit]);0<D.preInit.length;)D.preInit.pop()();return gs(),R.ready});T.exports=A},932:(T,_,E)=>{var C,A=(C=(C=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(R){var I,F,B;R=R||{},I||(I=R!==void 0?R:{}),I.ready=new Promise(function(Ee,Pe){F=Ee,B=Pe});var U,V,D,O,L,z,W=Object.assign({},I),X="./this.program",Y=(Ee,Pe)=>{throw Pe},K=typeof window=="object",Q=typeof importScripts=="function",ee=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",J="";ee?(J=Q?E(908).dirname(J)+"/":"//",z=()=>{L||(O=E(1384),L=E(908))},U=function(Ee,Pe){return z(),Ee=L.normalize(Ee),O.readFileSync(Ee,Pe?void 0:"utf8")},D=Ee=>((Ee=U(Ee,!0)).buffer||(Ee=new Uint8Array(Ee)),Ee),V=(Ee,Pe,Me)=>{z(),Ee=L.normalize(Ee),O.readFile(Ee,function($e,ze){$e?Me($e):Pe(ze.buffer)})},1<process.argv.length&&(X=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Ee){if(!(Ee instanceof Bt))throw Ee}),process.on("unhandledRejection",function(Ee){throw Ee}),Y=(Ee,Pe)=>{if(ne||0<ke)throw process.exitCode=Ee,Pe;Pe instanceof Bt||se("exiting due to exception: "+Pe),process.exit(Ee)},I.inspect=function(){return"[Emscripten Module object]"}):(K||Q)&&(Q?J=self.location.href:typeof document<"u"&&document.currentScript&&(J=document.currentScript.src),C&&(J=C),J=J.indexOf("blob:")!==0?J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1):"",U=Ee=>{var Pe=new XMLHttpRequest;return Pe.open("GET",Ee,!1),Pe.send(null),Pe.responseText},Q&&(D=Ee=>{var Pe=new XMLHttpRequest;return Pe.open("GET",Ee,!1),Pe.responseType="arraybuffer",Pe.send(null),new Uint8Array(Pe.response)}),V=(Ee,Pe,Me)=>{var $e=new XMLHttpRequest;$e.open("GET",Ee,!0),$e.responseType="arraybuffer",$e.onload=()=>{$e.status==200||$e.status==0&&$e.response?Pe($e.response):Me()},$e.onerror=Me,$e.send(null)});var ie,re=I.print||console.log.bind(console),se=I.printErr||console.warn.bind(console);Object.assign(I,W),W=null,I.thisProgram&&(X=I.thisProgram),I.quit&&(Y=I.quit),I.wasmBinary&&(ie=I.wasmBinary);var ne=I.noExitRuntime||!1;typeof WebAssembly!="object"&&Je("no native wasm support detected");var oe,fe,he,ge,ye,we,le=!1,de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ce(Ee,Pe,Me){var $e=(Pe>>>=0)+Me;for(Me=Pe;Ee[Me]&&!(Me>=$e);)++Me;if(16<Me-Pe&&Ee.buffer&&de)return de.decode(Ee.subarray(Pe,Me));for($e="";Pe<Me;){var ze=Ee[Pe++];if(128&ze){var Ke=63&Ee[Pe++];if((224&ze)==192)$e+=String.fromCharCode((31&ze)<<6|Ke);else{var st=63&Ee[Pe++];65536>(ze=(240&ze)==224?(15&ze)<<12|Ke<<6|st:(7&ze)<<18|Ke<<12|st<<6|63&Ee[Pe++])?$e+=String.fromCharCode(ze):(ze-=65536,$e+=String.fromCharCode(55296|ze>>10,56320|1023&ze))}}else $e+=String.fromCharCode(ze)}return $e}function ve(Ee,Pe){return(Ee>>>=0)?ce(ge,Ee,Pe):""}function be(Ee,Pe,Me,$e){if(!(0<$e))return 0;var ze=Me>>>=0;$e=Me+$e-1;for(var Ke=0;Ke<Ee.length;++Ke){var st=Ee.charCodeAt(Ke);if(55296<=st&&57343>=st&&(st=65536+((1023&st)<<10)|1023&Ee.charCodeAt(++Ke)),127>=st){if(Me>=$e)break;Pe[Me++>>>0]=st}else{if(2047>=st){if(Me+1>=$e)break;Pe[Me++>>>0]=192|st>>6}else{if(65535>=st){if(Me+2>=$e)break;Pe[Me++>>>0]=224|st>>12}else{if(Me+3>=$e)break;Pe[Me++>>>0]=240|st>>18,Pe[Me++>>>0]=128|st>>12&63}Pe[Me++>>>0]=128|st>>6&63}Pe[Me++>>>0]=128|63&st}}return Pe[Me>>>0]=0,Me-ze}function me(Ee){for(var Pe=0,Me=0;Me<Ee.length;++Me){var $e=Ee.charCodeAt(Me);127>=$e?Pe++:2047>=$e?Pe+=2:55296<=$e&&57343>=$e?(Pe+=4,++Me):Pe+=3}return Pe}function xe(){var Ee=oe.buffer;fe=Ee,I.HEAP8=he=new Int8Array(Ee),I.HEAP16=new Int16Array(Ee),I.HEAP32=ye=new Int32Array(Ee),I.HEAPU8=ge=new Uint8Array(Ee),I.HEAPU16=new Uint16Array(Ee),I.HEAPU32=we=new Uint32Array(Ee),I.HEAPF32=new Float32Array(Ee),I.HEAPF64=new Float64Array(Ee)}var Ae,De=[],Ie=[],je=[],Ye=[],ke=0;function Le(){var Ee=I.preRun.shift();De.unshift(Ee)}var Ne,Qe=0,et=null;function Je(Ee){throw I.onAbort&&I.onAbort(Ee),se(Ee="Aborted("+Ee+")"),le=!0,Ee=new WebAssembly.RuntimeError(Ee+". Build with -sASSERTIONS for more info."),B(Ee),Ee}function ut(){return Ne.startsWith("data:application/octet-stream;base64,")}if(Ne="ort-wasm.wasm",!ut()){var lt=Ne;Ne=I.locateFile?I.locateFile(lt,J):J+lt}function it(){var Ee=Ne;try{if(Ee==Ne&&ie)return new Uint8Array(ie);if(D)return D(Ee);throw"both async and sync fetching of the wasm failed"}catch(Pe){Je(Pe)}}function Bt(Ee){this.name="ExitStatus",this.message="Program terminated with exit("+Ee+")",this.status=Ee}function Yt(Ee){for(;0<Ee.length;)Ee.shift()(I)}var ar=[],Kt=0,zt=0;function jt(Ee){this.Db=Ee,this.zb=Ee-24,this.Ub=function(Pe){we[this.zb+4>>2>>>0]=Pe},this.Eb=function(){return we[this.zb+4>>2>>>0]},this.Sb=function(Pe){we[this.zb+8>>2>>>0]=Pe},this.Wb=function(){return we[this.zb+8>>2>>>0]},this.Tb=function(){ye[this.zb>>2>>>0]=0},this.Ib=function(Pe){he[this.zb+12>>0>>>0]=Pe?1:0},this.Pb=function(){return he[this.zb+12>>0>>>0]!=0},this.Jb=function(Pe){he[this.zb+13>>0>>>0]=Pe?1:0},this.Lb=function(){return he[this.zb+13>>0>>>0]!=0},this.Rb=function(Pe,Me){this.Fb(0),this.Ub(Pe),this.Sb(Me),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){ye[this.zb>>2>>>0]+=1},this.Xb=function(){var Pe=ye[this.zb>>2>>>0];return ye[this.zb>>2>>>0]=Pe-1,Pe===1},this.Fb=function(Pe){we[this.zb+16>>2>>>0]=Pe},this.Ob=function(){return we[this.zb+16>>2>>>0]},this.Qb=function(){if(an(this.Eb()))return we[this.Db>>2>>>0];var Pe=this.Ob();return Pe!==0?Pe:this.Db}}function Qt(Ee){return Ct(new jt(Ee).zb)}var ir=[];function It(Ee){var Pe=ir[Ee];return Pe||(Ee>=ir.length&&(ir.length=Ee+1),ir[Ee]=Pe=Ae.get(Ee)),Pe}function bn(Ee){var Pe=me(Ee)+1,Me=gt(Pe);return Me&&be(Ee,he,Me,Pe),Me}var on={};function Or(){if(!Pr){var Ee,Pe={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:X||"./this.program"};for(Ee in on)on[Ee]===void 0?delete Pe[Ee]:Pe[Ee]=on[Ee];var Me=[];for(Ee in Pe)Me.push(Ee+"="+Pe[Ee]);Pr=Me}return Pr}var Pr,Mr=[null,[],[]];function jr(Ee,Pe){var Me=Mr[Ee];Pe===0||Pe===10?((Ee===1?re:se)(ce(Me,0)),Me.length=0):Me.push(Pe)}var fr=0;function Ur(Ee){return Ee%4==0&&(Ee%100!=0||Ee%400==0)}var St=[31,29,31,30,31,30,31,31,30,31,30,31],Ue=[31,28,31,30,31,30,31,31,30,31,30,31];function We(Ee,Pe,Me,$e){function ze(Ze,Ut,Xt){for(Ze=typeof Ze=="number"?Ze.toString():Ze||"";Ze.length<Ut;)Ze=Xt[0]+Ze;return Ze}function Ke(Ze,Ut){return ze(Ze,Ut,"0")}function st(Ze,Ut){function Xt(cn){return 0>cn?-1:0<cn?1:0}var Gr;return(Gr=Xt(Ze.getFullYear()-Ut.getFullYear()))===0&&(Gr=Xt(Ze.getMonth()-Ut.getMonth()))===0&&(Gr=Xt(Ze.getDate()-Ut.getDate())),Gr}function mt(Ze){switch(Ze.getDay()){case 0:return new Date(Ze.getFullYear()-1,11,29);case 1:return Ze;case 2:return new Date(Ze.getFullYear(),0,3);case 3:return new Date(Ze.getFullYear(),0,2);case 4:return new Date(Ze.getFullYear(),0,1);case 5:return new Date(Ze.getFullYear()-1,11,31);case 6:return new Date(Ze.getFullYear()-1,11,30)}}function ct(Ze){var Ut=Ze.Bb;for(Ze=new Date(new Date(Ze.Cb+1900,0,1).getTime());0<Ut;){var Xt=Ze.getMonth(),Gr=(Ur(Ze.getFullYear())?St:Ue)[Xt];if(!(Ut>Gr-Ze.getDate())){Ze.setDate(Ze.getDate()+Ut);break}Ut-=Gr-Ze.getDate()+1,Ze.setDate(1),11>Xt?Ze.setMonth(Xt+1):(Ze.setMonth(0),Ze.setFullYear(Ze.getFullYear()+1))}return Xt=new Date(Ze.getFullYear()+1,0,4),Ut=mt(new Date(Ze.getFullYear(),0,4)),Xt=mt(Xt),0>=st(Ut,Ze)?0>=st(Xt,Ze)?Ze.getFullYear()+1:Ze.getFullYear():Ze.getFullYear()-1}var Ot=ye[$e+40>>2>>>0];for(var qt in $e={$b:ye[$e>>2>>>0],Zb:ye[$e+4>>2>>>0],Gb:ye[$e+8>>2>>>0],Kb:ye[$e+12>>2>>>0],Hb:ye[$e+16>>2>>>0],Cb:ye[$e+20>>2>>>0],Ab:ye[$e+24>>2>>>0],Bb:ye[$e+28>>2>>>0],bc:ye[$e+32>>2>>>0],Yb:ye[$e+36>>2>>>0],ac:Ot?ve(Ot):""},Me=ve(Me),Ot={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Me=Me.replace(new RegExp(qt,"g"),Ot[qt]);var $t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),mr="January February March April May June July August September October November December".split(" ");for(qt in Ot={"%a":function(Ze){return $t[Ze.Ab].substring(0,3)},"%A":function(Ze){return $t[Ze.Ab]},"%b":function(Ze){return mr[Ze.Hb].substring(0,3)},"%B":function(Ze){return mr[Ze.Hb]},"%C":function(Ze){return Ke((Ze.Cb+1900)/100|0,2)},"%d":function(Ze){return Ke(Ze.Kb,2)},"%e":function(Ze){return ze(Ze.Kb,2," ")},"%g":function(Ze){return ct(Ze).toString().substring(2)},"%G":function(Ze){return ct(Ze)},"%H":function(Ze){return Ke(Ze.Gb,2)},"%I":function(Ze){return(Ze=Ze.Gb)==0?Ze=12:12<Ze&&(Ze-=12),Ke(Ze,2)},"%j":function(Ze){for(var Ut=0,Xt=0;Xt<=Ze.Hb-1;Ut+=(Ur(Ze.Cb+1900)?St:Ue)[Xt++]);return Ke(Ze.Kb+Ut,3)},"%m":function(Ze){return Ke(Ze.Hb+1,2)},"%M":function(Ze){return Ke(Ze.Zb,2)},"%n":function(){return`
`},"%p":function(Ze){return 0<=Ze.Gb&&12>Ze.Gb?"AM":"PM"},"%S":function(Ze){return Ke(Ze.$b,2)},"%t":function(){return"	"},"%u":function(Ze){return Ze.Ab||7},"%U":function(Ze){return Ke(Math.floor((Ze.Bb+7-Ze.Ab)/7),2)},"%V":function(Ze){var Ut=Math.floor((Ze.Bb+7-(Ze.Ab+6)%7)/7);if(2>=(Ze.Ab+371-Ze.Bb-2)%7&&Ut++,Ut)Ut==53&&((Xt=(Ze.Ab+371-Ze.Bb)%7)==4||Xt==3&&Ur(Ze.Cb)||(Ut=1));else{Ut=52;var Xt=(Ze.Ab+7-Ze.Bb-1)%7;(Xt==4||Xt==5&&Ur(Ze.Cb%400-1))&&Ut++}return Ke(Ut,2)},"%w":function(Ze){return Ze.Ab},"%W":function(Ze){return Ke(Math.floor((Ze.Bb+7-(Ze.Ab+6)%7)/7),2)},"%y":function(Ze){return(Ze.Cb+1900).toString().substring(2)},"%Y":function(Ze){return Ze.Cb+1900},"%z":function(Ze){var Ut=0<=(Ze=Ze.Yb);return Ze=Math.abs(Ze)/60,(Ut?"+":"-")+("0000"+(Ze/60*100+Ze%60)).slice(-4)},"%Z":function(Ze){return Ze.ac},"%%":function(){return"%"}},Me=Me.replace(/%%/g,"\0\0"),Ot)Me.includes(qt)&&(Me=Me.replace(new RegExp(qt,"g"),Ot[qt]($e)));return qt=function(Ze){var Ut=Array(me(Ze)+1);return be(Ze,Ut,0,Ut.length),Ut}(Me=Me.replace(/\0\0/g,"%")),qt.length>Pe?0:(he.set(qt,Ee>>>0),qt.length-1)}var Ft={a:function(Ee){return gt(Ee+24)+24},m:function(Ee){return(Ee=new jt(Ee)).Pb()||(Ee.Ib(!0),Kt--),Ee.Jb(!1),ar.push(Ee),Ee.Nb(),Ee.Qb()},ia:function(Ee){throw se("Unexpected exception thrown, this is not properly supported - aborting"),le=!0,Ee},w:function(){vt(0);var Ee=ar.pop();if(Ee.Xb()&&!Ee.Lb()){var Pe=Ee.Wb();Pe&&It(Pe)(Ee.Db),Qt(Ee.Db)}zt=0},d:function(){var Ee=zt;if(!Ee)return fr=0;var Pe=new jt(Ee);Pe.Fb(Ee);var Me=Pe.Eb();if(!Me)return fr=0,Ee;for(var $e=Array.prototype.slice.call(arguments),ze=0;ze<$e.length;ze++){var Ke=$e[ze];if(Ke===0||Ke===Me)break;if(dr(Ke,Me,Pe.zb+16))return fr=Ke,Ee}return fr=Me,Ee},k:function(){var Ee=zt;if(!Ee)return fr=0;var Pe=new jt(Ee);Pe.Fb(Ee);var Me=Pe.Eb();if(!Me)return fr=0,Ee;for(var $e=Array.prototype.slice.call(arguments),ze=0;ze<$e.length;ze++){var Ke=$e[ze];if(Ke===0||Ke===Me)break;if(dr(Ke,Me,Pe.zb+16))return fr=Ke,Ee}return fr=Me,Ee},g:function(){var Ee=zt;if(!Ee)return fr=0;var Pe=new jt(Ee);Pe.Fb(Ee);var Me=Pe.Eb();if(!Me)return fr=0,Ee;for(var $e=Array.prototype.slice.call(arguments),ze=0;ze<$e.length;ze++){var Ke=$e[ze];if(Ke===0||Ke===Me)break;if(dr(Ke,Me,Pe.zb+16))return fr=Ke,Ee}return fr=Me,Ee},s:Qt,L:function(){var Ee=ar.pop();Ee||Je("no exception to throw");var Pe=Ee.Db;throw Ee.Lb()||(ar.push(Ee),Ee.Jb(!0),Ee.Ib(!1),Kt++),zt=Pe,Pe},b:function(Ee,Pe,Me){throw new jt(Ee).Rb(Pe,Me),zt=Ee,Kt++,Ee},la:function(){return Kt},i:function(Ee){throw zt||(zt=Ee),Ee},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Je("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Je("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Ee,Pe){Ee=new Date(1e3*(we[Ee>>>2]+4294967296*ye[Ee+4>>>2])),ye[Pe>>2>>>0]=Ee.getUTCSeconds(),ye[Pe+4>>2>>>0]=Ee.getUTCMinutes(),ye[Pe+8>>2>>>0]=Ee.getUTCHours(),ye[Pe+12>>2>>>0]=Ee.getUTCDate(),ye[Pe+16>>2>>>0]=Ee.getUTCMonth(),ye[Pe+20>>2>>>0]=Ee.getUTCFullYear()-1900,ye[Pe+24>>2>>>0]=Ee.getUTCDay(),ye[Pe+28>>2>>>0]=(Ee.getTime()-Date.UTC(Ee.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Ee,Pe){Ee=new Date(1e3*(we[Ee>>>2]+4294967296*ye[Ee+4>>>2])),ye[Pe>>2>>>0]=Ee.getSeconds(),ye[Pe+4>>2>>>0]=Ee.getMinutes(),ye[Pe+8>>2>>>0]=Ee.getHours(),ye[Pe+12>>2>>>0]=Ee.getDate(),ye[Pe+16>>2>>>0]=Ee.getMonth(),ye[Pe+20>>2>>>0]=Ee.getFullYear()-1900,ye[Pe+24>>2>>>0]=Ee.getDay();var Me=new Date(Ee.getFullYear(),0,1);ye[Pe+28>>2>>>0]=(Ee.getTime()-Me.getTime())/864e5|0,ye[Pe+36>>2>>>0]=-60*Ee.getTimezoneOffset();var $e=new Date(Ee.getFullYear(),6,1).getTimezoneOffset();Me=Me.getTimezoneOffset(),ye[Pe+32>>2>>>0]=0|($e!=Me&&Ee.getTimezoneOffset()==Math.min(Me,$e))},Fa:function(Ee){var Pe=new Date(ye[Ee+20>>2>>>0]+1900,ye[Ee+16>>2>>>0],ye[Ee+12>>2>>>0],ye[Ee+8>>2>>>0],ye[Ee+4>>2>>>0],ye[Ee>>2>>>0],0),Me=ye[Ee+32>>2>>>0],$e=Pe.getTimezoneOffset(),ze=new Date(Pe.getFullYear(),0,1),Ke=new Date(Pe.getFullYear(),6,1).getTimezoneOffset(),st=ze.getTimezoneOffset(),mt=Math.min(st,Ke);return 0>Me?ye[Ee+32>>2>>>0]=+(Ke!=st&&mt==$e):0<Me!=(mt==$e)&&(Ke=Math.max(st,Ke),Pe.setTime(Pe.getTime()+6e4*((0<Me?mt:Ke)-$e))),ye[Ee+24>>2>>>0]=Pe.getDay(),ye[Ee+28>>2>>>0]=(Pe.getTime()-ze.getTime())/864e5|0,ye[Ee>>2>>>0]=Pe.getSeconds(),ye[Ee+4>>2>>>0]=Pe.getMinutes(),ye[Ee+8>>2>>>0]=Pe.getHours(),ye[Ee+12>>2>>>0]=Pe.getDate(),ye[Ee+16>>2>>>0]=Pe.getMonth(),Pe.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Ee(Pe,Me,$e){Ee.Vb||(Ee.Vb=!0,function(ze,Ke,st){function mt(mr){return(mr=mr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?mr[1]:"GMT"}var ct=new Date().getFullYear(),Ot=new Date(ct,0,1),qt=new Date(ct,6,1);ct=Ot.getTimezoneOffset();var $t=qt.getTimezoneOffset();ye[ze>>2>>>0]=60*Math.max(ct,$t),ye[Ke>>2>>>0]=+(ct!=$t),ze=mt(Ot),Ke=mt(qt),ze=bn(ze),Ke=bn(Ke),$t<ct?(we[st>>2>>>0]=ze,we[st+4>>2>>>0]=Ke):(we[st>>2>>>0]=Ke,we[st+4>>2>>>0]=ze)}(Pe,Me,$e))},B:function(){Je("")},ma:function(){return 4294901760},I:ee?()=>{var Ee=process.hrtime();return 1e3*Ee[0]+Ee[1]/1e6}:()=>performance.now(),xa:function(Ee,Pe,Me){ge.copyWithin(Ee>>>0,Pe>>>0,Pe+Me>>>0)},G:function(Ee){var Pe=ge.length;if(4294901760<(Ee>>>=0))return!1;for(var Me=1;4>=Me;Me*=2){var $e=Pe*(1+.2/Me);$e=Math.min($e,Ee+100663296);var ze=Math;$e=Math.max(Ee,$e),ze=ze.min.call(ze,4294901760,$e+(65536-$e%65536)%65536);e:{try{oe.grow(ze-fe.byteLength+65535>>>16),xe();var Ke=1;break e}catch{}Ke=void 0}if(Ke)return!0}return!1},va:function(Ee,Pe){var Me=0;return Or().forEach(function($e,ze){var Ke=Pe+Me;for(ze=we[Ee+4*ze>>2>>>0]=Ke,Ke=0;Ke<$e.length;++Ke)he[ze++>>0>>>0]=$e.charCodeAt(Ke);he[ze>>0>>>0]=0,Me+=$e.length+1}),0},wa:function(Ee,Pe){var Me=Or();we[Ee>>2>>>0]=Me.length;var $e=0;return Me.forEach(function(ze){$e+=ze.length+1}),we[Pe>>2>>>0]=$e,0},ba:function(Ee){ne||0<ke||(cr(),Yt(je),pr(0),Mr[1].length&&jr(1,10),Mr[2].length&&jr(2,10)),ne||0<ke||(I.onExit&&I.onExit(Ee),le=!0),Y(Ee,new Bt(Ee))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Ee,Pe,Me,$e){for(var ze=0,Ke=0;Ke<Me;Ke++){var st=we[Pe>>2>>>0],mt=we[Pe+4>>2>>>0];Pe+=8;for(var ct=0;ct<mt;ct++)jr(Ee,ge[st+ct>>>0]);ze+=mt}return we[$e>>2>>>0]=ze,0},c:function(){return fr},ja:function Ee(Pe,Me){Ee.Mb||(Ee.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var ze=new Uint8Array(1);return()=>(crypto.getRandomValues(ze),ze[0])}if(ee)try{var Ke=E(Object(function(){var st=new Error("Cannot find module 'crypto'");throw st.code="MODULE_NOT_FOUND",st}()));return()=>Ke.randomBytes(1)[0]}catch{}return()=>Je("randomDevice")}());for(var $e=0;$e<Me;$e++)he[Pe+$e>>0>>>0]=Ee.Mb();return 0},ea:function(Ee,Pe,Me){var $e=xt();try{return It(Ee)(Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},fa:function(Ee,Pe,Me){var $e=xt();try{return It(Ee)(Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},J:function(Ee){var Pe=xt();try{return It(Ee)()}catch(Me){if(Et(Pe),Me!==Me+0)throw Me;vt(1,0)}},e:function(Ee,Pe){var Me=xt();try{return It(Ee)(Pe)}catch($e){if(Et(Me),$e!==$e+0)throw $e;vt(1,0)}},N:function(Ee,Pe,Me){var $e=xt();try{return It(Ee)(Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},O:function(Ee,Pe,Me){var $e=xt();try{return It(Ee)(Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},j:function(Ee,Pe,Me){var $e=xt();try{return It(Ee)(Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},o:function(Ee,Pe,Me,$e){var ze=xt();try{return It(Ee)(Pe,Me,$e)}catch(Ke){if(Et(ze),Ke!==Ke+0)throw Ke;vt(1,0)}},p:function(Ee,Pe,Me,$e,ze){var Ke=xt();try{return It(Ee)(Pe,Me,$e,ze)}catch(st){if(Et(Ke),st!==st+0)throw st;vt(1,0)}},M:function(Ee,Pe,Me,$e,ze,Ke){var st=xt();try{return It(Ee)(Pe,Me,$e,ze,Ke)}catch(mt){if(Et(st),mt!==mt+0)throw mt;vt(1,0)}},r:function(Ee,Pe,Me,$e,ze,Ke){var st=xt();try{return It(Ee)(Pe,Me,$e,ze,Ke)}catch(mt){if(Et(st),mt!==mt+0)throw mt;vt(1,0)}},v:function(Ee,Pe,Me,$e,ze,Ke,st){var mt=xt();try{return It(Ee)(Pe,Me,$e,ze,Ke,st)}catch(ct){if(Et(mt),ct!==ct+0)throw ct;vt(1,0)}},K:function(Ee,Pe,Me,$e,ze,Ke,st,mt){var ct=xt();try{return It(Ee)(Pe,Me,$e,ze,Ke,st,mt)}catch(Ot){if(Et(ct),Ot!==Ot+0)throw Ot;vt(1,0)}},D:function(Ee,Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt,$t){var mr=xt();try{return It(Ee)(Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt,$t)}catch(Ze){if(Et(mr),Ze!==Ze+0)throw Ze;vt(1,0)}},X:function(Ee,Pe,Me,$e,ze,Ke,st,mt){var ct=xt();try{return un(Ee,Pe,Me,$e,ze,Ke,st,mt)}catch(Ot){if(Et(ct),Ot!==Ot+0)throw Ot;vt(1,0)}},V:function(Ee,Pe,Me,$e,ze,Ke,st){var mt=xt();try{return Vr(Ee,Pe,Me,$e,ze,Ke,st)}catch(ct){if(Et(mt),ct!==ct+0)throw ct;vt(1,0)}},U:function(Ee,Pe,Me,$e,ze){var Ke=xt();try{return xn(Ee,Pe,Me,$e,ze)}catch(st){if(Et(Ke),st!==st+0)throw st;vt(1,0)}},Z:function(Ee,Pe,Me,$e){var ze=xt();try{return zr(Ee,Pe,Me,$e)}catch(Ke){if(Et(ze),Ke!==Ke+0)throw Ke;vt(1,0)}},W:function(Ee){var Pe=xt();try{return _n(Ee)}catch(Me){if(Et(Pe),Me!==Me+0)throw Me;vt(1,0)}},Y:function(Ee,Pe){var Me=xt();try{return Jr(Ee,Pe)}catch($e){if(Et(Me),$e!==$e+0)throw $e;vt(1,0)}},T:function(Ee,Pe,Me){var $e=xt();try{return Dr(Ee,Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},f:function(Ee){var Pe=xt();try{It(Ee)()}catch(Me){if(Et(Pe),Me!==Me+0)throw Me;vt(1,0)}},q:function(Ee,Pe){var Me=xt();try{It(Ee)(Pe)}catch($e){if(Et(Me),$e!==$e+0)throw $e;vt(1,0)}},h:function(Ee,Pe,Me){var $e=xt();try{It(Ee)(Pe,Me)}catch(ze){if(Et($e),ze!==ze+0)throw ze;vt(1,0)}},da:function(Ee,Pe,Me,$e){var ze=xt();try{It(Ee)(Pe,Me,$e)}catch(Ke){if(Et(ze),Ke!==Ke+0)throw Ke;vt(1,0)}},l:function(Ee,Pe,Me,$e){var ze=xt();try{It(Ee)(Pe,Me,$e)}catch(Ke){if(Et(ze),Ke!==Ke+0)throw Ke;vt(1,0)}},t:function(Ee,Pe,Me,$e,ze){var Ke=xt();try{It(Ee)(Pe,Me,$e,ze)}catch(st){if(Et(Ke),st!==st+0)throw st;vt(1,0)}},u:function(Ee,Pe,Me,$e,ze,Ke){var st=xt();try{It(Ee)(Pe,Me,$e,ze,Ke)}catch(mt){if(Et(st),mt!==mt+0)throw mt;vt(1,0)}},x:function(Ee,Pe,Me,$e,ze,Ke,st){var mt=xt();try{It(Ee)(Pe,Me,$e,ze,Ke,st)}catch(ct){if(Et(mt),ct!==ct+0)throw ct;vt(1,0)}},z:function(Ee,Pe,Me,$e,ze,Ke,st,mt){var ct=xt();try{It(Ee)(Pe,Me,$e,ze,Ke,st,mt)}catch(Ot){if(Et(ct),Ot!==Ot+0)throw Ot;vt(1,0)}},ga:function(Ee,Pe,Me,$e,ze,Ke,st,mt,ct){var Ot=xt();try{It(Ee)(Pe,Me,$e,ze,Ke,st,mt,ct)}catch(qt){if(Et(Ot),qt!==qt+0)throw qt;vt(1,0)}},A:function(Ee,Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt){var $t=xt();try{It(Ee)(Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt)}catch(mr){if(Et($t),mr!==mr+0)throw mr;vt(1,0)}},C:function(Ee,Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt,$t,mr,Ze,Ut,Xt){var Gr=xt();try{It(Ee)(Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt,$t,mr,Ze,Ut,Xt)}catch(cn){if(Et(Gr),cn!==cn+0)throw cn;vt(1,0)}},aa:function(Ee,Pe,Me,$e,ze,Ke,st,mt){var ct=xt();try{Fr(Ee,Pe,Me,$e,ze,Ke,st,mt)}catch(Ot){if(Et(ct),Ot!==Ot+0)throw Ot;vt(1,0)}},_:function(Ee,Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt,$t){var mr=xt();try{Lr(Ee,Pe,Me,$e,ze,Ke,st,mt,ct,Ot,qt,$t)}catch(Ze){if(Et(mr),Ze!==Ze+0)throw Ze;vt(1,0)}},$:function(Ee,Pe,Me,$e,ze,Ke){var st=xt();try{ln(Ee,Pe,Me,$e,ze,Ke)}catch(mt){if(Et(st),mt!==mt+0)throw mt;vt(1,0)}},n:function(Ee){return Ee},F:function(Ee){fr=Ee},ha:We,y:function(Ee,Pe,Me,$e){return We(Ee,Pe,Me,$e)}};(function(){function Ee(ze){I.asm=ze.exports,oe=I.asm.Ka,xe(),Ae=I.asm.ib,Ie.unshift(I.asm.La),Qe--,I.monitorRunDependencies&&I.monitorRunDependencies(Qe),Qe==0&&et&&(ze=et,et=null,ze())}function Pe(ze){Ee(ze.instance)}function Me(ze){return function(){if(!ie&&(K||Q)){if(typeof fetch=="function"&&!Ne.startsWith("file://"))return fetch(Ne,{credentials:"same-origin"}).then(function(Ke){if(!Ke.ok)throw"failed to load wasm binary file at '"+Ne+"'";return Ke.arrayBuffer()}).catch(function(){return it()});if(V)return new Promise(function(Ke,st){V(Ne,function(mt){Ke(new Uint8Array(mt))},st)})}return Promise.resolve().then(function(){return it()})}().then(function(Ke){return WebAssembly.instantiate(Ke,$e)}).then(function(Ke){return Ke}).then(ze,function(Ke){se("failed to asynchronously prepare wasm: "+Ke),Je(Ke)})}var $e={a:Ft};if(Qe++,I.monitorRunDependencies&&I.monitorRunDependencies(Qe),I.instantiateWasm)try{return I.instantiateWasm($e,Ee)}catch(ze){return se("Module.instantiateWasm callback failed with error: "+ze),!1}(ie||typeof WebAssembly.instantiateStreaming!="function"||ut()||Ne.startsWith("file://")||ee||typeof fetch!="function"?Me(Pe):fetch(Ne,{credentials:"same-origin"}).then(function(ze){return WebAssembly.instantiateStreaming(ze,$e).then(Pe,function(Ke){return se("wasm streaming compile failed: "+Ke),se("falling back to ArrayBuffer instantiation"),Me(Pe)})})).catch(B)})(),I.___wasm_call_ctors=function(){return(I.___wasm_call_ctors=I.asm.La).apply(null,arguments)},I._OrtInit=function(){return(I._OrtInit=I.asm.Ma).apply(null,arguments)},I._OrtCreateSessionOptions=function(){return(I._OrtCreateSessionOptions=I.asm.Na).apply(null,arguments)},I._OrtAppendExecutionProvider=function(){return(I._OrtAppendExecutionProvider=I.asm.Oa).apply(null,arguments)},I._OrtAddSessionConfigEntry=function(){return(I._OrtAddSessionConfigEntry=I.asm.Pa).apply(null,arguments)},I._OrtReleaseSessionOptions=function(){return(I._OrtReleaseSessionOptions=I.asm.Qa).apply(null,arguments)},I._OrtCreateSession=function(){return(I._OrtCreateSession=I.asm.Ra).apply(null,arguments)},I._OrtReleaseSession=function(){return(I._OrtReleaseSession=I.asm.Sa).apply(null,arguments)},I._OrtGetInputCount=function(){return(I._OrtGetInputCount=I.asm.Ta).apply(null,arguments)},I._OrtGetOutputCount=function(){return(I._OrtGetOutputCount=I.asm.Ua).apply(null,arguments)},I._OrtGetInputName=function(){return(I._OrtGetInputName=I.asm.Va).apply(null,arguments)},I._OrtGetOutputName=function(){return(I._OrtGetOutputName=I.asm.Wa).apply(null,arguments)},I._OrtFree=function(){return(I._OrtFree=I.asm.Xa).apply(null,arguments)},I._OrtCreateTensor=function(){return(I._OrtCreateTensor=I.asm.Ya).apply(null,arguments)},I._OrtGetTensorData=function(){return(I._OrtGetTensorData=I.asm.Za).apply(null,arguments)},I._OrtReleaseTensor=function(){return(I._OrtReleaseTensor=I.asm._a).apply(null,arguments)},I._OrtCreateRunOptions=function(){return(I._OrtCreateRunOptions=I.asm.$a).apply(null,arguments)},I._OrtAddRunConfigEntry=function(){return(I._OrtAddRunConfigEntry=I.asm.ab).apply(null,arguments)},I._OrtReleaseRunOptions=function(){return(I._OrtReleaseRunOptions=I.asm.bb).apply(null,arguments)},I._OrtRun=function(){return(I._OrtRun=I.asm.cb).apply(null,arguments)},I._OrtEndProfiling=function(){return(I._OrtEndProfiling=I.asm.db).apply(null,arguments)};var Lt,gt=I._malloc=function(){return(gt=I._malloc=I.asm.eb).apply(null,arguments)},Ct=I._free=function(){return(Ct=I._free=I.asm.fb).apply(null,arguments)},pr=I._fflush=function(){return(pr=I._fflush=I.asm.gb).apply(null,arguments)},cr=I.___funcs_on_exit=function(){return(cr=I.___funcs_on_exit=I.asm.hb).apply(null,arguments)},vt=I._setThrew=function(){return(vt=I._setThrew=I.asm.jb).apply(null,arguments)},xt=I.stackSave=function(){return(xt=I.stackSave=I.asm.kb).apply(null,arguments)},Et=I.stackRestore=function(){return(Et=I.stackRestore=I.asm.lb).apply(null,arguments)},kr=I.stackAlloc=function(){return(kr=I.stackAlloc=I.asm.mb).apply(null,arguments)},dr=I.___cxa_can_catch=function(){return(dr=I.___cxa_can_catch=I.asm.nb).apply(null,arguments)},an=I.___cxa_is_pointer_type=function(){return(an=I.___cxa_is_pointer_type=I.asm.ob).apply(null,arguments)},_n=I.dynCall_j=function(){return(_n=I.dynCall_j=I.asm.pb).apply(null,arguments)},Vr=I.dynCall_iiiiij=function(){return(Vr=I.dynCall_iiiiij=I.asm.qb).apply(null,arguments)},Dr=I.dynCall_jii=function(){return(Dr=I.dynCall_jii=I.asm.rb).apply(null,arguments)},Fr=I.dynCall_viiiiij=function(){return(Fr=I.dynCall_viiiiij=I.asm.sb).apply(null,arguments)},ln=I.dynCall_vjji=function(){return(ln=I.dynCall_vjji=I.asm.tb).apply(null,arguments)},Lr=I.dynCall_viiijjjii=function(){return(Lr=I.dynCall_viiijjjii=I.asm.ub).apply(null,arguments)},zr=I.dynCall_iij=function(){return(zr=I.dynCall_iij=I.asm.vb).apply(null,arguments)},Jr=I.dynCall_ji=function(){return(Jr=I.dynCall_ji=I.asm.wb).apply(null,arguments)},un=I.dynCall_iiiiiij=function(){return(un=I.dynCall_iiiiiij=I.asm.xb).apply(null,arguments)},xn=I.dynCall_iiij=function(){return(xn=I.dynCall_iiij=I.asm.yb).apply(null,arguments)};function Fn(){function Ee(){if(!Lt&&(Lt=!0,I.calledRun=!0,!le)){if(Yt(Ie),F(I),I.onRuntimeInitialized&&I.onRuntimeInitialized(),I.postRun)for(typeof I.postRun=="function"&&(I.postRun=[I.postRun]);I.postRun.length;){var Pe=I.postRun.shift();Ye.unshift(Pe)}Yt(Ye)}}if(!(0<Qe)){if(I.preRun)for(typeof I.preRun=="function"&&(I.preRun=[I.preRun]);I.preRun.length;)Le();Yt(De),0<Qe||(I.setStatus?(I.setStatus("Running..."),setTimeout(function(){setTimeout(function(){I.setStatus("")},1),Ee()},1)):Ee())}}if(I.UTF8ToString=ve,I.stringToUTF8=function(Ee,Pe,Me){return be(Ee,ge,Pe,Me)},I.lengthBytesUTF8=me,I.stackSave=xt,I.stackRestore=Et,I.stackAlloc=kr,et=function Ee(){Lt||Fn(),Lt||(et=Ee)},I.preInit)for(typeof I.preInit=="function"&&(I.preInit=[I.preInit]);0<I.preInit.length;)I.preInit.pop()();return Fn(),R.ready});T.exports=A},4537:T=>{T.exports=function(_,E){for(var C=new Array(arguments.length-1),A=0,R=2,I=!0;R<arguments.length;)C[A++]=arguments[R++];return new Promise(function(F,B){C[A]=function(U){if(I)if(I=!1,U)B(U);else{for(var V=new Array(arguments.length-1),D=0;D<V.length;)V[D++]=arguments[D];F.apply(null,V)}};try{_.apply(E||null,C)}catch(U){I&&(I=!1,B(U))}})}},7419:(T,_)=>{var E=_;E.length=function(F){var B=F.length;if(!B)return 0;for(var U=0;--B%4>1&&F.charAt(B)==="=";)++U;return Math.ceil(3*F.length)/4-U};for(var C=new Array(64),A=new Array(123),R=0;R<64;)A[C[R]=R<26?R+65:R<52?R+71:R<62?R-4:R-59|43]=R++;E.encode=function(F,B,U){for(var V,D=null,O=[],L=0,z=0;B<U;){var W=F[B++];switch(z){case 0:O[L++]=C[W>>2],V=(3&W)<<4,z=1;break;case 1:O[L++]=C[V|W>>4],V=(15&W)<<2,z=2;break;case 2:O[L++]=C[V|W>>6],O[L++]=C[63&W],z=0}L>8191&&((D||(D=[])).push(String.fromCharCode.apply(String,O)),L=0)}return z&&(O[L++]=C[V],O[L++]=61,z===1&&(O[L++]=61)),D?(L&&D.push(String.fromCharCode.apply(String,O.slice(0,L))),D.join("")):String.fromCharCode.apply(String,O.slice(0,L))};var I="invalid encoding";E.decode=function(F,B,U){for(var V,D=U,O=0,L=0;L<F.length;){var z=F.charCodeAt(L++);if(z===61&&O>1)break;if((z=A[z])===void 0)throw Error(I);switch(O){case 0:V=z,O=1;break;case 1:B[U++]=V<<2|(48&z)>>4,V=z,O=2;break;case 2:B[U++]=(15&V)<<4|(60&z)>>2,V=z,O=3;break;case 3:B[U++]=(3&V)<<6|z,O=0}}if(O===1)throw Error(I);return U-D},E.test=function(F){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(F)}},9211:T=>{function _(){this._listeners={}}T.exports=_,_.prototype.on=function(E,C,A){return(this._listeners[E]||(this._listeners[E]=[])).push({fn:C,ctx:A||this}),this},_.prototype.off=function(E,C){if(E===void 0)this._listeners={};else if(C===void 0)this._listeners[E]=[];else for(var A=this._listeners[E],R=0;R<A.length;)A[R].fn===C?A.splice(R,1):++R;return this},_.prototype.emit=function(E){var C=this._listeners[E];if(C){for(var A=[],R=1;R<arguments.length;)A.push(arguments[R++]);for(R=0;R<C.length;)C[R].fn.apply(C[R++].ctx,A)}return this}},945:T=>{function _(I){return typeof Float32Array<"u"?function(){var F=new Float32Array([-0]),B=new Uint8Array(F.buffer),U=B[3]===128;function V(z,W,X){F[0]=z,W[X]=B[0],W[X+1]=B[1],W[X+2]=B[2],W[X+3]=B[3]}function D(z,W,X){F[0]=z,W[X]=B[3],W[X+1]=B[2],W[X+2]=B[1],W[X+3]=B[0]}function O(z,W){return B[0]=z[W],B[1]=z[W+1],B[2]=z[W+2],B[3]=z[W+3],F[0]}function L(z,W){return B[3]=z[W],B[2]=z[W+1],B[1]=z[W+2],B[0]=z[W+3],F[0]}I.writeFloatLE=U?V:D,I.writeFloatBE=U?D:V,I.readFloatLE=U?O:L,I.readFloatBE=U?L:O}():function(){function F(U,V,D,O){var L=V<0?1:0;if(L&&(V=-V),V===0)U(1/V>0?0:2147483648,D,O);else if(isNaN(V))U(2143289344,D,O);else if(V>34028234663852886e22)U((L<<31|2139095040)>>>0,D,O);else if(V<11754943508222875e-54)U((L<<31|Math.round(V/1401298464324817e-60))>>>0,D,O);else{var z=Math.floor(Math.log(V)/Math.LN2);U((L<<31|z+127<<23|8388607&Math.round(V*Math.pow(2,-z)*8388608))>>>0,D,O)}}function B(U,V,D){var O=U(V,D),L=2*(O>>31)+1,z=O>>>23&255,W=8388607&O;return z===255?W?NaN:L*(1/0):z===0?1401298464324817e-60*L*W:L*Math.pow(2,z-150)*(W+8388608)}I.writeFloatLE=F.bind(null,E),I.writeFloatBE=F.bind(null,C),I.readFloatLE=B.bind(null,A),I.readFloatBE=B.bind(null,R)}(),typeof Float64Array<"u"?function(){var F=new Float64Array([-0]),B=new Uint8Array(F.buffer),U=B[7]===128;function V(z,W,X){F[0]=z,W[X]=B[0],W[X+1]=B[1],W[X+2]=B[2],W[X+3]=B[3],W[X+4]=B[4],W[X+5]=B[5],W[X+6]=B[6],W[X+7]=B[7]}function D(z,W,X){F[0]=z,W[X]=B[7],W[X+1]=B[6],W[X+2]=B[5],W[X+3]=B[4],W[X+4]=B[3],W[X+5]=B[2],W[X+6]=B[1],W[X+7]=B[0]}function O(z,W){return B[0]=z[W],B[1]=z[W+1],B[2]=z[W+2],B[3]=z[W+3],B[4]=z[W+4],B[5]=z[W+5],B[6]=z[W+6],B[7]=z[W+7],F[0]}function L(z,W){return B[7]=z[W],B[6]=z[W+1],B[5]=z[W+2],B[4]=z[W+3],B[3]=z[W+4],B[2]=z[W+5],B[1]=z[W+6],B[0]=z[W+7],F[0]}I.writeDoubleLE=U?V:D,I.writeDoubleBE=U?D:V,I.readDoubleLE=U?O:L,I.readDoubleBE=U?L:O}():function(){function F(U,V,D,O,L,z){var W=O<0?1:0;if(W&&(O=-O),O===0)U(0,L,z+V),U(1/O>0?0:2147483648,L,z+D);else if(isNaN(O))U(0,L,z+V),U(2146959360,L,z+D);else if(O>17976931348623157e292)U(0,L,z+V),U((W<<31|2146435072)>>>0,L,z+D);else{var X;if(O<22250738585072014e-324)U((X=O/5e-324)>>>0,L,z+V),U((W<<31|X/4294967296)>>>0,L,z+D);else{var Y=Math.floor(Math.log(O)/Math.LN2);Y===1024&&(Y=1023),U(4503599627370496*(X=O*Math.pow(2,-Y))>>>0,L,z+V),U((W<<31|Y+1023<<20|1048576*X&1048575)>>>0,L,z+D)}}}function B(U,V,D,O,L){var z=U(O,L+V),W=U(O,L+D),X=2*(W>>31)+1,Y=W>>>20&2047,K=4294967296*(1048575&W)+z;return Y===2047?K?NaN:X*(1/0):Y===0?5e-324*X*K:X*Math.pow(2,Y-1075)*(K+4503599627370496)}I.writeDoubleLE=F.bind(null,E,0,4),I.writeDoubleBE=F.bind(null,C,4,0),I.readDoubleLE=B.bind(null,A,0,4),I.readDoubleBE=B.bind(null,R,4,0)}(),I}function E(I,F,B){F[B]=255&I,F[B+1]=I>>>8&255,F[B+2]=I>>>16&255,F[B+3]=I>>>24}function C(I,F,B){F[B]=I>>>24,F[B+1]=I>>>16&255,F[B+2]=I>>>8&255,F[B+3]=255&I}function A(I,F){return(I[F]|I[F+1]<<8|I[F+2]<<16|I[F+3]<<24)>>>0}function R(I,F){return(I[F]<<24|I[F+1]<<16|I[F+2]<<8|I[F+3])>>>0}T.exports=_(_)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(T){}return null}module.exports=inquire},6662:T=>{T.exports=function(_,E,C){var A=C||8192,R=A>>>1,I=null,F=A;return function(B){if(B<1||B>R)return _(B);F+B>A&&(I=_(A),F=0);var U=E.call(I,F,F+=B);return 7&F&&(F=1+(7|F)),U}}},4997:(T,_)=>{var E=_;E.length=function(C){for(var A=0,R=0,I=0;I<C.length;++I)(R=C.charCodeAt(I))<128?A+=1:R<2048?A+=2:(64512&R)==55296&&(64512&C.charCodeAt(I+1))==56320?(++I,A+=4):A+=3;return A},E.read=function(C,A,R){if(R-A<1)return"";for(var I,F=null,B=[],U=0;A<R;)(I=C[A++])<128?B[U++]=I:I>191&&I<224?B[U++]=(31&I)<<6|63&C[A++]:I>239&&I<365?(I=((7&I)<<18|(63&C[A++])<<12|(63&C[A++])<<6|63&C[A++])-65536,B[U++]=55296+(I>>10),B[U++]=56320+(1023&I)):B[U++]=(15&I)<<12|(63&C[A++])<<6|63&C[A++],U>8191&&((F||(F=[])).push(String.fromCharCode.apply(String,B)),U=0);return F?(U&&F.push(String.fromCharCode.apply(String,B.slice(0,U))),F.join("")):String.fromCharCode.apply(String,B.slice(0,U))},E.write=function(C,A,R){for(var I,F,B=R,U=0;U<C.length;++U)(I=C.charCodeAt(U))<128?A[R++]=I:I<2048?(A[R++]=I>>6|192,A[R++]=63&I|128):(64512&I)==55296&&(64512&(F=C.charCodeAt(U+1)))==56320?(I=65536+((1023&I)<<10)+(1023&F),++U,A[R++]=I>>18|240,A[R++]=I>>12&63|128,A[R++]=I>>6&63|128,A[R++]=63&I|128):(A[R++]=I>>12|224,A[R++]=I>>6&63|128,A[R++]=63&I|128);return R-B}},3442:(T,_)=>{_.__esModule=!0;var E=function(){function C(A){if(!A)throw new TypeError("Invalid argument; `value` has no value.");this.value=C.EMPTY,A&&C.isGuid(A)&&(this.value=A)}return C.isGuid=function(A){var R=A.toString();return A&&(A instanceof C||C.validator.test(R))},C.create=function(){return new C([C.gen(2),C.gen(1),C.gen(1),C.gen(1),C.gen(3)].join("-"))},C.createEmpty=function(){return new C("emptyguid")},C.parse=function(A){return new C(A)},C.raw=function(){return[C.gen(2),C.gen(1),C.gen(1),C.gen(1),C.gen(3)].join("-")},C.gen=function(A){for(var R="",I=0;I<A;I++)R+=(65536*(1+Math.random())|0).toString(16).substring(1);return R},C.prototype.equals=function(A){return C.isGuid(A)&&this.value===A.toString()},C.prototype.isEmpty=function(){return this.value===C.EMPTY},C.prototype.toString=function(){return this.value},C.prototype.toJSON=function(){return{value:this.value}},C.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),C.EMPTY="00000000-0000-0000-0000-000000000000",C}();_.Guid=E},3720:T=>{T.exports=E;var _=null;try{_=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function E(ne,oe,fe){this.low=0|ne,this.high=0|oe,this.unsigned=!!fe}function C(ne){return(ne&&ne.__isLong__)===!0}E.prototype.__isLong__,Object.defineProperty(E.prototype,"__isLong__",{value:!0}),E.isLong=C;var A={},R={};function I(ne,oe){var fe,he,ge;return oe?(ge=0<=(ne>>>=0)&&ne<256)&&(he=R[ne])?he:(fe=B(ne,(0|ne)<0?-1:0,!0),ge&&(R[ne]=fe),fe):(ge=-128<=(ne|=0)&&ne<128)&&(he=A[ne])?he:(fe=B(ne,ne<0?-1:0,!1),ge&&(A[ne]=fe),fe)}function F(ne,oe){if(isNaN(ne))return oe?Y:X;if(oe){if(ne<0)return Y;if(ne>=L)return ie}else{if(ne<=-9223372036854776e3)return re;if(ne+1>=z)return J}return ne<0?F(-ne,oe).neg():B(ne%O|0,ne/O|0,oe)}function B(ne,oe,fe){return new E(ne,oe,fe)}E.fromInt=I,E.fromNumber=F,E.fromBits=B;var U=Math.pow;function V(ne,oe,fe){if(ne.length===0)throw Error("empty string");if(ne==="NaN"||ne==="Infinity"||ne==="+Infinity"||ne==="-Infinity")return X;if(typeof oe=="number"?(fe=oe,oe=!1):oe=!!oe,(fe=fe||10)<2||36<fe)throw RangeError("radix");var he;if((he=ne.indexOf("-"))>0)throw Error("interior hyphen");if(he===0)return V(ne.substring(1),oe,fe).neg();for(var ge=F(U(fe,8)),ye=X,we=0;we<ne.length;we+=8){var le=Math.min(8,ne.length-we),de=parseInt(ne.substring(we,we+le),fe);if(le<8){var ce=F(U(fe,le));ye=ye.mul(ce).add(F(de))}else ye=(ye=ye.mul(ge)).add(F(de))}return ye.unsigned=oe,ye}function D(ne,oe){return typeof ne=="number"?F(ne,oe):typeof ne=="string"?V(ne,oe):B(ne.low,ne.high,typeof oe=="boolean"?oe:ne.unsigned)}E.fromString=V,E.fromValue=D;var O=4294967296,L=O*O,z=L/2,W=I(1<<24),X=I(0);E.ZERO=X;var Y=I(0,!0);E.UZERO=Y;var K=I(1);E.ONE=K;var Q=I(1,!0);E.UONE=Q;var ee=I(-1);E.NEG_ONE=ee;var J=B(-1,2147483647,!1);E.MAX_VALUE=J;var ie=B(-1,-1,!0);E.MAX_UNSIGNED_VALUE=ie;var re=B(0,-2147483648,!1);E.MIN_VALUE=re;var se=E.prototype;se.toInt=function(){return this.unsigned?this.low>>>0:this.low},se.toNumber=function(){return this.unsigned?(this.high>>>0)*O+(this.low>>>0):this.high*O+(this.low>>>0)},se.toString=function(ne){if((ne=ne||10)<2||36<ne)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(re)){var oe=F(ne),fe=this.div(oe),he=fe.mul(oe).sub(this);return fe.toString(ne)+he.toInt().toString(ne)}return"-"+this.neg().toString(ne)}for(var ge=F(U(ne,6),this.unsigned),ye=this,we="";;){var le=ye.div(ge),de=(ye.sub(le.mul(ge)).toInt()>>>0).toString(ne);if((ye=le).isZero())return de+we;for(;de.length<6;)de="0"+de;we=""+de+we}},se.getHighBits=function(){return this.high},se.getHighBitsUnsigned=function(){return this.high>>>0},se.getLowBits=function(){return this.low},se.getLowBitsUnsigned=function(){return this.low>>>0},se.getNumBitsAbs=function(){if(this.isNegative())return this.eq(re)?64:this.neg().getNumBitsAbs();for(var ne=this.high!=0?this.high:this.low,oe=31;oe>0&&(ne&1<<oe)==0;oe--);return this.high!=0?oe+33:oe+1},se.isZero=function(){return this.high===0&&this.low===0},se.eqz=se.isZero,se.isNegative=function(){return!this.unsigned&&this.high<0},se.isPositive=function(){return this.unsigned||this.high>=0},se.isOdd=function(){return(1&this.low)==1},se.isEven=function(){return(1&this.low)==0},se.equals=function(ne){return C(ne)||(ne=D(ne)),(this.unsigned===ne.unsigned||this.high>>>31!=1||ne.high>>>31!=1)&&this.high===ne.high&&this.low===ne.low},se.eq=se.equals,se.notEquals=function(ne){return!this.eq(ne)},se.neq=se.notEquals,se.ne=se.notEquals,se.lessThan=function(ne){return this.comp(ne)<0},se.lt=se.lessThan,se.lessThanOrEqual=function(ne){return this.comp(ne)<=0},se.lte=se.lessThanOrEqual,se.le=se.lessThanOrEqual,se.greaterThan=function(ne){return this.comp(ne)>0},se.gt=se.greaterThan,se.greaterThanOrEqual=function(ne){return this.comp(ne)>=0},se.gte=se.greaterThanOrEqual,se.ge=se.greaterThanOrEqual,se.compare=function(ne){if(C(ne)||(ne=D(ne)),this.eq(ne))return 0;var oe=this.isNegative(),fe=ne.isNegative();return oe&&!fe?-1:!oe&&fe?1:this.unsigned?ne.high>>>0>this.high>>>0||ne.high===this.high&&ne.low>>>0>this.low>>>0?-1:1:this.sub(ne).isNegative()?-1:1},se.comp=se.compare,se.negate=function(){return!this.unsigned&&this.eq(re)?re:this.not().add(K)},se.neg=se.negate,se.add=function(ne){C(ne)||(ne=D(ne));var oe=this.high>>>16,fe=65535&this.high,he=this.low>>>16,ge=65535&this.low,ye=ne.high>>>16,we=65535&ne.high,le=ne.low>>>16,de=0,ce=0,ve=0,be=0;return ve+=(be+=ge+(65535&ne.low))>>>16,ce+=(ve+=he+le)>>>16,de+=(ce+=fe+we)>>>16,de+=oe+ye,B((ve&=65535)<<16|(be&=65535),(de&=65535)<<16|(ce&=65535),this.unsigned)},se.subtract=function(ne){return C(ne)||(ne=D(ne)),this.add(ne.neg())},se.sub=se.subtract,se.multiply=function(ne){if(this.isZero())return X;if(C(ne)||(ne=D(ne)),_)return B(_.mul(this.low,this.high,ne.low,ne.high),_.get_high(),this.unsigned);if(ne.isZero())return X;if(this.eq(re))return ne.isOdd()?re:X;if(ne.eq(re))return this.isOdd()?re:X;if(this.isNegative())return ne.isNegative()?this.neg().mul(ne.neg()):this.neg().mul(ne).neg();if(ne.isNegative())return this.mul(ne.neg()).neg();if(this.lt(W)&&ne.lt(W))return F(this.toNumber()*ne.toNumber(),this.unsigned);var oe=this.high>>>16,fe=65535&this.high,he=this.low>>>16,ge=65535&this.low,ye=ne.high>>>16,we=65535&ne.high,le=ne.low>>>16,de=65535&ne.low,ce=0,ve=0,be=0,me=0;return be+=(me+=ge*de)>>>16,ve+=(be+=he*de)>>>16,be&=65535,ve+=(be+=ge*le)>>>16,ce+=(ve+=fe*de)>>>16,ve&=65535,ce+=(ve+=he*le)>>>16,ve&=65535,ce+=(ve+=ge*we)>>>16,ce+=oe*de+fe*le+he*we+ge*ye,B((be&=65535)<<16|(me&=65535),(ce&=65535)<<16|(ve&=65535),this.unsigned)},se.mul=se.multiply,se.divide=function(ne){if(C(ne)||(ne=D(ne)),ne.isZero())throw Error("division by zero");var oe,fe,he;if(_)return this.unsigned||this.high!==-2147483648||ne.low!==-1||ne.high!==-1?B((this.unsigned?_.div_u:_.div_s)(this.low,this.high,ne.low,ne.high),_.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Y:X;if(this.unsigned){if(ne.unsigned||(ne=ne.toUnsigned()),ne.gt(this))return Y;if(ne.gt(this.shru(1)))return Q;he=Y}else{if(this.eq(re))return ne.eq(K)||ne.eq(ee)?re:ne.eq(re)?K:(oe=this.shr(1).div(ne).shl(1)).eq(X)?ne.isNegative()?K:ee:(fe=this.sub(ne.mul(oe)),he=oe.add(fe.div(ne)));if(ne.eq(re))return this.unsigned?Y:X;if(this.isNegative())return ne.isNegative()?this.neg().div(ne.neg()):this.neg().div(ne).neg();if(ne.isNegative())return this.div(ne.neg()).neg();he=X}for(fe=this;fe.gte(ne);){oe=Math.max(1,Math.floor(fe.toNumber()/ne.toNumber()));for(var ge=Math.ceil(Math.log(oe)/Math.LN2),ye=ge<=48?1:U(2,ge-48),we=F(oe),le=we.mul(ne);le.isNegative()||le.gt(fe);)le=(we=F(oe-=ye,this.unsigned)).mul(ne);we.isZero()&&(we=K),he=he.add(we),fe=fe.sub(le)}return he},se.div=se.divide,se.modulo=function(ne){return C(ne)||(ne=D(ne)),_?B((this.unsigned?_.rem_u:_.rem_s)(this.low,this.high,ne.low,ne.high),_.get_high(),this.unsigned):this.sub(this.div(ne).mul(ne))},se.mod=se.modulo,se.rem=se.modulo,se.not=function(){return B(~this.low,~this.high,this.unsigned)},se.and=function(ne){return C(ne)||(ne=D(ne)),B(this.low&ne.low,this.high&ne.high,this.unsigned)},se.or=function(ne){return C(ne)||(ne=D(ne)),B(this.low|ne.low,this.high|ne.high,this.unsigned)},se.xor=function(ne){return C(ne)||(ne=D(ne)),B(this.low^ne.low,this.high^ne.high,this.unsigned)},se.shiftLeft=function(ne){return C(ne)&&(ne=ne.toInt()),(ne&=63)==0?this:ne<32?B(this.low<<ne,this.high<<ne|this.low>>>32-ne,this.unsigned):B(0,this.low<<ne-32,this.unsigned)},se.shl=se.shiftLeft,se.shiftRight=function(ne){return C(ne)&&(ne=ne.toInt()),(ne&=63)==0?this:ne<32?B(this.low>>>ne|this.high<<32-ne,this.high>>ne,this.unsigned):B(this.high>>ne-32,this.high>=0?0:-1,this.unsigned)},se.shr=se.shiftRight,se.shiftRightUnsigned=function(ne){if(C(ne)&&(ne=ne.toInt()),(ne&=63)==0)return this;var oe=this.high;return ne<32?B(this.low>>>ne|oe<<32-ne,oe>>>ne,this.unsigned):B(ne===32?oe:oe>>>ne-32,0,this.unsigned)},se.shru=se.shiftRightUnsigned,se.shr_u=se.shiftRightUnsigned,se.toSigned=function(){return this.unsigned?B(this.low,this.high,!1):this},se.toUnsigned=function(){return this.unsigned?this:B(this.low,this.high,!0)},se.toBytes=function(ne){return ne?this.toBytesLE():this.toBytesBE()},se.toBytesLE=function(){var ne=this.high,oe=this.low;return[255&oe,oe>>>8&255,oe>>>16&255,oe>>>24,255&ne,ne>>>8&255,ne>>>16&255,ne>>>24]},se.toBytesBE=function(){var ne=this.high,oe=this.low;return[ne>>>24,ne>>>16&255,ne>>>8&255,255&ne,oe>>>24,oe>>>16&255,oe>>>8&255,255&oe]},E.fromBytes=function(ne,oe,fe){return fe?E.fromBytesLE(ne,oe):E.fromBytesBE(ne,oe)},E.fromBytesLE=function(ne,oe){return new E(ne[0]|ne[1]<<8|ne[2]<<16|ne[3]<<24,ne[4]|ne[5]<<8|ne[6]<<16|ne[7]<<24,oe)},E.fromBytesBE=function(ne,oe){return new E(ne[4]<<24|ne[5]<<16|ne[6]<<8|ne[7],ne[0]<<24|ne[1]<<16|ne[2]<<8|ne[3],oe)}},1446:(T,_,E)=>{var C,A,R,I=E(2100),F=I.Reader,B=I.Writer,U=I.util,V=I.roots.default||(I.roots.default={});V.onnx=((R={}).Version=(C={},(A=Object.create(C))[C[0]="_START_VERSION"]=0,A[C[1]="IR_VERSION_2017_10_10"]=1,A[C[2]="IR_VERSION_2017_10_30"]=2,A[C[3]="IR_VERSION_2017_11_3"]=3,A[C[4]="IR_VERSION_2019_1_22"]=4,A[C[5]="IR_VERSION"]=5,A),R.AttributeProto=function(){function D(O){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.name="",D.prototype.refAttrName="",D.prototype.docString="",D.prototype.type=0,D.prototype.f=0,D.prototype.i=U.Long?U.Long.fromBits(0,0,!1):0,D.prototype.s=U.newBuffer([]),D.prototype.t=null,D.prototype.g=null,D.prototype.floats=U.emptyArray,D.prototype.ints=U.emptyArray,D.prototype.strings=U.emptyArray,D.prototype.tensors=U.emptyArray,D.prototype.graphs=U.emptyArray,D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.name!=null&&O.hasOwnProperty("name")&&L.uint32(10).string(O.name),O.f!=null&&O.hasOwnProperty("f")&&L.uint32(21).float(O.f),O.i!=null&&O.hasOwnProperty("i")&&L.uint32(24).int64(O.i),O.s!=null&&O.hasOwnProperty("s")&&L.uint32(34).bytes(O.s),O.t!=null&&O.hasOwnProperty("t")&&V.onnx.TensorProto.encode(O.t,L.uint32(42).fork()).ldelim(),O.g!=null&&O.hasOwnProperty("g")&&V.onnx.GraphProto.encode(O.g,L.uint32(50).fork()).ldelim(),O.floats!=null&&O.floats.length){L.uint32(58).fork();for(var z=0;z<O.floats.length;++z)L.float(O.floats[z]);L.ldelim()}if(O.ints!=null&&O.ints.length){for(L.uint32(66).fork(),z=0;z<O.ints.length;++z)L.int64(O.ints[z]);L.ldelim()}if(O.strings!=null&&O.strings.length)for(z=0;z<O.strings.length;++z)L.uint32(74).bytes(O.strings[z]);if(O.tensors!=null&&O.tensors.length)for(z=0;z<O.tensors.length;++z)V.onnx.TensorProto.encode(O.tensors[z],L.uint32(82).fork()).ldelim();if(O.graphs!=null&&O.graphs.length)for(z=0;z<O.graphs.length;++z)V.onnx.GraphProto.encode(O.graphs[z],L.uint32(90).fork()).ldelim();return O.docString!=null&&O.hasOwnProperty("docString")&&L.uint32(106).string(O.docString),O.type!=null&&O.hasOwnProperty("type")&&L.uint32(160).int32(O.type),O.refAttrName!=null&&O.hasOwnProperty("refAttrName")&&L.uint32(170).string(O.refAttrName),L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.AttributeProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.name=O.string();break;case 21:W.refAttrName=O.string();break;case 13:W.docString=O.string();break;case 20:W.type=O.int32();break;case 2:W.f=O.float();break;case 3:W.i=O.int64();break;case 4:W.s=O.bytes();break;case 5:W.t=V.onnx.TensorProto.decode(O,O.uint32());break;case 6:W.g=V.onnx.GraphProto.decode(O,O.uint32());break;case 7:if(W.floats&&W.floats.length||(W.floats=[]),(7&X)==2)for(var Y=O.uint32()+O.pos;O.pos<Y;)W.floats.push(O.float());else W.floats.push(O.float());break;case 8:if(W.ints&&W.ints.length||(W.ints=[]),(7&X)==2)for(Y=O.uint32()+O.pos;O.pos<Y;)W.ints.push(O.int64());else W.ints.push(O.int64());break;case 9:W.strings&&W.strings.length||(W.strings=[]),W.strings.push(O.bytes());break;case 10:W.tensors&&W.tensors.length||(W.tensors=[]),W.tensors.push(V.onnx.TensorProto.decode(O,O.uint32()));break;case 11:W.graphs&&W.graphs.length||(W.graphs=[]),W.graphs.push(V.onnx.GraphProto.decode(O,O.uint32()));break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.name!=null&&O.hasOwnProperty("name")&&!U.isString(O.name))return"name: string expected";if(O.refAttrName!=null&&O.hasOwnProperty("refAttrName")&&!U.isString(O.refAttrName))return"refAttrName: string expected";if(O.docString!=null&&O.hasOwnProperty("docString")&&!U.isString(O.docString))return"docString: string expected";if(O.type!=null&&O.hasOwnProperty("type"))switch(O.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(O.f!=null&&O.hasOwnProperty("f")&&typeof O.f!="number")return"f: number expected";if(O.i!=null&&O.hasOwnProperty("i")&&!(U.isInteger(O.i)||O.i&&U.isInteger(O.i.low)&&U.isInteger(O.i.high)))return"i: integer|Long expected";if(O.s!=null&&O.hasOwnProperty("s")&&!(O.s&&typeof O.s.length=="number"||U.isString(O.s)))return"s: buffer expected";if(O.t!=null&&O.hasOwnProperty("t")&&(z=V.onnx.TensorProto.verify(O.t)))return"t."+z;if(O.g!=null&&O.hasOwnProperty("g")&&(z=V.onnx.GraphProto.verify(O.g)))return"g."+z;if(O.floats!=null&&O.hasOwnProperty("floats")){if(!Array.isArray(O.floats))return"floats: array expected";for(var L=0;L<O.floats.length;++L)if(typeof O.floats[L]!="number")return"floats: number[] expected"}if(O.ints!=null&&O.hasOwnProperty("ints")){if(!Array.isArray(O.ints))return"ints: array expected";for(L=0;L<O.ints.length;++L)if(!(U.isInteger(O.ints[L])||O.ints[L]&&U.isInteger(O.ints[L].low)&&U.isInteger(O.ints[L].high)))return"ints: integer|Long[] expected"}if(O.strings!=null&&O.hasOwnProperty("strings")){if(!Array.isArray(O.strings))return"strings: array expected";for(L=0;L<O.strings.length;++L)if(!(O.strings[L]&&typeof O.strings[L].length=="number"||U.isString(O.strings[L])))return"strings: buffer[] expected"}if(O.tensors!=null&&O.hasOwnProperty("tensors")){if(!Array.isArray(O.tensors))return"tensors: array expected";for(L=0;L<O.tensors.length;++L)if(z=V.onnx.TensorProto.verify(O.tensors[L]))return"tensors."+z}if(O.graphs!=null&&O.hasOwnProperty("graphs")){if(!Array.isArray(O.graphs))return"graphs: array expected";for(L=0;L<O.graphs.length;++L){var z;if(z=V.onnx.GraphProto.verify(O.graphs[L]))return"graphs."+z}}return null},D.fromObject=function(O){if(O instanceof V.onnx.AttributeProto)return O;var L=new V.onnx.AttributeProto;switch(O.name!=null&&(L.name=String(O.name)),O.refAttrName!=null&&(L.refAttrName=String(O.refAttrName)),O.docString!=null&&(L.docString=String(O.docString)),O.type){case"UNDEFINED":case 0:L.type=0;break;case"FLOAT":case 1:L.type=1;break;case"INT":case 2:L.type=2;break;case"STRING":case 3:L.type=3;break;case"TENSOR":case 4:L.type=4;break;case"GRAPH":case 5:L.type=5;break;case"FLOATS":case 6:L.type=6;break;case"INTS":case 7:L.type=7;break;case"STRINGS":case 8:L.type=8;break;case"TENSORS":case 9:L.type=9;break;case"GRAPHS":case 10:L.type=10}if(O.f!=null&&(L.f=Number(O.f)),O.i!=null&&(U.Long?(L.i=U.Long.fromValue(O.i)).unsigned=!1:typeof O.i=="string"?L.i=parseInt(O.i,10):typeof O.i=="number"?L.i=O.i:typeof O.i=="object"&&(L.i=new U.LongBits(O.i.low>>>0,O.i.high>>>0).toNumber())),O.s!=null&&(typeof O.s=="string"?U.base64.decode(O.s,L.s=U.newBuffer(U.base64.length(O.s)),0):O.s.length&&(L.s=O.s)),O.t!=null){if(typeof O.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");L.t=V.onnx.TensorProto.fromObject(O.t)}if(O.g!=null){if(typeof O.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");L.g=V.onnx.GraphProto.fromObject(O.g)}if(O.floats){if(!Array.isArray(O.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");L.floats=[];for(var z=0;z<O.floats.length;++z)L.floats[z]=Number(O.floats[z])}if(O.ints){if(!Array.isArray(O.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(L.ints=[],z=0;z<O.ints.length;++z)U.Long?(L.ints[z]=U.Long.fromValue(O.ints[z])).unsigned=!1:typeof O.ints[z]=="string"?L.ints[z]=parseInt(O.ints[z],10):typeof O.ints[z]=="number"?L.ints[z]=O.ints[z]:typeof O.ints[z]=="object"&&(L.ints[z]=new U.LongBits(O.ints[z].low>>>0,O.ints[z].high>>>0).toNumber())}if(O.strings){if(!Array.isArray(O.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(L.strings=[],z=0;z<O.strings.length;++z)typeof O.strings[z]=="string"?U.base64.decode(O.strings[z],L.strings[z]=U.newBuffer(U.base64.length(O.strings[z])),0):O.strings[z].length&&(L.strings[z]=O.strings[z])}if(O.tensors){if(!Array.isArray(O.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(L.tensors=[],z=0;z<O.tensors.length;++z){if(typeof O.tensors[z]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");L.tensors[z]=V.onnx.TensorProto.fromObject(O.tensors[z])}}if(O.graphs){if(!Array.isArray(O.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(L.graphs=[],z=0;z<O.graphs.length;++z){if(typeof O.graphs[z]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");L.graphs[z]=V.onnx.GraphProto.fromObject(O.graphs[z])}}return L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.floats=[],z.ints=[],z.strings=[],z.tensors=[],z.graphs=[]),L.defaults){if(z.name="",z.f=0,U.Long){var W=new U.Long(0,0,!1);z.i=L.longs===String?W.toString():L.longs===Number?W.toNumber():W}else z.i=L.longs===String?"0":0;L.bytes===String?z.s="":(z.s=[],L.bytes!==Array&&(z.s=U.newBuffer(z.s))),z.t=null,z.g=null,z.docString="",z.type=L.enums===String?"UNDEFINED":0,z.refAttrName=""}if(O.name!=null&&O.hasOwnProperty("name")&&(z.name=O.name),O.f!=null&&O.hasOwnProperty("f")&&(z.f=L.json&&!isFinite(O.f)?String(O.f):O.f),O.i!=null&&O.hasOwnProperty("i")&&(typeof O.i=="number"?z.i=L.longs===String?String(O.i):O.i:z.i=L.longs===String?U.Long.prototype.toString.call(O.i):L.longs===Number?new U.LongBits(O.i.low>>>0,O.i.high>>>0).toNumber():O.i),O.s!=null&&O.hasOwnProperty("s")&&(z.s=L.bytes===String?U.base64.encode(O.s,0,O.s.length):L.bytes===Array?Array.prototype.slice.call(O.s):O.s),O.t!=null&&O.hasOwnProperty("t")&&(z.t=V.onnx.TensorProto.toObject(O.t,L)),O.g!=null&&O.hasOwnProperty("g")&&(z.g=V.onnx.GraphProto.toObject(O.g,L)),O.floats&&O.floats.length){z.floats=[];for(var X=0;X<O.floats.length;++X)z.floats[X]=L.json&&!isFinite(O.floats[X])?String(O.floats[X]):O.floats[X]}if(O.ints&&O.ints.length)for(z.ints=[],X=0;X<O.ints.length;++X)typeof O.ints[X]=="number"?z.ints[X]=L.longs===String?String(O.ints[X]):O.ints[X]:z.ints[X]=L.longs===String?U.Long.prototype.toString.call(O.ints[X]):L.longs===Number?new U.LongBits(O.ints[X].low>>>0,O.ints[X].high>>>0).toNumber():O.ints[X];if(O.strings&&O.strings.length)for(z.strings=[],X=0;X<O.strings.length;++X)z.strings[X]=L.bytes===String?U.base64.encode(O.strings[X],0,O.strings[X].length):L.bytes===Array?Array.prototype.slice.call(O.strings[X]):O.strings[X];if(O.tensors&&O.tensors.length)for(z.tensors=[],X=0;X<O.tensors.length;++X)z.tensors[X]=V.onnx.TensorProto.toObject(O.tensors[X],L);if(O.graphs&&O.graphs.length)for(z.graphs=[],X=0;X<O.graphs.length;++X)z.graphs[X]=V.onnx.GraphProto.toObject(O.graphs[X],L);return O.docString!=null&&O.hasOwnProperty("docString")&&(z.docString=O.docString),O.type!=null&&O.hasOwnProperty("type")&&(z.type=L.enums===String?V.onnx.AttributeProto.AttributeType[O.type]:O.type),O.refAttrName!=null&&O.hasOwnProperty("refAttrName")&&(z.refAttrName=O.refAttrName),z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D.AttributeType=function(){var O={},L=Object.create(O);return L[O[0]="UNDEFINED"]=0,L[O[1]="FLOAT"]=1,L[O[2]="INT"]=2,L[O[3]="STRING"]=3,L[O[4]="TENSOR"]=4,L[O[5]="GRAPH"]=5,L[O[6]="FLOATS"]=6,L[O[7]="INTS"]=7,L[O[8]="STRINGS"]=8,L[O[9]="TENSORS"]=9,L[O[10]="GRAPHS"]=10,L}(),D}(),R.ValueInfoProto=function(){function D(O){if(O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.name="",D.prototype.type=null,D.prototype.docString="",D.create=function(O){return new D(O)},D.encode=function(O,L){return L||(L=B.create()),O.name!=null&&O.hasOwnProperty("name")&&L.uint32(10).string(O.name),O.type!=null&&O.hasOwnProperty("type")&&V.onnx.TypeProto.encode(O.type,L.uint32(18).fork()).ldelim(),O.docString!=null&&O.hasOwnProperty("docString")&&L.uint32(26).string(O.docString),L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.ValueInfoProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.name=O.string();break;case 2:W.type=V.onnx.TypeProto.decode(O,O.uint32());break;case 3:W.docString=O.string();break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.name!=null&&O.hasOwnProperty("name")&&!U.isString(O.name))return"name: string expected";if(O.type!=null&&O.hasOwnProperty("type")){var L=V.onnx.TypeProto.verify(O.type);if(L)return"type."+L}return O.docString!=null&&O.hasOwnProperty("docString")&&!U.isString(O.docString)?"docString: string expected":null},D.fromObject=function(O){if(O instanceof V.onnx.ValueInfoProto)return O;var L=new V.onnx.ValueInfoProto;if(O.name!=null&&(L.name=String(O.name)),O.type!=null){if(typeof O.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");L.type=V.onnx.TypeProto.fromObject(O.type)}return O.docString!=null&&(L.docString=String(O.docString)),L},D.toObject=function(O,L){L||(L={});var z={};return L.defaults&&(z.name="",z.type=null,z.docString=""),O.name!=null&&O.hasOwnProperty("name")&&(z.name=O.name),O.type!=null&&O.hasOwnProperty("type")&&(z.type=V.onnx.TypeProto.toObject(O.type,L)),O.docString!=null&&O.hasOwnProperty("docString")&&(z.docString=O.docString),z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R.NodeProto=function(){function D(O){if(this.input=[],this.output=[],this.attribute=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.input=U.emptyArray,D.prototype.output=U.emptyArray,D.prototype.name="",D.prototype.opType="",D.prototype.domain="",D.prototype.attribute=U.emptyArray,D.prototype.docString="",D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.input!=null&&O.input.length)for(var z=0;z<O.input.length;++z)L.uint32(10).string(O.input[z]);if(O.output!=null&&O.output.length)for(z=0;z<O.output.length;++z)L.uint32(18).string(O.output[z]);if(O.name!=null&&O.hasOwnProperty("name")&&L.uint32(26).string(O.name),O.opType!=null&&O.hasOwnProperty("opType")&&L.uint32(34).string(O.opType),O.attribute!=null&&O.attribute.length)for(z=0;z<O.attribute.length;++z)V.onnx.AttributeProto.encode(O.attribute[z],L.uint32(42).fork()).ldelim();return O.docString!=null&&O.hasOwnProperty("docString")&&L.uint32(50).string(O.docString),O.domain!=null&&O.hasOwnProperty("domain")&&L.uint32(58).string(O.domain),L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.NodeProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.input&&W.input.length||(W.input=[]),W.input.push(O.string());break;case 2:W.output&&W.output.length||(W.output=[]),W.output.push(O.string());break;case 3:W.name=O.string();break;case 4:W.opType=O.string();break;case 7:W.domain=O.string();break;case 5:W.attribute&&W.attribute.length||(W.attribute=[]),W.attribute.push(V.onnx.AttributeProto.decode(O,O.uint32()));break;case 6:W.docString=O.string();break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.input!=null&&O.hasOwnProperty("input")){if(!Array.isArray(O.input))return"input: array expected";for(var L=0;L<O.input.length;++L)if(!U.isString(O.input[L]))return"input: string[] expected"}if(O.output!=null&&O.hasOwnProperty("output")){if(!Array.isArray(O.output))return"output: array expected";for(L=0;L<O.output.length;++L)if(!U.isString(O.output[L]))return"output: string[] expected"}if(O.name!=null&&O.hasOwnProperty("name")&&!U.isString(O.name))return"name: string expected";if(O.opType!=null&&O.hasOwnProperty("opType")&&!U.isString(O.opType))return"opType: string expected";if(O.domain!=null&&O.hasOwnProperty("domain")&&!U.isString(O.domain))return"domain: string expected";if(O.attribute!=null&&O.hasOwnProperty("attribute")){if(!Array.isArray(O.attribute))return"attribute: array expected";for(L=0;L<O.attribute.length;++L){var z=V.onnx.AttributeProto.verify(O.attribute[L]);if(z)return"attribute."+z}}return O.docString!=null&&O.hasOwnProperty("docString")&&!U.isString(O.docString)?"docString: string expected":null},D.fromObject=function(O){if(O instanceof V.onnx.NodeProto)return O;var L=new V.onnx.NodeProto;if(O.input){if(!Array.isArray(O.input))throw TypeError(".onnx.NodeProto.input: array expected");L.input=[];for(var z=0;z<O.input.length;++z)L.input[z]=String(O.input[z])}if(O.output){if(!Array.isArray(O.output))throw TypeError(".onnx.NodeProto.output: array expected");for(L.output=[],z=0;z<O.output.length;++z)L.output[z]=String(O.output[z])}if(O.name!=null&&(L.name=String(O.name)),O.opType!=null&&(L.opType=String(O.opType)),O.domain!=null&&(L.domain=String(O.domain)),O.attribute){if(!Array.isArray(O.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(L.attribute=[],z=0;z<O.attribute.length;++z){if(typeof O.attribute[z]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");L.attribute[z]=V.onnx.AttributeProto.fromObject(O.attribute[z])}}return O.docString!=null&&(L.docString=String(O.docString)),L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.input=[],z.output=[],z.attribute=[]),L.defaults&&(z.name="",z.opType="",z.docString="",z.domain=""),O.input&&O.input.length){z.input=[];for(var W=0;W<O.input.length;++W)z.input[W]=O.input[W]}if(O.output&&O.output.length)for(z.output=[],W=0;W<O.output.length;++W)z.output[W]=O.output[W];if(O.name!=null&&O.hasOwnProperty("name")&&(z.name=O.name),O.opType!=null&&O.hasOwnProperty("opType")&&(z.opType=O.opType),O.attribute&&O.attribute.length)for(z.attribute=[],W=0;W<O.attribute.length;++W)z.attribute[W]=V.onnx.AttributeProto.toObject(O.attribute[W],L);return O.docString!=null&&O.hasOwnProperty("docString")&&(z.docString=O.docString),O.domain!=null&&O.hasOwnProperty("domain")&&(z.domain=O.domain),z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R.ModelProto=function(){function D(O){if(this.opsetImport=[],this.metadataProps=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.irVersion=U.Long?U.Long.fromBits(0,0,!1):0,D.prototype.opsetImport=U.emptyArray,D.prototype.producerName="",D.prototype.producerVersion="",D.prototype.domain="",D.prototype.modelVersion=U.Long?U.Long.fromBits(0,0,!1):0,D.prototype.docString="",D.prototype.graph=null,D.prototype.metadataProps=U.emptyArray,D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.irVersion!=null&&O.hasOwnProperty("irVersion")&&L.uint32(8).int64(O.irVersion),O.producerName!=null&&O.hasOwnProperty("producerName")&&L.uint32(18).string(O.producerName),O.producerVersion!=null&&O.hasOwnProperty("producerVersion")&&L.uint32(26).string(O.producerVersion),O.domain!=null&&O.hasOwnProperty("domain")&&L.uint32(34).string(O.domain),O.modelVersion!=null&&O.hasOwnProperty("modelVersion")&&L.uint32(40).int64(O.modelVersion),O.docString!=null&&O.hasOwnProperty("docString")&&L.uint32(50).string(O.docString),O.graph!=null&&O.hasOwnProperty("graph")&&V.onnx.GraphProto.encode(O.graph,L.uint32(58).fork()).ldelim(),O.opsetImport!=null&&O.opsetImport.length)for(var z=0;z<O.opsetImport.length;++z)V.onnx.OperatorSetIdProto.encode(O.opsetImport[z],L.uint32(66).fork()).ldelim();if(O.metadataProps!=null&&O.metadataProps.length)for(z=0;z<O.metadataProps.length;++z)V.onnx.StringStringEntryProto.encode(O.metadataProps[z],L.uint32(114).fork()).ldelim();return L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.ModelProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.irVersion=O.int64();break;case 8:W.opsetImport&&W.opsetImport.length||(W.opsetImport=[]),W.opsetImport.push(V.onnx.OperatorSetIdProto.decode(O,O.uint32()));break;case 2:W.producerName=O.string();break;case 3:W.producerVersion=O.string();break;case 4:W.domain=O.string();break;case 5:W.modelVersion=O.int64();break;case 6:W.docString=O.string();break;case 7:W.graph=V.onnx.GraphProto.decode(O,O.uint32());break;case 14:W.metadataProps&&W.metadataProps.length||(W.metadataProps=[]),W.metadataProps.push(V.onnx.StringStringEntryProto.decode(O,O.uint32()));break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.irVersion!=null&&O.hasOwnProperty("irVersion")&&!(U.isInteger(O.irVersion)||O.irVersion&&U.isInteger(O.irVersion.low)&&U.isInteger(O.irVersion.high)))return"irVersion: integer|Long expected";if(O.opsetImport!=null&&O.hasOwnProperty("opsetImport")){if(!Array.isArray(O.opsetImport))return"opsetImport: array expected";for(var L=0;L<O.opsetImport.length;++L)if(z=V.onnx.OperatorSetIdProto.verify(O.opsetImport[L]))return"opsetImport."+z}if(O.producerName!=null&&O.hasOwnProperty("producerName")&&!U.isString(O.producerName))return"producerName: string expected";if(O.producerVersion!=null&&O.hasOwnProperty("producerVersion")&&!U.isString(O.producerVersion))return"producerVersion: string expected";if(O.domain!=null&&O.hasOwnProperty("domain")&&!U.isString(O.domain))return"domain: string expected";if(O.modelVersion!=null&&O.hasOwnProperty("modelVersion")&&!(U.isInteger(O.modelVersion)||O.modelVersion&&U.isInteger(O.modelVersion.low)&&U.isInteger(O.modelVersion.high)))return"modelVersion: integer|Long expected";if(O.docString!=null&&O.hasOwnProperty("docString")&&!U.isString(O.docString))return"docString: string expected";if(O.graph!=null&&O.hasOwnProperty("graph")&&(z=V.onnx.GraphProto.verify(O.graph)))return"graph."+z;if(O.metadataProps!=null&&O.hasOwnProperty("metadataProps")){if(!Array.isArray(O.metadataProps))return"metadataProps: array expected";for(L=0;L<O.metadataProps.length;++L){var z;if(z=V.onnx.StringStringEntryProto.verify(O.metadataProps[L]))return"metadataProps."+z}}return null},D.fromObject=function(O){if(O instanceof V.onnx.ModelProto)return O;var L=new V.onnx.ModelProto;if(O.irVersion!=null&&(U.Long?(L.irVersion=U.Long.fromValue(O.irVersion)).unsigned=!1:typeof O.irVersion=="string"?L.irVersion=parseInt(O.irVersion,10):typeof O.irVersion=="number"?L.irVersion=O.irVersion:typeof O.irVersion=="object"&&(L.irVersion=new U.LongBits(O.irVersion.low>>>0,O.irVersion.high>>>0).toNumber())),O.opsetImport){if(!Array.isArray(O.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");L.opsetImport=[];for(var z=0;z<O.opsetImport.length;++z){if(typeof O.opsetImport[z]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");L.opsetImport[z]=V.onnx.OperatorSetIdProto.fromObject(O.opsetImport[z])}}if(O.producerName!=null&&(L.producerName=String(O.producerName)),O.producerVersion!=null&&(L.producerVersion=String(O.producerVersion)),O.domain!=null&&(L.domain=String(O.domain)),O.modelVersion!=null&&(U.Long?(L.modelVersion=U.Long.fromValue(O.modelVersion)).unsigned=!1:typeof O.modelVersion=="string"?L.modelVersion=parseInt(O.modelVersion,10):typeof O.modelVersion=="number"?L.modelVersion=O.modelVersion:typeof O.modelVersion=="object"&&(L.modelVersion=new U.LongBits(O.modelVersion.low>>>0,O.modelVersion.high>>>0).toNumber())),O.docString!=null&&(L.docString=String(O.docString)),O.graph!=null){if(typeof O.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");L.graph=V.onnx.GraphProto.fromObject(O.graph)}if(O.metadataProps){if(!Array.isArray(O.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(L.metadataProps=[],z=0;z<O.metadataProps.length;++z){if(typeof O.metadataProps[z]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");L.metadataProps[z]=V.onnx.StringStringEntryProto.fromObject(O.metadataProps[z])}}return L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.opsetImport=[],z.metadataProps=[]),L.defaults){if(U.Long){var W=new U.Long(0,0,!1);z.irVersion=L.longs===String?W.toString():L.longs===Number?W.toNumber():W}else z.irVersion=L.longs===String?"0":0;z.producerName="",z.producerVersion="",z.domain="",U.Long?(W=new U.Long(0,0,!1),z.modelVersion=L.longs===String?W.toString():L.longs===Number?W.toNumber():W):z.modelVersion=L.longs===String?"0":0,z.docString="",z.graph=null}if(O.irVersion!=null&&O.hasOwnProperty("irVersion")&&(typeof O.irVersion=="number"?z.irVersion=L.longs===String?String(O.irVersion):O.irVersion:z.irVersion=L.longs===String?U.Long.prototype.toString.call(O.irVersion):L.longs===Number?new U.LongBits(O.irVersion.low>>>0,O.irVersion.high>>>0).toNumber():O.irVersion),O.producerName!=null&&O.hasOwnProperty("producerName")&&(z.producerName=O.producerName),O.producerVersion!=null&&O.hasOwnProperty("producerVersion")&&(z.producerVersion=O.producerVersion),O.domain!=null&&O.hasOwnProperty("domain")&&(z.domain=O.domain),O.modelVersion!=null&&O.hasOwnProperty("modelVersion")&&(typeof O.modelVersion=="number"?z.modelVersion=L.longs===String?String(O.modelVersion):O.modelVersion:z.modelVersion=L.longs===String?U.Long.prototype.toString.call(O.modelVersion):L.longs===Number?new U.LongBits(O.modelVersion.low>>>0,O.modelVersion.high>>>0).toNumber():O.modelVersion),O.docString!=null&&O.hasOwnProperty("docString")&&(z.docString=O.docString),O.graph!=null&&O.hasOwnProperty("graph")&&(z.graph=V.onnx.GraphProto.toObject(O.graph,L)),O.opsetImport&&O.opsetImport.length){z.opsetImport=[];for(var X=0;X<O.opsetImport.length;++X)z.opsetImport[X]=V.onnx.OperatorSetIdProto.toObject(O.opsetImport[X],L)}if(O.metadataProps&&O.metadataProps.length)for(z.metadataProps=[],X=0;X<O.metadataProps.length;++X)z.metadataProps[X]=V.onnx.StringStringEntryProto.toObject(O.metadataProps[X],L);return z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R.StringStringEntryProto=function(){function D(O){if(O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.key="",D.prototype.value="",D.create=function(O){return new D(O)},D.encode=function(O,L){return L||(L=B.create()),O.key!=null&&O.hasOwnProperty("key")&&L.uint32(10).string(O.key),O.value!=null&&O.hasOwnProperty("value")&&L.uint32(18).string(O.value),L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.StringStringEntryProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.key=O.string();break;case 2:W.value=O.string();break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){return typeof O!="object"||O===null?"object expected":O.key!=null&&O.hasOwnProperty("key")&&!U.isString(O.key)?"key: string expected":O.value!=null&&O.hasOwnProperty("value")&&!U.isString(O.value)?"value: string expected":null},D.fromObject=function(O){if(O instanceof V.onnx.StringStringEntryProto)return O;var L=new V.onnx.StringStringEntryProto;return O.key!=null&&(L.key=String(O.key)),O.value!=null&&(L.value=String(O.value)),L},D.toObject=function(O,L){L||(L={});var z={};return L.defaults&&(z.key="",z.value=""),O.key!=null&&O.hasOwnProperty("key")&&(z.key=O.key),O.value!=null&&O.hasOwnProperty("value")&&(z.value=O.value),z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R.TensorAnnotation=function(){function D(O){if(this.quantParameterTensorNames=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.tensorName="",D.prototype.quantParameterTensorNames=U.emptyArray,D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.tensorName!=null&&O.hasOwnProperty("tensorName")&&L.uint32(10).string(O.tensorName),O.quantParameterTensorNames!=null&&O.quantParameterTensorNames.length)for(var z=0;z<O.quantParameterTensorNames.length;++z)V.onnx.StringStringEntryProto.encode(O.quantParameterTensorNames[z],L.uint32(18).fork()).ldelim();return L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.TensorAnnotation;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.tensorName=O.string();break;case 2:W.quantParameterTensorNames&&W.quantParameterTensorNames.length||(W.quantParameterTensorNames=[]),W.quantParameterTensorNames.push(V.onnx.StringStringEntryProto.decode(O,O.uint32()));break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.tensorName!=null&&O.hasOwnProperty("tensorName")&&!U.isString(O.tensorName))return"tensorName: string expected";if(O.quantParameterTensorNames!=null&&O.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(O.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var L=0;L<O.quantParameterTensorNames.length;++L){var z=V.onnx.StringStringEntryProto.verify(O.quantParameterTensorNames[L]);if(z)return"quantParameterTensorNames."+z}}return null},D.fromObject=function(O){if(O instanceof V.onnx.TensorAnnotation)return O;var L=new V.onnx.TensorAnnotation;if(O.tensorName!=null&&(L.tensorName=String(O.tensorName)),O.quantParameterTensorNames){if(!Array.isArray(O.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");L.quantParameterTensorNames=[];for(var z=0;z<O.quantParameterTensorNames.length;++z){if(typeof O.quantParameterTensorNames[z]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");L.quantParameterTensorNames[z]=V.onnx.StringStringEntryProto.fromObject(O.quantParameterTensorNames[z])}}return L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.quantParameterTensorNames=[]),L.defaults&&(z.tensorName=""),O.tensorName!=null&&O.hasOwnProperty("tensorName")&&(z.tensorName=O.tensorName),O.quantParameterTensorNames&&O.quantParameterTensorNames.length){z.quantParameterTensorNames=[];for(var W=0;W<O.quantParameterTensorNames.length;++W)z.quantParameterTensorNames[W]=V.onnx.StringStringEntryProto.toObject(O.quantParameterTensorNames[W],L)}return z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R.GraphProto=function(){function D(O){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.node=U.emptyArray,D.prototype.name="",D.prototype.initializer=U.emptyArray,D.prototype.docString="",D.prototype.input=U.emptyArray,D.prototype.output=U.emptyArray,D.prototype.valueInfo=U.emptyArray,D.prototype.quantizationAnnotation=U.emptyArray,D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.node!=null&&O.node.length)for(var z=0;z<O.node.length;++z)V.onnx.NodeProto.encode(O.node[z],L.uint32(10).fork()).ldelim();if(O.name!=null&&O.hasOwnProperty("name")&&L.uint32(18).string(O.name),O.initializer!=null&&O.initializer.length)for(z=0;z<O.initializer.length;++z)V.onnx.TensorProto.encode(O.initializer[z],L.uint32(42).fork()).ldelim();if(O.docString!=null&&O.hasOwnProperty("docString")&&L.uint32(82).string(O.docString),O.input!=null&&O.input.length)for(z=0;z<O.input.length;++z)V.onnx.ValueInfoProto.encode(O.input[z],L.uint32(90).fork()).ldelim();if(O.output!=null&&O.output.length)for(z=0;z<O.output.length;++z)V.onnx.ValueInfoProto.encode(O.output[z],L.uint32(98).fork()).ldelim();if(O.valueInfo!=null&&O.valueInfo.length)for(z=0;z<O.valueInfo.length;++z)V.onnx.ValueInfoProto.encode(O.valueInfo[z],L.uint32(106).fork()).ldelim();if(O.quantizationAnnotation!=null&&O.quantizationAnnotation.length)for(z=0;z<O.quantizationAnnotation.length;++z)V.onnx.TensorAnnotation.encode(O.quantizationAnnotation[z],L.uint32(114).fork()).ldelim();return L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.GraphProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.node&&W.node.length||(W.node=[]),W.node.push(V.onnx.NodeProto.decode(O,O.uint32()));break;case 2:W.name=O.string();break;case 5:W.initializer&&W.initializer.length||(W.initializer=[]),W.initializer.push(V.onnx.TensorProto.decode(O,O.uint32()));break;case 10:W.docString=O.string();break;case 11:W.input&&W.input.length||(W.input=[]),W.input.push(V.onnx.ValueInfoProto.decode(O,O.uint32()));break;case 12:W.output&&W.output.length||(W.output=[]),W.output.push(V.onnx.ValueInfoProto.decode(O,O.uint32()));break;case 13:W.valueInfo&&W.valueInfo.length||(W.valueInfo=[]),W.valueInfo.push(V.onnx.ValueInfoProto.decode(O,O.uint32()));break;case 14:W.quantizationAnnotation&&W.quantizationAnnotation.length||(W.quantizationAnnotation=[]),W.quantizationAnnotation.push(V.onnx.TensorAnnotation.decode(O,O.uint32()));break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.node!=null&&O.hasOwnProperty("node")){if(!Array.isArray(O.node))return"node: array expected";for(var L=0;L<O.node.length;++L)if(z=V.onnx.NodeProto.verify(O.node[L]))return"node."+z}if(O.name!=null&&O.hasOwnProperty("name")&&!U.isString(O.name))return"name: string expected";if(O.initializer!=null&&O.hasOwnProperty("initializer")){if(!Array.isArray(O.initializer))return"initializer: array expected";for(L=0;L<O.initializer.length;++L)if(z=V.onnx.TensorProto.verify(O.initializer[L]))return"initializer."+z}if(O.docString!=null&&O.hasOwnProperty("docString")&&!U.isString(O.docString))return"docString: string expected";if(O.input!=null&&O.hasOwnProperty("input")){if(!Array.isArray(O.input))return"input: array expected";for(L=0;L<O.input.length;++L)if(z=V.onnx.ValueInfoProto.verify(O.input[L]))return"input."+z}if(O.output!=null&&O.hasOwnProperty("output")){if(!Array.isArray(O.output))return"output: array expected";for(L=0;L<O.output.length;++L)if(z=V.onnx.ValueInfoProto.verify(O.output[L]))return"output."+z}if(O.valueInfo!=null&&O.hasOwnProperty("valueInfo")){if(!Array.isArray(O.valueInfo))return"valueInfo: array expected";for(L=0;L<O.valueInfo.length;++L)if(z=V.onnx.ValueInfoProto.verify(O.valueInfo[L]))return"valueInfo."+z}if(O.quantizationAnnotation!=null&&O.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(O.quantizationAnnotation))return"quantizationAnnotation: array expected";for(L=0;L<O.quantizationAnnotation.length;++L){var z;if(z=V.onnx.TensorAnnotation.verify(O.quantizationAnnotation[L]))return"quantizationAnnotation."+z}}return null},D.fromObject=function(O){if(O instanceof V.onnx.GraphProto)return O;var L=new V.onnx.GraphProto;if(O.node){if(!Array.isArray(O.node))throw TypeError(".onnx.GraphProto.node: array expected");L.node=[];for(var z=0;z<O.node.length;++z){if(typeof O.node[z]!="object")throw TypeError(".onnx.GraphProto.node: object expected");L.node[z]=V.onnx.NodeProto.fromObject(O.node[z])}}if(O.name!=null&&(L.name=String(O.name)),O.initializer){if(!Array.isArray(O.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(L.initializer=[],z=0;z<O.initializer.length;++z){if(typeof O.initializer[z]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");L.initializer[z]=V.onnx.TensorProto.fromObject(O.initializer[z])}}if(O.docString!=null&&(L.docString=String(O.docString)),O.input){if(!Array.isArray(O.input))throw TypeError(".onnx.GraphProto.input: array expected");for(L.input=[],z=0;z<O.input.length;++z){if(typeof O.input[z]!="object")throw TypeError(".onnx.GraphProto.input: object expected");L.input[z]=V.onnx.ValueInfoProto.fromObject(O.input[z])}}if(O.output){if(!Array.isArray(O.output))throw TypeError(".onnx.GraphProto.output: array expected");for(L.output=[],z=0;z<O.output.length;++z){if(typeof O.output[z]!="object")throw TypeError(".onnx.GraphProto.output: object expected");L.output[z]=V.onnx.ValueInfoProto.fromObject(O.output[z])}}if(O.valueInfo){if(!Array.isArray(O.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(L.valueInfo=[],z=0;z<O.valueInfo.length;++z){if(typeof O.valueInfo[z]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");L.valueInfo[z]=V.onnx.ValueInfoProto.fromObject(O.valueInfo[z])}}if(O.quantizationAnnotation){if(!Array.isArray(O.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(L.quantizationAnnotation=[],z=0;z<O.quantizationAnnotation.length;++z){if(typeof O.quantizationAnnotation[z]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");L.quantizationAnnotation[z]=V.onnx.TensorAnnotation.fromObject(O.quantizationAnnotation[z])}}return L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.node=[],z.initializer=[],z.input=[],z.output=[],z.valueInfo=[],z.quantizationAnnotation=[]),L.defaults&&(z.name="",z.docString=""),O.node&&O.node.length){z.node=[];for(var W=0;W<O.node.length;++W)z.node[W]=V.onnx.NodeProto.toObject(O.node[W],L)}if(O.name!=null&&O.hasOwnProperty("name")&&(z.name=O.name),O.initializer&&O.initializer.length)for(z.initializer=[],W=0;W<O.initializer.length;++W)z.initializer[W]=V.onnx.TensorProto.toObject(O.initializer[W],L);if(O.docString!=null&&O.hasOwnProperty("docString")&&(z.docString=O.docString),O.input&&O.input.length)for(z.input=[],W=0;W<O.input.length;++W)z.input[W]=V.onnx.ValueInfoProto.toObject(O.input[W],L);if(O.output&&O.output.length)for(z.output=[],W=0;W<O.output.length;++W)z.output[W]=V.onnx.ValueInfoProto.toObject(O.output[W],L);if(O.valueInfo&&O.valueInfo.length)for(z.valueInfo=[],W=0;W<O.valueInfo.length;++W)z.valueInfo[W]=V.onnx.ValueInfoProto.toObject(O.valueInfo[W],L);if(O.quantizationAnnotation&&O.quantizationAnnotation.length)for(z.quantizationAnnotation=[],W=0;W<O.quantizationAnnotation.length;++W)z.quantizationAnnotation[W]=V.onnx.TensorAnnotation.toObject(O.quantizationAnnotation[W],L);return z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R.TensorProto=function(){function D(O){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.dims=U.emptyArray,D.prototype.dataType=0,D.prototype.segment=null,D.prototype.floatData=U.emptyArray,D.prototype.int32Data=U.emptyArray,D.prototype.stringData=U.emptyArray,D.prototype.int64Data=U.emptyArray,D.prototype.name="",D.prototype.docString="",D.prototype.rawData=U.newBuffer([]),D.prototype.externalData=U.emptyArray,D.prototype.dataLocation=0,D.prototype.doubleData=U.emptyArray,D.prototype.uint64Data=U.emptyArray,D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.dims!=null&&O.dims.length){L.uint32(10).fork();for(var z=0;z<O.dims.length;++z)L.int64(O.dims[z]);L.ldelim()}if(O.dataType!=null&&O.hasOwnProperty("dataType")&&L.uint32(16).int32(O.dataType),O.segment!=null&&O.hasOwnProperty("segment")&&V.onnx.TensorProto.Segment.encode(O.segment,L.uint32(26).fork()).ldelim(),O.floatData!=null&&O.floatData.length){for(L.uint32(34).fork(),z=0;z<O.floatData.length;++z)L.float(O.floatData[z]);L.ldelim()}if(O.int32Data!=null&&O.int32Data.length){for(L.uint32(42).fork(),z=0;z<O.int32Data.length;++z)L.int32(O.int32Data[z]);L.ldelim()}if(O.stringData!=null&&O.stringData.length)for(z=0;z<O.stringData.length;++z)L.uint32(50).bytes(O.stringData[z]);if(O.int64Data!=null&&O.int64Data.length){for(L.uint32(58).fork(),z=0;z<O.int64Data.length;++z)L.int64(O.int64Data[z]);L.ldelim()}if(O.name!=null&&O.hasOwnProperty("name")&&L.uint32(66).string(O.name),O.rawData!=null&&O.hasOwnProperty("rawData")&&L.uint32(74).bytes(O.rawData),O.doubleData!=null&&O.doubleData.length){for(L.uint32(82).fork(),z=0;z<O.doubleData.length;++z)L.double(O.doubleData[z]);L.ldelim()}if(O.uint64Data!=null&&O.uint64Data.length){for(L.uint32(90).fork(),z=0;z<O.uint64Data.length;++z)L.uint64(O.uint64Data[z]);L.ldelim()}if(O.docString!=null&&O.hasOwnProperty("docString")&&L.uint32(98).string(O.docString),O.externalData!=null&&O.externalData.length)for(z=0;z<O.externalData.length;++z)V.onnx.StringStringEntryProto.encode(O.externalData[z],L.uint32(106).fork()).ldelim();return O.dataLocation!=null&&O.hasOwnProperty("dataLocation")&&L.uint32(112).int32(O.dataLocation),L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.TensorProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:if(W.dims&&W.dims.length||(W.dims=[]),(7&X)==2)for(var Y=O.uint32()+O.pos;O.pos<Y;)W.dims.push(O.int64());else W.dims.push(O.int64());break;case 2:W.dataType=O.int32();break;case 3:W.segment=V.onnx.TensorProto.Segment.decode(O,O.uint32());break;case 4:if(W.floatData&&W.floatData.length||(W.floatData=[]),(7&X)==2)for(Y=O.uint32()+O.pos;O.pos<Y;)W.floatData.push(O.float());else W.floatData.push(O.float());break;case 5:if(W.int32Data&&W.int32Data.length||(W.int32Data=[]),(7&X)==2)for(Y=O.uint32()+O.pos;O.pos<Y;)W.int32Data.push(O.int32());else W.int32Data.push(O.int32());break;case 6:W.stringData&&W.stringData.length||(W.stringData=[]),W.stringData.push(O.bytes());break;case 7:if(W.int64Data&&W.int64Data.length||(W.int64Data=[]),(7&X)==2)for(Y=O.uint32()+O.pos;O.pos<Y;)W.int64Data.push(O.int64());else W.int64Data.push(O.int64());break;case 8:W.name=O.string();break;case 12:W.docString=O.string();break;case 9:W.rawData=O.bytes();break;case 13:W.externalData&&W.externalData.length||(W.externalData=[]),W.externalData.push(V.onnx.StringStringEntryProto.decode(O,O.uint32()));break;case 14:W.dataLocation=O.int32();break;case 10:if(W.doubleData&&W.doubleData.length||(W.doubleData=[]),(7&X)==2)for(Y=O.uint32()+O.pos;O.pos<Y;)W.doubleData.push(O.double());else W.doubleData.push(O.double());break;case 11:if(W.uint64Data&&W.uint64Data.length||(W.uint64Data=[]),(7&X)==2)for(Y=O.uint32()+O.pos;O.pos<Y;)W.uint64Data.push(O.uint64());else W.uint64Data.push(O.uint64());break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.dims!=null&&O.hasOwnProperty("dims")){if(!Array.isArray(O.dims))return"dims: array expected";for(var L=0;L<O.dims.length;++L)if(!(U.isInteger(O.dims[L])||O.dims[L]&&U.isInteger(O.dims[L].low)&&U.isInteger(O.dims[L].high)))return"dims: integer|Long[] expected"}if(O.dataType!=null&&O.hasOwnProperty("dataType")&&!U.isInteger(O.dataType))return"dataType: integer expected";if(O.segment!=null&&O.hasOwnProperty("segment")&&(z=V.onnx.TensorProto.Segment.verify(O.segment)))return"segment."+z;if(O.floatData!=null&&O.hasOwnProperty("floatData")){if(!Array.isArray(O.floatData))return"floatData: array expected";for(L=0;L<O.floatData.length;++L)if(typeof O.floatData[L]!="number")return"floatData: number[] expected"}if(O.int32Data!=null&&O.hasOwnProperty("int32Data")){if(!Array.isArray(O.int32Data))return"int32Data: array expected";for(L=0;L<O.int32Data.length;++L)if(!U.isInteger(O.int32Data[L]))return"int32Data: integer[] expected"}if(O.stringData!=null&&O.hasOwnProperty("stringData")){if(!Array.isArray(O.stringData))return"stringData: array expected";for(L=0;L<O.stringData.length;++L)if(!(O.stringData[L]&&typeof O.stringData[L].length=="number"||U.isString(O.stringData[L])))return"stringData: buffer[] expected"}if(O.int64Data!=null&&O.hasOwnProperty("int64Data")){if(!Array.isArray(O.int64Data))return"int64Data: array expected";for(L=0;L<O.int64Data.length;++L)if(!(U.isInteger(O.int64Data[L])||O.int64Data[L]&&U.isInteger(O.int64Data[L].low)&&U.isInteger(O.int64Data[L].high)))return"int64Data: integer|Long[] expected"}if(O.name!=null&&O.hasOwnProperty("name")&&!U.isString(O.name))return"name: string expected";if(O.docString!=null&&O.hasOwnProperty("docString")&&!U.isString(O.docString))return"docString: string expected";if(O.rawData!=null&&O.hasOwnProperty("rawData")&&!(O.rawData&&typeof O.rawData.length=="number"||U.isString(O.rawData)))return"rawData: buffer expected";if(O.externalData!=null&&O.hasOwnProperty("externalData")){if(!Array.isArray(O.externalData))return"externalData: array expected";for(L=0;L<O.externalData.length;++L){var z;if(z=V.onnx.StringStringEntryProto.verify(O.externalData[L]))return"externalData."+z}}if(O.dataLocation!=null&&O.hasOwnProperty("dataLocation"))switch(O.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(O.doubleData!=null&&O.hasOwnProperty("doubleData")){if(!Array.isArray(O.doubleData))return"doubleData: array expected";for(L=0;L<O.doubleData.length;++L)if(typeof O.doubleData[L]!="number")return"doubleData: number[] expected"}if(O.uint64Data!=null&&O.hasOwnProperty("uint64Data")){if(!Array.isArray(O.uint64Data))return"uint64Data: array expected";for(L=0;L<O.uint64Data.length;++L)if(!(U.isInteger(O.uint64Data[L])||O.uint64Data[L]&&U.isInteger(O.uint64Data[L].low)&&U.isInteger(O.uint64Data[L].high)))return"uint64Data: integer|Long[] expected"}return null},D.fromObject=function(O){if(O instanceof V.onnx.TensorProto)return O;var L=new V.onnx.TensorProto;if(O.dims){if(!Array.isArray(O.dims))throw TypeError(".onnx.TensorProto.dims: array expected");L.dims=[];for(var z=0;z<O.dims.length;++z)U.Long?(L.dims[z]=U.Long.fromValue(O.dims[z])).unsigned=!1:typeof O.dims[z]=="string"?L.dims[z]=parseInt(O.dims[z],10):typeof O.dims[z]=="number"?L.dims[z]=O.dims[z]:typeof O.dims[z]=="object"&&(L.dims[z]=new U.LongBits(O.dims[z].low>>>0,O.dims[z].high>>>0).toNumber())}if(O.dataType!=null&&(L.dataType=0|O.dataType),O.segment!=null){if(typeof O.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");L.segment=V.onnx.TensorProto.Segment.fromObject(O.segment)}if(O.floatData){if(!Array.isArray(O.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(L.floatData=[],z=0;z<O.floatData.length;++z)L.floatData[z]=Number(O.floatData[z])}if(O.int32Data){if(!Array.isArray(O.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(L.int32Data=[],z=0;z<O.int32Data.length;++z)L.int32Data[z]=0|O.int32Data[z]}if(O.stringData){if(!Array.isArray(O.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(L.stringData=[],z=0;z<O.stringData.length;++z)typeof O.stringData[z]=="string"?U.base64.decode(O.stringData[z],L.stringData[z]=U.newBuffer(U.base64.length(O.stringData[z])),0):O.stringData[z].length&&(L.stringData[z]=O.stringData[z])}if(O.int64Data){if(!Array.isArray(O.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(L.int64Data=[],z=0;z<O.int64Data.length;++z)U.Long?(L.int64Data[z]=U.Long.fromValue(O.int64Data[z])).unsigned=!1:typeof O.int64Data[z]=="string"?L.int64Data[z]=parseInt(O.int64Data[z],10):typeof O.int64Data[z]=="number"?L.int64Data[z]=O.int64Data[z]:typeof O.int64Data[z]=="object"&&(L.int64Data[z]=new U.LongBits(O.int64Data[z].low>>>0,O.int64Data[z].high>>>0).toNumber())}if(O.name!=null&&(L.name=String(O.name)),O.docString!=null&&(L.docString=String(O.docString)),O.rawData!=null&&(typeof O.rawData=="string"?U.base64.decode(O.rawData,L.rawData=U.newBuffer(U.base64.length(O.rawData)),0):O.rawData.length&&(L.rawData=O.rawData)),O.externalData){if(!Array.isArray(O.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(L.externalData=[],z=0;z<O.externalData.length;++z){if(typeof O.externalData[z]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");L.externalData[z]=V.onnx.StringStringEntryProto.fromObject(O.externalData[z])}}switch(O.dataLocation){case"DEFAULT":case 0:L.dataLocation=0;break;case"EXTERNAL":case 1:L.dataLocation=1}if(O.doubleData){if(!Array.isArray(O.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(L.doubleData=[],z=0;z<O.doubleData.length;++z)L.doubleData[z]=Number(O.doubleData[z])}if(O.uint64Data){if(!Array.isArray(O.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(L.uint64Data=[],z=0;z<O.uint64Data.length;++z)U.Long?(L.uint64Data[z]=U.Long.fromValue(O.uint64Data[z])).unsigned=!0:typeof O.uint64Data[z]=="string"?L.uint64Data[z]=parseInt(O.uint64Data[z],10):typeof O.uint64Data[z]=="number"?L.uint64Data[z]=O.uint64Data[z]:typeof O.uint64Data[z]=="object"&&(L.uint64Data[z]=new U.LongBits(O.uint64Data[z].low>>>0,O.uint64Data[z].high>>>0).toNumber(!0))}return L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.dims=[],z.floatData=[],z.int32Data=[],z.stringData=[],z.int64Data=[],z.doubleData=[],z.uint64Data=[],z.externalData=[]),L.defaults&&(z.dataType=0,z.segment=null,z.name="",L.bytes===String?z.rawData="":(z.rawData=[],L.bytes!==Array&&(z.rawData=U.newBuffer(z.rawData))),z.docString="",z.dataLocation=L.enums===String?"DEFAULT":0),O.dims&&O.dims.length){z.dims=[];for(var W=0;W<O.dims.length;++W)typeof O.dims[W]=="number"?z.dims[W]=L.longs===String?String(O.dims[W]):O.dims[W]:z.dims[W]=L.longs===String?U.Long.prototype.toString.call(O.dims[W]):L.longs===Number?new U.LongBits(O.dims[W].low>>>0,O.dims[W].high>>>0).toNumber():O.dims[W]}if(O.dataType!=null&&O.hasOwnProperty("dataType")&&(z.dataType=O.dataType),O.segment!=null&&O.hasOwnProperty("segment")&&(z.segment=V.onnx.TensorProto.Segment.toObject(O.segment,L)),O.floatData&&O.floatData.length)for(z.floatData=[],W=0;W<O.floatData.length;++W)z.floatData[W]=L.json&&!isFinite(O.floatData[W])?String(O.floatData[W]):O.floatData[W];if(O.int32Data&&O.int32Data.length)for(z.int32Data=[],W=0;W<O.int32Data.length;++W)z.int32Data[W]=O.int32Data[W];if(O.stringData&&O.stringData.length)for(z.stringData=[],W=0;W<O.stringData.length;++W)z.stringData[W]=L.bytes===String?U.base64.encode(O.stringData[W],0,O.stringData[W].length):L.bytes===Array?Array.prototype.slice.call(O.stringData[W]):O.stringData[W];if(O.int64Data&&O.int64Data.length)for(z.int64Data=[],W=0;W<O.int64Data.length;++W)typeof O.int64Data[W]=="number"?z.int64Data[W]=L.longs===String?String(O.int64Data[W]):O.int64Data[W]:z.int64Data[W]=L.longs===String?U.Long.prototype.toString.call(O.int64Data[W]):L.longs===Number?new U.LongBits(O.int64Data[W].low>>>0,O.int64Data[W].high>>>0).toNumber():O.int64Data[W];if(O.name!=null&&O.hasOwnProperty("name")&&(z.name=O.name),O.rawData!=null&&O.hasOwnProperty("rawData")&&(z.rawData=L.bytes===String?U.base64.encode(O.rawData,0,O.rawData.length):L.bytes===Array?Array.prototype.slice.call(O.rawData):O.rawData),O.doubleData&&O.doubleData.length)for(z.doubleData=[],W=0;W<O.doubleData.length;++W)z.doubleData[W]=L.json&&!isFinite(O.doubleData[W])?String(O.doubleData[W]):O.doubleData[W];if(O.uint64Data&&O.uint64Data.length)for(z.uint64Data=[],W=0;W<O.uint64Data.length;++W)typeof O.uint64Data[W]=="number"?z.uint64Data[W]=L.longs===String?String(O.uint64Data[W]):O.uint64Data[W]:z.uint64Data[W]=L.longs===String?U.Long.prototype.toString.call(O.uint64Data[W]):L.longs===Number?new U.LongBits(O.uint64Data[W].low>>>0,O.uint64Data[W].high>>>0).toNumber(!0):O.uint64Data[W];if(O.docString!=null&&O.hasOwnProperty("docString")&&(z.docString=O.docString),O.externalData&&O.externalData.length)for(z.externalData=[],W=0;W<O.externalData.length;++W)z.externalData[W]=V.onnx.StringStringEntryProto.toObject(O.externalData[W],L);return O.dataLocation!=null&&O.hasOwnProperty("dataLocation")&&(z.dataLocation=L.enums===String?V.onnx.TensorProto.DataLocation[O.dataLocation]:O.dataLocation),z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D.DataType=function(){var O={},L=Object.create(O);return L[O[0]="UNDEFINED"]=0,L[O[1]="FLOAT"]=1,L[O[2]="UINT8"]=2,L[O[3]="INT8"]=3,L[O[4]="UINT16"]=4,L[O[5]="INT16"]=5,L[O[6]="INT32"]=6,L[O[7]="INT64"]=7,L[O[8]="STRING"]=8,L[O[9]="BOOL"]=9,L[O[10]="FLOAT16"]=10,L[O[11]="DOUBLE"]=11,L[O[12]="UINT32"]=12,L[O[13]="UINT64"]=13,L[O[14]="COMPLEX64"]=14,L[O[15]="COMPLEX128"]=15,L[O[16]="BFLOAT16"]=16,L}(),D.Segment=function(){function O(L){if(L)for(var z=Object.keys(L),W=0;W<z.length;++W)L[z[W]]!=null&&(this[z[W]]=L[z[W]])}return O.prototype.begin=U.Long?U.Long.fromBits(0,0,!1):0,O.prototype.end=U.Long?U.Long.fromBits(0,0,!1):0,O.create=function(L){return new O(L)},O.encode=function(L,z){return z||(z=B.create()),L.begin!=null&&L.hasOwnProperty("begin")&&z.uint32(8).int64(L.begin),L.end!=null&&L.hasOwnProperty("end")&&z.uint32(16).int64(L.end),z},O.encodeDelimited=function(L,z){return this.encode(L,z).ldelim()},O.decode=function(L,z){L instanceof F||(L=F.create(L));for(var W=z===void 0?L.len:L.pos+z,X=new V.onnx.TensorProto.Segment;L.pos<W;){var Y=L.uint32();switch(Y>>>3){case 1:X.begin=L.int64();break;case 2:X.end=L.int64();break;default:L.skipType(7&Y)}}return X},O.decodeDelimited=function(L){return L instanceof F||(L=new F(L)),this.decode(L,L.uint32())},O.verify=function(L){return typeof L!="object"||L===null?"object expected":L.begin!=null&&L.hasOwnProperty("begin")&&!(U.isInteger(L.begin)||L.begin&&U.isInteger(L.begin.low)&&U.isInteger(L.begin.high))?"begin: integer|Long expected":L.end!=null&&L.hasOwnProperty("end")&&!(U.isInteger(L.end)||L.end&&U.isInteger(L.end.low)&&U.isInteger(L.end.high))?"end: integer|Long expected":null},O.fromObject=function(L){if(L instanceof V.onnx.TensorProto.Segment)return L;var z=new V.onnx.TensorProto.Segment;return L.begin!=null&&(U.Long?(z.begin=U.Long.fromValue(L.begin)).unsigned=!1:typeof L.begin=="string"?z.begin=parseInt(L.begin,10):typeof L.begin=="number"?z.begin=L.begin:typeof L.begin=="object"&&(z.begin=new U.LongBits(L.begin.low>>>0,L.begin.high>>>0).toNumber())),L.end!=null&&(U.Long?(z.end=U.Long.fromValue(L.end)).unsigned=!1:typeof L.end=="string"?z.end=parseInt(L.end,10):typeof L.end=="number"?z.end=L.end:typeof L.end=="object"&&(z.end=new U.LongBits(L.end.low>>>0,L.end.high>>>0).toNumber())),z},O.toObject=function(L,z){z||(z={});var W={};if(z.defaults){if(U.Long){var X=new U.Long(0,0,!1);W.begin=z.longs===String?X.toString():z.longs===Number?X.toNumber():X}else W.begin=z.longs===String?"0":0;U.Long?(X=new U.Long(0,0,!1),W.end=z.longs===String?X.toString():z.longs===Number?X.toNumber():X):W.end=z.longs===String?"0":0}return L.begin!=null&&L.hasOwnProperty("begin")&&(typeof L.begin=="number"?W.begin=z.longs===String?String(L.begin):L.begin:W.begin=z.longs===String?U.Long.prototype.toString.call(L.begin):z.longs===Number?new U.LongBits(L.begin.low>>>0,L.begin.high>>>0).toNumber():L.begin),L.end!=null&&L.hasOwnProperty("end")&&(typeof L.end=="number"?W.end=z.longs===String?String(L.end):L.end:W.end=z.longs===String?U.Long.prototype.toString.call(L.end):z.longs===Number?new U.LongBits(L.end.low>>>0,L.end.high>>>0).toNumber():L.end),W},O.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},O}(),D.DataLocation=function(){var O={},L=Object.create(O);return L[O[0]="DEFAULT"]=0,L[O[1]="EXTERNAL"]=1,L}(),D}(),R.TensorShapeProto=function(){function D(O){if(this.dim=[],O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.dim=U.emptyArray,D.create=function(O){return new D(O)},D.encode=function(O,L){if(L||(L=B.create()),O.dim!=null&&O.dim.length)for(var z=0;z<O.dim.length;++z)V.onnx.TensorShapeProto.Dimension.encode(O.dim[z],L.uint32(10).fork()).ldelim();return L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.TensorShapeProto;O.pos<z;){var X=O.uint32();X>>>3==1?(W.dim&&W.dim.length||(W.dim=[]),W.dim.push(V.onnx.TensorShapeProto.Dimension.decode(O,O.uint32()))):O.skipType(7&X)}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){if(typeof O!="object"||O===null)return"object expected";if(O.dim!=null&&O.hasOwnProperty("dim")){if(!Array.isArray(O.dim))return"dim: array expected";for(var L=0;L<O.dim.length;++L){var z=V.onnx.TensorShapeProto.Dimension.verify(O.dim[L]);if(z)return"dim."+z}}return null},D.fromObject=function(O){if(O instanceof V.onnx.TensorShapeProto)return O;var L=new V.onnx.TensorShapeProto;if(O.dim){if(!Array.isArray(O.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");L.dim=[];for(var z=0;z<O.dim.length;++z){if(typeof O.dim[z]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");L.dim[z]=V.onnx.TensorShapeProto.Dimension.fromObject(O.dim[z])}}return L},D.toObject=function(O,L){L||(L={});var z={};if((L.arrays||L.defaults)&&(z.dim=[]),O.dim&&O.dim.length){z.dim=[];for(var W=0;W<O.dim.length;++W)z.dim[W]=V.onnx.TensorShapeProto.Dimension.toObject(O.dim[W],L)}return z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D.Dimension=function(){function O(z){if(z)for(var W=Object.keys(z),X=0;X<W.length;++X)z[W[X]]!=null&&(this[W[X]]=z[W[X]])}var L;return O.prototype.dimValue=U.Long?U.Long.fromBits(0,0,!1):0,O.prototype.dimParam="",O.prototype.denotation="",Object.defineProperty(O.prototype,"value",{get:U.oneOfGetter(L=["dimValue","dimParam"]),set:U.oneOfSetter(L)}),O.create=function(z){return new O(z)},O.encode=function(z,W){return W||(W=B.create()),z.dimValue!=null&&z.hasOwnProperty("dimValue")&&W.uint32(8).int64(z.dimValue),z.dimParam!=null&&z.hasOwnProperty("dimParam")&&W.uint32(18).string(z.dimParam),z.denotation!=null&&z.hasOwnProperty("denotation")&&W.uint32(26).string(z.denotation),W},O.encodeDelimited=function(z,W){return this.encode(z,W).ldelim()},O.decode=function(z,W){z instanceof F||(z=F.create(z));for(var X=W===void 0?z.len:z.pos+W,Y=new V.onnx.TensorShapeProto.Dimension;z.pos<X;){var K=z.uint32();switch(K>>>3){case 1:Y.dimValue=z.int64();break;case 2:Y.dimParam=z.string();break;case 3:Y.denotation=z.string();break;default:z.skipType(7&K)}}return Y},O.decodeDelimited=function(z){return z instanceof F||(z=new F(z)),this.decode(z,z.uint32())},O.verify=function(z){if(typeof z!="object"||z===null)return"object expected";var W={};if(z.dimValue!=null&&z.hasOwnProperty("dimValue")&&(W.value=1,!(U.isInteger(z.dimValue)||z.dimValue&&U.isInteger(z.dimValue.low)&&U.isInteger(z.dimValue.high))))return"dimValue: integer|Long expected";if(z.dimParam!=null&&z.hasOwnProperty("dimParam")){if(W.value===1)return"value: multiple values";if(W.value=1,!U.isString(z.dimParam))return"dimParam: string expected"}return z.denotation!=null&&z.hasOwnProperty("denotation")&&!U.isString(z.denotation)?"denotation: string expected":null},O.fromObject=function(z){if(z instanceof V.onnx.TensorShapeProto.Dimension)return z;var W=new V.onnx.TensorShapeProto.Dimension;return z.dimValue!=null&&(U.Long?(W.dimValue=U.Long.fromValue(z.dimValue)).unsigned=!1:typeof z.dimValue=="string"?W.dimValue=parseInt(z.dimValue,10):typeof z.dimValue=="number"?W.dimValue=z.dimValue:typeof z.dimValue=="object"&&(W.dimValue=new U.LongBits(z.dimValue.low>>>0,z.dimValue.high>>>0).toNumber())),z.dimParam!=null&&(W.dimParam=String(z.dimParam)),z.denotation!=null&&(W.denotation=String(z.denotation)),W},O.toObject=function(z,W){W||(W={});var X={};return W.defaults&&(X.denotation=""),z.dimValue!=null&&z.hasOwnProperty("dimValue")&&(typeof z.dimValue=="number"?X.dimValue=W.longs===String?String(z.dimValue):z.dimValue:X.dimValue=W.longs===String?U.Long.prototype.toString.call(z.dimValue):W.longs===Number?new U.LongBits(z.dimValue.low>>>0,z.dimValue.high>>>0).toNumber():z.dimValue,W.oneofs&&(X.value="dimValue")),z.dimParam!=null&&z.hasOwnProperty("dimParam")&&(X.dimParam=z.dimParam,W.oneofs&&(X.value="dimParam")),z.denotation!=null&&z.hasOwnProperty("denotation")&&(X.denotation=z.denotation),X},O.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},O}(),D}(),R.TypeProto=function(){function D(L){if(L)for(var z=Object.keys(L),W=0;W<z.length;++W)L[z[W]]!=null&&(this[z[W]]=L[z[W]])}var O;return D.prototype.tensorType=null,D.prototype.denotation="",Object.defineProperty(D.prototype,"value",{get:U.oneOfGetter(O=["tensorType"]),set:U.oneOfSetter(O)}),D.create=function(L){return new D(L)},D.encode=function(L,z){return z||(z=B.create()),L.tensorType!=null&&L.hasOwnProperty("tensorType")&&V.onnx.TypeProto.Tensor.encode(L.tensorType,z.uint32(10).fork()).ldelim(),L.denotation!=null&&L.hasOwnProperty("denotation")&&z.uint32(50).string(L.denotation),z},D.encodeDelimited=function(L,z){return this.encode(L,z).ldelim()},D.decode=function(L,z){L instanceof F||(L=F.create(L));for(var W=z===void 0?L.len:L.pos+z,X=new V.onnx.TypeProto;L.pos<W;){var Y=L.uint32();switch(Y>>>3){case 1:X.tensorType=V.onnx.TypeProto.Tensor.decode(L,L.uint32());break;case 6:X.denotation=L.string();break;default:L.skipType(7&Y)}}return X},D.decodeDelimited=function(L){return L instanceof F||(L=new F(L)),this.decode(L,L.uint32())},D.verify=function(L){if(typeof L!="object"||L===null)return"object expected";if(L.tensorType!=null&&L.hasOwnProperty("tensorType")){var z=V.onnx.TypeProto.Tensor.verify(L.tensorType);if(z)return"tensorType."+z}return L.denotation!=null&&L.hasOwnProperty("denotation")&&!U.isString(L.denotation)?"denotation: string expected":null},D.fromObject=function(L){if(L instanceof V.onnx.TypeProto)return L;var z=new V.onnx.TypeProto;if(L.tensorType!=null){if(typeof L.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");z.tensorType=V.onnx.TypeProto.Tensor.fromObject(L.tensorType)}return L.denotation!=null&&(z.denotation=String(L.denotation)),z},D.toObject=function(L,z){z||(z={});var W={};return z.defaults&&(W.denotation=""),L.tensorType!=null&&L.hasOwnProperty("tensorType")&&(W.tensorType=V.onnx.TypeProto.Tensor.toObject(L.tensorType,z),z.oneofs&&(W.value="tensorType")),L.denotation!=null&&L.hasOwnProperty("denotation")&&(W.denotation=L.denotation),W},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D.Tensor=function(){function L(z){if(z)for(var W=Object.keys(z),X=0;X<W.length;++X)z[W[X]]!=null&&(this[W[X]]=z[W[X]])}return L.prototype.elemType=0,L.prototype.shape=null,L.create=function(z){return new L(z)},L.encode=function(z,W){return W||(W=B.create()),z.elemType!=null&&z.hasOwnProperty("elemType")&&W.uint32(8).int32(z.elemType),z.shape!=null&&z.hasOwnProperty("shape")&&V.onnx.TensorShapeProto.encode(z.shape,W.uint32(18).fork()).ldelim(),W},L.encodeDelimited=function(z,W){return this.encode(z,W).ldelim()},L.decode=function(z,W){z instanceof F||(z=F.create(z));for(var X=W===void 0?z.len:z.pos+W,Y=new V.onnx.TypeProto.Tensor;z.pos<X;){var K=z.uint32();switch(K>>>3){case 1:Y.elemType=z.int32();break;case 2:Y.shape=V.onnx.TensorShapeProto.decode(z,z.uint32());break;default:z.skipType(7&K)}}return Y},L.decodeDelimited=function(z){return z instanceof F||(z=new F(z)),this.decode(z,z.uint32())},L.verify=function(z){if(typeof z!="object"||z===null)return"object expected";if(z.elemType!=null&&z.hasOwnProperty("elemType")&&!U.isInteger(z.elemType))return"elemType: integer expected";if(z.shape!=null&&z.hasOwnProperty("shape")){var W=V.onnx.TensorShapeProto.verify(z.shape);if(W)return"shape."+W}return null},L.fromObject=function(z){if(z instanceof V.onnx.TypeProto.Tensor)return z;var W=new V.onnx.TypeProto.Tensor;if(z.elemType!=null&&(W.elemType=0|z.elemType),z.shape!=null){if(typeof z.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");W.shape=V.onnx.TensorShapeProto.fromObject(z.shape)}return W},L.toObject=function(z,W){W||(W={});var X={};return W.defaults&&(X.elemType=0,X.shape=null),z.elemType!=null&&z.hasOwnProperty("elemType")&&(X.elemType=z.elemType),z.shape!=null&&z.hasOwnProperty("shape")&&(X.shape=V.onnx.TensorShapeProto.toObject(z.shape,W)),X},L.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},L}(),D}(),R.OperatorSetIdProto=function(){function D(O){if(O)for(var L=Object.keys(O),z=0;z<L.length;++z)O[L[z]]!=null&&(this[L[z]]=O[L[z]])}return D.prototype.domain="",D.prototype.version=U.Long?U.Long.fromBits(0,0,!1):0,D.create=function(O){return new D(O)},D.encode=function(O,L){return L||(L=B.create()),O.domain!=null&&O.hasOwnProperty("domain")&&L.uint32(10).string(O.domain),O.version!=null&&O.hasOwnProperty("version")&&L.uint32(16).int64(O.version),L},D.encodeDelimited=function(O,L){return this.encode(O,L).ldelim()},D.decode=function(O,L){O instanceof F||(O=F.create(O));for(var z=L===void 0?O.len:O.pos+L,W=new V.onnx.OperatorSetIdProto;O.pos<z;){var X=O.uint32();switch(X>>>3){case 1:W.domain=O.string();break;case 2:W.version=O.int64();break;default:O.skipType(7&X)}}return W},D.decodeDelimited=function(O){return O instanceof F||(O=new F(O)),this.decode(O,O.uint32())},D.verify=function(O){return typeof O!="object"||O===null?"object expected":O.domain!=null&&O.hasOwnProperty("domain")&&!U.isString(O.domain)?"domain: string expected":O.version!=null&&O.hasOwnProperty("version")&&!(U.isInteger(O.version)||O.version&&U.isInteger(O.version.low)&&U.isInteger(O.version.high))?"version: integer|Long expected":null},D.fromObject=function(O){if(O instanceof V.onnx.OperatorSetIdProto)return O;var L=new V.onnx.OperatorSetIdProto;return O.domain!=null&&(L.domain=String(O.domain)),O.version!=null&&(U.Long?(L.version=U.Long.fromValue(O.version)).unsigned=!1:typeof O.version=="string"?L.version=parseInt(O.version,10):typeof O.version=="number"?L.version=O.version:typeof O.version=="object"&&(L.version=new U.LongBits(O.version.low>>>0,O.version.high>>>0).toNumber())),L},D.toObject=function(O,L){L||(L={});var z={};if(L.defaults)if(z.domain="",U.Long){var W=new U.Long(0,0,!1);z.version=L.longs===String?W.toString():L.longs===Number?W.toNumber():W}else z.version=L.longs===String?"0":0;return O.domain!=null&&O.hasOwnProperty("domain")&&(z.domain=O.domain),O.version!=null&&O.hasOwnProperty("version")&&(typeof O.version=="number"?z.version=L.longs===String?String(O.version):O.version:z.version=L.longs===String?U.Long.prototype.toString.call(O.version):L.longs===Number?new U.LongBits(O.version.low>>>0,O.version.high>>>0).toNumber():O.version),z},D.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},D}(),R),T.exports=V},2100:(T,_,E)=>{T.exports=E(9482)},9482:(T,_,E)=>{var C=_;function A(){C.util._configure(),C.Writer._configure(C.BufferWriter),C.Reader._configure(C.BufferReader)}C.build="minimal",C.Writer=E(1173),C.BufferWriter=E(3155),C.Reader=E(1408),C.BufferReader=E(593),C.util=E(9693),C.rpc=E(5994),C.roots=E(5054),C.configure=A,A()},1408:(T,_,E)=>{T.exports=B;var C,A=E(9693),R=A.LongBits,I=A.utf8;function F(W,X){return RangeError("index out of range: "+W.pos+" + "+(X||1)+" > "+W.len)}function B(W){this.buf=W,this.pos=0,this.len=W.length}var U,V=typeof Uint8Array<"u"?function(W){if(W instanceof Uint8Array||Array.isArray(W))return new B(W);throw Error("illegal buffer")}:function(W){if(Array.isArray(W))return new B(W);throw Error("illegal buffer")},D=function(){return A.Buffer?function(W){return(B.create=function(X){return A.Buffer.isBuffer(X)?new C(X):V(X)})(W)}:V};function O(){var W=new R(0,0),X=0;if(!(this.len-this.pos>4)){for(;X<3;++X){if(this.pos>=this.len)throw F(this);if(W.lo=(W.lo|(127&this.buf[this.pos])<<7*X)>>>0,this.buf[this.pos++]<128)return W}return W.lo=(W.lo|(127&this.buf[this.pos++])<<7*X)>>>0,W}for(;X<4;++X)if(W.lo=(W.lo|(127&this.buf[this.pos])<<7*X)>>>0,this.buf[this.pos++]<128)return W;if(W.lo=(W.lo|(127&this.buf[this.pos])<<28)>>>0,W.hi=(W.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return W;if(X=0,this.len-this.pos>4){for(;X<5;++X)if(W.hi=(W.hi|(127&this.buf[this.pos])<<7*X+3)>>>0,this.buf[this.pos++]<128)return W}else for(;X<5;++X){if(this.pos>=this.len)throw F(this);if(W.hi=(W.hi|(127&this.buf[this.pos])<<7*X+3)>>>0,this.buf[this.pos++]<128)return W}throw Error("invalid varint encoding")}function L(W,X){return(W[X-4]|W[X-3]<<8|W[X-2]<<16|W[X-1]<<24)>>>0}function z(){if(this.pos+8>this.len)throw F(this,8);return new R(L(this.buf,this.pos+=4),L(this.buf,this.pos+=4))}B.create=D(),B.prototype._slice=A.Array.prototype.subarray||A.Array.prototype.slice,B.prototype.uint32=(U=4294967295,function(){if(U=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(U=(U|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(U=(U|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(U=(U|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(U=(U|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return U;if((this.pos+=5)>this.len)throw this.pos=this.len,F(this,10);return U}),B.prototype.int32=function(){return 0|this.uint32()},B.prototype.sint32=function(){var W=this.uint32();return W>>>1^-(1&W)|0},B.prototype.bool=function(){return this.uint32()!==0},B.prototype.fixed32=function(){if(this.pos+4>this.len)throw F(this,4);return L(this.buf,this.pos+=4)},B.prototype.sfixed32=function(){if(this.pos+4>this.len)throw F(this,4);return 0|L(this.buf,this.pos+=4)},B.prototype.float=function(){if(this.pos+4>this.len)throw F(this,4);var W=A.float.readFloatLE(this.buf,this.pos);return this.pos+=4,W},B.prototype.double=function(){if(this.pos+8>this.len)throw F(this,4);var W=A.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,W},B.prototype.bytes=function(){var W=this.uint32(),X=this.pos,Y=this.pos+W;if(Y>this.len)throw F(this,W);return this.pos+=W,Array.isArray(this.buf)?this.buf.slice(X,Y):X===Y?new this.buf.constructor(0):this._slice.call(this.buf,X,Y)},B.prototype.string=function(){var W=this.bytes();return I.read(W,0,W.length)},B.prototype.skip=function(W){if(typeof W=="number"){if(this.pos+W>this.len)throw F(this,W);this.pos+=W}else do if(this.pos>=this.len)throw F(this);while(128&this.buf[this.pos++]);return this},B.prototype.skipType=function(W){switch(W){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(W=7&this.uint32())!=4;)this.skipType(W);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+W+" at offset "+this.pos)}return this},B._configure=function(W){C=W,B.create=D(),C._configure();var X=A.Long?"toLong":"toNumber";A.merge(B.prototype,{int64:function(){return O.call(this)[X](!1)},uint64:function(){return O.call(this)[X](!0)},sint64:function(){return O.call(this).zzDecode()[X](!1)},fixed64:function(){return z.call(this)[X](!0)},sfixed64:function(){return z.call(this)[X](!1)}})}},593:(T,_,E)=>{T.exports=R;var C=E(1408);(R.prototype=Object.create(C.prototype)).constructor=R;var A=E(9693);function R(I){C.call(this,I)}R._configure=function(){A.Buffer&&(R.prototype._slice=A.Buffer.prototype.slice)},R.prototype.string=function(){var I=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+I,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+I,this.len))},R._configure()},5054:T=>{T.exports={}},5994:(T,_,E)=>{_.Service=E(7948)},7948:(T,_,E)=>{T.exports=A;var C=E(9693);function A(R,I,F){if(typeof R!="function")throw TypeError("rpcImpl must be a function");C.EventEmitter.call(this),this.rpcImpl=R,this.requestDelimited=!!I,this.responseDelimited=!!F}(A.prototype=Object.create(C.EventEmitter.prototype)).constructor=A,A.prototype.rpcCall=function R(I,F,B,U,V){if(!U)throw TypeError("request must be specified");var D=this;if(!V)return C.asPromise(R,D,I,F,B,U);if(D.rpcImpl)try{return D.rpcImpl(I,F[D.requestDelimited?"encodeDelimited":"encode"](U).finish(),function(O,L){if(O)return D.emit("error",O,I),V(O);if(L!==null){if(!(L instanceof B))try{L=B[D.responseDelimited?"decodeDelimited":"decode"](L)}catch(z){return D.emit("error",z,I),V(z)}return D.emit("data",L,I),V(null,L)}D.end(!0)})}catch(O){return D.emit("error",O,I),void setTimeout(function(){V(O)},0)}else setTimeout(function(){V(Error("already ended"))},0)},A.prototype.end=function(R){return this.rpcImpl&&(R||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(T,_,E)=>{T.exports=A;var C=E(9693);function A(B,U){this.lo=B>>>0,this.hi=U>>>0}var R=A.zero=new A(0,0);R.toNumber=function(){return 0},R.zzEncode=R.zzDecode=function(){return this},R.length=function(){return 1};var I=A.zeroHash="\0\0\0\0\0\0\0\0";A.fromNumber=function(B){if(B===0)return R;var U=B<0;U&&(B=-B);var V=B>>>0,D=(B-V)/4294967296>>>0;return U&&(D=~D>>>0,V=~V>>>0,++V>4294967295&&(V=0,++D>4294967295&&(D=0))),new A(V,D)},A.from=function(B){if(typeof B=="number")return A.fromNumber(B);if(C.isString(B)){if(!C.Long)return A.fromNumber(parseInt(B,10));B=C.Long.fromString(B)}return B.low||B.high?new A(B.low>>>0,B.high>>>0):R},A.prototype.toNumber=function(B){if(!B&&this.hi>>>31){var U=1+~this.lo>>>0,V=~this.hi>>>0;return U||(V=V+1>>>0),-(U+4294967296*V)}return this.lo+4294967296*this.hi},A.prototype.toLong=function(B){return C.Long?new C.Long(0|this.lo,0|this.hi,!!B):{low:0|this.lo,high:0|this.hi,unsigned:!!B}};var F=String.prototype.charCodeAt;A.fromHash=function(B){return B===I?R:new A((F.call(B,0)|F.call(B,1)<<8|F.call(B,2)<<16|F.call(B,3)<<24)>>>0,(F.call(B,4)|F.call(B,5)<<8|F.call(B,6)<<16|F.call(B,7)<<24)>>>0)},A.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},A.prototype.zzEncode=function(){var B=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^B)>>>0,this.lo=(this.lo<<1^B)>>>0,this},A.prototype.zzDecode=function(){var B=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^B)>>>0,this.hi=(this.hi>>>1^B)>>>0,this},A.prototype.length=function(){var B=this.lo,U=(this.lo>>>28|this.hi<<4)>>>0,V=this.hi>>>24;return V===0?U===0?B<16384?B<128?1:2:B<2097152?3:4:U<16384?U<128?5:6:U<2097152?7:8:V<128?9:10}},9693:function(T,_,E){var C=_;function A(I,F,B){for(var U=Object.keys(F),V=0;V<U.length;++V)I[U[V]]!==void 0&&B||(I[U[V]]=F[U[V]]);return I}function R(I){function F(B,U){if(!(this instanceof F))return new F(B,U);Object.defineProperty(this,"message",{get:function(){return B}}),Error.captureStackTrace?Error.captureStackTrace(this,F):Object.defineProperty(this,"stack",{value:new Error().stack||""}),U&&A(this,U)}return(F.prototype=Object.create(Error.prototype)).constructor=F,Object.defineProperty(F.prototype,"name",{get:function(){return I}}),F.prototype.toString=function(){return this.name+": "+this.message},F}C.asPromise=E(4537),C.base64=E(7419),C.EventEmitter=E(9211),C.float=E(945),C.inquire=E(7199),C.utf8=E(4997),C.pool=E(6662),C.LongBits=E(1945),C.isNode=!!(E.g!==void 0&&E.g&&E.g.process&&E.g.process.versions&&E.g.process.versions.node),C.global=C.isNode&&E.g||typeof window<"u"&&window||typeof self<"u"&&self||this,C.emptyArray=Object.freeze?Object.freeze([]):[],C.emptyObject=Object.freeze?Object.freeze({}):{},C.isInteger=Number.isInteger||function(I){return typeof I=="number"&&isFinite(I)&&Math.floor(I)===I},C.isString=function(I){return typeof I=="string"||I instanceof String},C.isObject=function(I){return I&&typeof I=="object"},C.isset=C.isSet=function(I,F){var B=I[F];return!(B==null||!I.hasOwnProperty(F))&&(typeof B!="object"||(Array.isArray(B)?B.length:Object.keys(B).length)>0)},C.Buffer=function(){try{var I=C.inquire("buffer").Buffer;return I.prototype.utf8Write?I:null}catch{return null}}(),C._Buffer_from=null,C._Buffer_allocUnsafe=null,C.newBuffer=function(I){return typeof I=="number"?C.Buffer?C._Buffer_allocUnsafe(I):new C.Array(I):C.Buffer?C._Buffer_from(I):typeof Uint8Array>"u"?I:new Uint8Array(I)},C.Array=typeof Uint8Array<"u"?Uint8Array:Array,C.Long=C.global.dcodeIO&&C.global.dcodeIO.Long||C.global.Long||C.inquire("long"),C.key2Re=/^true|false|0|1$/,C.key32Re=/^-?(?:0|[1-9][0-9]*)$/,C.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,C.longToHash=function(I){return I?C.LongBits.from(I).toHash():C.LongBits.zeroHash},C.longFromHash=function(I,F){var B=C.LongBits.fromHash(I);return C.Long?C.Long.fromBits(B.lo,B.hi,F):B.toNumber(!!F)},C.merge=A,C.lcFirst=function(I){return I.charAt(0).toLowerCase()+I.substring(1)},C.newError=R,C.ProtocolError=R("ProtocolError"),C.oneOfGetter=function(I){for(var F={},B=0;B<I.length;++B)F[I[B]]=1;return function(){for(var U=Object.keys(this),V=U.length-1;V>-1;--V)if(F[U[V]]===1&&this[U[V]]!==void 0&&this[U[V]]!==null)return U[V]}},C.oneOfSetter=function(I){return function(F){for(var B=0;B<I.length;++B)I[B]!==F&&delete this[I[B]]}},C.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},C._configure=function(){var I=C.Buffer;I?(C._Buffer_from=I.from!==Uint8Array.from&&I.from||function(F,B){return new I(F,B)},C._Buffer_allocUnsafe=I.allocUnsafe||function(F){return new I(F)}):C._Buffer_from=C._Buffer_allocUnsafe=null}},1173:(T,_,E)=>{T.exports=D;var C,A=E(9693),R=A.LongBits,I=A.base64,F=A.utf8;function B(K,Q,ee){this.fn=K,this.len=Q,this.next=void 0,this.val=ee}function U(){}function V(K){this.head=K.head,this.tail=K.tail,this.len=K.len,this.next=K.states}function D(){this.len=0,this.head=new B(U,0,0),this.tail=this.head,this.states=null}var O=function(){return A.Buffer?function(){return(D.create=function(){return new C})()}:function(){return new D}};function L(K,Q,ee){Q[ee]=255&K}function z(K,Q){this.len=K,this.next=void 0,this.val=Q}function W(K,Q,ee){for(;K.hi;)Q[ee++]=127&K.lo|128,K.lo=(K.lo>>>7|K.hi<<25)>>>0,K.hi>>>=7;for(;K.lo>127;)Q[ee++]=127&K.lo|128,K.lo=K.lo>>>7;Q[ee++]=K.lo}function X(K,Q,ee){Q[ee]=255&K,Q[ee+1]=K>>>8&255,Q[ee+2]=K>>>16&255,Q[ee+3]=K>>>24}D.create=O(),D.alloc=function(K){return new A.Array(K)},A.Array!==Array&&(D.alloc=A.pool(D.alloc,A.Array.prototype.subarray)),D.prototype._push=function(K,Q,ee){return this.tail=this.tail.next=new B(K,Q,ee),this.len+=Q,this},z.prototype=Object.create(B.prototype),z.prototype.fn=function(K,Q,ee){for(;K>127;)Q[ee++]=127&K|128,K>>>=7;Q[ee]=K},D.prototype.uint32=function(K){return this.len+=(this.tail=this.tail.next=new z((K>>>=0)<128?1:K<16384?2:K<2097152?3:K<268435456?4:5,K)).len,this},D.prototype.int32=function(K){return K<0?this._push(W,10,R.fromNumber(K)):this.uint32(K)},D.prototype.sint32=function(K){return this.uint32((K<<1^K>>31)>>>0)},D.prototype.uint64=function(K){var Q=R.from(K);return this._push(W,Q.length(),Q)},D.prototype.int64=D.prototype.uint64,D.prototype.sint64=function(K){var Q=R.from(K).zzEncode();return this._push(W,Q.length(),Q)},D.prototype.bool=function(K){return this._push(L,1,K?1:0)},D.prototype.fixed32=function(K){return this._push(X,4,K>>>0)},D.prototype.sfixed32=D.prototype.fixed32,D.prototype.fixed64=function(K){var Q=R.from(K);return this._push(X,4,Q.lo)._push(X,4,Q.hi)},D.prototype.sfixed64=D.prototype.fixed64,D.prototype.float=function(K){return this._push(A.float.writeFloatLE,4,K)},D.prototype.double=function(K){return this._push(A.float.writeDoubleLE,8,K)};var Y=A.Array.prototype.set?function(K,Q,ee){Q.set(K,ee)}:function(K,Q,ee){for(var J=0;J<K.length;++J)Q[ee+J]=K[J]};D.prototype.bytes=function(K){var Q=K.length>>>0;if(!Q)return this._push(L,1,0);if(A.isString(K)){var ee=D.alloc(Q=I.length(K));I.decode(K,ee,0),K=ee}return this.uint32(Q)._push(Y,Q,K)},D.prototype.string=function(K){var Q=F.length(K);return Q?this.uint32(Q)._push(F.write,Q,K):this._push(L,1,0)},D.prototype.fork=function(){return this.states=new V(this),this.head=this.tail=new B(U,0,0),this.len=0,this},D.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new B(U,0,0),this.len=0),this},D.prototype.ldelim=function(){var K=this.head,Q=this.tail,ee=this.len;return this.reset().uint32(ee),ee&&(this.tail.next=K.next,this.tail=Q,this.len+=ee),this},D.prototype.finish=function(){for(var K=this.head.next,Q=this.constructor.alloc(this.len),ee=0;K;)K.fn(K.val,Q,ee),ee+=K.len,K=K.next;return Q},D._configure=function(K){C=K,D.create=O(),C._configure()}},3155:(T,_,E)=>{T.exports=R;var C=E(1173);(R.prototype=Object.create(C.prototype)).constructor=R;var A=E(9693);function R(){C.call(this)}function I(F,B,U){F.length<40?A.utf8.write(F,B,U):B.utf8Write?B.utf8Write(F,U):B.write(F,U)}R._configure=function(){R.alloc=A._Buffer_allocUnsafe,R.writeBytesBuffer=A.Buffer&&A.Buffer.prototype instanceof Uint8Array&&A.Buffer.prototype.set.name==="set"?function(F,B,U){B.set(F,U)}:function(F,B,U){if(F.copy)F.copy(B,U,0,F.length);else for(var V=0;V<F.length;)B[U++]=F[V++]}},R.prototype.bytes=function(F){A.isString(F)&&(F=A._Buffer_from(F,"base64"));var B=F.length>>>0;return this.uint32(B),B&&this._push(R.writeBytesBuffer,B,F),this},R.prototype.string=function(F){var B=A.Buffer.byteLength(F);return this.uint32(B),B&&this._push(I,B,F),this},R._configure()},7714:(T,_,E)=>{_.R=void 0;const C=E(6919),A=E(7448);_.R=new class{async init(){}async createSessionHandler(R,I){const F=new C.Session(I);return await F.loadModel(R),new A.OnnxjsSessionHandler(F)}}},4200:(T,_,E)=>{_.c8=_.rX=void 0;const C=E(1670),A=E(5381),R=E(2157),I=E(2306);_.rX=()=>{if((typeof C.env.wasm.initTimeout!="number"||C.env.wasm.initTimeout<0)&&(C.env.wasm.initTimeout=0),typeof C.env.wasm.simd!="boolean"&&(C.env.wasm.simd=!0),typeof C.env.wasm.proxy!="boolean"&&(C.env.wasm.proxy=!1),typeof C.env.wasm.numThreads!="number"||!Number.isInteger(C.env.wasm.numThreads)||C.env.wasm.numThreads<=0){const F=typeof navigator>"u"?(0,A.cpus)().length:navigator.hardwareConcurrency;C.env.wasm.numThreads=Math.min(4,Math.ceil((F||1)/2))}},_.c8=new class{async init(){(0,_.rX)(),await(0,R.initWasm)()}async createSessionHandler(F,B){const U=new I.OnnxruntimeWebAssemblySessionHandler;return await U.loadModel(F,B),Promise.resolve(U)}}},6018:function(T,_,E){var C=this&&this.__createBinding||(Object.create?function(I,F,B,U){U===void 0&&(U=B);var V=Object.getOwnPropertyDescriptor(F,B);V&&!("get"in V?!F.__esModule:V.writable||V.configurable)||(V={enumerable:!0,get:function(){return F[B]}}),Object.defineProperty(I,U,V)}:function(I,F,B,U){U===void 0&&(U=B),I[U]=F[B]}),A=this&&this.__exportStar||function(I,F){for(var B in I)B==="default"||Object.prototype.hasOwnProperty.call(F,B)||C(F,I,B)};Object.defineProperty(_,"__esModule",{value:!0}),A(E(1670),_);const R=E(1670);{const I=E(7714).R;(0,R.registerBackend)("webgl",I,-10)}{const I=E(4200).c8;(0,R.registerBackend)("cpu",I,10),(0,R.registerBackend)("wasm",I,10),(0,R.registerBackend)("xnnpack",I,9)}},246:(T,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createAttributeWithCacheKey=void 0;class E{constructor(A){Object.assign(this,A)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(A=>`${this[A]}`).join(";")),this._cacheKey}}_.createAttributeWithCacheKey=C=>new E(C)},7778:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Attribute=void 0;const C=E(1446),A=E(9395),R=E(9162),I=E(2517);var F=A.onnxruntime.experimental.fbs;class B{constructor(V){if(this._attributes=new Map,V!=null){for(const D of V)D instanceof C.onnx.AttributeProto?this._attributes.set(D.name,[B.getValue(D),B.getType(D)]):D instanceof F.Attribute&&this._attributes.set(D.name(),[B.getValue(D),B.getType(D)]);if(this._attributes.size<V.length)throw new Error("duplicated attribute names")}}set(V,D,O){this._attributes.set(V,[O,D])}delete(V){this._attributes.delete(V)}getFloat(V,D){return this.get(V,"float",D)}getInt(V,D){return this.get(V,"int",D)}getString(V,D){return this.get(V,"string",D)}getTensor(V,D){return this.get(V,"tensor",D)}getFloats(V,D){return this.get(V,"floats",D)}getInts(V,D){return this.get(V,"ints",D)}getStrings(V,D){return this.get(V,"strings",D)}getTensors(V,D){return this.get(V,"tensors",D)}get(V,D,O){const L=this._attributes.get(V);if(L===void 0){if(O!==void 0)return O;throw new Error(`required attribute not found: ${V}`)}if(L[1]!==D)throw new Error(`type mismatch: expected ${D} but got ${L[1]}`);return L[0]}static getType(V){const D=V instanceof C.onnx.AttributeProto?V.type:V.type();switch(D){case C.onnx.AttributeProto.AttributeType.FLOAT:return"float";case C.onnx.AttributeProto.AttributeType.INT:return"int";case C.onnx.AttributeProto.AttributeType.STRING:return"string";case C.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case C.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case C.onnx.AttributeProto.AttributeType.INTS:return"ints";case C.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case C.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${C.onnx.AttributeProto.AttributeType[D]}`)}}static getValue(V){const D=V instanceof C.onnx.AttributeProto?V.type:V.type();if(D===C.onnx.AttributeProto.AttributeType.GRAPH||D===C.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const O=this.getValueNoCheck(V);if(D===C.onnx.AttributeProto.AttributeType.INT&&I.LongUtil.isLong(O))return I.LongUtil.longToNumber(O);if(D===C.onnx.AttributeProto.AttributeType.INTS){const L=O,z=new Array(L.length);for(let W=0;W<L.length;W++){const X=L[W];z[W]=I.LongUtil.longToNumber(X)}return z}if(D===C.onnx.AttributeProto.AttributeType.TENSOR)return V instanceof C.onnx.AttributeProto?R.Tensor.fromProto(O):R.Tensor.fromOrtTensor(O);if(D===C.onnx.AttributeProto.AttributeType.TENSORS){if(V instanceof C.onnx.AttributeProto)return O.map(L=>R.Tensor.fromProto(L));if(V instanceof F.Attribute)return O.map(L=>R.Tensor.fromOrtTensor(L))}if(D===C.onnx.AttributeProto.AttributeType.STRING&&V instanceof C.onnx.AttributeProto){const L=O;return(0,I.decodeUtf8String)(L)}return D===C.onnx.AttributeProto.AttributeType.STRINGS&&V instanceof C.onnx.AttributeProto?O.map(I.decodeUtf8String):O}static getValueNoCheck(V){return V instanceof C.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(V):this.getValueNoCheckFromOrtFormat(V)}static getValueNoCheckFromOnnxFormat(V){switch(V.type){case C.onnx.AttributeProto.AttributeType.FLOAT:return V.f;case C.onnx.AttributeProto.AttributeType.INT:return V.i;case C.onnx.AttributeProto.AttributeType.STRING:return V.s;case C.onnx.AttributeProto.AttributeType.TENSOR:return V.t;case C.onnx.AttributeProto.AttributeType.GRAPH:return V.g;case C.onnx.AttributeProto.AttributeType.FLOATS:return V.floats;case C.onnx.AttributeProto.AttributeType.INTS:return V.ints;case C.onnx.AttributeProto.AttributeType.STRINGS:return V.strings;case C.onnx.AttributeProto.AttributeType.TENSORS:return V.tensors;case C.onnx.AttributeProto.AttributeType.GRAPHS:return V.graphs;default:throw new Error(`unsupported attribute type: ${C.onnx.AttributeProto.AttributeType[V.type]}`)}}static getValueNoCheckFromOrtFormat(V){switch(V.type()){case F.AttributeType.FLOAT:return V.f();case F.AttributeType.INT:return V.i();case F.AttributeType.STRING:return V.s();case F.AttributeType.TENSOR:return V.t();case F.AttributeType.GRAPH:return V.g();case F.AttributeType.FLOATS:return V.floatsArray();case F.AttributeType.INTS:{const D=[];for(let O=0;O<V.intsLength();O++)D.push(V.ints(O));return D}case F.AttributeType.STRINGS:{const D=[];for(let O=0;O<V.stringsLength();O++)D.push(V.strings(O));return D}case F.AttributeType.TENSORS:{const D=[];for(let O=0;O<V.tensorsLength();O++)D.push(V.tensors(O));return D}default:throw new Error(`unsupported attribute type: ${F.AttributeType[V.type()]}`)}}}_.Attribute=B},7091:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.resolveBackend=_.backend=void 0;const C=E(5038),A=new Map;async function R(I){const F=_.backend;if(F[I]!==void 0&&function(B){const U=B;return"initialize"in U&&typeof U.initialize=="function"&&"createSessionHandler"in U&&typeof U.createSessionHandler=="function"&&"dispose"in U&&typeof U.dispose=="function"}(F[I])){const B=F[I];let U=B.initialize();if(typeof U=="object"&&"then"in U&&(U=await U),U)return A.set(I,B),B}}_.backend={webgl:new C.WebGLBackend},_.resolveBackend=async function I(F){if(!F)return I(["webgl"]);{const B=typeof F=="string"?[F]:F;for(const U of B){const V=A.get(U);if(V)return V;const D=await R(U);if(D)return D}}throw new Error("no available backend to use")}},5038:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLBackend=void 0;const C=E(1670),A=E(6231),R=E(6416),I=E(7305);_.WebGLBackend=class{get contextId(){return C.env.webgl.contextId}set contextId(F){C.env.webgl.contextId=F}get matmulMaxBatchSize(){return C.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(F){C.env.webgl.matmulMaxBatchSize=F}get textureCacheMode(){return C.env.webgl.textureCacheMode}set textureCacheMode(F){C.env.webgl.textureCacheMode=F}get pack(){return C.env.webgl.pack}set pack(F){C.env.webgl.pack=F}get async(){return C.env.webgl.async}set async(F){C.env.webgl.async=F}initialize(){try{return this.glContext=(0,I.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),A.Logger.setWithEnv(C.env),A.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(F){return A.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${F}`),!1}}createSessionHandler(F){return new R.WebGLSessionHandler(this,F)}dispose(){this.glContext.dispose()}}},5107:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CoordsGlslLib=void 0;const C=E(2517),A=E(8520),R=E(5060),I=E(7859),F=E(9390);class B extends A.GlslLib{constructor(V){super(V)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new A.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new A.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const V=this.context.outputTextureLayout;return V.isPacked?this.getPackedOutputSamplingSnippet(V):this.getUnpackedOutputSamplingSnippet(V)}getPackedOutputSamplingSnippet(V){const D=V.unpackedShape,O=[V.width,V.height],L={},z="getOutputCoords";switch(D.length){case 0:L[z]=this.getOutputScalarCoords();break;case 1:L[z]=this.getOutputPacked1DCoords(D,O);break;case 2:L[z]=this.getOutputPacked2DCoords(D,O);break;case 3:L[z]=this.getOutputPacked3DCoords(D,O);break;default:L[z]=this.getOutputPackedNDCoords(D,O)}const W=`
      void setOutput(vec4 val) {
        ${(0,R.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return L.floatTextureSetRGBA=new A.GlslLibRoutine(W),L}getUnpackedOutputSamplingSnippet(V){const D=V.unpackedShape,O=[V.width,V.height],L={},z="getOutputCoords";switch(D.length){case 0:L[z]=this.getOutputScalarCoords();break;case 1:L[z]=this.getOutputUnpacked1DCoords(D,O);break;case 2:L[z]=this.getOutputUnpacked2DCoords(D,O);break;case 3:L[z]=this.getOutputUnpacked3DCoords(D,O);break;case 4:L[z]=this.getOutputUnpacked4DCoords(D,O);break;case 5:L[z]=this.getOutputUnpacked5DCoords(D,O);break;case 6:L[z]=this.getOutputUnpacked6DCoords(D,O);break;default:throw new Error(`Unsupported output dimensionality: ${D.length}`)}const W=`
        void setOutput(float val) {
          ${(0,R.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return L.floatTextureSetR=new A.GlslLibRoutine(W),L}getOutputScalarCoords(){return new A.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(V,D){const O=D;let L="";return O[0]===1?(L=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${O[1]}.0);
          }
        `,new A.GlslLibRoutine(L)):O[1]===1?(L=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${O[0]}.0);
          }
        `,new A.GlslLibRoutine(L)):(L=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${O[0]}, ${O[1]}));
          return 2 * (resTexRC.y * ${O[0]} + resTexRC.x);
        }
      `,new A.GlslLibRoutine(L))}getOutputPacked2DCoords(V,D){let O="";if(C.ArrayUtil.arraysEqual(V,D))return O=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${D[0]}, ${D[1]}));
        }
      `,new A.GlslLibRoutine(O);const L=D,z=Math.ceil(V[1]/2);return O=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${L[0]}, ${L[1]}));

          int index = resTexRC.y * ${L[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${z}) * 2;
          int c = 2 * (index / ${z});

          return ivec2(r, c);
        }
      `,new A.GlslLibRoutine(O)}getOutputPacked3DCoords(V,D){const O=[D[0],D[1]],L=Math.ceil(V[2]/2),z=L*Math.ceil(V[1]/2),W=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${O[0]}, ${O[1]}));
          int index = resTexRC.y * ${O[0]} + resTexRC.x;

          int b = index / ${z};
          index -= b * ${z};

          // reverse r and c order for packed texture
          int r = imod(index, ${L}) * 2;
          int c = 2 * (index / ${L});

          return ivec3(b, r, c);
        }
      `;return new A.GlslLibRoutine(W)}getOutputPackedNDCoords(V,D){const O=[D[0],D[1]],L=Math.ceil(V[V.length-1]/2),z=L*Math.ceil(V[V.length-2]/2);let W=z,X="",Y="b, r, c";for(let Q=2;Q<V.length-1;Q++)W*=V[V.length-Q-1],X=`
      int b${Q} = index / ${W};
      index -= b${Q} * ${W};
    `+X,Y=`b${Q}, `+Y;const K=`
      ivec${V.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${O[0]}, ${O[1]}));
        int index = resTexRC.y * ${O[0]} + resTexRC.x;

        ${X}

        int b = index / ${z};
        index -= b * ${z};

        // reverse r and c order for packed texture
        int r = imod(index, ${L}) * 2;
        int c = 2 * (index / ${L});

        return ivec${V.length}(${Y});
      }
    `;return new A.GlslLibRoutine(K)}getOutputUnpacked1DCoords(V,D){const O=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${D[0]}, ${D[1]}));
          return resTexRC.y * ${D[0]} + resTexRC.x;
        }
      `;return new A.GlslLibRoutine(O)}getOutputUnpacked2DCoords(V,D){const O=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${D[0]}, ${D[1]}));
          int index = resTexRC.y * ${D[0]} + resTexRC.x;
          int r = index / ${V[1]};
          int c = index - r * ${V[1]};
          return ivec2(r, c);
        }
      `;return new A.GlslLibRoutine(O)}getOutputUnpacked3DCoords(V,D){let O="";const L=V.length;let z=null;L<2&&(z=[]),z=new Array(L-1),z[L-2]=V[L-1];for(let Y=L-3;Y>=0;--Y)z[Y]=z[Y+1]*V[Y+1];const W=["r","c","d"],X=z.map((Y,K)=>`int ${W[K]} = index / ${Y}; ${K===z.length-1?`int ${W[K+1]} = index - ${W[K]} * ${Y}`:`index -= ${W[K]} * ${Y}`};`).join("");return O=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${D[0]}, ${D[1]}));
          int index = resTexRC.y * ${D[0]} + resTexRC.x;
          ${X}
          return ivec3(r, c, d);
        }
      `,new A.GlslLibRoutine(O)}getOutputUnpacked4DCoords(V,D){let O="";const L=V.length;let z=null;L<2&&(z=[]),z=new Array(L-1),z[L-2]=V[L-1];for(let Y=L-3;Y>=0;--Y)z[Y]=z[Y+1]*V[Y+1];const W=["r","c","d","d2"],X=z.map((Y,K)=>`int ${W[K]} = index / ${Y}; ${K===z.length-1?`int ${W[K+1]} = index - ${W[K]} * ${Y}`:`index -= ${W[K]} * ${Y}`};`).join("");return O=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${D[0]}, ${D[1]}));
          int index = resTexRC.y * ${D[0]} + resTexRC.x;
          ${X}
          return ivec4(r, c, d, d2);
        }
      `,new A.GlslLibRoutine(O)}getOutputUnpacked5DCoords(V,D){let O="";const L=V.length;let z=null;L<2&&(z=[]),z=new Array(L-1),z[L-2]=V[L-1];for(let Y=L-3;Y>=0;--Y)z[Y]=z[Y+1]*V[Y+1];const W=["r","c","d","d2","d3"],X=z.map((Y,K)=>`int ${W[K]} = index / ${Y}; ${K===z.length-1?`int ${W[K+1]} = index - ${W[K]} * ${Y}`:`index -= ${W[K]} * ${Y}`};`).join("");return O=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${D[0]}, ${D[1]}));
          int index = resTexRC.y * ${D[0]} + resTexRC.x;
          ${X}
          return ivec5(r, c, d, d2, d3);
        }
      `,new A.GlslLibRoutine(O)}getOutputUnpacked6DCoords(V,D){let O="";const L=V.length;let z=null;L<2&&(z=[]),z=new Array(L-1),z[L-2]=V[L-1];for(let Y=L-3;Y>=0;--Y)z[Y]=z[Y+1]*V[Y+1];const W=["r","c","d","d2","d3","d4"],X=z.map((Y,K)=>`int ${W[K]} = index / ${Y}; ${K===z.length-1?`int ${W[K+1]} = index - ${W[K]} * ${Y}`:`index -= ${W[K]} * ${Y}`};`).join("");return O=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${D[0]}, ${D[1]}));
         int index = resTexRC.y * ${D[0]} + resTexRC.x;
         ${X}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new A.GlslLibRoutine(O)}getCommonUtilFuncs(){const V={};let D="uvFromFlat";V[D]=new A.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),D="packedUVfrom1D",V[D]=new A.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),D="packedUVfrom2D",V[D]=new A.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),D="packedUVfrom3D",V[D]=new A.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),D="sampleTexture";const O=(0,R.getGlsl)(this.context.glContext.version);return V[D]=new A.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${O.texture2D}(textureSampler, uv).r;
        }`),V}getInputsSamplingSnippets(){const V={},D=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((O,L)=>{const z=this.context.inputTextureLayouts[L],W=(0,F.generateShaderFuncNameFromInputSamplerName)(O);z.isPacked?V[W]=this.getPackedSamplerFromInput(W,O,z):V[W]=this.getUnpackedSamplerFromInput(W,O,z);const X=(0,F.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(O);z.unpackedShape.length<=D.unpackedShape.length&&(z.isPacked?V[X]=this.getPackedSamplerAtOutputCoords(X,z,D,O):V[X]=this.getUnpackedSamplerAtOutputCoords(X,z,D,O))}),V}getPackedSamplerAtOutputCoords(V,D,O,L){const z=D.unpackedShape,W=O.unpackedShape,X=L,Y=(0,F.generateShaderFuncNameFromInputSamplerName)(X),K=z.length,Q=W.length,ee=C.BroadcastUtil.getBroadcastDims(z,W),J=(0,F.getCoordsDataType)(Q),ie=Q-K;let re;const se=(0,F.getGlChannels)();re=K===0?"":Q<2&&ee.length>=1?"coords = 0;":ee.map(ye=>`coords.${se[ye+ie]} = 0;`).join(`
`);let ne="";ne=Q<2&&K>0?"coords":z.map((ye,we)=>`coords.${se[we+ie]}`).join(", ");let oe="return outputValue;";const fe=C.ShapeUtil.size(z)===1,he=C.ShapeUtil.size(W)===1;if(K!==1||fe||he){if(fe&&!he)oe=Q===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(ee.length){const ye=K-2,we=K-1;ee.indexOf(ye)>-1&&ee.indexOf(we)>-1?oe="return vec4(outputValue.x);":ee.indexOf(ye)>-1?oe="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":ee.indexOf(we)>-1&&(oe="return vec4(outputValue.xx, outputValue.zz);")}}else oe=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const ge=`
      vec4 ${V}() {
        ${J} coords = getOutputCoords();
        
        int lastDim = coords.${se[Q-1]};
        coords.${se[Q-1]} = coords.${se[Q-2]};
        coords.${se[Q-2]} = lastDim;
      
        ${re}
        vec4 outputValue = ${Y}(${ne});
        ${oe}
      }
    `;return new A.GlslLibRoutine(ge,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(V,D,O,L){const z=[O.width,O.height],W=[D.width,D.height],X=D.unpackedShape.length,Y=O.unpackedShape.length,K=D.unpackedShape,Q=O.unpackedShape,ee=(0,F.generateShaderFuncNameFromInputSamplerName)(L);if(X===Y&&C.ArrayUtil.arraysEqual(W,z)){const he=`
          float ${V}() {
            return sampleTexture(${L}, TexCoords);
          }
        `;return new A.GlslLibRoutine(he,["coordinates.sampleTexture"])}const J=(0,F.getCoordsDataType)(Y),ie=C.BroadcastUtil.getBroadcastDims(K,Q),re=Y-X;let se;const ne=(0,F.getGlChannels)();se=X===0?"":Y<2&&ie.length>=1?"coords = 0;":ie.map(he=>`coords.${ne[he+re]} = 0;`).join(`
`);let oe="";oe=Y<2&&X>0?"coords":D.unpackedShape.map((he,ge)=>`coords.${ne[ge+re]}`).join(", ");const fe=`
        float ${V}() {
          ${J} coords = getOutputCoords();
          ${se}
          return ${ee}(${oe});
        }
      `;return new A.GlslLibRoutine(fe,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(V,D,O){switch(O.unpackedShape.length){case 0:return this.getPackedSamplerScalar(V,D);case 1:return this.getPackedSampler1D(V,D,O);case 2:return this.getPackedSampler2D(V,D,O);case 3:return this.getPackedSampler3D(V,D,O);default:return this.getPackedSamplerND(V,D,O)}}getUnpackedSamplerFromInput(V,D,O){const L=O.unpackedShape;switch(L.length){case 0:return this.getUnpackedSamplerScalar(V,D,O);case 1:return this.getUnpackedSampler1D(V,D,O);case 2:return this.getUnpackedSampler2D(V,D,O);case 3:return this.getUnpackedSampler3D(V,D,O);case 4:return this.getUnpackedSampler4D(V,D,O);case 5:return this.getUnpackedSampler5D(V,D,O);case 6:return this.getUnpackedSampler6D(V,D,O);default:throw new Error(`Unsupported dimension ${L.length}-D`)}}getPackedSamplerScalar(V,D){const O=`
          vec4 ${V}() {
            return ${(0,R.getGlsl)(this.context.glContext.version).texture2D}(${D}, halfCR);
          }
        `;return new A.GlslLibRoutine(O)}getPackedSampler1D(V,D,O){const L=[O.width,O.height],z=[L[1],L[0]],W=(0,R.getGlsl)(this.context.glContext.version),X=`vec4 ${V}(int index) {
      vec2 uv = packedUVfrom1D(
      ${z[0]}, ${z[1]}, index);
      return ${W.texture2D}(${D}, uv);
    }`;return new A.GlslLibRoutine(X,["coordinates.packedUVfrom1D"])}getPackedSampler2D(V,D,O){const L=O.unpackedShape,z=[O.width,O.height],W=(0,R.getGlsl)(this.context.glContext.version),X=z[0],Y=z[1];if(z!=null&&C.ArrayUtil.arraysEqual(L,z)){const J=`vec4 ${V}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${Y}.0, ${X}.0);
        return ${W.texture2D}(${D}, uv);
      }`;return new A.GlslLibRoutine(J)}const K=z,Q=Math.ceil(L[1]/2),ee=`vec4 ${V}(int row, int col) {
      vec2 uv = packedUVfrom2D(${K[1]}, ${K[0]}, ${Q}, row, col);
      return ${W.texture2D}(${D}, uv);
    }`;return new A.GlslLibRoutine(ee,["coordinates.packedUVfrom2D"])}getPackedSampler3D(V,D,O){const L=O.unpackedShape,z=[O.width,O.height],W=[z[0],z[1]],X=(0,R.getGlsl)(this.context.glContext.version);if(L[0]===1){const J=L.slice(1),ie=[1,2],re=(0,F.squeezeInputShape)(L,J),se=["b","row","col"],ne=JSON.parse(JSON.stringify(O));ne.unpackedShape=re;const oe=this.getPackedSamplerFromInput(V,D,ne),fe=`${oe.routineBody}
      vec4 ${V}(int b, int row, int col) {
        return ${V}(${(0,F.getSqueezedParams)(se,ie)});
      } `;return new A.GlslLibRoutine(fe,oe.dependencies)}const Y=W[0],K=W[1],Q=Math.ceil(L[2]/2),ee=`vec4 ${V}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${K}, ${Y}, ${Q*Math.ceil(L[1]/2)}, ${Q}, b, row, col);
      return ${X.texture2D}(${D}, uv);}`;return new A.GlslLibRoutine(ee,["coordinates.packedUVfrom3D"])}getPackedSamplerND(V,D,O){const L=O.unpackedShape,z=L.length,W=[O.width,O.height],X=(0,R.getGlsl)(this.context.glContext.version),Y=[W[0],W[1]],K=Y[1],Q=Y[0],ee=Math.ceil(L[z-1]/2);let J=ee*Math.ceil(L[z-2]/2),ie="int b, int row, int col",re=`b * ${J} + (row / 2) * ${ee} + (col / 2)`;for(let ne=2;ne<z-1;ne++)ie=`int b${ne}, `+ie,J*=L[z-ne-1],re=`b${ne} * ${J} + `+re;const se=`vec4 ${V}(${ie}) {
      int index = ${re};
      int texR = index / ${Q};
      int texC = index - texR * ${Q};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Q}, ${K});
      return ${X.texture2D}(${D}, uv);
    }`;return new A.GlslLibRoutine(se)}getUnpackedSamplerScalar(V,D,O){const[L,z]=[O.width,O.height];if(L===1&&z===1){const X=`
          float ${V}() {
            return sampleTexture(${D}, halfCR);
          }
        `;return new A.GlslLibRoutine(X,["coordinates.sampleTexture"])}const W=`
        float ${V}() {
          int offset_${D} = coordsToOffset(TexCoords, ${L}, ${z});
          vec2 uv = uvFromFlat(${L}, ${z}, offset_${D});
          return sampleTexture(${D}, uv);
        }
      `;return new A.GlslLibRoutine(W,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(V,D,O){const L=O.width,z=O.height;if(z===1&&L===1){const X=`
        float ${V}(int index) {
          return sampleTexture(${D}, halfCR);
        }
      `;return new A.GlslLibRoutine(X,["coordinates.sampleTexture"])}if(z===1){const X=`
          float ${V}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${L}.0, 0.5);
            return sampleTexture(${D}, uv);
          }
        `;return new A.GlslLibRoutine(X,["coordinates.sampleTexture"])}if(L===1){const X=`
          float ${V}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${z}.0);
            return sampleTexture(${D}, uv);
          }
        `;return new A.GlslLibRoutine(X,["coordinates.sampleTexture"])}const W=`
        float ${V}(int index) {
          vec2 uv = uvFromFlat(${L}, ${z}, index);
          return sampleTexture(${D}, uv);
        }
      `;return new A.GlslLibRoutine(W,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(V,D,O){const L=O.unpackedShape,z=[O.height,O.width];if(z!=null&&C.ArrayUtil.arraysEqual(L,z)){const J=`
          float ${V}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${z[1]}.0, ${z[0]}.0);
            return sampleTexture(${D}, uv);
          }
        `;return new A.GlslLibRoutine(J,["coordinates.sampleTexture"])}const{newShape:W,keptDims:X}=(0,I.squeezeShape)(L),Y=W;if(Y.length<L.length){const J=(0,F.squeezeInputShape)(L,Y),ie=JSON.parse(JSON.stringify(O));ie.unpackedShape=J;const re=["col","row"],se=`
          ${this.getUnpackedSamplerFromInput(V,D,ie).routineBody}
          float ${V}(int row, int col) {
            return ${V}(${(0,F.getSqueezedParams)(re,X)});
          }
        `;return new A.GlslLibRoutine(se,["coordinates.sampleTexture"])}const K=z[1],Q=z[0];if(Q===1){const J=`
          float ${V}(int row, int col) {
            int offset_${D} = coordsToOffset(TexCoords, ${K}, ${Q});
            float index = dot(vec3(row, col, offset_${D}), vec3(${L[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${K}.0);
            return sampleTexture(${D}, uv);
          }
        `;return new A.GlslLibRoutine(J,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(K===1){const J=`
          float ${V}(int row, int col) {
            int offset_${D} = coordsToOffset(TexCoords, ${K}, ${Q});
            float index = dot(vec3(row, col, offset_${D}), vec3(${L[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${Q}.0, 0.5);
            return sampleTexture(${D}, uv);
          }
        `;return new A.GlslLibRoutine(J,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const ee=`
        float ${V}(int row, int col) {
          int index = col * ${L[1]} + row;
          vec2 uv = uvFromFlat(${K}, ${Q}, index);
          return sampleTexture(${D}, uv);
        }
      `;return new A.GlslLibRoutine(ee,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(V,D,O){const L=O.unpackedShape,z=L[1]*L[2],W=L[2],{newShape:X,keptDims:Y}=(0,I.squeezeShape)(L),K=X;if(K.length<L.length){const ee=(0,F.squeezeInputShape)(L,K),J=["batch","col","row"],ie=JSON.parse(JSON.stringify(O));ie.unpackedShape=ee;const re=this.getUnpackedSamplerFromInput(V,D,ie),se=Y.reverse(),ne=`
          ${re.routineBody}
          float ${V}(int batch, int row, int col) {
            return ${V}(${(0,F.getSqueezedParams)(J,se)});
          }
        `;return new A.GlslLibRoutine(ne,re.dependencies)}const Q=`
          float ${V}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${z} + col * ${W} + row;
            vec2 uv = uvFromFlat(${O.width}, ${O.height}, index);
            return sampleTexture(${D}, uv);
          }
      `;return new A.GlslLibRoutine(Q,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(V,D,O){const L=O.unpackedShape,z=L[3],W=L[2]*z,X=`
        float ${V}(int row, int col, int depth, int depth2) {
          int index = row * ${L[1]*W} + col * ${W} +
              depth2 * ${z} + depth;
          vec2 uv = uvFromFlat(${O.width}, ${O.height}, index);
          return sampleTexture(${D}, uv);
        }
      `;return new A.GlslLibRoutine(X,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(V,D,O){const L=O.unpackedShape,z=L[4],W=L[3]*z,X=L[2]*W,Y=L[1]*X,{newShape:K,keptDims:Q}=(0,I.squeezeShape)(L);if(K.length<L.length){const J=(0,F.squeezeInputShape)(L,K),ie=["row","col","depth","depth2","depth3"],re=JSON.parse(JSON.stringify(O));re.unpackedShape=J;const se=`
          ${this.getUnpackedSamplerFromInput(V,D,re).routineBody}
          float ${V}(int row, int col, int depth, int depth2, int depth3) {
            return ${V}(${(0,F.getSqueezedParams)(ie,Q)});
          }
        `;return new A.GlslLibRoutine(se,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ee=`
        float ${V}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${Y} + col * ${X} + depth * ${W} +
          depth3 * ${z} + depth2;
          vec2 uv = uvFromFlat(${O.width}, ${O.height}, index);
          return sampleTexture(${D}, uv);
        }
      `;return new A.GlslLibRoutine(ee,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(V,D,O){const L=O.unpackedShape,z=L[5],W=L[4]*z,X=L[3]*W,Y=L[2]*X,K=L[1]*Y,{newShape:Q,keptDims:ee}=(0,I.squeezeShape)(L);if(Q.length<L.length){const ie=(0,F.squeezeInputShape)(L,Q),re=["row","col","depth","depth2","depth3","depth4"],se=JSON.parse(JSON.stringify(O));se.unpackedShape=ie;const ne=`
            ${this.getUnpackedSamplerFromInput(V,D,se).routineBody}
            float ${V}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${V}(${(0,F.getSqueezedParams)(re,ee)});
            }
          `;return new A.GlslLibRoutine(ne,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const J=`
          float ${V}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${K} + col * ${Y} + depth * ${X} +
            depth2 * ${W} + depth3 * ${z} + depth4;
            vec2 uv = uvFromFlat(${O.width}, ${O.height}, index);
            return sampleTexture(${D}, uv);
          }
        `;return new A.GlslLibRoutine(J,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const V=this.context.outputTextureLayout,D=V.shape.length,O=V.strides,L=V.width,z=V.height,W=[];for(let Y=0;Y<D-1;++Y)W.push(`
        c[${Y}] = offset / ${O[Y]};`),W.push(`
        offset -= c[${Y}] * ${O[Y]};`);W.push(`
        c[${D-1}] = offset;`);const X=`
      void toVec(vec2 texCoords, out int c[${D}]) {
        int offset = coordsToOffset(texCoords, ${L}, ${z});
        ${W.join("")}
      }
      void toVec(int offset, out int c[${D}]) {
        ${W.join("")}
      }
    `;return{toVec:new A.GlslLibRoutine(X,["coordinates.coordsToOffset"])}}valueFrom(){const V={};return this.context.programInfo.inputNames.forEach((D,O)=>{const L=this.context.inputTextureLayouts[O],z=(L.unpackedShape.length>0?L.unpackedShape:L.shape).length;let W=`_${D}`;V[W]=new A.GlslLibRoutine(this.getValueFromSingle(D,z,L.width,L.height,!1),[`shapeUtils.indicesToOffset${W}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),W+="_T",V[W]=new A.GlslLibRoutine(this.getValueFromSingle(D,z,L.width,L.height,!0),[`shapeUtils.indicesToOffset${W}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),V}getValueFromSingle(V,D,O,L,z){let W=`_${V}`;return z&&(W+="_T"),`
        float ${W}(int m[${D}]) {
          int offset = indicesToOffset${W}(m);
          vec2 coords = offsetToCoords(offset, ${O}, ${L});
          float value = getColorAsFloat(${(0,R.getGlsl)(this.context.glContext.version).texture2D}(${V}, coords));
          return value;
        }
        `}getPackedValueFrom(V,D,O,L,z){let W=`_${V}_Pack`;return z&&(W+="_T"),`
        vec4 ${W}(int m[${D}]) {
          int offset = indicesToOffset_${V}(m);
          vec2 coords = offsetToCoords(offset, ${O}, ${L});
          return ${(0,R.getGlsl)(this.context.glContext.version).texture2D}(${V}, coords);
        }
        `}}_.CoordsGlslLib=B},8520:(T,_)=>{var E;Object.defineProperty(_,"__esModule",{value:!0}),_.TopologicalSortGlslRoutines=_.GlslLibRoutineNode=_.GlslLibRoutine=_.GlslLib=_.GlslContext=_.FunctionType=void 0,(E=_.FunctionType||(_.FunctionType={}))[E.ValueBased=0]="ValueBased",E[E.Positional=1]="Positional",_.GlslContext=class{constructor(C,A,R,I){this.glContext=C,this.programInfo=A,this.inputTextureLayouts=R,this.outputTextureLayout=I}},_.GlslLib=class{constructor(C){this.context=C}},_.GlslLibRoutine=class{constructor(C,A){this.routineBody=C,this.dependencies=A}},_.GlslLibRoutineNode=class{constructor(C,A,R){this.name=C,this.dependencies=R||[],A&&(this.routineBody=A)}addDependency(C){C&&this.dependencies.push(C)}},_.TopologicalSortGlslRoutines=class{static returnOrderedNodes(C){if(!C||C.length===0)return[];if(C.length===1)return C;const A=new Set,R=new Set,I=new Array;return this.createOrderedNodes(C,A,R,I),I}static createOrderedNodes(C,A,R,I){for(let F=0;F<C.length;++F)this.dfsTraverse(C[F],A,R,I)}static dfsTraverse(C,A,R,I){if(!C||R.has(C.name))return;if(A.has(C.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");A.add(C.name);const F=C.dependencies;if(F&&F.length>0)for(let B=0;B<F.length;++B)this.dfsTraverse(F[B],A,R,I);I.push(C),R.add(C.name),A.delete(C.name)}}},7341:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EncodingGlslLib=void 0;const C=E(8520);class A extends C.GlslLib{constructor(I){super(I)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new C.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new C.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const I=A.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new C.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${I}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const I=A.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new C.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${I}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const I=new ArrayBuffer(4),F=new Uint32Array(I),B=new Uint8Array(I);if(F[0]=3735928559,B[0]===239)return!0;if(B[0]===222)return!1;throw new Error("unknown endianness")}}_.EncodingGlslLib=A},9894:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FragColorGlslLib=void 0;const C=E(8520),A=E(5060);class R extends C.GlslLib{constructor(F){super(F)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const F=(0,A.getGlsl)(this.context.glContext.version);return{setFragColor:new C.GlslLibRoutine(`
        void setFragColor(float value) {
            ${F.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new C.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_.FragColorGlslLib=R},2848:(T,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.replaceInlines=void 0;const E=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_.replaceInlines=function(C){const A={};let R;for(;(R=E.exec(C))!==null;){const I=R[3].split(",").map(F=>{const B=F.trim().split(" ");return B&&B.length===2?{type:B[0],name:B[1]}:null}).filter(F=>F!==null);A[R[2]]={params:I,body:R[4]}}for(const I in A){const F="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",I),B=new RegExp(F,"gm");for(;(R=B.exec(C))!==null;){const U=R[1],V=R[2],D=R[3].split(","),O=U?`${U} ${V};`:"";let L=A[I].body,z="";A[I].params.forEach((X,Y)=>{X&&(z+=`${X.type} ${X.name} = ${D[Y]};
`)}),L=`${z}
 ${L}`,L=L.replace("return",`${V} = `);const W=`
      ${O}
      {
        ${L}
      }
      `;C=C.replace(R[0],W)}}return C.replace(E,"")}},8879:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GlslPreprocessor=void 0;const C=E(8520),A=E(2848),R=E(5483),I=E(5060);_.GlslPreprocessor=class{constructor(F,B,U,V){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new C.GlslContext(F,B,U,V),Object.keys(R.glslRegistry).forEach(O=>{const L=new R.glslRegistry[O](this.context);this.libs[O]=L});const D=this.glslLibRoutineDependencyGraph;for(const O in this.libs){const L=this.libs[O].getFunctions();for(const z in L){const W=O+"."+z;let X;D[W]?(X=D[W],X.routineBody=L[z].routineBody):(X=new C.GlslLibRoutineNode(W,L[z].routineBody),D[W]=X);const Y=L[z].dependencies;if(Y)for(let K=0;K<Y.length;++K)if(D[Y[K]])X.addDependency(D[Y[K]]);else{const Q=new C.GlslLibRoutineNode(Y[K]);D[Y[K]]=Q,X.addDependency(Q)}}}}preprocess(){const F=this.context.programInfo;let B=F.shaderSource;return this.context.programInfo.hasMain||(B=`${B}
      ${(0,I.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),B=(0,A.replaceInlines)(B),`${(0,I.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(F.inputNames,F.variables)}
    ${this.getImports(B)}
    ${B}`}getImports(F){const B=this.selectGlslLibRoutinesToBeIncluded(F);if(B.length===0)return"";let U="";for(let V=0;V<B.length;++V){if(!B[V].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${B[V].name}`);U+=B[V].routineBody+`
`}return U}selectGlslLibRoutinesToBeIncluded(F){const B=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(U=>{const V=U.split(".")[1];F.indexOf(V)!==-1&&B.push(this.glslLibRoutineDependencyGraph[U])}),C.TopologicalSortGlslRoutines.returnOrderedNodes(B)}getUniforms(F,B){const U=[];if(F)for(const V of F)U.push(`uniform sampler2D ${V};`);if(B)for(const V of B)U.push(`uniform ${V.type} ${V.name}${V.arrayLength?`[${V.arrayLength}]`:""};`);return U.join(`
`)}}},5483:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.glslRegistry=void 0;const C=E(5107),A=E(7341),R=E(9894),I=E(2655),F=E(3891);_.glslRegistry={encoding:A.EncodingGlslLib,fragcolor:R.FragColorGlslLib,vec:F.VecGlslLib,shapeUtils:I.ShapeUtilsGlslLib,coordinates:C.CoordsGlslLib}},2655:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeUtilsGlslLib=void 0;const C=E(8520);class A extends C.GlslLib{constructor(I){super(I)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const I=this.context.outputTextureLayout.shape.length,F={};return this.context.programInfo.inputNames.forEach((B,U)=>{const V=this.context.inputTextureLayouts[U].unpackedShape;if(V.length<=I){const D=V.length,O=I-D,L=`bcastIndices_${B}`;let z="";for(let X=0;X<D;++X)z+=`
          realIndices[${X}] = int( mod(float(bcastedIndices[${O+X}]), ${V[X]}.0) );
          `;const W=`
        void ${L} (int bcastedIndices[${I}], out int realIndices[${D}]) {
          ${z}
        }
        `;F[L]=new C.GlslLibRoutine(W)}}),F}bcastMatmulIndex(){const I=this.context.outputTextureLayout.shape.length,F={};return this.context.programInfo.inputNames.forEach((B,U)=>{const V=this.context.inputTextureLayouts[U].shape;if(!(V.length<2||V.length>I)){const D=V.length,O=I-D,L=`bcastMatmulIndices_${B}`;let z="";for(let X=0;X<D-2;++X)z+=`
          realIndices[${X}] = int( mod(float(bcastedIndices[${O+X}]), ${V[X]}.0) );
          `;const W=`
        void ${L}(int bcastedIndices[${I}], out int realIndices[${D}]) {
          ${z}
          realIndices[${D-1}] = bcastedIndices[${I-1}];
          realIndices[${D-2}] = bcastedIndices[${I-2}];
        }
        `;F[L]=new C.GlslLibRoutine(W)}}),F}indicesToOffset(){const I={};return this.context.programInfo.inputNames.forEach((F,B)=>{const U=this.context.inputTextureLayouts[B].shape,V=this.context.inputTextureLayouts[B].strides,D=U.length;let O=`indicesToOffset_${F}`;I[O]=new C.GlslLibRoutine(A.indexToOffsetSingle(O,D,V)),O=`indicesToOffset_${F}_T`,I[O]=new C.GlslLibRoutine(A.indexToOffsetSingle(O,D,V.slice().reverse()))}),I}static indexToOffsetSingle(I,F,B){let U="";for(let V=F-1;V>=0;--V)U+=`
        offset += indices[${V}] * ${B[V]};
        `;return`
      int ${I}(int indices[${F}]) {
        int offset = 0;
        ${U}
        return offset;
      }
      `}offsetToIndices(){const I={};return this.context.programInfo.inputNames.forEach((F,B)=>{const U=this.context.inputTextureLayouts[B].shape,V=this.context.inputTextureLayouts[B].strides,D=U.length;let O=`offsetToIndices_${F}`;I[O]=new C.GlslLibRoutine(A.offsetToIndicesSingle(O,D,V)),O=`offsetToIndices_${F}_T`,I[O]=new C.GlslLibRoutine(A.offsetToIndicesSingle(O,D,V.slice().reverse()))}),I}static offsetToIndicesSingle(I,F,B){const U=[];for(let V=0;V<F-1;++V)U.push(`
      indices[${V}] = offset / ${B[V]};`),U.push(`
        offset -= indices[${V}] * ${B[V]};`);return U.push(`
      indices[${F-1}] = offset;`),`
      void ${I}(int offset, out int indices[${F}]) {
        ${U.join("")}
      }
      `}incrementIndices(){const I={};return this.context.programInfo.inputNames.forEach((F,B)=>{const U=this.context.inputTextureLayouts[B].shape,V=U.length,D=`incrementIndices_${F}`;let O="";for(let z=0;z<V;++z)O+=`
        shape[${z}] = ${U[z]};`;const L=`
        void ${D}(int axis, out int indices[${V}]) {
          int shape[${V}];
          ${O};
          for(int i = ${V} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;I[D]=new C.GlslLibRoutine(L)}),I}}_.ShapeUtilsGlslLib=A},5060:(T,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getDefaultFragShaderMain=_.getFragShaderPreamble=_.getVertexShaderSource=_.getGlsl=void 0;const E={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},C={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function A(R){return R===1?E:C}_.getGlsl=A,_.getVertexShaderSource=function(R){const I=A(R);return`${I.version}
      precision highp float;
      ${I.attribute} vec3 position;
      ${I.attribute} vec2 textureCoord;

      ${I.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_.getFragShaderPreamble=function(R){const I=A(R);return`${I.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${I.varyingFrag} vec2 TexCoords;
    ${I.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_.getDefaultFragShaderMain=function(R,I){return`
  void main() {
    int indices[${I}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${A(R).output} = result;
  }
  `}},3891:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.VecGlslLib=void 0;const C=E(8520);class A extends C.GlslLib{constructor(I){super(I)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const I=this.context.outputTextureLayout.shape.length,F={add:"+=",sub:"-=",mul:"*=",div:"/="},B={};for(const U in F){const V=`${U}Vec`;let D="";for(let L=0;L<I;++L)D+=`
          dest[${L}] ${F[U]} src[${L}];
          `;const O=`
        void ${V}(int src[${I}], out int dest[${I}]) {
          ${D}
        }
        `;B[V]=new C.GlslLibRoutine(O)}return B}copyVec(){const I=this.context.outputTextureLayout.shape.length;let F="";for(let U=0;U<I;++U)F+=`
        dest[${U}] = src[${U}];
        `;const B=`
      void copyVec(int src[${I}], out int dest[${I}]) {
        ${F}
      }
      `;return{copyVec:new C.GlslLibRoutine(B)}}setVecItem(){const I=this.context.outputTextureLayout.shape.length;let F=`
        if(index < 0)
            index =${I} + index;
        if (index == 0)
            m[0] = value;
        `;for(let U=1;U<I-1;++U)F+=`
        else if (index == ${U})
            m[${U}] = value;
            `;F+=`
        else
            m[${I-1}] = value;
        `;const B=`
      void setVecItem(out int m[${I}], int index, int value) {
        ${F}
      }
        `;return{setVecItem:new C.GlslLibRoutine(B)}}getVecItem(){const I=this.context.outputTextureLayout.shape.length;let F=`
        if(index < 0)
            index = ${I} + index;
        if (index == 0)
            return m[0];
      `;for(let U=1;U<I-1;++U)F+=`
        else if (index == ${U})
            return m[${U}];
      `;F+=`
        else
            return m[${I-1}];
        `;const B=`
      int getVecItem(int m[${I}], int index) {
        ${F}
      }
    `;return{getVecItem:new C.GlslLibRoutine(B)}}}_.VecGlslLib=A},8316:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLInferenceHandler=void 0;const C=E(6231),A=E(9162),R=E(2517),I=E(2403),F=E(7019),B=E(8710),U=E(5611),V=E(4057),D=E(2039);_.WebGLInferenceHandler=class{constructor(O){this.session=O,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(O,L){return(0,V.calculateTextureWidthAndHeight)(this.session.layoutStrategy,O,L)}executeProgram(O,L){if(L.length<O.inputNames.length)throw new Error(`Input size mustn't be less than ${O.inputNames.length}.`);if(O.inputNames.length!==O.inputTypes.length)throw new Error("input names size does not match input types");const z=[];for(let ee=0;ee<O.inputNames.length;++ee)z[ee]=this.getOrCreateTextureData(L[ee],O.inputTypes[ee]);const W=((ee,J)=>{const ie=J.map(se=>`${se.unpackedShape.join(",")};${se.width}x${se.height}`).join("_");let re=ee.name;return ee.cacheHint&&(re+="["+ee.cacheHint+"]"),re+=":"+ie,re})(O,z);let X=this.session.programManager.getArtifact(W);const Y=X?X.programInfo:typeof O.get=="function"?O.get():O,K=(0,V.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Y.output.dims,Y.output.textureType),Q=this.createTextureData(K,Y.output.type);return X||(X=this.session.programManager.build(Y,z,Q),this.session.programManager.setArtifact(W,X)),this.runProgram(X,z,Q),Q}run(O,L){return this.executeProgram(O,L).tensor}runProgram(O,L,z){for(let W=0;W<L.length;++W)if(!!L[W].isPacked!=(O.programInfo.inputTypes[W]===D.TextureType.packed))throw new Error(`input[${W}] property packed inconsistent`);if(!!z.isPacked!=(O.programInfo.output.textureType===D.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(O,L,z)}getOrCreateTextureData(O,L){let z=this.getTextureData(O.dataId,L===D.TextureType.packed);if(!z&&(z=this.getTextureData(O.dataId,L!==D.TextureType.packed),z))return L===D.TextureType.packed?this.pack(z):this.unpack(z);if(!z){const W=(0,V.createTextureLayoutFromTextureType)(this.session.layoutStrategy,O.dims,L);if(L===D.TextureType.packedLastDimension){const K=O.dims;if(K.length===4){const Q=[K[0],Math.ceil(K[1]*K[2]*K[3]/4)],ee=(0,V.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Q,L);let J=O.numberData;if(K[1]*K[2]*K[3]%4!=0){const ie=K[0],re=K[1]*K[2]*K[3],se=Math.ceil(re*1/4)*4;J=new Float32Array(ie*se);for(let ne=0;ne<ie;++ne){const oe=ne*re,fe=ne*se+ne%1*re;J.set(O.numberData.subarray(oe,oe+re),fe)}}return this.createTextureData(ee,O.type,J,O,1)}}if(L===D.TextureType.packed){const X=(0,V.createTextureLayoutFromShape)(this.session.layoutStrategy,O.dims,1,[],{reverseWH:!0}),Y=this.createTextureData(X,O.type,O.numberData,O,1);z=this.pack(Y)}else z=this.createTextureData(W,O.type,O.numberData,O,1)}return z}createTextureDataFromLayoutBindTensor(O,L,z,W){return this.createTextureData(O,L,z,W,1)}createTextureData(O,L,z,W,X){C.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(O)}]`);const Y=this.session.textureManager.createTextureFromLayout(L,O,z,X);return this.createTextureDataFromTexture(O,L,Y,W)}reshapeUnpacked(O,L){const z=this.getOrCreateTextureData(O,D.TextureType.unpacked),W={channels:z.channels,height:z.height,width:z.width,shape:L.length!==0?L:[1],strides:R.ShapeUtil.computeStrides(L),unpackedShape:L};return this.createTextureDataFromTexture(W,O.type,z.texture).tensor}reshapePacked(O,L){const z=this.getOrCreateTextureData(O,D.TextureType.packed);if((0,F.isReshapeCheap)(O.dims,L)){const Q={channels:z.channels,height:z.height,width:z.width,shape:L.length!==0?L:[1],strides:R.ShapeUtil.computeStrides(L),unpackedShape:L,isPacked:!0};return this.createTextureDataFromTexture(Q,O.type,z.texture).tensor}const W=(0,F.processDims3D)(O.dims),X=(0,F.processDims3D)(L),Y=this.reshapePacked(O,W),K=this.run((0,F.createPackedReshape3DProgramInfoLoader)(this,Y,X),[Y]);return this.reshapePacked(K,L)}cast(O,L){const z=this.getOrCreateTextureData(O,D.TextureType.unpacked);return this.createTextureDataFromTexture(z,L,z.texture).tensor}createTextureDataFromTexture(O,L,z,W,X){const Y=Object.assign(Object.assign({},O),{tensor:W||new A.Tensor(O.unpackedShape,L,K=>this.readTexture(Y),async K=>this.readTextureAsync(Y),void 0,X),texture:z});return this.setTextureData(Y.tensor.dataId,Y,O.isPacked),Y}getTextureData(O,L=!1){return this.session.isInitializer(O)?this.session.getTextureData(O,L):L?this.packedTextureDataCache.get(O):this.unpackedTextureDataCache.get(O)}setTextureData(O,L,z=!1){this.session.isInitializer(O)?this.session.setTextureData(O,L,z):(z?this.packedTextureDataCache:this.unpackedTextureDataCache).set(O,L)}isTextureLayoutCached(O,L=!1){return!!this.getTextureData(O.dataId,L)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(O=>this.session.textureManager.releaseTexture(O)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(O=>this.session.textureManager.releaseTexture(O)),this.unpackedTextureDataCache=new Map}readTexture(O){return O.isPacked?this.readTexture(this.unpack(O)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(O,O.tensor.type,O.channels):this.session.textureManager.readUint8TextureAsFloat((0,B.encodeAsUint8)(this,O))}async readTextureAsync(O){return O.isPacked?this.readTextureAsync(this.unpack(O)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(O,O.tensor.type,O.channels):this.session.textureManager.readUint8TextureAsFloat((0,B.encodeAsUint8)(this,O))}pack(O){return this.executeProgram((0,I.createPackProgramInfoLoader)(this,O.tensor),[O.tensor])}unpack(O){return this.executeProgram((0,U.createUnpackProgramInfoLoader)(this,O.tensor),[O.tensor])}}},1640:function(T,_,E){var C=this&&this.__createBinding||(Object.create?function(ve,be,me,xe){xe===void 0&&(xe=me);var Ae=Object.getOwnPropertyDescriptor(be,me);Ae&&!("get"in Ae?!be.__esModule:Ae.writable||Ae.configurable)||(Ae={enumerable:!0,get:function(){return be[me]}}),Object.defineProperty(ve,xe,Ae)}:function(ve,be,me,xe){xe===void 0&&(xe=me),ve[xe]=be[me]}),A=this&&this.__setModuleDefault||(Object.create?function(ve,be){Object.defineProperty(ve,"default",{enumerable:!0,value:be})}:function(ve,be){ve.default=be}),R=this&&this.__importStar||function(ve){if(ve&&ve.__esModule)return ve;var be={};if(ve!=null)for(var me in ve)me!=="default"&&Object.prototype.hasOwnProperty.call(ve,me)&&C(be,ve,me);return A(be,ve),be};Object.defineProperty(_,"__esModule",{value:!0}),_.WEBGL_OP_RESOLVE_RULES=void 0;const I=E(2898),F=R(E(7839)),B=E(4196),U=E(2069),V=E(8138),D=E(9663),O=E(5193),L=E(7992),z=E(1253),W=E(4776),X=E(6572),Y=E(3346),K=E(5623),Q=E(2870),ee=E(2143),J=E(4939),ie=E(718),re=E(2268),se=E(8117),ne=E(2278),oe=E(5524),fe=E(5975),he=E(3933),ge=E(6558),ye=E(5723),we=E(3738),le=R(E(4909)),de=E(8428),ce=E(9793);_.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",le.abs],["Acos","","7+",le.acos],["Add","","7+",F.add],["And","","7+",F.and],["Asin","","7+",le.asin],["Atan","","7+",le.atan],["AveragePool","","7+",ee.averagePool,ee.parseAveragePoolAttributes],["BatchNormalization","","7+",I.batchNormalization,I.parseBatchNormalizationAttributes],["Cast","","6+",B.cast,B.parseCastAttributes],["Ceil","","6+",le.ceil],["Clip","","6-10",le.clip,le.parseClipAttributes],["Clip","","11+",le.clipV11],["Concat","","4+",U.concat,U.parseConcatAttributes],["Conv","","1+",V.conv,V.parseConvAttributes],["ConvTranspose","","1+",D.convTranspose,D.parseConvTransposeAttributes],["Cos","","7+",le.cos],["Div","","7+",F.div],["Dropout","","7+",le.identity],["DepthToSpace","","1+",O.depthToSpace,O.parseDepthToSpaceAttributes],["Equal","","7+",F.equal],["Elu","","6+",le.elu,le.parseEluAttributes],["Exp","","6+",le.exp],["Flatten","","1+",L.flatten,L.parseFlattenAttributes],["Floor","","6+",le.floor],["FusedConv","com.microsoft","1+",V.conv,V.parseConvAttributes],["Gather","","1+",z.gather,z.parseGatherAttributes],["Gemm","","7-10",W.gemm,W.parseGemmAttributesV7],["Gemm","","11+",W.gemm,W.parseGemmAttributesV11],["GlobalAveragePool","","1+",ee.globalAveragePool,ee.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",ee.globalMaxPool],["Greater","","7+",F.greater],["Identity","","1+",le.identity],["ImageScaler","","1+",X.imageScaler,X.parseImageScalerAttributes],["InstanceNormalization","","6+",Y.instanceNormalization,Y.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",le.leakyRelu,le.parseLeakyReluAttributes],["Less","","7+",F.less],["Log","","6+",le.log],["MatMul","","1+",K.matMul,K.parseMatMulAttributes],["MaxPool","","1+",ee.maxPool,ee.parseMaxPoolAttributes],["Mul","","7+",F.mul],["Neg","","6+",le.neg],["Not","","1+",le.not],["Or","","7+",F.or],["Pad","","2-10",Q.padV2,Q.parsePadAttributesV2],["Pad","","11+",Q.padV11,Q.parsePadAttributesV11],["Pow","","7+",F.pow],["PRelu","","7+",F.pRelu],["ReduceLogSum","","1+",J.reduceLogSum,J.parseReduceAttributes],["ReduceMax","","1+",J.reduceMax,J.parseReduceAttributes],["ReduceMean","","1+",J.reduceMean,J.parseReduceAttributes],["ReduceMin","","1+",J.reduceMin,J.parseReduceAttributes],["ReduceProd","","1+",J.reduceProd,J.parseReduceAttributes],["ReduceSum","","1-12",J.reduceSum,J.parseReduceAttributes],["ReduceSumSquare","","1+",J.reduceLogSumSquare,J.parseReduceAttributes],["Relu","","6+",le.relu],["Reshape","","5+",ie.reshape],["Resize","","10",re.resize,re.parseResizeAttributesV10],["Resize","","11+",re.resize,re.parseResizeAttributesV11],["Shape","","1+",se.shape],["Sigmoid","","6+",le.sigmoid],["Sin","","7+",le.sin],["Slice","","10+",ne.sliceV10],["Slice","","1-9",ne.slice,ne.parseSliceAttributes],["Softmax","","1-12",oe.softmax,oe.parseSoftmaxAttributes],["Softmax","","13+",oe.softmaxV13,oe.parseSoftmaxAttributesV13],["Split","","2-12",fe.split,fe.parseSplitAttributes],["Sqrt","","6+",le.sqrt],["Squeeze","","1-12",he.squeeze,he.parseSqueezeAttributes],["Squeeze","","13+",he.squeezeV13],["Sub","","7+",F.sub],["Sum","","6+",ge.sum],["Tan","","7+",le.tan],["Tanh","","6+",le.tanh],["Tile","","6+",ye.tile],["Transpose","","1+",we.transpose,we.parseTransposeAttributes],["Upsample","","7-8",ce.upsample,ce.parseUpsampleAttributesV7],["Upsample","","9",ce.upsample,ce.parseUpsampleAttributesV9],["Unsqueeze","","1-12",de.unsqueeze,de.parseUnsqueezeAttributes],["Unsqueeze","","13+",de.unsqueezeV13],["Xor","","7+",F.xor]]},2898:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseBatchNormalizationAttributes=_.batchNormalization=void 0;const C=E(246),A=E(5060),R=E(2039),I={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[R.TextureType.unpacked,R.TextureType.unpacked,R.TextureType.unpacked,R.TextureType.unpacked,R.TextureType.unpacked]};_.batchNormalization=(U,V,D)=>(B(V),[U.run(Object.assign(Object.assign({},I),{cacheHint:D.cacheKey,get:()=>F(U,V,D)}),V)]),_.parseBatchNormalizationAttributes=U=>{const V=U.attributes.getFloat("epsilon",1e-5),D=U.attributes.getFloat("momentum",.9),O=U.attributes.getInt("spatial",1);return(0,C.createAttributeWithCacheKey)({epsilon:V,momentum:D,spatial:O})};const F=(U,V,D)=>{const O=(0,A.getGlsl)(U.session.backend.glContext.version),L=V[0].dims.length,[z,W]=U.calculateTextureWidthAndHeight(V[1].dims,R.TextureType.unpacked),X=`
  float process(int[${L}] indices) {
    vec2 position = offsetToCoords(indices[1], ${z}, ${W});
    float scale = getColorAsFloat(${O.texture2D}(Scale, position));
    float mean = getColorAsFloat(${O.texture2D}(Mean, position));
    float variance = getColorAsFloat(${O.texture2D}(Variance, position));
    float b = getColorAsFloat(${O.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${D.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},I),{output:{dims:V[0].dims,type:V[0].type,textureType:R.TextureType.unpacked},shaderSource:X})},B=U=>{if(!U||U.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const V=U[0],D=U[1],O=U[2],L=U[3],z=U[4];if(V.dims.length<3||D.dims.length!==1||O.dims.length!==1||L.dims.length!==1||z.dims.length!==1)throw new Error("invalid input shape.");if(D.dims[0]!==V.dims[1]||O.dims[0]!==V.dims[1]||L.dims[0]!==V.dims[1]||z.dims[0]!==V.dims[1])throw new Error("invalid input shape.");if(V.type!=="float32"&&V.type!=="float64"||D.type!=="float32"&&D.type!=="float64"||O.type!=="float32"&&O.type!=="float64"||L.type!=="float32"&&L.type!=="float64"||z.type!=="float32"&&z.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.xor=_.sub=_.pRelu=_.pow=_.or=_.mul=_.less=_.greater=_.equal=_.div=_.and=_.add=_.glslPRelu=_.glslPow=_.glslXor=_.glslOr=_.glslAnd=_.glslLess=_.glslGreater=_.glslEqual=_.glslSub=_.glslMul=_.glslDiv=_.glslAdd=void 0;const C=E(2517),A=E(8520),R=E(5060),I=E(2039);function F(){const J="add_";return{body:`
  float ${J}(float a, float b) {
    return a + b;
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:J,type:A.FunctionType.ValueBased}}function B(){const J="div_";return{body:`
  float ${J}(float a, float b) {
    return a / b;
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:J,type:A.FunctionType.ValueBased}}function U(){const J="mul_";return{body:`
  float ${J}(float a, float b) {
    return a * b;
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:J,type:A.FunctionType.ValueBased}}function V(){const J="sub_";return{body:`
  float ${J}(float a, float b) {
    return a - b;
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:J,type:A.FunctionType.ValueBased}}function D(){const J="equal_";return{body:`
  float ${J}(float a, float b) {
    return float(a == b);
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:J,type:A.FunctionType.ValueBased}}function O(){const J="greater_";return{body:`
  float ${J}(float a, float b) {
    return float(a > b);
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:J,type:A.FunctionType.ValueBased}}function L(){const J="less_";return{body:`
  float ${J}(float a, float b) {
    return float(a < b);
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:J,type:A.FunctionType.ValueBased}}function z(){const J="and_";return{body:`
  float ${J}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:J,type:A.FunctionType.ValueBased}}function W(){const J="or_";return{body:`
  float ${J}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:J,type:A.FunctionType.ValueBased}}function X(){const J="xor_";return{body:`
  float ${J}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:J,type:A.FunctionType.ValueBased}}function Y(){return function(J){const ie=`${J}_`;return{body:`
  float ${ie}(float a, float b) {
    return ${J}(a, b);
  }
  vec4 ${ie}(vec4 v1, vec4 v2) {
    return ${J}(v1, v2);
  }
  `,name:ie,type:A.FunctionType.ValueBased}}("pow")}function K(){const J="prelu_";return{body:`
  float ${J}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${J}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:J,type:A.FunctionType.ValueBased}}_.glslAdd=F,_.glslDiv=B,_.glslMul=U,_.glslSub=V,_.glslEqual=D,_.glslGreater=O,_.glslLess=L,_.glslAnd=z,_.glslOr=W,_.glslXor=X,_.glslPow=Y,_.glslPRelu=K;const Q=(J,ie,re,se=ie[0].type,ne)=>{const oe=J.session.pack?I.TextureType.packed:I.TextureType.unpacked;return{name:re.name,inputNames:["A","B"],inputTypes:[oe,oe],cacheHint:ne,get:()=>ee(J,ie,re,se)}},ee=(J,ie,re,se=ie[0].type)=>{const ne=J.session.pack?I.TextureType.packed:I.TextureType.unpacked,oe=!C.ShapeUtil.areEqual(ie[0].dims,ie[1].dims);let fe=ie[0].dims;const he=J.session.pack;if(oe){const we=C.BroadcastUtil.calcShape(ie[0].dims,ie[1].dims,!1);if(!we)throw new Error("Can't perform binary op on the given tensors");fe=we;const le=fe.length,de=ie[0].dims.length!==0?ie[0].dims.length:1,ce=ie[1].dims.length!==0?ie[1].dims.length:1,ve=ie[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",be=ie[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",me=(0,R.getGlsl)(J.session.backend.glContext.version),xe=he?`
      ${re.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${re.name}(a, b);
        ${me.output} = result;
      }`:`
      ${re.body}
      float process(int indices[${le}]) {
        int aindices[${de}];
        int bindices[${ce}];
        ${ve}
        ${be}
        return ${re.name}(_A(aindices), _B(bindices));
      }`;return{name:re.name,inputNames:["A","B"],inputTypes:[ne,ne],output:{dims:fe,type:se,textureType:ne},shaderSource:xe,hasMain:he}}const ge=(0,R.getGlsl)(J.session.backend.glContext.version),ye=`
    ${re.body}
    void main() {
      vec4 v1 = ${ge.texture2D}(A, TexCoords);
      vec4 v2 = ${ge.texture2D}(B, TexCoords);
      vec4 result = ${re.name}(v1, v2);
      ${ge.output} = result;
    }
    `;return{name:re.name,inputNames:["A","B"],inputTypes:[ne,ne],output:{dims:ie[0].dims,type:se,textureType:ne},shaderSource:ye,hasMain:!0}};_.add=(J,ie)=>[J.run(Q(J,ie,F()),ie)],_.and=(J,ie)=>[J.run(Q(J,ie,z(),"bool"),ie)],_.div=(J,ie)=>[J.run(Q(J,ie,B()),ie)],_.equal=(J,ie)=>[J.run(Q(J,ie,D(),"bool"),ie)],_.greater=(J,ie)=>[J.run(Q(J,ie,O(),"bool"),ie)],_.less=(J,ie)=>[J.run(Q(J,ie,L(),"bool"),ie)],_.mul=(J,ie)=>[J.run(Q(J,ie,U()),ie)],_.or=(J,ie)=>[J.run(Q(J,ie,W(),"bool"),ie)],_.pow=(J,ie)=>[J.run(Q(J,ie,Y()),ie)],_.pRelu=(J,ie)=>[J.run(Q(J,ie,K()),ie)],_.sub=(J,ie)=>[J.run(Q(J,ie,V()),ie)],_.xor=(J,ie)=>[J.run(Q(J,ie,X(),"bool"),ie)]},4196:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseCastAttributes=_.cast=void 0;const C=E(2517);_.cast=(R,I,F)=>(A(I),[R.cast(I[0],F)]),_.parseCastAttributes=R=>C.ProtoUtil.tensorDataTypeFromProto(R.attributes.getInt("to"));const A=R=>{if(!R||R.length!==1)throw new Error("Cast requires 1 input.");if(R[0].type==="string")throw new Error("Invalid input type.")}},1163:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedConcatProgramInfoLoader=void 0;const C=E(5060),A=E(2039),R=E(9390),I=E(2827);_.createPackedConcatProgramInfoLoader=(B,U,V)=>{const D=(O=U.length,L=V.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:O},(z,W)=>`X${W}`),inputTypes:Array(O).fill(A.TextureType.packed),cacheHint:L});var O,L;return Object.assign(Object.assign({},D),{get:()=>((z,W,X,Y)=>{const K=X[0].dims.slice();if(Y>=K.length||Y<-1*K.length)throw new Error("axis specified for concat doesn't match input dimensionality");Y<0&&(Y=K.length+Y);const Q=K.slice(0);for(let ve=1;ve<X.length;ve++){const be=X[ve].dims.slice();for(let me=0;me<K.length;me++)if(me===Y)Q[Y]+=be[me];else if(K[me]!==be[me])throw new Error("non concat dimensions must match")}const ee=Q.length,J=(0,I.getChannels)("coords",ee),ie=(0,R.getCoordsDataType)(ee),re=(0,I.unpackFromChannel)(),se=X.map(ve=>ve.dims),ne=(0,R.getGlChannels)(ee),oe=new Array(se.length-1);oe[0]=se[0][Y];for(let ve=1;ve<oe.length;ve++)oe[ve]=oe[ve-1]+se[ve][Y];const fe=ne[Y],he=ne.slice(-2),ge=ne.join();let ye=`if (${fe} < ${oe[0]}) {
        return getChannel(
            getX0(${ge}), vec2(${he.join()}));
        }`;for(let ve=1;ve<oe.length;ve++){const be=oe[ve-1];ye+=`
            if (${fe} < ${oe[ve]}  && ${fe} >= ${oe[ve-1]}) {
              return getChannel(
                getX${ve}(${F(ne,fe,be)}),
                vec2(${F(he,fe,be)}));
            }`}const we=oe.length,le=oe[oe.length-1];ye+=`
            return getChannel(
              getX${we}(${F(ne,fe,le)}),
              vec2(${F(he,fe,le)}));`;const de=(0,C.getGlsl)(z.session.backend.glContext.version),ce=`
          ${re}
          float getValue(${ne.map(ve=>"int "+ve)}) {
            ${ye}
          }

          void main() {
            ${ie} coords = getOutputCoords();
            int lastDim = coords.${ne[ee-1]};
            coords.${ne[ee-1]} = coords.${ne[ee-2]};
            coords.${ne[ee-2]} = lastDim;

            vec4 result = vec4(getValue(${J}), 0., 0., 0.);

            ${J[ee-1]} = ${J[ee-1]} + 1;
            if (${J[ee-1]} < ${Q[ee-1]}) {
              result.g = getValue(${J});
            }

            ${J[ee-2]} = ${J[ee-2]} + 1;
            if (${J[ee-2]} < ${Q[ee-2]}) {
              result.a = getValue(${J});
            }

            ${J[ee-1]} = ${J[ee-1]} - 1;
            if (${J[ee-2]} < ${Q[ee-2]} &&
                ${J[ee-1]} < ${Q[ee-1]}) {
              result.b = getValue(${J});
            }
            ${de.output} = result;
          }
        `;return Object.assign(Object.assign({},W),{output:{dims:Q,type:X[0].type,textureType:A.TextureType.packed},shaderSource:ce,hasMain:!0})})(B,D,U,V.axis)})};const F=(B,U,V)=>{const D=B.indexOf(U);return B.map((O,L)=>L===D?`${O} - ${V}`:O).join()}},2069:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConcatAttributes=_.concat=void 0;const C=E(246),A=E(2039),R=E(1163);_.concat=(O,L,z)=>(D(L),O.session.pack&&L[0].dims.length>1?[O.run((0,R.createPackedConcatProgramInfoLoader)(O,L,z),L)]:[O.run(I(O,L,z),L)]);const I=(O,L,z)=>{const W=(X=L.length,Y=z.cacheKey,{name:"Concat",inputNames:Array.from({length:X},(K,Q)=>`X${Q}`),inputTypes:Array(X).fill(A.TextureType.unpacked),cacheHint:Y});var X,Y;return Object.assign(Object.assign({},W),{get:()=>((K,Q,ee,J)=>{const ie=ee[0].dims.slice();if(J>=ie.length||J<-1*ie.length)throw new Error("axis specified for concat doesn't match input dimensionality");J<0&&(J=ie.length+J);const re=ie.slice(0);for(let ge=1;ge<ee.length;ge++){const ye=ee[ge].dims.slice();for(let we=0;we<ie.length;we++)if(we===J)re[J]+=ye[we];else if(ie[we]!==ye[we])throw new Error("non concat dimensions must match")}const se=re.length,ne=new Array(ee.length);let oe=0;for(let ge=0;ge<ne.length;++ge)oe+=ee[ge].dims[J],ne[ge]=oe;let fe="";fe=ee.length<5?F(ne):B(ne);const he=`
        ${U(ee.length,se)}
        ${V(ne)}
        ${fe}
        float process(int indices[${se}]) {
          int textureIndex = getTextureWhereDataResides (indices[${J}]);

          if(textureIndex != 0) {
            indices[${J}] = indices[${J}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},Q),{output:{dims:re,type:ee[0].type,textureType:A.TextureType.unpacked},shaderSource:he})})(0,W,L,z.axis)})},F=O=>`int getTextureWhereDataResides(int index) {
      ${O.map((L,z)=>`if(index<${L}) {return ${z};}
`).join("")}
    }`,B=O=>F(O),U=(O,L)=>{const z=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${L}]) {`];for(let W=0;W<O;++W)W===0?z.push(`	if (textureIndex == ${W}) { return _X${W}(indices); }`):W===O-1?z.push(`	else { return _X${W}(indices); }`):z.push(`	else if (textureIndex == ${W}) { return _X${W}(indices); }`);return z.push("	}"),z.join(`
`)},V=O=>{const L=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let z=0;z<O.length;++z)z===0?L.push(`	if (index == ${z}) { return ${O[z]}; }`):z===O.length-1?L.push(`	else { return ${O[z]}; }`):L.push(`	else if (index == ${z}) { return ${O[z]}; }`);return L.push("	}"),L.join(`
`)};_.parseConcatAttributes=O=>(0,C.createAttributeWithCacheKey)({axis:O.attributes.getInt("axis")});const D=O=>{if(!O||O.length<1)throw new Error("too few inputs");const L=O[0].type,z=O[0].dims.length;if(L==="string")throw new Error("string tensor is not supported yet");for(const W of O){if(W.type!==L)throw new Error("input tensors should be one type");if(W.dims.length!==z)throw new Error("input tensors should have the same shape")}}},4770:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackedGroupedConvProgramInfoLoader=void 0;const C=E(6231),A=E(5060),R=E(2039),I=E(8138),F=E(2823);_.createUnpackedGroupedConvProgramInfoLoader=(B,U,V)=>{const D=(O=U.length>2,L=V.cacheKey,{name:"GroupedConv",inputNames:O?["X","W","Bias"]:["X","W"],inputTypes:O?[R.TextureType.unpacked,R.TextureType.unpacked,R.TextureType.unpacked]:[R.TextureType.unpacked,R.TextureType.unpacked],cacheHint:L});var O,L;return Object.assign(Object.assign({},D),{get:()=>((z,W,X,Y)=>{const K=W.length>2?"value += getBias(output_channel);":"",Q=W[0].dims.slice(),ee=W[1].dims.slice(),J=ee[0]/Y.group;C.Logger.verbose("GroupedConv",`autpPad:${Y.autoPad}, dilations:${Y.dilations}, group:${Y.group}, kernelShape:${Y.kernelShape}, pads:${Y.pads}, strides:${Y.strides}`);const ie=(0,I.calculateOutputShape)(Q,ee,Y.dilations,Y.pads,Y.strides),re=(0,A.getGlsl)(z.session.backend.glContext.version),{activationFunction:se,applyActivation:ne}=(0,F.getActivationSnippet)(Y),oe=`
  const ivec2 strides = ivec2(${Y.strides[0]}, ${Y.strides[1]});
  const ivec2 pads = ivec2(${Y.pads[0]}, ${Y.pads[1]});
  ${se}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${J};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${ee[1]}; wInChannel++) {
      int input_channel = group_id * ${ee[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${ee[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${Y.dilations[0]};

        if (xHeight < 0 || xHeight >= ${Q[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${ee[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${Y.dilations[1]};
          if (xWidth < 0 || xWidth >= ${Q[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${K}
    ${ne}
    ${re.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},X),{output:{dims:ie,type:W[0].type,textureType:R.TextureType.unpacked},shaderSource:oe,hasMain:!0})})(B,U,D,V)})}},1386:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.conv2DPacked=_.conv2DPackedPointwise=void 0;const C=E(8138),A=E(8555),R=E(708);_.conv2DPackedPointwise=(I,F,B)=>{const U=F[0].dims,V=F[1].dims,D=(0,C.calculateOutputShape)(U,V,B.dilations,B.pads,B.strides),O=I.reshapePacked(F[0],[U[1],U[2]*U[3]]),L=I.reshapePacked(F[1],[V[0],V[1]]),z=F.length>2?[L,O,F[2]]:[L,O],W=I.run((0,R.createPackedMatmulProgramInfoLoader)(I,z,B),z);return I.reshapePacked(W,D)},_.conv2DPacked=(I,F,B)=>{const U=F[0].dims,V=F[1].dims,D=(0,C.calculateOutputShape)(U,V,B.dilations,B.pads,B.strides),O=I.run((0,A.createPackedIm2ColProgramInfoLoader)(I,F[0],F[1],D,B),[F[0]]),L=I.reshapePacked(F[1],[V[0],V[1]*V[2]*V[3]]),z=F.length===3?[L,O,F[2]]:[L,O],W=I.run((0,R.createPackedMatmulProgramInfoLoader)(I,z,B),z);return I.reshapePacked(W,D)}},9663:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvTransposeAttributes=_.convTranspose=void 0;const C=E(246),A=E(5060),R=E(2039),I=E(2823),F=(L,z,W,X,Y,K)=>(L-1)*z+W+(X-1)*Y+1-K,B=(L,z,W,X,Y)=>{const K=Math.floor(L/2);z==="SAME_UPPER"?(W[X]=K,W[Y]=L-K):z==="SAME_LOWER"&&(W[X]=L-K,W[Y]=K)};_.convTranspose=(L,z,W)=>(O(z,W),U(L,z,W));const U=(L,z,W)=>{const X=D(W,z);return[V(L,z,X)]},V=(L,z,W)=>L.run(((X,Y,K)=>{const Q=(ee=Y.length>2,J=K.cacheKey,{name:"ConvTranspose",inputNames:ee?["X","W","B"]:["X","W"],inputTypes:ee?[R.TextureType.unpacked,R.TextureType.unpacked,R.TextureType.unpacked]:[R.TextureType.unpacked,R.TextureType.unpacked],cacheHint:J});var ee,J;return Object.assign(Object.assign({},Q),{get:()=>((ie,re,se,ne)=>{const oe=re.length>2?"getB(output_channel)":"0.0",fe=re[0].dims,he=re[1].dims,ge=he[1],ye=he[0]/ne.group,we=[re[0].dims[0],re[1].dims[1]*ne.group,...ne.outputShape],le=(0,A.getGlsl)(ie.session.backend.glContext.version),{activationFunction:de,applyActivation:ce}=(0,I.getActivationSnippet)(ne),ve=`
  const ivec2 strides = ivec2(${ne.strides[0]}, ${ne.strides[1]});
  const ivec2 pads = ivec2(${ne.pads[0]}, ${ne.pads[1]});
  ${de}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${ge};
    int wOutChannel = output_channel - group_id * ${ge};

    float value = ${oe};
    for (int inChannelOffset = 0; inChannelOffset < ${ye}; inChannelOffset++) {
      int input_channel = group_id * ${ye} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${he[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${he[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${ne.dilations[0]}, wHOff * ${ne.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${fe[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${fe[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${ce}
    ${le.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},se),{output:{dims:we,type:re[0].type,textureType:R.TextureType.unpacked},shaderSource:ve,hasMain:!0})})(X,Y,Q,K)})})(L,z,W),z),D=(L,z)=>{const W=L.kernelShape.slice();if(L.kernelShape.length===0)for(let Q=2;Q<z[1].dims.length;++Q)W.push(z[1].dims[Q]);const X=L.pads.slice(),Y=L.outputShape.slice();((Q,ee,J,ie,re,se,ne,oe)=>{const fe=Q.length-2,he=oe.length===0;for(let ge=0;ge<fe;++ge){const ye=he?Q[ge+2]*se[ge]:oe[ge],we=F(Q[ge+2],se[ge],re[ge],ee[ge],J[ge],ye);B(we,ie,re,ge,ge+fe),he&&oe.push(se[ge]*(Q[ge+2]-1)+ne[ge]+(ee[ge]-1)*J[ge]+1-re[ge]-re[ge+fe])}})(z[0].dims,W,L.dilations,L.autoPad,X,L.strides,L.outputPadding,Y);const K=Object.assign({},L);return Object.assign(K,{kernelShape:W,pads:X,outputShape:Y,cacheKey:L.cacheKey}),K};_.parseConvTransposeAttributes=L=>{const z=L.attributes,W=(0,I.parseInternalActivationAttributes)(z),X=z.getString("auto_pad","NOTSET"),Y=z.getInts("dilations",[1,1]),K=z.getInt("group",1),Q=z.getInts("kernel_shape",[]),ee=z.getInts("output_padding",[0,0]),J=z.getInts("output_shape",[]),ie=z.getInts("pads",[0,0,0,0]),re=z.getInts("strides",[1,1]);return(0,C.createAttributeWithCacheKey)(Object.assign({autoPad:X,dilations:Y,group:K,kernelShape:Q,outputPadding:ee,outputShape:J,pads:ie,strides:re},W))};const O=(L,z)=>{if(!L||L.length!==2&&L.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(L[0].dims.length!==4||L[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(L[0].dims[1]!==L[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const W=L[1].dims[1]*z.group;if(L.length===3&&(L[2].dims.length!==1||L[2].dims[0]!==W))throw new Error("invalid bias");const X=L[0].dims.length-2;if(z.dilations.length!==X)throw new Error(`dilations should be ${X}D`);if(z.strides.length!==X)throw new Error(`strides should be ${X}D`);if(z.pads.length!==2*X)throw new Error(`pads should be ${2*X}D`);if(z.outputPadding.length!==X)throw new Error(`output_padding should be ${X}D`);if(z.kernelShape.length!==0&&z.kernelShape.length!==L[1].dims.length-2)throw new Error("invalid kernel shape");if(z.outputShape.length!==0&&z.outputShape.length!==L[0].dims.length-2)throw new Error("invalid output shape");if(L[0].type!=="float32"||L[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(L.length===3&&L[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvAttributes=_.conv=_.calculateOutputShape=void 0;const C=E(246),A=E(2517),R=E(4770),I=E(1386),F=E(9828),B=E(2823),U=E(3248),V=E(5623);_.calculateOutputShape=(X,Y,K,Q,ee)=>{const J=X[0],ie=X.slice(2),re=ie.length,se=Y[0],ne=Y.slice(2).map((fe,he)=>fe+(fe-1)*(K[he]-1)),oe=ie.map((fe,he)=>fe+Q[he]+Q[he+re]).map((fe,he)=>Math.floor((fe-ne[he]+ee[he])/ee[he]));return[J,se].concat(...oe)},_.conv=(X,Y,K)=>(W(Y,K),D(X,Y,K));const D=(X,Y,K)=>{const Q=z(K,Y),ee=X.session.pack,J=Q.kernelShape[0]===1&&Q.kernelShape[1]===1;return Q.group>1?[X.run((0,R.createUnpackedGroupedConvProgramInfoLoader)(X,Y,Q),Y)]:J&&ee?[O(X,Y,Q)]:ee&&Y[0].dims.length===4&&Y[0].dims[0]===1&&!J?[(0,I.conv2DPacked)(X,Y,Q)]:[L(X,Y,Q)]},O=(X,Y,K)=>{const Q=Y[0].dims,ee=Y[1].dims,J=(0,_.calculateOutputShape)(Q,ee,K.dilations,K.pads,K.strides),ie=X.reshapeUnpacked(Y[0],[Q[1],Q[2]*Q[3]]),re=X.reshapeUnpacked(Y[1],[ee[0],ee[1]]),se=Y.length>2?[re,ie,Y[2]]:[re,ie],ne=X.run((0,V.createMatmulProgramInfoLoader)(se,K),se);return X.reshapeUnpacked(ne,J)},L=(X,Y,K)=>{const Q=Y[0].dims,ee=Y[1].dims,J=(0,_.calculateOutputShape)(Q,ee,K.dilations,K.pads,K.strides),ie=X.run((0,U.createIm2ColProgramInfoLoader)(X,Y[0],Y[1],J,K),[Y[0]]),re=Y.length===3?[ie,Y[1],Y[2]]:[ie,Y[1]];return X.run((0,F.createDotProductProgramInfoLoader)(X,Y,J,K),re)},z=(X,Y)=>{const K=X.kernelShape.slice();if(X.kernelShape.length===0)for(let J=2;J<Y[1].dims.length;++J)K.push(Y[1].dims[J]);const Q=X.pads.slice();A.PoolConvUtil.adjustPadsBasedOnAutoPad(Y[0].dims,X.strides,X.dilations,K,Q,X.autoPad);const ee=Object.assign({},X);return Object.assign(ee,{kernelShape:K,pads:Q,cacheKey:X.cacheKey}),ee};_.parseConvAttributes=X=>{const Y=X.attributes,K=(0,B.parseInternalActivationAttributes)(Y),Q=Y.getString("auto_pad","NOTSET"),ee=Y.getInts("dilations",[1,1]),J=Y.getInt("group",1),ie=Y.getInts("kernel_shape",[]),re=Y.getInts("pads",[0,0,0,0]),se=Y.getInts("strides",[1,1]);return(0,C.createAttributeWithCacheKey)(Object.assign({autoPad:Q,dilations:ee,group:J,kernelShape:ie,pads:re,strides:se},K))};const W=(X,Y)=>{if(!X||X.length!==2&&X.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(X[0].dims.length!==4||X[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(X[0].dims[1]!==X[1].dims[1]*Y.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(X.length===3&&(X[2].dims.length!==1||X[1].dims[0]!==X[2].dims[0]))throw new Error("invalid bias");const K=X[0].dims.length-2;if(Y.dilations.length!==K)throw new Error(`dilations should be ${K}D`);if(Y.strides.length!==K)throw new Error(`strides should be ${K}D`);if(Y.pads.length!==2*K)throw new Error(`pads should be ${2*K}D`);if(Y.kernelShape.length!==0&&Y.kernelShape.length!==X[1].dims.length-2)throw new Error("invalid kernel shape");if(X[0].type!=="float32"||X[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(X.length===3&&X[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseDepthToSpaceAttributes=_.depthToSpace=void 0;const C=E(3738);_.depthToSpace=(R,I,F)=>{A(I);const B=F.blocksize,U=B*B,V=F.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],D=F.mode==="DCR"?[I[0].dims[0],B,B,I[0].dims[1]/U,I[0].dims[2],I[0].dims[3]]:[I[0].dims[0],I[0].dims[1]/U,B,B,I[0].dims[2],I[0].dims[3]],O=R.reshapeUnpacked(I[0],D),L={perm:V,cacheKey:`${V}`},[z]=(0,C.transpose)(R,[O],L),W=[I[0].dims[0],I[0].dims[1]/U,I[0].dims[2]*B,I[0].dims[3]*B];return[R.reshapeUnpacked(z,W)]},_.parseDepthToSpaceAttributes=R=>{const I=R.attributes.getInt("blocksize");if(I<1)throw new Error(`blocksize must be >= 1, but got : ${I} for DepthToSpace`);const F=R.attributes.getString("mode","DCR");if(F!=="DCR"&&F!=="CRD")throw new Error(`unrecognized mode: ${F} for DepthToSpace`);return{mode:F,blocksize:I}};const A=R=>{if(R.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${R.length}`);if(R[0].type==="string"||R[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createDotProductProgramInfoLoader=void 0;const C=E(2517),A=E(5060),R=E(2039),I=E(2823),F=E(3248);_.createDotProductProgramInfoLoader=(B,U,V,D)=>{const O=((L,z)=>({name:"ConvDotProduct",inputNames:L?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:L?[R.TextureType.unpacked,R.TextureType.packedLastDimension,R.TextureType.unpacked]:[R.TextureType.unpacked,R.TextureType.packedLastDimension],cacheKey:z.activationCacheKey}))(U.length>2,D);return Object.assign(Object.assign({},O),{get:()=>((L,z,W,X,Y)=>{const K=W[0].dims,Q=W[1].dims,ee=[Q[0],Math.ceil(K[1]*Q[2]*Q[3]/4)],J=(0,F.calculateIm2ColDims)(K,Q,X),[ie,re]=L.calculateTextureWidthAndHeight(ee,R.TextureType.packedLastDimension),se=C.ShapeUtil.computeStrides(J),[ne,oe]=L.calculateTextureWidthAndHeight(J,R.TextureType.packedLastDimension),fe=X.length,he=W.length<3?"0.0":"_B(b)",ge=Math.ceil(K[1]*Q[2]*Q[3]/4),{activationFunction:ye,applyActivation:we}=(0,I.getActivationSnippet)(Y),le=(0,A.getGlsl)(L.session.backend.glContext.version),de=`
${ye}
float process(int indices[${fe}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${se[0]} + im2col[1] * ${se[1]} + im2col[2] * ${se[2]};
  int kernelOffset = indices[1] * ${ee[1]};
  float value = ${he};
  for (int i = 0; i < ${ge}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${ne}, ${oe});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${ie}, ${re});
    value += dot(${le.texture2D}(Im2Col, im2colCoords), ${le.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${we}
  return value;
}`;return Object.assign(Object.assign({},z),{output:{dims:X,type:W[0].type,textureType:R.TextureType.unpacked},shaderSource:de})})(B,O,U,V,D)})}},7992:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseFlattenAttributes=_.flatten=void 0;const C=E(2517);_.flatten=(R,I,F)=>{A(I,F);const B=C.ShapeUtil.flattenShape(I[0].dims,F);return[R.reshapeUnpacked(I[0],B)]},_.parseFlattenAttributes=R=>R.attributes.getInt("axis",1);const A=(R,I)=>{if(!R||R.length!==1)throw new Error("Flatten requires 1 input.");const F=R[0].dims.length;if(F===0)throw new Error("scalar tensor is not supported.");if(I<-F||I>F)throw new Error("Invalid axis");if(R[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInternalActivationAttributes=_.getActivationSnippet=void 0;const C=E(2517),A=E(4909);_.getActivationSnippet=function(R){let I;switch(R.activation){case"Relu":I=(0,A.glslRelu)();break;case"Sigmoid":I=(0,A.glslSigmoid)();break;case"Clip":I=(0,A.glslClip)(R.clipMin,R.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const F=I.name;return{activationFunction:I.body,applyActivation:`value = ${F}_(value);`}},_.parseInternalActivationAttributes=R=>{const I=R.getString("activation","");if(I==="Clip"){const[F,B]=R.getFloats("activation_params",[C.MIN_CLIP,C.MAX_CLIP]);return{activation:I,clipMax:B,clipMin:F,activationCacheKey:`${I}:${F},${B}`}}return{activation:I,activationCacheKey:I}}},1253:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGatherAttributes=_.gather=void 0;const C=E(246),A=E(782),R=E(2517),I=E(2039);_.gather=(V,D,O)=>(U(D,O.axis),[V.run(B(V,D,O),D)]),_.parseGatherAttributes=V=>(0,C.createAttributeWithCacheKey)({axis:V.attributes.getInt("axis",0)});const F={name:"Gather",inputNames:["A","B"],inputTypes:[I.TextureType.unpacked,I.TextureType.unpacked]},B=(V,D,O)=>{const L=Object.assign(Object.assign({},F),{cacheHint:O.cacheKey});return Object.assign(Object.assign({},L),{get:()=>((z,W,X,Y)=>{const K=X[0].dims.slice(),Q=X[1].dims.slice(),ee=new Array(K.length+Q.length-1);Y=R.ShapeUtil.normalizeAxis(Y,K.length);const J=[];for(let re=0;re<ee.length;re++)re<Y?(ee[re]=K[re],J.push(`inputIdx[${re}] = outputIdx[${re}];`)):re<Y+Q.length?(ee[re]=Q[re-Y],J.push(`indexDataIdx[${re-Y}] = outputIdx[${re}];`)):(ee[re]=K[re-Q.length+1],J.push(`inputIdx[${re-Q.length+1}] = outputIdx[${re}];`));const ie=`
      float process(int outputIdx[${ee.length||1}]) {
        int inputIdx[${K.length}];
        int indexDataIdx[${Q.length||1}];
        indexDataIdx[0] = 0;
        ${J.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${Y}] = idx < 0 ? idx + ${K[Y]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},W),{output:{dims:ee,type:X[0].type,textureType:I.TextureType.unpacked},shaderSource:ie})})(0,L,D,O.axis)})},U=(V,D)=>{if(!V||V.length!==2)throw new Error("Gather requires 2 inputs.");const O=V[0].dims.length;if(O<1)throw new Error("Invalid input shape.");if(D<-O||D>O-1)throw new Error("Invalid axis.");if(A.NUMBER_TYPES.indexOf(V[0].type)===-1)throw new Error("Invaid input type.");if(V[1].type!=="int32"&&V[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGemmAttributesV11=_.parseGemmAttributesV7=_.gemm=void 0;const C=E(246),A=E(2517),R=E(2039);_.gemm=(V,D,O)=>(U(D,O),[V.run(F(D,O),D)]);const I=(V,D)=>{const O=V.attributes.getInt("transA",0)!==0,L=V.attributes.getInt("transB",0)!==0,z=V.attributes.getFloat("alpha",1),W=V.attributes.getFloat("beta",1);return(0,C.createAttributeWithCacheKey)({transA:O,transB:L,alpha:z,beta:W,isOptionalC:D})};_.parseGemmAttributesV7=V=>I(V,!1),_.parseGemmAttributesV11=V=>I(V,!0);const F=(V,D)=>{const O={name:"Gemm",inputNames:V.length===3?["A","B","C"]:["A","B"],inputTypes:V.length===3?[R.TextureType.unpacked,R.TextureType.unpacked,R.TextureType.unpacked]:[R.TextureType.unpacked,R.TextureType.unpacked],key:D.cacheKey};return Object.assign(Object.assign({},O),{get:()=>B(O,V,D)})},B=(V,D,O)=>{const L=D[0].dims.slice(),z=D[1].dims.slice(),[W,X]=A.GemmUtil.getShapeOfGemmResult(L,O.transA,z,O.transB,D.length===3?D[2].dims:void 0),Y=[W,X];if(!Y)throw new Error("Can't use gemm on the given tensors");let K=L[L.length-1],Q="";O.transA&&(K=L[0]),O.transA&&O.transB?Q="value += _A_T(a) * _B_T(b);":O.transA&&!O.transB?Q="value += _A_T(a) * _B(b);":!O.transA&&O.transB?Q="value += _A(a) * _B_T(b);":O.transA||O.transB||(Q="value += _A(a) * _B(b);");const ee=Y.length,J=`
      float process(int indices[${ee}]) {
          int a[${ee}];
          int b[${ee}];
          ${D.length===3?`int c[${D[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${D.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${K}; ++k) {
              a[${ee-1}] = k;
              b[${ee-2}] = k;
              ${Q}
          }

          value = value * alpha;
          ${D.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},V),{output:{dims:Y,type:D[0].type,textureType:R.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:O.alpha},{name:"beta",type:"float",data:O.beta}],shaderSource:J})},U=(V,D)=>{if(!V)throw new Error("Input is missing");if(D.isOptionalC&&(V.length<2||V.length>3))throw new Error("Invaid input shape.");if(!D.isOptionalC&&V.length!==3)throw new Error("Gemm requires 3 inputs");if(V.length===3&&V[2].dims.length!==1&&V[2].dims.length!==2)throw new Error("Invalid input shape of C");if(V[0].type!=="float32"&&V[0].type!=="float64"||V[1].type!=="float32"&&V[1].type!=="float64"||V.length===3&&V[2].type!=="float32"&&V[2].type!=="float64")throw new Error("Invalid input type.");if(V[0].type!==V[1].type||V.length===3&&V[0].type!==V[2].type)throw new Error("Input types are mismatched")}},8555:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedIm2ColProgramInfoLoader=void 0;const C=E(5060),A=E(2039),R=E(2827);_.createPackedIm2ColProgramInfoLoader=(I,F,B,U,V)=>{const D=(O=V.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[A.TextureType.packed],cacheHint:O});var O;return Object.assign(Object.assign({},D),{get:()=>((L,z,W,X,Y,K)=>{const Q=W.dims,ee=X.dims,J=Y.length,ie=[ee[1]*ee[2]*ee[3],Y[2]*Y[3]],re=ee[2]*ee[3],se=(0,R.unpackFromChannel)(),ne=(0,C.getGlsl)(L.session.backend.glContext.version);let oe="";for(let he=0;he<=1;he++)for(let ge=0;ge<=1;ge++)oe+=`
            blockIndex = rc.x + ${ge};
            pos = rc.y + ${he};

            if(blockIndex < ${ie[1]} && pos < ${ie[0]}) {
              offsetY = int(blockIndex / (${Y[J-1]})) * ${K.strides[0]} -
                ${K.pads[0]};
              d0 = offsetY + ${K.dilations[0]} * (imod(pos, ${re}) / ${ee[2]});

              if(d0 < ${Q[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${Y[J-1]}) * ${K.strides[1]} -
                  ${K.pads[1]};
                d1 = offsetX + ${K.dilations[1]} * imod(imod(pos, ${re}), ${ee[2]});

                if(d1 < ${Q[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${re}.);
                    innerDims = vec2(d0, d1);
                    result[${2*he+ge}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const fe=`
      ${se}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${oe}
          ${ne.output} = result;
      }
            `;return Object.assign(Object.assign({},z),{output:{dims:ie,type:W.type,textureType:A.TextureType.packed},shaderSource:fe,hasMain:!0})})(I,D,F,B,U,V)})}},3248:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.calculateIm2ColDims=_.createIm2ColProgramInfoLoader=void 0;const C=E(2039);_.createIm2ColProgramInfoLoader=(A,R,I,F,B)=>{const U=(V=B.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[C.TextureType.unpacked],cacheHint:V});var V;return Object.assign(Object.assign({},U),{get:()=>((D,O,L,z,W,X)=>{const Y=L.dims,K=z.dims,Q=W.length,ee=(0,_.calculateIm2ColDims)(Y,K,W,4),J=`
        const int XC = ${Y[1]};
        const int XH = ${Y[2]};
        const int XW = ${Y[3]};
        const int KH = ${X.kernelShape[0]};
        const int KW = ${X.kernelShape[1]};
        const int dilationH = ${X.dilations[0]};
        const int dilationW = ${X.dilations[1]};
        const int strideH = ${X.strides[0]};
        const int strideW = ${X.strides[1]};
        const int padH = ${X.pads[0]};
        const int padW = ${X.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${Q}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${Y.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},O),{output:{dims:ee,type:L.type,textureType:C.TextureType.packedLastDimension},shaderSource:J})})(0,U,R,I,F,B)})},_.calculateIm2ColDims=(A,R,I,F=4)=>[I[0],I[2],I[3],Math.ceil(A[1]*R[2]*R[3]/F)]},6572:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseImageScalerAttributes=_.imageScaler=void 0;const C=E(246),A=E(2039);_.imageScaler=(U,V,D)=>(B(V),[U.run(I(U,V,D),V)]),_.parseImageScalerAttributes=U=>{const V=U.attributes.getFloat("scale"),D=U.attributes.getFloats("bias");return(0,C.createAttributeWithCacheKey)({scale:V,bias:D})};const R={name:"ImageScaler",inputNames:["X"],inputTypes:[A.TextureType.unpacked]},I=(U,V,D)=>{const O=Object.assign(Object.assign({},R),{cacheHint:D.cacheKey});return Object.assign(Object.assign({},O),{get:()=>((L,z,W,X)=>{const Y=W[0].dims.slice(),K=Y.length,Q=`
      ${F(X.bias.length)}
      float process(int indices[${K}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},z),{output:{dims:Y,type:W[0].type,textureType:A.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:X.bias.length,data:X.bias},{name:"scale",type:"float",data:X.scale}],shaderSource:Q})})(0,O,V,D)})},F=U=>{const V=[`float getBias(float bias[${U}], int channel) {`];for(let D=0;D<U;++D)D===0?V.push(`	if (channel == ${D}) { return bias[${D}]; }`):D===U-1?V.push(`	else { return bias[${D}]; }`):V.push(`	else if (channel == ${D}) { return bias[${D}]; }`);return V.push("	}"),V.join(`
`)},B=U=>{if(!U||U.length!==1)throw new Error("ImageScaler requires 1 input.");if(U[0].dims.length!==4)throw new Error("Invalid input shape.");if(U[0].type!=="float32"&&U[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInstanceNormalizationAttributes=_.instanceNormalization=void 0;const C=E(5060),A=E(2039);_.instanceNormalization=(V,D,O)=>{U(D);const L=V.run(I(D[0]),D);return[V.run(B(V,D[0],O,L.dims),[D[0],L,D[1],D[2]])]},_.parseInstanceNormalizationAttributes=V=>V.attributes.getFloat("epsilon",1e-5);const R={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[A.TextureType.unpacked]},I=V=>Object.assign(Object.assign({},R),{get:()=>((D,O)=>{const L=O.dims.slice(),z=L[1],W=L[2]*L[3],X=[L[0],z],Y=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${L[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${L[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${W});
        temp = 0.0;
        for(int a2=0; a2<${L[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${L[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${W});

        return v;
      }`;return Object.assign(Object.assign({},D),{output:{dims:X,type:O.type,textureType:A.TextureType.packedLastDimension},shaderSource:Y})})(R,V)}),F={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[A.TextureType.unpacked,A.TextureType.packedLastDimension,A.TextureType.unpacked,A.TextureType.unpacked]},B=(V,D,O,L)=>{const z=Object.assign(Object.assign({},F),{cacheHint:`${O}`});return Object.assign(Object.assign({},z),{get:()=>((W,X,Y,K,Q)=>{const ee=(0,C.getGlsl)(W.session.backend.glContext.version),[J,ie]=W.calculateTextureWidthAndHeight(Q,A.TextureType.packedLastDimension),[re,se]=[J/4,ie],ne=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${re}, ${se});
        return ${ee.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},X),{output:{dims:Y.dims,type:Y.type,textureType:A.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:K}],shaderSource:ne})})(V,z,D,O,L)})},U=V=>{if(!V||V.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const D=V[0],O=V[1],L=V[2];if(D.dims.length<3||O.dims.length!==1||L.dims.length!==1)throw new Error("Invalid input shape.");if(O.dims[0]!==D.dims[1]||L.dims[0]!==D.dims[1])throw new Error("Input shapes are mismatched.");if(D.type!=="float32"&&D.type!=="float64"||O.type!=="float32"&&O.type!=="float64"||L.type!=="float32"&&L.type!=="float64")throw new Error("Invalid input type.");if(V[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedMatmulProgramInfoLoader=void 0;const C=E(2517),A=E(5060),R=E(2039),I=E(9390),F=E(2823),B=E(5623);_.createPackedMatmulProgramInfoLoader=(U,V,D)=>{const O=(L=V.length>2,z=D.activationCacheKey,{name:"MatMul (packed)",inputNames:L?["A","B","Bias"]:["A","B"],inputTypes:L?[R.TextureType.packed,R.TextureType.packed,R.TextureType.packed]:[R.TextureType.packed,R.TextureType.packed],cacheHint:z});var L,z;return Object.assign(Object.assign({},O),{get:()=>((W,X,Y,K)=>{const Q=Y.length>2,ee=Q?"value += getBiasForMatmul();":"",J=Y[0].dims,ie=Y[1].dims,re=C.BroadcastUtil.calcShape(J,ie,!0),se=!C.ShapeUtil.areEqual(Y[0].dims,Y[1].dims);if(!re)throw new Error("Can't use matmul on the given tensors");const ne=J[J.length-1],oe=Math.ceil(ne/2),fe=J.length,he=ie.length,ge=(0,A.getGlsl)(W.session.backend.glContext.version),ye=(0,I.getCoordsDataType)(re.length),we=re.length,le=(0,I.getGlChannels)(),{activationFunction:de,applyActivation:ce}=(0,F.getActivationSnippet)(K),ve=Q?`${(0,B.getBiasForMatmul)(ye,le,Y[2].dims,re,!0)}`:"",be=se?`${function(De,Ie,je,Ye){let ke=[],Le=[];const Ne=je[0].dims,Qe=je[1].dims,et=Ne.length,Je=Qe.length,ut=Ye.length,lt=ut-et,it=ut-Je;ke=Ne.map((jt,Qt)=>`coords.${Ie[Qt+lt]}`),ke[et-1]="i*2",ke.join(", "),Le=Qe.map((jt,Qt)=>`coords.${Ie[Qt+it]}`),Le[Je-2]="i*2",Le.join(", ");const Bt=C.BroadcastUtil.getBroadcastDims(Ne,Ye),Yt=C.BroadcastUtil.getBroadcastDims(Qe,Ye),ar=Bt.map(jt=>`coords.${Ie[jt+lt]} = 0;`).join(`
`),Kt=Yt.map(jt=>`coords.${Ie[jt+it]} = 0;`).join(`
`),zt=`int lastDim = coords.${Ie[ut-1]};
  coords.${Ie[ut-1]} = coords.${Ie[ut-2]};
  coords.${Ie[ut-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${De} coords = getOutputCoords();
  ${zt}
  ${ar}
  vec4 outputValue = getA(${ke});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${De} coords = getOutputCoords();
  ${zt}
  ${Kt}
  vec4 outputValue = getB(${Le});
  return outputValue;
}`}(ye,le,Y,re)}`:"",me=se?"getAAtOutCoordsMatmul(i)":`getA(${function(De,Ie){let je="";for(let Ye=0;Ye<Ie-2;Ye++)je+=`rc.${De[Ye]}, `;return je+=`rc.${De[Ie-2]}, i*2`,je}(le,fe)})`,xe=se?"getBAtOutCoordsMatmul(i)":`getB(${function(De,Ie){let je="";for(let Ye=0;Ye<Ie-2;Ye++)je+=`rc.${De[Ye]}, `;return je+=`i*2, rc.${De[Ie-1]}`,je}(le,he)})`,Ae=`
            ${be}
            ${ve}
            ${de}
            void main() {
              ${se?"":`${ye} rc =
          getOutputCoords(); int lastDim = rc.${le[we-1]}; rc.${le[we-1]} =
          rc.${le[we-2]}; rc.${le[we-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${oe}; i++) {
                vec4 a = ${me};
                vec4 b = ${xe};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${ee}
              ${ce}
              ${ge.output} = value;
            }`;return Object.assign(Object.assign({},X),{output:{dims:re,type:Y[0].type,textureType:R.TextureType.packed},shaderSource:Ae,hasMain:!0})})(U,O,V,D)})}},5623:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBiasForMatmul=_.createMatmulProgramInfoLoader=_.parseMatMulAttributes=_.matMul=void 0;const C=E(2517),A=E(2039),R=E(9390),I=E(2823),F=E(708);function B(D,O){const L=(z=D.length>2,W=O.activationCacheKey,{name:"MatMul",inputNames:z?["A","B","Bias"]:["A","B"],inputTypes:z?[A.TextureType.unpacked,A.TextureType.unpacked,A.TextureType.unpacked]:[A.TextureType.unpacked,A.TextureType.unpacked],cacheHint:W});var z,W;return Object.assign(Object.assign({},L),{get:()=>function(X,Y,K){const Q=Y[0].dims,ee=Y[1].dims,J=C.BroadcastUtil.calcShape(Q,ee,!0);if(!J)throw new Error("Can't use matmul on the given tensors");const ie=(0,R.getCoordsDataType)(J.length),re=(0,R.getGlChannels)(),{activationFunction:se,applyActivation:ne}=(0,I.getActivationSnippet)(K),oe=Y.length>2,fe=oe?"value += getBiasForMatmul();":"",he=oe?`${V(ie,re,Y[2].dims,J,!1)}`:"",ge=J.length,ye=Q.length,we=ee.length,le=`
    ${se}
    ${he}
    float process(int indices[${ge}]) {
        int a[${ye}];
        int b[${we}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Q[Q.length-1]}; ++k) {
            a[${ye-1}] = k;
            b[${we-2}] = k;
            value += _A(a) * _B(b);
        }
        ${fe}
        ${ne}
        return value;
    }`;return Object.assign(Object.assign({},X),{output:{dims:J,type:Y[0].type,textureType:A.TextureType.unpacked},shaderSource:le})}(L,D,O)})}_.matMul=(D,O,L)=>(U(O),D.session.pack?[D.run((0,F.createPackedMatmulProgramInfoLoader)(D,O,L),O)]:[D.run(B(O,L),O)]),_.parseMatMulAttributes=D=>(0,I.parseInternalActivationAttributes)(D.attributes),_.createMatmulProgramInfoLoader=B;const U=D=>{if(!D||D.length!==2)throw new Error("MatMul requires 2 inputs.");if(D[0].dims[D[0].dims.length-1]!==D[1].dims[D[1].dims.length-2])throw new Error("shared dimension does not match.");if(D[0].type!=="float32"&&D[0].type!=="float64"||D[1].type!=="float32"&&D[1].type!=="float64")throw new Error("inputs should be float type");if(D[0].type!==D[1].type)throw new Error("inputs types should match")};function V(D,O,L,z,W){let X="";const Y=L.length,K=z.length,Q=K-Y;X=K<2&&Y>0?"coords":L.map((ie,re)=>`coords.${O[re+Q]}`).join(", ");const ee=C.BroadcastUtil.getBroadcastDims(L,z).map(ie=>`coords.${O[ie+Q]} = 0;`).join(`
`);let J="vec4(outputValue.xx, outputValue.yy)";return C.ShapeUtil.size(L)===1&&(J="vec4(outputValue.x)"),W?`
vec4 getBiasForMatmul() {
  ${D} coords = getOutputCoords();
  ${ee}
  vec4 outputValue = getBias(${X});
  return ${J};
}`:`
float getBiasForMatmul() {
  ${D} coords = getOutputCoords();
  ${ee}
  return getBias(coords.x);
}`}_.getBiasForMatmul=V},2403:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackProgramInfoLoader=void 0;const C=E(5060),A=E(2039),R=E(9390),I=E(2827),F={name:"pack",inputNames:["A"],inputTypes:[A.TextureType.unpackedReversed]};_.createPackProgramInfoLoader=(B,U)=>Object.assign(Object.assign({},F),{get:()=>((V,D)=>{const O=(0,C.getGlsl)(V.session.backend.glContext.version),L=D.dims,z=L.length,W=D.dims.length,X=(0,R.getCoordsDataType)(W),Y=(0,I.getChannels)("rc",W),K=(Q=W,ee=Y,J=L[L.length-2],ie=L[L.length-1],Q===0||Q===1?"":`
    int r = ${ee[Q-2]};
    int c = ${ee[Q-1]};
    int rp1 = ${ee[Q-2]} + 1;
    int cp1 = ${ee[Q-1]} + 1;
    bool rEdge = rp1 >= ${ie};
    bool cEdge = cp1 >= ${J};
    `);var Q,ee,J,ie;let re;re=z===0?[1,1]:z===1?[L[0],1]:[L[W-1],L[W-2]];const se=function(fe,he,ge){if(fe===0)return"false";if(fe===1)return`rc > ${he[0]}`;let ye="";for(let we=fe-2;we<fe;we++)ye+=`${ge[we]} >= ${he[we-fe+2]}`,we<fe-1&&(ye+="||");return ye}(W,re,Y),ne=function(fe,he){const ge=fe.length;if(ge===0)return"getA(), 0, 0, 0";if(ge===1)return`getA(rc),
            rc + 1 >= ${fe[0]} ? 0. : getA(rc + 1),
            0, 0`;let ye="";if(ge>2)for(let we=0;we<ge-2;++we)ye+=`${he[we]},`;return`getA(${ye}r, c),
          rEdge ? 0. : getA(${ye}rp1, c),
          cEdge ? 0. : getA(${ye}r, cp1),
          rEdge || cEdge ? 0. : getA(${ye}rp1, cp1)`}(L,Y),oe=`
        void main() {
          ${X} rc = getOutputCoords();

          if(${se}) {
            ${O.output} = vec4(0);
          } else {
            ${K}

            ${O.output} = vec4(${ne});
          }
        }
      `;return Object.assign(Object.assign({},F),{hasMain:!0,output:{dims:D.dims,type:D.type,textureType:A.TextureType.packed},shaderSource:oe})})(B,U)})},2827:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.unpackFromChannel=_.getChannels=_.getVecChannels=void 0;const C=E(9390);function A(R,I){return(0,C.getGlChannels)(I).map(F=>`${R}.${F}`)}_.getVecChannels=A,_.getChannels=function(R,I){return I===1?[R]:A(R,I)},_.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parsePadAttributesV11=_.padV11=_.parsePadAttributesV2=_.padV2=void 0;const C=E(246),A=E(2517),R=E(5060),I=E(2039),F={name:"Pad",inputNames:["A"],inputTypes:[I.TextureType.unpacked]};_.padV2=(X,Y,K)=>(V(Y),[X.run(Object.assign(Object.assign({},F),{cacheHint:K.cacheKey,get:()=>U(X,Y[0],K)}),Y)]),_.parsePadAttributesV2=X=>{const Y=X.attributes.getString("mode","constant"),K=X.attributes.getFloat("value",0),Q=X.attributes.getInts("pads");return(0,C.createAttributeWithCacheKey)({mode:Y,value:K,pads:Q})},_.padV11=(X,Y,K)=>{D(Y);const Q=B(X,Y,K);return(0,_.padV2)(X,[Y[0]],Q)},_.parsePadAttributesV11=X=>X.attributes.getString("mode","constant");const B=(X,Y,K)=>{if(!X.session.isInitializer(Y[1].dataId)||Y.length>=3&&!X.session.isInitializer(Y[2].dataId))throw new Error("dynamic pad attributes are not allowed");const Q=Array.from(Y[1].integerData),ee=Y.length>=3?Y[2].floatData[0]:0;return(0,C.createAttributeWithCacheKey)({mode:K,pads:Q,value:ee})},U=(X,Y,K)=>{const Q=A.ShapeUtil.padShape(Y.dims.slice(),K.pads),ee=Q.length,J=`
      ${O(X,Y,K)}
      float process(int[${ee}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[I.TextureType.unpacked],output:{dims:Q,type:Y.type,textureType:I.TextureType.unpacked},shaderSource:J}},V=X=>{if(!X||X.length!==1)throw new Error("Pad requires 1 input");if(X[0].type!=="float32"&&X[0].type!=="float64")throw new Error("Invalid input type.")},D=X=>{if(!X||X.length!==2&&X.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(X[1].type!=="int32")throw new Error("Invalid input type.");if(X.length>=3&&X[2].type==="string")throw new Error("Invalid input type.")},O=(X,Y,K)=>{const Q=(0,R.getGlsl)(X.session.backend.glContext.version),[ee,J]=X.calculateTextureWidthAndHeight(Y.dims,I.TextureType.unpacked),ie=A.ShapeUtil.computeStrides(Y.dims);switch(K.mode){case"constant":return L(Q,Y.dims,ie,ee,J,K.pads,K.value);case"reflect":return z(Q,Y.dims,ie,ee,J,K.pads);case"edge":return W(Q,Y.dims,ie,ee,J,K.pads);default:throw new Error("Invalid mode")}},L=(X,Y,K,Q,ee,J,ie)=>{const re=Y.length;let se="";for(let ne=re-1;ne>=0;--ne)se+=`
        k = m[${ne}] - ${J[ne]};
        if (k < 0)  return constant;
        if (k >= ${Y[ne]}) return constant;
        offset += k * ${K[ne]};
        `;return`
      float padA(int m[${re}]) {
        const float constant = float(${ie});
        int offset = 0;
        int k = 0;
        ${se}
        vec2 coords = offsetToCoords(offset, ${Q}, ${ee});
        float value = getColorAsFloat(${X.texture2D}(A, coords));
        return value;
      }
      `},z=(X,Y,K,Q,ee,J)=>{const ie=Y.length;let re="";for(let se=ie-1;se>=0;--se)re+=`
        k = m[${se}] - ${J[se]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(Y[se]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${Y[se]}) { k = _2n_1 - k; }
        }
        offset += k * ${K[se]};
        `;return`
      float padA(int m[${ie}]) {
        int offset = 0;
        int k = 0;
        ${re}
        vec2 coords = offsetToCoords(offset, ${Q}, ${ee});
        float value = getColorAsFloat(${X.texture2D}(A, coords));
        return value;
      }
      `},W=(X,Y,K,Q,ee,J)=>{const ie=Y.length;let re="";for(let se=ie-1;se>=0;--se)re+=`
        k = m[${se}] - ${J[se]};
        if (k < 0)  k = 0;
        if (k >= ${Y[se]}) k = ${Y[se]-1};
        offset += k * ${K[se]};
      `;return`
      float padA(int m[${ie}]) {
        int offset = 0;
        int k = 0;
        ${re}
        vec2 coords = offsetToCoords(offset, ${Q}, ${ee});
        float value = getColorAsFloat(${X.texture2D}(A, coords));
        return value;
      }
      `}},2143:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.globalMaxPool=_.parseMaxPoolAttributes=_.maxPool=_.parseGlobalAveragePoolAttributes=_.globalAveragePool=_.parseAveragePoolAttributes=_.averagePool=void 0;const C=E(246),A=E(2517),R=E(2039);_.averagePool=(W,X,Y)=>{D(X);const K={name:"AveragePool",inputNames:["X"],inputTypes:[R.TextureType.unpacked],cacheHint:Y.cacheKey};return[W.run(Object.assign(Object.assign({},K),{get:()=>I(X,K,!1,Y)}),X)]},_.parseAveragePoolAttributes=W=>{const X=W.attributes.getString("auto_pad","NOTSET"),Y=W.attributes.getInt("ceil_mode",0),K=W.attributes.getInt("count_include_pad",0)!==0,Q=W.attributes.getInts("kernel_shape"),ee=W.attributes.getInts("strides",[]),J=W.attributes.getInts("pads",[]);if(Y!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,C.createAttributeWithCacheKey)({autoPad:X,ceilMode:Y,countIncludePad:K,kernelShape:Q,strides:ee,pads:J})};const I=(W,X,Y,K)=>{const[Q,ee]=B(W,K,Y),J=A.ShapeUtil.size(Q.kernelShape);let ie="";Q.countIncludePad?ie+=`value /= float(${J});`:ie+=`value /= float(${J} - pad);`;const re=`
        ${O(W[0].dims,Q,"value += _X(x);",ie,"0.0")}
      `;return Object.assign(Object.assign({},X),{output:{dims:ee,type:W[0].type,textureType:R.TextureType.unpacked},shaderSource:re})};_.globalAveragePool=(W,X,Y)=>{D(X);const K={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[R.TextureType.unpacked],cacheHint:`${Y.countIncludePad}`};return[W.run(Object.assign(Object.assign({},K),{get:()=>I(X,K,!0,Y)}),X)]},_.parseGlobalAveragePoolAttributes=W=>{const X=W.attributes.getInt("count_include_pad",0)!==0;return(0,C.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:X,kernelShape:[],strides:[],pads:[]})},_.maxPool=(W,X,Y)=>{D(X);const K={name:"MaxPool",inputNames:["X"],inputTypes:[R.TextureType.unpacked],cacheHint:Y.cacheKey};return[W.run(Object.assign(Object.assign({},K),{get:()=>F(X,K,!1,Y)}),X)]},_.parseMaxPoolAttributes=W=>{const X=W.attributes.getString("auto_pad","NOTSET"),Y=W.attributes.getInt("ceil_mode",0),K=W.attributes.getInts("kernel_shape"),Q=W.attributes.getInts("strides",[]),ee=W.attributes.getInts("pads",[]),J=W.attributes.getInt("storage_order",0),ie=W.attributes.getInts("dilations",[]);if(J!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(Y!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,C.createAttributeWithCacheKey)({autoPad:X,ceilMode:Y,countIncludePad:!1,kernelShape:K,strides:Q,pads:ee,storageOrder:J,dilations:ie})};const F=(W,X,Y,K)=>{const[Q,ee]=B(W,K,Y),J=`
      ${O(W[0].dims,Q,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},X),{output:{dims:ee,type:W[0].type,textureType:R.TextureType.unpacked},shaderSource:J})},B=(W,X,Y)=>{const K=W[0].dims.slice(),Q=Object.hasOwnProperty.call(X,"dilations"),ee=X.kernelShape.slice(),J=X.strides.slice(),ie=Q?X.dilations.slice():[],re=X.pads.slice();A.PoolConvUtil.adjustPoolAttributes(Y,K,ee,J,ie,re);const se=A.PoolConvUtil.computePoolOutputShape(Y,K,J,ie,ee,re,X.autoPad),ne=Object.assign({},X);return Q?Object.assign(ne,{kernelShape:ee,strides:J,pads:re,dilations:ie,cacheKey:X.cacheKey}):Object.assign(ne,{kernelShape:ee,strides:J,pads:re,cacheKey:X.cacheKey}),[ne,se]},U={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},V={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[R.TextureType.unpacked]};_.globalMaxPool=(W,X)=>(D(X),[W.run(Object.assign(Object.assign({},V),{get:()=>F(X,V,!0,U)}),X)]);const D=W=>{if(!W||W.length!==1)throw new Error("Pool ops requires 1 input.");if(W[0].type!=="float32"&&W[0].type!=="float64")throw new Error("Invalid input type.")},O=(W,X,Y,K,Q)=>{const ee=W.length;if(X.kernelShape.length<=2){const J=X.kernelShape[X.kernelShape.length-1],ie=X.strides[X.strides.length-1],re=X.pads[X.pads.length/2-1],se=X.pads[X.pads.length-1],ne=W[ee-1];let oe="",fe="",he="";if(oe=re+se!==0?`
          for (int i = 0; i < ${J}; i++) {
            x[${ee} - 1] = indices[${ee} - 1] * ${ie} - ${re} + i;
            if (x[${ee} - 1] < 0 || x[${ee} - 1] >= ${ne}) {
              pad++;
              continue;
            }
            ${Y}
          }`:`
          for (int i = 0; i < ${J}; i++) {
            x[${ee} - 1] = indices[${ee} - 1] * ${ie} - ${re} + i;
            ${Y}
          }`,X.kernelShape.length===2){const ge=X.kernelShape[X.kernelShape.length-2],ye=X.strides[X.strides.length-2],we=X.pads[X.pads.length/2-2],le=X.pads[X.pads.length-2],de=W[ee-2];fe=we+le!==0?`
            for (int j = 0; j < ${ge}; j++) {
              x[${ee} - 2] = indices[${ee} - 2] * ${ye} - ${we} + j;
              if (x[${ee} - 2] < 0 || x[${ee} - 2] >= ${de}) {
                pad+= ${J};
                continue;
              }
          `:`
            for (int j = 0; j < ${ge}; j++) {
              x[${ee} - 2] = indices[${ee} - 2] * ${ye} - ${we} + j;
            `,he=`
          }
        `}return`
        float process(int indices[${ee}]) {
          int x[${ee}];
          copyVec(indices, x);

          float value = ${Q};
          int pad = 0;
          ${fe}
          ${oe}
          ${he}
          ${K}
          return value;
        }
      `}{const J=A.ShapeUtil.size(X.kernelShape),ie=A.ShapeUtil.computeStrides(X.kernelShape),re=ie.length,se=X.pads.length,ne=z(re),oe=L(W,"inputDims"),fe=L(X.pads,"pads"),he=L(ie,"kernelStrides"),ge=L(X.strides,"strides");let ye="";return ye=X.pads.reduce((we,le)=>we+le)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${Y}
          }`:`
          }
          ${Y}
        `,`
        ${ne}
        float process(int indices[${ee}]) {
          int x[${ee}];
          copyVec(indices, x);
          int offset[${re}];
          int pads[${se}];
          int inputDims[${ee}];
          int kernelStrides[${re}];
          int strides[${re}];
          ${fe}
          ${oe}
          ${ge}
          ${he}

          float value = ${Q};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${J}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${ee} - ${re}; j < ${ee}; j++) {
              x[j] = indices[j] * strides[j - ${ee} + ${re}]
                + offset[j - ${ee} + ${re}] - pads[j - 2];
              ${ye}
          }
          ${K}

          return value;
        }
      `}},L=(W,X)=>{let Y="";for(let K=0;K<W.length;K++)Y+=`
      ${X}[${K}] = ${W[K]};
    `;return Y},z=W=>`
  void offsetToIndices(int offset, int[${W}] strides, out int[${W}] indices) {
    if (${W} == 0) {
      return;
    }
    for (int i = 0; i < ${W} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${W} - 1] = offset;
  }`},4939:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reduceLogSumSquare=_.reduceLogSum=_.reduceProd=_.reduceMin=_.reduceMax=_.reduceMean=_.reduceSum=_.parseReduceAttributes=void 0;const C=E(246),A=E(782),R=E(2517),I=E(2039),F=(V,D,O,L,z)=>{U(D);const W={name:L,inputNames:["A"],inputTypes:[I.TextureType.unpacked]};return[V.run(Object.assign(Object.assign({},W),{cacheHint:O.cacheKey,get:()=>B(V,D,O,L,z,W)}),D)]};_.parseReduceAttributes=V=>{const D=V.attributes.getInts("axes",[]),O=V.attributes.getInt("keepdims",1)===1;return(0,C.createAttributeWithCacheKey)({axes:D,keepDims:O})};const B=(V,D,O,L,z,W)=>{const X=[],Y=D[0].dims.length||1,K=[],Q=R.ShapeUtil.normalizeAxes(O.axes,D[0].dims.length),ee=z(D,Q);let J=ee[1];for(let re=0;re<D[0].dims.length;re++)Q.indexOf(re)>=0||Q.length===0?(O.keepDims&&X.push(1),J=`
          for(int j${re} = 0; j${re} < ${D[0].dims[re]}; j${re}++) {
            inputIdx[${re}] = j${re};
            ${J}
          }`):(K.push(`inputIdx[${re}] = outputIdx[${X.length}];`),X.push(D[0].dims[re]));const ie=`
      float process(int outputIdx[${X.length||1}]) {
        float value;                 // final result
        int inputIdx[${Y}];      // addressing input data
        ${K.join(`
`)}
        ${ee[0]}       // init ops for reduce max/min
        ${J}
        ${ee[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},W),{output:{dims:X,type:D[0].type,textureType:I.TextureType.unpacked},shaderSource:ie})},U=V=>{if(!V||V.length!==1)throw new Error("Reduce op requires 1 input.");if(A.NUMBER_TYPES.indexOf(V[0].type)===-1)throw new Error("Invalid input type.")};_.reduceSum=(V,D,O)=>F(V,D,O,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_.reduceMean=(V,D,O)=>F(V,D,O,"ReduceMean",(L,z)=>{let W=1;for(let X=0;X<L[0].dims.length;X++)(z.indexOf(X)>=0||z.length===0)&&(W*=L[0].dims[X]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${W}.;`]}),_.reduceMax=(V,D,O)=>F(V,D,O,"ReduceMax",(L,z)=>{const W=[];for(let X=0;X<L[0].dims.length;X++)(z.indexOf(X)>=0||z.length===0)&&W.push(`inputIdx[${X}] = 0;`);return[`${W.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_.reduceMin=(V,D,O)=>F(V,D,O,"ReduceMin",(L,z)=>{const W=[];for(let X=0;X<L[0].dims.length;X++)(z.indexOf(X)>=0||z.length===0)&&W.push(`inputIdx[${X}] = 0;`);return[`${W.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_.reduceProd=(V,D,O)=>F(V,D,O,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_.reduceLogSum=(V,D,O)=>F(V,D,O,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_.reduceLogSumSquare=(V,D,O)=>F(V,D,O,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isReshapeCheap=_.processDims3D=_.createPackedReshape3DProgramInfoLoader=void 0;const C=E(2517),A=E(5060),R=E(2039),I=E(2827);_.createPackedReshape3DProgramInfoLoader=(F,B,U)=>{const V=(D=>({name:"Reshape (packed)",inputTypes:[R.TextureType.packed],inputNames:["A"],cacheHint:`${D}`}))(U);return Object.assign(Object.assign({},V),{get:()=>((D,O,L,z)=>{const W=O.dims,X=z;let Y="";for(let ee=0;ee<4;ee++){let J="";switch(ee){case 0:J="outputCoords = rc;";break;case 1:J="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:J="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:J="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}Y+=`
        ${J}
        ${ee>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${ee}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${ee>0?"}":""}
      `}const K=(0,A.getGlsl)(D.session.backend.glContext.version),Q=`
      ${function(ee){const J=C.ShapeUtil.computeStrides(ee),ie=["b","r","c"],re="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${J.map((se,ne)=>`int ${ie[ne]} = ${re} / ${se}; ${ne===J.length-1?`int ${ie[ne+1]} = ${re} - ${ie[ne]} * ${se}`:`index -= ${ie[ne]} * ${se}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(W)}
      ${function(ee){const J=C.ShapeUtil.computeStrides(ee);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${J[0]} + coords.z * ${J[1]} + coords.y;
  }
`}(X)}
      ${(0,I.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${X[2]};
        int cols = ${X[1]};

        ${Y}
        ${K.output} = result;
      }
    `;return Object.assign(Object.assign({},L),{output:{dims:X,type:O.type,textureType:R.TextureType.packed},shaderSource:Q,hasMain:!0})})(F,B,V,U)})},_.processDims3D=function(F){if(F.length===0)return[1,1,1];let B=1;for(let U=0;U<F.length-2;++U)B*=F[U];return[B,F.length>1?F[F.length-2]:1,F[F.length-1]]},_.isReshapeCheap=function(F,B){let U=!1;return U=F.length===0||B.length===0||(F.length<2||B.length<2?F[F.length-1]===B[B.length-1]:F[F.length-1]===B[B.length-1]&&F[F.length-2]===B[B.length-2]),U}},718:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reshape=void 0;const C=E(2517);_.reshape=(A,R)=>{const I=C.ShapeUtil.calculateReshapedDims(R[0].dims,R[1].integerData);return A.session.pack?[A.reshapePacked(R[0],I)]:[A.reshapeUnpacked(R[0],I)]}},2268:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseResizeAttributesV11=_.parseResizeAttributesV10=_.resize=void 0;const C=E(5060),A=E(2039),R=E(9390),I=E(2827),F=E(9793),B={name:"Resize",inputNames:["A"],inputTypes:[A.TextureType.packed]};_.resize=(L,z,W)=>((0,F.validateInputs)(z,W),[L.run(Object.assign(Object.assign({},B),{cacheHint:W.cacheKey,get:()=>U(L,z,W)}),z)]),_.parseResizeAttributesV10=L=>(0,F.parseUpsampleAttributes)(L,10),_.parseResizeAttributesV11=L=>(0,F.parseUpsampleAttributes)(L,11);const U=(L,z,W)=>{const X=(0,C.getGlsl)(L.session.backend.glContext.version),[Y,K]=V(z,W);if(Y.every(ye=>ye===1)&&W.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},B),{output:{dims:K,type:z[0].type,textureType:A.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${X.texture2D}(X, TexCoords);
                    ${X.output} = v;
                }`});const Q=K.length;if(Q<2)throw new Error(`output dimension should be at least 2, but got ${Q}`);const ee=K[Q-2],J=K[Q-1],ie=z[0].dims;if(Q!==ie.length)throw new Error(`output dimension should match input ${ie.length}, but got ${Q}`);const re=ie[Q-2],se=ie[Q-1],ne=Y[Q-2],oe=Y[Q-1];let fe="";if(W.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${W.mode}'`);switch(W.coordinateTransformMode){case"asymmetric":fe=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":fe=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":fe=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${J}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${ee}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${J}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${ee}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":fe=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${J}.0 - 1.0, ${ee}.0 - 1.0, ${J}.0 - 1.0,
                            ${ee}.0 - 1.0);
                        vec4 original = vec4(${se}.0 - 1.0, ${re}.0 - 1.0, ${se}.0 - 1.0,
                            ${re}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${W.coordinateTransformMode}'`)}const he=(0,R.getCoordsDataType)(Q),ge=`
            const vec2 inputWH = vec2(${re}.0, ${se}.0);
            const vec4 scaleWHWH = vec4(float(${ne}), float(${oe}), float(${ne}), float(${oe}));
            ${(0,I.unpackFromChannel)()}
            ${fe}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${he} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${ee-1};
                bool hasNextCol = rc.z < ${J-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${X.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},B),{output:{dims:K,type:z[0].type,textureType:A.TextureType.packed},hasMain:!0,shaderSource:ge})},V=(L,z)=>{const W=L[0].dims;let X,Y=z.scales;if(Y.length===0){const Q=L[z.scalesInputIdx];if(Q&&Q.size!==0){if(L[z.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");Y=D(Q,z.mode,z.isResize)}else{const ee=L[z.sizesInputIdx];if(!ee||ee.size===0)throw new Error("Either scales or sizes MUST be provided as input.");X=Array.from(ee.integerData),Y=O(X,W,z.mode,z.isResize)}}else if(L[z.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const K=X||W.map((Q,ee)=>Math.floor(Q*Y[ee]));return[Y,K]},D=(L,z,W)=>{const X=Array.from(L.floatData);return(0,F.scalesValidation)(X,z,W),X},O=(L,z,W,X)=>{const Y=z.length,K=new Array(Y);for(let Q=0,ee=Y;Q<ee;Q++)if(z[Q]===0){if(L[Q]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");K[Q]=1}else K[Q]=L[Q]/z[Q];return(0,F.scalesValidation)(K,W,X),K}},8117:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.shape=void 0;const C=E(9162);_.shape=(R,I)=>(A(I),[new C.Tensor([I[0].dims.length],"int32",void 0,void 0,new Int32Array(I[0].dims))]);const A=R=>{if(!R||R.length!==1)throw new Error("Shape requires 1 input.")}},2278:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sliceV10=_.parseSliceAttributes=_.slice=void 0;const C=E(246),A=E(782),R=E(2517),I=E(2039),F={name:"Slice",inputNames:["A"],inputTypes:[I.TextureType.unpacked]};_.slice=(O,L,z)=>(U(L),[O.run(Object.assign(Object.assign({},F),{cacheHint:z.cacheKey,get:()=>B(O,L[0],z)}),L)]),_.parseSliceAttributes=O=>{const L=O.attributes.getInts("starts"),z=O.attributes.getInts("ends"),W=O.attributes.getInts("axes",[]);return(0,C.createAttributeWithCacheKey)({starts:L,ends:z,axes:W})};const B=(O,L,z)=>{const W=z.axes.length===0?L.dims.slice(0).map((ie,re)=>re):z.axes,X=R.ShapeUtil.normalizeAxes(W,L.dims.length),Y=z.starts.map((ie,re)=>ie>L.dims[X[re]]-1?L.dims[X[re]]:R.ShapeUtil.normalizeAxis(ie,L.dims[X[re]])),K=z.ends.map((ie,re)=>ie>L.dims[X[re]]-1?L.dims[X[re]]:R.ShapeUtil.normalizeAxis(ie,L.dims[X[re]])),Q=L.dims.slice(),ee=[];for(let ie=0;ie<X.length;ie++)Q[X[ie]]=K[ie]-Y[ie],Y[ie]>0&&ee.push(`outputIdx[${X[ie]}] += ${Y[ie]};`);const J=`
      float process(int outputIdx[${Q.length}]) {
        ${ee.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},F),{output:{dims:Q,type:L.type,textureType:I.TextureType.unpacked},shaderSource:J})},U=O=>{if(!O||O.length!==1)throw new Error("Slice requires 1 input.");if(A.NUMBER_TYPES.indexOf(O[0].type)===-1)throw new Error("Invalid input type.")};_.sliceV10=(O,L)=>{D(L);const z=V(O,L);return[O.run(Object.assign(Object.assign({},F),{cacheHint:z.cacheKey,get:()=>B(O,L[0],z)}),[L[0]])]};const V=(O,L)=>{if(!O.session.isInitializer(L[1].dataId)||!O.session.isInitializer(L[2].dataId)||L.length>=4&&!O.session.isInitializer(L[3].dataId)||L.length>=5&&!O.session.isInitializer(L[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(L.length>=5&&L[4].integerData.some(Y=>Y!==1))throw new Error("currently non-1 steps is not supported for Slice");const z=Array.from(L[1].integerData),W=Array.from(L[2].integerData),X=L.length>=4?Array.from(L[3].integerData):[];return{starts:z,ends:W,axes:X,cacheKey:`${X};${z};${W}`}},D=O=>{if(!O||O.length<3||O.length>5)throw new Error("Invalid input number.");if(O[1].type!=="int32"||O[1].dims.length!==1)throw new Error("Invalid input type.");if(O[2].type!=="int32"||O[2].dims.length!==1)throw new Error("Invalid input type.");if(O.length>=4&&(O[3].type!=="int32"||O[3].dims.length!==1))throw new Error("Invalid input type.");if(O.length>=5&&(O[4].type!=="int32"||O[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.softmaxV13=_.parseSoftmaxAttributesV13=_.parseSoftmaxAttributes=_.softmax=void 0;const C=E(246),A=E(2517),R=E(5060),I=E(2039),F=E(3738),B={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[I.TextureType.unpacked]},U={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[I.TextureType.unpacked,I.TextureType.unpacked]},V={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[I.TextureType.unpacked,I.TextureType.unpacked,I.TextureType.unpacked]};_.softmax=(X,Y,K)=>{W(Y);const Q=Y[0].dims.slice(),ee=A.ShapeUtil.normalizeAxis(K.axis,Q.length),J=A.ShapeUtil.sizeToDimension(Q,ee),ie=A.ShapeUtil.sizeFromDimension(Q,ee);return D(X,Y,K,J,ie)},_.parseSoftmaxAttributes=X=>(0,C.createAttributeWithCacheKey)({axis:X.attributes.getInt("axis",1)}),_.parseSoftmaxAttributesV13=X=>(0,C.createAttributeWithCacheKey)({axis:X.attributes.getInt("axis",-1)}),_.softmaxV13=(X,Y,K)=>{W(Y);const Q=Y[0].dims.slice(),ee=A.ShapeUtil.normalizeAxis(K.axis,Q.length),J=Q.length,ie=ee!==J-1,re=[];let se,ne=[],oe=[];ie&&(ne=Array.from({length:J}).map((ye,we)=>we),ne[ee]=J-1,ne[J-1]=ee,ne.map(ye=>re.push(Q[ye])),se=(0,C.createAttributeWithCacheKey)({perm:ne}),oe=(0,F.transpose)(X,Y,se));const fe=ie?A.ShapeUtil.sizeToDimension(re,J-1):A.ShapeUtil.sizeToDimension(Q,J-1),he=ie?A.ShapeUtil.sizeFromDimension(re,J-1):A.ShapeUtil.sizeFromDimension(Q,J-1),ge=D(X,ie?oe:Y,K,fe,he);return ie?(0,F.transpose)(X,ge,se):ge};const D=(X,Y,K,Q,ee)=>{const J=O(X,Y[0],Q,ee,[Q]),ie=X.run(Object.assign(Object.assign({},B),{cacheHint:K.cacheKey,get:()=>J}),Y),re=L(X,Y[0],Q,ee,J.output.dims,[Q]),se=X.run(Object.assign(Object.assign({},U),{cacheHint:K.cacheKey,get:()=>re}),[Y[0],ie]),ne=z(X,Y[0],Q,ee,J.output.dims,re.output.dims);return[X.run(Object.assign(Object.assign({},V),{cacheHint:K.cacheKey,get:()=>ne}),[Y[0],ie,se])]},O=(X,Y,K,Q,ee)=>{const[J,ie]=X.calculateTextureWidthAndHeight(Y.dims,I.TextureType.unpacked),re=ee.length;if(K<1||Q<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ee.length!==1)throw new Error("Dimensionality of the output should be 1");if(ee[0]!==K)throw new Error("Shape of the output should be equal to logical row count");const se=(0,R.getGlsl)(X.session.backend.glContext.version),ne=`
      float process(int[${re}] indices) {
        int logical_row_start_offset = indices[0] * ${Q};

        float max = getColorAsFloat(${se.texture2D}(A, offsetToCoords(logical_row_start_offset, ${J},
        ${ie} )));
        for(int i=1; i<${Q}; ++i)
        {
          float current = getColorAsFloat(${se.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${J}, ${ie})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},B),{output:{dims:ee,type:Y.type,textureType:I.TextureType.unpacked},shaderSource:ne})},L=(X,Y,K,Q,ee,J)=>{const[ie,re]=X.calculateTextureWidthAndHeight(Y.dims,I.TextureType.unpacked),se=J.length;if(K<1||Q<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(J.length!==1)throw new Error("Dimensionality of the output should be 1");if(J[0]!==K)throw new Error("Shape of the output should be equal to logical row count");if(ee.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ee[0]!==K)throw new Error("Shape of the intermediate results should be equal to logical row count");const ne=`
      float process(int[${se}] indices) {
        int logical_row_start_offset = indices[0] * ${Q};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${Q}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,R.getGlsl)(X.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${ie}, ${re}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},U),{output:{dims:J,type:Y.type,textureType:I.TextureType.unpacked},shaderSource:ne})},z=(X,Y,K,Q,ee,J)=>{const[ie,re]=X.calculateTextureWidthAndHeight(Y.dims,I.TextureType.unpacked),se=Y.dims.length;if(K<1||Q<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ee.length!==1||J.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ee[0]!==K||J[0]!==K)throw new Error("Shape of the intermediate results should be equal to logical row count");const ne=`
      float process(int[${se}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${ie}, ${re});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${Q};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},V),{output:{dims:Y.dims,type:Y.type,textureType:I.TextureType.unpacked},shaderSource:ne})},W=X=>{if(!X||X.length!==1)throw new Error("Softmax requires 1 input.");if(X[0].type!=="float32"&&X[0].type!=="float64")throw new Error("Invalid input type")}},5975:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSplitAttributes=_.split=void 0;const C=E(246),A=E(2517),R=E(2039),I={name:"Split",inputNames:["A"],inputTypes:[R.TextureType.unpacked]};_.split=(V,D,O)=>{U(D);const L=A.ShapeUtil.normalizeAxis(O.axis,D[0].dims.length),z=F(V,D,L,O),W=[];for(let X=0;X<z;++X)W.push(V.run(Object.assign(Object.assign({},I),{cacheHint:`${O.cacheKey};${X}`,get:()=>B(V,D[0],O,L,X)}),D));return W},_.parseSplitAttributes=V=>{const D=V.attributes.getInt("axis",0),O=V.attributes.getInts("split",[]),L=V.outputs.length;return(0,C.createAttributeWithCacheKey)({axis:D,split:O,numOutputs:L})};const F=(V,D,O,L)=>{const[,z]=A.SplitUtil.splitShape(D[0].dims,O,L.split,L.numOutputs);return z.length},B=(V,D,O,L,z)=>{const[W,X]=A.SplitUtil.splitShape(D.dims,L,O.split,O.numOutputs),Y=X[z],K=W[z],Q=`
      float process(int indices[${K.length}]) {
        indices[${L}] += ${Y};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},I),{cacheHint:`${O.cacheKey}:${z}`,output:{dims:K,type:D.type,textureType:R.TextureType.unpacked},shaderSource:Q})},U=V=>{if(!V||V.length!==1)throw new Error("Split requires one input.");if(V[0].type!=="int8"&&V[0].type!=="uint8"&&V[0].type!=="int16"&&V[0].type!=="uint16"&&V[0].type!=="int32"&&V[0].type!=="uint32"&&V[0].type!=="float32"&&V[0].type!=="float64"&&V[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSqueezeAttributes=_.squeezeV13=_.squeeze=void 0;const C=E(2517);_.squeeze=(I,F,B)=>{A(F);const U=C.ShapeUtil.squeezeShape(F[0].dims,B);return[I.reshapeUnpacked(F[0],U)]},_.squeezeV13=(I,F)=>(R(F),(0,_.squeeze)(I,[F[0]],Array.from(F[1].integerData))),_.parseSqueezeAttributes=I=>I.attributes.getInts("axes");const A=I=>{if(!I||I.length!==1)throw new Error("Squeeze requires 1 input.");if(I[0].type==="string")throw new Error("invalid input tensor types.")},R=I=>{if(!I||I.length!==2)throw new Error("Squeeze requires 2 inputs.");if(I[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sum=void 0;const C=E(5060),A=E(2039);_.sum=(F,B)=>{I(B);const U={name:"Sum",inputNames:B.map((V,D)=>`X${D}`),inputTypes:new Array(B.length).fill(A.TextureType.unpacked)};return[F.run(Object.assign(Object.assign({},U),{get:()=>R(F,B,U)}),B)]};const R=(F,B,U)=>{const V=(0,C.getGlsl)(F.session.backend.glContext.version),D=B[0].dims.slice(),O=`
      void main() {
        vec4 result = ${B.map((L,z)=>`${V.texture2D}(X${z},TexCoords)`).join(" + ")};
        ${V.output} = result;
      }
    `;return Object.assign(Object.assign({},U),{output:{dims:D,type:B[0].type,textureType:A.TextureType.unpacked},hasMain:!0,shaderSource:O})},I=F=>{if(!F||F.length===0)throw new Error("Sum requires inputs.");const B=F[0].dims.length;for(let U=1;U<F.length;U++){if(B!==F[U].dims.length)throw new Error("Input shapes are mismatched.");for(let V=0;V<B;V++)if(F[0].dims[V]!==F[U].dims[V])throw new Error("Input shapes are not matched.")}if(F[0].type!=="float32"&&F[0].type!=="float64")throw new Error("Invalid input type.");for(let U=1;U<F.length;U++)if(F[0].type!==F[U].type)throw new Error("Input types are not matched.")}},5723:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tile=void 0;const C=E(782),A=E(2039);_.tile=(F,B)=>{I(B);const U={name:"Tile",inputNames:["A"],inputTypes:[A.TextureType.unpacked]};return[F.run(Object.assign(Object.assign({},U),{get:()=>R(F,B,U)}),B)]};const R=(F,B,U)=>{const V=B[0].dims.slice(),D=new Array(V.length),O=[];for(let W=0;W<V.length;W++)D[W]=V[W]*B[1].numberData[W],O.push(`inputIdx[${W}] = int(mod(float(outputIdx[${W}]), ${V[W]}.));`);const L=D.length,z=`
      float process(int outputIdx[${L}]) {
        int inputIdx[${L}];
        ${O.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},U),{output:{dims:D,type:B[0].type,textureType:A.TextureType.unpacked},shaderSource:z})},I=F=>{if(!F||F.length!==2)throw new Error("Tile requires 2 input.");if(F[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(F[1].dims[0]!==F[0].dims.length)throw new Error("Invalid input shape.");if(C.NUMBER_TYPES.indexOf(F[0].type)===-1)throw new Error("Invalid input type.");if(F[1].type!=="int32"&&F[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseTransposeAttributes=_.transpose=void 0;const C=E(246),A=E(2517),R=E(2039),I={name:"Transpose",inputNames:["A"],inputTypes:[R.TextureType.unpacked]};_.transpose=(O,L,z)=>(D(L),[O.run(Object.assign(Object.assign({},I),{cacheHint:z.cacheKey,get:()=>F(O,L[0],z.perm)}),L)]),_.parseTransposeAttributes=O=>(0,C.createAttributeWithCacheKey)({perm:O.attributes.getInts("perm",[])});const F=(O,L,z)=>{const W=L.dims;z=B(W,z);const X=U(W,z),Y=W.length,K=`
      ${V("perm",z,Y)}
      float process(int indices[${Y}]) {
        int a[${Y}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},I),{output:{dims:X,type:L.type,textureType:R.TextureType.unpacked},shaderSource:K})},B=(O,L)=>(L&&L.length!==O.length&&(L=[...O.keys()].reverse()),L),U=(O,L)=>(L=B(O,L),A.ShapeUtil.sortBasedOnPerm(O,L)),V=(O,L,z)=>{const W=[];W.push(`void ${O}(out int a[${z}], int src[${z}]) {`);for(let X=0;X<z;++X)W.push(`	a[${L[X]}]=src[${X}];`);return W.push("	}"),W.join(`
`)},D=O=>{if(!O||O.length!==1)throw new Error("Transpose requires 1 input.");if(O[0].type!=="float32"&&O[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.encodeAsUint8=void 0;const C=E(5060),A=E(2039);_.encodeAsUint8=(R,I)=>{const F=I.shape,B=(0,C.getGlsl)(R.session.backend.glContext.version),U=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${B.texture2D}(X,TexCoords).r;
      ${B.output} = encodeAsUint8(value);
    }`,V={name:"Uint8Encode",inputTypes:[A.TextureType.unpacked],inputNames:["X"],output:{dims:F,type:I.tensor.type,textureType:A.TextureType.downloadUint8AsFloat},shaderSource:U,hasMain:!0};return R.executeProgram(V,[I.tensor])}},4909:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tanh=_.tan=_.sqrt=_.sin=_.sigmoid=_.relu=_.not=_.neg=_.log=_.parseLeakyReluAttributes=_.leakyRelu=_.identity=_.floor=_.exp=_.parseEluAttributes=_.elu=_.cos=_.ceil=_.clipV11=_.parseClipAttributes=_.clip=_.atan=_.asin=_.acos=_.abs=_.glslTanh=_.glslTan=_.glslSqrt=_.glslSigmoid=_.glslRelu=_.glslSin=_.glslNot=_.glslNeg=_.glslLog=_.glslLeakyRelu=_.glslIdentity=_.glslClip=_.glslFloor=_.glslExp=_.glslElu=_.glslCos=_.glslCeil=_.glslAtan=_.glslAsin=_.glslAcos=_.glslAbs=void 0;const C=E(246),A=E(2517),R=E(8520),I=E(5060),F=E(2039);function B(){return ge("abs")}function U(){return ge("acos")}function V(){return ge("asin")}function D(){return ge("atan")}function O(){return ge("ceil")}function L(){return ge("cos")}function z(le){const de="elu";return{body:`
  const float alpha = float(${le});

  float ${de}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${de}_(vec4 v) {
    return vec4(${de}_(v.x), ${de}_(v.y), ${de}_(v.z), ${de}_(v.w));
  }
  `,name:de,type:R.FunctionType.ValueBased}}function W(){return ge("exp")}function X(){return ge("floor")}function Y(le,de){const ce="clip";return{body:`
  const float min = float(${le});
  const float max = float(${de});

  float ${ce}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${ce}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:ce,type:R.FunctionType.ValueBased}}function K(){const le="indentity";return{body:`
  float ${le}_(float a) {
    return a;
  }
  vec4 ${le}_(vec4 v) {
    return v;
  }
  `,name:le,type:R.FunctionType.ValueBased}}function Q(le){const de="leakyRelu";return{body:`
  const float alpha = float(${le});

  float ${de}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${de}_(vec4 v) {
    return vec4(${de}_(v.x), ${de}_(v.y), ${de}_(v.z), ${de}_(v.w));
  }
  `,name:de,type:R.FunctionType.ValueBased}}function ee(){return ge("log")}function J(){const le="neg";return{body:`
  float ${le}_(float a) {
    return -a;
  }
  vec4 ${le}_(vec4 v) {
    return -v;
  }
  `,name:le,type:R.FunctionType.ValueBased}}function ie(){const le="not";return{body:`
  float ${le}_(float a) {
    return float( ! bool(a) );
  }
  bool ${le}_(bool a) {
    return !a;
  }
  vec4 ${le}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${le}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:le,type:R.FunctionType.ValueBased}}function re(){return ge("sin")}function se(){const le="relu";return{body:`
  float ${le}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${le}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:le,type:R.FunctionType.ValueBased}}function ne(){const le="sigmoid";return{body:`
  float ${le}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${le}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:le,type:R.FunctionType.ValueBased}}function oe(){return ge("sqrt")}function fe(){return ge("tan")}function he(){const le="tanh";return{body:`
  float ${le}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${le}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:le,type:R.FunctionType.ValueBased}}function ge(le){return{body:`
  float ${le}_(float a) {
    return ${le}(a);
  }
  vec4 ${le}_(vec4 v) {
    return ${le}(v);
  }
  `,name:le,type:R.FunctionType.ValueBased}}_.glslAbs=B,_.glslAcos=U,_.glslAsin=V,_.glslAtan=D,_.glslCeil=O,_.glslCos=L,_.glslElu=z,_.glslExp=W,_.glslFloor=X,_.glslClip=Y,_.glslIdentity=K,_.glslLeakyRelu=Q,_.glslLog=ee,_.glslNeg=J,_.glslNot=ie,_.glslSin=re,_.glslRelu=se,_.glslSigmoid=ne,_.glslSqrt=oe,_.glslTan=fe,_.glslTanh=he;const ye=(le,de,ce,ve)=>{const be=le.session.pack?F.TextureType.packed:F.TextureType.unpacked,me={name:ce.name,inputTypes:[be],inputNames:["A"],cacheHint:ve};return Object.assign(Object.assign({},me),{get:()=>((xe,Ae,De,Ie)=>{const je=xe.session.pack?F.TextureType.packed:F.TextureType.unpacked,Ye=(0,I.getGlsl)(xe.session.backend.glContext.version);return Object.assign(Object.assign({},Ae),{output:{dims:De.dims,type:De.type,textureType:je},shaderSource:`
     ${Ie.body}
     void main() {
       vec4 v = ${Ye.texture2D}(A, TexCoords);
       v = ${Ie.name}_(v);
       ${Ye.output} = v;
     }
     `,hasMain:!0})})(le,me,de,ce)})};_.abs=(le,de)=>[le.run(ye(le,de[0],B()),de)],_.acos=(le,de)=>[le.run(ye(le,de[0],U()),de)],_.asin=(le,de)=>[le.run(ye(le,de[0],V()),de)],_.atan=(le,de)=>[le.run(ye(le,de[0],D()),de)],_.clip=(le,de,ce)=>[le.run(ye(le,de[0],Y(ce.min,ce.max),ce.cacheKey),de)],_.parseClipAttributes=le=>(0,C.createAttributeWithCacheKey)({min:le.attributes.getFloat("min",A.MIN_CLIP),max:le.attributes.getFloat("max",A.MAX_CLIP)}),_.clipV11=(le,de)=>{const ce=we(le,de);return(0,_.clip)(le,[de[0]],ce)};const we=(le,de)=>{if(de.length>=3&&(!le.session.isInitializer(de[1].dataId)||!le.session.isInitializer(de[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const ce=de.length>=3?de[1].numberData[0]:A.MIN_CLIP,ve=de.length>=3?de[2].numberData[0]:A.MAX_CLIP;return(0,C.createAttributeWithCacheKey)({min:ce,max:ve})};_.ceil=(le,de)=>[le.run(ye(le,de[0],O()),de)],_.cos=(le,de)=>[le.run(ye(le,de[0],L()),de)],_.elu=(le,de,ce)=>[le.run(ye(le,de[0],z(ce.alpha),ce.cacheKey),de)],_.parseEluAttributes=le=>(0,C.createAttributeWithCacheKey)({alpha:le.attributes.getFloat("alpha",1)}),_.exp=(le,de)=>[le.run(ye(le,de[0],W()),de)],_.floor=(le,de)=>[le.run(ye(le,de[0],X()),de)],_.identity=(le,de)=>[le.run(ye(le,de[0],K()),de)],_.leakyRelu=(le,de,ce)=>[le.run(ye(le,de[0],Q(ce.alpha),ce.cacheKey),de)],_.parseLeakyReluAttributes=le=>(0,C.createAttributeWithCacheKey)({alpha:le.attributes.getFloat("alpha",.01)}),_.log=(le,de)=>[le.run(ye(le,de[0],ee()),de)],_.neg=(le,de)=>[le.run(ye(le,de[0],J()),de)],_.not=(le,de)=>[le.run(ye(le,de[0],ie()),de)],_.relu=(le,de)=>[le.run(ye(le,de[0],se()),de)],_.sigmoid=(le,de)=>[le.run(ye(le,de[0],ne()),de)],_.sin=(le,de)=>[le.run(ye(le,de[0],re()),de)],_.sqrt=(le,de)=>[le.run(ye(le,de[0],oe()),de)],_.tan=(le,de)=>[le.run(ye(le,de[0],fe()),de)],_.tanh=(le,de)=>[le.run(ye(le,de[0],he()),de)]},5611:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackProgramInfoLoader=_.createUnpackProgramInfo=void 0;const C=E(5060),A=E(2039),R=E(9390),I=E(2827),F={name:"unpack",inputNames:["A"],inputTypes:[A.TextureType.packed]};_.createUnpackProgramInfo=(B,U)=>{const V=U.dims.length,D=(0,I.getChannels)("rc",V),O=D.slice(-2),L=(0,R.getCoordsDataType)(V),z=(0,I.unpackFromChannel)(),W=U.dims.length===0?"":function(K,Q){if(K===1)return"rc";let ee="";for(let J=0;J<K;J++)ee+=Q[J],J<K-1&&(ee+=",");return ee}(V,D),X=V<=1?"rc":`vec2(${O.join(",")})`,Y=`
    ${z}
    void main() {
      ${L} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${W});

       ${(0,C.getGlsl)(B.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${X}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},F),{hasMain:!0,output:{dims:U.dims,type:U.type,textureType:A.TextureType.unpacked},shaderSource:Y})},_.createUnpackProgramInfoLoader=(B,U)=>Object.assign(Object.assign({},F),{get:()=>(0,_.createUnpackProgramInfo)(B,U)})},8428:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseUnsqueezeAttributes=_.unsqueezeV13=_.unsqueeze=void 0;const C=E(2517);_.unsqueeze=(I,F,B)=>{A(F);const U=C.ShapeUtil.unsqueezeShape(F[0].dims,B);return[I.reshapeUnpacked(F[0],U)]},_.unsqueezeV13=(I,F)=>(R(F),(0,_.unsqueeze)(I,[F[0]],Array.from(F[1].integerData))),_.parseUnsqueezeAttributes=I=>I.attributes.getInts("axes");const A=I=>{if(!I||I.length!==1)throw new Error("Unsqueeze requires 1 input.");if(I[0].type==="string")throw new Error("invalid input tensor types.")},R=I=>{if(!I||I.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(I[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.scalesValidation=_.validateInputs=_.parseUpsampleAttributes=_.parseUpsampleAttributesV9=_.parseUpsampleAttributesV7=_.upsample=void 0;const C=E(246),A=E(5060),R=E(2039),I={name:"Upsample",inputNames:["X"],inputTypes:[R.TextureType.unpacked]};_.upsample=(B,U,V)=>((0,_.validateInputs)(U,V),[B.run(Object.assign(Object.assign({},I),{cacheHint:V.cacheKey,get:()=>F(B,U,V)}),U)]),_.parseUpsampleAttributesV7=B=>(0,_.parseUpsampleAttributes)(B,7),_.parseUpsampleAttributesV9=B=>(0,_.parseUpsampleAttributes)(B,9),_.parseUpsampleAttributes=(B,U)=>{const V=U>=10,D=B.attributes.getString("mode","nearest");if(D!=="nearest"&&D!=="linear"&&(U<11||D!=="cubic"))throw new Error(`unrecognized mode: ${D}`);let O=[];U<9&&(O=B.attributes.getFloats("scales"),(0,_.scalesValidation)(O,D,V));const L=B.attributes.getFloat("extrapolation_value",0),z=U>10?B.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(z)===-1)throw new Error(`coordinate_transform_mode '${z}' is not supported`);const W=z==="tf_crop_and_resize",X=W,Y=D==="nearest"&&U>=11?B.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(Y)===-1)throw new Error(`nearest_mode '${Y}' is not supported`);const K=B.attributes.getFloat("cubic_coeff_a",-.75),Q=B.attributes.getInt("exclude_outside",0)!==0;if(Q&&D!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const ee=U<11||D==="nearest"&&z==="asymmetric"&&Y==="floor";let J=0,ie=0,re=0;return U>10?B.inputs.length>2?(J=1,ie=2,re=3):(ie=1,re=2):U===9&&(ie=1),(0,C.createAttributeWithCacheKey)({opset:U,isResize:V,mode:D,scales:O,extrapolationValue:L,coordinateTransformMode:z,useExtrapolation:X,needRoiInput:W,nearestMode:Y,cubicCoefficientA:K,excludeOutside:Q,useNearest2xOptimization:ee,roiInputIdx:J,scalesInputIdx:ie,sizesInputIdx:re})};const F=(B,U,V)=>{const D=(0,A.getGlsl)(B.session.backend.glContext.version),[O,L]=B.calculateTextureWidthAndHeight(U[0].dims,R.TextureType.unpacked),z=U[0].dims.map((re,se)=>Math.floor(re*V.scales[se])),[W,X]=B.calculateTextureWidthAndHeight(z,R.TextureType.unpacked),Y=z.length,K=new Array(Y),Q=new Array(Y);let ee=`
      int output_pitches[${Y}];
      int input_pitches[${Y}];
      `;for(let re=Y-1;re>=0;re--)K[re]=re===Y-1?1:K[re+1]*z[re+1],Q[re]=re===Y-1?1:Q[re+1]*U[0].dims[re+1],ee+=`
        output_pitches[${re}] = ${K[re]};
        input_pitches[${re}] = ${Q[re]};
        `;const J=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${O}, ${L});
        float value = getColorAsFloat(${D.texture2D}(X, coords));
        return value;
      }
      `,ie=V.mode==="nearest"?`
    ${J}
    float process(int indices[${Y}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${W}, ${X});

      ${ee}

      int d, m;
      for (int dim = 0; dim < ${Y}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:Y===4?`
    ${J}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${W}, ${X});

      ${ee}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${U[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${J}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${W}, ${X});

      ${ee}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${U[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},I),{output:{dims:z,type:U[0].type,textureType:R.TextureType.unpacked},shaderSource:ie,variables:[{name:"scales",type:"int",arrayLength:V.scales.length,data:V.scales.map(re=>Math.ceil(re))}]})};_.validateInputs=(B,U)=>{if(!B||U.opset<9&&B.length!==1||U.opset>=9&&U.opset<11&&B.length!==2||U.opset>=11&&B.length<2)throw new Error("invalid inputs.");if(U.scales.length>0&&B[0].dims.length!==U.scales.length)throw new Error("Invalid input shape.");if(B[0].type==="string")throw new Error("Invalid input tensor types.")},_.scalesValidation=(B,U,V)=>{if(V){for(const D of B)if(D<=0)throw new Error("Scale value should be greater than 0.")}else for(const D of B)if(D<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(U!=="linear"&&U!=="cubic"||B.length===2||B.length===4&&B[0]===1&&B[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${V?"Resize":"Upsample"} opeartor.`)}},1958:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ProgramManager=void 0;const C=E(1670),A=E(6231),R=E(8879),I=E(5060);_.ProgramManager=class{constructor(F,B,U){this.profiler=F,this.glContext=B,this.textureLayoutStrategy=U,this.repo=new Map,this.attributesBound=!1}getArtifact(F){return this.repo.get(F)}setArtifact(F,B){this.repo.set(F,B)}run(F,B,U){var V;this.profiler.event("op",`ProgramManager.run ${(V=F.programInfo.name)!==null&&V!==void 0?V:"unknown kernel"}`,()=>{var D;const O=this.glContext.gl,L=F.program;O.useProgram(L);try{this.bindOutput(U),this.attributesBound||this.bindAttributes(F.attribLocations),this.bindUniforms(F.uniformLocations,(D=F.programInfo.variables)!==null&&D!==void 0?D:[],B)}catch(z){throw A.Logger.error("ProgramManager",F.programInfo.shaderSource),z}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(F=>this.glContext.deleteProgram(F.program))}build(F,B,U){return this.profiler.event("backend","ProgramManager.build",()=>{const V=new R.GlslPreprocessor(this.glContext,F,B,U),D=V.preprocess(),O=this.compile(D);return{programInfo:F,program:O,uniformLocations:this.getUniformLocations(O,V.context.programInfo.inputNames,V.context.programInfo.variables),attribLocations:this.getAttribLocations(O)}})}compile(F){if(!this.vertexShader){A.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const V=(0,I.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(V,this.glContext.gl.VERTEX_SHADER)}C.env.debug&&A.Logger.verbose("ProrgramManager",`FragShader:
${F}
`);const B=this.glContext.compileShader(F,this.glContext.gl.FRAGMENT_SHADER),U=this.glContext.createProgram(this.vertexShader,B);return this.glContext.deleteShader(B),U}bindOutput(F){const B=F.width,U=F.height;A.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${B}/${U}, shape=${F.shape}, type=${F.tensor.type}`),this.glContext.attachFramebuffer(F.texture,B,U)}bindAttributes(F){const B=F.position,U=F.textureCoord;this.glContext.setVertexAttributes(B,U),this.attributesBound=!0}bindUniforms(F,B,U){var V;const D=this.glContext.gl;let O=0;for(const{name:L,type:z,location:W,arrayLength:X}of F){const Y=(V=B.find(K=>K.name===L))===null||V===void 0?void 0:V.data;if(z!=="sampler2D"&&!Y)throw new Error(`variable '${L}' does not have data defined in program info`);switch(z){case"sampler2D":this.bindTexture(U[O],W,O),O++;break;case"float":X?D.uniform1fv(W,Y):D.uniform1f(W,Y);break;case"int":X?D.uniform1iv(W,Y):D.uniform1i(W,Y);break;default:throw new Error(`Uniform not implemented: ${z}`)}}}bindTexture(F,B,U){this.glContext.bindTextureToUniform(F.texture,U,B)}getAttribLocations(F){return{position:this.getAttribLocation(F,"position"),textureCoord:this.getAttribLocation(F,"textureCoord")}}getUniformLocations(F,B,U){const V=[];if(B)for(const D of B)V.push({name:D,type:"sampler2D",location:this.getUniformLocation(F,D)});if(U)for(const D of U)V.push(Object.assign(Object.assign({},D),{location:this.getUniformLocation(F,D.name)}));return V}getUniformLocation(F,B){const U=this.glContext.gl.getUniformLocation(F,B);if(U===null)throw new Error(`Uniform ${B} not found.`);return U}getAttribLocation(F,B){return this.glContext.gl.getAttribLocation(F,B)}}},6416:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLSessionHandler=void 0;const C=E(6231),A=E(1047),R=E(8316),I=E(1640),F=E(1958),B=E(7859),U=E(5702);_.WebGLSessionHandler=class{constructor(V,D){this.backend=V,this.context=D,this.layoutStrategy=new B.PreferLogicalStrategy(V.glContext.maxTextureSize),this.programManager=new F.ProgramManager(this.context.profiler,V.glContext,this.layoutStrategy),this.textureManager=new U.TextureManager(V.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:V.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=V.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new R.WebGLInferenceHandler(this)}onGraphInitialized(V){const D=V.getValues().filter(O=>O.from===-1&&O.tensor).map(O=>O.tensor.dataId);this.initializers=new Set(D)}isInitializer(V){return!!this.initializers&&this.initializers.has(V)}addInitializer(V){this.initializers.add(V)}getTextureData(V,D){return D?this.packedTextureDataCache.get(V):this.unpackedTextureDataCache.get(V)}setTextureData(V,D,O=!1){C.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),O?this.packedTextureDataCache.set(V,D):this.unpackedTextureDataCache.set(V,D)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(V=>this.textureManager.releaseTexture(V,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(V=>this.textureManager.releaseTexture(V,!0)),this.unpackedTextureDataCache=new Map}resolve(V,D,O){const L=(0,A.resolveOperator)(V,D,I.WEBGL_OP_RESOLVE_RULES);return{impl:L.opImpl,context:L.opInit?L.opInit(V,O):V}}}},7769:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Uint8DataEncoder=_.RGBAFloatDataEncoder=_.RedFloat32DataEncoder=void 0;const C=E(6231);_.RedFloat32DataEncoder=class{constructor(A,R=1){if(R===1)this.internalFormat=A.R32F,this.format=A.RED,this.textureType=A.FLOAT,this.channelSize=R;else{if(R!==4)throw new Error(`Invalid number of channels: ${R}`);this.internalFormat=A.RGBA32F,this.format=A.RGBA,this.textureType=A.FLOAT,this.channelSize=R}}encode(A,R){let I,F;return A.constructor!==Float32Array&&(C.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),F=new Float32Array(A)),R*this.channelSize>A.length?(C.Logger.warning("Encoder","Source data too small. Allocating larger array"),F=A,I=this.allocate(R*this.channelSize),F.forEach((B,U)=>I[U]=B)):(F=A,I=F),I}allocate(A){return new Float32Array(4*A)}decode(A,R){return this.channelSize===1?A.filter((I,F)=>F%4==0).subarray(0,R):A.subarray(0,R)}},_.RGBAFloatDataEncoder=class{constructor(A,R=1,I){if(R!==1&&R!==4)throw new Error(`Invalid number of channels: ${R}`);this.internalFormat=A.RGBA,this.format=A.RGBA,this.channelSize=R,this.textureType=I||A.FLOAT}encode(A,R){let I=A;return this.channelSize===1&&(C.Logger.verbose("Encoder","Exploding into a larger array"),I=this.allocate(R),A.forEach((F,B)=>I[4*B]=F)),I}allocate(A){return new Float32Array(4*A)}decode(A,R){return this.channelSize===1?A.filter((I,F)=>F%4==0).subarray(0,R):A.subarray(0,R)}},_.Uint8DataEncoder=class{constructor(A,R=1){if(this.channelSize=4,R===1)this.internalFormat=A.ALPHA,this.format=A.ALPHA,this.textureType=A.UNSIGNED_BYTE,this.channelSize=R;else{if(R!==4)throw new Error(`Invalid number of channels: ${R}`);this.internalFormat=A.RGBA,this.format=A.RGBA,this.textureType=A.UNSIGNED_BYTE,this.channelSize=R}}encode(A,R){return new Uint8Array(A.buffer,A.byteOffset,A.byteLength)}allocate(A){return new Uint8Array(A*this.channelSize)}decode(A,R){if(A instanceof Uint8Array)return A.subarray(0,R);throw new Error(`Invalid array type: ${A.constructor}`)}}},7859:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBatchDim=_.sizeToSquarishShape=_.getRowsCols=_.sizeFromShape=_.isInt=_.parseAxisParam=_.squeezeShape=_.PreferLogicalStrategy=_.AlwaysKeepOriginalSizeStrategy=void 0;const C=E(6231),A=E(2517);function R(V,D){const O=[],L=[],z=D!=null&&Array.isArray(D)&&D.length===0,W=D==null||z?null:I(D,V).sort();let X=0;for(let Y=0;Y<V.length;++Y){if(W!=null){if(W[X]===Y&&V[Y]!==1)throw new Error(`Can't squeeze axis ${Y} since its dim '${V[Y]}' is not 1`);(W[X]==null||W[X]>Y)&&V[Y]===1&&(O.push(V[Y]),L.push(Y)),W[X]<=Y&&X++}V[Y]!==1&&(O.push(V[Y]),L.push(Y))}return{newShape:O,keptDims:L}}function I(V,D){const O=D.length;return V=V==null?D.map((L,z)=>z):[].concat(V),(0,A.assert)(V.every(L=>L>=-O&&L<O),()=>`All values in axis param must be in range [-${O}, ${O}) but got axis ${V}`),(0,A.assert)(V.every(F),()=>`All values in axis param must be integers but got axis ${V}`),V.map(L=>L<0?O+L:L)}function F(V){return V%1==0}function B(V){if(V.length===0)return 1;let D=V[0];for(let O=1;O<V.length;O++)D*=V[O];return D}function U(V){const D=Math.ceil(Math.sqrt(V));return[D,Math.ceil(V/D)]}_.AlwaysKeepOriginalSizeStrategy=class{constructor(V){this.maxTextureSize=V}computeTextureWH(V,D){if(V.length===0)return[1,1];const O=this.maxTextureSize;if(D&&D.breakAxis!==void 0){const W=D.breakAxis>=V.length?1:V.slice(D.breakAxis).reduce((Y,K)=>Y*K),X=D.breakAxis<=0?1:V.slice(0,D.breakAxis).reduce((Y,K)=>Y*K);if(!(W>O||X>O))return[W,X];C.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${V}, breakAxis:${D.breakAxis}`)}const L=V.reduce((W,X)=>W*X);let z=Math.floor(Math.sqrt(L));for(;z<O&&z<L&&L%z!=0;z++);if(z>=O||L%z!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${V}`);return[z,L/z]}},_.PreferLogicalStrategy=class{constructor(V){this.maxTextureSize=V}computeTextureWH(V,D){const O=this.computeTexture(V,D);return D&&D.isPacked&&(O[0]/=2,O[1]/=2),D&&D.reverseWH?[O[1],O[0]]:O}computeTexture(V,D){const O=D&&D.isPacked;if(V.length===0)return O?[2,2]:[1,1];let L=this.maxTextureSize;if(D&&D.breakAxis!==void 0){const X=D.breakAxis>=V.length?1:V.slice(D.breakAxis).reduce((K,Q)=>K*Q),Y=D.breakAxis<=0?1:V.slice(0,D.breakAxis).reduce((K,Q)=>K*Q);if(!(X>L||Y>L))return[X,Y];C.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${V}, breakAxis:${D.breakAxis}`)}let z=V.slice(0);O&&(L*=2,z=z.map((X,Y)=>Y>=z.length-2?z[Y]%2==0?z[Y]:z[Y]+1:z[Y]),z.length===1&&(z=[2,z[0]])),z.length!==2&&(z=R(z).newShape);const W=B(z);return z.length<=1&&W<=L?[1,W]:z.length===2&&z[0]<=L&&z[1]<=L?z:z.length===3&&z[0]*z[1]<=L&&z[2]<=L?[z[0]*z[1],z[2]]:z.length===3&&z[0]<=L&&z[1]*z[2]<=L?[z[0],z[1]*z[2]]:z.length===4&&z[0]*z[1]*z[2]<=L&&z[3]<=L?[z[0]*z[1]*z[2],z[3]]:z.length===4&&z[0]<=L&&z[1]*z[2]*z[3]<=L?[z[0],z[1]*z[2]*z[3]]:O?U(W/4).map(X=>2*X):U(W)}},_.squeezeShape=R,_.parseAxisParam=I,_.isInt=F,_.sizeFromShape=B,_.getRowsCols=function(V){if(V.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[V.length>1?V[V.length-2]:1,V[V.length-1]]},_.sizeToSquarishShape=U,_.getBatchDim=function(V,D=2){return B(V.slice(0,V.length-D))}},4057:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createTextureLayoutFromShape=_.calculateTextureWidthAndHeight=_.createTextureLayoutFromTextureType=void 0;const C=E(2517),A=E(2039);_.createTextureLayoutFromTextureType=(R,I,F)=>{const B=F===A.TextureType.unpacked||F===A.TextureType.unpackedReversed?1:4,U=F===A.TextureType.packed,V=F===A.TextureType.unpackedReversed||F===A.TextureType.packed,D=F===A.TextureType.packedLastDimension?I.length-1:void 0,O=F===A.TextureType.packedLastDimension?I.map((L,z)=>z===I.length-1?4*L:L):void 0;return(0,_.createTextureLayoutFromShape)(R,I,B,O,{isPacked:U,reverseWH:V,breakAxis:D})},_.calculateTextureWidthAndHeight=(R,I,F)=>{const B=(0,_.createTextureLayoutFromTextureType)(R,I,F);return[B.width,B.height]},_.createTextureLayoutFromShape=(R,I,F=1,B,U)=>{const V=!(!U||!U.isPacked),[D,O]=R.computeTextureWH(V&&B||I,U),L=I.length;let z=I.slice(0);if(L===0&&(z=[1]),F===1)B=I;else if(V){if(F!==4)throw new Error("a packed texture must be 4-channel");B=I,L>0&&(z[L-1]=Math.ceil(z[L-1]/2)),L>1&&(z[L-2]=Math.ceil(z[L-2]/2))}else if(!B)throw new Error("Unpacked shape is needed when using channels > 1");return{width:D,height:O,channels:F,isPacked:V,shape:z,strides:C.ShapeUtil.computeStrides(z),unpackedShape:B,reversedWH:U&&U.reverseWH}}},5702:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextureManager=void 0;const C=E(6231);_.TextureManager=class{constructor(A,R,I,F){this.glContext=A,this.layoutStrategy=R,this.profiler=I,this.config=F,this.pendingRead=new Map,F.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(A,R,I,F){const B=this.toEncoderType(A),U=this.glContext.getEncoder(B,R.channels||1,F);if(R.isPacked&&F===1)throw new Error("not implemented");const V=R.width,D=R.height;let O,L;if(this.config.reuseTextures){O=`${V}x${D}_${U.format}_${U.internalFormat}_${U.textureType}`,L=this.inUseTextures.get(O),L||(L=[],this.inUseTextures.set(O,L));const W=this.idleTextures.get(O);if(W&&W.length>0){const X=W.pop();return L.push(X),F===1&&this.glContext.updateTexture(X,V,D,U,this.toTextureData(A,I)),X}}C.Logger.verbose("TextureManager",`Creating new texture of size ${R.width}x${R.height}`);const z=this.glContext.allocateTexture(V,D,U,this.toTextureData(A,I));return this.config.reuseTextures&&(L.push(z),this.textureLookup.set(z,O)),z}readTexture(A,R,I){return I||(I=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const F=A.shape.reduce((U,V)=>U*V)*I,B=this.glContext.readTexture(A.texture,A.width,A.height,F,this.toEncoderType(R),I);return this.toTensorData(R,B)})}async readTextureAsync(A,R,I){const F=A.tensor.dataId;if(I||(I=1),this.pendingRead.has(F)){const B=this.pendingRead.get(F);return new Promise(U=>B==null?void 0:B.push(U))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(F,[]);const B=A.shape.reduce((O,L)=>O*L)*I;await this.glContext.createAndWaitForFence();const U=this.glContext.readTexture(A.texture,A.width,A.height,B,this.toEncoderType(R),I),V=this.toTensorData(R,U),D=this.pendingRead.get(F);return this.pendingRead.delete(F),D==null||D.forEach(O=>O(V)),V})}readUint8TextureAsFloat(A){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const R=A.shape.reduce((F,B)=>F*B),I=this.glContext.readTexture(A.texture,A.width,A.height,4*R,"byte",4);return new Float32Array(I.buffer,I.byteOffset,R)})}releaseTexture(A,R){let I;if(this.config.reuseTextures&&(I=this.textureLookup.get(A.texture),I)){R&&this.textureLookup.delete(I);const F=this.inUseTextures.get(I);if(F){const B=F.indexOf(A.texture);if(B!==-1){F.splice(B,1);let U=this.idleTextures.get(I);U||(U=[],this.idleTextures.set(I,U)),U.push(A.texture)}}}I&&!R||(C.Logger.verbose("TextureManager",`Deleting texture of size ${A.width}x${A.height}`),this.glContext.deleteTexture(A.texture))}toTensorData(A,R){switch(A){case"int16":return R instanceof Int16Array?R:Int16Array.from(R);case"int32":return R instanceof Int32Array?R:Int32Array.from(R);case"int8":return R instanceof Int8Array?R:Int8Array.from(R);case"uint16":return R instanceof Uint16Array?R:Uint16Array.from(R);case"uint32":return R instanceof Uint32Array?R:Uint32Array.from(R);case"uint8":case"bool":return R instanceof Uint8Array?R:Uint8Array.from(R);case"float32":return R instanceof Float32Array?R:Float32Array.from(R);case"float64":return R instanceof Float64Array?R:Float64Array.from(R);default:throw new Error(`TensorData type ${A} is not supported`)}}toTextureData(A,R){if(R)return R instanceof Float32Array?R:new Float32Array(R)}toEncoderType(A){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(T,_)=>{var E;Object.defineProperty(_,"__esModule",{value:!0}),_.TextureType=void 0,(E=_.TextureType||(_.TextureType={}))[E.unpacked=0]="unpacked",E[E.unpackedReversed=1]="unpackedReversed",E[E.packed=2]="packed",E[E.downloadUint8AsFloat=3]="downloadUint8AsFloat",E[E.packedLastDimension=4]="packedLastDimension"},9390:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getGlChannels=_.getCoordsDataType=_.getSqueezedParams=_.squeezeInputShape=_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_.generateShaderFuncNameFromInputSamplerName=_.repeatedTry=_.getPackedShape=void 0;const C=E(2517);_.getPackedShape=function(A){const R=A.length;return A.slice(0,R-1).concat(A[R-1]/4)},_.repeatedTry=async function(A,R=F=>0,I){return new Promise((F,B)=>{let U=0;const V=()=>{if(A())return void F();U++;const D=R(U);I!=null&&U>=I?B():setTimeout(V,D)};V()})},_.generateShaderFuncNameFromInputSamplerName=function(A){return(0,C.assert)(A!==void 0&&A.length!==0,()=>"empty string found for sampler name"),"get"+A.charAt(0).toUpperCase()+A.slice(1)},_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(A){return(0,C.assert)(A!==void 0&&A.length!==0,()=>"empty string found for sampler name"),"get"+A.charAt(0).toUpperCase()+A.slice(1)+"AtOutCoords"},_.squeezeInputShape=function(A,R){let I=JSON.parse(JSON.stringify(A));return I=R,I},_.getSqueezedParams=function(A,R){return R.map(I=>A[I]).join(", ")},_.getCoordsDataType=function(A){if(A<=1)return"int";if(A===2)return"ivec2";if(A===3)return"ivec3";if(A===4)return"ivec4";if(A===5)return"ivec5";if(A===6)return"ivec6";throw Error(`GPU for rank ${A} is not yet supported`)},_.getGlChannels=function(A=6){return["x","y","z","w","u","v"].slice(0,A)}},7305:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createNewWebGLContext=_.createWebGLContext=void 0;const C=E(6231),A=E(1713),R={};function I(F){const B=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const D=document.createElement("canvas");return D.width=1,D.height=1,D}();let U;const V={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!F||F==="webgl2")&&(U=B.getContext("webgl2",V),U))try{return new A.WebGLContext(U,2)}catch(D){C.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${D}`)}if((!F||F==="webgl")&&(U=B.getContext("webgl",V)||B.getContext("experimental-webgl",V),U))try{return new A.WebGLContext(U,1)}catch(D){C.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${D}`)}throw new Error("WebGL is not supported")}_.createWebGLContext=function F(B){let U;B&&B!=="webgl2"||!("webgl2"in R)?B&&B!=="webgl"||!("webgl"in R)||(U=R.webgl):U=R.webgl2,U=U||I(B),B=B||U.version===1?"webgl":"webgl2";const V=U.gl;return R[B]=U,V.isContextLost()?(delete R[B],F(B)):(V.disable(V.DEPTH_TEST),V.disable(V.STENCIL_TEST),V.disable(V.BLEND),V.disable(V.DITHER),V.disable(V.POLYGON_OFFSET_FILL),V.disable(V.SAMPLE_COVERAGE),V.enable(V.SCISSOR_TEST),V.enable(V.CULL_FACE),V.cullFace(V.BACK),U)},_.createNewWebGLContext=I},1713:function(T,_,E){var C=this&&this.__createBinding||(Object.create?function(V,D,O,L){L===void 0&&(L=O);var z=Object.getOwnPropertyDescriptor(D,O);z&&!("get"in z?!D.__esModule:z.writable||z.configurable)||(z={enumerable:!0,get:function(){return D[O]}}),Object.defineProperty(V,L,z)}:function(V,D,O,L){L===void 0&&(L=O),V[L]=D[O]}),A=this&&this.__setModuleDefault||(Object.create?function(V,D){Object.defineProperty(V,"default",{enumerable:!0,value:D})}:function(V,D){V.default=D}),R=this&&this.__importStar||function(V){if(V&&V.__esModule)return V;var D={};if(V!=null)for(var O in V)O!=="default"&&Object.prototype.hasOwnProperty.call(V,O)&&C(D,V,O);return A(D,V),D};Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLContext=_.linearSearchLastTrue=void 0;const I=E(1670),F=R(E(7769)),B=E(9390);function U(V){let D=0;for(;D<V.length&&V[D]();++D);return D-1}_.linearSearchLastTrue=U,_.WebGLContext=class{constructor(V,D){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=V,this.version=D,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(V,D,O,L){const z=this.gl,W=z.createTexture();z.bindTexture(z.TEXTURE_2D,W),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE);const X=L?O.encode(L,V*D):null;return z.texImage2D(z.TEXTURE_2D,0,O.internalFormat,V,D,0,O.format,O.textureType,X),this.checkError(),W}updateTexture(V,D,O,L,z){const W=this.gl;W.bindTexture(W.TEXTURE_2D,V);const X=L.encode(z,D*O);W.texSubImage2D(W.TEXTURE_2D,0,0,0,D,O,L.format,L.textureType,X),this.checkError()}attachFramebuffer(V,D,O){const L=this.gl;L.bindTexture(L.TEXTURE_2D,V),L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,V,0),this.checkError(),L.viewport(0,0,D,O),L.scissor(0,0,D,O)}readTexture(V,D,O,L,z,W){const X=this.gl;W||(W=1),this.frameBufferBound||this.attachFramebuffer(V,D,O);const Y=this.getEncoder(z,W),K=Y.allocate(D*O);return X.bindTexture(X.TEXTURE_2D,V),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,V,0),X.readPixels(0,0,D,O,X.RGBA,Y.textureType,K),this.checkError(),Y.decode(K,L)}isFramebufferReady(){return!0}getActiveTexture(){const V=this.gl;return"TEXTURE"+(V.getParameter(this.gl.ACTIVE_TEXTURE)-V.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(V,D){const O=this.gl;O.vertexAttribPointer(V,3,O.FLOAT,!1,20,0),O.enableVertexAttribArray(V),D!==-1&&(O.vertexAttribPointer(D,2,O.FLOAT,!1,20,12),O.enableVertexAttribArray(D)),this.checkError()}createProgram(V,D){const O=this.gl,L=O.createProgram();return O.attachShader(L,V),O.attachShader(L,D),O.linkProgram(L),L}compileShader(V,D){const O=this.gl,L=O.createShader(D);if(!L)throw new Error(`createShader() returned null with type ${D}`);if(O.shaderSource(L,V),O.compileShader(L),O.getShaderParameter(L,O.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${O.getShaderInfoLog(L)}
Shader source:
${V}`);return L}deleteShader(V){this.gl.deleteShader(V)}bindTextureToUniform(V,D,O){const L=this.gl;L.activeTexture(L.TEXTURE0+D),this.checkError(),L.bindTexture(L.TEXTURE_2D,V),this.checkError(),L.uniform1i(O,D),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(I.env.debug){const V=this.gl,D=V.getError();let O="";switch(D){case V.NO_ERROR:return;case V.INVALID_ENUM:O="INVALID_ENUM";break;case V.INVALID_VALUE:O="INVALID_VALUE";break;case V.INVALID_OPERATION:O="INVALID_OPERATION";break;case V.INVALID_FRAMEBUFFER_OPERATION:O="INVALID_FRAMEBUFFER_OPERATION";break;case V.OUT_OF_MEMORY:O="OUT_OF_MEMORY";break;case V.CONTEXT_LOST_WEBGL:O="CONTEXT_LOST_WEBGL";break;default:O=`Unknown WebGL Error: ${D.toString(16)}`}throw new Error(O)}}deleteTexture(V){this.gl.deleteTexture(V)}deleteProgram(V){this.gl.deleteProgram(V)}getEncoder(V,D,O=0){if(this.version===2)return new F.RedFloat32DataEncoder(this.gl,D);switch(V){case"float":return O===1||this.isRenderFloat32Supported?new F.RGBAFloatDataEncoder(this.gl,D):new F.RGBAFloatDataEncoder(this.gl,D,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new F.Uint8DataEncoder(this.gl,D);default:throw new Error(`Invalid dataType: ${V}`)}}clearActiveTextures(){const V=this.gl;for(let D=0;D<this.maxTextureImageUnits;++D)V.activeTexture(V.TEXTURE0+D),V.bindTexture(V.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const V=this.gl;V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteFramebuffer(this.framebuffer),V.bindBuffer(V.ARRAY_BUFFER,null),V.deleteBuffer(this.vertexbuffer),V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,null),V.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const V=this.gl,D=V.createBuffer();if(!D)throw new Error("createBuffer() returned null");const O=this.createDefaultGeometry();return V.bindBuffer(V.ARRAY_BUFFER,D),V.bufferData(V.ARRAY_BUFFER,O,V.STATIC_DRAW),this.checkError(),D}createFramebuffer(){const V=this.gl.createFramebuffer();if(!V)throw new Error("createFramebuffer returned null");return V}queryVitalParameters(){const V=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=V.getParameter(V.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=V.getParameter(V.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const V=this.gl,D=V.createTexture();V.bindTexture(V.TEXTURE_2D,D);const O=this.version===2?V.RGBA32F:V.RGBA;V.texImage2D(V.TEXTURE_2D,0,O,1,1,0,V.RGBA,V.FLOAT,null);const L=V.createFramebuffer();V.bindFramebuffer(V.FRAMEBUFFER,L),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,D,0);const z=V.checkFramebufferStatus(V.FRAMEBUFFER)===V.FRAMEBUFFER_COMPLETE;return V.bindTexture(V.TEXTURE_2D,null),V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteTexture(D),V.deleteFramebuffer(L),z}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const V=this.gl;let D,O,L,z,W;try{D=V.createTexture(),O=V.createFramebuffer(),V.bindTexture(V.TEXTURE_2D,D);const X=this.version===2?V.RGBA32F:V.RGBA;return V.texImage2D(V.TEXTURE_2D,0,X,1,1,0,V.RGBA,V.FLOAT,null),V.bindFramebuffer(V.FRAMEBUFFER,O),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,D,0),V.enable(V.BLEND),L=V.createShader(V.VERTEX_SHADER),!!L&&(V.shaderSource(L,"void main(){}"),V.compileShader(L),z=V.createShader(V.FRAGMENT_SHADER),!!z&&(V.shaderSource(z,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),V.compileShader(z),W=V.createProgram(),!!W&&(V.attachShader(W,L),V.attachShader(W,z),V.linkProgram(W),V.useProgram(W),V.drawArrays(V.POINTS,0,1),V.getError()===V.NO_ERROR)))}finally{V.disable(V.BLEND),W&&V.deleteProgram(W),L&&V.deleteShader(L),z&&V.deleteShader(z),O&&(V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteFramebuffer(O)),D&&(V.bindTexture(V.TEXTURE_2D,null),V.deleteTexture(D))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const V=this.gl,D=this.disjointTimerQueryWebgl2Extension,O=V.createQuery();return V.beginQuery(D.TIME_ELAPSED_EXT,O),O}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const V=this.gl,D=this.disjointTimerQueryWebgl2Extension;V.endQuery(D.TIME_ELAPSED_EXT)}}isTimerResultAvailable(V){let D=!1,O=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const L=this.gl,z=this.disjointTimerQueryWebgl2Extension;D=L.getQueryParameter(V,L.QUERY_RESULT_AVAILABLE),O=L.getParameter(z.GPU_DISJOINT_EXT)}return D&&!O}getTimerResult(V){let D=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const O=this.gl;D=O.getQueryParameter(V,O.QUERY_RESULT),O.deleteQuery(V)}return D/1e6}async waitForQueryAndGetTime(V){return await(0,B.repeatedTry)(()=>this.isTimerResultAvailable(V)),this.getTimerResult(V)}async createAndWaitForFence(){const V=this.createFence(this.gl);return this.pollFence(V)}createFence(V){let D;const O=V,L=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);return V.flush(),D=L===null?()=>!0:()=>{const z=O.clientWaitSync(L,0,0);return z===O.ALREADY_SIGNALED||z===O.CONDITION_SATISFIED},{query:L,isFencePassed:D}}async pollFence(V){return new Promise(D=>{this.addItemToPoll(()=>V.isFencePassed(),()=>D())})}pollItems(){const V=U(this.itemsToPoll.map(D=>D.isDoneFn));for(let D=0;D<=V;++D){const{resolveFn:O}=this.itemsToPoll[D];O()}this.itemsToPoll=this.itemsToPoll.slice(V+1)}async addItemToPoll(V,D){this.itemsToPoll.push({isDoneFn:V,resolveFn:D}),this.itemsToPoll.length>1||await(0,B.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExecutionPlan=void 0;const C=E(6231);class A{constructor(I,F){this.op=I,this.node=F}}_.ExecutionPlan=class{constructor(R,I,F){this.graph=R,this.profiler=F,this.initialize(I)}initialize(R){this.profiler.event("session","ExecutionPlan.initialize",()=>{const I=this.graph.getNodes();if(I.length!==R.length)throw new Error("The size of nodes and OPs do not match.");this._ops=R.map((F,B)=>new A(F,I[B])),this.reset(),this._starter=[],this._ops.forEach((F,B)=>{let U=!0;for(const V of F.node.inputs)if(!this._values[V]&&this.graph.getInputIndices().indexOf(V)===-1){U=!1;break}U&&this._starter.push(B)})})}reset(){this._values=this.graph.getValues().map(R=>R.tensor)}async execute(R,I){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const F=R.createInferenceHandler(),B=this.graph.getInputIndices();if(I.length!==B.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${I.length} expected: ${B.length}`);I.forEach((z,W)=>{const X=B[W];this._values[X]=z});const U=this._starter.slice(0),V=this.graph.getValues(),D=this.graph.getNodes();let O=0;for(;O<U.length;){const z=U[O++],W=this._ops[z],X=W.node.inputs.map(ee=>this._values[ee]);if(X.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${W.node}`);const Y=X;C.Logger.verbose("ExecPlan",`Runing op:${W.node.name} (${Y.map((ee,J)=>`'${W.node.inputs[J]}': ${ee.type}[${ee.dims.join(",")}]`).join(", ")})`);const K=await this.profiler.event("node",W.node.name,async()=>W.op.impl(F,Y,W.op.context));if(K.length!==W.node.outputs.length)throw new Error("the size of output does not match model definition.");K.forEach((ee,J)=>{const ie=W.node.outputs[J];if(this._values[ie])throw new Error(`output [${ie}] already has value: op:${W.node.name}`);this._values[ie]=ee});const Q=new Set;K.forEach((ee,J)=>{const ie=W.node.outputs[J];for(const re of V[ie].to){const se=D[re];let ne=!0;for(const oe of se.inputs)if(!this._values[oe]){ne=!1;break}ne&&Q.add(re)}}),U.push(...Q)}const L=[];for(let z=0;z<this.graph.getOutputIndices().length;z++){const W=this.graph.getOutputIndices()[z],X=this._values[W];if(X===void 0)throw new Error(`required output [${W}] does not have value`);W===0?await X.getData():X.data,L.push(X)}return C.Logger.verbose("ExecPlan","disposing of inferenceHandler"),F.dispose(),L})}}},7070:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Graph=void 0;const C=E(1446),A=E(7778),R=E(9395),I=E(9162),F=E(2517);var B=R.onnxruntime.experimental.fbs;_.Graph={from:(O,L)=>new D(O,L)};class U{constructor(L){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,L&&(this.type=F.ProtoUtil.tensorValueTypeFromProto(L.type.tensorType))}get from(){return this._from}get to(){return this._to}}class V{constructor(L,z){L instanceof C.onnx.NodeProto?(this.name=L.name,this.opType=L.opType,this.attributes=new A.Attribute(L.attribute)):L instanceof B.Node&&(this.name=z??L.name(),this.opType=L.opType(),this.attributes=new A.Attribute(F.ProtoUtil.tensorAttributesFromORTFormat(L))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class D{constructor(L,z){if(!L)throw new TypeError("graph is empty");this.buildGraph(L),this.transformGraph(z),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(L){if(L instanceof C.onnx.GraphProto)this.buildGraphFromOnnxFormat(L);else{if(!(L instanceof B.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(L)}}buildGraphFromOnnxFormat(L){const z=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const W=new Map;if(!L.input)throw new Error("missing information in graph: input");const X=[];for(const Y of L.input){if(z.has(Y.name))throw new Error(`duplicated input name: ${Y.name}`);const K=this._allData.push(new U(Y))-1;z.set(Y.name,K),X.push(Y.name)}if(!L.initializer)throw new Error("missing information in graph: initializer");for(const Y of L.initializer){let K=z.get(Y.name);if(K===void 0){const Q=new U;Q.type={shape:{dims:F.ProtoUtil.tensorDimsFromProto(Y.dims)},tensorType:F.ProtoUtil.tensorDataTypeFromProto(Y.dataType)},K=this._allData.push(Q)-1,z.set(Y.name,K)}this._allData[K]._from=-1,this._allData[K].tensor=I.Tensor.fromProto(Y)}for(let Y=0;Y<this._allData.length;Y++)this._allData[Y].tensor||(this._allInputIndices.push(Y),this._allInputNames.push(X[Y]));if(!L.output)throw new Error("missing information in graph: output");for(const Y of L.output){if(z.has(Y.name))throw new Error(`duplicated output name: ${Y.name}`);const K=this._allData.push(new U(Y))-1;z.set(Y.name,K),this._allOutputIndices.push(K),this._allOutputNames.push(Y.name)}if(!L.node)throw new Error("missing information in graph: node");for(const Y of L.node){if(!Y.name)for(let Q=0;;Q++){const ee=`unnamed_${Y.opType}_${Q}`;if(!W.has(ee)){Y.name=ee;break}}if(W.has(Y.name))throw new Error(`duplicated node name: ${Y.name}`);const K=this._nodes.push(new V(Y))-1;W.set(Y.name,K)}for(let Y=0;Y<this._nodes.length;Y++){const K=this._nodes[Y],Q=L.node[Y];if(!Q.output)throw new Error(`missing output for node: ${Q.name}`);for(const ee of Q.output){let J=z.get(ee);if(J===void 0&&(J=this._allData.push(new U)-1,z.set(ee,J)),K.outputs.push(J),this._allData[J]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${J}`);if(this._allData[J]._from=Y,Q.opType==="Constant"){if(!Q.attribute||Q.attribute.length!==1||!Q.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!Q.output||Q.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");K.outputs.pop(),K.executeNode=!1,this._allData[J]._from=-1,this._allData[J].tensor=I.Tensor.fromProto(Q.attribute[0].t)}}}for(let Y=0;Y<this._nodes.length;Y++){const K=this._nodes[Y],Q=L.node[Y];if(!Q.input)throw new Error(`missing input for node: ${Q.name}`);for(const ee of Q.input){const J=z.get(ee);if(J===void 0){if(ee===""&&Q.input.length===3&&Q.opType==="Resize")continue;throw new Error(`unrecognized input '${ee}' for node: ${Q.name}`)}K.inputs.push(J),this._allData[J]._to.push(Y)}}return!0}buildGraphFromOrtFormat(L){var z,W,X;const Y=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const K=new Map,Q=[];for(let ee=0;ee<L.inputsLength();ee++){const J=L.inputs(ee);if(Y.has(J))throw new Error(`duplicated input name: ${J}`);for(let ie=0;ie<L.nodeArgsLength();ie++)if(((z=L.nodeArgs(ie))===null||z===void 0?void 0:z.name())===J){const re=new U;if(((X=(W=L.nodeArgs(ie))===null||W===void 0?void 0:W.type())===null||X===void 0?void 0:X.valueType())!==B.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const se=L.nodeArgs(ie).type().value(new B.TensorTypeAndShape),ne=F.ProtoUtil.tensorDataTypeFromProto(se.elemType()),oe=se.shape(),fe=[];for(let ge=0;ge<oe.dimLength();ge++)fe.push(F.LongUtil.longToNumber(oe.dim(ge).value().dimValue()));re.type={shape:{dims:fe},tensorType:ne};const he=this._allData.push(re)-1;Y.set(J,he),Q.push(J)}}for(let ee=0;ee<L.initializersLength();ee++){const J=L.initializers(ee);let ie=Y.get(J.name());if(ie===void 0){const re=new U,se=F.ProtoUtil.tensorDimsFromORTFormat(J),ne=F.ProtoUtil.tensorDataTypeFromProto(J.dataType());re.type={shape:{dims:se},tensorType:ne},ie=this._allData.push(re)-1,Y.set(J.name(),ie)}this._allData[ie]._from=-1,this._allData[ie].tensor=I.Tensor.fromOrtTensor(J)}for(let ee=0;ee<this._allData.length;ee++)this._allData[ee].tensor||(this._allInputIndices.push(ee),this._allInputNames.push(Q[ee]));for(let ee=0;ee<L.outputsLength();ee++){const J=L.outputs(ee);if(Y.has(J))throw new Error(`duplicated output name: ${J}`);const ie=this._allData.push(new U)-1;Y.set(J,ie),this._allOutputIndices.push(ie),this._allOutputNames.push(J)}if(!L.nodes)throw new Error("missing information in graph: node");for(let ee=0;ee<L.nodesLength();ee++){const J=L.nodes(ee);let ie=J.name();if(!ie)for(let se=0;ie=`unnamed_${J.opType()}_${se}`,K.has(ie);se++);if(K.has(ie))throw new Error(`duplicated node name: ${ie}`);const re=this._nodes.push(new V(J,ie))-1;K.set(ie,re)}for(let ee=0;ee<this._nodes.length;ee++){const J=this._nodes[ee],ie=L.nodes(ee);if(ie==null)throw new Error(`No node exists at index ${ee}`);if((ie==null?void 0:ie.outputsLength())===0)throw new Error(`missing output for node: ${ie.name}`);for(let re=0;re<(ie==null?void 0:ie.outputsLength());re++){const se=ie==null?void 0:ie.outputs(re);let ne=Y.get(se);if(ne===void 0&&(ne=this._allData.push(new U)-1,Y.set(se,ne)),J.outputs.push(ne),this._allData[ne]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ne}`);if(this._allData[ne]._from=ee,ie.opType()==="Constant"){if(ie.attributesLength()!==1||!ie.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(ie.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");J.outputs.pop(),J.executeNode=!1,this._allData[ne]._from=-1,this._allData[ne].tensor=I.Tensor.fromOrtTensor(ie.attributes(0).t())}}}for(let ee=0;ee<this._nodes.length;ee++){const J=this._nodes[ee],ie=L.nodes(ee);if(ie.inputsLength()===0)throw new Error(`missing input for node: ${ie.name}`);for(let re=0;re<ie.inputsLength();re++){const se=ie.inputs(re),ne=Y.get(se);if(ne===void 0)throw new Error(`unrecognized input '${se}' for node: ${ie.name()}`);J.inputs.push(ne),this._allData[ne]._to.push(ee)}}}checkIsAcyclic(){const L=new Set;this._allInputIndices.forEach(X=>{this._allData[X]._to.forEach(Y=>{L.add(Y)})});const z=Array.from(L),W=new Array(this._nodes.length).fill("white");for(;z.length>0;){const X=z.pop();W[X]==="gray"?W[X]="black":(z.push(X),W[X]="gray",this._nodes[X].outputs.forEach(Y=>{const K=this._allData[Y];if(K.tensor!==void 0)throw new Error("node outputs should not be initialized");if(K._from!==X)throw new Error("from property of the Value object doesn't match index of Node being processed");K._to.forEach(Q=>{if(W[Q]==="gray")throw new Error("model graph is cyclic");W[Q]==="white"&&z.push(Q)})}))}}transformGraph(L){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),L&&L.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let L=0;for(let z=0;z<this._nodes.length;z++)this._nodes[z].executeNode?L>0&&(this._nodes[z].inputs.forEach(W=>{const X=this._allData[W]._to.indexOf(z+L);X!==-1&&(this._allData[W]._to[X]=z)}),this._nodes[z].outputs.forEach(W=>{this._allData[W]._from&&this._allData[W]._from===z+L&&(this._allData[W]._from=z)})):(L++,this._nodes[z].outputs.forEach(W=>{this._allData[W]._from=-2}),this._nodes.splice(z,1),z--);L=0;for(let z=0;z<this._allData.length;z++)if(this._allData[z].from!==-2||this._allOutputIndices.indexOf(z+L)!==-1){if(L>0){let W=-1;this._allData[z].from!==void 0&&this._allData[z].from!==-1?(W=this._nodes[this._allData[z].from].outputs.indexOf(z+L),W!==-1&&(this._nodes[this._allData[z].from].outputs[W]=z)):(W=this._allInputIndices.indexOf(z+L),W!==-1&&(this._allInputIndices[W]=z)),this._allData[z].to.forEach(X=>{W=this._nodes[X].inputs.indexOf(z+L),W!==-1&&(this._nodes[X].inputs[W]=z)}),this._allData[z].to.length===0&&(W=this._allOutputIndices.indexOf(z+L),W!==-1&&(this._allOutputIndices[W]=z))}}else L++,this._allData.splice(z,1),z--}deleteNode(L){const z=this._nodes[L];if(z.outputs.length>1){for(let ee=1;ee<z.outputs.length;ee++)if(this._allData[z.outputs[ee]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}z.executeNode=!1;const W=z.inputs[0],X=z.outputs[0],Y=this._allData[X].to,K=this._allData[W].to.indexOf(L);if(K===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[W].to.splice(K,1),this._allData[X]._to=[];const Q=this._allOutputIndices.indexOf(X);if(Q!==-1&&(this._allOutputIndices[Q]=W),Y&&Y.length>0)for(const ee of Y){const J=this._nodes[ee].inputs.indexOf(X);if(J===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[ee].inputs[J]=W,this._allData[W].to.push(ee)}}removeAllDropoutNodes(){let L=0;for(const z of this._nodes){if(z.opType==="Dropout"){if(z.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(z.outputs.length!==1&&z.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(z.outputs.length===2&&this._allData[z.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(L)}L++}}removeAllIdentityNodes(){let L=0;for(const z of this._nodes)z.opType==="Identity"&&this.deleteNode(L),L++}isActivation(L){switch(L.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const L of this._nodes)if(L.opType==="Conv"){const z=this._allData[L.outputs[0]]._to;if(z.length===1&&this.isActivation(this._nodes[z[0]])){const W=this._nodes[z[0]];if(W.opType==="Clip")if(W.inputs.length===1)try{L.attributes.set("activation_params","floats",[W.attributes.getFloat("min"),W.attributes.getFloat("max")])}catch{L.attributes.set("activation_params","floats",[F.MIN_CLIP,F.MAX_CLIP])}else{if(!(W.inputs.length>=3&&this._allData[W.inputs[1]].tensor!==void 0&&this._allData[W.inputs[2]].tensor!==void 0))continue;L.attributes.set("activation_params","floats",[this._allData[W.inputs[1]].tensor.floatData[0],this._allData[W.inputs[2]].tensor.floatData[0]])}L.attributes.set("activation","string",W.opType),this.deleteNode(z[0])}}}}},6231:(T,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.now=_.Profiler=_.Logger=void 0;const E={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},C={none:new class{log(V,D,O){}},console:new class{log(V,D,O){console.log(`${this.color(V)} ${O?"\x1B[35m"+O+"\x1B[0m ":""}${D}`)}color(V){switch(V){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${V}`)}}}},A={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let R={"":A};function I(V,D,O,L){if(D===void 0)return z=V,{verbose:I.verbose.bind(null,z),info:I.info.bind(null,z),warning:I.warning.bind(null,z),error:I.error.bind(null,z),fatal:I.fatal.bind(null,z)};if(O===void 0)F(V,D);else if(typeof O=="number"&&L===void 0)F(V,D);else if(typeof O=="string"&&L===void 0)F(V,O,0,D);else{if(typeof O!="string"||typeof L!="number")throw new TypeError("input is valid");F(V,O,0,D)}var z}function F(V,D,O,L){const z=R[L||""]||R[""];E[V]<E[z.minimalSeverity]||(z.logDateTime&&(D=`${new Date().toISOString()}|${D}`),z.logSourceLocation,C[z.provider].log(V,D,L))}(function(V){function D(L){R={},O("",L||{})}function O(L,z){if(L==="*")D(z);else{const W=R[L]||A;R[L]={provider:z.provider||W.provider,minimalSeverity:z.minimalSeverity||W.minimalSeverity,logDateTime:z.logDateTime===void 0?W.logDateTime:z.logDateTime,logSourceLocation:z.logSourceLocation===void 0?W.logSourceLocation:z.logSourceLocation}}}V.verbose=function(L,z){V("verbose",L,z)},V.info=function(L,z){V("info",L,z)},V.warning=function(L,z){V("warning",L,z)},V.error=function(L,z){V("error",L,z)},V.fatal=function(L,z){V("fatal",L,z)},V.reset=D,V.set=O,V.setWithEnv=function(L){const z={};L.logLevel&&(z.minimalSeverity=L.logLevel),O("",z)}})(I||(I={})),_.Logger=I;class B{constructor(D,O,L,z,W,X){this.category=D,this.name=O,this.startTime=L,this.endCallback=z,this.timer=W,this.ctx=X}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class U{constructor(D,O,L,z){this.category=D,this.name=O,this.startTime=L,this.endTime=z}}_.Profiler=class{static create(V){return V===void 0?new this:new this(V.maxNumberEvents,V.flushBatchSize,V.flushIntervalInMilliseconds)}constructor(V,D,O){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=V===void 0?1e4:V,this._flushBatchSize=D===void 0?10:D,this._flushIntervalInMilliseconds=O===void 0?5e3:O}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(V,D,O,L){const z=this._started?this.begin(V,D,L):void 0;let W=!1;const X=O();if(X&&typeof X.then=="function")return W=!0,new Promise((Y,K)=>{X.then(async Q=>{z&&await z.end(),Y(Q)},async Q=>{z&&await z.end(),K(Q)})});if(!W&&z){const Y=z.end();if(Y&&typeof Y.then=="function")return new Promise((K,Q)=>{Y.then(()=>{K(X)},ee=>{Q(ee)})})}return X}begin(V,D,O){if(!this._started)throw new Error("profiler is not started yet");if(O===void 0){const L=(0,_.now)();return this.flush(L),new B(V,D,L,z=>this.endSync(z))}{const L=O.beginTimer();return new B(V,D,0,async z=>this.end(z),L,O)}}async end(V){const D=await V.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new U(V.category,V.name,V.startTime,D)),this.flush(D))}endSync(V){const D=(0,_.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new U(V.category,V.name,V.startTime,D)),this.flush(D))}logOneEvent(V){_.Logger.verbose(`Profiler.${V.category}`,`${(V.endTime-V.startTime).toFixed(2)}ms on event '${V.name}' at ${V.endTime.toFixed(2)}`)}flush(V){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||V-this._flushTime>=this._flushIntervalInMilliseconds){for(const D=this._flushPointer;this._flushPointer<D+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_.now)()}}get started(){return this._started}},_.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Model=void 0;const C=E(5686),A=E(1446),R=E(7070),I=E(9395),F=E(2517);var B=I.onnxruntime.experimental.fbs;_.Model=class{constructor(){}load(U,V,D){if(!D)try{return void this.loadFromOnnxFormat(U,V)}catch(O){if(D!==void 0)throw O}this.loadFromOrtFormat(U,V)}loadFromOnnxFormat(U,V){const D=A.onnx.ModelProto.decode(U);if(F.LongUtil.longToNumber(D.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=D.opsetImport.map(O=>({domain:O.domain,version:F.LongUtil.longToNumber(O.version)})),this._graph=R.Graph.from(D.graph,V)}loadFromOrtFormat(U,V){const D=new C.flatbuffers.ByteBuffer(U),O=B.InferenceSession.getRootAsInferenceSession(D).model();if(F.LongUtil.longToNumber(O.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let L=0;L<O.opsetImportLength();L++){const z=O.opsetImport(L);this._opsets.push({domain:z==null?void 0:z.domain(),version:F.LongUtil.longToNumber(z.version())})}this._graph=R.Graph.from(O.graph(),V)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(T,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FLOAT_TYPES=_.INT_TYPES=_.NUMBER_TYPES=void 0,_.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_.FLOAT_TYPES=["float32","float64"]},1047:(T,_)=>{function E(C,A){if(A.endsWith("+")){const R=Number.parseInt(A.substring(0,A.length-1),10);return!isNaN(R)&&R<=C}if(A.split("-").length===2){const R=A.split("-"),I=Number.parseInt(R[0],10),F=Number.parseInt(R[1],10);return!isNaN(I)&&!isNaN(F)&&I<=C&&C<=F}return Number.parseInt(A,10)===C}Object.defineProperty(_,"__esModule",{value:!0}),_.resolveOperator=void 0,_.resolveOperator=function(C,A,R){for(const I of R){const F=I[0],B=I[1],U=I[2],V=I[3],D=I[4];if(C.opType===F){for(const O of A)if((O.domain===B||O.domain==="ai.onnx"&&B==="")&&E(O.version,U))return{opImpl:V,opInit:D}}}throw new TypeError(`cannot resolve operator '${C.opType}' with opsets: ${A.map(I=>`${I.domain||"ai.onnx"} v${I.version}`).join(", ")}`)}},9395:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.onnxruntime=void 0;const C=E(5686);var A,R;A=_.onnxruntime||(_.onnxruntime={}),function(I){(function(F){F[F.UNDEFINED=0]="UNDEFINED",F[F.FLOAT=1]="FLOAT",F[F.INT=2]="INT",F[F.STRING=3]="STRING",F[F.TENSOR=4]="TENSOR",F[F.GRAPH=5]="GRAPH",F[F.FLOATS=6]="FLOATS",F[F.INTS=7]="INTS",F[F.STRINGS=8]="STRINGS",F[F.TENSORS=9]="TENSORS",F[F.GRAPHS=10]="GRAPHS",F[F.SPARSE_TENSOR=11]="SPARSE_TENSOR",F[F.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(I.AttributeType||(I.AttributeType={}))}((R=A.experimental||(A.experimental={})).fbs||(R.fbs={})),function(I){(function(F){(function(B){(function(U){U[U.UNKNOWN=0]="UNKNOWN",U[U.VALUE=1]="VALUE",U[U.PARAM=2]="PARAM"})(B.DimensionValueType||(B.DimensionValueType={}))})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){(function(U){U[U.UNDEFINED=0]="UNDEFINED",U[U.FLOAT=1]="FLOAT",U[U.UINT8=2]="UINT8",U[U.INT8=3]="INT8",U[U.UINT16=4]="UINT16",U[U.INT16=5]="INT16",U[U.INT32=6]="INT32",U[U.INT64=7]="INT64",U[U.STRING=8]="STRING",U[U.BOOL=9]="BOOL",U[U.FLOAT16=10]="FLOAT16",U[U.DOUBLE=11]="DOUBLE",U[U.UINT32=12]="UINT32",U[U.UINT64=13]="UINT64",U[U.COMPLEX64=14]="COMPLEX64",U[U.COMPLEX128=15]="COMPLEX128",U[U.BFLOAT16=16]="BFLOAT16"})(B.TensorDataType||(B.TensorDataType={}))})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){(function(U){U[U.Primitive=0]="Primitive",U[U.Fused=1]="Fused"})(B.NodeType||(B.NodeType={}))})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){(function(U){U[U.NONE=0]="NONE",U[U.tensor_type=1]="tensor_type",U[U.sequence_type=2]="sequence_type",U[U.map_type=3]="map_type"})(B.TypeInfoValue||(B.TypeInfoValue={}))})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsShape(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsShape(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}dim(D,O){let L=this.bb.__offset(this.bb_pos,4);return L?(O||new I.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}dimLength(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.__vector_len(this.bb_pos+D):0}static startShape(D){D.startObject(1)}static addDim(D,O){D.addFieldOffset(0,O,0)}static createDimVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startDimVector(D,O){D.startVector(4,O,4)}static endShape(D){return D.endObject()}static createShape(D,O){return U.startShape(D),U.addDim(D,O),U.endShape(D)}}B.Shape=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsDimension(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsDimension(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}value(D){let O=this.bb.__offset(this.bb_pos,4);return O?(D||new I.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}denotation(D){let O=this.bb.__offset(this.bb_pos,6);return O?this.bb.__string(this.bb_pos+O,D):null}static startDimension(D){D.startObject(2)}static addValue(D,O){D.addFieldOffset(0,O,0)}static addDenotation(D,O){D.addFieldOffset(1,O,0)}static endDimension(D){return D.endObject()}static createDimension(D,O,L){return U.startDimension(D),U.addValue(D,O),U.addDenotation(D,L),U.endDimension(D)}}B.Dimension=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsDimensionValue(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsDimensionValue(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}dimType(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.readInt8(this.bb_pos+D):I.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.readInt64(this.bb_pos+D):this.bb.createLong(0,0)}dimParam(D){let O=this.bb.__offset(this.bb_pos,8);return O?this.bb.__string(this.bb_pos+O,D):null}static startDimensionValue(D){D.startObject(3)}static addDimType(D,O){D.addFieldInt8(0,O,I.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(D,O){D.addFieldInt64(1,O,D.createLong(0,0))}static addDimParam(D,O){D.addFieldOffset(2,O,0)}static endDimensionValue(D){return D.endObject()}static createDimensionValue(D,O,L,z){return U.startDimensionValue(D),U.addDimType(D,O),U.addDimValue(D,L),U.addDimParam(D,z),U.endDimensionValue(D)}}B.DimensionValue=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsTensorTypeAndShape(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsTensorTypeAndShape(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}elemType(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.readInt32(this.bb_pos+D):I.experimental.fbs.TensorDataType.UNDEFINED}shape(D){let O=this.bb.__offset(this.bb_pos,6);return O?(D||new I.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}static startTensorTypeAndShape(D){D.startObject(2)}static addElemType(D,O){D.addFieldInt32(0,O,I.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(D,O){D.addFieldOffset(1,O,0)}static endTensorTypeAndShape(D){return D.endObject()}static createTensorTypeAndShape(D,O,L){return U.startTensorTypeAndShape(D),U.addElemType(D,O),U.addShape(D,L),U.endTensorTypeAndShape(D)}}B.TensorTypeAndShape=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsMapType(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsMapType(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}keyType(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.readInt32(this.bb_pos+D):I.experimental.fbs.TensorDataType.UNDEFINED}valueType(D){let O=this.bb.__offset(this.bb_pos,6);return O?(D||new I.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}static startMapType(D){D.startObject(2)}static addKeyType(D,O){D.addFieldInt32(0,O,I.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(D,O){D.addFieldOffset(1,O,0)}static endMapType(D){return D.endObject()}static createMapType(D,O,L){return U.startMapType(D),U.addKeyType(D,O),U.addValueType(D,L),U.endMapType(D)}}B.MapType=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsSequenceType(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsSequenceType(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}elemType(D){let O=this.bb.__offset(this.bb_pos,4);return O?(D||new I.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}static startSequenceType(D){D.startObject(1)}static addElemType(D,O){D.addFieldOffset(0,O,0)}static endSequenceType(D){return D.endObject()}static createSequenceType(D,O){return U.startSequenceType(D),U.addElemType(D,O),U.endSequenceType(D)}}B.SequenceType=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(F.fbs||(F.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(B,U){return this.bb_pos=B,this.bb=U,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(B,U,V,D){return B.prep(4,12),B.writeInt32(D),B.writeInt32(V),B.writeInt32(U),B.offset()}}})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsNodeEdge(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsNodeEdge(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}nodeIndex(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.readUint32(this.bb_pos+D):0}inputEdges(D,O){let L=this.bb.__offset(this.bb_pos,6);return L?(O||new I.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+L)+12*D,this.bb):null}inputEdgesLength(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.__vector_len(this.bb_pos+D):0}outputEdges(D,O){let L=this.bb.__offset(this.bb_pos,8);return L?(O||new I.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+L)+12*D,this.bb):null}outputEdgesLength(){let D=this.bb.__offset(this.bb_pos,8);return D?this.bb.__vector_len(this.bb_pos+D):0}static startNodeEdge(D){D.startObject(3)}static addNodeIndex(D,O){D.addFieldInt32(0,O,0)}static addInputEdges(D,O){D.addFieldOffset(1,O,0)}static startInputEdgesVector(D,O){D.startVector(12,O,4)}static addOutputEdges(D,O){D.addFieldOffset(2,O,0)}static startOutputEdgesVector(D,O){D.startVector(12,O,4)}static endNodeEdge(D){return D.endObject()}static createNodeEdge(D,O,L,z){return U.startNodeEdge(D),U.addNodeIndex(D,O),U.addInputEdges(D,L),U.addOutputEdges(D,z),U.endNodeEdge(D)}}B.NodeEdge=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsNode(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsNode(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}name(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}docString(D){let O=this.bb.__offset(this.bb_pos,6);return O?this.bb.__string(this.bb_pos+O,D):null}domain(D){let O=this.bb.__offset(this.bb_pos,8);return O?this.bb.__string(this.bb_pos+O,D):null}sinceVersion(){let D=this.bb.__offset(this.bb_pos,10);return D?this.bb.readInt32(this.bb_pos+D):0}index(){let D=this.bb.__offset(this.bb_pos,12);return D?this.bb.readUint32(this.bb_pos+D):0}opType(D){let O=this.bb.__offset(this.bb_pos,14);return O?this.bb.__string(this.bb_pos+O,D):null}type(){let D=this.bb.__offset(this.bb_pos,16);return D?this.bb.readInt32(this.bb_pos+D):I.experimental.fbs.NodeType.Primitive}executionProviderType(D){let O=this.bb.__offset(this.bb_pos,18);return O?this.bb.__string(this.bb_pos+O,D):null}inputs(D,O){let L=this.bb.__offset(this.bb_pos,20);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}inputsLength(){let D=this.bb.__offset(this.bb_pos,20);return D?this.bb.__vector_len(this.bb_pos+D):0}outputs(D,O){let L=this.bb.__offset(this.bb_pos,22);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}outputsLength(){let D=this.bb.__offset(this.bb_pos,22);return D?this.bb.__vector_len(this.bb_pos+D):0}attributes(D,O){let L=this.bb.__offset(this.bb_pos,24);return L?(O||new I.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}attributesLength(){let D=this.bb.__offset(this.bb_pos,24);return D?this.bb.__vector_len(this.bb_pos+D):0}inputArgCounts(D){let O=this.bb.__offset(this.bb_pos,26);return O?this.bb.readInt32(this.bb.__vector(this.bb_pos+O)+4*D):0}inputArgCountsLength(){let D=this.bb.__offset(this.bb_pos,26);return D?this.bb.__vector_len(this.bb_pos+D):0}inputArgCountsArray(){let D=this.bb.__offset(this.bb_pos,26);return D?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+D),this.bb.__vector_len(this.bb_pos+D)):null}implicitInputs(D,O){let L=this.bb.__offset(this.bb_pos,28);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}implicitInputsLength(){let D=this.bb.__offset(this.bb_pos,28);return D?this.bb.__vector_len(this.bb_pos+D):0}static startNode(D){D.startObject(13)}static addName(D,O){D.addFieldOffset(0,O,0)}static addDocString(D,O){D.addFieldOffset(1,O,0)}static addDomain(D,O){D.addFieldOffset(2,O,0)}static addSinceVersion(D,O){D.addFieldInt32(3,O,0)}static addIndex(D,O){D.addFieldInt32(4,O,0)}static addOpType(D,O){D.addFieldOffset(5,O,0)}static addType(D,O){D.addFieldInt32(6,O,I.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(D,O){D.addFieldOffset(7,O,0)}static addInputs(D,O){D.addFieldOffset(8,O,0)}static createInputsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startInputsVector(D,O){D.startVector(4,O,4)}static addOutputs(D,O){D.addFieldOffset(9,O,0)}static createOutputsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startOutputsVector(D,O){D.startVector(4,O,4)}static addAttributes(D,O){D.addFieldOffset(10,O,0)}static createAttributesVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startAttributesVector(D,O){D.startVector(4,O,4)}static addInputArgCounts(D,O){D.addFieldOffset(11,O,0)}static createInputArgCountsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addInt32(O[L]);return D.endVector()}static startInputArgCountsVector(D,O){D.startVector(4,O,4)}static addImplicitInputs(D,O){D.addFieldOffset(12,O,0)}static createImplicitInputsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startImplicitInputsVector(D,O){D.startVector(4,O,4)}static endNode(D){return D.endObject()}static createNode(D,O,L,z,W,X,Y,K,Q,ee,J,ie,re,se){return U.startNode(D),U.addName(D,O),U.addDocString(D,L),U.addDomain(D,z),U.addSinceVersion(D,W),U.addIndex(D,X),U.addOpType(D,Y),U.addType(D,K),U.addExecutionProviderType(D,Q),U.addInputs(D,ee),U.addOutputs(D,J),U.addAttributes(D,ie),U.addInputArgCounts(D,re),U.addImplicitInputs(D,se),U.endNode(D)}}B.Node=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsValueInfo(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsValueInfo(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}name(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}docString(D){let O=this.bb.__offset(this.bb_pos,6);return O?this.bb.__string(this.bb_pos+O,D):null}type(D){let O=this.bb.__offset(this.bb_pos,8);return O?(D||new I.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}static startValueInfo(D){D.startObject(3)}static addName(D,O){D.addFieldOffset(0,O,0)}static addDocString(D,O){D.addFieldOffset(1,O,0)}static addType(D,O){D.addFieldOffset(2,O,0)}static endValueInfo(D){return D.endObject()}static createValueInfo(D,O,L,z){return U.startValueInfo(D),U.addName(D,O),U.addDocString(D,L),U.addType(D,z),U.endValueInfo(D)}}B.ValueInfo=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsTypeInfo(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsTypeInfo(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}denotation(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}valueType(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.readUint8(this.bb_pos+D):I.experimental.fbs.TypeInfoValue.NONE}value(D){let O=this.bb.__offset(this.bb_pos,8);return O?this.bb.__union(D,this.bb_pos+O):null}static startTypeInfo(D){D.startObject(3)}static addDenotation(D,O){D.addFieldOffset(0,O,0)}static addValueType(D,O){D.addFieldInt8(1,O,I.experimental.fbs.TypeInfoValue.NONE)}static addValue(D,O){D.addFieldOffset(2,O,0)}static endTypeInfo(D){return D.endObject()}static createTypeInfo(D,O,L,z){return U.startTypeInfo(D),U.addDenotation(D,O),U.addValueType(D,L),U.addValue(D,z),U.endTypeInfo(D)}}B.TypeInfo=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsOperatorSetId(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsOperatorSetId(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}domain(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}version(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.readInt64(this.bb_pos+D):this.bb.createLong(0,0)}static startOperatorSetId(D){D.startObject(2)}static addDomain(D,O){D.addFieldOffset(0,O,0)}static addVersion(D,O){D.addFieldInt64(1,O,D.createLong(0,0))}static endOperatorSetId(D){return D.endObject()}static createOperatorSetId(D,O,L){return U.startOperatorSetId(D),U.addDomain(D,O),U.addVersion(D,L),U.endOperatorSetId(D)}}B.OperatorSetId=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsTensor(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsTensor(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}name(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}docString(D){let O=this.bb.__offset(this.bb_pos,6);return O?this.bb.__string(this.bb_pos+O,D):null}dims(D){let O=this.bb.__offset(this.bb_pos,8);return O?this.bb.readInt64(this.bb.__vector(this.bb_pos+O)+8*D):this.bb.createLong(0,0)}dimsLength(){let D=this.bb.__offset(this.bb_pos,8);return D?this.bb.__vector_len(this.bb_pos+D):0}dataType(){let D=this.bb.__offset(this.bb_pos,10);return D?this.bb.readInt32(this.bb_pos+D):I.experimental.fbs.TensorDataType.UNDEFINED}rawData(D){let O=this.bb.__offset(this.bb_pos,12);return O?this.bb.readUint8(this.bb.__vector(this.bb_pos+O)+D):0}rawDataLength(){let D=this.bb.__offset(this.bb_pos,12);return D?this.bb.__vector_len(this.bb_pos+D):0}rawDataArray(){let D=this.bb.__offset(this.bb_pos,12);return D?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+D),this.bb.__vector_len(this.bb_pos+D)):null}stringData(D,O){let L=this.bb.__offset(this.bb_pos,14);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}stringDataLength(){let D=this.bb.__offset(this.bb_pos,14);return D?this.bb.__vector_len(this.bb_pos+D):0}static startTensor(D){D.startObject(6)}static addName(D,O){D.addFieldOffset(0,O,0)}static addDocString(D,O){D.addFieldOffset(1,O,0)}static addDims(D,O){D.addFieldOffset(2,O,0)}static createDimsVector(D,O){D.startVector(8,O.length,8);for(let L=O.length-1;L>=0;L--)D.addInt64(O[L]);return D.endVector()}static startDimsVector(D,O){D.startVector(8,O,8)}static addDataType(D,O){D.addFieldInt32(3,O,I.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(D,O){D.addFieldOffset(4,O,0)}static createRawDataVector(D,O){D.startVector(1,O.length,1);for(let L=O.length-1;L>=0;L--)D.addInt8(O[L]);return D.endVector()}static startRawDataVector(D,O){D.startVector(1,O,1)}static addStringData(D,O){D.addFieldOffset(5,O,0)}static createStringDataVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startStringDataVector(D,O){D.startVector(4,O,4)}static endTensor(D){return D.endObject()}static createTensor(D,O,L,z,W,X,Y){return U.startTensor(D),U.addName(D,O),U.addDocString(D,L),U.addDims(D,z),U.addDataType(D,W),U.addRawData(D,X),U.addStringData(D,Y),U.endTensor(D)}}B.Tensor=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsSparseTensor(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsSparseTensor(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}values(D){let O=this.bb.__offset(this.bb_pos,4);return O?(D||new I.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}indices(D){let O=this.bb.__offset(this.bb_pos,6);return O?(D||new I.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}dims(D){let O=this.bb.__offset(this.bb_pos,8);return O?this.bb.readInt64(this.bb.__vector(this.bb_pos+O)+8*D):this.bb.createLong(0,0)}dimsLength(){let D=this.bb.__offset(this.bb_pos,8);return D?this.bb.__vector_len(this.bb_pos+D):0}static startSparseTensor(D){D.startObject(3)}static addValues(D,O){D.addFieldOffset(0,O,0)}static addIndices(D,O){D.addFieldOffset(1,O,0)}static addDims(D,O){D.addFieldOffset(2,O,0)}static createDimsVector(D,O){D.startVector(8,O.length,8);for(let L=O.length-1;L>=0;L--)D.addInt64(O[L]);return D.endVector()}static startDimsVector(D,O){D.startVector(8,O,8)}static endSparseTensor(D){return D.endObject()}static createSparseTensor(D,O,L,z){return U.startSparseTensor(D),U.addValues(D,O),U.addIndices(D,L),U.addDims(D,z),U.endSparseTensor(D)}}B.SparseTensor=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsAttribute(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsAttribute(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}name(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}docString(D){let O=this.bb.__offset(this.bb_pos,6);return O?this.bb.__string(this.bb_pos+O,D):null}type(){let D=this.bb.__offset(this.bb_pos,8);return D?this.bb.readInt32(this.bb_pos+D):I.experimental.fbs.AttributeType.UNDEFINED}f(){let D=this.bb.__offset(this.bb_pos,10);return D?this.bb.readFloat32(this.bb_pos+D):0}i(){let D=this.bb.__offset(this.bb_pos,12);return D?this.bb.readInt64(this.bb_pos+D):this.bb.createLong(0,0)}s(D){let O=this.bb.__offset(this.bb_pos,14);return O?this.bb.__string(this.bb_pos+O,D):null}t(D){let O=this.bb.__offset(this.bb_pos,16);return O?(D||new I.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}g(D){let O=this.bb.__offset(this.bb_pos,18);return O?(D||new I.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}floats(D){let O=this.bb.__offset(this.bb_pos,20);return O?this.bb.readFloat32(this.bb.__vector(this.bb_pos+O)+4*D):0}floatsLength(){let D=this.bb.__offset(this.bb_pos,20);return D?this.bb.__vector_len(this.bb_pos+D):0}floatsArray(){let D=this.bb.__offset(this.bb_pos,20);return D?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+D),this.bb.__vector_len(this.bb_pos+D)):null}ints(D){let O=this.bb.__offset(this.bb_pos,22);return O?this.bb.readInt64(this.bb.__vector(this.bb_pos+O)+8*D):this.bb.createLong(0,0)}intsLength(){let D=this.bb.__offset(this.bb_pos,22);return D?this.bb.__vector_len(this.bb_pos+D):0}strings(D,O){let L=this.bb.__offset(this.bb_pos,24);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}stringsLength(){let D=this.bb.__offset(this.bb_pos,24);return D?this.bb.__vector_len(this.bb_pos+D):0}tensors(D,O){let L=this.bb.__offset(this.bb_pos,26);return L?(O||new I.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}tensorsLength(){let D=this.bb.__offset(this.bb_pos,26);return D?this.bb.__vector_len(this.bb_pos+D):0}graphs(D,O){let L=this.bb.__offset(this.bb_pos,28);return L?(O||new I.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}graphsLength(){let D=this.bb.__offset(this.bb_pos,28);return D?this.bb.__vector_len(this.bb_pos+D):0}static startAttribute(D){D.startObject(13)}static addName(D,O){D.addFieldOffset(0,O,0)}static addDocString(D,O){D.addFieldOffset(1,O,0)}static addType(D,O){D.addFieldInt32(2,O,I.experimental.fbs.AttributeType.UNDEFINED)}static addF(D,O){D.addFieldFloat32(3,O,0)}static addI(D,O){D.addFieldInt64(4,O,D.createLong(0,0))}static addS(D,O){D.addFieldOffset(5,O,0)}static addT(D,O){D.addFieldOffset(6,O,0)}static addG(D,O){D.addFieldOffset(7,O,0)}static addFloats(D,O){D.addFieldOffset(8,O,0)}static createFloatsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addFloat32(O[L]);return D.endVector()}static startFloatsVector(D,O){D.startVector(4,O,4)}static addInts(D,O){D.addFieldOffset(9,O,0)}static createIntsVector(D,O){D.startVector(8,O.length,8);for(let L=O.length-1;L>=0;L--)D.addInt64(O[L]);return D.endVector()}static startIntsVector(D,O){D.startVector(8,O,8)}static addStrings(D,O){D.addFieldOffset(10,O,0)}static createStringsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startStringsVector(D,O){D.startVector(4,O,4)}static addTensors(D,O){D.addFieldOffset(11,O,0)}static createTensorsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startTensorsVector(D,O){D.startVector(4,O,4)}static addGraphs(D,O){D.addFieldOffset(12,O,0)}static createGraphsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startGraphsVector(D,O){D.startVector(4,O,4)}static endAttribute(D){return D.endObject()}static createAttribute(D,O,L,z,W,X,Y,K,Q,ee,J,ie,re,se){return U.startAttribute(D),U.addName(D,O),U.addDocString(D,L),U.addType(D,z),U.addF(D,W),U.addI(D,X),U.addS(D,Y),U.addT(D,K),U.addG(D,Q),U.addFloats(D,ee),U.addInts(D,J),U.addStrings(D,ie),U.addTensors(D,re),U.addGraphs(D,se),U.endAttribute(D)}}B.Attribute=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsGraph(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsGraph(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}initializers(D,O){let L=this.bb.__offset(this.bb_pos,4);return L?(O||new I.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}initializersLength(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.__vector_len(this.bb_pos+D):0}nodeArgs(D,O){let L=this.bb.__offset(this.bb_pos,6);return L?(O||new I.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}nodeArgsLength(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.__vector_len(this.bb_pos+D):0}nodes(D,O){let L=this.bb.__offset(this.bb_pos,8);return L?(O||new I.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}nodesLength(){let D=this.bb.__offset(this.bb_pos,8);return D?this.bb.__vector_len(this.bb_pos+D):0}maxNodeIndex(){let D=this.bb.__offset(this.bb_pos,10);return D?this.bb.readUint32(this.bb_pos+D):0}nodeEdges(D,O){let L=this.bb.__offset(this.bb_pos,12);return L?(O||new I.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}nodeEdgesLength(){let D=this.bb.__offset(this.bb_pos,12);return D?this.bb.__vector_len(this.bb_pos+D):0}inputs(D,O){let L=this.bb.__offset(this.bb_pos,14);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}inputsLength(){let D=this.bb.__offset(this.bb_pos,14);return D?this.bb.__vector_len(this.bb_pos+D):0}outputs(D,O){let L=this.bb.__offset(this.bb_pos,16);return L?this.bb.__string(this.bb.__vector(this.bb_pos+L)+4*D,O):null}outputsLength(){let D=this.bb.__offset(this.bb_pos,16);return D?this.bb.__vector_len(this.bb_pos+D):0}sparseInitializers(D,O){let L=this.bb.__offset(this.bb_pos,18);return L?(O||new I.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}sparseInitializersLength(){let D=this.bb.__offset(this.bb_pos,18);return D?this.bb.__vector_len(this.bb_pos+D):0}static startGraph(D){D.startObject(8)}static addInitializers(D,O){D.addFieldOffset(0,O,0)}static createInitializersVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startInitializersVector(D,O){D.startVector(4,O,4)}static addNodeArgs(D,O){D.addFieldOffset(1,O,0)}static createNodeArgsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startNodeArgsVector(D,O){D.startVector(4,O,4)}static addNodes(D,O){D.addFieldOffset(2,O,0)}static createNodesVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startNodesVector(D,O){D.startVector(4,O,4)}static addMaxNodeIndex(D,O){D.addFieldInt32(3,O,0)}static addNodeEdges(D,O){D.addFieldOffset(4,O,0)}static createNodeEdgesVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startNodeEdgesVector(D,O){D.startVector(4,O,4)}static addInputs(D,O){D.addFieldOffset(5,O,0)}static createInputsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startInputsVector(D,O){D.startVector(4,O,4)}static addOutputs(D,O){D.addFieldOffset(6,O,0)}static createOutputsVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startOutputsVector(D,O){D.startVector(4,O,4)}static addSparseInitializers(D,O){D.addFieldOffset(7,O,0)}static createSparseInitializersVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startSparseInitializersVector(D,O){D.startVector(4,O,4)}static endGraph(D){return D.endObject()}static createGraph(D,O,L,z,W,X,Y,K,Q){return U.startGraph(D),U.addInitializers(D,O),U.addNodeArgs(D,L),U.addNodes(D,z),U.addMaxNodeIndex(D,W),U.addNodeEdges(D,X),U.addInputs(D,Y),U.addOutputs(D,K),U.addSparseInitializers(D,Q),U.endGraph(D)}}B.Graph=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsModel(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsModel(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}irVersion(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.readInt64(this.bb_pos+D):this.bb.createLong(0,0)}opsetImport(D,O){let L=this.bb.__offset(this.bb_pos,6);return L?(O||new I.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}opsetImportLength(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.__vector_len(this.bb_pos+D):0}producerName(D){let O=this.bb.__offset(this.bb_pos,8);return O?this.bb.__string(this.bb_pos+O,D):null}producerVersion(D){let O=this.bb.__offset(this.bb_pos,10);return O?this.bb.__string(this.bb_pos+O,D):null}domain(D){let O=this.bb.__offset(this.bb_pos,12);return O?this.bb.__string(this.bb_pos+O,D):null}modelVersion(){let D=this.bb.__offset(this.bb_pos,14);return D?this.bb.readInt64(this.bb_pos+D):this.bb.createLong(0,0)}docString(D){let O=this.bb.__offset(this.bb_pos,16);return O?this.bb.__string(this.bb_pos+O,D):null}graph(D){let O=this.bb.__offset(this.bb_pos,18);return O?(D||new I.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}graphDocString(D){let O=this.bb.__offset(this.bb_pos,20);return O?this.bb.__string(this.bb_pos+O,D):null}static startModel(D){D.startObject(9)}static addIrVersion(D,O){D.addFieldInt64(0,O,D.createLong(0,0))}static addOpsetImport(D,O){D.addFieldOffset(1,O,0)}static createOpsetImportVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startOpsetImportVector(D,O){D.startVector(4,O,4)}static addProducerName(D,O){D.addFieldOffset(2,O,0)}static addProducerVersion(D,O){D.addFieldOffset(3,O,0)}static addDomain(D,O){D.addFieldOffset(4,O,0)}static addModelVersion(D,O){D.addFieldInt64(5,O,D.createLong(0,0))}static addDocString(D,O){D.addFieldOffset(6,O,0)}static addGraph(D,O){D.addFieldOffset(7,O,0)}static addGraphDocString(D,O){D.addFieldOffset(8,O,0)}static endModel(D){return D.endObject()}static createModel(D,O,L,z,W,X,Y,K,Q,ee){return U.startModel(D),U.addIrVersion(D,O),U.addOpsetImport(D,L),U.addProducerName(D,z),U.addProducerVersion(D,W),U.addDomain(D,X),U.addModelVersion(D,Y),U.addDocString(D,K),U.addGraph(D,Q),U.addGraphDocString(D,ee),U.endModel(D)}}B.Model=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsKernelCreateInfos(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsKernelCreateInfos(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}nodeIndices(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.readUint32(this.bb.__vector(this.bb_pos+O)+4*D):0}nodeIndicesLength(){let D=this.bb.__offset(this.bb_pos,4);return D?this.bb.__vector_len(this.bb_pos+D):0}nodeIndicesArray(){let D=this.bb.__offset(this.bb_pos,4);return D?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+D),this.bb.__vector_len(this.bb_pos+D)):null}kernelDefHashes(D){let O=this.bb.__offset(this.bb_pos,6);return O?this.bb.readUint64(this.bb.__vector(this.bb_pos+O)+8*D):this.bb.createLong(0,0)}kernelDefHashesLength(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.__vector_len(this.bb_pos+D):0}static startKernelCreateInfos(D){D.startObject(2)}static addNodeIndices(D,O){D.addFieldOffset(0,O,0)}static createNodeIndicesVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addInt32(O[L]);return D.endVector()}static startNodeIndicesVector(D,O){D.startVector(4,O,4)}static addKernelDefHashes(D,O){D.addFieldOffset(1,O,0)}static createKernelDefHashesVector(D,O){D.startVector(8,O.length,8);for(let L=O.length-1;L>=0;L--)D.addInt64(O[L]);return D.endVector()}static startKernelDefHashesVector(D,O){D.startVector(8,O,8)}static endKernelCreateInfos(D){return D.endObject()}static createKernelCreateInfos(D,O,L){return U.startKernelCreateInfos(D),U.addNodeIndices(D,O),U.addKernelDefHashes(D,L),U.endKernelCreateInfos(D)}}B.KernelCreateInfos=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsSubGraphSessionState(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsSubGraphSessionState(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}graphId(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}sessionState(D){let O=this.bb.__offset(this.bb_pos,6);return O?(D||new I.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}static startSubGraphSessionState(D){D.startObject(2)}static addGraphId(D,O){D.addFieldOffset(0,O,0)}static addSessionState(D,O){D.addFieldOffset(1,O,0)}static endSubGraphSessionState(D){let O=D.endObject();return D.requiredField(O,4),O}static createSubGraphSessionState(D,O,L){return U.startSubGraphSessionState(D),U.addGraphId(D,O),U.addSessionState(D,L),U.endSubGraphSessionState(D)}}B.SubGraphSessionState=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsSessionState(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsSessionState(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}kernels(D){let O=this.bb.__offset(this.bb_pos,4);return O?(D||new I.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}subGraphSessionStates(D,O){let L=this.bb.__offset(this.bb_pos,6);return L?(O||new I.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+L)+4*D),this.bb):null}subGraphSessionStatesLength(){let D=this.bb.__offset(this.bb_pos,6);return D?this.bb.__vector_len(this.bb_pos+D):0}static startSessionState(D){D.startObject(2)}static addKernels(D,O){D.addFieldOffset(0,O,0)}static addSubGraphSessionStates(D,O){D.addFieldOffset(1,O,0)}static createSubGraphSessionStatesVector(D,O){D.startVector(4,O.length,4);for(let L=O.length-1;L>=0;L--)D.addOffset(O[L]);return D.endVector()}static startSubGraphSessionStatesVector(D,O){D.startVector(4,O,4)}static endSessionState(D){return D.endObject()}static createSessionState(D,O,L){return U.startSessionState(D),U.addKernels(D,O),U.addSubGraphSessionStates(D,L),U.endSessionState(D)}}B.SessionState=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(I){(function(F){(function(B){class U{constructor(){this.bb=null,this.bb_pos=0}__init(D,O){return this.bb_pos=D,this.bb=O,this}static getRootAsInferenceSession(D,O){return(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static getSizePrefixedRootAsInferenceSession(D,O){return D.setPosition(D.position()+C.flatbuffers.SIZE_PREFIX_LENGTH),(O||new U).__init(D.readInt32(D.position())+D.position(),D)}static bufferHasIdentifier(D){return D.__has_identifier("ORTM")}ortVersion(D){let O=this.bb.__offset(this.bb_pos,4);return O?this.bb.__string(this.bb_pos+O,D):null}model(D){let O=this.bb.__offset(this.bb_pos,6);return O?(D||new I.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}sessionState(D){let O=this.bb.__offset(this.bb_pos,8);return O?(D||new I.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+O),this.bb):null}static startInferenceSession(D){D.startObject(3)}static addOrtVersion(D,O){D.addFieldOffset(0,O,0)}static addModel(D,O){D.addFieldOffset(1,O,0)}static addSessionState(D,O){D.addFieldOffset(2,O,0)}static endInferenceSession(D){return D.endObject()}static finishInferenceSessionBuffer(D,O){D.finish(O,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(D,O){D.finish(O,"ORTM",!0)}static createInferenceSession(D,O,L,z){return U.startInferenceSession(D),U.addOrtVersion(D,O),U.addModel(D,L),U.addSessionState(D,z),U.endInferenceSession(D)}}B.InferenceSession=U})(F.fbs||(F.fbs={}))})(I.experimental||(I.experimental={}))}(_.onnxruntime||(_.onnxruntime={}))},7448:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxjsSessionHandler=void 0;const C=E(1670),A=E(9162);_.OnnxjsSessionHandler=class{constructor(R){this.session=R,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(R,I,F){const B=new Map;for(const D in R)if(Object.hasOwnProperty.call(R,D)){const O=R[D];B.set(D,new A.Tensor(O.dims,O.type,void 0,void 0,O.data))}const U=await this.session.run(B),V={};return U.forEach((D,O)=>{V[O]=new C.Tensor(D.type,D.data,D.dims)}),V}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Session=void 0;const C=E(7067),A=E(1296),R=E(7091),I=E(1036),F=E(6231),B=E(2644);_.Session=class{constructor(U={}){this._initialized=!1,this.backendHint=U.backendHint,this.profiler=F.Profiler.create(U.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(U,V,D){await this.profiler.event("session","Session.loadModel",async()=>{const O=await(0,R.resolveBackend)(this.backendHint);if(this.sessionHandler=O.createSessionHandler(this.context),this._model=new B.Model,typeof U=="string"){const L=U.endsWith(".ort");if(typeof fetch>"u"){const z=await(0,A.promisify)(C.readFile)(U);this.initialize(z,L)}else{const z=await fetch(U),W=await z.arrayBuffer();this.initialize(new Uint8Array(W),L)}}else if(ArrayBuffer.isView(U))this.initialize(U);else{const L=new Uint8Array(U,V||0,D||U.byteLength);this.initialize(L)}})}initialize(U,V){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const D=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(U,D,V),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new I.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(U){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const V=this.normalizeAndValidateInputs(U),D=await this._executionPlan.execute(this.sessionHandler,V);return this.createOutput(D)})}normalizeAndValidateInputs(U){const V=this._model.graph.getInputNames();if(Array.isArray(U)){if(U.length!==V.length)throw new Error(`incorrect input array length: expected ${V.length} but got ${U.length}`)}else{if(U.size!==V.length)throw new Error(`incorrect input map size: expected ${V.length} but got ${U.size}`);const D=new Array(U.size);let O=0;for(let L=0;L<V.length;++L){const z=U.get(V[L]);if(!z)throw new Error(`missing input tensor for: '${name}'`);D[O++]=z}U=D}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,U,!1);else{const D=this._model.graph.getInputIndices(),O=this._model.graph.getValues(),L=new Array(D.length);for(let z=0;z<D.length;++z){const W=O[D[z]];L[z]=W.type.shape.dims,this.context.graphInputTypes.push(W.type.tensorType),this.context.graphInputDims.push(U[z].dims)}this.validateInputTensorDims(L,U,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,U),U}validateInputTensorTypes(U,V){for(let D=0;D<V.length;D++){const O=U[D],L=V[D].type;if(O!==L)throw new Error(`input tensor[${D}] check failed: expected type '${O}' but got ${L}`)}}validateInputTensorDims(U,V,D){for(let O=0;O<V.length;O++){const L=U[O],z=V[O].dims;if(!this.compareTensorDims(L,z,D))throw new Error(`input tensor[${O}] check failed: expected shape '[${L.join(",")}]' but got [${z.join(",")}]`)}}compareTensorDims(U,V,D){if(U.length!==V.length)return!1;for(let O=0;O<U.length;++O)if(U[O]!==V[O]&&(!D||U[O]!==0))return!1;return!0}createOutput(U){const V=this._model.graph.getOutputNames();if(U.length!==V.length)throw new Error("expected number of outputs do not match number of generated outputs");const D=new Map;for(let O=0;O<V.length;++O)D.set(V[O],U[O]);return D}initializeOps(U){const V=U.getNodes();this._ops=new Array(V.length);for(let D=0;D<V.length;D++)this._ops[D]=this.sessionHandler.resolve(V[D],this._model.opsets,U)}}},9162:function(T,_,E){var C=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const A=E(3442),R=C(E(3720)),I=E(1446),F=E(9395),B=E(2517);var U=F.onnxruntime.experimental.fbs;class V{get data(){if(this.cache===void 0){const X=this.dataProvider(this.dataId);if(X.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=X}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(X){return this.data[B.ShapeUtil.indicesToOffset(X,this.strides)]}set(X,Y){this.data[B.ShapeUtil.indicesToOffset(X,this.strides)]=Y}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=B.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(X,Y,K,Q,ee,J=A.Guid.create()){this.dims=X,this.type=Y,this.dataProvider=K,this.asyncDataProvider=Q,this.cache=ee,this.dataId=J,this.size=B.ShapeUtil.validateDimsAndCalcSize(X);const ie=this.size,re=K===void 0&&Q===void 0&&ee===void 0;if(ee!==void 0&&ee.length!==ie)throw new RangeError("Input dims doesn't match data length.");if(Y==="string"){if(!(ee===void 0||Array.isArray(ee)&&ee.every(se=>typeof se=="string")))throw new TypeError("cache should be a string array");re&&(this.cache=new Array(ie))}else{if(ee!==void 0){const se=O(Y);if(!(ee instanceof se))throw new TypeError(`cache should be type ${se.name}`)}if(re){const se=new ArrayBuffer(ie*function(ne){switch(ne){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne}`)}}(Y));this.cache=function(ne,oe){return new(O(oe))(ne)}(se,Y)}}}static fromProto(X){if(!X)throw new Error("cannot construct Value from an empty tensor");const Y=B.ProtoUtil.tensorDataTypeFromProto(X.dataType),K=B.ProtoUtil.tensorDimsFromProto(X.dims),Q=new V(K,Y);if(Y==="string")X.stringData.forEach((ee,J)=>{Q.data[J]=(0,B.decodeUtf8String)(ee)});else if(X.rawData&&typeof X.rawData.byteLength=="number"&&X.rawData.byteLength>0){const ee=Q.data,J=new DataView(X.rawData.buffer,X.rawData.byteOffset,X.rawData.byteLength),ie=D(X.dataType),re=X.rawData.byteLength/ie;if(X.rawData.byteLength%ie!=0)throw new Error("invalid buffer length");if(ee.length!==re)throw new Error("buffer length mismatch");for(let se=0;se<re;se++){const ne=z(J,X.dataType,se*ie);ee[se]=ne}}else{let ee;switch(X.dataType){case I.onnx.TensorProto.DataType.FLOAT:ee=X.floatData;break;case I.onnx.TensorProto.DataType.INT32:case I.onnx.TensorProto.DataType.INT16:case I.onnx.TensorProto.DataType.UINT16:case I.onnx.TensorProto.DataType.INT8:case I.onnx.TensorProto.DataType.UINT8:case I.onnx.TensorProto.DataType.BOOL:ee=X.int32Data;break;case I.onnx.TensorProto.DataType.INT64:ee=X.int64Data;break;case I.onnx.TensorProto.DataType.DOUBLE:ee=X.doubleData;break;case I.onnx.TensorProto.DataType.UINT32:case I.onnx.TensorProto.DataType.UINT64:ee=X.uint64Data;break;default:throw new Error("unspecific error")}if(ee==null)throw new Error("failed to populate data from a tensorproto value");const J=Q.data;if(J.length!==ee.length)throw new Error("array length mismatch");for(let ie=0;ie<ee.length;ie++){const re=ee[ie];R.default.isLong(re)?J[ie]=L(re,X.dataType):J[ie]=re}}return Q}static fromData(X,Y,K){return new V(Y,K,void 0,void 0,X)}static fromOrtTensor(X){if(!X)throw new Error("cannot construct Value from an empty tensor");const Y=B.ProtoUtil.tensorDimsFromORTFormat(X),K=B.ProtoUtil.tensorDataTypeFromProto(X.dataType()),Q=new V(Y,K);if(K==="string")for(let ee=0;ee<X.stringDataLength();ee++)Q.data[ee]=X.stringData(ee);else if(X.rawDataArray()&&typeof X.rawDataLength()=="number"&&X.rawDataLength()>0){const ee=Q.data,J=new DataView(X.rawDataArray().buffer,X.rawDataArray().byteOffset,X.rawDataLength()),ie=D(X.dataType()),re=X.rawDataLength()/ie;if(X.rawDataLength()%ie!=0)throw new Error("invalid buffer length");if(ee.length!==re)throw new Error("buffer length mismatch");for(let se=0;se<re;se++){const ne=z(J,X.dataType(),se*ie);ee[se]=ne}}return Q}}function D(W){switch(W){case I.onnx.TensorProto.DataType.UINT8:case I.onnx.TensorProto.DataType.INT8:case I.onnx.TensorProto.DataType.BOOL:return 1;case I.onnx.TensorProto.DataType.UINT16:case I.onnx.TensorProto.DataType.INT16:return 2;case I.onnx.TensorProto.DataType.FLOAT:case I.onnx.TensorProto.DataType.INT32:case I.onnx.TensorProto.DataType.UINT32:return 4;case I.onnx.TensorProto.DataType.INT64:case I.onnx.TensorProto.DataType.DOUBLE:case I.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${I.onnx.TensorProto.DataType[W]}`)}}function O(W){switch(W){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function L(W,X){if(X===I.onnx.TensorProto.DataType.INT64||X===U.TensorDataType.INT64){if(W.greaterThanOrEqual(2147483648)||W.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(X!==I.onnx.TensorProto.DataType.UINT32&&X!==U.TensorDataType.UINT32&&X!==I.onnx.TensorProto.DataType.UINT64&&X!==U.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${I.onnx.TensorProto.DataType[X]}`);if(W.greaterThanOrEqual(4294967296)||W.lessThan(0))throw new TypeError("uint64 is not supported")}return W.toNumber()}function z(W,X,Y){switch(X){case I.onnx.TensorProto.DataType.BOOL:case I.onnx.TensorProto.DataType.UINT8:return W.getUint8(Y);case I.onnx.TensorProto.DataType.INT8:return W.getInt8(Y);case I.onnx.TensorProto.DataType.UINT16:return W.getUint16(Y,!0);case I.onnx.TensorProto.DataType.INT16:return W.getInt16(Y,!0);case I.onnx.TensorProto.DataType.FLOAT:return W.getFloat32(Y,!0);case I.onnx.TensorProto.DataType.INT32:return W.getInt32(Y,!0);case I.onnx.TensorProto.DataType.UINT32:return W.getUint32(Y,!0);case I.onnx.TensorProto.DataType.INT64:return L(R.default.fromBits(W.getUint32(Y,!0),W.getUint32(Y+4,!0),!1),X);case I.onnx.TensorProto.DataType.DOUBLE:return W.getFloat64(Y,!0);case I.onnx.TensorProto.DataType.UINT64:return L(R.default.fromBits(W.getUint32(Y,!0),W.getUint32(Y+4,!0),!0),X);default:throw new Error(`cannot read from DataView for type ${I.onnx.TensorProto.DataType[X]}`)}}_.Tensor=V},2517:function(T,_,E){var C=this&&this.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(_,"__esModule",{value:!0}),_.decodeUtf8String=_.MAX_CLIP=_.MIN_CLIP=_.PoolConvUtil=_.ReduceUtil=_.SplitUtil=_.MathUtil=_.ShapeUtil=_.LongUtil=_.ProtoUtil=_.GemmUtil=_.arrayCopyHelper=_.BroadcastUtil=_.MatMulUtil=_.ArrayUtil=_.assert=_.checkInputsShape=void 0;const A=E(5686),R=C(E(3720)),I=E(1446),F=E(9162);_.checkInputsShape=function(X,...Y){if(!X||X.length!==Y.length)return!1;for(let K=0;K<X.length;K++)if(!X[K].dims||X[K].dims.length!==Y[K])return!1;return!0},_.assert=function(X,Y){if(!X)throw new Error(typeof Y=="string"?Y:Y())},_.ArrayUtil=class{static arraysEqual(X,Y){if(X.length!==Y.length)return!1;for(let K=0;K<X.length;K++)if(X[K]!==Y[K])return!1;return!0}};class B{static preprocessInputShapes(Y,K){return[Y.length===1?[1,Y[0]]:Y,K.length===1?[K[0],1]:K]}static postprocessOutputShape(Y,K,Q){K===1&&Y.splice(Y.length-2,1),Q===1&&Y.pop()}static calcMatMulShape(Y,K){return Y[1]!==K[0]?void 0:[Y[0],K[1]]}}_.MatMulUtil=B;class U{static calcShape(Y,K,Q=!1){const ee=Y.length,J=K.length;if(ee===0)return K;if(J===0)return Y;const ie=Math.max(Y.length,K.length),re=new Array(ie);if(Q){if(ee<2||J<2)return;const se=B.calcMatMulShape([Y[ee-2],Y[ee-1]],[K[J-2],K[J-1]]);if(se===void 0)return;[re[ie-2],re[ie-1]]=se}for(let se=Q?3:1;se<=ie;se++){const ne=ee-se<0?1:Y[ee-se],oe=J-se<0?1:K[J-se];if(ne!==oe&&ne>1&&oe>1)return;re[ie-se]=Math.max(ne,oe)}return re}static index(Y,K){const Q=new Array(K.length);return U.fillIndex(Y,K,Q),Q}static fillIndex(Y,K,Q){const ee=Y.length-K.length;for(let J=0;J<K.length;J++)Q[J]=Y[ee+J]%K[J]}static calc(Y,K,Q,ee,J){const ie=U.calcShape(Y.dims,K.dims);if(ie){if(ee&&!O.areEqual(ie,Y.dims))return;const re=O.size(ie),se=ee?Y:new F.Tensor(ie,J||Y.type);if(ie.length===0)se.set([],Q(Y.get([]),K.get([])));else{const ne=new Array(ie.length),oe=new Array(Y.dims.length),fe=new Array(K.dims.length);let he,ge=0,ye=0,we=!1,le=!1;Y.dims.length===0&&(ge=Y.get([]),we=!0),K.dims.length===0&&(ye=K.get([]),le=!0);for(let de=0;de<re;de++){he=de;for(let ce=ie.length-1;ce>=0;ce--)ne[ce]=he%ie[ce],he=Math.floor(he/ie[ce]);we||(U.fillIndex(ne,Y.dims,oe),ge=Y.get(oe)),le||(U.fillIndex(ne,K.dims,fe),ye=K.get(fe)),se.set(ne,Q(ge,ye))}}return se}}static isValidBroadcast(Y,K){const Q=Y.length,ee=K.length;if(Q>ee)return!1;for(let J=1;J<=Q;J++)if(Y[Q-J]!==1&&Y[Q-J]!==K[ee-J])return!1;return!0}static getBroadcastDims(Y,K){const Q=Y.length,ee=[];for(let J=0;J<Q;J++){const ie=Q-1-J,re=Y[ie]||1;(K[K.length-1-J]||1)>1&&re===1&&ee.unshift(ie)}return ee}}_.BroadcastUtil=U,_.arrayCopyHelper=function(X,Y,K,Q,ee){if(Q<0||Q>=Y.length)throw new Error("sourceIndex out of bounds");if(K<0||K>=X.length)throw new Error("targetIndex out of bounds");if(Q+ee>Y.length)throw new Error("source indices to be copied are outside bounds");if(K+ee>X.length)throw new Error("target array is too small to hold result");for(let J=0;J<ee;J++)X[K+J]=Y[Q+J]},_.GemmUtil=class{static getShapeOfGemmResult(X,Y,K,Q,ee){if(X.length!==2||K.length!==2)throw new Error("shape need to be of size 2");let J,ie,re;Y?(J=X[1],ie=X[0]):(J=X[0],ie=X[1]);let se=-1;if(Q?(re=K[0],se=1):(re=K[1],se=0),K[se]!==ie)throw new Error("dimension mismatch");if(J<=0||re<=0||ie<=0)throw new Error("invalid shape specified");if(ee&&!U.isValidBroadcast(ee,[J,re]))throw new Error("gemm: invalid bias shape for broadcast");return[J,re,ie]}};class V{static tensorDataTypeFromProto(Y){switch(Y){case I.onnx.TensorProto.DataType.INT8:return"int8";case I.onnx.TensorProto.DataType.UINT8:return"uint8";case I.onnx.TensorProto.DataType.BOOL:return"bool";case I.onnx.TensorProto.DataType.INT16:return"int16";case I.onnx.TensorProto.DataType.UINT16:return"uint16";case I.onnx.TensorProto.DataType.INT32:return"int32";case I.onnx.TensorProto.DataType.UINT32:return"uint32";case I.onnx.TensorProto.DataType.FLOAT:return"float32";case I.onnx.TensorProto.DataType.DOUBLE:return"float64";case I.onnx.TensorProto.DataType.STRING:return"string";case I.onnx.TensorProto.DataType.INT64:return"int32";case I.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${I.onnx.TensorProto.DataType[Y]}`)}}static tensorDataTypeStringToEnum(Y){switch(Y){case"int8":return I.onnx.TensorProto.DataType.INT8;case"uint8":return I.onnx.TensorProto.DataType.UINT8;case"bool":return I.onnx.TensorProto.DataType.BOOL;case"int16":return I.onnx.TensorProto.DataType.INT16;case"uint16":return I.onnx.TensorProto.DataType.UINT16;case"int32":return I.onnx.TensorProto.DataType.INT32;case"uint32":return I.onnx.TensorProto.DataType.UINT32;case"float32":return I.onnx.TensorProto.DataType.FLOAT;case"float64":return I.onnx.TensorProto.DataType.DOUBLE;case"string":return I.onnx.TensorProto.DataType.STRING;case"int64":return I.onnx.TensorProto.DataType.INT64;case"uint64":return I.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${Y}`)}}static tensorDimsFromProto(Y){return Y.map(K=>R.default.isLong(K)?K.toNumber():K)}static tensorValueTypeFromProto(Y){return{tensorType:V.tensorDataTypeFromProto(Y.elemType),shape:{dims:V.tensorDimsFromProto(Y.shape.dim.map(K=>K.dimValue))}}}static tensorDimsFromORTFormat(Y){const K=[];for(let Q=0;Q<Y.dimsLength();Q++)K.push(D.longToNumber(Y.dims(Q)));return K}static tensorAttributesFromORTFormat(Y){const K=[];for(let Q=0;Q<Y.attributesLength();Q++)K.push(Y.attributes(Q));return K}}_.ProtoUtil=V;class D{static longToNumber(Y,K){return R.default.isLong(Y)?Y.toNumber():Y instanceof A.flatbuffers.Long?R.default.fromValue({low:Y.low,high:Y.high,unsigned:K!=null&&K}).toNumber():Y}static isLong(Y){return R.default.isLong(Y)||Y instanceof A.flatbuffers.Long}}_.LongUtil=D;class O{static size(Y){return O.getSizeFromDimensionRange(Y,0,Y.length)}static sizeFromDimension(Y,K){if(K<0||K>Y.length)throw new Error(`invalid dimension of ${K} for sizeFromDimension as Tensor has ${Y.length} dimensions.`);return O.getSizeFromDimensionRange(Y,K,Y.length)}static sizeToDimension(Y,K){if(K<0||K>Y.length)throw new Error(`invalid dimension of ${K} for sizeToDimension as Tensor has ${Y.length} dimensions.`);return O.getSizeFromDimensionRange(Y,0,K)}static getSizeFromDimensionRange(Y,K,Q){let ee=1;for(let J=K;J<Q;J++){if(Y[J]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");ee*=Y[J]}return ee}static computeStrides(Y){const K=Y.length;if(K===0)return[];if(K===1)return[1];const Q=new Array(K);Q[K-1]=1,Q[K-2]=Y[K-1];for(let ee=K-3;ee>=0;--ee)Q[ee]=Q[ee+1]*Y[ee+1];return Q}static transpose(Y){return Y.slice().reverse()}static indicesToOffset(Y,K,Q){Q===void 0&&(Q=Y.length);let ee=0;for(let J=0;J<Q;++J)ee+=K[J]*Y[J];return ee}static offsetToIndices(Y,K){const Q=K.length;if(Q===0)return[];if(Q===1)return[Y*K[0]];const ee=new Array(K.length);for(let J=0;J<ee.length-1;++J)ee[J]=Math.floor(Y/K[J]),Y-=ee[J]*K[J];return ee[ee.length-1]=Y,ee}static normalizeAxis(Y,K){if(Y<-K&&Y>=K)throw new Error("unsupported axis for this operation.");return Y<0?Y+K:Y}static normalizeAxes(Y,K){return Y.map(Q=>this.normalizeAxis(Q,K))}static incrementIndex(Y,K,Q){if(K.length===0||Y.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(Q===void 0)Q=K.length;else if(Q<=0||Q>K.length)throw new Error("Incorrect axis to increment on");for(let ee=Q-1;ee>=0&&(Y[ee]++,!(Y[ee]<K[ee]));--ee)Y[ee]=0}static calculateReshapedDims(Y,K){if(K.length===0){if(Y.length===0||O.size(Y)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const Q=K.length,ee=new Array(Q);let J=-1,ie=1;for(let se=0;se<Q;se++){if(K[se]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(K[se]===-1){if(J!==-1)throw new Error("at most one dimension in shape hints can be -1");J=se}else{if(K[se]===0){if(se>=Y.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");ee[se]=Y[se]}else ee[se]=K[se];ie*=ee[se]}}const re=O.size(Y);if(J!==-1){if(re%ie!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${Y}] Output shape: [${K}]`);ee[J]=re/ie}else if(ie!==re)throw new Error("reshapedDims and originalDims don't have matching sizes");return ee}static sortBasedOnPerm(Y,K){return K?K.map(Q=>Y[Q]):Y.slice().reverse()}static padShape(Y,K){const Q=Y.length;return Y.map((ee,J)=>ee+K[J]+K[J+Q])}static areEqual(Y,K){return Y.length===K.length&&Y.every((Q,ee)=>Q===K[ee])}static validateDimsAndCalcSize(Y){if(Y.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let K=1;for(const Q of Y){if(!Number.isInteger(Q))throw new TypeError(`Invalid shape: ${Q} is not an integer`);if(Q<0||Q>2147483647)throw new TypeError(`Invalid shape: length ${Q} is not allowed`);K*=Q}return K}static flattenShape(Y,K){K<0&&(K+=Y.length);const Q=Y.reduce((J,ie)=>J*ie,1),ee=Y.slice(K).reduce((J,ie)=>J*ie,1);return[Q/ee,ee]}static squeezeShape(Y,K){const Q=new Array;K=O.normalizeAxes(K,Y.length);for(let ee=0;ee<Y.length;ee++){const J=K.indexOf(ee)>=0;if(J&&Y[ee]!==1)throw new Error("squeeze an axis of size different than 1");(K.length===0&&Y[ee]>1||K.length>0&&!J)&&Q.push(Y[ee])}return Q}static unsqueezeShape(Y,K){const Q=new Array(Y.length+K.length);Q.fill(0);for(let J=0;J<K.length;J++){const ie=O.normalizeAxis(K[J],Q.length);if(ie>=Q.length)throw new Error("'axes' has an out of range axis");if(Q[ie]!==0)throw new Error("'axes' has a duplicate axis");Q[ie]=1}let ee=0;for(let J=0;J<Q.length;J++)Q[J]===0&&(Q[J]=Y[ee++]);if(ee!==Y.length)throw new Error("the unsqueezed dimension could not be established");return Q}}_.ShapeUtil=O,_.MathUtil=class{static sqr(X,Y,K,Q,ee){if(Q<0||Q>=Y.length)throw new Error("sourceIndex out of bounds");if(K<0||K>=X.length)throw new Error("targetIndex out of bounds");if(Q+ee>Y.length)throw new Error("source indices to be copied are outside bounds");if(K+ee>X.length)throw new Error("target array is too small to hold result");for(let J=0;J<ee;J++)X[K+J]+=Math.pow(Y[Q+J],2)}static axpy(X,Y,K,Q,ee,J){if(Q<0||Q>=Y.length)throw new Error("sourceIndex out of bounds");if(K<0||K>=X.length)throw new Error("targetIndex out of bounds");if(Q+ee>Y.length)throw new Error("source indices to be copied are outside bounds");if(K+ee>X.length)throw new Error("target array is too small to hold result");for(let ie=0;ie<ee;ie++)X[K+ie]+=J*Y[Q+ie]}static powx(X,Y,K,Q,ee,J){if(Q<0||Q>=Y.length)throw new Error("sourceIndex out of bounds");if(K<0||K>=X.length)throw new Error("targetIndex out of bounds");if(Q+ee>Y.length)throw new Error("source indices to be copied are outside bounds");if(K+ee>X.length)throw new Error("target array is too small to hold result");for(let ie=0;ie<ee;ie++)X[K+ie]=Math.pow(Y[Q+ie],J)}static mul(X,Y,K,Q,ee){if(Q<0||Q>=Y.length)throw new Error("sourceIndex out of bounds");if(K<0||K>=X.length)throw new Error("targetIndex out of bounds");if(Q+ee>Y.length)throw new Error("source indices to be copied are outside bounds");if(K+ee>X.length)throw new Error("target array is too small to hold result");for(let J=0;J<ee;J++)X[K+J]=Y[Q+J]*X[K+J]}};class L{static splitShape(Y,K,Q,ee){if(Q.length===0){if(!ee)throw new Error("need to know number of outputs when the 'split' attribute is not specified");L.determineSplit(Y[K],ee,Q)}const J=[],ie=[0];for(let re=0;re<Q.length;++re){re!==0&&ie.push(ie[re-1]+Q[re-1]);const se=Y.slice();se[K]=Q[re],J.push(se)}return[J,ie]}static determineSplit(Y,K,Q){if(Y%K!=0)throw new Error("cannot split tensor to equal sized parts");for(let ee=0;ee<K;++ee)Q.push(Y/K)}}_.SplitUtil=L;class z{static calcReduce(Y,K,Q,ee,J){const ie=Y.dims.slice(0);K.length===0&&ie.forEach((ge,ye)=>K.push(ye));const re=z.calcReduceShape(ie,K,!0),se=O.size(re),ne=new F.Tensor(re,Y.type),oe=O.computeStrides(re),fe=O.computeStrides(ie),he=new Array(ie.length);for(let ge=0;ge<se;ge++){const ye=O.offsetToIndices(ge,oe);U.fillIndex(ye,ie,he),ne.set(ye,z.calcReduceByAxis(Y.numberData,K,ie,0,O.indicesToOffset(he,fe),ee,J))}return Q?ne:new F.Tensor(z.calcReduceShape(ie,K,Q),ne.type,void 0,void 0,ne.data,ne.dataId)}static calcReduceByAxis(Y,K,Q,ee,J,ie,re){let se=0;if(ee>=K.length)return ie(Y[J]);const ne=K[ee],oe=ne>=Q.length?1:O.size(Q.slice(ne+1));for(let fe=0;fe<Q[ne];fe++)se=fe===0?z.calcReduceByAxis(Y,K,Q,ee+1,J,ie,re):re(se,z.calcReduceByAxis(Y,K,Q,ee+1,J,ie,re)),J+=oe;return se}static calcReduceShape(Y,K,Q){const ee=Y.slice();for(let J=0;J<K.length;J++)ee[K[J]]=Q?1:0;return ee.filter(J=>J!==0)}}_.ReduceUtil=z;class W{static adjustPoolAttributes(Y,K,Q,ee,J,ie){if(!Y&&Q.length!==K.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(Y)for(let re=0;re<K.length-2;re++)re>=Q.length?Q.push(K[re+2]):Q[re]=K[re+2];for(let re=0;re<Q.length;re++)if(re<ee.length){if(ee[re]<0)throw new Error("strides should be greater than or equal to 1")}else ee.push(1);for(let re=0;re<Q.length;re++)if(re<J.length){if(J[re]<0)throw new Error("dilations should be greater than or equal to 1")}else J.push(1);for(let re=0;re<2*Q.length;re++)if(re<ie.length){if(ie[re]<0)throw new Error("pad should be greater than or equal to 1")}else ie.push(0);for(let re=0;re<Q.length;re++){if(Q[re]<=0)throw new Error("kernel shapes need to be greater than 0");if(ie[re]>=Q[re]||ie[re+Q.length]>=Q[re])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(Y,K,Q,ee,J,ie){if(ie){if(J.length!==2*(Y.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(K.length!==Y.length-2)throw new Error("length of strides should be the length of data dimensions");if(ee.length!==Y.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let re=0;re<Y.length-2;re++)W.adjustPadAndReturnShape(Y[re+2],K[re],Q[re],ee[re],J,re,re+Y.length-2,ie)}}static computePoolOutputShape(Y,K,Q,ee,J,ie,re){if(K.length<=0)throw new Error("input shape must be of size greater than 0");const se=[K[0],K[1]];return W.computeShapeHelper(Y,K,se,Q,ee,J,ie,re),se}static computeConvOutputShape(Y,K,Q,ee,J,ie,re){if(Y.length<=0||K.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const se=[Y[0],K[0]];return W.computeShapeHelper(!1,Y,se,Q,ee,J,ie,re),se}static computeShapeHelper(Y,K,Q,ee,J,ie,re,se){if(Y)for(let ne=0;ne<K.length-2;ne++)Q.push(1);else for(let ne=0;ne<K.length-2;ne++)Q.push(W.adjustPadAndReturnShape(K[ne+2],ee[ne],J[ne],ie[ne],re,ne,ne+K.length-2,se))}static adjustPadAndReturnShape(Y,K,Q,ee,J,ie,re,se){const ne=Q*(ee-1)+1;if(!se||se==="NOTSET")return Math.floor((Y+J[ie]+J[re]-ne)/K+1);switch(se){case"VALID":return J[ie]=0,J[re]=0,Math.floor((Y-ne)/K+1);case"SAME_LOWER":case"SAME_UPPER":if(Q!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const oe=((Y+K-1)/K-1)*K+ee-Y;return J[ie]=Math.floor(se==="SAME_LOWER"?(oe+1)/2:oe/2),J[re]=oe-J[ie],Math.floor((Y+oe-ee)/K+1)}default:throw new Error("Unsupported AutoPad type")}}}_.PoolConvUtil=W,_.MIN_CLIP=-34028234663852886e22,_.MAX_CLIP=34028234663852886e22,_.decodeUtf8String=function(X){return new TextDecoder().decode(X)}},7967:(T,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.iterateExtraOptions=void 0,_.iterateExtraOptions=(E,C,A,R)=>{if(typeof E=="object"&&E!==null){if(A.has(E))throw new Error("Circular reference in options");A.add(E)}Object.entries(E).forEach(([I,F])=>{const B=C?C+I:I;if(typeof F=="object")(0,_.iterateExtraOptions)(F,B+".",A,R);else if(typeof F=="string"||typeof F=="number")R(B,F.toString());else{if(typeof F!="boolean")throw new Error("Can't handle extra config type: "+typeof F);R(B,F?"1":"0")}})}},2157:function(T,_,E){var C,A=this&&this.__createBinding||(Object.create?function(oe,fe,he,ge){ge===void 0&&(ge=he);var ye=Object.getOwnPropertyDescriptor(fe,he);ye&&!("get"in ye?!fe.__esModule:ye.writable||ye.configurable)||(ye={enumerable:!0,get:function(){return fe[he]}}),Object.defineProperty(oe,ge,ye)}:function(oe,fe,he,ge){ge===void 0&&(ge=he),oe[ge]=fe[he]}),R=this&&this.__setModuleDefault||(Object.create?function(oe,fe){Object.defineProperty(oe,"default",{enumerable:!0,value:fe})}:function(oe,fe){oe.default=fe}),I=this&&this.__importStar||function(oe){if(oe&&oe.__esModule)return oe;var fe={};if(oe!=null)for(var he in oe)he!=="default"&&Object.prototype.hasOwnProperty.call(oe,he)&&A(fe,oe,he);return R(fe,oe),fe};Object.defineProperty(_,"__esModule",{value:!0}),_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=_.initWasm=void 0;const F=E(1670),B=I(E(349)),U=E(6361),V=()=>!!F.env.wasm.proxy&&typeof document<"u";let D,O,L,z=!1,W=!1,X=!1;const Y=[],K=[],Q=[],ee=[],J=[],ie=[],re=()=>{if(z||!W||X||!D)throw new Error("worker not ready")},se=oe=>{switch(oe.data.type){case"init-wasm":z=!1,oe.data.err?(X=!0,O[1](oe.data.err)):(W=!0,O[0]());break;case"init-ort":oe.data.err?L[1](oe.data.err):L[0]();break;case"create_allocate":oe.data.err?Y.shift()[1](oe.data.err):Y.shift()[0](oe.data.out);break;case"create_finalize":oe.data.err?K.shift()[1](oe.data.err):K.shift()[0](oe.data.out);break;case"create":oe.data.err?Q.shift()[1](oe.data.err):Q.shift()[0](oe.data.out);break;case"release":oe.data.err?ee.shift()[1](oe.data.err):ee.shift()[0]();break;case"run":oe.data.err?J.shift()[1](oe.data.err):J.shift()[0](oe.data.out);break;case"end-profiling":oe.data.err?ie.shift()[1](oe.data.err):ie.shift()[0]()}},ne=typeof document<"u"?(C=document==null?void 0:document.currentScript)===null||C===void 0?void 0:C.src:void 0;_.initWasm=async()=>{if(V()){if(W)return;if(z)throw new Error("multiple calls to 'initWasm()' detected.");if(X)throw new Error("previous call to 'initWasm()' failed.");return z=!0,F.env.wasm.wasmPaths===void 0&&ne&&ne.indexOf("blob:")!==0&&(F.env.wasm.wasmPaths=ne.substr(0,+ne.lastIndexOf("/")+1)),new Promise((oe,fe)=>{D==null||D.terminate(),D=E(9710).Z(),D.onmessage=se,O=[oe,fe];const he={type:"init-wasm",in:F.env.wasm};D.postMessage(he)})}return(0,U.initializeWebAssembly)(F.env.wasm)},_.initOrt=async(oe,fe)=>{if(V())return re(),new Promise((he,ge)=>{L=[he,ge];const ye={type:"init-ort",in:{numThreads:oe,loggingLevel:fe}};D.postMessage(ye)});B.initOrt(oe,fe)},_.createSessionAllocate=async oe=>V()?(re(),new Promise((fe,he)=>{Y.push([fe,he]);const ge={type:"create_allocate",in:{model:oe}};D.postMessage(ge,[oe.buffer])})):B.createSessionAllocate(oe),_.createSessionFinalize=async(oe,fe)=>V()?(re(),new Promise((he,ge)=>{K.push([he,ge]);const ye={type:"create_finalize",in:{modeldata:oe,options:fe}};D.postMessage(ye)})):B.createSessionFinalize(oe,fe),_.createSession=async(oe,fe)=>V()?(re(),new Promise((he,ge)=>{Q.push([he,ge]);const ye={type:"create",in:{model:oe,options:fe}};D.postMessage(ye,[oe.buffer])})):B.createSession(oe,fe),_.releaseSession=async oe=>{if(V())return re(),new Promise((fe,he)=>{ee.push([fe,he]);const ge={type:"release",in:oe};D.postMessage(ge)});B.releaseSession(oe)},_.run=async(oe,fe,he,ge,ye)=>V()?(re(),new Promise((we,le)=>{J.push([we,le]);const de={type:"run",in:{sessionId:oe,inputIndices:fe,inputs:he,outputIndices:ge,options:ye}};D.postMessage(de,B.extractTransferableBuffers(he))})):B.run(oe,fe,he,ge,ye),_.endProfiling=async oe=>{if(V())return re(),new Promise((fe,he)=>{ie.push([fe,he]);const ge={type:"end-profiling",in:oe};D.postMessage(ge)});B.endProfiling(oe)}},586:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setRunOptions=void 0;const C=E(7967),A=E(4983),R=E(6361);_.setRunOptions=I=>{const F=(0,R.getInstance)();let B=0;const U=[],V=I||{};try{if((I==null?void 0:I.logSeverityLevel)===void 0)V.logSeverityLevel=2;else if(typeof I.logSeverityLevel!="number"||!Number.isInteger(I.logSeverityLevel)||I.logSeverityLevel<0||I.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${I.logSeverityLevel}`);if((I==null?void 0:I.logVerbosityLevel)===void 0)V.logVerbosityLevel=0;else if(typeof I.logVerbosityLevel!="number"||!Number.isInteger(I.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${I.logVerbosityLevel}`);(I==null?void 0:I.terminate)===void 0&&(V.terminate=!1);let D=0;if((I==null?void 0:I.tag)!==void 0&&(D=(0,A.allocWasmString)(I.tag,U)),B=F._OrtCreateRunOptions(V.logSeverityLevel,V.logVerbosityLevel,!!V.terminate,D),B===0)throw new Error("Can't create run options");return(I==null?void 0:I.extra)!==void 0&&(0,C.iterateExtraOptions)(I.extra,"",new WeakSet,(O,L)=>{const z=(0,A.allocWasmString)(O,U),W=(0,A.allocWasmString)(L,U);if(F._OrtAddRunConfigEntry(B,z,W)!==0)throw new Error(`Can't set a run config entry: ${O} - ${L}`)}),[B,U]}catch(D){throw B!==0&&F._OrtReleaseRunOptions(B),U.forEach(F._free),D}}},2306:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxruntimeWebAssemblySessionHandler=void 0;const C=E(2806),A=E(1670),R=E(2850),I=E(2157);let F;_.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(B){const U=await fetch(B),V=await U.arrayBuffer();return(0,I.createSessionAllocate)(new Uint8Array(V))}async loadModel(B,U){if(F||(await(0,I.initOrt)(A.env.wasm.numThreads,(V=>{switch(V){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${V}`)}})(A.env.logLevel)),F=!0),typeof B=="string")if(typeof fetch>"u"){const V=await(0,R.promisify)(C.readFile)(B);[this.sessionId,this.inputNames,this.outputNames]=await(0,I.createSession)(V,U)}else{const V=await this.createSessionAllocate(B);[this.sessionId,this.inputNames,this.outputNames]=await(0,I.createSessionFinalize)(V,U)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,I.createSession)(B,U)}async dispose(){return(0,I.releaseSession)(this.sessionId)}async run(B,U,V){const D=[],O=[];Object.entries(B).forEach(X=>{const Y=X[0],K=X[1],Q=this.inputNames.indexOf(Y);if(Q===-1)throw new Error(`invalid input '${Y}'`);D.push(K),O.push(Q)});const L=[];Object.entries(U).forEach(X=>{const Y=X[0],K=this.outputNames.indexOf(Y);if(K===-1)throw new Error(`invalid output '${Y}'`);L.push(K)});const z=await(0,I.run)(this.sessionId,O,D.map(X=>[X.type,X.dims,X.data]),L,V),W={};for(let X=0;X<z.length;X++)W[this.outputNames[L[X]]]=new A.Tensor(z[X][0],z[X][2],z[X][1]);return W}startProfiling(){}endProfiling(){(0,I.endProfiling)(this.sessionId)}}},4919:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setSessionOptions=void 0;const C=E(7967),A=E(4983),R=E(6361);_.setSessionOptions=I=>{const F=(0,R.getInstance)();let B=0;const U=[],V=I||{};(D=>{D.extra||(D.extra={}),D.extra.session||(D.extra.session={});const O=D.extra.session;O.use_ort_model_bytes_directly||(O.use_ort_model_bytes_directly="1")})(V);try{(I==null?void 0:I.graphOptimizationLevel)===void 0&&(V.graphOptimizationLevel="all");const D=(z=>{switch(z){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${z}`)}})(V.graphOptimizationLevel);(I==null?void 0:I.enableCpuMemArena)===void 0&&(V.enableCpuMemArena=!0),(I==null?void 0:I.enableMemPattern)===void 0&&(V.enableMemPattern=!0),(I==null?void 0:I.executionMode)===void 0&&(V.executionMode="sequential");const O=(z=>{switch(z){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${z}`)}})(V.executionMode);let L=0;if((I==null?void 0:I.logId)!==void 0&&(L=(0,A.allocWasmString)(I.logId,U)),(I==null?void 0:I.logSeverityLevel)===void 0)V.logSeverityLevel=2;else if(typeof I.logSeverityLevel!="number"||!Number.isInteger(I.logSeverityLevel)||I.logSeverityLevel<0||I.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${I.logSeverityLevel}`);if((I==null?void 0:I.logVerbosityLevel)===void 0)V.logVerbosityLevel=0;else if(typeof I.logVerbosityLevel!="number"||!Number.isInteger(I.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${I.logVerbosityLevel}`);if((I==null?void 0:I.enableProfiling)===void 0&&(V.enableProfiling=!1),B=F._OrtCreateSessionOptions(D,!!V.enableCpuMemArena,!!V.enableMemPattern,O,!!V.enableProfiling,0,L,V.logSeverityLevel,V.logVerbosityLevel),B===0)throw new Error("Can't create session options");return I!=null&&I.executionProviders&&((z,W,X)=>{for(const Y of W){let K=typeof Y=="string"?Y:Y.name;switch(K){case"xnnpack":K="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${K}`)}const Q=(0,A.allocWasmString)(K,X);if((0,R.getInstance)()._OrtAppendExecutionProvider(z,Q)!==0)throw new Error(`Can't append execution provider: ${K}`)}})(B,I.executionProviders,U),(I==null?void 0:I.extra)!==void 0&&(0,C.iterateExtraOptions)(I.extra,"",new WeakSet,(z,W)=>{const X=(0,A.allocWasmString)(z,U),Y=(0,A.allocWasmString)(W,U);if(F._OrtAddSessionConfigEntry(B,X,Y)!==0)throw new Error(`Can't set a session config entry: ${z} - ${W}`)}),[B,U]}catch(D){throw B!==0&&F._OrtReleaseSessionOptions(B),U.forEach(F._free),D}}},4983:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.allocWasmString=void 0;const C=E(6361);_.allocWasmString=(A,R)=>{const I=(0,C.getInstance)(),F=I.lengthBytesUTF8(A)+1,B=I._malloc(F);return I.stringToUTF8(A,B,F),R.push(B),B}},349:(T,_,E)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.extractTransferableBuffers=_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=void 0;const C=E(586),A=E(4919),R=E(4983),I=E(6361);_.initOrt=(D,O)=>{const L=(0,I.getInstance)()._OrtInit(D,O);if(L!==0)throw new Error(`Can't initialize onnxruntime. error code = ${L}`)};const F=new Map;_.createSessionAllocate=D=>{const O=(0,I.getInstance)(),L=O._malloc(D.byteLength);return O.HEAPU8.set(D,L),[L,D.byteLength]},_.createSessionFinalize=(D,O)=>{const L=(0,I.getInstance)();let z=0,W=0,X=[];try{if([W,X]=(0,A.setSessionOptions)(O),z=L._OrtCreateSession(D[0],D[1],W),z===0)throw new Error("Can't create a session")}finally{L._free(D[0]),L._OrtReleaseSessionOptions(W),X.forEach(L._free)}const Y=L._OrtGetInputCount(z),K=L._OrtGetOutputCount(z),Q=[],ee=[],J=[],ie=[];for(let re=0;re<Y;re++){const se=L._OrtGetInputName(z,re);if(se===0)throw new Error("Can't get an input name");ee.push(se),Q.push(L.UTF8ToString(se))}for(let re=0;re<K;re++){const se=L._OrtGetOutputName(z,re);if(se===0)throw new Error("Can't get an output name");ie.push(se),J.push(L.UTF8ToString(se))}return F.set(z,[z,ee,ie]),[z,Q,J]},_.createSession=(D,O)=>{const L=(0,_.createSessionAllocate)(D);return(0,_.createSessionFinalize)(L,O)},_.releaseSession=D=>{const O=(0,I.getInstance)(),L=F.get(D);if(!L)throw new Error("invalid session id");const z=L[0],W=L[1],X=L[2];W.forEach(O._OrtFree),X.forEach(O._OrtFree),O._OrtReleaseSession(z),F.delete(D)};const B=D=>{switch(D){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${D}`)}},U=D=>{switch(D){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${D}`)}},V=D=>{switch(D){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${D}`)}};_.run=(D,O,L,z,W)=>{const X=(0,I.getInstance)(),Y=F.get(D);if(!Y)throw new Error("invalid session id");const K=Y[0],Q=Y[1],ee=Y[2],J=O.length,ie=z.length;let re=0,se=[];const ne=[],oe=[];try{[re,se]=(0,C.setRunOptions)(W);for(let le=0;le<J;le++){const de=L[le][0],ce=L[le][1],ve=L[le][2];let be,me;if(Array.isArray(ve)){me=4*ve.length,be=X._malloc(me),oe.push(be);let De=be/4;for(let Ie=0;Ie<ve.length;Ie++){if(typeof ve[Ie]!="string")throw new TypeError(`tensor data at index ${Ie} is not a string`);X.HEAPU32[De++]=(0,R.allocWasmString)(ve[Ie],oe)}}else me=ve.byteLength,be=X._malloc(me),oe.push(be),X.HEAPU8.set(new Uint8Array(ve.buffer,ve.byteOffset,me),be);const xe=X.stackSave(),Ae=X.stackAlloc(4*ce.length);try{let De=Ae/4;ce.forEach(je=>X.HEAP32[De++]=je);const Ie=X._OrtCreateTensor(B(de),be,me,Ae,ce.length);if(Ie===0)throw new Error("Can't create a tensor");ne.push(Ie)}finally{X.stackRestore(xe)}}const fe=X.stackSave(),he=X.stackAlloc(4*J),ge=X.stackAlloc(4*J),ye=X.stackAlloc(4*ie),we=X.stackAlloc(4*ie);try{let le=he/4,de=ge/4,ce=ye/4,ve=we/4;for(let xe=0;xe<J;xe++)X.HEAPU32[le++]=ne[xe],X.HEAPU32[de++]=Q[O[xe]];for(let xe=0;xe<ie;xe++)X.HEAPU32[ce++]=0,X.HEAPU32[ve++]=ee[z[xe]];let be=X._OrtRun(K,ge,he,J,we,ie,ye,re);const me=[];if(be===0)for(let xe=0;xe<ie;xe++){const Ae=X.HEAPU32[ye/4+xe],De=X.stackSave(),Ie=X.stackAlloc(16);let je,Ye=0;try{if(be=X._OrtGetTensorData(Ae,Ie,Ie+4,Ie+8,Ie+12),be!==0)throw new Error(`Can't access output tensor data. error code = ${be}`);let ke=Ie/4;const Le=X.HEAPU32[ke++];Ye=X.HEAPU32[ke++];const Ne=X.HEAPU32[ke++],Qe=X.HEAPU32[ke++],et=[];for(let ut=0;ut<Qe;ut++)et.push(X.HEAPU32[Ne/4+ut]);X._OrtFree(Ne);const Je=et.length===0?1:et.reduce((ut,lt)=>ut*lt);if(je=U(Le),je==="string"){const ut=[];let lt=Ye/4;for(let it=0;it<Je;it++){const Bt=X.HEAPU32[lt++],Yt=it===Je-1?void 0:X.HEAPU32[lt]-Bt;ut.push(X.UTF8ToString(Bt,Yt))}me.push([je,et,ut])}else{const ut=new(V(je))(Je);new Uint8Array(ut.buffer,ut.byteOffset,ut.byteLength).set(X.HEAPU8.subarray(Ye,Ye+ut.byteLength)),me.push([je,et,ut])}}finally{X.stackRestore(De),je==="string"&&Ye&&X._free(Ye),X._OrtReleaseTensor(Ae)}}if(be===0)return me;throw new Error(`failed to call OrtRun(). error code = ${be}.`)}finally{X.stackRestore(fe)}}finally{ne.forEach(X._OrtReleaseTensor),oe.forEach(X._free),X._OrtReleaseRunOptions(re),se.forEach(X._free)}},_.endProfiling=D=>{const O=(0,I.getInstance)(),L=F.get(D);if(!L)throw new Error("invalid session id");const z=L[0],W=O._OrtEndProfiling(z);if(W===0)throw new Error("Can't get an profile file name");O._OrtFree(W)},_.extractTransferableBuffers=D=>{const O=[];for(const L of D){const z=L[2];!Array.isArray(z)&&z.buffer&&O.push(z.buffer)}return O}},6361:function(T,_,E){var C=this&&this.__createBinding||(Object.create?function(W,X,Y,K){K===void 0&&(K=Y);var Q=Object.getOwnPropertyDescriptor(X,Y);Q&&!("get"in Q?!X.__esModule:Q.writable||Q.configurable)||(Q={enumerable:!0,get:function(){return X[Y]}}),Object.defineProperty(W,K,Q)}:function(W,X,Y,K){K===void 0&&(K=Y),W[K]=X[Y]}),A=this&&this.__setModuleDefault||(Object.create?function(W,X){Object.defineProperty(W,"default",{enumerable:!0,value:X})}:function(W,X){W.default=X}),R=this&&this.__importStar||function(W){if(W&&W.__esModule)return W;var X={};if(W!=null)for(var Y in W)Y!=="default"&&Object.prototype.hasOwnProperty.call(W,Y)&&C(X,W,Y);return A(X,W),X},I=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.getInstance=_.initializeWebAssembly=void 0;const F=R(E(6449)),B=I(E(932)),U=E(3474);let V,D=!1,O=!1,L=!1;const z=(W,X)=>X?W?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":W?"ort-wasm-simd.wasm":"ort-wasm.wasm";_.initializeWebAssembly=async W=>{if(D)return Promise.resolve();if(O)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(L)throw new Error("previous call to 'initializeWebAssembly()' failed.");O=!0;const X=W.initTimeout,Y=W.numThreads,K=W.simd,Q=Y>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),ee=K&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),J=typeof W.wasmPaths=="string"?W.wasmPaths:void 0,ie=z(!1,Q),re=z(ee,Q),se=typeof W.wasmPaths=="object"?W.wasmPaths[re]:void 0;let ne=!1;const oe=[];if(X>0&&oe.push(new Promise(fe=>{setTimeout(()=>{ne=!0,fe()},X)})),oe.push(new Promise((fe,he)=>{const ge=Q?U:B.default,ye={locateFile:(we,le)=>Q&&we.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([E(4154)],{type:"text/javascript"})):we===ie?se??(J??le)+re:le+we};if(Q)if(typeof Blob>"u")ye.mainScriptUrlOrBlob=F.join("/","ort-wasm-threaded.js");else{const we=`var ortWasmThreaded=(function(){var _scriptDir;return ${ge.toString()}})();`;ye.mainScriptUrlOrBlob=new Blob([we],{type:"text/javascript"})}ge(ye).then(we=>{O=!1,D=!0,V=we,fe()},we=>{O=!1,L=!0,he(we)})})),await Promise.race(oe),ne)throw new Error(`WebAssembly backend initializing failed due to timeout: ${X}ms`)},_.getInstance=()=>{if(D&&V)return V;throw new Error("WebAssembly is not initialized yet.")},_.dispose=()=>{var W;!D||O||L||(O=!0,(W=V.PThread)===null||W===void 0||W.terminateAllThreads(),V=void 0,O=!1,D=!1,L=!0)}},9710:(T,_,E)=>{E.d(_,{Z:()=>R});var C=E(477),A=E.n(C);function R(){return A()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:T=>{T.exports=function(_,E,C,A){var R=self||window;try{try{var I;try{I=new R.Blob([_])}catch{(I=new(R.BlobBuilder||R.WebKitBlobBuilder||R.MozBlobBuilder||R.MSBlobBuilder)).append(_),I=I.getBlob()}var F=R.URL||R.webkitURL,B=F.createObjectURL(I),U=new R[E](B,C);return F.revokeObjectURL(B),U}catch{return new R[E]("data:application/javascript,".concat(encodeURIComponent(_)),C)}}catch{if(!A)throw Error("Inline worker is not supported");return new R[E](A,C)}}},4154:T=>{T.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:T=>{T.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(T,_,E)=>{E.r(_),E.d(_,{flatbuffers:()=>C});var C={};C.Offset,C.Table,C.SIZEOF_SHORT=2,C.SIZEOF_INT=4,C.FILE_IDENTIFIER_LENGTH=4,C.SIZE_PREFIX_LENGTH=4,C.Encoding={UTF8_BYTES:1,UTF16_STRING:2},C.int32=new Int32Array(2),C.float32=new Float32Array(C.int32.buffer),C.float64=new Float64Array(C.int32.buffer),C.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,C.Long=function(A,R){this.low=0|A,this.high=0|R},C.Long.create=function(A,R){return A==0&&R==0?C.Long.ZERO:new C.Long(A,R)},C.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},C.Long.prototype.equals=function(A){return this.low==A.low&&this.high==A.high},C.Long.ZERO=new C.Long(0,0),C.Builder=function(A){if(A)R=A;else var R=1024;this.bb=C.ByteBuffer.allocate(R),this.space=R,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},C.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},C.Builder.prototype.forceDefaults=function(A){this.force_defaults=A},C.Builder.prototype.dataBuffer=function(){return this.bb},C.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},C.Builder.prototype.prep=function(A,R){A>this.minalign&&(this.minalign=A);for(var I=1+~(this.bb.capacity()-this.space+R)&A-1;this.space<I+A+R;){var F=this.bb.capacity();this.bb=C.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-F}this.pad(I)},C.Builder.prototype.pad=function(A){for(var R=0;R<A;R++)this.bb.writeInt8(--this.space,0)},C.Builder.prototype.writeInt8=function(A){this.bb.writeInt8(this.space-=1,A)},C.Builder.prototype.writeInt16=function(A){this.bb.writeInt16(this.space-=2,A)},C.Builder.prototype.writeInt32=function(A){this.bb.writeInt32(this.space-=4,A)},C.Builder.prototype.writeInt64=function(A){this.bb.writeInt64(this.space-=8,A)},C.Builder.prototype.writeFloat32=function(A){this.bb.writeFloat32(this.space-=4,A)},C.Builder.prototype.writeFloat64=function(A){this.bb.writeFloat64(this.space-=8,A)},C.Builder.prototype.addInt8=function(A){this.prep(1,0),this.writeInt8(A)},C.Builder.prototype.addInt16=function(A){this.prep(2,0),this.writeInt16(A)},C.Builder.prototype.addInt32=function(A){this.prep(4,0),this.writeInt32(A)},C.Builder.prototype.addInt64=function(A){this.prep(8,0),this.writeInt64(A)},C.Builder.prototype.addFloat32=function(A){this.prep(4,0),this.writeFloat32(A)},C.Builder.prototype.addFloat64=function(A){this.prep(8,0),this.writeFloat64(A)},C.Builder.prototype.addFieldInt8=function(A,R,I){(this.force_defaults||R!=I)&&(this.addInt8(R),this.slot(A))},C.Builder.prototype.addFieldInt16=function(A,R,I){(this.force_defaults||R!=I)&&(this.addInt16(R),this.slot(A))},C.Builder.prototype.addFieldInt32=function(A,R,I){(this.force_defaults||R!=I)&&(this.addInt32(R),this.slot(A))},C.Builder.prototype.addFieldInt64=function(A,R,I){!this.force_defaults&&R.equals(I)||(this.addInt64(R),this.slot(A))},C.Builder.prototype.addFieldFloat32=function(A,R,I){(this.force_defaults||R!=I)&&(this.addFloat32(R),this.slot(A))},C.Builder.prototype.addFieldFloat64=function(A,R,I){(this.force_defaults||R!=I)&&(this.addFloat64(R),this.slot(A))},C.Builder.prototype.addFieldOffset=function(A,R,I){(this.force_defaults||R!=I)&&(this.addOffset(R),this.slot(A))},C.Builder.prototype.addFieldStruct=function(A,R,I){R!=I&&(this.nested(R),this.slot(A))},C.Builder.prototype.nested=function(A){if(A!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},C.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},C.Builder.prototype.slot=function(A){this.vtable[A]=this.offset()},C.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},C.Builder.growByteBuffer=function(A){var R=A.capacity();if(3221225472&R)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var I=R<<1,F=C.ByteBuffer.allocate(I);return F.setPosition(I-R),F.bytes().set(A.bytes(),I-R),F},C.Builder.prototype.addOffset=function(A){this.prep(C.SIZEOF_INT,0),this.writeInt32(this.offset()-A+C.SIZEOF_INT)},C.Builder.prototype.startObject=function(A){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=A;for(var R=0;R<A;R++)this.vtable[R]=0;this.isNested=!0,this.object_start=this.offset()},C.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var A=this.offset(),R=this.vtable_in_use-1;R>=0&&this.vtable[R]==0;R--);for(var I=R+1;R>=0;R--)this.addInt16(this.vtable[R]!=0?A-this.vtable[R]:0);this.addInt16(A-this.object_start);var F=(I+2)*C.SIZEOF_SHORT;this.addInt16(F);var B=0,U=this.space;e:for(R=0;R<this.vtables.length;R++){var V=this.bb.capacity()-this.vtables[R];if(F==this.bb.readInt16(V)){for(var D=C.SIZEOF_SHORT;D<F;D+=C.SIZEOF_SHORT)if(this.bb.readInt16(U+D)!=this.bb.readInt16(V+D))continue e;B=this.vtables[R];break}}return B?(this.space=this.bb.capacity()-A,this.bb.writeInt32(this.space,B-A)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-A,this.offset()-A)),this.isNested=!1,A},C.Builder.prototype.finish=function(A,R,I){var F=I?C.SIZE_PREFIX_LENGTH:0;if(R){var B=R;if(this.prep(this.minalign,C.SIZEOF_INT+C.FILE_IDENTIFIER_LENGTH+F),B.length!=C.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+C.FILE_IDENTIFIER_LENGTH);for(var U=C.FILE_IDENTIFIER_LENGTH-1;U>=0;U--)this.writeInt8(B.charCodeAt(U))}this.prep(this.minalign,C.SIZEOF_INT+F),this.addOffset(A),F&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},C.Builder.prototype.finishSizePrefixed=function(A,R){this.finish(A,R,!0)},C.Builder.prototype.requiredField=function(A,R){var I=this.bb.capacity()-A,F=I-this.bb.readInt32(I);if(this.bb.readInt16(F+R)==0)throw new Error("FlatBuffers: field "+R+" must be set")},C.Builder.prototype.startVector=function(A,R,I){this.notNested(),this.vector_num_elems=R,this.prep(C.SIZEOF_INT,A*R),this.prep(I,A*R)},C.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},C.Builder.prototype.createString=function(A){if(A instanceof Uint8Array)var R=A;else{R=[];for(var I=0;I<A.length;){var F,B=A.charCodeAt(I++);(F=B<55296||B>=56320?B:(B<<10)+A.charCodeAt(I++)+-56613888)<128?R.push(F):(F<2048?R.push(F>>6&31|192):(F<65536?R.push(F>>12&15|224):R.push(F>>18&7|240,F>>12&63|128),R.push(F>>6&63|128)),R.push(63&F|128))}}this.addInt8(0),this.startVector(1,R.length,1),this.bb.setPosition(this.space-=R.length),I=0;for(var U=this.space,V=this.bb.bytes();I<R.length;I++)V[U++]=R[I];return this.endVector()},C.Builder.prototype.createLong=function(A,R){return C.Long.create(A,R)},C.ByteBuffer=function(A){this.bytes_=A,this.position_=0},C.ByteBuffer.allocate=function(A){return new C.ByteBuffer(new Uint8Array(A))},C.ByteBuffer.prototype.clear=function(){this.position_=0},C.ByteBuffer.prototype.bytes=function(){return this.bytes_},C.ByteBuffer.prototype.position=function(){return this.position_},C.ByteBuffer.prototype.setPosition=function(A){this.position_=A},C.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},C.ByteBuffer.prototype.readInt8=function(A){return this.readUint8(A)<<24>>24},C.ByteBuffer.prototype.readUint8=function(A){return this.bytes_[A]},C.ByteBuffer.prototype.readInt16=function(A){return this.readUint16(A)<<16>>16},C.ByteBuffer.prototype.readUint16=function(A){return this.bytes_[A]|this.bytes_[A+1]<<8},C.ByteBuffer.prototype.readInt32=function(A){return this.bytes_[A]|this.bytes_[A+1]<<8|this.bytes_[A+2]<<16|this.bytes_[A+3]<<24},C.ByteBuffer.prototype.readUint32=function(A){return this.readInt32(A)>>>0},C.ByteBuffer.prototype.readInt64=function(A){return new C.Long(this.readInt32(A),this.readInt32(A+4))},C.ByteBuffer.prototype.readUint64=function(A){return new C.Long(this.readUint32(A),this.readUint32(A+4))},C.ByteBuffer.prototype.readFloat32=function(A){return C.int32[0]=this.readInt32(A),C.float32[0]},C.ByteBuffer.prototype.readFloat64=function(A){return C.int32[C.isLittleEndian?0:1]=this.readInt32(A),C.int32[C.isLittleEndian?1:0]=this.readInt32(A+4),C.float64[0]},C.ByteBuffer.prototype.writeInt8=function(A,R){this.bytes_[A]=R},C.ByteBuffer.prototype.writeUint8=function(A,R){this.bytes_[A]=R},C.ByteBuffer.prototype.writeInt16=function(A,R){this.bytes_[A]=R,this.bytes_[A+1]=R>>8},C.ByteBuffer.prototype.writeUint16=function(A,R){this.bytes_[A]=R,this.bytes_[A+1]=R>>8},C.ByteBuffer.prototype.writeInt32=function(A,R){this.bytes_[A]=R,this.bytes_[A+1]=R>>8,this.bytes_[A+2]=R>>16,this.bytes_[A+3]=R>>24},C.ByteBuffer.prototype.writeUint32=function(A,R){this.bytes_[A]=R,this.bytes_[A+1]=R>>8,this.bytes_[A+2]=R>>16,this.bytes_[A+3]=R>>24},C.ByteBuffer.prototype.writeInt64=function(A,R){this.writeInt32(A,R.low),this.writeInt32(A+4,R.high)},C.ByteBuffer.prototype.writeUint64=function(A,R){this.writeUint32(A,R.low),this.writeUint32(A+4,R.high)},C.ByteBuffer.prototype.writeFloat32=function(A,R){C.float32[0]=R,this.writeInt32(A,C.int32[0])},C.ByteBuffer.prototype.writeFloat64=function(A,R){C.float64[0]=R,this.writeInt32(A,C.int32[C.isLittleEndian?0:1]),this.writeInt32(A+4,C.int32[C.isLittleEndian?1:0])},C.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+C.SIZEOF_INT+C.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var A="",R=0;R<C.FILE_IDENTIFIER_LENGTH;R++)A+=String.fromCharCode(this.readInt8(this.position_+C.SIZEOF_INT+R));return A},C.ByteBuffer.prototype.__offset=function(A,R){var I=A-this.readInt32(A);return R<this.readInt16(I)?this.readInt16(I+R):0},C.ByteBuffer.prototype.__union=function(A,R){return A.bb_pos=R+this.readInt32(R),A.bb=this,A},C.ByteBuffer.prototype.__string=function(A,R){A+=this.readInt32(A);var I=this.readInt32(A),F="",B=0;if(A+=C.SIZEOF_INT,R===C.Encoding.UTF8_BYTES)return this.bytes_.subarray(A,A+I);for(;B<I;){var U,V=this.readUint8(A+B++);if(V<192)U=V;else{var D=this.readUint8(A+B++);if(V<224)U=(31&V)<<6|63&D;else{var O=this.readUint8(A+B++);U=V<240?(15&V)<<12|(63&D)<<6|63&O:(7&V)<<18|(63&D)<<12|(63&O)<<6|63&this.readUint8(A+B++)}}U<65536?F+=String.fromCharCode(U):(U-=65536,F+=String.fromCharCode(55296+(U>>10),56320+(1023&U)))}return F},C.ByteBuffer.prototype.__indirect=function(A){return A+this.readInt32(A)},C.ByteBuffer.prototype.__vector=function(A){return A+this.readInt32(A)+C.SIZEOF_INT},C.ByteBuffer.prototype.__vector_len=function(A){return this.readInt32(A+this.readInt32(A))},C.ByteBuffer.prototype.__has_identifier=function(A){if(A.length!=C.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+C.FILE_IDENTIFIER_LENGTH);for(var R=0;R<C.FILE_IDENTIFIER_LENGTH;R++)if(A.charCodeAt(R)!=this.readInt8(this.position_+C.SIZEOF_INT+R))return!1;return!0},C.ByteBuffer.prototype.createLong=function(A,R){return C.Long.create(A,R)}}},__webpack_module_cache__={};function __webpack_require__(T){var _=__webpack_module_cache__[T];if(_!==void 0)return _.exports;var E=__webpack_module_cache__[T]={exports:{}};return __webpack_modules__[T].call(E.exports,E,E.exports,__webpack_require__),E.exports}__webpack_require__.n=T=>{var _=T&&T.__esModule?()=>T.default:()=>T;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(T,_)=>{for(var E in _)__webpack_require__.o(_,E)&&!__webpack_require__.o(T,E)&&Object.defineProperty(T,E,{enumerable:!0,get:_[E]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(T,_)=>Object.prototype.hasOwnProperty.call(T,_),__webpack_require__.r=T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())}(ortWeb_min)),ortWeb_min.exports}var assetPath={},hasRequiredAssetPath;function requireAssetPath(){if(hasRequiredAssetPath)return assetPath;hasRequiredAssetPath=1,Object.defineProperty(assetPath,"__esModule",{value:!0}),assetPath.baseAssetPath=void 0;const _=typeof window<"u"&&typeof window.document<"u"?window.document.currentScript:null;let E="/";return _&&(E=_.src.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")),assetPath.baseAssetPath=E,assetPath}var defaultModelFetcher={},hasRequiredDefaultModelFetcher;function requireDefaultModelFetcher(){if(hasRequiredDefaultModelFetcher)return defaultModelFetcher;hasRequiredDefaultModelFetcher=1,Object.defineProperty(defaultModelFetcher,"__esModule",{value:!0}),defaultModelFetcher.defaultModelFetcher=void 0;const T=_=>fetch(_).then(E=>E.arrayBuffer());return defaultModelFetcher.defaultModelFetcher=T,defaultModelFetcher}var frameProcessor={},logging={},hasRequiredLogging;function requireLogging(){return hasRequiredLogging||(hasRequiredLogging=1,function(T){Object.defineProperty(T,"__esModule",{value:!0}),T.log=T.LOG_PREFIX=void 0,T.LOG_PREFIX="[VAD]";const _=["error","debug","warn"];function E(A){return(...R)=>{console[A](T.LOG_PREFIX,...R)}}const C=_.reduce((A,R)=>(A[R]=E(R),A),{});T.log=C}(logging)),logging}var messages={},hasRequiredMessages;function requireMessages(){if(hasRequiredMessages)return messages;hasRequiredMessages=1,Object.defineProperty(messages,"__esModule",{value:!0}),messages.Message=void 0;var T;return function(_){_.AudioFrame="AUDIO_FRAME",_.SpeechStart="SPEECH_START",_.VADMisfire="VAD_MISFIRE",_.SpeechEnd="SPEECH_END",_.SpeechStop="SPEECH_STOP"}(T||(messages.Message=T={})),messages}var hasRequiredFrameProcessor;function requireFrameProcessor(){if(hasRequiredFrameProcessor)return frameProcessor;hasRequiredFrameProcessor=1,Object.defineProperty(frameProcessor,"__esModule",{value:!0}),frameProcessor.FrameProcessor=frameProcessor.validateOptions=frameProcessor.defaultV5FrameProcessorOptions=frameProcessor.defaultLegacyFrameProcessorOptions=void 0;const T=requireLogging(),_=requireMessages(),E=[512,1024,1536];frameProcessor.defaultLegacyFrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:1,redemptionFrames:8,frameSamples:1536,minSpeechFrames:3,submitUserSpeechOnPause:!1},frameProcessor.defaultV5FrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:3,redemptionFrames:24,frameSamples:512,minSpeechFrames:9,submitUserSpeechOnPause:!1};function C(I){E.includes(I.frameSamples)||T.log.warn("You are using an unusual frame size"),(I.positiveSpeechThreshold<0||I.positiveSpeechThreshold>1)&&T.log.error("positiveSpeechThreshold should be a number between 0 and 1"),(I.negativeSpeechThreshold<0||I.negativeSpeechThreshold>I.positiveSpeechThreshold)&&T.log.error("negativeSpeechThreshold should be between 0 and positiveSpeechThreshold"),I.preSpeechPadFrames<0&&T.log.error("preSpeechPadFrames should be positive"),I.redemptionFrames<0&&T.log.error("redemptionFrames should be positive")}frameProcessor.validateOptions=C;const A=I=>{const F=I.reduce((U,V)=>(U.push(U.at(-1)+V.length),U),[0]),B=new Float32Array(F.at(-1));return I.forEach((U,V)=>{const D=F[V];B.set(U,D)}),B};class R{constructor(F,B,U){this.modelProcessFunc=F,this.modelResetFunc=B,this.options=U,this.speaking=!1,this.redemptionCounter=0,this.active=!1,this.reset=()=>{this.speaking=!1,this.audioBuffer=[],this.modelResetFunc(),this.redemptionCounter=0},this.pause=()=>(this.active=!1,this.options.submitUserSpeechOnPause?this.endSegment():(this.reset(),{})),this.resume=()=>{this.active=!0},this.endSegment=()=>{const V=this.audioBuffer;this.audioBuffer=[];const D=this.speaking;this.reset();const O=V.reduce((L,z)=>L+ +z.isSpeech,0);if(D)if(O>=this.options.minSpeechFrames){const L=A(V.map(z=>z.frame));return{msg:_.Message.SpeechEnd,audio:L}}else return{msg:_.Message.VADMisfire};return{}},this.process=async V=>{if(!this.active)return{};const D=await this.modelProcessFunc(V);if(this.audioBuffer.push({frame:V,isSpeech:D.isSpeech>=this.options.positiveSpeechThreshold}),D.isSpeech>=this.options.positiveSpeechThreshold&&this.redemptionCounter&&(this.redemptionCounter=0),D.isSpeech>=this.options.positiveSpeechThreshold&&!this.speaking)return this.speaking=!0,{probs:D,msg:_.Message.SpeechStart,frame:V};if(D.isSpeech<this.options.negativeSpeechThreshold&&this.speaking&&++this.redemptionCounter>=this.options.redemptionFrames){this.redemptionCounter=0,this.speaking=!1;const O=this.audioBuffer;if(this.audioBuffer=[],O.reduce((z,W)=>z+ +W.isSpeech,0)>=this.options.minSpeechFrames){const z=A(O.map(W=>W.frame));return{probs:D,msg:_.Message.SpeechEnd,audio:z,frame:V}}else return{probs:D,msg:_.Message.VADMisfire,frame:V}}if(!this.speaking)for(;this.audioBuffer.length>this.options.preSpeechPadFrames;)this.audioBuffer.shift();return{probs:D,frame:V}},this.audioBuffer=[],this.reset()}}return frameProcessor.FrameProcessor=R,frameProcessor}var nonRealTimeVad={},models={},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,Object.defineProperty(common,"__esModule",{value:!0})),common}var legacy={},hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var T;Object.defineProperty(legacy,"__esModule",{value:!0}),legacy.SileroLegacy=void 0;const _=requireLogging();class E{constructor(A,R,I,F,B){this.ortInstance=A,this._session=R,this._h=I,this._c=F,this._sr=B,this.reset_state=()=>{const U=Array(128).fill(0);this._h=new this.ortInstance.Tensor("float32",U,[2,1,64]),this._c=new this.ortInstance.Tensor("float32",U,[2,1,64])},this.process=async U=>{var W;const D={input:new this.ortInstance.Tensor("float32",U,[1,U.length]),h:this._h,c:this._c,sr:this._sr},O=await this._session.run(D);this._h=O.hn,this._c=O.cn;const[L]=(W=O.output)==null?void 0:W.data;return{notSpeech:1-L,isSpeech:L}}}}return legacy.SileroLegacy=E,T=E,E.new=async(C,A)=>{_.log.debug("initializing vad");const R=await A(),I=await C.InferenceSession.create(R),F=new C.Tensor("int64",[16000n]),B=Array(2*64).fill(0),U=new C.Tensor("float32",B,[2,1,64]),V=new C.Tensor("float32",B,[2,1,64]);return _.log.debug("vad is initialized"),new T(C,I,U,V,F)},legacy}var v5={},hasRequiredV5;function requireV5(){if(hasRequiredV5)return v5;hasRequiredV5=1;var T;Object.defineProperty(v5,"__esModule",{value:!0}),v5.SileroV5=void 0;const _=requireLogging();function E(A){const R=Array(256).fill(0);return new A.Tensor("float32",R,[2,1,128])}class C{constructor(R,I,F,B){this._session=R,this._state=I,this._sr=F,this.ortInstance=B,this.reset_state=()=>{this._state=E(this.ortInstance)},this.process=async U=>{var W;const D={input:new this.ortInstance.Tensor("float32",U,[1,U.length]),state:this._state,sr:this._sr},O=await this._session.run(D);this._state=O.stateN;const[L]=(W=O.output)==null?void 0:W.data;return{notSpeech:1-L,isSpeech:L}}}}return v5.SileroV5=C,T=C,C.new=async(A,R)=>{_.log.debug("Loading VAD...");const I=await R(),F=await A.InferenceSession.create(I),B=new A.Tensor("int64",[16000n]),U=E(A);return _.log.debug("...finished loading VAD"),new T(F,U,B,A)},v5}var hasRequiredModels;function requireModels(){return hasRequiredModels||(hasRequiredModels=1,function(T){var _=models&&models.__createBinding||(Object.create?function(R,I,F,B){B===void 0&&(B=F);var U=Object.getOwnPropertyDescriptor(I,F);(!U||("get"in U?!I.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return I[F]}}),Object.defineProperty(R,B,U)}:function(R,I,F,B){B===void 0&&(B=F),R[B]=I[F]}),E=models&&models.__exportStar||function(R,I){for(var F in R)F!=="default"&&!Object.prototype.hasOwnProperty.call(I,F)&&_(I,R,F)};Object.defineProperty(T,"__esModule",{value:!0}),T.SileroV5=T.SileroLegacy=void 0,E(requireCommon(),T);var C=requireLegacy();Object.defineProperty(T,"SileroLegacy",{enumerable:!0,get:function(){return C.SileroLegacy}});var A=requireV5();Object.defineProperty(T,"SileroV5",{enumerable:!0,get:function(){return A.SileroV5}})}(models)),models}var resampler={},hasRequiredResampler;function requireResampler(){if(hasRequiredResampler)return resampler;hasRequiredResampler=1,Object.defineProperty(resampler,"__esModule",{value:!0}),resampler.Resampler=void 0;const T=requireLogging();class _{constructor(C){this.options=C,this.process=A=>{const R=[];for(const I of A)for(this.inputBuffer.push(I);this.hasEnoughDataForFrame();){const F=this.generateOutputFrame();R.push(F)}return R},this.stream=async function*(A){for(const R of A)for(this.inputBuffer.push(R);this.hasEnoughDataForFrame();)yield this.generateOutputFrame()},C.nativeSampleRate<16e3&&T.log.error("nativeSampleRate is too low. Should have 16000 = targetSampleRate <= nativeSampleRate"),this.inputBuffer=[]}hasEnoughDataForFrame(){return this.inputBuffer.length*this.options.targetSampleRate/this.options.nativeSampleRate>=this.options.targetFrameSize}generateOutputFrame(){const C=new Float32Array(this.options.targetFrameSize);let A=0,R=0;for(;A<this.options.targetFrameSize;){let I=0,F=0;for(;R<Math.min(this.inputBuffer.length,(A+1)*this.options.nativeSampleRate/this.options.targetSampleRate);){const B=this.inputBuffer[R];B!==void 0&&(I+=B,F++),R++}C[A]=I/F,A++}return this.inputBuffer=this.inputBuffer.slice(R),C}}return resampler.Resampler=_,resampler}var hasRequiredNonRealTimeVad;function requireNonRealTimeVad(){return hasRequiredNonRealTimeVad||(hasRequiredNonRealTimeVad=1,function(T){Object.defineProperty(T,"__esModule",{value:!0}),T.PlatformAgnosticNonRealTimeVAD=T.defaultNonRealTimeVADOptions=void 0;const _=requireFrameProcessor(),E=requireMessages(),C=requireModels(),A=requireResampler();T.defaultNonRealTimeVADOptions={..._.defaultLegacyFrameProcessorOptions,ortConfig:void 0};class R{static async _new(F,B,U={}){const V={...T.defaultNonRealTimeVADOptions,...U};V.ortConfig!==void 0&&V.ortConfig(B);const D=new this(F,B,V);return await D.init(),D}constructor(F,B,U){this.modelFetcher=F,this.ort=B,this.options=U,this.init=async()=>{const V=await C.SileroLegacy.new(this.ort,this.modelFetcher);this.frameProcessor=new _.FrameProcessor(V.process,V.reset_state,{frameSamples:this.options.frameSamples,positiveSpeechThreshold:this.options.positiveSpeechThreshold,negativeSpeechThreshold:this.options.negativeSpeechThreshold,redemptionFrames:this.options.redemptionFrames,preSpeechPadFrames:this.options.preSpeechPadFrames,minSpeechFrames:this.options.minSpeechFrames,submitUserSpeechOnPause:this.options.submitUserSpeechOnPause}),this.frameProcessor.resume()},this.run=async function*(V,D){const O={nativeSampleRate:D,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples},L=new A.Resampler(O);let z=0,W=0,X=0;for await(const Q of L.stream(V)){const{msg:ee,audio:J}=await this.frameProcessor.process(Q);switch(ee){case E.Message.SpeechStart:z=X*this.options.frameSamples/16;break;case E.Message.SpeechEnd:W=(X+1)*this.options.frameSamples/16,yield{audio:J,start:z,end:W};break}X++}const{msg:Y,audio:K}=this.frameProcessor.endSegment();Y==E.Message.SpeechEnd&&(yield{audio:K,start:z,end:X*this.options.frameSamples/16})},(0,_.validateOptions)(U)}}T.PlatformAgnosticNonRealTimeVAD=R}(nonRealTimeVad)),nonRealTimeVad}var utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1.audioFileToArray=utils$1.encodeWAV=utils$1.arrayBufferToBase64=utils$1.minFramesForTargetMS=void 0;function T(F,B,U=16e3){return Math.ceil(F*U/1e3/B)}utils$1.minFramesForTargetMS=T;function _(F){const B=new Uint8Array(F),U=B.byteLength,V=new Array(U);for(var D=0;D<U;D++){const O=B[D];if(O===void 0)break;V[D]=String.fromCharCode(O)}return btoa(V.join(""))}utils$1.arrayBufferToBase64=_;function E(F,B=3,U=16e3,V=1,D=32){var O=D/8,L=V*O,z=new ArrayBuffer(44+F.length*O),W=new DataView(z);return R(W,0,"RIFF"),W.setUint32(4,36+F.length*O,!0),R(W,8,"WAVE"),R(W,12,"fmt "),W.setUint32(16,16,!0),W.setUint16(20,B,!0),W.setUint16(22,V,!0),W.setUint32(24,U,!0),W.setUint32(28,U*L,!0),W.setUint16(32,L,!0),W.setUint16(34,D,!0),R(W,36,"data"),W.setUint32(40,F.length*O,!0),B===1?A(W,44,F):C(W,44,F),z}utils$1.encodeWAV=E;function C(F,B,U){for(var V=0;V<U.length;V++,B+=4)F.setFloat32(B,U[V],!0)}function A(F,B,U){for(var V=0;V<U.length;V++,B+=2){var D=Math.max(-1,Math.min(1,U[V]));F.setInt16(B,D<0?D*32768:D*32767,!0)}}function R(F,B,U){for(var V=0;V<U.length;V++)F.setUint8(B+V,U.charCodeAt(V))}async function I(F){const B=new OfflineAudioContext(1,1,44100),U=new FileReader;let V=null;if(await new Promise(L=>{U.addEventListener("loadend",z=>{const W=U.result;B.decodeAudioData(W,X=>{V=X,B.startRendering().then(Y=>{console.log("Rendering completed successfully"),L()}).catch(Y=>{console.error(`Rendering failed: ${Y}`)})},X=>{console.log(`Error with decoding audio data: ${X}`)})}),U.readAsArrayBuffer(F)}),V===null)throw Error("some shit");let D=V,O=new Float32Array(D.length);for(let L=0;L<D.length;L++)for(let z=0;z<D.numberOfChannels;z++)O[L]+=D.getChannelData(z)[L];return{audio:O,sampleRate:D.sampleRate}}return utils$1.audioFileToArray=I,utils$1}var realTimeVad={},hasRequiredRealTimeVad;function requireRealTimeVad(){return hasRequiredRealTimeVad||(hasRequiredRealTimeVad=1,function(T){var _=realTimeVad&&realTimeVad.__createBinding||(Object.create?function(Y,K,Q,ee){ee===void 0&&(ee=Q);var J=Object.getOwnPropertyDescriptor(K,Q);(!J||("get"in J?!K.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return K[Q]}}),Object.defineProperty(Y,ee,J)}:function(Y,K,Q,ee){ee===void 0&&(ee=Q),Y[ee]=K[Q]}),E=realTimeVad&&realTimeVad.__setModuleDefault||(Object.create?function(Y,K){Object.defineProperty(Y,"default",{enumerable:!0,value:K})}:function(Y,K){Y.default=K}),C=realTimeVad&&realTimeVad.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var K={};if(Y!=null)for(var Q in Y)Q!=="default"&&Object.prototype.hasOwnProperty.call(Y,Q)&&_(K,Y,Q);return E(K,Y),K};Object.defineProperty(T,"__esModule",{value:!0}),T.AudioNodeVAD=T.MicVAD=T.getDefaultRealTimeVADOptions=T.ort=T.DEFAULT_MODEL=void 0;const A=C(requireOrtWeb_min()),R=requireDefaultModelFetcher(),I=requireFrameProcessor(),F=requireLogging(),B=requireMessages(),U=requireModels(),V=requireResampler();T.DEFAULT_MODEL="legacy",T.ort=A;const D="vad.worklet.bundle.min.js",O="silero_vad_v5.onnx",L="silero_vad_legacy.onnx",z=Y=>({...Y==="v5"?I.defaultV5FrameProcessorOptions:I.defaultLegacyFrameProcessorOptions,onFrameProcessed:Q=>{},onVADMisfire:()=>{F.log.debug("VAD misfire")},onSpeechStart:()=>{F.log.debug("Detected speech start")},onSpeechEnd:()=>{F.log.debug("Detected speech end")},baseAssetPath:"https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.22/dist/",onnxWASMBasePath:"https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/",stream:void 0,ortConfig:void 0,model:T.DEFAULT_MODEL,workletOptions:{}});T.getDefaultRealTimeVADOptions=z;class W{static async new(K={}){const Q={...(0,T.getDefaultRealTimeVADOptions)(K.model??T.DEFAULT_MODEL),...K};(0,I.validateOptions)(Q);let ee;Q.stream===void 0?ee=await navigator.mediaDevices.getUserMedia({audio:{...Q.additionalAudioConstraints,channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}):ee=Q.stream;const J=new AudioContext,ie=new MediaStreamAudioSourceNode(J,{mediaStream:ee}),re=await X.new(J,Q);return re.receive(ie),new W(Q,J,ee,re,ie)}constructor(K,Q,ee,J,ie,re=!1){this.options=K,this.audioContext=Q,this.stream=ee,this.audioNodeVAD=J,this.sourceNode=ie,this.listening=re,this.pause=()=>{this.audioNodeVAD.pause(),this.listening=!1},this.start=()=>{this.audioNodeVAD.start(),this.listening=!0},this.destroy=()=>{this.listening&&this.pause(),this.options.stream===void 0&&this.stream.getTracks().forEach(se=>se.stop()),this.sourceNode.disconnect(),this.audioNodeVAD.destroy(),this.audioContext.close()}}}T.MicVAD=W;class X{static async new(K,Q={}){const ee={...(0,T.getDefaultRealTimeVADOptions)(Q.model??T.DEFAULT_MODEL),...Q};(0,I.validateOptions)(ee),T.ort.env.wasm.wasmPaths=ee.onnxWASMBasePath,ee.ortConfig!==void 0&&ee.ortConfig(T.ort);const J=ee.model==="v5"?O:L,ie=ee.baseAssetPath+J,re=ee.model==="v5"?U.SileroV5.new:U.SileroLegacy.new;let se;try{se=await re(T.ort,()=>(0,R.defaultModelFetcher)(ie))}catch(fe){throw console.error(`Encountered an error while loading model file ${ie}`),fe}const ne=new I.FrameProcessor(se.process,se.reset_state,{frameSamples:ee.frameSamples,positiveSpeechThreshold:ee.positiveSpeechThreshold,negativeSpeechThreshold:ee.negativeSpeechThreshold,redemptionFrames:ee.redemptionFrames,preSpeechPadFrames:ee.preSpeechPadFrames,minSpeechFrames:ee.minSpeechFrames,submitUserSpeechOnPause:ee.submitUserSpeechOnPause}),oe=new X(K,ee,ne);return await oe.setupAudioNode(),oe}constructor(K,Q,ee){this.ctx=K,this.options=Q,this.bufferIndex=0,this.pause=()=>{const J=this.frameProcessor.pause();this.handleFrameProcessorEvent(J)},this.start=()=>{this.frameProcessor.resume()},this.receive=J=>{J.connect(this.audioNode)},this.processFrame=async J=>{const ie=await this.frameProcessor.process(J);this.handleFrameProcessorEvent(ie)},this.handleFrameProcessorEvent=J=>{switch(J.probs!==void 0&&this.options.onFrameProcessed(J.probs,J.frame),J.msg){case B.Message.SpeechStart:this.options.onSpeechStart();break;case B.Message.VADMisfire:this.options.onVADMisfire();break;case B.Message.SpeechEnd:this.options.onSpeechEnd(J.audio);break}},this.destroy=()=>{var J;this.audioNode instanceof AudioWorkletNode&&this.audioNode.port.postMessage({message:B.Message.SpeechStop}),this.audioNode.disconnect(),(J=this.gainNode)==null||J.disconnect()},this.frameProcessor=ee}async setupAudioNode(){if("audioWorklet"in this.ctx&&typeof AudioWorkletNode=="function")try{const J=this.options.baseAssetPath+D;await this.ctx.audioWorklet.addModule(J);const ie=this.options.workletOptions??{};ie.processorOptions={...ie.processorOptions??{},frameSamples:this.options.frameSamples},this.audioNode=new AudioWorkletNode(this.ctx,"vad-helper-worklet",ie),this.audioNode.port.onmessage=async re=>{var se;switch((se=re.data)==null?void 0:se.message){case B.Message.AudioFrame:let ne=re.data.data;ne instanceof ArrayBuffer||(ne=new ArrayBuffer(re.data.data.byteLength),new Uint8Array(ne).set(new Uint8Array(re.data.data)));const oe=new Float32Array(ne);await this.processFrame(oe);break}};return}catch(J){console.log("AudioWorklet setup failed, falling back to ScriptProcessor",J)}this.resampler=new V.Resampler({nativeSampleRate:this.ctx.sampleRate,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples??480});const Q=4096;this.audioNode=this.ctx.createScriptProcessor(Q,1,1),this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=0;let ee=!1;this.audioNode.onaudioprocess=async J=>{if(!ee){ee=!0;try{const ie=J.inputBuffer.getChannelData(0);if(J.outputBuffer.getChannelData(0).fill(0),this.resampler){const se=this.resampler.process(ie);for(const ne of se)await this.processFrame(ne)}}catch(ie){console.error("Error processing audio:",ie)}finally{ee=!1}}},this.audioNode.connect(this.gainNode),this.gainNode.connect(this.ctx.destination)}}T.AudioNodeVAD=X}(realTimeVad)),realTimeVad}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(T){var _=dist&&dist.__createBinding||(Object.create?function(L,z,W,X){X===void 0&&(X=W);var Y=Object.getOwnPropertyDescriptor(z,W);(!Y||("get"in Y?!z.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return z[W]}}),Object.defineProperty(L,X,Y)}:function(L,z,W,X){X===void 0&&(X=W),L[X]=z[W]}),E=dist&&dist.__setModuleDefault||(Object.create?function(L,z){Object.defineProperty(L,"default",{enumerable:!0,value:z})}:function(L,z){L.default=z}),C=dist&&dist.__importStar||function(L){if(L&&L.__esModule)return L;var z={};if(L!=null)for(var W in L)W!=="default"&&Object.prototype.hasOwnProperty.call(L,W)&&_(z,L,W);return E(z,L),z};Object.defineProperty(T,"__esModule",{value:!0}),T.NonRealTimeVAD=T.Message=T.FrameProcessor=T.getDefaultRealTimeVADOptions=T.MicVAD=T.DEFAULT_MODEL=T.AudioNodeVAD=T.utils=T.defaultNonRealTimeVADOptions=void 0;const A=C(requireOrtWeb_min()),R=requireAssetPath(),I=requireDefaultModelFetcher(),F=requireFrameProcessor();Object.defineProperty(T,"FrameProcessor",{enumerable:!0,get:function(){return F.FrameProcessor}});const B=requireMessages();Object.defineProperty(T,"Message",{enumerable:!0,get:function(){return B.Message}});const U=requireNonRealTimeVad(),V=requireUtils$1();T.defaultNonRealTimeVADOptions={modelURL:R.baseAssetPath+"silero_vad_legacy.onnx",modelFetcher:I.defaultModelFetcher};class D extends U.PlatformAgnosticNonRealTimeVAD{static async new(z={}){const{modelURL:W,modelFetcher:X}={...T.defaultNonRealTimeVADOptions,...z};return await this._new(()=>X(W),A,z)}}T.NonRealTimeVAD=D,T.utils={audioFileToArray:V.audioFileToArray,minFramesForTargetMS:V.minFramesForTargetMS,arrayBufferToBase64:V.arrayBufferToBase64,encodeWAV:V.encodeWAV};var O=requireRealTimeVad();Object.defineProperty(T,"AudioNodeVAD",{enumerable:!0,get:function(){return O.AudioNodeVAD}}),Object.defineProperty(T,"DEFAULT_MODEL",{enumerable:!0,get:function(){return O.DEFAULT_MODEL}}),Object.defineProperty(T,"MicVAD",{enumerable:!0,get:function(){return O.MicVAD}}),Object.defineProperty(T,"getDefaultRealTimeVADOptions",{enumerable:!0,get:function(){return O.getDefaultRealTimeVADOptions}})}(dist)),dist}var distExports=requireDist();class TaskQueue{constructor(_=3e3){kn(this,"queue",[]);kn(this,"running",!1);kn(this,"taskInterval");kn(this,"pendingComplete",!1);kn(this,"activeTasks",new Set);this.taskInterval=_}addTask(_){this.queue.push(_),this.runNextTask()}clearQueue(){this.queue=[],this.activeTasks.clear(),this.running=!1}async runNextTask(){if(this.running||this.queue.length===0){this.queue.length===0&&this.activeTasks.size===0&&this.pendingComplete&&(this.pendingComplete=!1,await new Promise(E=>setTimeout(E,this.taskInterval)));return}this.running=!0;const _=this.queue.shift();if(_){const E=_();this.activeTasks.add(E);try{await E,await new Promise(C=>setTimeout(C,this.taskInterval))}catch(C){console.error("Task Queue Error",C)}finally{this.activeTasks.delete(E),this.running=!1,this.runNextTask()}}}hasTask(){return this.queue.length>0||this.activeTasks.size>0||this.running}waitForCompletion(){return this.pendingComplete=!0,new Promise(_=>{const E=()=>{this.hasTask()?setTimeout(E,100):_()};E()})}}const audioTaskQueue=new TaskQueue(20),ScreenCaptureContext=reactExports.createContext(void 0);function ScreenCaptureProvider({children:T}){const[_,E]=reactExports.useState(null),[C,A]=reactExports.useState(!1),[R,I]=reactExports.useState(""),F=async()=>{try{let U;if(window.electron){const D={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:await window.electron.ipcRenderer.invoke("get-screen-capture"),minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}},audio:!1};U=await navigator.mediaDevices.getUserMedia(D)}else{const V={video:!0,audio:!1};U=await navigator.mediaDevices.getDisplayMedia(V)}E(U),A(!0),I("")}catch(U){I("Failed to start screen capture"),toaster.create({title:`Failed to start screen capture: ${U}`,type:"error",duration:2e3}),console.error(U)}},B=()=>{_&&(_.getTracks().forEach(U=>U.stop()),E(null),A(!1))};return jsxRuntimeExports.jsx(ScreenCaptureContext.Provider,{value:{stream:_,isStreaming:C,error:R,startCapture:F,stopCapture:B},children:T})}const useScreenCaptureContext=()=>{const T=reactExports.useContext(ScreenCaptureContext);if(T===void 0)throw new Error("useScreenCaptureContext must be used within a ScreenCaptureProvider");return T};function useMediaCapture(){const{stream:T}=useCamera(),{stream:_}=useScreenCaptureContext(),E=reactExports.useCallback(async(A,R)=>{if(!A)return console.warn(`No ${R} stream available`),null;const I=A.getVideoTracks()[0];if(!I)return console.warn(`No video track in ${R} stream`),null;const F=new ImageCapture(I);try{const B=await F.grabFrame(),U=document.createElement("canvas");U.width=B.width,U.height=B.height;const V=U.getContext("2d");return V?(V.drawImage(B,0,0),U.toDataURL("image/jpeg",.8)):(console.error("Failed to get canvas context"),null)}catch(B){return console.error(`Error capturing ${R} frame:`,B),toaster.create({title:`Failed to capture ${R} frame: ${B}`,type:"error",duration:2e3}),null}},[]);return{captureAllMedia:reactExports.useCallback(async()=>{const A=[];if(T){const R=await E(T,"camera");R&&A.push({source:"camera",data:R,mime_type:"image/jpeg"})}if(_){const R=await E(_,"screen");R&&A.push({source:"screen",data:R,mime_type:"image/jpeg"})}return console.log("images: ",A),A},[T,_,E])}}function useSendAudio(){const{sendMessage:T}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendAudioPartition:reactExports.useCallback(async C=>{for(let I=0;I<C.length;I+=4096){const F=Math.min(I+4096,C.length),B=C.slice(I,F);T({type:"mic-audio-data",audio:Array.from(B)})}const R=await _();T({type:"mic-audio-end",images:R})},[T,_])}}var AiStateEnum=(T=>(T.IDLE="idle",T.THINKING_SPEAKING="thinking-speaking",T.INTERRUPTED="interrupted",T.LOADING="loading",T.LISTENING="listening",T.WAITING="waiting",T))(AiStateEnum||{});const initialState="loading",AiStateContext=reactExports.createContext(null);function AiStateProvider({children:T}){const[_,E]=reactExports.useState(initialState),[C,A]=reactExports.useState(!1),R=reactExports.useRef(null),I=reactExports.useCallback(V=>{const D=typeof V=="function"?V(_):V;D==="waiting"?_!=="thinking-speaking"&&(E(D),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{E("idle"),R.current=null},2e3)):(E(D),R.current&&(clearTimeout(R.current),R.current=null))},[_]),F=reactExports.useMemo(()=>({isIdle:_==="idle",isThinkingSpeaking:_==="thinking-speaking",isInterrupted:_==="interrupted",isLoading:_==="loading",isListening:_==="listening",isWaiting:_==="waiting"}),[_]),B=reactExports.useCallback(()=>{I("idle")},[I]);reactExports.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]);const U=reactExports.useMemo(()=>({aiState:_,setAiState:I,backendSynthComplete:C,setBackendSynthComplete:A,...F,resetState:B}),[_,I,C,F,B]);return jsxRuntimeExports.jsx(AiStateContext.Provider,{value:U,children:T})}function useAiState(){const T=reactExports.useContext(AiStateContext);if(!T)throw new Error("useAiState must be used within a AiStateProvider");return T}const DEFAULT_VAD_SETTINGS={positiveSpeechThreshold:50,negativeSpeechThreshold:35,redemptionFrames:35},DEFAULT_VAD_STATE={micOn:!1,autoStopMic:!1,autoStartMicOn:!1,autoStartMicOnConvEnd:!1},VADContext=reactExports.createContext(null);function VADProvider({children:T}){const _=reactExports.useRef(null),E=reactExports.useRef(0),[C,A]=reactExports.useState(DEFAULT_VAD_STATE.micOn),R=reactExports.useRef(!1),[I,F]=useLocalStorage("autoStopMic",DEFAULT_VAD_STATE.autoStopMic),[B,U]=useLocalStorage("vadSettings",DEFAULT_VAD_SETTINGS),[V,D]=useLocalStorage("autoStartMicOn",DEFAULT_VAD_STATE.autoStartMicOn),O=reactExports.useRef(!1),[L,z]=useLocalStorage("autoStartMicOnConvEnd",DEFAULT_VAD_STATE.autoStartMicOnConvEnd),W=reactExports.useRef(!1),[,X]=reactExports.useReducer(Ie=>Ie+1,0),{interrupt:Y}=useInterrupt(),{sendAudioPartition:K}=useSendAudio(),{setSubtitleText:Q}=reactExports.useContext(SubtitleContext),{aiState:ee,setAiState:J}=reactExports.useContext(AiStateContext),ie=reactExports.useRef(Y),re=reactExports.useRef(K),se=reactExports.useRef(ee),ne=reactExports.useRef(Q),oe=reactExports.useRef(J),fe=reactExports.useRef(!1);reactExports.useEffect(()=>{se.current=ee},[ee]),reactExports.useEffect(()=>{ie.current=Y},[Y]),reactExports.useEffect(()=>{re.current=K},[K]),reactExports.useEffect(()=>{ne.current=Q},[Q]),reactExports.useEffect(()=>{oe.current=J},[J]),reactExports.useEffect(()=>{R.current=I},[]),reactExports.useEffect(()=>{O.current=V},[]),reactExports.useEffect(()=>{W.current=L},[]);const he=reactExports.useCallback(Ie=>{E.current=Ie,X()},[]),ge=reactExports.useCallback(()=>{console.log("Speech started"),se.current==="thinking-speaking"&&ie.current(),fe.current=!0,oe.current("listening")},[]),ye=reactExports.useCallback(Ie=>{Ie.isSpeech>E.current&&he(Ie.isSpeech)},[]),we=reactExports.useCallback(Ie=>{fe.current&&(console.log("Speech ended"),audioTaskQueue.clearQueue(),R.current?be():console.log("Auto stop mic is on, keeping mic active"),he(0),re.current(Ie),fe.current=!1)},[]),le=reactExports.useCallback(()=>{fe.current&&(console.log("VAD misfire detected"),he(0),fe.current=!1,(se.current==="interrupted"||se.current==="listening")&&oe.current("idle"),ne.current("The LLM can't hear you."))},[]),de=reactExports.useCallback(Ie=>{U(Ie),_.current&&(be(),setTimeout(()=>{ve()},100))},[]),ce=async()=>{const Ie=await distExports.MicVAD.new({model:"v5",preSpeechPadFrames:20,positiveSpeechThreshold:B.positiveSpeechThreshold/100,negativeSpeechThreshold:B.negativeSpeechThreshold/100,redemptionFrames:B.redemptionFrames,baseAssetPath:"/libs/",onnxWASMBasePath:"/libs/",onSpeechStart:ge,onFrameProcessed:ye,onSpeechEnd:we,onVADMisfire:le});_.current=Ie},ve=reactExports.useCallback(async()=>{console.log("[🔥 startMic 被呼叫！]");try{_.current||(console.log("Initializing VAD"),await ce()),_.current&&(console.log("Starting VAD"),_.current.start()),A(!0)}catch(Ie){console.error("Failed to start VAD:",Ie),toaster.create({title:`Failed to start VAD: ${Ie}`,type:"error",duration:2e3})}},[]),be=reactExports.useCallback(()=>{console.log("Stopping VAD"),_.current?(_.current.pause(),_.current.destroy(),_.current=null,console.log("VAD stopped and destroyed successfully"),he(0)):console.log("VAD instance not found"),A(!1),fe.current=!1},[]),me=reactExports.useCallback(Ie=>{R.current=Ie,F(Ie),X()},[]),xe=reactExports.useCallback(Ie=>{O.current=Ie,D(Ie),X()},[]),Ae=reactExports.useCallback(Ie=>{W.current=Ie,z(Ie),X()},[]),De=reactExports.useMemo(()=>({autoStopMic:R.current,micOn:C,setMicOn:A,setAutoStopMic:me,startMic:ve,stopMic:be,previousTriggeredProbability:E.current,setPreviousTriggeredProbability:he,settings:B,updateSettings:de,autoStartMicOn:O.current,setAutoStartMicOn:xe,autoStartMicOnConvEnd:W.current,setAutoStartMicOnConvEnd:Ae}),[C,ve,be,B,de]);return jsxRuntimeExports.jsx(VADContext.Provider,{value:De,children:T})}function useVAD(){const T=reactExports.useContext(VADContext);if(!T)throw new Error("useVAD must be used within a VADProvider");return T}function useMicToggle(){const{startMic:T,stopMic:_,micOn:E}=useVAD(),{aiState:C,setAiState:A}=useAiState();return{handleMicToggle:async()=>{E?(_(),C==="listening"&&A("idle")):await T()},micOn:E}}function useSwitchCharacter(){const{sendMessage:T}=useWebSocket(),{confName:_,getFilenameByName:E}=useConfig(),{interrupt:C}=useInterrupt(),{stopMic:A}=useVAD(),{setSubtitleText:R}=useSubtitle(),{setAiState:I}=useAiState(),{setModelInfo:F}=useLive2DConfig();return{switchCharacter:reactExports.useCallback(U=>{if(E(_)===U){console.log("Skipping character switch - same configuration file");return}R("New Character Loading..."),C(),A(),I("loading"),F(void 0),T({type:"switch-config",file:U}),console.log("Switch Character fileName: ",U)},[_,E,T,C,A,R,I])}}const createStoreImpl=T=>{let _;const E=new Set,C=(U,V)=>{const D=typeof U=="function"?U(_):U;if(!Object.is(D,_)){const O=_;_=V??(typeof D!="object"||D===null)?D:Object.assign({},_,D),E.forEach(L=>L(_,O))}},A=()=>_,F={setState:C,getState:A,getInitialState:()=>B,subscribe:U=>(E.add(U),()=>E.delete(U))},B=_=T(C,A,F);return F},createStore=T=>T?createStoreImpl(T):createStoreImpl,identity=T=>T;function useStore(T,_=identity){const E=React.useSyncExternalStore(T.subscribe,()=>_(T.getState()),()=>_(T.getInitialState()));return React.useDebugValue(E),E}const createImpl=T=>{const _=createStore(T),E=C=>useStore(_,C);return Object.assign(E,_),E},create=T=>T?createImpl(T):createImpl,useForceIgnoreMouseStore=create(T=>({forceIgnoreMouse:!1,setForceIgnoreMouse:_=>T({forceIgnoreMouse:_})}));function useForceIgnoreMouse(){const{forceIgnoreMouse:T,setForceIgnoreMouse:_}=useForceIgnoreMouseStore();return{forceIgnoreMouse:T,setForceIgnoreMouse:_}}function useIpcHandlers({isPet:T}){const{handleMicToggle:_}=useMicToggle(),{interrupt:E}=useInterrupt(),{modelInfo:C,setModelInfo:A}=useLive2DConfig(),{switchCharacter:R}=useSwitchCharacter(),{setForceIgnoreMouse:I}=useForceIgnoreMouse(),F=reactExports.useCallback(()=>{_()},[_]),B=reactExports.useCallback(()=>{E()},[E]),U=reactExports.useCallback(()=>{C&&A({...C,scrollToResize:!C.scrollToResize})},[C,A]),V=reactExports.useCallback((L,z)=>{R(z)},[R]),D=reactExports.useCallback((L,z)=>{console.log("Force ignore mouse changed:",z),I(z)},[I]),O=reactExports.useCallback(()=>{window.api.toggleForceIgnoreMouse()},[]);reactExports.useEffect(()=>{var L;if((L=window.electron)!=null&&L.ipcRenderer&&T)return window.electron.ipcRenderer.removeAllListeners("mic-toggle"),window.electron.ipcRenderer.removeAllListeners("interrupt"),window.electron.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),window.electron.ipcRenderer.removeAllListeners("switch-character"),window.electron.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),window.electron.ipcRenderer.removeAllListeners("force-ignore-mouse-changed"),window.electron.ipcRenderer.on("mic-toggle",F),window.electron.ipcRenderer.on("interrupt",B),window.electron.ipcRenderer.on("toggle-scroll-to-resize",U),window.electron.ipcRenderer.on("switch-character",V),window.electron.ipcRenderer.on("toggle-force-ignore-mouse",O),window.electron.ipcRenderer.on("force-ignore-mouse-changed",D),()=>{var z,W,X,Y,K,Q;(z=window.electron)==null||z.ipcRenderer.removeAllListeners("mic-toggle"),(W=window.electron)==null||W.ipcRenderer.removeAllListeners("interrupt"),(X=window.electron)==null||X.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),(Y=window.electron)==null||Y.ipcRenderer.removeAllListeners("switch-character"),(K=window.electron)==null||K.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),(Q=window.electron)==null||Q.ipcRenderer.removeAllListeners("force-ignore-mouse-changed")}},[F,B,U,V,O,D,T])}var ENV=(T=>(T[T.WEBGL_LEGACY=0]="WEBGL_LEGACY",T[T.WEBGL=1]="WEBGL",T[T.WEBGL2=2]="WEBGL2",T))(ENV||{}),RENDERER_TYPE=(T=>(T[T.UNKNOWN=0]="UNKNOWN",T[T.WEBGL=1]="WEBGL",T[T.CANVAS=2]="CANVAS",T))(RENDERER_TYPE||{}),BUFFER_BITS=(T=>(T[T.COLOR=16384]="COLOR",T[T.DEPTH=256]="DEPTH",T[T.STENCIL=1024]="STENCIL",T))(BUFFER_BITS||{}),BLEND_MODES=(T=>(T[T.NORMAL=0]="NORMAL",T[T.ADD=1]="ADD",T[T.MULTIPLY=2]="MULTIPLY",T[T.SCREEN=3]="SCREEN",T[T.OVERLAY=4]="OVERLAY",T[T.DARKEN=5]="DARKEN",T[T.LIGHTEN=6]="LIGHTEN",T[T.COLOR_DODGE=7]="COLOR_DODGE",T[T.COLOR_BURN=8]="COLOR_BURN",T[T.HARD_LIGHT=9]="HARD_LIGHT",T[T.SOFT_LIGHT=10]="SOFT_LIGHT",T[T.DIFFERENCE=11]="DIFFERENCE",T[T.EXCLUSION=12]="EXCLUSION",T[T.HUE=13]="HUE",T[T.SATURATION=14]="SATURATION",T[T.COLOR=15]="COLOR",T[T.LUMINOSITY=16]="LUMINOSITY",T[T.NORMAL_NPM=17]="NORMAL_NPM",T[T.ADD_NPM=18]="ADD_NPM",T[T.SCREEN_NPM=19]="SCREEN_NPM",T[T.NONE=20]="NONE",T[T.SRC_OVER=0]="SRC_OVER",T[T.SRC_IN=21]="SRC_IN",T[T.SRC_OUT=22]="SRC_OUT",T[T.SRC_ATOP=23]="SRC_ATOP",T[T.DST_OVER=24]="DST_OVER",T[T.DST_IN=25]="DST_IN",T[T.DST_OUT=26]="DST_OUT",T[T.DST_ATOP=27]="DST_ATOP",T[T.ERASE=26]="ERASE",T[T.SUBTRACT=28]="SUBTRACT",T[T.XOR=29]="XOR",T))(BLEND_MODES||{}),DRAW_MODES=(T=>(T[T.POINTS=0]="POINTS",T[T.LINES=1]="LINES",T[T.LINE_LOOP=2]="LINE_LOOP",T[T.LINE_STRIP=3]="LINE_STRIP",T[T.TRIANGLES=4]="TRIANGLES",T[T.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",T[T.TRIANGLE_FAN=6]="TRIANGLE_FAN",T))(DRAW_MODES||{}),FORMATS=(T=>(T[T.RGBA=6408]="RGBA",T[T.RGB=6407]="RGB",T[T.RG=33319]="RG",T[T.RED=6403]="RED",T[T.RGBA_INTEGER=36249]="RGBA_INTEGER",T[T.RGB_INTEGER=36248]="RGB_INTEGER",T[T.RG_INTEGER=33320]="RG_INTEGER",T[T.RED_INTEGER=36244]="RED_INTEGER",T[T.ALPHA=6406]="ALPHA",T[T.LUMINANCE=6409]="LUMINANCE",T[T.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",T[T.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",T[T.DEPTH_STENCIL=34041]="DEPTH_STENCIL",T))(FORMATS||{}),TARGETS=(T=>(T[T.TEXTURE_2D=3553]="TEXTURE_2D",T[T.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",T[T.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",T[T.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",T[T.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",T[T.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",T[T.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",T[T.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",T[T.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",T))(TARGETS||{}),TYPES=(T=>(T[T.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",T[T.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",T[T.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",T[T.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",T[T.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",T[T.UNSIGNED_INT=5125]="UNSIGNED_INT",T[T.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",T[T.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",T[T.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",T[T.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",T[T.BYTE=5120]="BYTE",T[T.SHORT=5122]="SHORT",T[T.INT=5124]="INT",T[T.FLOAT=5126]="FLOAT",T[T.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",T[T.HALF_FLOAT=36193]="HALF_FLOAT",T))(TYPES||{}),SAMPLER_TYPES=(T=>(T[T.FLOAT=0]="FLOAT",T[T.INT=1]="INT",T[T.UINT=2]="UINT",T))(SAMPLER_TYPES||{}),SCALE_MODES=(T=>(T[T.NEAREST=0]="NEAREST",T[T.LINEAR=1]="LINEAR",T))(SCALE_MODES||{}),WRAP_MODES=(T=>(T[T.CLAMP=33071]="CLAMP",T[T.REPEAT=10497]="REPEAT",T[T.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",T))(WRAP_MODES||{}),MIPMAP_MODES=(T=>(T[T.OFF=0]="OFF",T[T.POW2=1]="POW2",T[T.ON=2]="ON",T[T.ON_MANUAL=3]="ON_MANUAL",T))(MIPMAP_MODES||{}),ALPHA_MODES=(T=>(T[T.NPM=0]="NPM",T[T.UNPACK=1]="UNPACK",T[T.PMA=2]="PMA",T[T.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",T[T.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",T[T.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",T))(ALPHA_MODES||{}),CLEAR_MODES=(T=>(T[T.NO=0]="NO",T[T.YES=1]="YES",T[T.AUTO=2]="AUTO",T[T.BLEND=0]="BLEND",T[T.CLEAR=1]="CLEAR",T[T.BLIT=2]="BLIT",T))(CLEAR_MODES||{}),GC_MODES=(T=>(T[T.AUTO=0]="AUTO",T[T.MANUAL=1]="MANUAL",T))(GC_MODES||{}),PRECISION=(T=>(T.LOW="lowp",T.MEDIUM="mediump",T.HIGH="highp",T))(PRECISION||{}),MASK_TYPES=(T=>(T[T.NONE=0]="NONE",T[T.SCISSOR=1]="SCISSOR",T[T.STENCIL=2]="STENCIL",T[T.SPRITE=3]="SPRITE",T[T.COLOR=4]="COLOR",T))(MASK_TYPES||{}),MSAA_QUALITY=(T=>(T[T.NONE=0]="NONE",T[T.LOW=2]="LOW",T[T.MEDIUM=4]="MEDIUM",T[T.HIGH=8]="HIGH",T))(MSAA_QUALITY||{}),BUFFER_TYPE=(T=>(T[T.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",T[T.ARRAY_BUFFER=34962]="ARRAY_BUFFER",T[T.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",T))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(T,_)=>{const E=document.createElement("canvas");return E.width=T,E.height=_,E},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(T,_)=>fetch(T,_),parseXML:T=>new DOMParser().parseFromString(T,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(T){return typeof T<"u"&&T.platform==="MacIntel"&&typeof T.maxTouchPoints=="number"&&T.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(T){return function(_){return _.test(T)}}function isMobile$1(T){var _={userAgent:"",platform:"",maxTouchPoints:0};!T&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof T=="string"?_.userAgent=T:T&&T.userAgent&&(_={userAgent:T.userAgent,platform:T.platform,maxTouchPoints:T.maxTouchPoints||0});var E=_.userAgent,C=E.split("[FBAN");typeof C[1]<"u"&&(E=C[0]),C=E.split("Twitter"),typeof C[1]<"u"&&(E=C[0]);var A=createMatch(E),R={apple:{phone:A(appleIphone)&&!A(windowsPhone),ipod:A(appleIpod),tablet:!A(appleIphone)&&(A(appleTablet)||isAppleTabletOnIos13(_))&&!A(windowsPhone),universal:A(appleUniversal),device:(A(appleIphone)||A(appleIpod)||A(appleTablet)||A(appleUniversal)||isAppleTabletOnIos13(_))&&!A(windowsPhone)},amazon:{phone:A(amazonPhone),tablet:!A(amazonPhone)&&A(amazonTablet),device:A(amazonPhone)||A(amazonTablet)},android:{phone:!A(windowsPhone)&&A(amazonPhone)||!A(windowsPhone)&&A(androidPhone),tablet:!A(windowsPhone)&&!A(amazonPhone)&&!A(androidPhone)&&(A(amazonTablet)||A(androidTablet)),device:!A(windowsPhone)&&(A(amazonPhone)||A(amazonTablet)||A(androidPhone)||A(androidTablet))||A(/\bokhttp\b/i)},windows:{phone:A(windowsPhone),tablet:A(windowsTablet),device:A(windowsPhone)||A(windowsTablet)},other:{blackberry:A(otherBlackBerry),blackberry10:A(otherBlackBerry10),opera:A(otherOpera),firefox:A(otherFirefox),chrome:A(otherChrome),device:A(otherBlackBerry)||A(otherBlackBerry10)||A(otherOpera)||A(otherFirefox)||A(otherChrome)},any:!1,phone:!1,tablet:!1};return R.any=R.apple.device||R.android.device||R.windows.device||R.other.device,R.phone=R.apple.phone||R.android.phone||R.windows.phone,R.tablet=R.apple.tablet||R.android.tablet||R.windows.tablet,R}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(T){var _=Object.prototype.hasOwnProperty,E="~";function C(){}Object.create&&(C.prototype=Object.create(null),new C().__proto__||(E=!1));function A(B,U,V){this.fn=B,this.context=U,this.once=V||!1}function R(B,U,V,D,O){if(typeof V!="function")throw new TypeError("The listener must be a function");var L=new A(V,D||B,O),z=E?E+U:U;return B._events[z]?B._events[z].fn?B._events[z]=[B._events[z],L]:B._events[z].push(L):(B._events[z]=L,B._eventsCount++),B}function I(B,U){--B._eventsCount===0?B._events=new C:delete B._events[U]}function F(){this._events=new C,this._eventsCount=0}F.prototype.eventNames=function(){var U=[],V,D;if(this._eventsCount===0)return U;for(D in V=this._events)_.call(V,D)&&U.push(E?D.slice(1):D);return Object.getOwnPropertySymbols?U.concat(Object.getOwnPropertySymbols(V)):U},F.prototype.listeners=function(U){var V=E?E+U:U,D=this._events[V];if(!D)return[];if(D.fn)return[D.fn];for(var O=0,L=D.length,z=new Array(L);O<L;O++)z[O]=D[O].fn;return z},F.prototype.listenerCount=function(U){var V=E?E+U:U,D=this._events[V];return D?D.fn?1:D.length:0},F.prototype.emit=function(U,V,D,O,L,z){var W=E?E+U:U;if(!this._events[W])return!1;var X=this._events[W],Y=arguments.length,K,Q;if(X.fn){switch(X.once&&this.removeListener(U,X.fn,void 0,!0),Y){case 1:return X.fn.call(X.context),!0;case 2:return X.fn.call(X.context,V),!0;case 3:return X.fn.call(X.context,V,D),!0;case 4:return X.fn.call(X.context,V,D,O),!0;case 5:return X.fn.call(X.context,V,D,O,L),!0;case 6:return X.fn.call(X.context,V,D,O,L,z),!0}for(Q=1,K=new Array(Y-1);Q<Y;Q++)K[Q-1]=arguments[Q];X.fn.apply(X.context,K)}else{var ee=X.length,J;for(Q=0;Q<ee;Q++)switch(X[Q].once&&this.removeListener(U,X[Q].fn,void 0,!0),Y){case 1:X[Q].fn.call(X[Q].context);break;case 2:X[Q].fn.call(X[Q].context,V);break;case 3:X[Q].fn.call(X[Q].context,V,D);break;case 4:X[Q].fn.call(X[Q].context,V,D,O);break;default:if(!K)for(J=1,K=new Array(Y-1);J<Y;J++)K[J-1]=arguments[J];X[Q].fn.apply(X[Q].context,K)}}return!0},F.prototype.on=function(U,V,D){return R(this,U,V,D,!1)},F.prototype.once=function(U,V,D){return R(this,U,V,D,!0)},F.prototype.removeListener=function(U,V,D,O){var L=E?E+U:U;if(!this._events[L])return this;if(!V)return I(this,L),this;var z=this._events[L];if(z.fn)z.fn===V&&(!O||z.once)&&(!D||z.context===D)&&I(this,L);else{for(var W=0,X=[],Y=z.length;W<Y;W++)(z[W].fn!==V||O&&!z[W].once||D&&z[W].context!==D)&&X.push(z[W]);X.length?this._events[L]=X.length===1?X[0]:X:I(this,L)}return this},F.prototype.removeAllListeners=function(U){var V;return U?(V=E?E+U:U,this._events[V]&&I(this,V)):(this._events=new C,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=E,F.EventEmitter=F,T.exports=F}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$1={exports:{}},hasRequiredEarcut;function requireEarcut(){if(hasRequiredEarcut)return earcut$1.exports;hasRequiredEarcut=1,earcut$1.exports=T,earcut$1.exports.default=T;function T(le,de,ce){ce=ce||2;var ve=de&&de.length,be=ve?de[0]*ce:le.length,me=_(le,0,be,ce,!0),xe=[];if(!me||me.next===me.prev)return xe;var Ae,De,Ie,je,Ye,ke,Le;if(ve&&(me=B(le,de,me,ce)),le.length>80*ce){Ae=Ie=le[0],De=je=le[1];for(var Ne=ce;Ne<be;Ne+=ce)Ye=le[Ne],ke=le[Ne+1],Ye<Ae&&(Ae=Ye),ke<De&&(De=ke),Ye>Ie&&(Ie=Ye),ke>je&&(je=ke);Le=Math.max(Ie-Ae,je-De),Le=Le!==0?32767/Le:0}return C(me,xe,ce,Ae,De,Le,0),xe}function _(le,de,ce,ve,be){var me,xe;if(be===we(le,de,ce,ve)>0)for(me=de;me<ce;me+=ve)xe=he(me,le[me],le[me+1],xe);else for(me=ce-ve;me>=de;me-=ve)xe=he(me,le[me],le[me+1],xe);return xe&&ee(xe,xe.next)&&(ge(xe),xe=xe.next),xe}function E(le,de){if(!le)return le;de||(de=le);var ce=le,ve;do if(ve=!1,!ce.steiner&&(ee(ce,ce.next)||Q(ce.prev,ce,ce.next)===0)){if(ge(ce),ce=de=ce.prev,ce===ce.next)break;ve=!0}else ce=ce.next;while(ve||ce!==de);return de}function C(le,de,ce,ve,be,me,xe){if(le){!xe&&me&&L(le,ve,be,me);for(var Ae=le,De,Ie;le.prev!==le.next;){if(De=le.prev,Ie=le.next,me?R(le,ve,be,me):A(le)){de.push(De.i/ce|0),de.push(le.i/ce|0),de.push(Ie.i/ce|0),ge(le),le=Ie.next,Ae=Ie.next;continue}if(le=Ie,le===Ae){xe?xe===1?(le=I(E(le),de,ce),C(le,de,ce,ve,be,me,2)):xe===2&&F(le,de,ce,ve,be,me):C(E(le),de,ce,ve,be,me,1);break}}}}function A(le){var de=le.prev,ce=le,ve=le.next;if(Q(de,ce,ve)>=0)return!1;for(var be=de.x,me=ce.x,xe=ve.x,Ae=de.y,De=ce.y,Ie=ve.y,je=be<me?be<xe?be:xe:me<xe?me:xe,Ye=Ae<De?Ae<Ie?Ae:Ie:De<Ie?De:Ie,ke=be>me?be>xe?be:xe:me>xe?me:xe,Le=Ae>De?Ae>Ie?Ae:Ie:De>Ie?De:Ie,Ne=ve.next;Ne!==de;){if(Ne.x>=je&&Ne.x<=ke&&Ne.y>=Ye&&Ne.y<=Le&&Y(be,Ae,me,De,xe,Ie,Ne.x,Ne.y)&&Q(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.next}return!0}function R(le,de,ce,ve){var be=le.prev,me=le,xe=le.next;if(Q(be,me,xe)>=0)return!1;for(var Ae=be.x,De=me.x,Ie=xe.x,je=be.y,Ye=me.y,ke=xe.y,Le=Ae<De?Ae<Ie?Ae:Ie:De<Ie?De:Ie,Ne=je<Ye?je<ke?je:ke:Ye<ke?Ye:ke,Qe=Ae>De?Ae>Ie?Ae:Ie:De>Ie?De:Ie,et=je>Ye?je>ke?je:ke:Ye>ke?Ye:ke,Je=W(Le,Ne,de,ce,ve),ut=W(Qe,et,de,ce,ve),lt=le.prevZ,it=le.nextZ;lt&&lt.z>=Je&&it&&it.z<=ut;){if(lt.x>=Le&&lt.x<=Qe&&lt.y>=Ne&&lt.y<=et&&lt!==be&&lt!==xe&&Y(Ae,je,De,Ye,Ie,ke,lt.x,lt.y)&&Q(lt.prev,lt,lt.next)>=0||(lt=lt.prevZ,it.x>=Le&&it.x<=Qe&&it.y>=Ne&&it.y<=et&&it!==be&&it!==xe&&Y(Ae,je,De,Ye,Ie,ke,it.x,it.y)&&Q(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;lt&&lt.z>=Je;){if(lt.x>=Le&&lt.x<=Qe&&lt.y>=Ne&&lt.y<=et&&lt!==be&&lt!==xe&&Y(Ae,je,De,Ye,Ie,ke,lt.x,lt.y)&&Q(lt.prev,lt,lt.next)>=0)return!1;lt=lt.prevZ}for(;it&&it.z<=ut;){if(it.x>=Le&&it.x<=Qe&&it.y>=Ne&&it.y<=et&&it!==be&&it!==xe&&Y(Ae,je,De,Ye,Ie,ke,it.x,it.y)&&Q(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function I(le,de,ce){var ve=le;do{var be=ve.prev,me=ve.next.next;!ee(be,me)&&J(be,ve,ve.next,me)&&ne(be,me)&&ne(me,be)&&(de.push(be.i/ce|0),de.push(ve.i/ce|0),de.push(me.i/ce|0),ge(ve),ge(ve.next),ve=le=me),ve=ve.next}while(ve!==le);return E(ve)}function F(le,de,ce,ve,be,me){var xe=le;do{for(var Ae=xe.next.next;Ae!==xe.prev;){if(xe.i!==Ae.i&&K(xe,Ae)){var De=fe(xe,Ae);xe=E(xe,xe.next),De=E(De,De.next),C(xe,de,ce,ve,be,me,0),C(De,de,ce,ve,be,me,0);return}Ae=Ae.next}xe=xe.next}while(xe!==le)}function B(le,de,ce,ve){var be=[],me,xe,Ae,De,Ie;for(me=0,xe=de.length;me<xe;me++)Ae=de[me]*ve,De=me<xe-1?de[me+1]*ve:le.length,Ie=_(le,Ae,De,ve,!1),Ie===Ie.next&&(Ie.steiner=!0),be.push(X(Ie));for(be.sort(U),me=0;me<be.length;me++)ce=V(be[me],ce);return ce}function U(le,de){return le.x-de.x}function V(le,de){var ce=D(le,de);if(!ce)return de;var ve=fe(ce,le);return E(ve,ve.next),E(ce,ce.next)}function D(le,de){var ce=de,ve=le.x,be=le.y,me=-1/0,xe;do{if(be<=ce.y&&be>=ce.next.y&&ce.next.y!==ce.y){var Ae=ce.x+(be-ce.y)*(ce.next.x-ce.x)/(ce.next.y-ce.y);if(Ae<=ve&&Ae>me&&(me=Ae,xe=ce.x<ce.next.x?ce:ce.next,Ae===ve))return xe}ce=ce.next}while(ce!==de);if(!xe)return null;var De=xe,Ie=xe.x,je=xe.y,Ye=1/0,ke;ce=xe;do ve>=ce.x&&ce.x>=Ie&&ve!==ce.x&&Y(be<je?ve:me,be,Ie,je,be<je?me:ve,be,ce.x,ce.y)&&(ke=Math.abs(be-ce.y)/(ve-ce.x),ne(ce,le)&&(ke<Ye||ke===Ye&&(ce.x>xe.x||ce.x===xe.x&&O(xe,ce)))&&(xe=ce,Ye=ke)),ce=ce.next;while(ce!==De);return xe}function O(le,de){return Q(le.prev,le,de.prev)<0&&Q(de.next,le,le.next)<0}function L(le,de,ce,ve){var be=le;do be.z===0&&(be.z=W(be.x,be.y,de,ce,ve)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next;while(be!==le);be.prevZ.nextZ=null,be.prevZ=null,z(be)}function z(le){var de,ce,ve,be,me,xe,Ae,De,Ie=1;do{for(ce=le,le=null,me=null,xe=0;ce;){for(xe++,ve=ce,Ae=0,de=0;de<Ie&&(Ae++,ve=ve.nextZ,!!ve);de++);for(De=Ie;Ae>0||De>0&&ve;)Ae!==0&&(De===0||!ve||ce.z<=ve.z)?(be=ce,ce=ce.nextZ,Ae--):(be=ve,ve=ve.nextZ,De--),me?me.nextZ=be:le=be,be.prevZ=me,me=be;ce=ve}me.nextZ=null,Ie*=2}while(xe>1);return le}function W(le,de,ce,ve,be){return le=(le-ce)*be|0,de=(de-ve)*be|0,le=(le|le<<8)&16711935,le=(le|le<<4)&252645135,le=(le|le<<2)&858993459,le=(le|le<<1)&1431655765,de=(de|de<<8)&16711935,de=(de|de<<4)&252645135,de=(de|de<<2)&858993459,de=(de|de<<1)&1431655765,le|de<<1}function X(le){var de=le,ce=le;do(de.x<ce.x||de.x===ce.x&&de.y<ce.y)&&(ce=de),de=de.next;while(de!==le);return ce}function Y(le,de,ce,ve,be,me,xe,Ae){return(be-xe)*(de-Ae)>=(le-xe)*(me-Ae)&&(le-xe)*(ve-Ae)>=(ce-xe)*(de-Ae)&&(ce-xe)*(me-Ae)>=(be-xe)*(ve-Ae)}function K(le,de){return le.next.i!==de.i&&le.prev.i!==de.i&&!se(le,de)&&(ne(le,de)&&ne(de,le)&&oe(le,de)&&(Q(le.prev,le,de.prev)||Q(le,de.prev,de))||ee(le,de)&&Q(le.prev,le,le.next)>0&&Q(de.prev,de,de.next)>0)}function Q(le,de,ce){return(de.y-le.y)*(ce.x-de.x)-(de.x-le.x)*(ce.y-de.y)}function ee(le,de){return le.x===de.x&&le.y===de.y}function J(le,de,ce,ve){var be=re(Q(le,de,ce)),me=re(Q(le,de,ve)),xe=re(Q(ce,ve,le)),Ae=re(Q(ce,ve,de));return!!(be!==me&&xe!==Ae||be===0&&ie(le,ce,de)||me===0&&ie(le,ve,de)||xe===0&&ie(ce,le,ve)||Ae===0&&ie(ce,de,ve))}function ie(le,de,ce){return de.x<=Math.max(le.x,ce.x)&&de.x>=Math.min(le.x,ce.x)&&de.y<=Math.max(le.y,ce.y)&&de.y>=Math.min(le.y,ce.y)}function re(le){return le>0?1:le<0?-1:0}function se(le,de){var ce=le;do{if(ce.i!==le.i&&ce.next.i!==le.i&&ce.i!==de.i&&ce.next.i!==de.i&&J(ce,ce.next,le,de))return!0;ce=ce.next}while(ce!==le);return!1}function ne(le,de){return Q(le.prev,le,le.next)<0?Q(le,de,le.next)>=0&&Q(le,le.prev,de)>=0:Q(le,de,le.prev)<0||Q(le,le.next,de)<0}function oe(le,de){var ce=le,ve=!1,be=(le.x+de.x)/2,me=(le.y+de.y)/2;do ce.y>me!=ce.next.y>me&&ce.next.y!==ce.y&&be<(ce.next.x-ce.x)*(me-ce.y)/(ce.next.y-ce.y)+ce.x&&(ve=!ve),ce=ce.next;while(ce!==le);return ve}function fe(le,de){var ce=new ye(le.i,le.x,le.y),ve=new ye(de.i,de.x,de.y),be=le.next,me=de.prev;return le.next=de,de.prev=le,ce.next=be,be.prev=ce,ve.next=ce,ce.prev=ve,me.next=ve,ve.prev=me,ve}function he(le,de,ce,ve){var be=new ye(le,de,ce);return ve?(be.next=ve.next,be.prev=ve,ve.next.prev=be,ve.next=be):(be.prev=be,be.next=be),be}function ge(le){le.next.prev=le.prev,le.prev.next=le.next,le.prevZ&&(le.prevZ.nextZ=le.nextZ),le.nextZ&&(le.nextZ.prevZ=le.prevZ)}function ye(le,de,ce){this.i=le,this.x=de,this.y=ce,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(le,de,ce,ve){var be=de&&de.length,me=be?de[0]*ce:le.length,xe=Math.abs(we(le,0,me,ce));if(be)for(var Ae=0,De=de.length;Ae<De;Ae++){var Ie=de[Ae]*ce,je=Ae<De-1?de[Ae+1]*ce:le.length;xe-=Math.abs(we(le,Ie,je,ce))}var Ye=0;for(Ae=0;Ae<ve.length;Ae+=3){var ke=ve[Ae]*ce,Le=ve[Ae+1]*ce,Ne=ve[Ae+2]*ce;Ye+=Math.abs((le[ke]-le[Ne])*(le[Le+1]-le[ke+1])-(le[ke]-le[Le])*(le[Ne+1]-le[ke+1]))}return xe===0&&Ye===0?0:Math.abs((Ye-xe)/xe)};function we(le,de,ce,ve){for(var be=0,me=de,xe=ce-ve;me<ce;me+=ve)be+=(le[xe]-le[me])*(le[me+1]+le[xe+1]),xe=me;return be}return T.flatten=function(le){for(var de=le[0][0].length,ce={vertices:[],holes:[],dimensions:de},ve=0,be=0;be<le.length;be++){for(var me=0;me<le[be].length;me++)for(var xe=0;xe<de;xe++)ce.vertices.push(le[be][me][xe]);be>0&&(ve+=le[be-1].length,ce.holes.push(ve))}return ce},earcut$1.exports}var earcutExports=requireEarcut();const earcut=getDefaultExportFromCjs(earcutExports);var url$1={},punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var punycode=punycode$1.exports,hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,function(T,_){(function(E){var C=_&&!_.nodeType&&_,A=T&&!T.nodeType&&T,R=typeof commonjsGlobal=="object"&&commonjsGlobal;(R.global===R||R.window===R||R.self===R)&&(E=R);var I,F=2147483647,B=36,U=1,V=26,D=38,O=700,L=72,z=128,W="-",X=/^xn--/,Y=/[^\x20-\x7E]/,K=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ee=B-U,J=Math.floor,ie=String.fromCharCode,re;function se(be){throw new RangeError(Q[be])}function ne(be,me){for(var xe=be.length,Ae=[];xe--;)Ae[xe]=me(be[xe]);return Ae}function oe(be,me){var xe=be.split("@"),Ae="";xe.length>1&&(Ae=xe[0]+"@",be=xe[1]),be=be.replace(K,".");var De=be.split("."),Ie=ne(De,me).join(".");return Ae+Ie}function fe(be){for(var me=[],xe=0,Ae=be.length,De,Ie;xe<Ae;)De=be.charCodeAt(xe++),De>=55296&&De<=56319&&xe<Ae?(Ie=be.charCodeAt(xe++),(Ie&64512)==56320?me.push(((De&1023)<<10)+(Ie&1023)+65536):(me.push(De),xe--)):me.push(De);return me}function he(be){return ne(be,function(me){var xe="";return me>65535&&(me-=65536,xe+=ie(me>>>10&1023|55296),me=56320|me&1023),xe+=ie(me),xe}).join("")}function ge(be){return be-48<10?be-22:be-65<26?be-65:be-97<26?be-97:B}function ye(be,me){return be+22+75*(be<26)-((me!=0)<<5)}function we(be,me,xe){var Ae=0;for(be=xe?J(be/O):be>>1,be+=J(be/me);be>ee*V>>1;Ae+=B)be=J(be/ee);return J(Ae+(ee+1)*be/(be+D))}function le(be){var me=[],xe=be.length,Ae,De=0,Ie=z,je=L,Ye,ke,Le,Ne,Qe,et,Je,ut,lt;for(Ye=be.lastIndexOf(W),Ye<0&&(Ye=0),ke=0;ke<Ye;++ke)be.charCodeAt(ke)>=128&&se("not-basic"),me.push(be.charCodeAt(ke));for(Le=Ye>0?Ye+1:0;Le<xe;){for(Ne=De,Qe=1,et=B;Le>=xe&&se("invalid-input"),Je=ge(be.charCodeAt(Le++)),(Je>=B||Je>J((F-De)/Qe))&&se("overflow"),De+=Je*Qe,ut=et<=je?U:et>=je+V?V:et-je,!(Je<ut);et+=B)lt=B-ut,Qe>J(F/lt)&&se("overflow"),Qe*=lt;Ae=me.length+1,je=we(De-Ne,Ae,Ne==0),J(De/Ae)>F-Ie&&se("overflow"),Ie+=J(De/Ae),De%=Ae,me.splice(De++,0,Ie)}return he(me)}function de(be){var me,xe,Ae,De,Ie,je,Ye,ke,Le,Ne,Qe,et=[],Je,ut,lt,it;for(be=fe(be),Je=be.length,me=z,xe=0,Ie=L,je=0;je<Je;++je)Qe=be[je],Qe<128&&et.push(ie(Qe));for(Ae=De=et.length,De&&et.push(W);Ae<Je;){for(Ye=F,je=0;je<Je;++je)Qe=be[je],Qe>=me&&Qe<Ye&&(Ye=Qe);for(ut=Ae+1,Ye-me>J((F-xe)/ut)&&se("overflow"),xe+=(Ye-me)*ut,me=Ye,je=0;je<Je;++je)if(Qe=be[je],Qe<me&&++xe>F&&se("overflow"),Qe==me){for(ke=xe,Le=B;Ne=Le<=Ie?U:Le>=Ie+V?V:Le-Ie,!(ke<Ne);Le+=B)it=ke-Ne,lt=B-Ne,et.push(ie(ye(Ne+it%lt,0))),ke=J(it/lt);et.push(ie(ye(ke,0))),Ie=we(xe,ut,Ae==De),xe=0,++Ae}++xe,++me}return et.join("")}function ce(be){return oe(be,function(me){return X.test(me)?le(me.slice(4).toLowerCase()):me})}function ve(be){return oe(be,function(me){return Y.test(me)?"xn--"+de(me):me})}if(I={version:"1.4.1",ucs2:{decode:fe,encode:he},decode:le,encode:de,toASCII:ve,toUnicode:ce},C&&A)if(T.exports==C)A.exports=I;else for(re in I)I.hasOwnProperty(re)&&(C[re]=I[re]);else E.punycode=I})(punycode)}(punycode$1,punycode$1.exports)),punycode$1.exports}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var T=typeof Map=="function"&&Map.prototype,_=Object.getOwnPropertyDescriptor&&T?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,E=T&&_&&typeof _.get=="function"?_.get:null,C=T&&Map.prototype.forEach,A=typeof Set=="function"&&Set.prototype,R=Object.getOwnPropertyDescriptor&&A?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,I=A&&R&&typeof R.get=="function"?R.get:null,F=A&&Set.prototype.forEach,B=typeof WeakMap=="function"&&WeakMap.prototype,U=B?WeakMap.prototype.has:null,V=typeof WeakSet=="function"&&WeakSet.prototype,D=V?WeakSet.prototype.has:null,O=typeof WeakRef=="function"&&WeakRef.prototype,L=O?WeakRef.prototype.deref:null,z=Boolean.prototype.valueOf,W=Object.prototype.toString,X=Function.prototype.toString,Y=String.prototype.match,K=String.prototype.slice,Q=String.prototype.replace,ee=String.prototype.toUpperCase,J=String.prototype.toLowerCase,ie=RegExp.prototype.test,re=Array.prototype.concat,se=Array.prototype.join,ne=Array.prototype.slice,oe=Math.floor,fe=typeof BigInt=="function"?BigInt.prototype.valueOf:null,he=Object.getOwnPropertySymbols,ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ye=typeof Symbol=="function"&&typeof Symbol.iterator=="object",we=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ye||!0)?Symbol.toStringTag:null,le=Object.prototype.propertyIsEnumerable,de=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ue){return Ue.__proto__}:null);function ce(Ue,We){if(Ue===1/0||Ue===-1/0||Ue!==Ue||Ue&&Ue>-1e3&&Ue<1e3||ie.call(/e/,We))return We;var Ft=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ue=="number"){var Lt=Ue<0?-oe(-Ue):oe(Ue);if(Lt!==Ue){var gt=String(Lt),Ct=K.call(We,gt.length+1);return Q.call(gt,Ft,"$&_")+"."+Q.call(Q.call(Ct,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Q.call(We,Ft,"$&_")}var ve=require$$0,be=ve.custom,me=Je(be)?be:null,xe={__proto__:null,double:'"',single:"'"},Ae={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};objectInspect=function Ue(We,Ft,Lt,gt){var Ct=Ft||{};if(it(Ct,"quoteStyle")&&!it(xe,Ct.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(it(Ct,"maxStringLength")&&(typeof Ct.maxStringLength=="number"?Ct.maxStringLength<0&&Ct.maxStringLength!==1/0:Ct.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var pr=it(Ct,"customInspect")?Ct.customInspect:!0;if(typeof pr!="boolean"&&pr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(it(Ct,"indent")&&Ct.indent!==null&&Ct.indent!=="	"&&!(parseInt(Ct.indent,10)===Ct.indent&&Ct.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(it(Ct,"numericSeparator")&&typeof Ct.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var cr=Ct.numericSeparator;if(typeof We>"u")return"undefined";if(We===null)return"null";if(typeof We=="boolean")return We?"true":"false";if(typeof We=="string")return bn(We,Ct);if(typeof We=="number"){if(We===0)return 1/0/We>0?"0":"-0";var vt=String(We);return cr?ce(We,vt):vt}if(typeof We=="bigint"){var xt=String(We)+"n";return cr?ce(We,xt):xt}var Et=typeof Ct.depth>"u"?5:Ct.depth;if(typeof Lt>"u"&&(Lt=0),Lt>=Et&&Et>0&&typeof We=="object")return je(We)?"[Array]":"[Object]";var kr=fr(Ct,Lt);if(typeof gt>"u")gt=[];else if(ar(gt,We)>=0)return"[Circular]";function dr(ze,Ke,st){if(Ke&&(gt=ne.call(gt),gt.push(Ke)),st){var mt={depth:Ct.depth};return it(Ct,"quoteStyle")&&(mt.quoteStyle=Ct.quoteStyle),Ue(ze,mt,Lt+1,gt)}return Ue(ze,Ct,Lt+1,gt)}if(typeof We=="function"&&!ke(We)){var an=Yt(We),_n=St(We,dr);return"[Function"+(an?": "+an:" (anonymous)")+"]"+(_n.length>0?" { "+se.call(_n,", ")+" }":"")}if(Je(We)){var Vr=ye?Q.call(String(We),/^(Symbol\(.*\))_[^)]*$/,"$1"):ge.call(We);return typeof We=="object"&&!ye?Or(Vr):Vr}if(It(We)){for(var Dr="<"+J.call(String(We.nodeName)),Fr=We.attributes||[],ln=0;ln<Fr.length;ln++)Dr+=" "+Fr[ln].name+"="+De(Ie(Fr[ln].value),"double",Ct);return Dr+=">",We.childNodes&&We.childNodes.length&&(Dr+="..."),Dr+="</"+J.call(String(We.nodeName))+">",Dr}if(je(We)){if(We.length===0)return"[]";var Lr=St(We,dr);return kr&&!jr(Lr)?"["+Ur(Lr,kr)+"]":"[ "+se.call(Lr,", ")+" ]"}if(Le(We)){var zr=St(We,dr);return!("cause"in Error.prototype)&&"cause"in We&&!le.call(We,"cause")?"{ ["+String(We)+"] "+se.call(re.call("[cause]: "+dr(We.cause),zr),", ")+" }":zr.length===0?"["+String(We)+"]":"{ ["+String(We)+"] "+se.call(zr,", ")+" }"}if(typeof We=="object"&&pr){if(me&&typeof We[me]=="function"&&ve)return ve(We,{depth:Et-Lt});if(pr!=="symbol"&&typeof We.inspect=="function")return We.inspect()}if(Kt(We)){var Jr=[];return C&&C.call(We,function(ze,Ke){Jr.push(dr(Ke,We,!0)+" => "+dr(ze,We))}),Mr("Map",E.call(We),Jr,kr)}if(Qt(We)){var un=[];return F&&F.call(We,function(ze){un.push(dr(ze,We))}),Mr("Set",I.call(We),un,kr)}if(zt(We))return Pr("WeakMap");if(ir(We))return Pr("WeakSet");if(jt(We))return Pr("WeakRef");if(Qe(We))return Or(dr(Number(We)));if(ut(We))return Or(dr(fe.call(We)));if(et(We))return Or(z.call(We));if(Ne(We))return Or(dr(String(We)));if(typeof window<"u"&&We===window)return"{ [object Window] }";if(typeof globalThis<"u"&&We===globalThis||typeof commonjsGlobal<"u"&&We===commonjsGlobal)return"{ [object globalThis] }";if(!Ye(We)&&!ke(We)){var xn=St(We,dr),Fn=de?de(We)===Object.prototype:We instanceof Object||We.constructor===Object,Ee=We instanceof Object?"":"null prototype",Pe=!Fn&&we&&Object(We)===We&&we in We?K.call(Bt(We),8,-1):Ee?"Object":"",Me=Fn||typeof We.constructor!="function"?"":We.constructor.name?We.constructor.name+" ":"",$e=Me+(Pe||Ee?"["+se.call(re.call([],Pe||[],Ee||[]),": ")+"] ":"");return xn.length===0?$e+"{}":kr?$e+"{"+Ur(xn,kr)+"}":$e+"{ "+se.call(xn,", ")+" }"}return String(We)};function De(Ue,We,Ft){var Lt=Ft.quoteStyle||We,gt=xe[Lt];return gt+Ue+gt}function Ie(Ue){return Q.call(String(Ue),/"/g,"&quot;")}function je(Ue){return Bt(Ue)==="[object Array]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function Ye(Ue){return Bt(Ue)==="[object Date]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function ke(Ue){return Bt(Ue)==="[object RegExp]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function Le(Ue){return Bt(Ue)==="[object Error]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function Ne(Ue){return Bt(Ue)==="[object String]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function Qe(Ue){return Bt(Ue)==="[object Number]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function et(Ue){return Bt(Ue)==="[object Boolean]"&&(!we||!(typeof Ue=="object"&&we in Ue))}function Je(Ue){if(ye)return Ue&&typeof Ue=="object"&&Ue instanceof Symbol;if(typeof Ue=="symbol")return!0;if(!Ue||typeof Ue!="object"||!ge)return!1;try{return ge.call(Ue),!0}catch{}return!1}function ut(Ue){if(!Ue||typeof Ue!="object"||!fe)return!1;try{return fe.call(Ue),!0}catch{}return!1}var lt=Object.prototype.hasOwnProperty||function(Ue){return Ue in this};function it(Ue,We){return lt.call(Ue,We)}function Bt(Ue){return W.call(Ue)}function Yt(Ue){if(Ue.name)return Ue.name;var We=Y.call(X.call(Ue),/^function\s*([\w$]+)/);return We?We[1]:null}function ar(Ue,We){if(Ue.indexOf)return Ue.indexOf(We);for(var Ft=0,Lt=Ue.length;Ft<Lt;Ft++)if(Ue[Ft]===We)return Ft;return-1}function Kt(Ue){if(!E||!Ue||typeof Ue!="object")return!1;try{E.call(Ue);try{I.call(Ue)}catch{return!0}return Ue instanceof Map}catch{}return!1}function zt(Ue){if(!U||!Ue||typeof Ue!="object")return!1;try{U.call(Ue,U);try{D.call(Ue,D)}catch{return!0}return Ue instanceof WeakMap}catch{}return!1}function jt(Ue){if(!L||!Ue||typeof Ue!="object")return!1;try{return L.call(Ue),!0}catch{}return!1}function Qt(Ue){if(!I||!Ue||typeof Ue!="object")return!1;try{I.call(Ue);try{E.call(Ue)}catch{return!0}return Ue instanceof Set}catch{}return!1}function ir(Ue){if(!D||!Ue||typeof Ue!="object")return!1;try{D.call(Ue,D);try{U.call(Ue,U)}catch{return!0}return Ue instanceof WeakSet}catch{}return!1}function It(Ue){return!Ue||typeof Ue!="object"?!1:typeof HTMLElement<"u"&&Ue instanceof HTMLElement?!0:typeof Ue.nodeName=="string"&&typeof Ue.getAttribute=="function"}function bn(Ue,We){if(Ue.length>We.maxStringLength){var Ft=Ue.length-We.maxStringLength,Lt="... "+Ft+" more character"+(Ft>1?"s":"");return bn(K.call(Ue,0,We.maxStringLength),We)+Lt}var gt=Ae[We.quoteStyle||"single"];gt.lastIndex=0;var Ct=Q.call(Q.call(Ue,gt,"\\$1"),/[\x00-\x1f]/g,on);return De(Ct,"single",We)}function on(Ue){var We=Ue.charCodeAt(0),Ft={8:"b",9:"t",10:"n",12:"f",13:"r"}[We];return Ft?"\\"+Ft:"\\x"+(We<16?"0":"")+ee.call(We.toString(16))}function Or(Ue){return"Object("+Ue+")"}function Pr(Ue){return Ue+" { ? }"}function Mr(Ue,We,Ft,Lt){var gt=Lt?Ur(Ft,Lt):se.call(Ft,", ");return Ue+" ("+We+") {"+gt+"}"}function jr(Ue){for(var We=0;We<Ue.length;We++)if(ar(Ue[We],`
`)>=0)return!1;return!0}function fr(Ue,We){var Ft;if(Ue.indent==="	")Ft="	";else if(typeof Ue.indent=="number"&&Ue.indent>0)Ft=se.call(Array(Ue.indent+1)," ");else return null;return{base:Ft,prev:se.call(Array(We+1),Ft)}}function Ur(Ue,We){if(Ue.length===0)return"";var Ft=`
`+We.prev+We.base;return Ft+se.call(Ue,","+Ft)+`
`+We.prev}function St(Ue,We){var Ft=je(Ue),Lt=[];if(Ft){Lt.length=Ue.length;for(var gt=0;gt<Ue.length;gt++)Lt[gt]=it(Ue,gt)?We(Ue[gt],Ue):""}var Ct=typeof he=="function"?he(Ue):[],pr;if(ye){pr={};for(var cr=0;cr<Ct.length;cr++)pr["$"+Ct[cr]]=Ct[cr]}for(var vt in Ue)it(Ue,vt)&&(Ft&&String(Number(vt))===vt&&vt<Ue.length||ye&&pr["$"+vt]instanceof Symbol||(ie.call(/[^\w$]/,vt)?Lt.push(We(vt,Ue)+": "+We(Ue[vt],Ue)):Lt.push(vt+": "+We(Ue[vt],Ue))));if(typeof he=="function")for(var xt=0;xt<Ct.length;xt++)le.call(Ue,Ct[xt])&&Lt.push("["+We(Ct[xt])+"]: "+We(Ue[Ct[xt]],Ue));return Lt}return objectInspect}var sideChannelList,hasRequiredSideChannelList;function requireSideChannelList(){if(hasRequiredSideChannelList)return sideChannelList;hasRequiredSideChannelList=1;var T=requireObjectInspect(),_=requireType(),E=function(F,B,U){for(var V=F,D;(D=V.next)!=null;V=D)if(D.key===B)return V.next=D.next,U||(D.next=F.next,F.next=D),D},C=function(F,B){if(F){var U=E(F,B);return U&&U.value}},A=function(F,B,U){var V=E(F,B);V?V.value=U:F.next={key:B,next:F.next,value:U}},R=function(F,B){return F?!!E(F,B):!1},I=function(F,B){if(F)return E(F,B,!0)};return sideChannelList=function(){var B,U={assert:function(V){if(!U.has(V))throw new _("Side channel does not contain "+T(V))},delete:function(V){var D=B&&B.next,O=I(B,V);return O&&D&&D===O&&(B=void 0),!!O},get:function(V){return C(B,V)},has:function(V){return R(B,V)},set:function(V,D){B||(B={next:void 0}),A(B,V,D)}};return U},sideChannelList}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round$1,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round$1=Math.round),round$1}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(_){return _!==_}),_isNaN}var sign$1,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1;hasRequiredSign=1;var T=require_isNaN();return sign$1=function(E){return T(E)||E===0?E:E<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var T=requireGOPD();if(T)try{T([],"length")}catch{T=null}return gopd=T,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var T=Object.defineProperty||!1;if(T)try{T({},"a",{value:1})}catch{T=!1}return esDefineProperty=T,esDefineProperty}var shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},E=Symbol("test"),C=Object(E);if(typeof E=="string"||Object.prototype.toString.call(E)!=="[object Symbol]"||Object.prototype.toString.call(C)!=="[object Symbol]")return!1;var A=42;_[E]=A;for(var R in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var I=Object.getOwnPropertySymbols(_);if(I.length!==1||I[0]!==E||!Object.prototype.propertyIsEnumerable.call(_,E))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var F=Object.getOwnPropertyDescriptor(_,E);if(F.value!==A||F.enumerable!==!0)return!1}return!0}),shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var T=typeof Symbol<"u"&&Symbol,_=requireShams();return hasSymbols=function(){return typeof T!="function"||typeof Symbol!="function"||typeof T("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var T=requireEsObjectAtoms();return Object_getPrototypeOf=T.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var T="Function.prototype.bind called on incompatible ",_=Object.prototype.toString,E=Math.max,C="[object Function]",A=function(B,U){for(var V=[],D=0;D<B.length;D+=1)V[D]=B[D];for(var O=0;O<U.length;O+=1)V[O+B.length]=U[O];return V},R=function(B,U){for(var V=[],D=U,O=0;D<B.length;D+=1,O+=1)V[O]=B[D];return V},I=function(F,B){for(var U="",V=0;V<F.length;V+=1)U+=F[V],V+1<F.length&&(U+=B);return U};return implementation=function(B){var U=this;if(typeof U!="function"||_.apply(U)!==C)throw new TypeError(T+U);for(var V=R(arguments,1),D,O=function(){if(this instanceof D){var Y=U.apply(this,A(V,arguments));return Object(Y)===Y?Y:this}return U.apply(B,A(V,arguments))},L=E(0,U.length-V.length),z=[],W=0;W<L;W++)z[W]="$"+W;if(D=Function("binder","return function ("+I(z,",")+"){ return binder.apply(this,arguments); }")(O),U.prototype){var X=function(){};X.prototype=U.prototype,D.prototype=new X,X.prototype=null}return D},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var T=requireImplementation();return functionBind=Function.prototype.bind||T,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var T=requireFunctionBind(),_=requireFunctionApply(),E=requireFunctionCall(),C=requireReflectApply();return actualApply=C||T.call(E,_),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var T=requireFunctionBind(),_=requireType(),E=requireFunctionCall(),C=requireActualApply();return callBindApplyHelpers=function(R){if(R.length<1||typeof R[0]!="function")throw new _("a function is required");return C(T,E,R)},callBindApplyHelpers}var get$1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get$1;hasRequiredGet=1;var T=requireCallBindApplyHelpers(),_=requireGopd(),E;try{E=[].__proto__===Array.prototype}catch(I){if(!I||typeof I!="object"||!("code"in I)||I.code!=="ERR_PROTO_ACCESS")throw I}var C=!!E&&_&&_(Object.prototype,"__proto__"),A=Object,R=A.getPrototypeOf;return get$1=C&&typeof C.get=="function"?T([C.get]):typeof R=="function"?function(F){return R(F==null?F:A(F))}:!1,get$1}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var T=requireReflect_getPrototypeOf(),_=requireObject_getPrototypeOf(),E=requireGet();return getProto=T?function(A){return T(A)}:_?function(A){if(!A||typeof A!="object"&&typeof A!="function")throw new TypeError("getProto: not an object");return _(A)}:E?function(A){return E(A)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var T=Function.prototype.call,_=Object.prototype.hasOwnProperty,E=requireFunctionBind();return hasown=E.call(T,_),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var T,_=requireEsObjectAtoms(),E=requireEsErrors(),C=require_eval(),A=requireRange(),R=requireRef(),I=requireSyntax(),F=requireType(),B=requireUri(),U=requireAbs(),V=requireFloor(),D=requireMax(),O=requireMin(),L=requirePow(),z=requireRound(),W=requireSign(),X=Function,Y=function(Le){try{return X('"use strict"; return ('+Le+").constructor;")()}catch{}},K=requireGopd(),Q=requireEsDefineProperty(),ee=function(){throw new F},J=K?function(){try{return arguments.callee,ee}catch{try{return K(arguments,"callee").get}catch{return ee}}}():ee,ie=requireHasSymbols()(),re=requireGetProto(),se=requireObject_getPrototypeOf(),ne=requireReflect_getPrototypeOf(),oe=requireFunctionApply(),fe=requireFunctionCall(),he={},ge=typeof Uint8Array>"u"||!re?T:re(Uint8Array),ye={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":ie&&re?re([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":he,"%AsyncGenerator%":he,"%AsyncGeneratorFunction%":he,"%AsyncIteratorPrototype%":he,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":E,"%eval%":eval,"%EvalError%":C,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":X,"%GeneratorFunction%":he,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ie&&re?re(re([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ie||!re?T:re(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":_,"%Object.getOwnPropertyDescriptor%":K,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":A,"%ReferenceError%":R,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ie||!re?T:re(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ie&&re?re(""[Symbol.iterator]()):T,"%Symbol%":ie?Symbol:T,"%SyntaxError%":I,"%ThrowTypeError%":J,"%TypedArray%":ge,"%TypeError%":F,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":B,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet,"%Function.prototype.call%":fe,"%Function.prototype.apply%":oe,"%Object.defineProperty%":Q,"%Object.getPrototypeOf%":se,"%Math.abs%":U,"%Math.floor%":V,"%Math.max%":D,"%Math.min%":O,"%Math.pow%":L,"%Math.round%":z,"%Math.sign%":W,"%Reflect.getPrototypeOf%":ne};if(re)try{null.error}catch(Le){var we=re(re(Le));ye["%Error.prototype%"]=we}var le=function Le(Ne){var Qe;if(Ne==="%AsyncFunction%")Qe=Y("async function () {}");else if(Ne==="%GeneratorFunction%")Qe=Y("function* () {}");else if(Ne==="%AsyncGeneratorFunction%")Qe=Y("async function* () {}");else if(Ne==="%AsyncGenerator%"){var et=Le("%AsyncGeneratorFunction%");et&&(Qe=et.prototype)}else if(Ne==="%AsyncIteratorPrototype%"){var Je=Le("%AsyncGenerator%");Je&&re&&(Qe=re(Je.prototype))}return ye[Ne]=Qe,Qe},de={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ce=requireFunctionBind(),ve=requireHasown(),be=ce.call(fe,Array.prototype.concat),me=ce.call(oe,Array.prototype.splice),xe=ce.call(fe,String.prototype.replace),Ae=ce.call(fe,String.prototype.slice),De=ce.call(fe,RegExp.prototype.exec),Ie=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,je=/\\(\\)?/g,Ye=function(Ne){var Qe=Ae(Ne,0,1),et=Ae(Ne,-1);if(Qe==="%"&&et!=="%")throw new I("invalid intrinsic syntax, expected closing `%`");if(et==="%"&&Qe!=="%")throw new I("invalid intrinsic syntax, expected opening `%`");var Je=[];return xe(Ne,Ie,function(ut,lt,it,Bt){Je[Je.length]=it?xe(Bt,je,"$1"):lt||ut}),Je},ke=function(Ne,Qe){var et=Ne,Je;if(ve(de,et)&&(Je=de[et],et="%"+Je[0]+"%"),ve(ye,et)){var ut=ye[et];if(ut===he&&(ut=le(et)),typeof ut>"u"&&!Qe)throw new F("intrinsic "+Ne+" exists, but is not available. Please file an issue!");return{alias:Je,name:et,value:ut}}throw new I("intrinsic "+Ne+" does not exist!")};return getIntrinsic=function(Ne,Qe){if(typeof Ne!="string"||Ne.length===0)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Qe!="boolean")throw new F('"allowMissing" argument must be a boolean');if(De(/^%?[^%]*%?$/,Ne)===null)throw new I("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var et=Ye(Ne),Je=et.length>0?et[0]:"",ut=ke("%"+Je+"%",Qe),lt=ut.name,it=ut.value,Bt=!1,Yt=ut.alias;Yt&&(Je=Yt[0],me(et,be([0,1],Yt)));for(var ar=1,Kt=!0;ar<et.length;ar+=1){var zt=et[ar],jt=Ae(zt,0,1),Qt=Ae(zt,-1);if((jt==='"'||jt==="'"||jt==="`"||Qt==='"'||Qt==="'"||Qt==="`")&&jt!==Qt)throw new I("property names with quotes must have matching quotes");if((zt==="constructor"||!Kt)&&(Bt=!0),Je+="."+zt,lt="%"+Je+"%",ve(ye,lt))it=ye[lt];else if(it!=null){if(!(zt in it)){if(!Qe)throw new F("base intrinsic for "+Ne+" exists, but the property is not available.");return}if(K&&ar+1>=et.length){var ir=K(it,zt);Kt=!!ir,Kt&&"get"in ir&&!("originalValue"in ir.get)?it=ir.get:it=it[zt]}else Kt=ve(it,zt),it=it[zt];Kt&&!Bt&&(ye[lt]=it)}}return it},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var T=requireGetIntrinsic(),_=requireCallBindApplyHelpers(),E=_([T("%String.prototype.indexOf%")]);return callBound=function(A,R){var I=T(A,!!R);return typeof I=="function"&&E(A,".prototype.")>-1?_([I]):I},callBound}var sideChannelMap,hasRequiredSideChannelMap;function requireSideChannelMap(){if(hasRequiredSideChannelMap)return sideChannelMap;hasRequiredSideChannelMap=1;var T=requireGetIntrinsic(),_=requireCallBound(),E=requireObjectInspect(),C=requireType(),A=T("%Map%",!0),R=_("Map.prototype.get",!0),I=_("Map.prototype.set",!0),F=_("Map.prototype.has",!0),B=_("Map.prototype.delete",!0),U=_("Map.prototype.size",!0);return sideChannelMap=!!A&&function(){var D,O={assert:function(L){if(!O.has(L))throw new C("Side channel does not contain "+E(L))},delete:function(L){if(D){var z=B(D,L);return U(D)===0&&(D=void 0),z}return!1},get:function(L){if(D)return R(D,L)},has:function(L){return D?F(D,L):!1},set:function(L,z){D||(D=new A),I(D,L,z)}};return O},sideChannelMap}var sideChannelWeakmap,hasRequiredSideChannelWeakmap;function requireSideChannelWeakmap(){if(hasRequiredSideChannelWeakmap)return sideChannelWeakmap;hasRequiredSideChannelWeakmap=1;var T=requireGetIntrinsic(),_=requireCallBound(),E=requireObjectInspect(),C=requireSideChannelMap(),A=requireType(),R=T("%WeakMap%",!0),I=_("WeakMap.prototype.get",!0),F=_("WeakMap.prototype.set",!0),B=_("WeakMap.prototype.has",!0),U=_("WeakMap.prototype.delete",!0);return sideChannelWeakmap=R?function(){var D,O,L={assert:function(z){if(!L.has(z))throw new A("Side channel does not contain "+E(z))},delete:function(z){if(R&&z&&(typeof z=="object"||typeof z=="function")){if(D)return U(D,z)}else if(C&&O)return O.delete(z);return!1},get:function(z){return R&&z&&(typeof z=="object"||typeof z=="function")&&D?I(D,z):O&&O.get(z)},has:function(z){return R&&z&&(typeof z=="object"||typeof z=="function")&&D?B(D,z):!!O&&O.has(z)},set:function(z,W){R&&z&&(typeof z=="object"||typeof z=="function")?(D||(D=new R),F(D,z,W)):C&&(O||(O=C()),O.set(z,W))}};return L}:C,sideChannelWeakmap}var sideChannel,hasRequiredSideChannel;function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var T=requireType(),_=requireObjectInspect(),E=requireSideChannelList(),C=requireSideChannelMap(),A=requireSideChannelWeakmap(),R=A||C||E;return sideChannel=function(){var F,B={assert:function(U){if(!B.has(U))throw new T("Side channel does not contain "+_(U))},delete:function(U){return!!F&&F.delete(U)},get:function(U){return F&&F.get(U)},has:function(U){return!!F&&F.has(U)},set:function(U,V){F||(F=R()),F.set(U,V)}};return B},sideChannel}var formats$1,hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats$1;hasRequiredFormats=1;var T=String.prototype.replace,_=/%20/g,E={RFC1738:"RFC1738",RFC3986:"RFC3986"};return formats$1={default:E.RFC3986,formatters:{RFC1738:function(C){return T.call(C,_,"+")},RFC3986:function(C){return String(C)}},RFC1738:E.RFC1738,RFC3986:E.RFC3986},formats$1}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var T=requireFormats(),_=Object.prototype.hasOwnProperty,E=Array.isArray,C=function(){for(var X=[],Y=0;Y<256;++Y)X.push("%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase());return X}(),A=function(Y){for(;Y.length>1;){var K=Y.pop(),Q=K.obj[K.prop];if(E(Q)){for(var ee=[],J=0;J<Q.length;++J)typeof Q[J]<"u"&&ee.push(Q[J]);K.obj[K.prop]=ee}}},R=function(Y,K){for(var Q=K&&K.plainObjects?{__proto__:null}:{},ee=0;ee<Y.length;++ee)typeof Y[ee]<"u"&&(Q[ee]=Y[ee]);return Q},I=function X(Y,K,Q){if(!K)return Y;if(typeof K!="object"&&typeof K!="function"){if(E(Y))Y.push(K);else if(Y&&typeof Y=="object")(Q&&(Q.plainObjects||Q.allowPrototypes)||!_.call(Object.prototype,K))&&(Y[K]=!0);else return[Y,K];return Y}if(!Y||typeof Y!="object")return[Y].concat(K);var ee=Y;return E(Y)&&!E(K)&&(ee=R(Y,Q)),E(Y)&&E(K)?(K.forEach(function(J,ie){if(_.call(Y,ie)){var re=Y[ie];re&&typeof re=="object"&&J&&typeof J=="object"?Y[ie]=X(re,J,Q):Y.push(J)}else Y[ie]=J}),Y):Object.keys(K).reduce(function(J,ie){var re=K[ie];return _.call(J,ie)?J[ie]=X(J[ie],re,Q):J[ie]=re,J},ee)},F=function(Y,K){return Object.keys(K).reduce(function(Q,ee){return Q[ee]=K[ee],Q},Y)},B=function(X,Y,K){var Q=X.replace(/\+/g," ");if(K==="iso-8859-1")return Q.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Q)}catch{return Q}},U=1024,V=function(Y,K,Q,ee,J){if(Y.length===0)return Y;var ie=Y;if(typeof Y=="symbol"?ie=Symbol.prototype.toString.call(Y):typeof Y!="string"&&(ie=String(Y)),Q==="iso-8859-1")return escape(ie).replace(/%u[0-9a-f]{4}/gi,function(ge){return"%26%23"+parseInt(ge.slice(2),16)+"%3B"});for(var re="",se=0;se<ie.length;se+=U){for(var ne=ie.length>=U?ie.slice(se,se+U):ie,oe=[],fe=0;fe<ne.length;++fe){var he=ne.charCodeAt(fe);if(he===45||he===46||he===95||he===126||he>=48&&he<=57||he>=65&&he<=90||he>=97&&he<=122||J===T.RFC1738&&(he===40||he===41)){oe[oe.length]=ne.charAt(fe);continue}if(he<128){oe[oe.length]=C[he];continue}if(he<2048){oe[oe.length]=C[192|he>>6]+C[128|he&63];continue}if(he<55296||he>=57344){oe[oe.length]=C[224|he>>12]+C[128|he>>6&63]+C[128|he&63];continue}fe+=1,he=65536+((he&1023)<<10|ne.charCodeAt(fe)&1023),oe[oe.length]=C[240|he>>18]+C[128|he>>12&63]+C[128|he>>6&63]+C[128|he&63]}re+=oe.join("")}return re},D=function(Y){for(var K=[{obj:{o:Y},prop:"o"}],Q=[],ee=0;ee<K.length;++ee)for(var J=K[ee],ie=J.obj[J.prop],re=Object.keys(ie),se=0;se<re.length;++se){var ne=re[se],oe=ie[ne];typeof oe=="object"&&oe!==null&&Q.indexOf(oe)===-1&&(K.push({obj:ie,prop:ne}),Q.push(oe))}return A(K),Y},O=function(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"},L=function(Y){return!Y||typeof Y!="object"?!1:!!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y))},z=function(Y,K){return[].concat(Y,K)},W=function(Y,K){if(E(Y)){for(var Q=[],ee=0;ee<Y.length;ee+=1)Q.push(K(Y[ee]));return Q}return K(Y)};return utils={arrayToObject:R,assign:F,combine:z,compact:D,decode:B,encode:V,isBuffer:L,isRegExp:O,maybeMap:W,merge:I},utils}var stringify_1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify_1;hasRequiredStringify=1;var T=requireSideChannel(),_=requireUtils(),E=requireFormats(),C=Object.prototype.hasOwnProperty,A={brackets:function(X){return X+"[]"},comma:"comma",indices:function(X,Y){return X+"["+Y+"]"},repeat:function(X){return X}},R=Array.isArray,I=Array.prototype.push,F=function(W,X){I.apply(W,R(X)?X:[X])},B=Date.prototype.toISOString,U=E.default,V={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_.encode,encodeValuesOnly:!1,filter:void 0,format:U,formatter:E.formatters[U],indices:!1,serializeDate:function(X){return B.call(X)},skipNulls:!1,strictNullHandling:!1},D=function(X){return typeof X=="string"||typeof X=="number"||typeof X=="boolean"||typeof X=="symbol"||typeof X=="bigint"},O={},L=function W(X,Y,K,Q,ee,J,ie,re,se,ne,oe,fe,he,ge,ye,we,le,de){for(var ce=X,ve=de,be=0,me=!1;(ve=ve.get(O))!==void 0&&!me;){var xe=ve.get(X);if(be+=1,typeof xe<"u"){if(xe===be)throw new RangeError("Cyclic object value");me=!0}typeof ve.get(O)>"u"&&(be=0)}if(typeof ne=="function"?ce=ne(Y,ce):ce instanceof Date?ce=he(ce):K==="comma"&&R(ce)&&(ce=_.maybeMap(ce,function(lt){return lt instanceof Date?he(lt):lt})),ce===null){if(J)return se&&!we?se(Y,V.encoder,le,"key",ge):Y;ce=""}if(D(ce)||_.isBuffer(ce)){if(se){var Ae=we?Y:se(Y,V.encoder,le,"key",ge);return[ye(Ae)+"="+ye(se(ce,V.encoder,le,"value",ge))]}return[ye(Y)+"="+ye(String(ce))]}var De=[];if(typeof ce>"u")return De;var Ie;if(K==="comma"&&R(ce))we&&se&&(ce=_.maybeMap(ce,se)),Ie=[{value:ce.length>0?ce.join(",")||null:void 0}];else if(R(ne))Ie=ne;else{var je=Object.keys(ce);Ie=oe?je.sort(oe):je}var Ye=re?String(Y).replace(/\./g,"%2E"):String(Y),ke=Q&&R(ce)&&ce.length===1?Ye+"[]":Ye;if(ee&&R(ce)&&ce.length===0)return ke+"[]";for(var Le=0;Le<Ie.length;++Le){var Ne=Ie[Le],Qe=typeof Ne=="object"&&Ne&&typeof Ne.value<"u"?Ne.value:ce[Ne];if(!(ie&&Qe===null)){var et=fe&&re?String(Ne).replace(/\./g,"%2E"):String(Ne),Je=R(ce)?typeof K=="function"?K(ke,et):ke:ke+(fe?"."+et:"["+et+"]");de.set(X,be);var ut=T();ut.set(O,de),F(De,W(Qe,Je,K,Q,ee,J,ie,re,K==="comma"&&we&&R(ce)?null:se,ne,oe,fe,he,ge,ye,we,le,ut))}}return De},z=function(X){if(!X)return V;if(typeof X.allowEmptyArrays<"u"&&typeof X.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof X.encodeDotInKeys<"u"&&typeof X.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(X.encoder!==null&&typeof X.encoder<"u"&&typeof X.encoder!="function")throw new TypeError("Encoder has to be a function.");var Y=X.charset||V.charset;if(typeof X.charset<"u"&&X.charset!=="utf-8"&&X.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var K=E.default;if(typeof X.format<"u"){if(!C.call(E.formatters,X.format))throw new TypeError("Unknown format option provided.");K=X.format}var Q=E.formatters[K],ee=V.filter;(typeof X.filter=="function"||R(X.filter))&&(ee=X.filter);var J;if(X.arrayFormat in A?J=X.arrayFormat:"indices"in X?J=X.indices?"indices":"repeat":J=V.arrayFormat,"commaRoundTrip"in X&&typeof X.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ie=typeof X.allowDots>"u"?X.encodeDotInKeys===!0?!0:V.allowDots:!!X.allowDots;return{addQueryPrefix:typeof X.addQueryPrefix=="boolean"?X.addQueryPrefix:V.addQueryPrefix,allowDots:ie,allowEmptyArrays:typeof X.allowEmptyArrays=="boolean"?!!X.allowEmptyArrays:V.allowEmptyArrays,arrayFormat:J,charset:Y,charsetSentinel:typeof X.charsetSentinel=="boolean"?X.charsetSentinel:V.charsetSentinel,commaRoundTrip:!!X.commaRoundTrip,delimiter:typeof X.delimiter>"u"?V.delimiter:X.delimiter,encode:typeof X.encode=="boolean"?X.encode:V.encode,encodeDotInKeys:typeof X.encodeDotInKeys=="boolean"?X.encodeDotInKeys:V.encodeDotInKeys,encoder:typeof X.encoder=="function"?X.encoder:V.encoder,encodeValuesOnly:typeof X.encodeValuesOnly=="boolean"?X.encodeValuesOnly:V.encodeValuesOnly,filter:ee,format:K,formatter:Q,serializeDate:typeof X.serializeDate=="function"?X.serializeDate:V.serializeDate,skipNulls:typeof X.skipNulls=="boolean"?X.skipNulls:V.skipNulls,sort:typeof X.sort=="function"?X.sort:null,strictNullHandling:typeof X.strictNullHandling=="boolean"?X.strictNullHandling:V.strictNullHandling}};return stringify_1=function(W,X){var Y=W,K=z(X),Q,ee;typeof K.filter=="function"?(ee=K.filter,Y=ee("",Y)):R(K.filter)&&(ee=K.filter,Q=ee);var J=[];if(typeof Y!="object"||Y===null)return"";var ie=A[K.arrayFormat],re=ie==="comma"&&K.commaRoundTrip;Q||(Q=Object.keys(Y)),K.sort&&Q.sort(K.sort);for(var se=T(),ne=0;ne<Q.length;++ne){var oe=Q[ne],fe=Y[oe];K.skipNulls&&fe===null||F(J,L(fe,oe,ie,re,K.allowEmptyArrays,K.strictNullHandling,K.skipNulls,K.encodeDotInKeys,K.encode?K.encoder:null,K.filter,K.sort,K.allowDots,K.serializeDate,K.format,K.formatter,K.encodeValuesOnly,K.charset,se))}var he=J.join(K.delimiter),ge=K.addQueryPrefix===!0?"?":"";return K.charsetSentinel&&(K.charset==="iso-8859-1"?ge+="utf8=%26%2310003%3B&":ge+="utf8=%E2%9C%93&"),he.length>0?ge+he:""},stringify_1}var parse$1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$1;hasRequiredParse=1;var T=requireUtils(),_=Object.prototype.hasOwnProperty,E=Array.isArray,C={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:T.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},A=function(O){return O.replace(/&#(\d+);/g,function(L,z){return String.fromCharCode(parseInt(z,10))})},R=function(O,L,z){if(O&&typeof O=="string"&&L.comma&&O.indexOf(",")>-1)return O.split(",");if(L.throwOnLimitExceeded&&z>=L.arrayLimit)throw new RangeError("Array limit exceeded. Only "+L.arrayLimit+" element"+(L.arrayLimit===1?"":"s")+" allowed in an array.");return O},I="utf8=%26%2310003%3B",F="utf8=%E2%9C%93",B=function(L,z){var W={__proto__:null},X=z.ignoreQueryPrefix?L.replace(/^\?/,""):L;X=X.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Y=z.parameterLimit===1/0?void 0:z.parameterLimit,K=X.split(z.delimiter,z.throwOnLimitExceeded?Y+1:Y);if(z.throwOnLimitExceeded&&K.length>Y)throw new RangeError("Parameter limit exceeded. Only "+Y+" parameter"+(Y===1?"":"s")+" allowed.");var Q=-1,ee,J=z.charset;if(z.charsetSentinel)for(ee=0;ee<K.length;++ee)K[ee].indexOf("utf8=")===0&&(K[ee]===F?J="utf-8":K[ee]===I&&(J="iso-8859-1"),Q=ee,ee=K.length);for(ee=0;ee<K.length;++ee)if(ee!==Q){var ie=K[ee],re=ie.indexOf("]="),se=re===-1?ie.indexOf("="):re+1,ne,oe;se===-1?(ne=z.decoder(ie,C.decoder,J,"key"),oe=z.strictNullHandling?null:""):(ne=z.decoder(ie.slice(0,se),C.decoder,J,"key"),oe=T.maybeMap(R(ie.slice(se+1),z,E(W[ne])?W[ne].length:0),function(he){return z.decoder(he,C.decoder,J,"value")})),oe&&z.interpretNumericEntities&&J==="iso-8859-1"&&(oe=A(String(oe))),ie.indexOf("[]=")>-1&&(oe=E(oe)?[oe]:oe);var fe=_.call(W,ne);fe&&z.duplicates==="combine"?W[ne]=T.combine(W[ne],oe):(!fe||z.duplicates==="last")&&(W[ne]=oe)}return W},U=function(O,L,z,W){var X=0;if(O.length>0&&O[O.length-1]==="[]"){var Y=O.slice(0,-1).join("");X=Array.isArray(L)&&L[Y]?L[Y].length:0}for(var K=W?L:R(L,z,X),Q=O.length-1;Q>=0;--Q){var ee,J=O[Q];if(J==="[]"&&z.parseArrays)ee=z.allowEmptyArrays&&(K===""||z.strictNullHandling&&K===null)?[]:T.combine([],K);else{ee=z.plainObjects?{__proto__:null}:{};var ie=J.charAt(0)==="["&&J.charAt(J.length-1)==="]"?J.slice(1,-1):J,re=z.decodeDotInKeys?ie.replace(/%2E/g,"."):ie,se=parseInt(re,10);!z.parseArrays&&re===""?ee={0:K}:!isNaN(se)&&J!==re&&String(se)===re&&se>=0&&z.parseArrays&&se<=z.arrayLimit?(ee=[],ee[se]=K):re!=="__proto__"&&(ee[re]=K)}K=ee}return K},V=function(L,z,W,X){if(L){var Y=W.allowDots?L.replace(/\.([^.[]+)/g,"[$1]"):L,K=/(\[[^[\]]*])/,Q=/(\[[^[\]]*])/g,ee=W.depth>0&&K.exec(Y),J=ee?Y.slice(0,ee.index):Y,ie=[];if(J){if(!W.plainObjects&&_.call(Object.prototype,J)&&!W.allowPrototypes)return;ie.push(J)}for(var re=0;W.depth>0&&(ee=Q.exec(Y))!==null&&re<W.depth;){if(re+=1,!W.plainObjects&&_.call(Object.prototype,ee[1].slice(1,-1))&&!W.allowPrototypes)return;ie.push(ee[1])}if(ee){if(W.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+W.depth+" and strictDepth is true");ie.push("["+Y.slice(ee.index)+"]")}return U(ie,z,W,X)}},D=function(L){if(!L)return C;if(typeof L.allowEmptyArrays<"u"&&typeof L.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof L.decodeDotInKeys<"u"&&typeof L.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(L.decoder!==null&&typeof L.decoder<"u"&&typeof L.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof L.charset<"u"&&L.charset!=="utf-8"&&L.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof L.throwOnLimitExceeded<"u"&&typeof L.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var z=typeof L.charset>"u"?C.charset:L.charset,W=typeof L.duplicates>"u"?C.duplicates:L.duplicates;if(W!=="combine"&&W!=="first"&&W!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var X=typeof L.allowDots>"u"?L.decodeDotInKeys===!0?!0:C.allowDots:!!L.allowDots;return{allowDots:X,allowEmptyArrays:typeof L.allowEmptyArrays=="boolean"?!!L.allowEmptyArrays:C.allowEmptyArrays,allowPrototypes:typeof L.allowPrototypes=="boolean"?L.allowPrototypes:C.allowPrototypes,allowSparse:typeof L.allowSparse=="boolean"?L.allowSparse:C.allowSparse,arrayLimit:typeof L.arrayLimit=="number"?L.arrayLimit:C.arrayLimit,charset:z,charsetSentinel:typeof L.charsetSentinel=="boolean"?L.charsetSentinel:C.charsetSentinel,comma:typeof L.comma=="boolean"?L.comma:C.comma,decodeDotInKeys:typeof L.decodeDotInKeys=="boolean"?L.decodeDotInKeys:C.decodeDotInKeys,decoder:typeof L.decoder=="function"?L.decoder:C.decoder,delimiter:typeof L.delimiter=="string"||T.isRegExp(L.delimiter)?L.delimiter:C.delimiter,depth:typeof L.depth=="number"||L.depth===!1?+L.depth:C.depth,duplicates:W,ignoreQueryPrefix:L.ignoreQueryPrefix===!0,interpretNumericEntities:typeof L.interpretNumericEntities=="boolean"?L.interpretNumericEntities:C.interpretNumericEntities,parameterLimit:typeof L.parameterLimit=="number"?L.parameterLimit:C.parameterLimit,parseArrays:L.parseArrays!==!1,plainObjects:typeof L.plainObjects=="boolean"?L.plainObjects:C.plainObjects,strictDepth:typeof L.strictDepth=="boolean"?!!L.strictDepth:C.strictDepth,strictNullHandling:typeof L.strictNullHandling=="boolean"?L.strictNullHandling:C.strictNullHandling,throwOnLimitExceeded:typeof L.throwOnLimitExceeded=="boolean"?L.throwOnLimitExceeded:!1}};return parse$1=function(O,L){var z=D(L);if(O===""||O===null||typeof O>"u")return z.plainObjects?{__proto__:null}:{};for(var W=typeof O=="string"?B(O,z):O,X=z.plainObjects?{__proto__:null}:{},Y=Object.keys(W),K=0;K<Y.length;++K){var Q=Y[K],ee=V(Q,W[Q],z,typeof O=="string");X=T.merge(X,ee,z)}return z.allowSparse===!0?X:T.compact(X)},parse$1}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var T=requireStringify(),_=requireParse(),E=requireFormats();return lib={formats:E,parse:_,stringify:T},lib}var hasRequiredUrl;function requireUrl(){if(hasRequiredUrl)return url$1;hasRequiredUrl=1;var T=requirePunycode();function _(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var E=/^([a-z0-9.+-]+:)/i,C=/:[0-9]*$/,A=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,R=["<",">",'"',"`"," ","\r",`
`,"	"],I=["{","}","|","\\","^","`"].concat(R),F=["'"].concat(I),B=["%","/","?",";","#"].concat(F),U=["/","?","#"],V=255,D=/^[+a-z0-9A-Z_-]{0,63}$/,O=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,L={javascript:!0,"javascript:":!0},z={javascript:!0,"javascript:":!0},W={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},X=requireLib();function Y(J,ie,re){if(J&&typeof J=="object"&&J instanceof _)return J;var se=new _;return se.parse(J,ie,re),se}_.prototype.parse=function(J,ie,re){if(typeof J!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof J);var se=J.indexOf("?"),ne=se!==-1&&se<J.indexOf("#")?"?":"#",oe=J.split(ne),fe=/\\/g;oe[0]=oe[0].replace(fe,"/"),J=oe.join(ne);var he=J;if(he=he.trim(),!re&&J.split("#").length===1){var ge=A.exec(he);if(ge)return this.path=he,this.href=he,this.pathname=ge[1],ge[2]?(this.search=ge[2],ie?this.query=X.parse(this.search.substr(1)):this.query=this.search.substr(1)):ie&&(this.search="",this.query={}),this}var ye=E.exec(he);if(ye){ye=ye[0];var we=ye.toLowerCase();this.protocol=we,he=he.substr(ye.length)}if(re||ye||he.match(/^\/\/[^@/]+@[^@/]+/)){var le=he.substr(0,2)==="//";le&&!(ye&&z[ye])&&(he=he.substr(2),this.slashes=!0)}if(!z[ye]&&(le||ye&&!W[ye])){for(var de=-1,ce=0;ce<U.length;ce++){var ve=he.indexOf(U[ce]);ve!==-1&&(de===-1||ve<de)&&(de=ve)}var be,me;de===-1?me=he.lastIndexOf("@"):me=he.lastIndexOf("@",de),me!==-1&&(be=he.slice(0,me),he=he.slice(me+1),this.auth=decodeURIComponent(be)),de=-1;for(var ce=0;ce<B.length;ce++){var ve=he.indexOf(B[ce]);ve!==-1&&(de===-1||ve<de)&&(de=ve)}de===-1&&(de=he.length),this.host=he.slice(0,de),he=he.slice(de),this.parseHost(),this.hostname=this.hostname||"";var xe=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!xe)for(var Ae=this.hostname.split(/\./),ce=0,De=Ae.length;ce<De;ce++){var Ie=Ae[ce];if(Ie&&!Ie.match(D)){for(var je="",Ye=0,ke=Ie.length;Ye<ke;Ye++)Ie.charCodeAt(Ye)>127?je+="x":je+=Ie[Ye];if(!je.match(D)){var Le=Ae.slice(0,ce),Ne=Ae.slice(ce+1),Qe=Ie.match(O);Qe&&(Le.push(Qe[1]),Ne.unshift(Qe[2])),Ne.length&&(he="/"+Ne.join(".")+he),this.hostname=Le.join(".");break}}}this.hostname.length>V?this.hostname="":this.hostname=this.hostname.toLowerCase(),xe||(this.hostname=T.toASCII(this.hostname));var et=this.port?":"+this.port:"",Je=this.hostname||"";this.host=Je+et,this.href+=this.host,xe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),he[0]!=="/"&&(he="/"+he))}if(!L[we])for(var ce=0,De=F.length;ce<De;ce++){var ut=F[ce];if(he.indexOf(ut)!==-1){var lt=encodeURIComponent(ut);lt===ut&&(lt=escape(ut)),he=he.split(ut).join(lt)}}var it=he.indexOf("#");it!==-1&&(this.hash=he.substr(it),he=he.slice(0,it));var Bt=he.indexOf("?");if(Bt!==-1?(this.search=he.substr(Bt),this.query=he.substr(Bt+1),ie&&(this.query=X.parse(this.query)),he=he.slice(0,Bt)):ie&&(this.search="",this.query={}),he&&(this.pathname=he),W[we]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var et=this.pathname||"",Yt=this.search||"";this.path=et+Yt}return this.href=this.format(),this};function K(J){return typeof J=="string"&&(J=Y(J)),J instanceof _?J.format():_.prototype.format.call(J)}_.prototype.format=function(){var J=this.auth||"";J&&(J=encodeURIComponent(J),J=J.replace(/%3A/i,":"),J+="@");var ie=this.protocol||"",re=this.pathname||"",se=this.hash||"",ne=!1,oe="";this.host?ne=J+this.host:this.hostname&&(ne=J+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ne+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(oe=X.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var fe=this.search||oe&&"?"+oe||"";return ie&&ie.substr(-1)!==":"&&(ie+=":"),this.slashes||(!ie||W[ie])&&ne!==!1?(ne="//"+(ne||""),re&&re.charAt(0)!=="/"&&(re="/"+re)):ne||(ne=""),se&&se.charAt(0)!=="#"&&(se="#"+se),fe&&fe.charAt(0)!=="?"&&(fe="?"+fe),re=re.replace(/[?#]/g,function(he){return encodeURIComponent(he)}),fe=fe.replace("#","%23"),ie+ne+re+fe+se};function Q(J,ie){return Y(J,!1,!0).resolve(ie)}_.prototype.resolve=function(J){return this.resolveObject(Y(J,!1,!0)).format()};function ee(J,ie){return J?Y(J,!1,!0).resolveObject(ie):ie}return _.prototype.resolveObject=function(J){if(typeof J=="string"){var ie=new _;ie.parse(J,!1,!0),J=ie}for(var re=new _,se=Object.keys(this),ne=0;ne<se.length;ne++){var oe=se[ne];re[oe]=this[oe]}if(re.hash=J.hash,J.href==="")return re.href=re.format(),re;if(J.slashes&&!J.protocol){for(var fe=Object.keys(J),he=0;he<fe.length;he++){var ge=fe[he];ge!=="protocol"&&(re[ge]=J[ge])}return W[re.protocol]&&re.hostname&&!re.pathname&&(re.pathname="/",re.path=re.pathname),re.href=re.format(),re}if(J.protocol&&J.protocol!==re.protocol){if(!W[J.protocol]){for(var ye=Object.keys(J),we=0;we<ye.length;we++){var le=ye[we];re[le]=J[le]}return re.href=re.format(),re}if(re.protocol=J.protocol,!J.host&&!z[J.protocol]){for(var De=(J.pathname||"").split("/");De.length&&!(J.host=De.shift()););J.host||(J.host=""),J.hostname||(J.hostname=""),De[0]!==""&&De.unshift(""),De.length<2&&De.unshift(""),re.pathname=De.join("/")}else re.pathname=J.pathname;if(re.search=J.search,re.query=J.query,re.host=J.host||"",re.auth=J.auth,re.hostname=J.hostname||J.host,re.port=J.port,re.pathname||re.search){var de=re.pathname||"",ce=re.search||"";re.path=de+ce}return re.slashes=re.slashes||J.slashes,re.href=re.format(),re}var ve=re.pathname&&re.pathname.charAt(0)==="/",be=J.host||J.pathname&&J.pathname.charAt(0)==="/",me=be||ve||re.host&&J.pathname,xe=me,Ae=re.pathname&&re.pathname.split("/")||[],De=J.pathname&&J.pathname.split("/")||[],Ie=re.protocol&&!W[re.protocol];if(Ie&&(re.hostname="",re.port=null,re.host&&(Ae[0]===""?Ae[0]=re.host:Ae.unshift(re.host)),re.host="",J.protocol&&(J.hostname=null,J.port=null,J.host&&(De[0]===""?De[0]=J.host:De.unshift(J.host)),J.host=null),me=me&&(De[0]===""||Ae[0]==="")),be)re.host=J.host||J.host===""?J.host:re.host,re.hostname=J.hostname||J.hostname===""?J.hostname:re.hostname,re.search=J.search,re.query=J.query,Ae=De;else if(De.length)Ae||(Ae=[]),Ae.pop(),Ae=Ae.concat(De),re.search=J.search,re.query=J.query;else if(J.search!=null){if(Ie){re.host=Ae.shift(),re.hostname=re.host;var je=re.host&&re.host.indexOf("@")>0?re.host.split("@"):!1;je&&(re.auth=je.shift(),re.hostname=je.shift(),re.host=re.hostname)}return re.search=J.search,re.query=J.query,(re.pathname!==null||re.search!==null)&&(re.path=(re.pathname?re.pathname:"")+(re.search?re.search:"")),re.href=re.format(),re}if(!Ae.length)return re.pathname=null,re.search?re.path="/"+re.search:re.path=null,re.href=re.format(),re;for(var Ye=Ae.slice(-1)[0],ke=(re.host||J.host||Ae.length>1)&&(Ye==="."||Ye==="..")||Ye==="",Le=0,Ne=Ae.length;Ne>=0;Ne--)Ye=Ae[Ne],Ye==="."?Ae.splice(Ne,1):Ye===".."?(Ae.splice(Ne,1),Le++):Le&&(Ae.splice(Ne,1),Le--);if(!me&&!xe)for(;Le--;Le)Ae.unshift("..");me&&Ae[0]!==""&&(!Ae[0]||Ae[0].charAt(0)!=="/")&&Ae.unshift(""),ke&&Ae.join("/").substr(-1)!=="/"&&Ae.push("");var Qe=Ae[0]===""||Ae[0]&&Ae[0].charAt(0)==="/";if(Ie){re.hostname=Qe?"":Ae.length?Ae.shift():"",re.host=re.hostname;var je=re.host&&re.host.indexOf("@")>0?re.host.split("@"):!1;je&&(re.auth=je.shift(),re.hostname=je.shift(),re.host=re.hostname)}return me=me||re.host&&Ae.length,me&&!Qe&&Ae.unshift(""),Ae.length>0?re.pathname=Ae.join("/"):(re.pathname=null,re.path=null),(re.pathname!==null||re.search!==null)&&(re.path=(re.pathname?re.pathname:"")+(re.search?re.search:"")),re.auth=J.auth||re.auth,re.slashes=re.slashes||J.slashes,re.href=re.format(),re},_.prototype.parseHost=function(){var J=this.host,ie=C.exec(J);ie&&(ie=ie[0],ie!==":"&&(this.port=ie.substr(1)),J=J.substr(0,J.length-ie.length)),J&&(this.hostname=J)},url$1.parse=Y,url$1.resolve=Q,url$1.resolveObject=ee,url$1.format=K,url$1.Url=_,url$1}var urlExports=requireUrl();const warnings={};function deprecation(T,_,E=3){if(warnings[_])return;let C=new Error().stack;typeof C>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${T}`):(C=C.split(`
`).splice(E).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${T}`),console.warn(C),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${T}`),console.warn(C))),warnings[_]=!0}const url={get parse(){return deprecation("7.3.0","utils.url.parse is deprecated, use native URL API instead."),urlExports.parse},get format(){return deprecation("7.3.0","utils.url.format is deprecated, use native URL API instead."),urlExports.format},get resolve(){return deprecation("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),urlExports.resolve}};function assertPath(T){if(typeof T!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(T)}`)}function removeUrlParams(T){return T.split("?")[0].split("#")[0]}function escapeRegExp(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(T,_,E){return T.replace(new RegExp(escapeRegExp(_),"g"),E)}function normalizeStringPosix(T,_){let E="",C=0,A=-1,R=0,I=-1;for(let F=0;F<=T.length;++F){if(F<T.length)I=T.charCodeAt(F);else{if(I===47)break;I=47}if(I===47){if(!(A===F-1||R===1))if(A!==F-1&&R===2){if(E.length<2||C!==2||E.charCodeAt(E.length-1)!==46||E.charCodeAt(E.length-2)!==46){if(E.length>2){const B=E.lastIndexOf("/");if(B!==E.length-1){B===-1?(E="",C=0):(E=E.slice(0,B),C=E.length-1-E.lastIndexOf("/")),A=F,R=0;continue}}else if(E.length===2||E.length===1){E="",C=0,A=F,R=0;continue}}}else E.length>0?E+=`/${T.slice(A+1,F)}`:E=T.slice(A+1,F),C=F-A-1;A=F,R=0}else I===46&&R!==-1?++R:R=-1}return E}const path={toPosix(T){return replaceAll(T,"\\","/")},isUrl(T){return/^https?:/.test(this.toPosix(T))},isDataUrl(T){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(T)},isBlobUrl(T){return T.startsWith("blob:")},hasProtocol(T){return/^[^/:]+:/.test(this.toPosix(T))},getProtocol(T){assertPath(T),T=this.toPosix(T);const _=/^file:\/\/\//.exec(T);if(_)return _[0];const E=/^[^/:]+:\/{0,2}/.exec(T);return E?E[0]:""},toAbsolute(T,_,E){if(assertPath(T),this.isDataUrl(T)||this.isBlobUrl(T))return T;const C=removeUrlParams(this.toPosix(_??settings.ADAPTER.getBaseUrl())),A=removeUrlParams(this.toPosix(E??this.rootname(C)));return T=this.toPosix(T),T.startsWith("/")?path.join(A,T.slice(1)):this.isAbsolute(T)?T:this.join(C,T)},normalize(T){if(assertPath(T),T.length===0)return".";if(this.isDataUrl(T)||this.isBlobUrl(T))return T;T=this.toPosix(T);let _="";const E=T.startsWith("/");this.hasProtocol(T)&&(_=this.rootname(T),T=T.slice(_.length));const C=T.endsWith("/");return T=normalizeStringPosix(T),T.length>0&&C&&(T+="/"),E?`/${T}`:_+T},isAbsolute(T){return assertPath(T),T=this.toPosix(T),this.hasProtocol(T)?!0:T.startsWith("/")},join(...T){if(T.length===0)return".";let _;for(let E=0;E<T.length;++E){const C=T[E];if(assertPath(C),C.length>0)if(_===void 0)_=C;else{const A=T[E-1]??"";this.joinExtensions.includes(this.extname(A).toLowerCase())?_+=`/../${C}`:_+=`/${C}`}}return _===void 0?".":this.normalize(_)},dirname(T){if(assertPath(T),T.length===0)return".";T=this.toPosix(T);let _=T.charCodeAt(0);const E=_===47;let C=-1,A=!0;const R=this.getProtocol(T),I=T;T=T.slice(R.length);for(let F=T.length-1;F>=1;--F)if(_=T.charCodeAt(F),_===47){if(!A){C=F;break}}else A=!1;return C===-1?E?"/":this.isUrl(I)?R+T:R:E&&C===1?"//":R+T.slice(0,C)},rootname(T){assertPath(T),T=this.toPosix(T);let _="";if(T.startsWith("/")?_="/":_=this.getProtocol(T),this.isUrl(T)){const E=T.indexOf("/",_.length);E!==-1?_=T.slice(0,E):_=T,_.endsWith("/")||(_+="/")}return _},basename(T,_){assertPath(T),_&&assertPath(_),T=removeUrlParams(this.toPosix(T));let E=0,C=-1,A=!0,R;if(_!==void 0&&_.length>0&&_.length<=T.length){if(_.length===T.length&&_===T)return"";let I=_.length-1,F=-1;for(R=T.length-1;R>=0;--R){const B=T.charCodeAt(R);if(B===47){if(!A){E=R+1;break}}else F===-1&&(A=!1,F=R+1),I>=0&&(B===_.charCodeAt(I)?--I===-1&&(C=R):(I=-1,C=F))}return E===C?C=F:C===-1&&(C=T.length),T.slice(E,C)}for(R=T.length-1;R>=0;--R)if(T.charCodeAt(R)===47){if(!A){E=R+1;break}}else C===-1&&(A=!1,C=R+1);return C===-1?"":T.slice(E,C)},extname(T){assertPath(T),T=removeUrlParams(this.toPosix(T));let _=-1,E=0,C=-1,A=!0,R=0;for(let I=T.length-1;I>=0;--I){const F=T.charCodeAt(I);if(F===47){if(!A){E=I+1;break}continue}C===-1&&(A=!1,C=I+1),F===46?_===-1?_=I:R!==1&&(R=1):_!==-1&&(R=-1)}return _===-1||C===-1||R===0||R===1&&_===C-1&&_===E+1?"":T.slice(_,C)},parse(T){assertPath(T);const _={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return _;T=removeUrlParams(this.toPosix(T));let E=T.charCodeAt(0);const C=this.isAbsolute(T);let A;_.root=this.rootname(T),C||this.hasProtocol(T)?A=1:A=0;let R=-1,I=0,F=-1,B=!0,U=T.length-1,V=0;for(;U>=A;--U){if(E=T.charCodeAt(U),E===47){if(!B){I=U+1;break}continue}F===-1&&(B=!1,F=U+1),E===46?R===-1?R=U:V!==1&&(V=1):R!==-1&&(V=-1)}return R===-1||F===-1||V===0||V===1&&R===F-1&&R===I+1?F!==-1&&(I===0&&C?_.base=_.name=T.slice(1,F):_.base=_.name=T.slice(I,F)):(I===0&&C?(_.name=T.slice(1,R),_.base=T.slice(1,F)):(_.name=T.slice(I,R),_.base=T.slice(I,F)),_.ext=T.slice(R,F)),_.dir=this.dirname(T),_},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var R;const T=document.createElement("canvas").getContext("webgl");if(!T)return ALPHA_MODES.UNPACK;const _=await new Promise(I=>{const F=document.createElement("video");F.onloadeddata=()=>I(F),F.onerror=()=>I(null),F.autoplay=!1,F.crossOrigin="anonymous",F.preload="auto",F.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",F.load()});if(!_)return ALPHA_MODES.UNPACK;const E=T.createTexture();T.bindTexture(T.TEXTURE_2D,E);const C=T.createFramebuffer();T.bindFramebuffer(T.FRAMEBUFFER,C),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,E,0),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),T.pixelStorei(T.UNPACK_COLORSPACE_CONVERSION_WEBGL,T.NONE),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,_);const A=new Uint8Array(4);return T.readPixels(0,0,1,1,T.RGBA,T.UNSIGNED_BYTE,A),T.deleteFramebuffer(C),T.deleteTexture(E),(R=T.getExtension("WEBGL_lose_context"))==null||R.loseContext(),A[0]<=A[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const T={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const E=settings.ADAPTER.createCanvas();let C=E.getContext("webgl",T)||E.getContext("experimental-webgl",T);const A=!!((_=C==null?void 0:C.getContextAttributes())!=null&&_.stencil);if(C){const R=C.getExtension("WEBGL_lose_context");R&&R.loseContext()}return C=null,A}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(T){return typeof T=="string"?T.length>0:typeof T=="number"},n=function(T,_,E){return _===void 0&&(_=0),E===void 0&&(E=Math.pow(10,_)),Math.round(E*T)/E+0},e=function(T,_,E){return _===void 0&&(_=0),E===void 0&&(E=1),T>E?E:T>_?T:_},u=function(T){return(T=isFinite(T)?T%360:0)>0?T:T+360},a=function(T){return{r:e(T.r,0,255),g:e(T.g,0,255),b:e(T.b,0,255),a:e(T.a)}},o=function(T){return{r:n(T.r),g:n(T.g),b:n(T.b),a:n(T.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(T){var _=T.toString(16);return _.length<2?"0"+_:_},h=function(T){var _=T.r,E=T.g,C=T.b,A=T.a,R=Math.max(_,E,C),I=R-Math.min(_,E,C),F=I?R===_?(E-C)/I:R===E?2+(C-_)/I:4+(_-E)/I:0;return{h:60*(F<0?F+6:F),s:R?I/R*100:0,v:R/255*100,a:A}},b=function(T){var _=T.h,E=T.s,C=T.v,A=T.a;_=_/360*6,E/=100,C/=100;var R=Math.floor(_),I=C*(1-E),F=C*(1-(_-R)*E),B=C*(1-(1-_+R)*E),U=R%6;return{r:255*[C,F,I,I,B,C][U],g:255*[B,C,C,F,I,I][U],b:255*[I,I,B,C,C,F][U],a:A}},g=function(T){return{h:u(T.h),s:e(T.s,0,100),l:e(T.l,0,100),a:e(T.a)}},d=function(T){return{h:n(T.h),s:n(T.s),l:n(T.l),a:n(T.a,3)}},f=function(T){return b((E=(_=T).s,{h:_.h,s:(E*=((C=_.l)<50?C:100-C)/100)>0?2*E/(C+E)*100:0,v:C+E,a:_.a}));var _,E,C},c=function(T){return{h:(_=h(T)).h,s:(A=(200-(E=_.s))*(C=_.v)/100)>0&&A<200?E*C/100/(A<=100?A:200-A)*100:0,l:A/2,a:_.a};var _,E,C,A},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(T){var _=i.exec(T);return _?(T=_[1]).length<=4?{r:parseInt(T[0]+T[0],16),g:parseInt(T[1]+T[1],16),b:parseInt(T[2]+T[2],16),a:T.length===4?n(parseInt(T[3]+T[3],16)/255,2):1}:T.length===6||T.length===8?{r:parseInt(T.substr(0,2),16),g:parseInt(T.substr(2,2),16),b:parseInt(T.substr(4,2),16),a:T.length===8?n(parseInt(T.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(T){var _=v.exec(T)||m.exec(T);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(T){var _=l.exec(T)||p.exec(T);if(!_)return null;var E,C,A=g({h:(E=_[1],C=_[2],C===void 0&&(C="deg"),Number(E)*(r[C]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f(A)},"hsl"]],object:[[function(T){var _=T.r,E=T.g,C=T.b,A=T.a,R=A===void 0?1:A;return t(_)&&t(E)&&t(C)?a({r:Number(_),g:Number(E),b:Number(C),a:Number(R)}):null},"rgb"],[function(T){var _=T.h,E=T.s,C=T.l,A=T.a,R=A===void 0?1:A;if(!t(_)||!t(E)||!t(C))return null;var I=g({h:Number(_),s:Number(E),l:Number(C),a:Number(R)});return f(I)},"hsl"],[function(T){var _=T.h,E=T.s,C=T.v,A=T.a,R=A===void 0?1:A;if(!t(_)||!t(E)||!t(C))return null;var I=function(F){return{h:u(F.h),s:e(F.s,0,100),v:e(F.v,0,100),a:e(F.a)}}({h:Number(_),s:Number(E),v:Number(C),a:Number(R)});return b(I)},"hsv"]]},N=function(T,_){for(var E=0;E<_.length;E++){var C=_[E][0](T);if(C)return[C,_[E][1]]}return[null,void 0]},x=function(T){return typeof T=="string"?N(T.trim(),y.string):typeof T=="object"&&T!==null?N(T,y.object):[null,void 0]},M=function(T,_){var E=c(T);return{h:E.h,s:e(E.s+100*_,0,100),l:E.l,a:E.a}},H=function(T){return(299*T.r+587*T.g+114*T.b)/1e3/255},$=function(T,_){var E=c(T);return{h:E.h,s:E.s,l:e(E.l+100*_,0,100),a:E.a}},j=function(){function T(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return T.prototype.isValid=function(){return this.parsed!==null},T.prototype.brightness=function(){return n(H(this.rgba),2)},T.prototype.isDark=function(){return H(this.rgba)<.5},T.prototype.isLight=function(){return H(this.rgba)>=.5},T.prototype.toHex=function(){return _=o(this.rgba),E=_.r,C=_.g,A=_.b,I=(R=_.a)<1?s(n(255*R)):"","#"+s(E)+s(C)+s(A)+I;var _,E,C,A,R,I},T.prototype.toRgb=function(){return o(this.rgba)},T.prototype.toRgbString=function(){return _=o(this.rgba),E=_.r,C=_.g,A=_.b,(R=_.a)<1?"rgba("+E+", "+C+", "+A+", "+R+")":"rgb("+E+", "+C+", "+A+")";var _,E,C,A,R},T.prototype.toHsl=function(){return d(c(this.rgba))},T.prototype.toHslString=function(){return _=d(c(this.rgba)),E=_.h,C=_.s,A=_.l,(R=_.a)<1?"hsla("+E+", "+C+"%, "+A+"%, "+R+")":"hsl("+E+", "+C+"%, "+A+"%)";var _,E,C,A,R},T.prototype.toHsv=function(){return _=h(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},T.prototype.invert=function(){return w$1({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},T.prototype.saturate=function(_){return _===void 0&&(_=.1),w$1(M(this.rgba,_))},T.prototype.desaturate=function(_){return _===void 0&&(_=.1),w$1(M(this.rgba,-_))},T.prototype.grayscale=function(){return w$1(M(this.rgba,-1))},T.prototype.lighten=function(_){return _===void 0&&(_=.1),w$1($(this.rgba,_))},T.prototype.darken=function(_){return _===void 0&&(_=.1),w$1($(this.rgba,-_))},T.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},T.prototype.alpha=function(_){return typeof _=="number"?w$1({r:(E=this.rgba).r,g:E.g,b:E.b,a:_}):n(this.rgba.a,3);var E},T.prototype.hue=function(_){var E=c(this.rgba);return typeof _=="number"?w$1({h:_,s:E.s,l:E.l,a:E.a}):n(E.h)},T.prototype.isEqual=function(_){return this.toHex()===w$1(_).toHex()},T}(),w$1=function(T){return T instanceof j?T:new j(T)},S=[],k=function(T){T.forEach(function(_){S.indexOf(_)<0&&(_(j,y),S.push(_))})};function namesPlugin(T,_){var E={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},C={};for(var A in E)C[E[A]]=A;var R={};T.prototype.toName=function(I){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var F,B,U=C[this.toHex()];if(U)return U;if(I!=null&&I.closest){var V=this.toRgb(),D=1/0,O="black";if(!R.length)for(var L in E)R[L]=new T(E[L]).toRgb();for(var z in E){var W=(F=V,B=R[z],Math.pow(F.r-B.r,2)+Math.pow(F.g-B.g,2)+Math.pow(F.b-B.b,2));W<D&&(D=W,O=z)}return O}},_.string.push([function(I){var F=I.toLowerCase(),B=F==="transparent"?"#0000":E[F];return B?new T(B).toRgb():null},"name"])}k([namesPlugin]);const _Color=class Jo{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Jo)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,E){const C=typeof _;if(C!==typeof E)return!1;if(C==="number"||C==="string"||_ instanceof Number)return _===E;if(Array.isArray(_)&&Array.isArray(E)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(E))return _.length!==E.length?!1:_.every((A,R)=>A===E[R]);if(_!==null&&E!==null){const A=Object.keys(_),R=Object.keys(E);return A.length!==R.length?!1:A.every(I=>_[I]===E[I])}return _===E}toRgba(){const[_,E,C,A]=this._components;return{r:_,g:E,b:C,a:A}}toRgb(){const[_,E,C]=this._components;return{r:_,g:E,b:C}}toRgbaString(){const[_,E,C]=this.toUint8RgbArray();return`rgba(${_},${E},${C},${this.alpha})`}toUint8RgbArray(_){const[E,C,A]=this._components;return _=_??[],_[0]=Math.round(E*255),_[1]=Math.round(C*255),_[2]=Math.round(A*255),_}toRgbArray(_){_=_??[];const[E,C,A]=this._components;return _[0]=E,_[1]=C,_[2]=A,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[E,C,A,R]=Jo.temp.setValue(_)._components;return this._components[0]*=E,this._components[1]*=C,this._components[2]*=A,this._components[3]*=R,this.refreshInt(),this._value=null,this}premultiply(_,E=!0){return E&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,E=!0){if(_===1)return(255<<24)+this._int;if(_===0)return E?0:this._int;let C=this._int>>16&255,A=this._int>>8&255,R=this._int&255;return E&&(C=C*_+.5|0,A=A*_+.5|0,R=R*_+.5|0),(_*255<<24)+(C<<16)+(A<<8)+R}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[E,C,A]=this._components;return this._components[0]=Math.round(E*_)/_,this._components[1]=Math.round(C*_)/_,this._components[2]=Math.round(A*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[E,C,A,R]=this._components;return _[0]=E,_[1]=C,_[2]=A,_[3]=R,_}normalize(_){let E,C,A,R;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const I=_;E=(I>>16&255)/255,C=(I>>8&255)/255,A=(I&255)/255,R=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[E,C,A,R=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[E,C,A,R=255]=_,E/=255,C/=255,A/=255,R/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const F=Jo.HEX_PATTERN.exec(_);F&&(_=`#${F[2]}`)}const I=w$1(_);I.isValid()&&({r:E,g:C,b:A,a:R}=I.rgba,E/=255,C/=255,A/=255)}if(E!==void 0)this._components[0]=E,this._components[1]=C,this._components[2]=A,this._components[3]=R,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,E,C]=this._components;this._int=(_*255<<16)+(E*255<<8)+(C*255|0)}_clamp(_,E=0,C=1){return typeof _=="number"?Math.min(Math.max(_,E),C):(_.forEach((A,R)=>{_[R]=Math.min(Math.max(A,E),C)}),_)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(T){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(T).toHex()}function rgb2hex(T){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(T).toNumber()}function mapPremultipliedBlendModes(){const T=[],_=[];for(let C=0;C<32;C++)T[C]=C,_[C]=C;T[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,T[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,T[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const E=[];return E.push(_),E.push(T),E}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(T,_){return premultiplyBlendMode[_?1:0][T]}function createIndicesForQuads(T,_=null){const E=T*6;if(_=_||new Uint16Array(E),_.length!==E)throw new Error(`Out buffer length is incorrect, got ${_.length} and expected ${E}`);for(let C=0,A=0;C<E;C+=6,A+=4)_[C+0]=A+0,_[C+1]=A+1,_[C+2]=A+2,_[C+3]=A+0,_[C+4]=A+2,_[C+5]=A+3;return _}function getBufferType(T){if(T.BYTES_PER_ELEMENT===4)return T instanceof Float32Array?"Float32Array":T instanceof Uint32Array?"Uint32Array":"Int32Array";if(T.BYTES_PER_ELEMENT===2){if(T instanceof Uint16Array)return"Uint16Array"}else if(T.BYTES_PER_ELEMENT===1&&T instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(T){return T+=T===0?1:0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1}function isPow2(T){return!(T&T-1)&&!!T}function log2(T){let _=(T>65535?1:0)<<4;T>>>=_;let E=(T>255?1:0)<<3;return T>>>=E,_|=E,E=(T>15?1:0)<<2,T>>>=E,_|=E,E=(T>3?1:0)<<1,T>>>=E,_|=E,_|T>>1}function removeItems(T,_,E){const C=T.length;let A;if(_>=C||E===0)return;E=_+E>C?C-_:E;const R=C-E;for(A=_;A<R;++A)T[A]=T[A+E];T.length=R}function sign(T){return T===0?0:T<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(T,_,E,C){this.left=T,this.top=_,this.right=E,this.bottom=C}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function destroyTextureCache(){let T;for(T in TextureCache)TextureCache[T].destroy();for(T in BaseTextureCache)BaseTextureCache[T].destroy()}function clearTextureCache(){let T;for(T in TextureCache)delete TextureCache[T];for(T in BaseTextureCache)delete BaseTextureCache[T]}class CanvasRenderTarget{constructor(_,E,C){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=C||settings.RESOLUTION,this.resize(_,E)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(_,E){this._checkDestroyed(),this._canvas.width=Math.round(_*this.resolution),this._canvas.height=Math.round(E*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(_){this._checkDestroyed(),this._canvas.width=Math.round(_)}get height(){return this._checkDestroyed(),this._canvas.height}set height(_){this._checkDestroyed(),this._canvas.height=Math.round(_)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(T,_,E){for(let C=0,A=4*E*_;C<_;++C,A+=4)if(T[A+3]!==0)return!1;return!0}function checkColumn(T,_,E,C,A){const R=4*_;for(let I=C,F=C*R+4*E;I<=A;++I,F+=R)if(T[F+3]!==0)return!1;return!0}function getCanvasBoundingBox(T){const{width:_,height:E}=T,C=T.getContext("2d",{willReadFrequently:!0});if(C===null)throw new TypeError("Failed to get canvas 2D context");const A=C.getImageData(0,0,_,E).data;let R=0,I=0,F=_-1,B=E-1;for(;I<E&&checkRow(A,_,I);)++I;if(I===E)return BoundingBox.EMPTY;for(;checkRow(A,_,B);)--B;for(;checkColumn(A,_,R,I,B);)++R;for(;checkColumn(A,_,F,I,B);)--F;return++F,++B,new BoundingBox(R,I,F,B)}function trimCanvas(T){const _=getCanvasBoundingBox(T),{width:E,height:C}=_;let A=null;if(!_.isEmpty()){const R=T.getContext("2d");if(R===null)throw new TypeError("Failed to get canvas 2D context");A=R.getImageData(_.left,_.top,E,C)}return{width:E,height:C,data:A}}function determineCrossOrigin(T,_=globalThis.location){if(T.startsWith("data:"))return"";_=_||globalThis.location;const E=new URL(T,document.baseURI);return E.hostname!==_.hostname||E.port!==_.port||E.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(T,_=1){var C;const E=(C=settings.RETINA_PREFIX)==null?void 0:C.exec(T);return E?parseFloat(E[1]):_}var ExtensionType=(T=>(T.Renderer="renderer",T.Application="application",T.RendererSystem="renderer-webgl-system",T.RendererPlugin="renderer-webgl-plugin",T.CanvasRendererSystem="renderer-canvas-system",T.CanvasRendererPlugin="renderer-canvas-plugin",T.Asset="asset",T.LoadParser="load-parser",T.ResolveParser="resolve-parser",T.CacheParser="cache-parser",T.DetectionParser="detection-parser",T))(ExtensionType||{});const normalizeExtension=T=>{if(typeof T=="function"||typeof T=="object"&&T.extension){if(!T.extension)throw new Error("Extension class must have an extension object");T={...typeof T.extension!="object"?{type:T.extension}:T.extension,ref:T}}if(typeof T=="object")T={...T};else throw new Error("Invalid extension type");return typeof T.type=="string"&&(T.type=[T.type]),T},normalizePriority=(T,_)=>normalizeExtension(T).priority??_,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...T){return T.map(normalizeExtension).forEach(_=>{_.type.forEach(E=>{var C,A;return(A=(C=this._removeHandlers)[E])==null?void 0:A.call(C,_)})}),this},add(...T){return T.map(normalizeExtension).forEach(_=>{_.type.forEach(E=>{var R,I;const C=this._addHandlers,A=this._queue;C[E]?(R=C[E])==null||R.call(C,_):(A[E]=A[E]||[],(I=A[E])==null||I.push(_))})}),this},handle(T,_,E){var I;const C=this._addHandlers,A=this._removeHandlers;if(C[T]||A[T])throw new Error(`Extension type ${T} already has a handler`);C[T]=_,A[T]=E;const R=this._queue;return R[T]&&((I=R[T])==null||I.forEach(F=>_(F)),delete R[T]),this},handleByMap(T,_){return this.handle(T,E=>{E.name&&(_[E.name]=E.ref)},E=>{E.name&&delete _[E.name]})},handleByList(T,_,E=-1){return this.handle(T,C=>{_.includes(C.ref)||(_.push(C.ref),_.sort((A,R)=>normalizePriority(R,E)-normalizePriority(A,E)))},C=>{const A=_.indexOf(C.ref);A!==-1&&_.splice(A,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(T){let _="";for(let E=0;E<T;++E)E>0&&(_+=`
else `),E<T-1&&(_+=`if(test == ${E}.0){}`);return _}function checkMaxIfStatementsInShader(T,_){if(T===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const E=_.createShader(_.FRAGMENT_SHADER);for(;;){const C=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(T));if(_.shaderSource(E,C),_.compileShader(E),!_.getShaderParameter(E,_.COMPILE_STATUS))T=T/2|0;else break}return T}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(_){!!(this.data&1<<OFFSET$1)!==_&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(T,_){if(!T)return null;let E="";if(typeof T=="string"){const C=/\.(\w{3,4})(?:$|\?|#)/i.exec(T);C&&(E=C[1].toLowerCase())}for(let C=INSTALLED.length-1;C>=0;--C){const A=INSTALLED[C];if(A.test&&A.test(T,E))return new A(T,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,E,C,A,R,I,F,B){if(arguments.length>8)throw new Error("max arguments reached");const{name:U,items:V}=this;this._aliasCount++;for(let D=0,O=V.length;D<O;D++)V[D][U](_,E,C,A,R,I,F,B);return V===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const E=this.items.indexOf(_);return E!==-1&&(this.ensureNonAliasedItems(),this.items.splice(E,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,E=0){this._width=_,this._height=E,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,E){(_!==this._width||E!==this._height)&&(this._width=_,this._height=E,this.onResize.emit(_,E))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,E,C){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,E){return!1}}class BufferResource extends Resource{constructor(_,E){const{width:C,height:A}=E||{};if(!C||!A)throw new Error("BufferResource width or height invalid");super(C,A),this.data=_,this.unpackAlignment=E.unpackAlignment??4}upload(_,E,C){const A=_.gl;A.pixelStorei(A.UNPACK_ALIGNMENT,this.unpackAlignment),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.alphaMode===ALPHA_MODES.UNPACK);const R=E.realWidth,I=E.realHeight;return C.width===R&&C.height===I?A.texSubImage2D(E.target,0,0,0,R,I,E.format,C.type,this.data):(C.width=R,C.height=I,A.texImage2D(E.target,0,C.internalFormat,R,I,0,E.format,C.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class as extends EventEmitter{constructor(_=null,E=null){super(),E=Object.assign({},as.defaultOptions,E);const{alphaMode:C,mipmap:A,anisotropicLevel:R,scaleMode:I,width:F,height:B,wrapMode:U,format:V,type:D,target:O,resolution:L,resourceOptions:z}=E;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,z),_.internal=!0),this.resolution=L||settings.RESOLUTION,this.width=Math.round((F||0)*this.resolution)/this.resolution,this.height=Math.round((B||0)*this.resolution)/this.resolution,this._mipmap=A,this.anisotropicLevel=R,this._wrapMode=U,this._scaleMode=I,this.format=V,this.type=D,this.target=O,this.alphaMode=C,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=F>0&&B>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,E){let C;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,C=!0),E!==void 0&&E!==this.mipmap&&(this.mipmap=E,C=!0),C&&this.dirtyStyleId++,this}setSize(_,E,C){return C=C||this.resolution,this.setRealSize(_*C,E*C,C)}setRealSize(_,E,C){return this.resolution=C||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(E)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const E=this.resolution;return E===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*E)/_,this.height=Math.round(this.height*E)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),as.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,E,C=settings.STRICT_TEXTURE_CACHE){const A=typeof _=="string";let R=null;if(A)R=_;else{if(!_._pixiId){const F=(E==null?void 0:E.pixiIdPrefix)||"pixiid";_._pixiId=`${F}_${uid()}`}R=_._pixiId}let I=BaseTextureCache[R];if(A&&C&&!I)throw new Error(`The cacheId "${R}" does not exist in BaseTextureCache.`);return I||(I=new as(_,E),I.cacheId=R,as.addToCache(I,R)),I}static fromBuffer(_,E,C,A){_=_||new Float32Array(E*C*4);const R=new BufferResource(_,{width:E,height:C,...A==null?void 0:A.resourceOptions});let I,F;return _ instanceof Float32Array?(I=FORMATS.RGBA,F=TYPES.FLOAT):_ instanceof Int32Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.INT):_ instanceof Uint32Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.SHORT):_ instanceof Uint16Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(I=FORMATS.RGBA,F=TYPES.BYTE):(I=FORMATS.RGBA,F=TYPES.UNSIGNED_BYTE),R.internal=!0,new as(R,Object.assign({},defaultBufferOptions,{type:F,format:I},A))}static addToCache(_,E){E&&(_.textureCacheIds.includes(E)||_.textureCacheIds.push(E),BaseTextureCache[E]&&BaseTextureCache[E]!==_&&console.warn(`BaseTexture added to the cache with an id [${E}] that already had an entry`),BaseTextureCache[E]=_)}static removeFromCache(_){if(typeof _=="string"){const E=BaseTextureCache[_];if(E){const C=E.textureCacheIds.indexOf(_);return C>-1&&E.textureCacheIds.splice(C,1),delete BaseTextureCache[_],E}}else if(_!=null&&_.textureCacheIds){for(let E=0;E<_.textureCacheIds.length;++E)delete BaseTextureCache[_.textureCacheIds[E]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(_,E=!0,C=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=C,this.static=E,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Buffer(_)}}class Attribute{constructor(_,E=0,C=!1,A=TYPES.FLOAT,R,I,F,B=1){this.buffer=_,this.size=E,this.normalized=C,this.type=A,this.stride=R,this.start=I,this.instance=F,this.divisor=B}destroy(){this.buffer=null}static from(_,E,C,A,R){return new Attribute(_,E,C,A,R)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(T,_){let E=0,C=0;const A={};for(let B=0;B<T.length;B++)C+=_[B],E+=T[B].length;const R=new ArrayBuffer(E*4);let I=null,F=0;for(let B=0;B<T.length;B++){const U=_[B],V=T[B],D=getBufferType(V);A[D]||(A[D]=new map$1[D](R)),I=A[D];for(let O=0;O<V.length;O++){const L=(O/U|0)*C+F,z=O%U;I[L+z]=V[O]}F+=U}return new Float32Array(R)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],E={}){this.buffers=_,this.indexBuffer=null,this.attributes=E,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,E,C=0,A=!1,R,I,F,B=!1){if(!E)throw new Error("You must pass a buffer when creating an attribute");E instanceof Buffer||(E instanceof Array&&(E=new Float32Array(E)),E=new Buffer(E));const U=_.split("|");if(U.length>1){for(let D=0;D<U.length;D++)this.addAttribute(U[D],E,C,A,R);return this}let V=this.buffers.indexOf(E);return V===-1&&(this.buffers.push(E),V=this.buffers.length-1),this.attributes[_]=new Attribute(V,C,A,R,I,F,B),this.instanced=this.instanced||B,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],E=[],C=new Buffer;let A;for(A in this.attributes){const R=this.attributes[A],I=this.buffers[R.buffer];_.push(I.data),E.push(R.size*byteSizeMap$1[R.type]/4),R.buffer=0}for(C.data=interleaveTypedArrays(_,E),A=0;A<this.buffers.length;A++)this.buffers[A]!==this.indexBuffer&&this.buffers[A].destroy();return this.buffers=[C],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const E=this.attributes[_];return this.buffers[E.buffer].data.length/(E.stride/4||E.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let E=0;E<this.buffers.length;E++)_.buffers[E]=new Buffer(this.buffers[E].data.slice(0));for(const E in this.attributes){const C=this.attributes[E];_.attributes[E]=new Attribute(C.buffer,C.size,C.normalized,C.type,C.stride,C.start,C.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const E=new Geometry,C=[],A=[],R=[];let I;for(let F=0;F<_.length;F++){I=_[F];for(let B=0;B<I.buffers.length;B++)A[B]=A[B]||0,A[B]+=I.buffers[B].data.length,R[B]=0}for(let F=0;F<I.buffers.length;F++)C[F]=new map[getBufferType(I.buffers[F].data)](A[F]),E.buffers[F]=new Buffer(C[F]);for(let F=0;F<_.length;F++){I=_[F];for(let B=0;B<I.buffers.length;B++)C[B].set(I.buffers[B].data,R[B]),R[B]+=I.buffers[B].data.length}if(E.attributes=I.attributes,I.indexBuffer){E.indexBuffer=E.buffers[I.buffers.indexOf(I.indexBuffer)],E.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let F=0,B=0,U=0,V=0;for(let D=0;D<I.buffers.length;D++)if(I.buffers[D]!==I.indexBuffer){V=D;break}for(const D in I.attributes){const O=I.attributes[D];(O.buffer|0)===V&&(B+=O.size*byteSizeMap$1[O.type]/4)}for(let D=0;D<_.length;D++){const O=_[D].indexBuffer.data;for(let L=0;L<O.length;L++)E.indexBuffer.data[L+U]+=F;F+=_[D].buffers[V].data.length/B,U+=O.length}}return E}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer(null,_,!1),this._indexBuffer=new Buffer(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(T=>(T[T.POLY=0]="POLY",T[T.RECT=1]="RECT",T[T.CIRC=2]="CIRC",T[T.ELIP=3]="ELIP",T[T.RREC=4]="RREC",T))(SHAPES||{});class Point{constructor(_=0,E=0){this.x=0,this.y=0,this.x=_,this.y=E}clone(){return new Point(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,E=_){return this.x=_,this.y=E,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];let Rectangle$1=class Ml{constructor(_=0,E=0,C=0,A=0){this.x=Number(_),this.y=Number(E),this.width=Number(C),this.height=Number(A),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ml(0,0,0,0)}clone(){return new Ml(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,E){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&E>=this.y&&E<this.y+this.height}intersects(_,E){if(!E){const se=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=se)return!1;const ne=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>ne}const C=this.left,A=this.right,R=this.top,I=this.bottom;if(A<=C||I<=R)return!1;const F=tempPoints$1[0].set(_.left,_.top),B=tempPoints$1[1].set(_.left,_.bottom),U=tempPoints$1[2].set(_.right,_.top),V=tempPoints$1[3].set(_.right,_.bottom);if(U.x<=F.x||B.y<=F.y)return!1;const D=Math.sign(E.a*E.d-E.b*E.c);if(D===0||(E.apply(F,F),E.apply(B,B),E.apply(U,U),E.apply(V,V),Math.max(F.x,B.x,U.x,V.x)<=C||Math.min(F.x,B.x,U.x,V.x)>=A||Math.max(F.y,B.y,U.y,V.y)<=R||Math.min(F.y,B.y,U.y,V.y)>=I))return!1;const O=D*(B.y-F.y),L=D*(F.x-B.x),z=O*C+L*R,W=O*A+L*R,X=O*C+L*I,Y=O*A+L*I;if(Math.max(z,W,X,Y)<=O*F.x+L*F.y||Math.min(z,W,X,Y)>=O*V.x+L*V.y)return!1;const K=D*(F.y-U.y),Q=D*(U.x-F.x),ee=K*C+Q*R,J=K*A+Q*R,ie=K*C+Q*I,re=K*A+Q*I;return!(Math.max(ee,J,ie,re)<=K*F.x+Q*F.y||Math.min(ee,J,ie,re)>=K*V.x+Q*V.y)}pad(_=0,E=_){return this.x-=_,this.y-=E,this.width+=_*2,this.height+=E*2,this}fit(_){const E=Math.max(this.x,_.x),C=Math.min(this.x+this.width,_.x+_.width),A=Math.max(this.y,_.y),R=Math.min(this.y+this.height,_.y+_.height);return this.x=E,this.width=Math.max(C-E,0),this.y=A,this.height=Math.max(R-A,0),this}ceil(_=1,E=.001){const C=Math.ceil((this.x+this.width-E)*_)/_,A=Math.ceil((this.y+this.height-E)*_)/_;return this.x=Math.floor((this.x+E)*_)/_,this.y=Math.floor((this.y+E)*_)/_,this.width=C-this.x,this.height=A-this.y,this}enlarge(_){const E=Math.min(this.x,_.x),C=Math.max(this.x+this.width,_.x+_.width),A=Math.min(this.y,_.y),R=Math.max(this.y+this.height,_.y+_.height);return this.x=E,this.width=C-E,this.y=A,this.height=R-A,this}};Rectangle$1.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(_=0,E=0,C=0){this.x=_,this.y=E,this.radius=C,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(_,E){if(this.radius<=0)return!1;const C=this.radius*this.radius;let A=this.x-_,R=this.y-E;return A*=A,R*=R,A+R<=C}getBounds(){return new Rectangle$1(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(_=0,E=0,C=0,A=0){this.x=_,this.y=E,this.width=C,this.height=A,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(_,E){if(this.width<=0||this.height<=0)return!1;let C=(_-this.x)/this.width,A=(E-this.y)/this.height;return C*=C,A*=A,C+A<=1}getBounds(){return new Rectangle$1(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(..._){let E=Array.isArray(_[0])?_[0]:_;if(typeof E[0]!="number"){const C=[];for(let A=0,R=E.length;A<R;A++)C.push(E[A].x,E[A].y);E=C}this.points=E,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),E=new Polygon(_);return E.closeStroke=this.closeStroke,E}contains(_,E){let C=!1;const A=this.points.length/2;for(let R=0,I=A-1;R<A;I=R++){const F=this.points[R*2],B=this.points[R*2+1],U=this.points[I*2],V=this.points[I*2+1];B>E!=V>E&&_<(U-F)*((E-B)/(V-B))+F&&(C=!C)}return C}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((T,_)=>`${T}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,E=0,C=0,A=0,R=20){this.x=_,this.y=E,this.width=C,this.height=A,this.radius=R,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,E){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&E>=this.y&&E<=this.y+this.height){const C=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(E>=this.y+C&&E<=this.y+this.height-C||_>=this.x+C&&_<=this.x+this.width-C)return!0;let A=_-(this.x+C),R=E-(this.y+C);const I=C*C;if(A*A+R*R<=I||(A=_-(this.x+this.width-C),A*A+R*R<=I)||(R=E-(this.y+this.height-C),A*A+R*R<=I)||(A=_-(this.x+C),A*A+R*R<=I))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,E=0,C=0,A=1,R=0,I=0){this.array=null,this.a=_,this.b=E,this.c=C,this.d=A,this.tx=R,this.ty=I}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,E,C,A,R,I){return this.a=_,this.b=E,this.c=C,this.d=A,this.tx=R,this.ty=I,this}toArray(_,E){this.array||(this.array=new Float32Array(9));const C=E||this.array;return _?(C[0]=this.a,C[1]=this.b,C[2]=0,C[3]=this.c,C[4]=this.d,C[5]=0,C[6]=this.tx,C[7]=this.ty,C[8]=1):(C[0]=this.a,C[1]=this.c,C[2]=this.tx,C[3]=this.b,C[4]=this.d,C[5]=this.ty,C[6]=0,C[7]=0,C[8]=1),C}apply(_,E){E=E||new Point;const C=_.x,A=_.y;return E.x=this.a*C+this.c*A+this.tx,E.y=this.b*C+this.d*A+this.ty,E}applyInverse(_,E){E=E||new Point;const C=1/(this.a*this.d+this.c*-this.b),A=_.x,R=_.y;return E.x=this.d*C*A+-this.c*C*R+(this.ty*this.c-this.tx*this.d)*C,E.y=this.a*C*R+-this.b*C*A+(-this.ty*this.a+this.tx*this.b)*C,E}translate(_,E){return this.tx+=_,this.ty+=E,this}scale(_,E){return this.a*=_,this.d*=E,this.c*=_,this.b*=E,this.tx*=_,this.ty*=E,this}rotate(_){const E=Math.cos(_),C=Math.sin(_),A=this.a,R=this.c,I=this.tx;return this.a=A*E-this.b*C,this.b=A*C+this.b*E,this.c=R*E-this.d*C,this.d=R*C+this.d*E,this.tx=I*E-this.ty*C,this.ty=I*C+this.ty*E,this}append(_){const E=this.a,C=this.b,A=this.c,R=this.d;return this.a=_.a*E+_.b*A,this.b=_.a*C+_.b*R,this.c=_.c*E+_.d*A,this.d=_.c*C+_.d*R,this.tx=_.tx*E+_.ty*A+this.tx,this.ty=_.tx*C+_.ty*R+this.ty,this}setTransform(_,E,C,A,R,I,F,B,U){return this.a=Math.cos(F+U)*R,this.b=Math.sin(F+U)*R,this.c=-Math.sin(F-B)*I,this.d=Math.cos(F-B)*I,this.tx=_-(C*this.a+A*this.c),this.ty=E-(C*this.b+A*this.d),this}prepend(_){const E=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const C=this.a,A=this.c;this.a=C*_.a+this.b*_.c,this.b=C*_.b+this.b*_.d,this.c=A*_.a+this.d*_.c,this.d=A*_.b+this.d*_.d}return this.tx=E*_.a+this.ty*_.c+_.tx,this.ty=E*_.b+this.ty*_.d+_.ty,this}decompose(_){const E=this.a,C=this.b,A=this.c,R=this.d,I=_.pivot,F=-Math.atan2(-A,R),B=Math.atan2(C,E),U=Math.abs(F+B);return U<1e-5||Math.abs(PI_2-U)<1e-5?(_.rotation=B,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=F,_.skew.y=B),_.scale.x=Math.sqrt(E*E+C*C),_.scale.y=Math.sqrt(A*A+R*R),_.position.x=this.tx+(I.x*E+I.y*A),_.position.y=this.ty+(I.x*C+I.y*R),_}invert(){const _=this.a,E=this.b,C=this.c,A=this.d,R=this.tx,I=_*A-E*C;return this.a=A/I,this.b=-E/I,this.c=-C/I,this.d=_/I,this.tx=(C*this.ty-A*R)/I,this.ty=-(_*this.ty-E*R)/I,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let T=0;T<16;T++){const _=[];rotationCayley.push(_);for(let E=0;E<16;E++){const C=signum(ux[T]*ux[E]+vx[T]*uy[E]),A=signum(uy[T]*ux[E]+vy[T]*uy[E]),R=signum(ux[T]*vx[E]+vx[T]*vy[E]),I=signum(uy[T]*vx[E]+vy[T]*vy[E]);for(let F=0;F<16;F++)if(ux[F]===C&&uy[F]===A&&vx[F]===R&&vy[F]===I){_.push(F);break}}}for(let T=0;T<16;T++){const _=new Matrix;_.set(ux[T],uy[T],vx[T],vy[T],0,0),rotationMatrices.push(_)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:T=>ux[T],uY:T=>uy[T],vX:T=>vx[T],vY:T=>vy[T],inv:T=>T&8?T&15:-T&7,add:(T,_)=>rotationCayley[T][_],sub:(T,_)=>rotationCayley[T][groupD8.inv(_)],rotate180:T=>T^4,isVertical:T=>(T&3)===2,byDirection:(T,_)=>Math.abs(T)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(T)?T>0?groupD8.E:groupD8.W:_>0?T>0?groupD8.SE:groupD8.SW:T>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(T,_,E=0,C=0)=>{const A=rotationMatrices[groupD8.inv(_)];A.tx=E,A.ty=C,T.append(A)}};class ObservablePoint{constructor(_,E,C=0,A=0){this._x=C,this._y=A,this.cb=_,this.scope=E}clone(_=this.cb,E=this.scope){return new ObservablePoint(_,E,this._x,this._y)}set(_=0,E=_){return(this._x!==_||this._y!==E)&&(this._x=_,this._y=E,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const T=this.localTransform;this._localID!==this._currentLocalID&&(T.a=this._cx*this.scale.x,T.b=this._sx*this.scale.x,T.c=this._cy*this.scale.y,T.d=this._sy*this.scale.y,T.tx=this.position.x-(this.pivot.x*T.a+this.pivot.y*T.c),T.ty=this.position.y-(this.pivot.x*T.b+this.pivot.y*T.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(T){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==T._worldID){const E=T.worldTransform,C=this.worldTransform;C.a=_.a*E.a+_.b*E.c,C.b=_.a*E.b+_.b*E.d,C.c=_.c*E.a+_.d*E.c,C.d=_.c*E.b+_.d*E.d,C.tx=_.tx*E.a+_.ty*E.c+E.tx,C.ty=_.tx*E.b+_.ty*E.d+E.ty,this._parentID=T._worldID,this._worldID++}}setFromMatrix(T){T.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(T){this._rotation!==T&&(this._rotation=T,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(T,_,E){const C=T.createShader(_);return T.shaderSource(C,E),T.compileShader(C),C}function booleanArray(T){const _=new Array(T);for(let E=0;E<_.length;E++)_[E]=!1;return _}function defaultValue(T,_){switch(T){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:T=>T.type==="float"&&T.size===1&&!T.isArray,code:T=>`
            if(uv["${T}"] !== ud["${T}"].value)
            {
                ud["${T}"].value = uv["${T}"]
                gl.uniform1f(ud["${T}"].location, uv["${T}"])
            }
            `},{test:(T,_)=>(T.type==="sampler2D"||T.type==="samplerCube"||T.type==="sampler2DArray")&&T.size===1&&!T.isArray&&(_==null||_.castToBaseTexture!==void 0),code:T=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${T}"], t);

            if(ud["${T}"].value !== t)
            {
                ud["${T}"].value = t;
                gl.uniform1i(ud["${T}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(T,_)=>T.type==="mat3"&&T.size===1&&!T.isArray&&_.a!==void 0,code:T=>`
            gl.uniformMatrix3fv(ud["${T}"].location, false, uv["${T}"].toArray(true));
            `,codeUbo:T=>`
                var ${T}_matrix = uv.${T}.toArray(true);

                data[offset] = ${T}_matrix[0];
                data[offset+1] = ${T}_matrix[1];
                data[offset+2] = ${T}_matrix[2];
        
                data[offset + 4] = ${T}_matrix[3];
                data[offset + 5] = ${T}_matrix[4];
                data[offset + 6] = ${T}_matrix[5];
        
                data[offset + 8] = ${T}_matrix[6];
                data[offset + 9] = ${T}_matrix[7];
                data[offset + 10] = ${T}_matrix[8];
            `},{test:(T,_)=>T.type==="vec2"&&T.size===1&&!T.isArray&&_.x!==void 0,code:T=>`
                cv = ud["${T}"].value;
                v = uv["${T}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${T}"].location, v.x, v.y);
                }`,codeUbo:T=>`
                v = uv.${T};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:T=>T.type==="vec2"&&T.size===1&&!T.isArray,code:T=>`
                cv = ud["${T}"].value;
                v = uv["${T}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${T}"].location, v[0], v[1]);
                }
            `},{test:(T,_)=>T.type==="vec4"&&T.size===1&&!T.isArray&&_.width!==void 0,code:T=>`
                cv = ud["${T}"].value;
                v = uv["${T}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${T}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:T=>`
                    v = uv.${T};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(T,_)=>T.type==="vec4"&&T.size===1&&!T.isArray&&_.red!==void 0,code:T=>`
                cv = ud["${T}"].value;
                v = uv["${T}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${T}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:T=>`
                    v = uv.${T};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(T,_)=>T.type==="vec3"&&T.size===1&&!T.isArray&&_.red!==void 0,code:T=>`
                cv = ud["${T}"].value;
                v = uv["${T}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${T}"].location, v.red, v.green, v.blue)
                }`,codeUbo:T=>`
                    v = uv.${T};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:T=>T.type==="vec4"&&T.size===1&&!T.isArray,code:T=>`
                cv = ud["${T}"].value;
                v = uv["${T}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${T}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(T,_){var C;const E=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const A in T.uniforms){const R=_[A];if(!R){((C=T.uniforms[A])==null?void 0:C.group)===!0&&(T.uniforms[A].ubo?E.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${A}, '${A}');
                    `):E.push(`
                        renderer.shader.syncUniformGroup(uv.${A}, syncData);
                    `));continue}const I=T.uniforms[A];let F=!1;for(let B=0;B<uniformParsers.length;B++)if(uniformParsers[B].test(R,I)){E.push(uniformParsers[B].code(A,I)),F=!0;break}if(!F){const B=(R.size===1&&!R.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[R.type].replace("location",`ud["${A}"].location`);E.push(`
            cu = ud["${A}"];
            cv = cu.value;
            v = uv["${A}"];
            ${B};`)}}return new Function("ud","uv","renderer","syncData",E.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const T=settings.ADAPTER.createCanvas();let _;settings.PREFER_ENV>=ENV.WEBGL2&&(_=T.getContext("webgl2",{})),_||(_=T.getContext("webgl",{})||T.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const T=getTestContext();if(T&&T.getShaderPrecisionFormat){const _=T.getShaderPrecisionFormat(T.FRAGMENT_SHADER,T.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(T,_){const E=T.getShaderSource(_).split(`
`).map((U,V)=>`${V}: ${U}`),C=T.getShaderInfoLog(_),A=C.split(`
`),R={},I=A.map(U=>parseFloat(U.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(U=>U&&!R[U]?(R[U]=!0,!0):!1),F=[""];I.forEach(U=>{E[U-1]=`%c${E[U-1]}%c`,F.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const B=E.join(`
`);F[0]=B,console.error(C),console.groupCollapsed("click to view full shader code"),console.warn(...F),console.groupEnd()}function logProgramError(T,_,E,C){T.getProgramParameter(_,T.LINK_STATUS)||(T.getShaderParameter(E,T.COMPILE_STATUS)||logPrettyShaderError(T,E),T.getShaderParameter(C,T.COMPILE_STATUS)||logPrettyShaderError(T,C),console.error("PixiJS Error: Could not initialize shader."),T.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",T.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(T){return GLSL_TO_SIZE[T]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(T,_){if(!GL_TABLE){const E=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let C=0;C<E.length;++C){const A=E[C];GL_TABLE[T[A]]=GL_TO_GLSL_TYPES[A]}}return GL_TABLE[_]}function setPrecision(T,_,E){if(T.substring(0,9)!=="precision"){let C=_;return _===PRECISION.HIGH&&E!==PRECISION.HIGH&&(C=PRECISION.MEDIUM),`precision ${C} float;
${T}`}else if(E!==PRECISION.HIGH&&T.substring(0,15)==="precision highp")return T.replace("precision highp","precision mediump");return T}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class ls{constructor(_,E,C="pixi-shader",A={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||ls.defaultVertexSrc,this.fragmentSrc=E||ls.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=A,this.vertexSrc.substring(0,8)!=="#version"&&(C=C.replace(/\s+/g,"-"),nameCache[C]?(nameCache[C]++,C+=`-${nameCache[C]}`):nameCache[C]=1,this.vertexSrc=`#define SHADER_NAME ${C}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${C}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,ls.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,ls.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,E,C){const A=_+E;let R=ProgramCache[A];return R||(ProgramCache[A]=R=new ls(_,E,C)),R}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,E,C){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!E,this.ubo=!!C,_ instanceof Buffer?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,E,C){if(!this.ubo)this.uniforms[_]=new UniformGroup(E,C);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,E,C){return new UniformGroup(_,E,C)}static uboFrom(_,E){return new UniformGroup(_,E??!0,!0)}}class Shader{constructor(_,E){this.uniformBindCount=0,this.program=_,E?E instanceof UniformGroup?this.uniformGroup=E:this.uniformGroup=new UniformGroup(E):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,E){if(E.uniforms[_])return!0;for(const C in E.uniforms){const A=E.uniforms[C];if(A.group===!0&&this.checkUniformExists(_,A))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,E,C){const A=Program.from(_,E);return new Shader(A,C)}}class BatchShaderGenerator{constructor(_,E){if(this.vertexSrc=_,this.fragTemplate=E,this.programCache={},this.defaultGroupCache={},!E.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!E.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const C=new Int32Array(_);for(let R=0;R<_;R++)C[R]=R;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:C},!0);let A=this.fragTemplate;A=A.replace(/%count%/gi,`${_}`),A=A.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,A)}const E={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],E)}generateSampleSrc(_){let E="";E+=`
`,E+=`
`;for(let C=0;C<_;C++)C>0&&(E+=`
else `),C<_-1&&(E+=`if(vTextureId < ${C}.5)`),E+=`
{`,E+=`
	color = texture2D(uSamplers[${C}], vTextureCoord);`,E+=`
}`;return E+=`
`,E+=`
`,E}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(T){let _=!0;const E=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const C=E.userAgent.match(/OS (\d+)_(\d+)?/);C&&parseInt(C[1],10)<11&&(_=!1)}if(isMobile.android.device){const C=E.userAgent.match(/Android\s([0-9.]*)/);C&&parseInt(C[1],10)<7&&(_=!1)}}return _?T:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class Dn extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=Dn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=Dn.defaultVertexSrc,fragment:E=Dn.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,E)}contextChange(){const _=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),Dn.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let E=0;E<this._packedGeometryPoolSize;E++)this._packedGeometries[E]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:E}=Dn,C=this.size/4,A=Math.floor(C/this.maxTextures)+1;for(;_.length<C;)_.push(new BatchDrawCall);for(;E.length<A;)E.push(new BatchTextureArray);for(let R=0;R<this.maxTextures;R++)this._tempBoundTextures[R]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:E}=this,C=Dn._textureArrayPool,A=this.renderer.batch,R=this._tempBoundTextures,I=this.renderer.textureGC.count;let F=++BaseTexture._globalBatch,B=0,U=C[0],V=0;A.copyBoundTextures(R,E);for(let D=0;D<this._bufferSize;++D){const O=_[D];_[D]=null,O._batchEnabled!==F&&(U.count>=E&&(A.boundArray(U,R,F,E),this.buildDrawCalls(U,V,D),V=D,U=C[++B],++F),O._batchEnabled=F,O.touched=I,U.elements[U.count++]=O)}U.count>0&&(A.boundArray(U,R,F,E),this.buildDrawCalls(U,V,this._bufferSize),++B,++F);for(let D=0;D<R.length;D++)R[D]=null;BaseTexture._globalBatch=F}buildDrawCalls(_,E,C){const{_bufferedElements:A,_attributeBuffer:R,_indexBuffer:I,vertexSize:F}=this,B=Dn._drawCallPool;let U=this._dcIndex,V=this._aIndex,D=this._iIndex,O=B[U];O.start=this._iIndex,O.texArray=_;for(let L=E;L<C;++L){const z=A[L],W=z._texture.baseTexture,X=premultiplyBlendMode[W.alphaMode?1:0][z.blendMode];A[L]=null,E<L&&O.blend!==X&&(O.size=D-O.start,E=L,O=B[++U],O.texArray=_,O.start=D),this.packInterleavedGeometry(z,R,I,V,D),V+=z.vertexData.length/2*F,D+=z.indices.length,O.blend=X}E<C&&(O.size=D-O.start,++U),this._dcIndex=U,this._aIndex=V,this._iIndex=D}bindAndClearTexArray(_){const E=this.renderer.texture;for(let C=0;C<_.count;C++)E.bind(_.elements[C],_.ids[C]),_.elements[C]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:E,_indexBuffer:C}=this;Dn.canUploadSameBuffer?(_[this._flushId]._buffer.update(E.rawBinaryData),_[this._flushId]._indexBuffer.update(C),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(E.rawBinaryData),_[this._flushId]._indexBuffer.update(C),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:E,state:C}=this.renderer,A=Dn._drawCallPool;let R=null;for(let I=0;I<_;I++){const{texArray:F,type:B,size:U,start:V,blend:D}=A[I];R!==F&&(R=F,this.bindAndClearTexArray(F)),this.state.blendMode=D,C.set(this.state),E.drawElements(B,U,E.UNSIGNED_SHORT,V*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Dn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const E=nextPow2(Math.ceil(_/8)),C=log2(E),A=E*8;this._aBuffers.length<=C&&(this._iBuffers.length=C+1);let R=this._aBuffers[A];return R||(this._aBuffers[A]=R=new ViewableBuffer(A*this.vertexSize*4)),R}getIndexBuffer(_){const E=nextPow2(Math.ceil(_/12)),C=log2(E),A=E*12;this._iBuffers.length<=C&&(this._iBuffers.length=C+1);let R=this._iBuffers[C];return R||(this._iBuffers[C]=R=new Uint16Array(A)),R}packInterleavedGeometry(_,E,C,A,R){const{uint32View:I,float32View:F}=E,B=A/this.vertexSize,U=_.uvs,V=_.indices,D=_.vertexData,O=_._texture.baseTexture._batchLocation,L=Math.min(_.worldAlpha,1),z=Color.shared.setValue(_._tintRGB).toPremultiplied(L,_._texture.baseTexture.alphaMode>0);for(let W=0;W<D.length;W+=2)F[A++]=D[W],F[A++]=D[W+1],F[A++]=U[W],F[A++]=U[W+1],I[A++]=z,F[A++]=O;for(let W=0;W<V.length;W++)C[R++]=B+V[W]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class zs extends Shader{constructor(_,E,C){const A=Program.from(_||zs.defaultVertexSrc,E||zs.defaultFragmentSrc);super(A,C),this.padding=0,this.resolution=zs.defaultResolution,this.multisample=zs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,E,C,A,R){_.applyFilter(this,E,C,A)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:E,background:C,backgroundAlpha:A}=_,R=C??E;R!==void 0&&(this.color=R),this.alpha=A}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,E){const{boundTextures:C}=this.renderer.texture;for(let A=E-1;A>=0;--A)_[A]=C[A]||null,_[A]&&(_[A]._batchLocation=A)}boundArray(_,E,C,A){const{elements:R,ids:I,count:F}=_;let B=0;for(let U=0;U<F;U++){const V=R[U],D=V._batchLocation;if(D>=0&&D<A&&E[D]===V){I[U]=D;continue}for(;B<A;){const O=E[B];if(O&&O._batchEnabled===C&&O._batchLocation===B){B++;continue}I[U]=B,V._batchLocation=B,E[B]=V;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const E=this.renderer.background.alpha<1,C=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:E,premultipliedAlpha:C,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const E=this.renderer.view;E.addEventListener!==void 0&&(E.addEventListener("webglcontextlost",this.handleContextLost,!1),E.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const E=this.createContext(this.renderer.view,_);this.initFromContext(E)}createContext(_,E){let C;if(settings.PREFER_ENV>=ENV.WEBGL2&&(C=_.getContext("webgl2",E)),C)this.webGLVersion=2;else if(this.webGLVersion=1,C=_.getContext("webgl",E)||_.getContext("experimental-webgl",E),!C)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=C,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,E={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc"),bptc:_.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,E,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,E,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const E=_.getContextAttributes(),C="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;C&&(this.webGLVersion=2),E&&!E.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const A=C||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=A,A||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(_,E){if(this.width=Math.round(_),this.height=Math.round(E),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,E){return this.colorTextures[_]=E||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,E){if(_=Math.round(_),E=Math.round(E),!_||!E)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&E===this.height)){this.width=_,this.height=E,this.dirtyId++,this.dirtySize++;for(let C=0;C<this.colorTextures.length;C++){const A=this.colorTextures[C],R=A.resolution;A.setSize(_/R,E/R)}if(this.depthTexture){const C=this.depthTexture.resolution;this.depthTexture.setSize(_/C,E/C)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const E=arguments[0],C=arguments[1],A=arguments[2],R=arguments[3];_={width:E,height:C,scaleMode:A,resolution:R}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,E){this.framebuffer.resize(_*this.resolution,E*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const E=_,C=E.naturalWidth||E.videoWidth||E.displayWidth||E.width,A=E.naturalHeight||E.videoHeight||E.displayHeight||E.height;super(C,A),this.source=_,this.noSubImage=!1}static crossOrigin(_,E,C){C===void 0&&!E.startsWith("data:")?_.crossOrigin=determineCrossOrigin(E):C!==!1&&(_.crossOrigin=typeof C=="string"?C:"anonymous")}upload(_,E,C,A){const R=_.gl,I=E.realWidth,F=E.realHeight;if(A=A||this.source,typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement){if(!A.complete||A.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&A instanceof HTMLVideoElement&&A.readyState<=1)return!1;return R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&E.target===R.TEXTURE_2D&&C.width===I&&C.height===F?R.texSubImage2D(R.TEXTURE_2D,0,0,0,E.format,C.type,A):(C.width=I,C.height=F,R.texImage2D(E.target,0,C.internalFormat,E.format,C.type,A)),!0}update(){if(this.destroyed)return;const _=this.source,E=_.naturalWidth||_.videoWidth||_.width,C=_.naturalHeight||_.videoHeight||_.height;this.resize(E,C),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,E){if(E=E||{},typeof _=="string"){const C=new Image;BaseImageResource.crossOrigin(C,_,E.crossorigin),C.src=_,_=C}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(E.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof E.alphaMode=="number"?E.alphaMode:null,this.bitmap=null,this._load=null,E.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((E,C)=>{const A=this.source;this.url=A.src;const R=()=>{this.destroyed||(A.onload=null,A.onerror=null,this.update(),this._load=null,this.createBitmap?E(this.process()):E(this))};A.complete&&A.src?R():(A.onload=R,A.onerror=I=>{C(I),this.onError.emit(I)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const E=globalThis.createImageBitmap,C=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:C?"cors":"no-cors"}).then(A=>A.blob()).then(A=>E(A,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(A=>this.destroyed?Promise.reject():(this.bitmap=A,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,E,C){if(typeof this.alphaMode=="number"&&(E.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,E,C);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,E,C,this.bitmap),!this.preserveBitmap){let A=!0;const R=E._glTextures;for(const I in R){const F=R[I];if(F!==C&&F.dirtyId!==E.dirtyId){A=!1;break}}A&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,E,C){const A=E.width,R=E.height;if(C){const I=_.width/2/A,F=_.height/2/R,B=_.x/A+I,U=_.y/R+F;C=groupD8.add(C,groupD8.NW),this.x0=B+I*groupD8.uX(C),this.y0=U+F*groupD8.uY(C),C=groupD8.add(C,2),this.x1=B+I*groupD8.uX(C),this.y1=U+F*groupD8.uY(C),C=groupD8.add(C,2),this.x2=B+I*groupD8.uX(C),this.y2=U+F*groupD8.uY(C),C=groupD8.add(C,2),this.x3=B+I*groupD8.uX(C),this.y3=U+F*groupD8.uY(C)}else this.x0=_.x/A,this.y0=_.y/R,this.x1=(_.x+_.width)/A,this.y1=_.y/R,this.x2=(_.x+_.width)/A,this.y2=(_.y+_.height)/R,this.x3=_.x/A,this.y3=(_.y+_.height)/R;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(T){T.destroy=function(){},T.on=function(){},T.once=function(){},T.emit=function(){}}class Texture extends EventEmitter{constructor(_,E,C,A,R,I,F){if(super(),this.noFrame=!1,E||(this.noFrame=!0,E=new Rectangle$1(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=E,this.trim=A,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=C||E,this._rotate=Number(R||0),R===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=I?new Point(I.x,I.y):new Point(0,0),this.defaultBorders=F,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=E:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:E}=this.baseTexture;E!=null&&E.url&&TextureCache[E.url]&&Texture.removeFromCache(E.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var A;const _=this._frame.clone(),E=this._frame===this.orig?_:this.orig.clone(),C=new Texture(this.baseTexture,!this.noFrame&&_,E,(A=this.trim)==null?void 0:A.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(C._frame=_),C}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,E={},C=settings.STRICT_TEXTURE_CACHE){const A=typeof _=="string";let R=null;if(A)R=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const F=(E==null?void 0:E.pixiIdPrefix)||"pixiid";_.cacheId=`${F}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}R=_.cacheId}else{if(!_._pixiId){const F=(E==null?void 0:E.pixiIdPrefix)||"pixiid";_._pixiId=`${F}_${uid()}`}R=_._pixiId}let I=TextureCache[R];if(A&&C&&!I)throw new Error(`The cacheId "${R}" does not exist in TextureCache.`);return!I&&!(_ instanceof BaseTexture)?(E.resolution||(E.resolution=getResolutionOfUrl(_)),I=new Texture(new BaseTexture(_,E)),I.baseTexture.cacheId=R,BaseTexture.addToCache(I.baseTexture,R),Texture.addToCache(I,R)):!I&&_ instanceof BaseTexture&&(I=new Texture(_),Texture.addToCache(I,R)),I}static fromURL(_,E){const C=Object.assign({autoLoad:!1},E==null?void 0:E.resourceOptions),A=Texture.from(_,Object.assign({resourceOptions:C},E),!1),R=A.baseTexture.resource;return A.baseTexture.valid?Promise.resolve(A):R.load().then(()=>Promise.resolve(A))}static fromBuffer(_,E,C,A){return new Texture(BaseTexture.fromBuffer(_,E,C,A))}static fromLoader(_,E,C,A){const R=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(E)},A)),{resource:I}=R;I instanceof ImageResource&&(I.url=E);const F=new Texture(R);return C||(C=E),BaseTexture.addToCache(F.baseTexture,C),Texture.addToCache(F,C),C!==E&&(BaseTexture.addToCache(F.baseTexture,E),Texture.addToCache(F,E)),F.baseTexture.valid?Promise.resolve(F):new Promise(B=>{F.baseTexture.once("loaded",()=>B(F))})}static addToCache(_,E){E&&(_.textureCacheIds.includes(E)||_.textureCacheIds.push(E),TextureCache[E]&&TextureCache[E]!==_&&console.warn(`Texture added to the cache with an id [${E}] that already had an entry`),TextureCache[E]=_)}static removeFromCache(_){if(typeof _=="string"){const E=TextureCache[_];if(E){const C=E.textureCacheIds.indexOf(_);return C>-1&&E.textureCacheIds.splice(C,1),delete TextureCache[_],E}}else if(_!=null&&_.textureCacheIds){for(let E=0;E<_.textureCacheIds.length;++E)TextureCache[_.textureCacheIds[E]]===_&&delete TextureCache[_.textureCacheIds[E]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:E,y:C,width:A,height:R}=_,I=E+A>this.baseTexture.width,F=C+R>this.baseTexture.height;if(I||F){const B=I&&F?"and":"or",U=`X: ${E} + ${A} = ${E+A} > ${this.baseTexture.width}`,V=`Y: ${C} + ${R} = ${C+R} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${U} ${B} ${V}`)}this.valid=A&&R&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings.ADAPTER.createCanvas(16,16),E=_.getContext("2d");_.width=16,_.height=16,E.fillStyle="white",E.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,E){super(_,E),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,E,C=!0){const A=this.baseTexture.resolution,R=Math.round(_*A)/A,I=Math.round(E*A)/A;this.valid=R>0&&I>0,this._frame.width=this.orig.width=R,this._frame.height=this.orig.height=I,C&&this.baseTexture.resize(R,I),this.updateUvs()}setResolution(_){const{baseTexture:E}=this;E.resolution!==_&&(E.setResolution(_),this.resize(E.width,E.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,E,C=MSAA_QUALITY.NONE){const A=new BaseRenderTexture(Object.assign({width:_,height:E,resolution:1,multisample:C},this.textureOptions));return new RenderTexture(A)}getOptimalTexture(_,E,C=1,A=MSAA_QUALITY.NONE){let R;_=Math.max(Math.ceil(_*C-1e-6),1),E=Math.max(Math.ceil(E*C-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||E!==this._pixelsHeight?(_=nextPow2(_),E=nextPow2(E),R=((_&65535)<<16|E&65535)>>>0,A>1&&(R+=A*4294967296)):R=A>1?-A:-1,this.texturePool[R]||(this.texturePool[R]=[]);let I=this.texturePool[R].pop();return I||(I=this.createTexture(_,E,A)),I.filterPoolKey=R,I.setResolution(C),I}getFilterTexture(_,E,C){const A=this.getOptimalTexture(_.width,_.height,E||_.resolution,C||MSAA_QUALITY.NONE);return A.filterFrame=_.filterFrame,A}returnTexture(_){const E=_.filterPoolKey;_.filterFrame=null,this.texturePool[E].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const E in this.texturePool){const C=this.texturePool[E];if(C)for(let A=0;A<C.length;A++)C[A].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const E in this.texturePool){if(!(Number(E)<0))continue;const C=this.texturePool[E];if(C)for(let A=0;A<C.length;A++)C[A].destroy(!0);this.texturePool[E]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,E){let C=0,A=0;return this.uvs[0]=C,this.uvs[1]=A,this.uvs[2]=C+E.width/_.width,this.uvs[3]=A,this.uvs[4]=C+E.width/_.width,this.uvs[5]=A+E.height/_.height,this.uvs[6]=C,this.uvs[7]=A+E.height/_.height,C=E.x,A=E.y,this.vertices[0]=C,this.vertices[1]=A,this.vertices[2]=C+E.width,this.vertices[3]=A,this.vertices[4]=C+E.width,this.vertices[5]=A+E.height,this.vertices[6]=C,this.vertices[7]=A+E.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle$1,this.destinationFrame=new Rectangle$1,this.bindingSourceFrame=new Rectangle$1,this.bindingDestinationFrame=new Rectangle$1,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$4=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle$1,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle$1,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,E){const C=this.renderer,A=this.defaultFilterStack,R=this.statePool.pop()||new FilterState,I=C.renderTexture;let F,B;if(I.current){const X=I.current;F=X.resolution,B=X.multisample}else F=C.resolution,B=C.multisample;let U=E[0].resolution||F,V=E[0].multisample??B,D=E[0].padding,O=E[0].autoFit,L=E[0].legacy??!0;for(let X=1;X<E.length;X++){const Y=E[X];U=Math.min(U,Y.resolution||F),V=Math.min(V,Y.multisample??B),D=this.useMaxPadding?Math.max(D,Y.padding):D+Y.padding,O=O&&Y.autoFit,L=L||(Y.legacy??!0)}A.length===1&&(this.defaultFilterStack[0].renderTexture=I.current),A.push(R),R.resolution=U,R.multisample=V,R.legacy=L,R.target=_,R.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),R.sourceFrame.pad(D);const z=this.tempRect.copyFrom(I.sourceFrame);C.projection.transform&&this.transformAABB(tempMatrix$4.copyFrom(C.projection.transform).invert(),z),O?(R.sourceFrame.fit(z),(R.sourceFrame.width<=0||R.sourceFrame.height<=0)&&(R.sourceFrame.width=0,R.sourceFrame.height=0)):R.sourceFrame.intersects(z)||(R.sourceFrame.width=0,R.sourceFrame.height=0),this.roundFrame(R.sourceFrame,I.current?I.current.resolution:C.resolution,I.sourceFrame,I.destinationFrame,C.projection.transform),R.renderTexture=this.getOptimalFilterTexture(R.sourceFrame.width,R.sourceFrame.height,U,V),R.filters=E,R.destinationFrame.width=R.renderTexture.width,R.destinationFrame.height=R.renderTexture.height;const W=this.tempRect;W.x=0,W.y=0,W.width=R.sourceFrame.width,W.height=R.sourceFrame.height,R.renderTexture.filterFrame=R.sourceFrame,R.bindingSourceFrame.copyFrom(I.sourceFrame),R.bindingDestinationFrame.copyFrom(I.destinationFrame),R.transform=C.projection.transform,C.projection.transform=null,I.bind(R.renderTexture,R.sourceFrame,W),C.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,E=_.pop(),C=E.filters;this.activeState=E;const A=this.globalUniforms.uniforms;A.outputFrame=E.sourceFrame,A.resolution=E.resolution;const R=A.inputSize,I=A.inputPixel,F=A.inputClamp;if(R[0]=E.destinationFrame.width,R[1]=E.destinationFrame.height,R[2]=1/R[0],R[3]=1/R[1],I[0]=Math.round(R[0]*E.resolution),I[1]=Math.round(R[1]*E.resolution),I[2]=1/I[0],I[3]=1/I[1],F[0]=.5*I[2],F[1]=.5*I[3],F[2]=E.sourceFrame.width*R[2]-.5*I[2],F[3]=E.sourceFrame.height*R[3]-.5*I[3],E.legacy){const U=A.filterArea;U[0]=E.destinationFrame.width,U[1]=E.destinationFrame.height,U[2]=E.sourceFrame.x,U[3]=E.sourceFrame.y,A.filterClamp=A.inputClamp}this.globalUniforms.update();const B=_[_.length-1];if(this.renderer.framebuffer.blit(),C.length===1)C[0].apply(this,E.renderTexture,B.renderTexture,CLEAR_MODES.BLEND,E),this.returnFilterTexture(E.renderTexture);else{let U=E.renderTexture,V=this.getOptimalFilterTexture(U.width,U.height,E.resolution);V.filterFrame=U.filterFrame;let D=0;for(D=0;D<C.length-1;++D){D===1&&E.multisample>1&&(V=this.getOptimalFilterTexture(U.width,U.height,E.resolution),V.filterFrame=U.filterFrame),C[D].apply(this,U,V,CLEAR_MODES.CLEAR,E);const O=U;U=V,V=O}C[D].apply(this,U,B.renderTexture,CLEAR_MODES.BLEND,E),D>1&&E.multisample>1&&this.returnFilterTexture(E.renderTexture),this.returnFilterTexture(U),this.returnFilterTexture(V)}E.clear(),this.statePool.push(E)}bindAndClear(_,E=CLEAR_MODES.CLEAR){const{renderTexture:C,state:A}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const I=this.tempRect;I.x=0,I.y=0,I.width=_.filterFrame.width,I.height=_.filterFrame.height,C.bind(_,_.filterFrame,I)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?C.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const R=A.stateId&1||this.forceClear;(E===CLEAR_MODES.CLEAR||E===CLEAR_MODES.BLIT&&R)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,E,C,A){const R=this.renderer;R.state.set(_.state),this.bindAndClear(C,A),_.uniforms.uSampler=E,_.uniforms.filterGlobals=this.globalUniforms,R.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(E._frame,E.filterFrame),R.geometry.bind(this.quadUv),R.geometry.draw(DRAW_MODES.TRIANGLES)):(R.geometry.bind(this.quad),R.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,E){const{sourceFrame:C,destinationFrame:A}=this.activeState,{orig:R}=E._texture,I=_.set(A.width,0,0,A.height,C.x,C.y),F=E.worldTransform.copyTo(Matrix.TEMP_MATRIX);return F.invert(),I.prepend(F),I.scale(1/R.width,1/R.height),I.translate(E.anchor.x,E.anchor.y),I}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,E,C=1,A=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,E,C,A)}getFilterTexture(_,E,C){if(typeof _=="number"){const R=_;_=E,E=R}_=_||this.activeState.renderTexture;const A=this.texturePool.getOptimalTexture(_.width,_.height,E||_.resolution,C||MSAA_QUALITY.NONE);return A.filterFrame=_.filterFrame,A}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,E){const C=tempPoints[0],A=tempPoints[1],R=tempPoints[2],I=tempPoints[3];C.set(E.left,E.top),A.set(E.left,E.bottom),R.set(E.right,E.top),I.set(E.right,E.bottom),_.apply(C,C),_.apply(A,A),_.apply(R,R),_.apply(I,I);const F=Math.min(C.x,A.x,R.x,I.x),B=Math.min(C.y,A.y,R.y,I.y),U=Math.max(C.x,A.x,R.x,I.x),V=Math.max(C.y,A.y,R.y,I.y);E.x=F,E.y=B,E.width=U-F,E.height=V-B}roundFrame(_,E,C,A,R){if(!(_.width<=0||_.height<=0||C.width<=0||C.height<=0)){if(R){const{a:I,b:F,c:B,d:U}=R;if((Math.abs(F)>1e-4||Math.abs(B)>1e-4)&&(Math.abs(I)>1e-4||Math.abs(U)>1e-4))return}R=R?tempMatrix$4.copyFrom(R):tempMatrix$4.identity(),R.translate(-C.x,-C.y).scale(A.width/C.width,A.height/C.height).translate(A.x,A.y),this.transformAABB(R,_),_.ceil(E),this.transformAABB(R.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle$1;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle$1,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let E=this.renderer.context.extensions.drawBuffers,C=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(E=null,C=null),E?_.drawBuffers=A=>E.drawBuffersWEBGL(A):(this.hasMRT=!1,_.drawBuffers=()=>{}),C||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,E,C=0){const{gl:A}=this;if(_){const R=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,A.bindFramebuffer(A.FRAMEBUFFER,R.framebuffer)),R.mipLevel!==C&&(_.dirtyId++,_.dirtyFormat++,R.mipLevel=C),R.dirtyId!==_.dirtyId&&(R.dirtyId=_.dirtyId,R.dirtyFormat!==_.dirtyFormat?(R.dirtyFormat=_.dirtyFormat,R.dirtySize=_.dirtySize,this.updateFramebuffer(_,C)):R.dirtySize!==_.dirtySize&&(R.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let I=0;I<_.colorTextures.length;I++){const F=_.colorTextures[I];this.renderer.texture.unbind(F.parentTextureArray||F)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),E){const I=E.width>>C,F=E.height>>C,B=I/E.width;this.setViewport(E.x*B,E.y*B,I,F)}else{const I=_.width>>C,F=_.height>>C;this.setViewport(0,0,I,F)}}else this.current&&(this.current=null,A.bindFramebuffer(A.FRAMEBUFFER,null)),E?this.setViewport(E.x,E.y,E.width,E.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,E,C,A){const R=this.viewport;_=Math.round(_),E=Math.round(E),C=Math.round(C),A=Math.round(A),(R.width!==C||R.height!==A||R.x!==_||R.y!==E)&&(R.x=_,R.y=E,R.width=C,R.height=A,this.gl.viewport(_,E,C,A))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,E,C,A,R=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:I}=this;I.clearColor(_,E,C,A),I.clear(R)}initFramebuffer(_){const{gl:E}=this,C=new GLFramebuffer(E.createFramebuffer());return C.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=C,this.managedFramebuffers.push(_),_.disposeRunner.add(this),C}resizeFramebuffer(_){const{gl:E}=this,C=_.glFramebuffers[this.CONTEXT_UID];if(C.stencil){E.bindRenderbuffer(E.RENDERBUFFER,C.stencil);let I;this.renderer.context.webGLVersion===1?I=E.DEPTH_STENCIL:_.depth&&_.stencil?I=E.DEPTH24_STENCIL8:_.depth?I=E.DEPTH_COMPONENT24:I=E.STENCIL_INDEX8,C.msaaBuffer?E.renderbufferStorageMultisample(E.RENDERBUFFER,C.multisample,I,_.width,_.height):E.renderbufferStorage(E.RENDERBUFFER,I,_.width,_.height)}const A=_.colorTextures;let R=A.length;E.drawBuffers||(R=Math.min(R,1));for(let I=0;I<R;I++){const F=A[I],B=F.parentTextureArray||F;this.renderer.texture.bind(B,0),I===0&&C.msaaBuffer&&(E.bindRenderbuffer(E.RENDERBUFFER,C.msaaBuffer),E.renderbufferStorageMultisample(E.RENDERBUFFER,C.multisample,B._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,E){const{gl:C}=this,A=_.glFramebuffers[this.CONTEXT_UID],R=_.colorTextures;let I=R.length;C.drawBuffers||(I=Math.min(I,1)),A.multisample>1&&this.canMultisampleFramebuffer(_)?A.msaaBuffer=A.msaaBuffer||C.createRenderbuffer():A.msaaBuffer&&(C.deleteRenderbuffer(A.msaaBuffer),A.msaaBuffer=null,A.blitFramebuffer&&(A.blitFramebuffer.dispose(),A.blitFramebuffer=null));const F=[];for(let B=0;B<I;B++){const U=R[B],V=U.parentTextureArray||U;this.renderer.texture.bind(V,0),B===0&&A.msaaBuffer?(C.bindRenderbuffer(C.RENDERBUFFER,A.msaaBuffer),C.renderbufferStorageMultisample(C.RENDERBUFFER,A.multisample,V._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,A.msaaBuffer)):(C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+B,U.target,V._glTextures[this.CONTEXT_UID].texture,E),F.push(C.COLOR_ATTACHMENT0+B))}if(F.length>1&&C.drawBuffers(F),_.depthTexture&&this.writeDepthTexture){const B=_.depthTexture;this.renderer.texture.bind(B,0),C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,B._glTextures[this.CONTEXT_UID].texture,E)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){A.stencil=A.stencil||C.createRenderbuffer();let B,U;this.renderer.context.webGLVersion===1?(B=C.DEPTH_STENCIL_ATTACHMENT,U=C.DEPTH_STENCIL):_.depth&&_.stencil?(B=C.DEPTH_STENCIL_ATTACHMENT,U=C.DEPTH24_STENCIL8):_.depth?(B=C.DEPTH_ATTACHMENT,U=C.DEPTH_COMPONENT24):(B=C.STENCIL_ATTACHMENT,U=C.STENCIL_INDEX8),C.bindRenderbuffer(C.RENDERBUFFER,A.stencil),A.msaaBuffer?C.renderbufferStorageMultisample(C.RENDERBUFFER,A.multisample,U,_.width,_.height):C.renderbufferStorage(C.RENDERBUFFER,U,_.width,_.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,B,C.RENDERBUFFER,A.stencil)}else A.stencil&&(C.deleteRenderbuffer(A.stencil),A.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:E}=this;let C=MSAA_QUALITY.NONE;if(_<=1||E===null)return C;for(let A=0;A<E.length;A++)if(E[A]<=_){C=E[A];break}return C===1&&(C=MSAA_QUALITY.NONE),C}blit(_,E,C){const{current:A,renderer:R,gl:I,CONTEXT_UID:F}=this;if(R.context.webGLVersion!==2||!A)return;const B=A.glFramebuffers[F];if(!B)return;if(!_){if(!B.msaaBuffer)return;const V=A.colorTextures[0];if(!V)return;B.blitFramebuffer||(B.blitFramebuffer=new Framebuffer(A.width,A.height),B.blitFramebuffer.addColorTexture(0,V)),_=B.blitFramebuffer,_.colorTextures[0]!==V&&(_.colorTextures[0]=V,_.dirtyId++,_.dirtyFormat++),(_.width!==A.width||_.height!==A.height)&&(_.width=A.width,_.height=A.height,_.dirtyId++,_.dirtySize++)}E||(E=tempRectangle,E.width=A.width,E.height=A.height),C||(C=E);const U=E.width===C.width&&E.height===C.height;this.bind(_),I.bindFramebuffer(I.READ_FRAMEBUFFER,B.framebuffer),I.blitFramebuffer(E.left,E.top,E.right,E.bottom,C.left,C.top,C.right,C.bottom,I.COLOR_BUFFER_BIT,U?I.NEAREST:I.LINEAR),I.bindFramebuffer(I.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,E){const C=_.glFramebuffers[this.CONTEXT_UID],A=this.gl;if(!C)return;delete _.glFramebuffers[this.CONTEXT_UID];const R=this.managedFramebuffers.indexOf(_);R>=0&&this.managedFramebuffers.splice(R,1),_.disposeRunner.remove(this),E||(A.deleteFramebuffer(C.framebuffer),C.msaaBuffer&&A.deleteRenderbuffer(C.msaaBuffer),C.stencil&&A.deleteRenderbuffer(C.stencil)),C.blitFramebuffer&&this.disposeFramebuffer(C.blitFramebuffer,E)}disposeAll(_){const E=this.managedFramebuffers;this.managedFramebuffers=[];for(let C=0;C<E.length;C++)this.disposeFramebuffer(E[C],_)}forceStencil(){const _=this.current;if(!_)return;const E=_.glFramebuffers[this.CONTEXT_UID];if(!E||E.stencil&&_.stencil)return;_.stencil=!0;const C=_.width,A=_.height,R=this.gl,I=E.stencil=R.createRenderbuffer();R.bindRenderbuffer(R.RENDERBUFFER,I);let F,B;this.renderer.context.webGLVersion===1?(F=R.DEPTH_STENCIL_ATTACHMENT,B=R.DEPTH_STENCIL):_.depth?(F=R.DEPTH_STENCIL_ATTACHMENT,B=R.DEPTH24_STENCIL8):(F=R.STENCIL_ATTACHMENT,B=R.STENCIL_INDEX8),E.msaaBuffer?R.renderbufferStorageMultisample(R.RENDERBUFFER,E.multisample,B,C,A):R.renderbufferStorage(R.RENDERBUFFER,B,C,A),R.framebufferRenderbuffer(R.FRAMEBUFFER,F,R.RENDERBUFFER,I)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle$1}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,E=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,E.webGLVersion!==2){let C=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(C=null),C?(_.createVertexArray=()=>C.createVertexArrayOES(),_.bindVertexArray=A=>C.bindVertexArrayOES(A),_.deleteVertexArray=A=>C.deleteVertexArrayOES(A)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(E.webGLVersion!==2){const C=_.getExtension("ANGLE_instanced_arrays");C?(_.vertexAttribDivisor=(A,R)=>C.vertexAttribDivisorANGLE(A,R),_.drawElementsInstanced=(A,R,I,F,B)=>C.drawElementsInstancedANGLE(A,R,I,F,B),_.drawArraysInstanced=(A,R,I,F)=>C.drawArraysInstancedANGLE(A,R,I,F)):this.hasInstance=!1}this.canUseUInt32ElementIndex=E.webGLVersion===2||!!E.extensions.uint32ElementIndex}bind(_,E){E=E||this.renderer.shader.shader;const{gl:C}=this;let A=_.glVertexArrayObjects[this.CONTEXT_UID],R=!1;A||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=A={},R=!0);const I=A[E.program.id]||this.initGeometryVao(_,E,R);this._activeGeometry=_,this._activeVao!==I&&(this._activeVao=I,this.hasVao?C.bindVertexArray(I):this.activateVao(_,E.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,E=this.renderer.buffer;for(let C=0;C<_.buffers.length;C++){const A=_.buffers[C];E.update(A)}}checkCompatibility(_,E){const C=_.attributes,A=E.attributeData;for(const R in A)if(!C[R])throw new Error(`shader and geometry incompatible, geometry missing the "${R}" attribute`)}getSignature(_,E){const C=_.attributes,A=E.attributeData,R=["g",_.id];for(const I in C)A[I]&&R.push(I,A[I].location);return R.join("-")}initGeometryVao(_,E,C=!0){const A=this.gl,R=this.CONTEXT_UID,I=this.renderer.buffer,F=E.program;F.glPrograms[R]||this.renderer.shader.generateProgram(E),this.checkCompatibility(_,F);const B=this.getSignature(_,F),U=_.glVertexArrayObjects[this.CONTEXT_UID];let V=U[B];if(V)return U[F.id]=V,V;const D=_.buffers,O=_.attributes,L={},z={};for(const W in D)L[W]=0,z[W]=0;for(const W in O)!O[W].size&&F.attributeData[W]?O[W].size=F.attributeData[W].size:O[W].size||console.warn(`PIXI Geometry attribute '${W}' size cannot be determined (likely the bound shader does not have the attribute)`),L[O[W].buffer]+=O[W].size*byteSizeMap[O[W].type];for(const W in O){const X=O[W],Y=X.size;X.stride===void 0&&(L[X.buffer]===Y*byteSizeMap[X.type]?X.stride=0:X.stride=L[X.buffer]),X.start===void 0&&(X.start=z[X.buffer],z[X.buffer]+=Y*byteSizeMap[X.type])}V=A.createVertexArray(),A.bindVertexArray(V);for(let W=0;W<D.length;W++){const X=D[W];I.bind(X),C&&X._glBuffers[R].refCount++}return this.activateVao(_,F),U[F.id]=V,U[B]=V,A.bindVertexArray(null),I.unbind(BUFFER_TYPE.ARRAY_BUFFER),V}disposeGeometry(_,E){var F;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const C=_.glVertexArrayObjects[this.CONTEXT_UID],A=this.gl,R=_.buffers,I=(F=this.renderer)==null?void 0:F.buffer;if(_.disposeRunner.remove(this),!!C){if(I)for(let B=0;B<R.length;B++){const U=R[B]._glBuffers[this.CONTEXT_UID];U&&(U.refCount--,U.refCount===0&&!E&&I.dispose(R[B],E))}if(!E){for(const B in C)if(B[0]==="g"){const U=C[B];this._activeVao===U&&this.unbind(),A.deleteVertexArray(U)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const E=Object.keys(this.managedGeometries);for(let C=0;C<E.length;C++)this.disposeGeometry(this.managedGeometries[E[C]],_)}activateVao(_,E){const C=this.gl,A=this.CONTEXT_UID,R=this.renderer.buffer,I=_.buffers,F=_.attributes;_.indexBuffer&&R.bind(_.indexBuffer);let B=null;for(const U in F){const V=F[U],D=I[V.buffer],O=D._glBuffers[A];if(E.attributeData[U]){B!==O&&(R.bind(D),B=O);const L=E.attributeData[U].location;if(C.enableVertexAttribArray(L),C.vertexAttribPointer(L,V.size,V.type||C.FLOAT,V.normalized,V.stride,V.start),V.instance)if(this.hasInstance)C.vertexAttribDivisor(L,V.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,E,C,A){const{gl:R}=this,I=this._activeGeometry;if(I.indexBuffer){const F=I.indexBuffer.data.BYTES_PER_ELEMENT,B=F===2?R.UNSIGNED_SHORT:R.UNSIGNED_INT;F===2||F===4&&this.canUseUInt32ElementIndex?I.instanced?R.drawElementsInstanced(_,E||I.indexBuffer.data.length,B,(C||0)*F,A||1):R.drawElements(_,E||I.indexBuffer.data.length,B,(C||0)*F):console.warn("unsupported index buffer type: uint32")}else I.instanced?R.drawArraysInstanced(_,C,E||I.getSize(),A||1):R.drawArrays(_,C,E||I.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(_,E){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof E>"u"?.5:E,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,E){E===void 0&&(E=_);const C=this.mapCoord;for(let A=0;A<_.length;A+=2){const R=_[A],I=_[A+1];E[A]=R*C.a+I*C.c+C.tx,E[A+1]=R*C.b+I*C.d+C.ty}return E}update(_){const E=this._texture;if(!E||!E.valid||!_&&this._textureID===E._updateID)return!1;this._textureID=E._updateID,this._updateID++;const C=E._uvs;this.mapCoord.set(C.x1-C.x0,C.y1-C.y0,C.x3-C.x0,C.y3-C.y0,C.x0,C.y0);const A=E.orig,R=E.trim;R&&(tempMat$1.set(A.width/R.width,0,0,A.height/R.height,-R.x/R.width,-R.y/R.height),this.mapCoord.append(tempMat$1));const I=E.baseTexture,F=this.uClampFrame,B=this.clampMargin/I.resolution,U=this.clampOffset;return F[0]=(E._frame.x+B+U)/I.width,F[1]=(E._frame.y+B+U)/I.height,F[2]=(E._frame.x+E._frame.width-B+U)/I.width,F[3]=(E._frame.y+E._frame.height-B+U)/I.height,this.uClampOffset[0]=U/I.realWidth,this.uClampOffset[1]=U/I.realHeight,this.isSimple=E._frame.width===I.width&&E._frame.height===I.height&&E.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,E,C){let A=null;typeof _!="string"&&E===void 0&&C===void 0&&(A=_,_=void 0,E=void 0,C=void 0),super(_||vertex$4,E||fragment$7,C),this.maskSprite=A,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,E,C,A){const R=this._maskSprite,I=R._texture;I.valid&&(I.uvMatrix||(I.uvMatrix=new TextureMatrix(I,0)),I.uvMatrix.update(),this.uniforms.npmAlpha=I.baseTexture.alphaMode?0:1,this.uniforms.mask=I,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,R).prepend(I.uvMatrix.mapCoord),this.uniforms.alpha=R.worldAlpha,this.uniforms.maskClamp=I.uvMatrix.uClampFrame,_.applyFilter(this,E,C,A))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,E){let C=E;if(!C.isMaskData){const R=this.maskDataPool.pop()||new MaskData;R.pooled=!0,R.maskObject=E,C=R}const A=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(C.copyCountersOrReset(A),C._colorMask=A?A._colorMask:15,C.autoDetect&&this.detect(C),C._target=_,C.type!==MASK_TYPES.SPRITE&&this.maskStack.push(C),C.enabled)switch(C.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(C);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(C);break;case MASK_TYPES.SPRITE:C.copyCountersOrReset(null),this.pushSpriteMask(C);break;case MASK_TYPES.COLOR:this.pushColorMask(C);break}C.type===MASK_TYPES.SPRITE&&this.maskStack.push(C)}pop(_){const E=this.maskStack.pop();if(!(!E||E._target!==_)){if(E.enabled)switch(E.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(E);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(E.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(E);break;case MASK_TYPES.COLOR:this.popColorMask(E);break}if(E.reset(),E.pooled&&this.maskDataPool.push(E),this.maskStack.length!==0){const C=this.maskStack[this.maskStack.length-1];C.type===MASK_TYPES.SPRITE&&C._filters&&(C._filters[0].maskSprite=C.maskObject)}}}detect(_){const E=_.maskObject;E?E.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:E}=_,C=_._target;let A=_._filters;A||(A=this.alphaMaskPool[this.alphaMaskIndex],A||(A=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),A[0].resolution=_.resolution,A[0].multisample=_.multisample,A[0].maskSprite=E;const R=C.filterArea;C.filterArea=E.getBounds(!0),this.renderer.filter.push(C,A),C.filterArea=R,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const E=_._colorMask,C=_._colorMask=E&_.colorMask;C!==E&&this.renderer.gl.colorMask((C&1)!==0,(C&2)!==0,(C&4)!==0,(C&8)!==0)}popColorMask(_){const E=_._colorMask,C=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;C!==E&&this.renderer.gl.colorMask((C&1)!==0,(C&2)!==0,(C&4)!==0,(C&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:E}=this.renderer,C=this.getStackLength();this.maskStack=_;const A=this.getStackLength();A!==C&&(A===0?E.disable(this.glConst):(E.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$3=new Matrix,rectPool=[],_ScissorSystem=class ea extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const E=_._scissorRect,{maskObject:C}=_,{renderer:A}=this,R=A.renderTexture,I=C.getBounds(!0,rectPool.pop()??new Rectangle$1);this.roundFrameToPixels(I,R.current?R.current.resolution:A.resolution,R.sourceFrame,R.destinationFrame,A.projection.transform),E&&I.fit(E),_._scissorRectLocal=I}static isMatrixRotated(_){if(!_)return!1;const{a:E,b:C,c:A,d:R}=_;return(Math.abs(C)>1e-4||Math.abs(A)>1e-4)&&(Math.abs(E)>1e-4||Math.abs(R)>1e-4)}testScissor(_){const{maskObject:E}=_;if(!E.isFastRect||!E.isFastRect()||ea.isMatrixRotated(E.worldTransform)||ea.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const C=_._scissorRectLocal;return C.width>0&&C.height>0}roundFrameToPixels(_,E,C,A,R){ea.isMatrixRotated(R)||(R=R?tempMatrix$3.copyFrom(R):tempMatrix$3.identity(),R.translate(-C.x,-C.y).scale(A.width/C.width,A.height/C.height).translate(A.x,A.y),this.renderer.filter.transformAABB(R,_),_.fit(A),_.x=Math.round(_.x*E),_.y=Math.round(_.y*E),_.width=Math.round(_.width*E),_.height=Math.round(_.height*E))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:E}=this.renderer;_._scissorRect||E.enable(E.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:E}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():E.disable(E.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let E;this.renderer.renderTexture.current?E=_.y:E=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,E,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const E=_.maskObject,{gl:C}=this.renderer,A=_._stencilCounter;A===0&&(this.renderer.framebuffer.forceStencil(),C.clearStencil(0),C.clear(C.STENCIL_BUFFER_BIT),C.enable(C.STENCIL_TEST)),_._stencilCounter++;const R=_._colorMask;R!==0&&(_._colorMask=0,C.colorMask(!1,!1,!1,!1)),C.stencilFunc(C.EQUAL,A,4294967295),C.stencilOp(C.KEEP,C.KEEP,C.INCR),E.renderable=!0,E.render(this.renderer),this.renderer.batch.flush(),E.renderable=!1,R!==0&&(_._colorMask=R,C.colorMask((R&1)!==0,(R&2)!==0,(R&4)!==0,(R&8)!==0)),this._useCurrent()}pop(_){const E=this.renderer.gl;if(this.getStackLength()===0)E.disable(E.STENCIL_TEST);else{const C=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,A=C?C._colorMask:15;A!==0&&(C._colorMask=0,E.colorMask(!1,!1,!1,!1)),E.stencilOp(E.KEEP,E.KEEP,E.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,A!==0&&(C._colorMask=A,E.colorMask((A&1)!==0,(A&2)!==0,(A&4)!==0,(A&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const E in _)this.plugins[E]=new _[E](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,E,C,A){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=E||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,C,A),this.transform&&this.projectionMatrix.append(this.transform);const R=this.renderer;R.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,R.globalUniforms.update(),R.shader.shader&&R.shader.syncUniformGroup(R.shader.shader.uniforms.globals)}calculateProjection(_,E,C,A){const R=this.projectionMatrix,I=A?-1:1;R.identity(),R.a=1/E.width*2,R.d=I*(1/E.height*2),R.tx=-1-E.x*R.a,R.ty=-I-E.y*R.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle$1;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,E){const{region:C,...A}=E||{},R=(C==null?void 0:C.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),I=A.resolution||this.renderer.resolution;R.width=Math.max(R.width,1/I),R.height=Math.max(R.height,1/I),A.width=R.width,A.height=R.height,A.resolution=I,A.multisample??(A.multisample=this.renderer.multisample);const F=RenderTexture.create(A);this._tempMatrix.tx=-R.x,this._tempMatrix.ty=-R.y;const B=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:F,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=B,F}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle$1,tempRect2=new Rectangle$1;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle$1,this.destinationFrame=new Rectangle$1,this.viewportFrame=new Rectangle$1}contextChange(){var E;const _=(E=this.renderer)==null?void 0:E.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,E,C){const A=this.renderer;this.current=_;let R,I,F;_?(R=_.baseTexture,F=R.resolution,E||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,E=tempRect),C||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=E.width,tempRect2.height=E.height,C=tempRect2),I=R.framebuffer):(F=A.resolution,E||(tempRect.width=A._view.screen.width,tempRect.height=A._view.screen.height,E=tempRect),C||(C=tempRect,C.width=E.width,C.height=E.height));const B=this.viewportFrame;B.x=C.x*F,B.y=C.y*F,B.width=C.width*F,B.height=C.height*F,_||(B.y=A.view.height-(B.y+B.height)),B.ceil(),this.renderer.framebuffer.bind(I,B),this.renderer.projection.update(C,E,F,!I),_?this.renderer.mask.setMaskStack(R.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(E),this.destinationFrame.copyFrom(C)}clear(_,E){const C=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,A=Color.shared.setValue(_||C);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&A.premultiply(A.alpha);const R=this.destinationFrame,I=this.current?this.current.baseTexture:this.renderer._view.screen,F=R.width!==I.width||R.height!==I.height;if(F){let{x:B,y:U,width:V,height:D}=this.viewportFrame;B=Math.round(B),U=Math.round(U),V=Math.round(V),D=Math.round(D),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(B,U,V,D)}this.renderer.framebuffer.clear(A.red,A.green,A.blue,A.alpha,E),F&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(_,E){this.program=_,this.uniformData=E,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(T,_){const E={},C=_.getProgramParameter(T,_.ACTIVE_ATTRIBUTES);for(let A=0;A<C;A++){const R=_.getActiveAttrib(T,A);if(R.name.startsWith("gl_"))continue;const I=mapType(_,R.type),F={type:I,name:R.name,size:mapSize(I),location:_.getAttribLocation(T,R.name)};E[R.name]=F}return E}function getUniformData(T,_){const E={},C=_.getProgramParameter(T,_.ACTIVE_UNIFORMS);for(let A=0;A<C;A++){const R=_.getActiveUniform(T,A),I=R.name.replace(/\[.*?\]$/,""),F=!!R.name.match(/\[.*?\]$/),B=mapType(_,R.type);E[I]={name:I,index:A,type:B,size:R.size,isArray:F,value:defaultValue(B,R.size)}}return E}function generateProgram(T,_){var F;const E=compileShader(T,T.VERTEX_SHADER,_.vertexSrc),C=compileShader(T,T.FRAGMENT_SHADER,_.fragmentSrc),A=T.createProgram();T.attachShader(A,E),T.attachShader(A,C);const R=(F=_.extra)==null?void 0:F.transformFeedbackVaryings;if(R&&(typeof T.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):T.transformFeedbackVaryings(A,R.names,R.bufferMode==="separate"?T.SEPARATE_ATTRIBS:T.INTERLEAVED_ATTRIBS)),T.linkProgram(A),T.getProgramParameter(A,T.LINK_STATUS)||logProgramError(T,A,E,C),_.attributeData=getAttributeData(A,T),_.uniformData=getUniformData(A,T),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const B=Object.keys(_.attributeData);B.sort((U,V)=>U>V?1:-1);for(let U=0;U<B.length;U++)_.attributeData[B[U]].location=U,T.bindAttribLocation(A,U,B[U]);T.linkProgram(A)}T.deleteShader(E),T.deleteShader(C);const I={};for(const B in _.uniformData){const U=_.uniformData[B];I[B]={location:T.getUniformLocation(A,B),value:defaultValue(U.type,U.size)}}return new GLProgram(A,I)}function uboUpdate(T,_,E,C,A){E.buffer.update(A)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(T){const _=T.map(R=>({data:R,offset:0,dataLen:0,dirty:0}));let E=0,C=0,A=0;for(let R=0;R<_.length;R++){const I=_[R];if(E=GLSL_TO_STD40_SIZE[I.data.type],I.data.size>1&&(E=Math.max(E,16)*I.data.size),I.dataLen=E,C%E!==0&&C<16){const F=C%E%16;C+=F,A+=F}C+E>16?(A=Math.ceil(A/16)*16,I.offset=A,A+=E,C=E):(I.offset=A,C+=E,A+=E)}return A=Math.ceil(A/16)*16,{uboElements:_,size:A}}function getUBOData(T,_){const E=[];for(const C in T)_[C]&&E.push(_[C]);return E.sort((C,A)=>C.index-A.index),E}function generateUniformBufferSync(T,_){if(!T.autoManage)return{size:0,syncFunc:uboUpdate};const E=getUBOData(T.uniforms,_),{uboElements:C,size:A}=createUBOElements(E),R=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let I=0;I<C.length;I++){const F=C[I],B=T.uniforms[F.data.name],U=F.data.name;let V=!1;for(let D=0;D<uniformParsers.length;D++){const O=uniformParsers[D];if(O.codeUbo&&O.test(F.data,B)){R.push(`offset = ${F.offset/4};`,uniformParsers[D].codeUbo(F.data.name,B)),V=!0;break}}if(!V)if(F.data.size>1){const D=mapSize(F.data.type),O=Math.max(GLSL_TO_STD40_SIZE[F.data.type]/16,1),L=D/O,z=(4-L%4)%4;R.push(`
                cv = ud.${U}.value;
                v = uv.${U};
                offset = ${F.offset/4};

                t = 0;

                for(var i=0; i < ${F.data.size*O}; i++)
                {
                    for(var j = 0; j < ${L}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${z};
                }

                `)}else{const D=UBO_TO_SINGLE_SETTERS[F.data.type];R.push(`
                cv = ud.${U}.value;
                v = uv.${U};
                offset = ${F.offset/4};
                ${D};
                `)}}return R.push(`
       renderer.buffer.update(buffer);
    `),{size:A,syncFunc:new Function("ud","uv","renderer","syncData","buffer",R.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,E){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const C=_.program,A=C.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==C&&(this.program=C,this.gl.useProgram(A.program)),E||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),A}setUniforms(_){const E=this.shader.program,C=E.glPrograms[this.renderer.CONTEXT_UID];E.syncUniforms(C.uniformData,_,this.renderer)}syncUniformGroup(_,E){const C=this.getGlProgram();(!_.static||_.dirtyId!==C.uniformDirtyGroups[_.id])&&(C.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,C,E))}syncUniforms(_,E,C){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(E.uniformData,_.uniforms,this.renderer,C)}createSyncGroups(_){const E=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[E]||(this.cache[E]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[E],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,E){const C=this.getGlProgram();if(!_.static||_.dirtyId!==0||!C.uniformGroups[_.id]){_.dirtyId=0;const A=C.uniformGroups[_.id]||this.createSyncBufferGroup(_,C,E);_.buffer.update(),A(C.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,C.uniformBufferBindings[E])}createSyncBufferGroup(_,E,C){const{gl:A}=this.renderer;this.renderer.buffer.bind(_.buffer);const R=this.gl.getUniformBlockIndex(E.program,C);E.uniformBufferBindings[C]=this.shader.uniformBindCount,A.uniformBlockBinding(E.program,R,this.shader.uniformBindCount),this.shader.uniformBindCount++;const I=this.getSignature(_,this.shader.program.uniformData,"ubo");let F=this._uboCache[I];if(F||(F=this._uboCache[I]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const B=new Float32Array(F.size/4);_.buffer.update(B)}return E.uniformGroups[_.id]=F.syncFunc,E.uniformGroups[_.id]}getSignature(_,E,C){const A=_.uniforms,R=[`${C}-`];for(const I in A)R.push(I),E[I]&&R.push(E[I].type);return R.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const E=this.gl,C=_.program,A=generateProgram(E,C);return C.glPrograms[this.renderer.CONTEXT_UID]=A,A}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:E}=this;E.runners.init.emit(E.options),_.hello&&console.log(`PixiJS 7.4.2 - ${E.rendererLogId} - https://pixijs.com`),E.resize(E.screen.width,E.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(T,_=[]){return _[BLEND_MODES.NORMAL]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[T.ONE,T.ONE],_[BLEND_MODES.MULTIPLY]=[T.DST_COLOR,T.ONE_MINUS_SRC_ALPHA,T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[T.ONE,T.ONE_MINUS_SRC_COLOR,T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[T.SRC_ALPHA,T.ONE_MINUS_SRC_ALPHA,T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[T.SRC_ALPHA,T.ONE,T.ONE,T.ONE],_[BLEND_MODES.SCREEN_NPM]=[T.SRC_ALPHA,T.ONE_MINUS_SRC_COLOR,T.ONE,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[T.DST_ALPHA,T.ZERO],_[BLEND_MODES.SRC_OUT]=[T.ONE_MINUS_DST_ALPHA,T.ZERO],_[BLEND_MODES.SRC_ATOP]=[T.DST_ALPHA,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[T.ONE_MINUS_DST_ALPHA,T.ONE],_[BLEND_MODES.DST_IN]=[T.ZERO,T.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[T.ZERO,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[T.ONE_MINUS_DST_ALPHA,T.SRC_ALPHA],_[BLEND_MODES.XOR]=[T.ONE_MINUS_DST_ALPHA,T.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[T.ONE,T.ONE,T.ONE,T.ONE,T.FUNC_REVERSE_SUBTRACT,T.FUNC_ADD],_}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class kl{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let E=this.stateId^_.data,C=0;for(;E;)E&1&&this.map[C].call(this,!!(_.data&1<<C)),E=E>>1,C++;this.stateId=_.data}for(let E=0;E<this.checks.length;E++)this.checks[E](this,_)}forceState(_){_=_||this.defaultState;for(let E=0;E<this.map.length;E++)this.map[E].call(this,!!(_.data&1<<E));for(let E=0;E<this.checks.length;E++)this.checks[E](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(kl.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(kl.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const E=this.blendModes[_],C=this.gl;E.length===2?C.blendFunc(E[0],E[1]):C.blendFuncSeparate(E[0],E[1],E[2],E[3]),E.length===6?(this._blendEq=!0,C.blendEquationSeparate(E[4],E[5])):this._blendEq&&(this._blendEq=!1,C.blendEquationSeparate(C.FUNC_ADD,C.FUNC_ADD))}setPolygonOffset(_,E){this.gl.polygonOffset(_,E)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,E){const C=this.checks.indexOf(_);E&&C===-1?this.checks.push(_):!E&&C!==-1&&this.checks.splice(C,1)}static checkBlendMode(_,E){_.setBlendMode(E.blendMode)}static checkPolygonOffset(_,E){_.setPolygonOffset(1,E.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const E=(_.priority??[]).filter(A=>_.systems[A]),C=[...E,...Object.keys(_.systems).filter(A=>!E.includes(A))];for(const A of C)this.addSystem(_.systems[A],A)}addRunners(..._){_.forEach(E=>{this.runners[E]=new Runner(E)})}addSystem(_,E){const C=new _(this);if(this[E])throw new Error(`Whoops! The name "${E}" is already in use`);this[E]=C,this._systemsHash[E]=C;for(const A in this.runners)this.runners[A].add(C);return this}emitWithCustomOptions(_,E){const C=Object.keys(this._systemsHash);_.items.forEach(A=>{const R=C.find(I=>this._systemsHash[I]===A);A[_.name](E[R])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class ta{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=ta.defaultMaxIdle,this.checkCountMax=ta.defaultCheckCountMax,this.mode=ta.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,E=_.managedTextures;let C=!1;for(let A=0;A<E.length;A++){const R=E[A];R.resource&&this.count-R.touched>this.maxIdle&&(_.destroyTexture(R,!0),E[A]=null,C=!0)}if(C){let A=0;for(let R=0;R<E.length;R++)E[R]!==null&&(E[A++]=E[R]);E.length=A}}unload(_){const E=this.renderer.texture,C=_._texture;C&&!C.framebuffer&&E.destroyTexture(C);for(let A=_.children.length-1;A>=0;A--)this.unload(_.children[A])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(T){let _;return"WebGL2RenderingContext"in globalThis&&T instanceof globalThis.WebGL2RenderingContext?_={[T.RGB]:SAMPLER_TYPES.FLOAT,[T.RGBA]:SAMPLER_TYPES.FLOAT,[T.ALPHA]:SAMPLER_TYPES.FLOAT,[T.LUMINANCE]:SAMPLER_TYPES.FLOAT,[T.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[T.R8]:SAMPLER_TYPES.FLOAT,[T.R8_SNORM]:SAMPLER_TYPES.FLOAT,[T.RG8]:SAMPLER_TYPES.FLOAT,[T.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[T.RGB8]:SAMPLER_TYPES.FLOAT,[T.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[T.RGB565]:SAMPLER_TYPES.FLOAT,[T.RGBA4]:SAMPLER_TYPES.FLOAT,[T.RGB5_A1]:SAMPLER_TYPES.FLOAT,[T.RGBA8]:SAMPLER_TYPES.FLOAT,[T.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[T.RGB10_A2]:SAMPLER_TYPES.FLOAT,[T.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[T.SRGB8]:SAMPLER_TYPES.FLOAT,[T.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[T.R16F]:SAMPLER_TYPES.FLOAT,[T.RG16F]:SAMPLER_TYPES.FLOAT,[T.RGB16F]:SAMPLER_TYPES.FLOAT,[T.RGBA16F]:SAMPLER_TYPES.FLOAT,[T.R32F]:SAMPLER_TYPES.FLOAT,[T.RG32F]:SAMPLER_TYPES.FLOAT,[T.RGB32F]:SAMPLER_TYPES.FLOAT,[T.RGBA32F]:SAMPLER_TYPES.FLOAT,[T.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[T.RGB9_E5]:SAMPLER_TYPES.FLOAT,[T.R8I]:SAMPLER_TYPES.INT,[T.R8UI]:SAMPLER_TYPES.UINT,[T.R16I]:SAMPLER_TYPES.INT,[T.R16UI]:SAMPLER_TYPES.UINT,[T.R32I]:SAMPLER_TYPES.INT,[T.R32UI]:SAMPLER_TYPES.UINT,[T.RG8I]:SAMPLER_TYPES.INT,[T.RG8UI]:SAMPLER_TYPES.UINT,[T.RG16I]:SAMPLER_TYPES.INT,[T.RG16UI]:SAMPLER_TYPES.UINT,[T.RG32I]:SAMPLER_TYPES.INT,[T.RG32UI]:SAMPLER_TYPES.UINT,[T.RGB8I]:SAMPLER_TYPES.INT,[T.RGB8UI]:SAMPLER_TYPES.UINT,[T.RGB16I]:SAMPLER_TYPES.INT,[T.RGB16UI]:SAMPLER_TYPES.UINT,[T.RGB32I]:SAMPLER_TYPES.INT,[T.RGB32UI]:SAMPLER_TYPES.UINT,[T.RGBA8I]:SAMPLER_TYPES.INT,[T.RGBA8UI]:SAMPLER_TYPES.UINT,[T.RGBA16I]:SAMPLER_TYPES.INT,[T.RGBA16UI]:SAMPLER_TYPES.UINT,[T.RGBA32I]:SAMPLER_TYPES.INT,[T.RGBA32UI]:SAMPLER_TYPES.UINT,[T.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[T.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[T.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[T.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[T.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[T.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[T.RGB]:SAMPLER_TYPES.FLOAT,[T.RGBA]:SAMPLER_TYPES.FLOAT,[T.ALPHA]:SAMPLER_TYPES.FLOAT,[T.LUMINANCE]:SAMPLER_TYPES.FLOAT,[T.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[T.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(T){let _;return"WebGL2RenderingContext"in globalThis&&T instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:T.RGBA8,[FORMATS.RGB]:T.RGB8,[FORMATS.RG]:T.RG8,[FORMATS.RED]:T.R8,[FORMATS.RGBA_INTEGER]:T.RGBA8UI,[FORMATS.RGB_INTEGER]:T.RGB8UI,[FORMATS.RG_INTEGER]:T.RG8UI,[FORMATS.RED_INTEGER]:T.R8UI,[FORMATS.ALPHA]:T.ALPHA,[FORMATS.LUMINANCE]:T.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:T.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:T.RGBA8_SNORM,[FORMATS.RGB]:T.RGB8_SNORM,[FORMATS.RG]:T.RG8_SNORM,[FORMATS.RED]:T.R8_SNORM,[FORMATS.RGBA_INTEGER]:T.RGBA8I,[FORMATS.RGB_INTEGER]:T.RGB8I,[FORMATS.RG_INTEGER]:T.RG8I,[FORMATS.RED_INTEGER]:T.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:T.RGBA16UI,[FORMATS.RGB_INTEGER]:T.RGB16UI,[FORMATS.RG_INTEGER]:T.RG16UI,[FORMATS.RED_INTEGER]:T.R16UI,[FORMATS.DEPTH_COMPONENT]:T.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:T.RGBA16I,[FORMATS.RGB_INTEGER]:T.RGB16I,[FORMATS.RG_INTEGER]:T.RG16I,[FORMATS.RED_INTEGER]:T.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:T.RGBA32UI,[FORMATS.RGB_INTEGER]:T.RGB32UI,[FORMATS.RG_INTEGER]:T.RG32UI,[FORMATS.RED_INTEGER]:T.R32UI,[FORMATS.DEPTH_COMPONENT]:T.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:T.RGBA32I,[FORMATS.RGB_INTEGER]:T.RGB32I,[FORMATS.RG_INTEGER]:T.RG32I,[FORMATS.RED_INTEGER]:T.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:T.RGBA32F,[FORMATS.RGB]:T.RGB32F,[FORMATS.RG]:T.RG32F,[FORMATS.RED]:T.R32F,[FORMATS.DEPTH_COMPONENT]:T.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:T.RGBA16F,[FORMATS.RGB]:T.RGB16F,[FORMATS.RG]:T.RG16F,[FORMATS.RED]:T.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:T.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:T.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:T.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:T.RGB10_A2,[FORMATS.RGBA_INTEGER]:T.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:T.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:T.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:T.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:T.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:T.RGBA,[FORMATS.RGB]:T.RGB,[FORMATS.ALPHA]:T.ALPHA,[FORMATS.LUMINANCE]:T.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:T.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:T.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:T.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:T.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const E=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=E;for(let A=0;A<E;A++)this.boundTextures[A]=null;this.emptyTextures={};const C=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,C.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=C,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let A=0;A<6;A++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+A,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let A=0;A<this.boundTextures.length;A++)this.bind(null,A)}bind(_,E=0){const{gl:C}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const A=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[E]!==_&&(this.currentLocation!==E&&(this.currentLocation=E,C.activeTexture(C.TEXTURE0+E)),C.bindTexture(_.target,A.texture)),A.dirtyId!==_.dirtyId?(this.currentLocation!==E&&(this.currentLocation=E,C.activeTexture(C.TEXTURE0+E)),this.updateTexture(_)):A.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[E]=_}else this.currentLocation!==E&&(this.currentLocation=E,C.activeTexture(C.TEXTURE0+E)),C.bindTexture(C.TEXTURE_2D,this.emptyTextures[C.TEXTURE_2D].texture),this.boundTextures[E]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:E,boundTextures:C}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let A=0;A<C.length;A++)C[A]===this.unknownTexture&&this.bind(null,A)}for(let A=0;A<C.length;A++)C[A]===_&&(this.currentLocation!==A&&(E.activeTexture(E.TEXTURE0+A),this.currentLocation=A),E.bindTexture(_.target,this.emptyTextures[_.target].texture),C[A]=null)}ensureSamplerType(_){const{boundTextures:E,hasIntegerTextures:C,CONTEXT_UID:A}=this;if(C)for(let R=_-1;R>=0;--R){const I=E[R];I&&I._glTextures[A].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(I)}}initTexture(_){const E=new GLTexture(this.gl.createTexture());return E.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=E,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),E}initTextureType(_,E){var C;E.internalFormat=((C=this.internalFormats[_.type])==null?void 0:C[_.format])??_.format,E.samplerType=this.samplerTypes[E.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?E.type=this.gl.HALF_FLOAT:E.type=_.type}updateTexture(_){var A;const E=_._glTextures[this.CONTEXT_UID];if(!E)return;const C=this.renderer;if(this.initTextureType(_,E),(A=_.resource)==null?void 0:A.upload(C,_,E))E.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const R=_.realWidth,I=_.realHeight,F=C.gl;(E.width!==R||E.height!==I||E.dirtyId<0)&&(E.width=R,E.height=I,F.texImage2D(_.target,0,E.internalFormat,R,I,0,_.format,E.type,null))}_.dirtyStyleId!==E.dirtyStyleId&&this.updateTextureStyle(_),E.dirtyId=_.dirtyId}destroyTexture(_,E){const{gl:C}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),C.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!E)){const A=this.managedTextures.indexOf(_);A!==-1&&removeItems(this.managedTextures,A,1)}}updateTextureStyle(_){var C;const E=_._glTextures[this.CONTEXT_UID];E&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?E.mipmap=!1:E.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?E.wrapMode=WRAP_MODES.CLAMP:E.wrapMode=_.wrapMode,(C=_.resource)!=null&&C.style(this.renderer,_,E)||this.setStyle(_,E),E.dirtyStyleId=_.dirtyStyleId)}setStyle(_,E){const C=this.gl;if(E.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&C.generateMipmap(_.target),C.texParameteri(_.target,C.TEXTURE_WRAP_S,E.wrapMode),C.texParameteri(_.target,C.TEXTURE_WRAP_T,E.wrapMode),E.mipmap){C.texParameteri(_.target,C.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?C.LINEAR_MIPMAP_LINEAR:C.NEAREST_MIPMAP_NEAREST);const A=this.renderer.context.extensions.anisotropicFiltering;if(A&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const R=Math.min(_.anisotropicLevel,C.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT));C.texParameterf(_.target,A.TEXTURE_MAX_ANISOTROPY_EXT,R)}}else C.texParameteri(_.target,C.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?C.LINEAR:C.NEAREST);C.texParameteri(_.target,C.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?C.LINEAR:C.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:E,CONTEXT_UID:C}=this,A=_._glTransformFeedbacks[C]||this.createGLTransformFeedback(_);E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,A)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,E){const{gl:C,renderer:A}=this;E&&A.shader.bind(E),C.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:E,renderer:C,CONTEXT_UID:A}=this,R=E.createTransformFeedback();_._glTransformFeedbacks[A]=R,E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,R);for(let I=0;I<_.buffers.length;I++){const F=_.buffers[I];F&&(C.buffer.update(F),F._glBuffers[A].refCount++,E.bindBufferBase(E.TRANSFORM_FEEDBACK_BUFFER,I,F._glBuffers[A].buffer||null))}return E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),R}disposeTransformFeedback(_,E){const C=_._glTransformFeedbacks[this.CONTEXT_UID],A=this.gl;_.disposeRunner.remove(this);const R=this.renderer.buffer;if(R)for(let I=0;I<_.buffers.length;I++){const F=_.buffers[I];if(!F)continue;const B=F._glBuffers[this.CONTEXT_UID];B&&(B.refCount--,B.refCount===0&&!E&&R.dispose(F,E))}C&&(E||A.deleteTransformFeedback(C),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle$1(0,0,_.width,_.height),this.element=_.view||settings.ADAPTER.createCanvas(),this.resolution=_.resolution||settings.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,E){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(E*this.resolution);const C=this.element.width/this.resolution,A=this.element.height/this.resolution;this.screen.width=C,this.screen.height=A,this.autoDensity&&(this.element.style.width=`${C}px`,this.element.style.height=`${A}px`),this.renderer.emit("resize",C,A),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var E;_&&((E=this.element.parentNode)==null||E.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(T){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=T}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(T){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=T}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(T){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=T}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(T){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=T}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(T){Filter.defaultResolution=T}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(T){Filter.defaultMultisample=T}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(T){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=T}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(T){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=T}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(T){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=T}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(T){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=T}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(T){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=T}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(T){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=T}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(T){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=T}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(T){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=T}}});var UPDATE_PRIORITY=(T=>(T[T.INTERACTION=50]="INTERACTION",T[T.HIGH=25]="HIGH",T[T.NORMAL=0]="NORMAL",T[T.LOW=-25]="LOW",T[T.UTILITY=-50]="UTILITY",T))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,E=null,C=0,A=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=E,this.priority=C,this.once=A}match(_,E=null){return this.fn===_&&this.context===E}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const E=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),E}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const E=this.next;return this.next=_?null:E,this.previous=null,E}}const _Ticker=class sn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/sn.targetFPMS,this.elapsedMS=1/sn.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,E,C=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,E,C))}addOnce(_,E,C=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,E,C,!0))}_addListener(_){let E=this._head.next,C=this._head;if(!E)_.connect(C);else{for(;E;){if(_.priority>E.priority){_.connect(C);break}C=E,E=E.next}_.previous||_.connect(C)}return this._startIfPossible(),this}remove(_,E){let C=this._head.next;for(;C;)C.match(_,E)?C=C.destroy():C=C.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,E=this._head;for(;E=E.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let E;if(_>this.lastTime){if(E=this.elapsedMS=_-this.lastTime,E>this._maxElapsedMS&&(E=this._maxElapsedMS),E*=this.speed,this._minElapsedMS){const R=_-this._lastFrame|0;if(R<this._minElapsedMS)return;this._lastFrame=_-R%this._minElapsedMS}this.deltaMS=E,this.deltaTime=this.deltaMS*sn.targetFPMS;const C=this._head;let A=C.next;for(;A;)A=A.emit(this.deltaTime);C.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const E=Math.min(this.maxFPS,_),C=Math.min(Math.max(0,E)/1e3,sn.targetFPMS);this._maxElapsedMS=1/C}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const E=Math.max(this.minFPS,_);this._minElapsedMS=1/(E/1e3)}}static get shared(){if(!sn._shared){const _=sn._shared=new sn;_.autoStart=!0,_._protected=!0}return sn._shared}static get system(){if(!sn._system){const _=sn._system=new sn;_.autoStart=!0,_._protected=!0}return sn._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(T){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=T}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(E){this._ticker&&this._ticker.remove(this.render,this),this._ticker=E,E&&E.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(T){for(const _ of renderers)if(_.test(T))return new _(T);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let E;if(this.renderer.context.webGLVersion===1){const C=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),E=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,C)}else{const C=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),E=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,C)}E>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:E>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:E>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:E,CONTEXT_UID:C}=this,A=_._glBuffers[C]||this.createGLBuffer(_);E.bindBuffer(_.type,A.buffer)}unbind(_){const{gl:E}=this;E.bindBuffer(_,null)}bindBufferBase(_,E){const{gl:C,CONTEXT_UID:A}=this;if(this.boundBufferBases[E]!==_){const R=_._glBuffers[A]||this.createGLBuffer(_);this.boundBufferBases[E]=_,C.bindBufferBase(C.UNIFORM_BUFFER,E,R.buffer)}}bindBufferRange(_,E,C){const{gl:A,CONTEXT_UID:R}=this;C=C||0;const I=_._glBuffers[R]||this.createGLBuffer(_);A.bindBufferRange(A.UNIFORM_BUFFER,E||0,I.buffer,C*256,256)}update(_){const{gl:E,CONTEXT_UID:C}=this,A=_._glBuffers[C]||this.createGLBuffer(_);if(_._updateID!==A.updateID)if(A.updateID=_._updateID,E.bindBuffer(_.type,A.buffer),A.byteLength>=_.data.byteLength)E.bufferSubData(_.type,0,_.data);else{const R=_.static?E.STATIC_DRAW:E.DYNAMIC_DRAW;A.byteLength=_.data.byteLength,E.bufferData(_.type,_.data,R)}}dispose(_,E){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const C=_._glBuffers[this.CONTEXT_UID],A=this.gl;_.disposeRunner.remove(this),C&&(E||A.deleteBuffer(C.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const E=Object.keys(this.managedBuffers);for(let C=0;C<E.length;C++)this.dispose(this.managedBuffers[E[C]],_)}createGLBuffer(_){const{CONTEXT_UID:E,gl:C}=this;return _._glBuffers[E]=new GLBuffer(C.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[E]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,E){const C=this.renderer;let A,R,I,F;if(E&&(A=E.renderTexture,R=E.clear,I=E.transform,F=E.skipUpdateTransform),this.renderingToScreen=!A,C.runners.prerender.emit(),C.emit("prerender"),C.projection.transform=I,!C.context.isLost){if(A||(this.lastObjectRendered=_),!F){const B=_.enableTempParent();_.updateTransform(),_.disableTempParent(B)}C.renderTexture.bind(A),C.batch.currentRenderer.start(),(R??C.background.clearBeforeRender)&&C.renderTexture.clear(),_.render(C),C.batch.currentRenderer.flush(),A&&(E.blit&&C.framebuffer.blit(),A.baseTexture.update()),C.runners.postrender.emit(),C.projection.transform=null,C.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class Dl extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const E={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Dl.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(E),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=Dl.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,E){this.objectRenderer.render(_,E)}resize(_,E){this._view.resizeView(_,E)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,E){return this.textureGenerator.generateTexture(_,E)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$1.add(Renderer);class AbstractMultiResource extends Resource{constructor(_,E){const{width:C,height:A}=E||{};super(C,A),this.items=[],this.itemDirtyIds=[];for(let R=0;R<_;R++){const I=new BaseTexture;this.items.push(I),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,E){for(let C=0;C<this.length;C++)_[C]&&(_[C].castToBaseTexture?this.addBaseTextureAt(_[C].castToBaseTexture(),C):_[C]instanceof Resource?this.addResourceAt(_[C],C):this.addResourceAt(autoDetectResource(_[C],E),C))}dispose(){for(let _=0,E=this.length;_<E;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,E){if(!this.items[E])throw new Error(`Index ${E} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[E].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let E=0;E<this.length;E++)this.items[E].parentTextureArray=_,this.items[E].on("update",_.update,_)}unbind(_){super.unbind(_);for(let E=0;E<this.length;E++)this.items[E].parentTextureArray=null,this.items[E].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(E=>E.resource).filter(E=>E).map(E=>E.load());return this._load=Promise.all(_).then(()=>{const{realWidth:E,realHeight:C}=this.items[0];return this.resize(E,C),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,E){const{width:C,height:A}=E||{};let R,I;Array.isArray(_)?(R=_,I=_.length):I=_,super(I,{width:C,height:A}),R&&this.initFromArray(R,E)}addBaseTextureAt(_,E){if(_.resource)this.addResourceAt(_.resource,E);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,E,C){const{length:A,itemDirtyIds:R,items:I}=this,{gl:F}=_;C.dirtyId<0&&F.texImage3D(F.TEXTURE_2D_ARRAY,0,C.internalFormat,this._width,this._height,A,0,E.format,C.type,null);for(let B=0;B<A;B++){const U=I[B];R[B]<U.dirtyId&&(R[B]=U.dirtyId,U.valid&&F.texSubImage3D(F.TEXTURE_2D_ARRAY,0,0,0,B,U.resource.width,U.resource.height,1,E.format,C.type,U.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:E}=globalThis;return E&&_ instanceof E?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class Gs extends AbstractMultiResource{constructor(_,E){const{width:C,height:A,autoLoad:R,linkBaseTexture:I}=E||{};if(_&&_.length!==Gs.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:C,height:A});for(let F=0;F<Gs.SIDES;F++)this.items[F].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+F;this.linkBaseTexture=I!==!1,_&&this.initFromArray(_,E),R!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,E,C){if(C===void 0&&(C=this.linkBaseTexture),!this.items[E])throw new Error(`Index ${E} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,E);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+E,_.parentTextureArray=this.baseTexture,this.items[E]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[E]=_,this}upload(_,E,C){const A=this.itemDirtyIds;for(let R=0;R<Gs.SIDES;R++){const I=this.items[R];(A[R]<I.dirtyId||C.dirtyId<E.dirtyId)&&(I.valid&&I.resource?(I.resource.upload(_,I,C),A[R]=I.dirtyId):A[R]<-1&&(_.gl.texImage2D(I.target,0,C.internalFormat,E.realWidth,E.realHeight,0,E.format,C.type,null),A[R]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===Gs.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,E){E=E||{};let C,A,R;typeof _=="string"?(C=ImageBitmapResource.EMPTY,A=_,R=!0):(C=_,A=null,R=!1),super(C),this.url=A,this.crossOrigin=E.crossOrigin??!0,this.alphaMode=typeof E.alphaMode=="number"?E.alphaMode:null,this.ownsImageBitmap=E.ownsImageBitmap??R,this._load=null,E.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,E)=>{if(this.url===null){_(this);return}try{const C=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const A=await C.blob();if(this.destroyed)return;const R=await createImageBitmap(A,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){R.close();return}this.source=R,this.update(),_(this)}catch(C){if(this.destroyed)return;E(C),this.onError.emit(C)}}),this._load)}upload(_,E,C){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(E.alphaMode=this.alphaMode),super.upload(_,E,C)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class ra extends BaseImageResource{constructor(_,E){E=E||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=E.scale||1,this._overrideWidth=E.width,this._overrideHeight=E.height,this._resolve=null,this._crossorigin=E.crossorigin,this._load=null,E.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},ra.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=E=>{this._resolve&&(_.onerror=null,this.onError.emit(E))},_.onload=()=>{if(!this._resolve)return;const E=_.width,C=_.height;if(!E||!C)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let A=E*this.scale,R=C*this.scale;(this._overrideWidth||this._overrideHeight)&&(A=this._overrideWidth||this._overrideHeight/C*E,R=this._overrideHeight||this._overrideWidth/E*C),A=Math.round(A),R=Math.round(R);const I=this.source;I.width=A,I.height=R,I._pixiId=`canvas_${uid()}`,I.getContext("2d").drawImage(_,0,0,E,C,0,0,A,R),this._resolve(),this._resolve=null}}static getSize(_){const E=ra.SVG_SIZE.exec(_),C={};return E&&(C[E[1]]=Math.round(parseFloat(E[3])),C[E[5]]=Math.round(parseFloat(E[7]))),C}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,E){return E==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&ra.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;class VideoFrameResource extends BaseImageResource{constructor(_){super(_)}static test(_){return!!globalThis.VideoFrame&&_ instanceof globalThis.VideoFrame}}const _VideoResource=class Fl extends BaseImageResource{constructor(_,E){if(E=E||{},!(_ instanceof HTMLVideoElement)){const C=document.createElement("video");E.autoLoad!==!1&&C.setAttribute("preload","auto"),E.playsinline!==!1&&(C.setAttribute("webkit-playsinline",""),C.setAttribute("playsinline","")),E.muted===!0&&(C.setAttribute("muted",""),C.muted=!0),E.loop===!0&&C.setAttribute("loop",""),E.autoPlay!==!1&&C.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const A=_[0].src||_[0];BaseImageResource.crossOrigin(C,A,E.crossorigin);for(let R=0;R<_.length;++R){const I=document.createElement("source");let{src:F,mime:B}=_[R];if(F=F||_[R],F.startsWith("data:"))B=F.slice(5,F.indexOf(";"));else if(!F.startsWith("blob:")){const U=F.split("?").shift().toLowerCase(),V=U.slice(U.lastIndexOf(".")+1);B=B||Fl.MIME_TYPES[V]||`video/${V}`}I.src=F,B&&(I.type=B),C.appendChild(I)}_=C}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=E.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=E.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),E.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const E=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-E)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((E,C)=>{this.valid?E(this):(this._resolve=E,this._reject=C,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const E=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!E&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,E){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||Fl.TYPES.includes(E)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,VideoFrameResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle$1.EMPTY:(_=_||new Rectangle$1(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,E){const{a:C,b:A,c:R,d:I,tx:F,ty:B}=_,U=C*E.x+R*E.y+F,V=A*E.x+I*E.y+B;this.minX=Math.min(this.minX,U),this.maxX=Math.max(this.maxX,U),this.minY=Math.min(this.minY,V),this.maxY=Math.max(this.maxY,V)}addQuad(_){let E=this.minX,C=this.minY,A=this.maxX,R=this.maxY,I=_[0],F=_[1];E=I<E?I:E,C=F<C?F:C,A=I>A?I:A,R=F>R?F:R,I=_[2],F=_[3],E=I<E?I:E,C=F<C?F:C,A=I>A?I:A,R=F>R?F:R,I=_[4],F=_[5],E=I<E?I:E,C=F<C?F:C,A=I>A?I:A,R=F>R?F:R,I=_[6],F=_[7],E=I<E?I:E,C=F<C?F:C,A=I>A?I:A,R=F>R?F:R,this.minX=E,this.minY=C,this.maxX=A,this.maxY=R}addFrame(_,E,C,A,R){this.addFrameMatrix(_.worldTransform,E,C,A,R)}addFrameMatrix(_,E,C,A,R){const I=_.a,F=_.b,B=_.c,U=_.d,V=_.tx,D=_.ty;let O=this.minX,L=this.minY,z=this.maxX,W=this.maxY,X=I*E+B*C+V,Y=F*E+U*C+D;O=X<O?X:O,L=Y<L?Y:L,z=X>z?X:z,W=Y>W?Y:W,X=I*A+B*C+V,Y=F*A+U*C+D,O=X<O?X:O,L=Y<L?Y:L,z=X>z?X:z,W=Y>W?Y:W,X=I*E+B*R+V,Y=F*E+U*R+D,O=X<O?X:O,L=Y<L?Y:L,z=X>z?X:z,W=Y>W?Y:W,X=I*A+B*R+V,Y=F*A+U*R+D,O=X<O?X:O,L=Y<L?Y:L,z=X>z?X:z,W=Y>W?Y:W,this.minX=O,this.minY=L,this.maxX=z,this.maxY=W}addVertexData(_,E,C){let A=this.minX,R=this.minY,I=this.maxX,F=this.maxY;for(let B=E;B<C;B+=2){const U=_[B],V=_[B+1];A=U<A?U:A,R=V<R?V:R,I=U>I?U:I,F=V>F?V:F}this.minX=A,this.minY=R,this.maxX=I,this.maxY=F}addVertices(_,E,C,A){this.addVerticesMatrix(_.worldTransform,E,C,A)}addVerticesMatrix(_,E,C,A,R=0,I=R){const F=_.a,B=_.b,U=_.c,V=_.d,D=_.tx,O=_.ty;let L=this.minX,z=this.minY,W=this.maxX,X=this.maxY;for(let Y=C;Y<A;Y+=2){const K=E[Y],Q=E[Y+1],ee=F*K+U*Q+D,J=V*Q+B*K+O;L=Math.min(L,ee-R),W=Math.max(W,ee+R),z=Math.min(z,J-I),X=Math.max(X,J+I)}this.minX=L,this.minY=z,this.maxX=W,this.maxY=X}addBounds(_){const E=this.minX,C=this.minY,A=this.maxX,R=this.maxY;this.minX=_.minX<E?_.minX:E,this.minY=_.minY<C?_.minY:C,this.maxX=_.maxX>A?_.maxX:A,this.maxY=_.maxY>R?_.maxY:R}addBoundsMask(_,E){const C=_.minX>E.minX?_.minX:E.minX,A=_.minY>E.minY?_.minY:E.minY,R=_.maxX<E.maxX?_.maxX:E.maxX,I=_.maxY<E.maxY?_.maxY:E.maxY;if(C<=R&&A<=I){const F=this.minX,B=this.minY,U=this.maxX,V=this.maxY;this.minX=C<F?C:F,this.minY=A<B?A:B,this.maxX=R>U?R:U,this.maxY=I>V?I:V}}addBoundsMatrix(_,E){this.addFrameMatrix(E,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,E){const C=_.minX>E.x?_.minX:E.x,A=_.minY>E.y?_.minY:E.y,R=_.maxX<E.x+E.width?_.maxX:E.x+E.width,I=_.maxY<E.y+E.height?_.maxY:E.y+E.height;if(C<=R&&A<=I){const F=this.minX,B=this.minY,U=this.maxX,V=this.maxY;this.minX=C<F?C:F,this.minY=A<B?A:B,this.maxX=R>U?R:U,this.maxY=I>V?I:V}}pad(_=0,E=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=E,this.maxY+=E)}addFramePad(_,E,C,A,R,I){_-=R,E-=I,C+=R,A+=I,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>C?this.maxX:C,this.minY=this.minY<E?this.minY:E,this.maxY=this.maxY>A?this.maxY:A}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const E=Object.keys(_);for(let C=0;C<E.length;++C){const A=E[C];Object.defineProperty(DisplayObject.prototype,A,Object.getOwnPropertyDescriptor(_,A))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,E){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),E||(this._boundsRect||(this._boundsRect=new Rectangle$1),E=this._boundsRect),this._bounds.getRectangle(E)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle$1),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const E=this.transform,C=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(C==null?void 0:C.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const A=this._bounds,R=this._boundsID;this._bounds=this._localBounds;const I=this.getBounds(!1,_);return this.parent=C,this.transform=E,this._bounds=A,this._bounds.updateID+=this._boundsID-R,I}toGlobal(_,E,C=!1){return C||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,E)}toLocal(_,E,C,A){return E&&(_=E.toGlobal(_,C,A)),A||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,C)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,E=0,C=1,A=1,R=0,I=0,F=0,B=0,U=0){return this.position.x=_,this.position.y=E,this.scale.x=C||1,this.scale.y=A||1,this.rotation=R,this.skew.x=I,this.skew.y=F,this.pivot.x=B,this.pivot.y=U,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const E=this._mask.isMaskData?this._mask.maskObject:this._mask;E&&(E._maskRefCount--,E._maskRefCount===0&&(E.renderable=!0,E.isMask=!1))}if(this._mask=_,this._mask){const E=this._mask.isMaskData?this._mask.maskObject:this._mask;E&&(E._maskRefCount===0&&(E.renderable=!1,E.isMask=!0),E._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix$2=new Matrix;function sortChildren(T,_){return T.zIndex===_.zIndex?T._lastSortedIndex-_._lastSortedIndex:T.zIndex-_.zIndex}const _Container=class Ll extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=Ll.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let E=0;E<_.length;E++)this.addChild(_[E]);else{const E=_[0];E.parent&&E.parent.removeChild(E),E.parent=this,this.sortDirty=!0,E.transform._parentID=-1,this.children.push(E),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",E,this,this.children.length-1),E.emit("added",this)}return _[0]}addChildAt(_,E){if(E<0||E>this.children.length)throw new Error(`${_}addChildAt: The index ${E} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(E,0,_),this._boundsID++,this.onChildrenChange(E),_.emit("added",this),this.emit("childAdded",_,this,E),_}swapChildren(_,E){if(_===E)return;const C=this.getChildIndex(_),A=this.getChildIndex(E);this.children[C]=E,this.children[A]=_,this.onChildrenChange(C<A?C:A)}getChildIndex(_){const E=this.children.indexOf(_);if(E===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return E}setChildIndex(_,E){if(E<0||E>=this.children.length)throw new Error(`The index ${E} supplied is out of bounds ${this.children.length}`);const C=this.getChildIndex(_);removeItems(this.children,C,1),this.children.splice(E,0,_),this.onChildrenChange(E)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let E=0;E<_.length;E++)this.removeChild(_[E]);else{const E=_[0],C=this.children.indexOf(E);if(C===-1)return null;E.parent=null,E.transform._parentID=-1,removeItems(this.children,C,1),this._boundsID++,this.onChildrenChange(C),E.emit("removed",this),this.emit("childRemoved",E,this,C)}return _[0]}removeChildAt(_){const E=this.getChildAt(_);return E.parent=null,E.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),E.emit("removed",this),this.emit("childRemoved",E,this,_),E}removeChildren(_=0,E=this.children.length){const C=_,A=E,R=A-C;let I;if(R>0&&R<=A){I=this.children.splice(C,R);for(let F=0;F<I.length;++F)I[F].parent=null,I[F].transform&&(I[F].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let F=0;F<I.length;++F)I[F].emit("removed",this),this.emit("childRemoved",I[F],this,F);return I}else if(R===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let E=0,C=this.children.length;E<C;++E){const A=this.children[E];A._lastSortedIndex=E,!_&&A.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,E=this.children.length;_<E;++_){const C=this.children[_];C.visible&&C.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const E=this.children[_];if(!(!E.visible||!E.renderable))if(E.calculateBounds(),E._mask){const C=E._mask.isMaskData?E._mask.maskObject:E._mask;C?(C.calculateBounds(),this._bounds.addBoundsMask(E._bounds,C._bounds)):this._bounds.addBounds(E._bounds)}else E.filterArea?this._bounds.addBoundsArea(E._bounds,E.filterArea):this._bounds.addBounds(E._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,E=!1){const C=super.getLocalBounds(_);if(!E)for(let A=0,R=this.children.length;A<R;++A){const I=this.children[A];I.visible&&I.updateTransform()}return C}_calculateBounds(){}_renderWithCulling(_){const E=_.renderTexture.sourceFrame;if(!(E.width>0&&E.height>0))return;let C,A;this.cullArea?(C=this.cullArea,A=this.worldTransform):this._render!==Ll.prototype._render&&(C=this.getBounds(!0));const R=_.projection.transform;if(R&&(A?(A=tempMatrix$2.copyFrom(A),A.prepend(R)):A=R),C&&E.intersects(C,A))this._render(_);else if(this.cullArea)return;for(let I=0,F=this.children.length;I<F;++I){const B=this.children[I],U=B.cullable;B.cullable=U||!this.cullArea,B.render(_),B.cullable=U}}render(_){var E;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(E=this.filters)!=null&&E.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let C=0,A=this.children.length;C<A;++C)this.children[C].render(_)}}renderAdvanced(_){var R,I,F;const E=this.filters,C=this._mask;if(E){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let B=0;B<E.length;B++)E[B].enabled&&this._enabledFilters.push(E[B])}const A=E&&((R=this._enabledFilters)==null?void 0:R.length)||C&&(!C.isMaskData||C.enabled&&(C.autoDetect||C.type!==MASK_TYPES.NONE));if(A&&_.batch.flush(),E&&((I=this._enabledFilters)!=null&&I.length)&&_.filter.push(this,this._enabledFilters),C&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let B=0,U=this.children.length;B<U;++B)this.children[B].render(_)}A&&_.batch.flush(),C&&_.mask.pop(this),E&&((F=this._enabledFilters)!=null&&F.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const E=typeof _=="boolean"?_:_==null?void 0:_.children,C=this.removeChildren(0,this.children.length);if(E)for(let A=0;A<C.length;++A)C[A].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const E=this.getLocalBounds().width;E!==0?this.scale.x=_/E:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const E=this.getLocalBounds().height;E!==0?this.scale.y=_/E:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(T){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=T}}});const tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const E=this.transform.worldTransform,C=E.a,A=E.b,R=E.c,I=E.d,F=E.tx,B=E.ty,U=this.vertexData,V=_.trim,D=_.orig,O=this._anchor;let L=0,z=0,W=0,X=0;if(V?(z=V.x-O._x*D.width,L=z+V.width,X=V.y-O._y*D.height,W=X+V.height):(z=-O._x*D.width,L=z+D.width,X=-O._y*D.height,W=X+D.height),U[0]=C*z+R*X+F,U[1]=I*X+A*z+B,U[2]=C*L+R*X+F,U[3]=I*X+A*L+B,U[4]=C*L+R*W+F,U[5]=I*W+A*L+B,U[6]=C*z+R*W+F,U[7]=I*W+A*z+B,this._roundPixels){const Y=settings.RESOLUTION;for(let K=0;K<U.length;++K)U[K]=Math.round(U[K]*Y)/Y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,E=this.vertexTrimmedData,C=_.orig,A=this._anchor,R=this.transform.worldTransform,I=R.a,F=R.b,B=R.c,U=R.d,V=R.tx,D=R.ty,O=-A._x*C.width,L=O+C.width,z=-A._y*C.height,W=z+C.height;if(E[0]=I*O+B*z+V,E[1]=U*z+F*O+D,E[2]=I*L+B*z+V,E[3]=U*z+F*L+D,E[4]=I*L+B*W+V,E[5]=U*W+F*L+D,E[6]=I*O+B*W+V,E[7]=U*W+F*O+D,this._roundPixels){const X=settings.RESOLUTION;for(let Y=0;Y<E.length;++Y)E[Y]=Math.round(E[Y]*X)/X}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,E=this._texture.orig;!_||_.width===E.width&&_.height===E.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle$1),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$2);const E=this._texture.orig.width,C=this._texture.orig.height,A=-E*this.anchor.x;let R=0;return tempPoint$2.x>=A&&tempPoint$2.x<A+E&&(R=-C*this.anchor.y,tempPoint$2.y>=R&&tempPoint$2.y<R+C)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const E=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!E)}this._texture=null}static from(_,E){const C=_ instanceof Texture?_:Texture.from(_,E);return new Sprite(C)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const E=sign(this.scale.x)||1;this.scale.x=E*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const E=sign(this.scale.y)||1;this.scale.y=E*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(T){T!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=T,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(T){T!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=T,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(T){if(this._cacheAsBitmap===T)return;this._cacheAsBitmap=T;let _;T?(this._cacheData||(this._cacheData=new CacheData),_=this._cacheData,_.originalRender=this.render,_.originalRenderCanvas=this.renderCanvas,_.originalUpdateTransform=this.updateTransform,_.originalCalculateBounds=this.calculateBounds,_.originalGetLocalBounds=this.getLocalBounds,_.originalDestroy=this.destroy,_.originalContainsPoint=this.containsPoint,_.originalMask=this._mask,_.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(_=this._cacheData,_.sprite&&this._destroyCachedDisplayObject(),this.render=_.originalRender,this.renderCanvas=_.originalRenderCanvas,this.calculateBounds=_.originalCalculateBounds,this.getLocalBounds=_.originalGetLocalBounds,this.destroy=_.originalDestroy,this.updateTransform=_.originalUpdateTransform,this.containsPoint=_.originalContainsPoint,this._mask=_.originalMask,this.filterArea=_.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(T){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(T),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(T))};DisplayObject.prototype._initCachedDisplayObject=function(T){var O,L;if((O=this._cacheData)!=null&&O.sprite)return;const _=this.alpha;this.alpha=1,T.batch.flush();const E=this.getLocalBounds(new Rectangle$1,!0);if((L=this.filters)!=null&&L.length){const z=this.filters[0].padding;E.pad(z)}const C=this.cacheAsBitmapResolution||T.resolution;E.ceil(C),E.width=Math.max(E.width,1/C),E.height=Math.max(E.height,1/C);const A=T.renderTexture.current,R=T.renderTexture.sourceFrame.clone(),I=T.renderTexture.destinationFrame.clone(),F=T.projection.transform,B=RenderTexture.create({width:E.width,height:E.height,resolution:C,multisample:this.cacheAsBitmapMultisample??T.multisample}),U=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=U,BaseTexture.addToCache(B.baseTexture,U),Texture.addToCache(B,U);const V=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-E.x,-E.y);this.render=this._cacheData.originalRender,T.render(this,{renderTexture:B,clear:!0,transform:V,skipUpdateTransform:!1}),T.framebuffer.blit(),T.projection.transform=F,T.renderTexture.bind(A,R,I),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_;const D=new Sprite(B);D.transform.worldTransform=this.transform.worldTransform,D.anchor.x=-(E.x/E.width),D.anchor.y=-(E.y/E.height),D.alpha=_,D._bounds=this._bounds,this._cacheData.sprite=D,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=D.containsPoint.bind(D)};DisplayObject.prototype._renderCachedCanvas=function(T){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(T),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(T))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(T){var V;if((V=this._cacheData)!=null&&V.sprite)return;const _=this.getLocalBounds(new Rectangle$1,!0),E=this.alpha;this.alpha=1;const C=T.canvasContext.activeContext,A=T._projTransform,R=this.cacheAsBitmapResolution||T.resolution;_.ceil(R),_.width=Math.max(_.width,1/R),_.height=Math.max(_.height,1/R);const I=RenderTexture.create({width:_.width,height:_.height,resolution:R}),F=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=F,BaseTexture.addToCache(I.baseTexture,F),Texture.addToCache(I,F);const B=_tempMatrix;this.transform.localTransform.copyTo(B),B.invert(),B.tx-=_.x,B.ty-=_.y,this.renderCanvas=this._cacheData.originalRenderCanvas,T.render(this,{renderTexture:I,clear:!0,transform:B,skipUpdateTransform:!1}),T.canvasContext.activeContext=C,T._projTransform=A,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=E;const U=new Sprite(I);U.transform.worldTransform=this.transform.worldTransform,U.anchor.x=-(_.x/_.width),U.anchor.y=-(_.y/_.height),U.alpha=E,U._bounds=this._bounds,this._cacheData.sprite=U,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=T._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=U.containsPoint.bind(U)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(T){this.cacheAsBitmap=!1,this.destroy(T)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(T,_){for(let E=0,C=this.children.length;E<C;E++)if(this.children[E].name===T)return this.children[E];if(_)for(let E=0,C=this.children.length;E<C;E++){const A=this.children[E];if(!A.getChildByName)continue;const R=A.getChildByName(T,!0);if(R)return R}return null};DisplayObject.prototype.getGlobalPosition=function(T=new Point,_=!1){return this.parent?this.parent.toGlobal(this.position,T,_):(T.x=this.position.x,T.y=this.position.y),T};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(_=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(T){const _=GAUSSIAN_VALUES[T],E=_.length;let C=fragTemplate,A="";const R="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let I;for(let F=0;F<T;F++){let B=R.replace("%index%",F.toString());I=F,F>=E&&(I=T-F-1),B=B.replace("%value%",_[I].toString()),A+=B,A+=`
`}return C=C.replace("%blur%",A),C=C.replace("%size%",T.toString()),C}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(T,_){const E=Math.ceil(T/2);let C=vertTemplate,A="",R;_?R="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":R="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let I=0;I<T;I++){let F=R.replace("%index%",I.toString());F=F.replace("%sampleIndex%",`${I-(E-1)}.0`),A+=F,A+=`
`}return C=C.replace("%blur%",A),C=C.replace("%size%",T.toString()),C}class BlurFilterPass extends Filter{constructor(_,E=8,C=4,A=Filter.defaultResolution,R=5){const I=generateBlurVertSource(R,_),F=generateBlurFragSource(R);super(I,F),this.horizontal=_,this.resolution=A,this._quality=0,this.quality=C,this.blur=E}apply(_,E,C,A){if(C?this.horizontal?this.uniforms.strength=1/C.width*(C.width/E.width):this.uniforms.strength=1/C.height*(C.height/E.height):this.horizontal?this.uniforms.strength=1/_.renderer.width*(_.renderer.width/E.width):this.uniforms.strength=1/_.renderer.height*(_.renderer.height/E.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)_.applyFilter(this,E,C,A);else{const R=_.getFilterTexture(),I=_.renderer;let F=E,B=R;this.state.blend=!1,_.applyFilter(this,F,B,CLEAR_MODES.CLEAR);for(let U=1;U<this.passes-1;U++){_.bindAndClear(F,CLEAR_MODES.BLIT),this.uniforms.uSampler=B;const V=B;B=F,F=V,I.shader.bind(this),I.geometry.draw(5)}this.state.blend=!0,_.applyFilter(this,B,C,A),_.returnFilterTexture(R)}}get blur(){return this.strength}set blur(_){this.padding=1+Math.abs(_)*2,this.strength=_}get quality(){return this._quality}set quality(_){this._quality=_,this.passes=_}}class BlurFilter extends Filter{constructor(_=8,E=4,C=Filter.defaultResolution,A=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,_,E,C,A),this.blurYFilter=new BlurFilterPass(!1,_,E,C,A),this.resolution=C,this.quality=E,this.blur=_,this.repeatEdgePixels=!1}apply(_,E,C,A){const R=Math.abs(this.blurXFilter.strength),I=Math.abs(this.blurYFilter.strength);if(R&&I){const F=_.getFilterTexture();this.blurXFilter.apply(_,E,F,CLEAR_MODES.CLEAR),this.blurYFilter.apply(_,F,C,A),_.returnFilterTexture(F)}else I?this.blurYFilter.apply(_,E,C,A):this.blurXFilter.apply(_,E,C,A)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(_){this.blurXFilter.blur=this.blurYFilter.blur=_,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(_){this.blurXFilter.quality=this.blurYFilter.quality=_}get blurX(){return this.blurXFilter.blur}set blurX(_){this.blurXFilter.blur=_,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(_){this.blurYFilter.blur=_,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(_){this.blurYFilter.blendMode=_}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(_){this._repeatEdgePixels=_,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const _={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,_),this.alpha=1}_loadMatrix(_,E=!1){let C=_;E&&(this._multiply(C,this.uniforms.m,_),C=this._colorMatrix(C)),this.uniforms.m=C}_multiply(_,E,C){return _[0]=E[0]*C[0]+E[1]*C[5]+E[2]*C[10]+E[3]*C[15],_[1]=E[0]*C[1]+E[1]*C[6]+E[2]*C[11]+E[3]*C[16],_[2]=E[0]*C[2]+E[1]*C[7]+E[2]*C[12]+E[3]*C[17],_[3]=E[0]*C[3]+E[1]*C[8]+E[2]*C[13]+E[3]*C[18],_[4]=E[0]*C[4]+E[1]*C[9]+E[2]*C[14]+E[3]*C[19]+E[4],_[5]=E[5]*C[0]+E[6]*C[5]+E[7]*C[10]+E[8]*C[15],_[6]=E[5]*C[1]+E[6]*C[6]+E[7]*C[11]+E[8]*C[16],_[7]=E[5]*C[2]+E[6]*C[7]+E[7]*C[12]+E[8]*C[17],_[8]=E[5]*C[3]+E[6]*C[8]+E[7]*C[13]+E[8]*C[18],_[9]=E[5]*C[4]+E[6]*C[9]+E[7]*C[14]+E[8]*C[19]+E[9],_[10]=E[10]*C[0]+E[11]*C[5]+E[12]*C[10]+E[13]*C[15],_[11]=E[10]*C[1]+E[11]*C[6]+E[12]*C[11]+E[13]*C[16],_[12]=E[10]*C[2]+E[11]*C[7]+E[12]*C[12]+E[13]*C[17],_[13]=E[10]*C[3]+E[11]*C[8]+E[12]*C[13]+E[13]*C[18],_[14]=E[10]*C[4]+E[11]*C[9]+E[12]*C[14]+E[13]*C[19]+E[14],_[15]=E[15]*C[0]+E[16]*C[5]+E[17]*C[10]+E[18]*C[15],_[16]=E[15]*C[1]+E[16]*C[6]+E[17]*C[11]+E[18]*C[16],_[17]=E[15]*C[2]+E[16]*C[7]+E[17]*C[12]+E[18]*C[17],_[18]=E[15]*C[3]+E[16]*C[8]+E[17]*C[13]+E[18]*C[18],_[19]=E[15]*C[4]+E[16]*C[9]+E[17]*C[14]+E[18]*C[19]+E[19],_}_colorMatrix(_){const E=new Float32Array(_);return E[4]/=255,E[9]/=255,E[14]/=255,E[19]/=255,E}brightness(_,E){const C=[_,0,0,0,0,0,_,0,0,0,0,0,_,0,0,0,0,0,1,0];this._loadMatrix(C,E)}tint(_,E){const[C,A,R]=Color.shared.setValue(_).toArray(),I=[C,0,0,0,0,0,A,0,0,0,0,0,R,0,0,0,0,0,1,0];this._loadMatrix(I,E)}greyscale(_,E){const C=[_,_,_,0,0,_,_,_,0,0,_,_,_,0,0,0,0,0,1,0];this._loadMatrix(C,E)}blackAndWhite(_){const E=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(E,_)}hue(_,E){_=(_||0)/180*Math.PI;const C=Math.cos(_),A=Math.sin(_),R=Math.sqrt,I=1/3,F=R(I),B=C+(1-C)*I,U=I*(1-C)-F*A,V=I*(1-C)+F*A,D=I*(1-C)+F*A,O=C+I*(1-C),L=I*(1-C)-F*A,z=I*(1-C)-F*A,W=I*(1-C)+F*A,X=C+I*(1-C),Y=[B,U,V,0,0,D,O,L,0,0,z,W,X,0,0,0,0,0,1,0];this._loadMatrix(Y,E)}contrast(_,E){const C=(_||0)+1,A=-.5*(C-1),R=[C,0,0,0,A,0,C,0,0,A,0,0,C,0,A,0,0,0,1,0];this._loadMatrix(R,E)}saturate(_=0,E){const C=_*2/3+1,A=(C-1)*-.5,R=[C,A,A,0,0,A,C,A,0,0,A,A,C,0,0,0,0,0,1,0];this._loadMatrix(R,E)}desaturate(){this.saturate(-1)}negative(_){const E=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(E,_)}sepia(_){const E=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(E,_)}technicolor(_){const E=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(E,_)}polaroid(_){const E=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(E,_)}toBGR(_){const E=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(E,_)}kodachrome(_){const E=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(E,_)}browni(_){const E=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(E,_)}vintage(_){const E=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(E,_)}colorTone(_,E,C,A,R){_=_||.2,E=E||.15,C=C||16770432,A=A||3375104;const I=Color.shared,[F,B,U]=I.setValue(C).toArray(),[V,D,O]=I.setValue(A).toArray(),L=[.3,.59,.11,0,0,F,B,U,_,0,V,D,O,E,0,F-V,B-D,U-O,0,0];this._loadMatrix(L,R)}night(_,E){_=_||.1;const C=[_*-2,-_,0,0,0,-_,0,_,0,0,0,_,_*2,0,0,0,0,0,1,0];this._loadMatrix(C,E)}predator(_,E){const C=[11.224130630493164*_,-4.794486999511719*_,-2.8746118545532227*_,0*_,.40342438220977783*_,-3.6330697536468506*_,9.193157196044922*_,-2.951810836791992*_,0*_,-1.316135048866272*_,-3.2184197902679443*_,-4.2375030517578125*_,7.476448059082031*_,0*_,.8044459223747253*_,0,0,0,1,0];this._loadMatrix(C,E)}lsd(_){const E=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(E,_)}reset(){const _=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(_,!1)}get matrix(){return this.uniforms.m}set matrix(_){this.uniforms.m=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(_,E){const C=new Matrix;_.renderable=!1,super(vertex$3,fragment$4,{mapSampler:_._texture,filterMatrix:C,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=_,this.maskMatrix=C,E==null&&(E=20),this.scale=new Point(E,E)}apply(_,E,C,A){this.uniforms.filterMatrix=_.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const R=this.maskSprite.worldTransform,I=Math.sqrt(R.a*R.a+R.b*R.b),F=Math.sqrt(R.c*R.c+R.d*R.d);I!==0&&F!==0&&(this.uniforms.rotation[0]=R.a/I,this.uniforms.rotation[1]=R.b/I,this.uniforms.rotation[2]=R.c/F,this.uniforms.rotation[3]=R.d/F),_.applyFilter(this,E,C,A)}get map(){return this.uniforms.mapSampler}set map(_){this.uniforms.mapSampler=_}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(_=.5,E=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=_,this.seed=E}get noise(){return this.uniforms.uNoise}set noise(_){this.uniforms.uNoise=_}get seed(){return this.uniforms.uSeed}set seed(_){this.uniforms.uSeed=_}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([T,_])=>{Object.defineProperty(filters,T,{get(){return deprecation("7.1.0",`filters.${T} has moved to ${T}`),_}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(_){this.removeTickerListener(),this.events=_,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(_){this._pauseUpdate=_}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const _=this.events.rootPointerEvent;this.events.supportsTouchEvents&&_.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:_.clientX,clientY:_.clientY}))}tickerUpdate(_){this._deltaTime+=_,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(_){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=_}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(_,E,C){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(_,E,C,A,R){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(_,E,C){return _.worldTransform.applyInverse(C||this.global,E)}getModifierState(_){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(_)}initMouseEvent(_,E,C,A,R,I,F,B,U,V,D,O,L,z,W){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(_){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,E){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:E,priority:0}),this.mappingTable[_].sort((C,A)=>C.priority-A.priority)}dispatchEvent(_,E){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,E),this.dispatch.emit(E||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const E=this.mappingTable[_.type];if(E)for(let C=0,A=E.length;C<A;C++)E[C].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,E){EventsTicker.pauseUpdate=!0;const C=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",A=this[C](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(_,E),this.hitTestFn,this.hitPruneFn);return A&&A[0]}propagate(_,E){if(!_.target)return;const C=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let A=0,R=C.length-1;A<R;A++)if(_.currentTarget=C[A],this.notifyTarget(_,E),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,E),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let A=C.length-2;A>=0;A--)if(_.currentTarget=C[A],this.notifyTarget(_,E),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,E,C=this._allInteractiveElements){if(C.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const A=Array.isArray(E)?E:[E];for(let R=C.length-1;R>=0;R--)A.forEach(I=>{_.currentTarget=C[R],this.notifyTarget(_,I)})}propagationPath(_){const E=[_];for(let C=0;C<PROPAGATION_LIMIT&&_!==this.rootTarget;C++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");E.push(_.parent),_=_.parent}return E.reverse(),E}hitTestMoveRecursive(_,E,C,A,R,I=!1){let F=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||E==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const V=_.children;for(let D=V.length-1;D>=0;D--){const O=V[D],L=this.hitTestMoveRecursive(O,this._isInteractive(E)?E:O.eventMode,C,A,R,I||R(_,C));if(L){if(L.length>0&&!L[L.length-1].parent)continue;const z=_.isInteractive();(L.length>0||z)&&(z&&this._allInteractiveElements.push(_),L.push(_)),this._hitElements.length===0&&(this._hitElements=L),F=!0}}}const B=this._isInteractive(E),U=_.isInteractive();return B&&U&&this._allInteractiveElements.push(_),I||this._hitElements.length>0?null:F?this._hitElements:B&&!R(_,C)&&A(_,C)?U?[_]:[]:null}hitTestRecursive(_,E,C,A,R){if(this._interactivePrune(_)||R(_,C))return null;if((_.eventMode==="dynamic"||E==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const B=_.children;for(let U=B.length-1;U>=0;U--){const V=B[U],D=this.hitTestRecursive(V,this._isInteractive(E)?E:V.eventMode,C,A,R);if(D){if(D.length>0&&!D[D.length-1].parent)continue;const O=_.isInteractive();return(D.length>0||O)&&D.push(_),D}}}const I=this._isInteractive(E),F=_.isInteractive();return I&&A(_,C)?F?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,E){var C;if(_.hitArea&&(_.worldTransform.applyInverse(E,tempLocalMapping),!_.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(_._mask){const A=_._mask.isMaskData?_._mask.maskObject:_._mask;if(A&&!((C=A.containsPoint)!=null&&C.call(A,E)))return!0}return!1}hitTestFn(_,E){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(E):!1}notifyTarget(_,E){var R,I;E=E??_.type;const C=`on${E}`;(I=(R=_.currentTarget)[C])==null||I.call(R,_);const A=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${E}capture`:E;this.notifyListeners(_,A),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,E)}mapPointerDown(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.createPointerEvent(_);if(this.dispatchEvent(E,"pointerdown"),E.pointerType==="touch")this.dispatchEvent(E,"touchstart");else if(E.pointerType==="mouse"||E.pointerType==="pen"){const A=E.button===2;this.dispatchEvent(E,A?"rightdown":"mousedown")}const C=this.trackingData(_.pointerId);C.pressTargetsByButton[_.button]=E.composedPath(),this.freeEvent(E)}mapPointerMove(_){var B,U;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const E=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const C=E.pointerType==="mouse"||E.pointerType==="pen",A=this.trackingData(_.pointerId),R=this.findMountedTarget(A.overTargets);if(((B=A.overTargets)==null?void 0:B.length)>0&&R!==E.target){const V=_.type==="mousemove"?"mouseout":"pointerout",D=this.createPointerEvent(_,V,R);if(this.dispatchEvent(D,"pointerout"),C&&this.dispatchEvent(D,"mouseout"),!E.composedPath().includes(R)){const O=this.createPointerEvent(_,"pointerleave",R);for(O.eventPhase=O.AT_TARGET;O.target&&!E.composedPath().includes(O.target);)O.currentTarget=O.target,this.notifyTarget(O),C&&this.notifyTarget(O,"mouseleave"),O.target=O.target.parent;this.freeEvent(O)}this.freeEvent(D)}if(R!==E.target){const V=_.type==="mousemove"?"mouseover":"pointerover",D=this.clonePointerEvent(E,V);this.dispatchEvent(D,"pointerover"),C&&this.dispatchEvent(D,"mouseover");let O=R==null?void 0:R.parent;for(;O&&O!==this.rootTarget.parent&&O!==E.target;)O=O.parent;if(!O||O===this.rootTarget.parent){const L=this.clonePointerEvent(E,"pointerenter");for(L.eventPhase=L.AT_TARGET;L.target&&L.target!==R&&L.target!==this.rootTarget.parent;)L.currentTarget=L.target,this.notifyTarget(L),C&&this.notifyTarget(L,"mouseenter"),L.target=L.target.parent;this.freeEvent(L)}this.freeEvent(D)}const I=[],F=this.enableGlobalMoveEvents??!0;this.moveOnAll?I.push("pointermove"):this.dispatchEvent(E,"pointermove"),F&&I.push("globalpointermove"),E.pointerType==="touch"&&(this.moveOnAll?I.splice(1,0,"touchmove"):this.dispatchEvent(E,"touchmove"),F&&I.push("globaltouchmove")),C&&(this.moveOnAll?I.splice(1,0,"mousemove"):this.dispatchEvent(E,"mousemove"),F&&I.push("globalmousemove"),this.cursor=(U=E.target)==null?void 0:U.cursor),I.length>0&&this.all(E,I),this._allInteractiveElements.length=0,this._hitElements.length=0,A.overTargets=E.composedPath(),this.freeEvent(E)}mapPointerOver(_){var I;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.trackingData(_.pointerId),C=this.createPointerEvent(_),A=C.pointerType==="mouse"||C.pointerType==="pen";this.dispatchEvent(C,"pointerover"),A&&this.dispatchEvent(C,"mouseover"),C.pointerType==="mouse"&&(this.cursor=(I=C.target)==null?void 0:I.cursor);const R=this.clonePointerEvent(C,"pointerenter");for(R.eventPhase=R.AT_TARGET;R.target&&R.target!==this.rootTarget.parent;)R.currentTarget=R.target,this.notifyTarget(R),A&&this.notifyTarget(R,"mouseenter"),R.target=R.target.parent;E.overTargets=C.composedPath(),this.freeEvent(C),this.freeEvent(R)}mapPointerOut(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.trackingData(_.pointerId);if(E.overTargets){const C=_.pointerType==="mouse"||_.pointerType==="pen",A=this.findMountedTarget(E.overTargets),R=this.createPointerEvent(_,"pointerout",A);this.dispatchEvent(R),C&&this.dispatchEvent(R,"mouseout");const I=this.createPointerEvent(_,"pointerleave",A);for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==this.rootTarget.parent;)I.currentTarget=I.target,this.notifyTarget(I),C&&this.notifyTarget(I,"mouseleave"),I.target=I.target.parent;E.overTargets=null,this.freeEvent(R),this.freeEvent(I)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=performance.now(),C=this.createPointerEvent(_);if(this.dispatchEvent(C,"pointerup"),C.pointerType==="touch")this.dispatchEvent(C,"touchend");else if(C.pointerType==="mouse"||C.pointerType==="pen"){const F=C.button===2;this.dispatchEvent(C,F?"rightup":"mouseup")}const A=this.trackingData(_.pointerId),R=this.findMountedTarget(A.pressTargetsByButton[_.button]);let I=R;if(R&&!C.composedPath().includes(R)){let F=R;for(;F&&!C.composedPath().includes(F);){if(C.currentTarget=F,this.notifyTarget(C,"pointerupoutside"),C.pointerType==="touch")this.notifyTarget(C,"touchendoutside");else if(C.pointerType==="mouse"||C.pointerType==="pen"){const B=C.button===2;this.notifyTarget(C,B?"rightupoutside":"mouseupoutside")}F=F.parent}delete A.pressTargetsByButton[_.button],I=F}if(I){const F=this.clonePointerEvent(C,"click");F.target=I,F.path=null,A.clicksByButton[_.button]||(A.clicksByButton[_.button]={clickCount:0,target:F.target,timeStamp:E});const B=A.clicksByButton[_.button];if(B.target===F.target&&E-B.timeStamp<200?++B.clickCount:B.clickCount=1,B.target=F.target,B.timeStamp=E,F.detail=B.clickCount,F.pointerType==="mouse"){const U=F.button===2;this.dispatchEvent(F,U?"rightclick":"click")}else F.pointerType==="touch"&&this.dispatchEvent(F,"tap");this.dispatchEvent(F,"pointertap"),this.freeEvent(F)}this.freeEvent(C)}mapPointerUpOutside(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.trackingData(_.pointerId),C=this.findMountedTarget(E.pressTargetsByButton[_.button]),A=this.createPointerEvent(_);if(C){let R=C;for(;R;)A.currentTarget=R,this.notifyTarget(A,"pointerupoutside"),A.pointerType==="touch"?this.notifyTarget(A,"touchendoutside"):(A.pointerType==="mouse"||A.pointerType==="pen")&&this.notifyTarget(A,A.button===2?"rightupoutside":"mouseupoutside"),R=R.parent;delete E.pressTargetsByButton[_.button]}this.freeEvent(A)}mapWheel(_){if(!(_ instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const E=this.createWheelEvent(_);this.dispatchEvent(E),this.freeEvent(E)}findMountedTarget(_){if(!_)return null;let E=_[0];for(let C=1;C<_.length&&_[C].parent===E;C++)E=_[C];return E}createPointerEvent(_,E,C){const A=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(_,A),this.copyMouseData(_,A),this.copyData(_,A),A.nativeEvent=_.nativeEvent,A.originalEvent=_,A.target=C??this.hitTest(A.global.x,A.global.y)??this._hitElements[0],typeof E=="string"&&(A.type=E),A}createWheelEvent(_){const E=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(_,E),this.copyMouseData(_,E),this.copyData(_,E),E.nativeEvent=_.nativeEvent,E.originalEvent=_,E.target=this.hitTest(E.global.x,E.global.y),E}clonePointerEvent(_,E){const C=this.allocateEvent(FederatedPointerEvent);return C.nativeEvent=_.nativeEvent,C.originalEvent=_.originalEvent,this.copyPointerData(_,C),this.copyMouseData(_,C),this.copyData(_,C),C.target=_.target,C.path=_.composedPath().slice(),C.type=E??C.type,C}copyWheelData(_,E){E.deltaMode=_.deltaMode,E.deltaX=_.deltaX,E.deltaY=_.deltaY,E.deltaZ=_.deltaZ}copyPointerData(_,E){_ instanceof FederatedPointerEvent&&E instanceof FederatedPointerEvent&&(E.pointerId=_.pointerId,E.width=_.width,E.height=_.height,E.isPrimary=_.isPrimary,E.pointerType=_.pointerType,E.pressure=_.pressure,E.tangentialPressure=_.tangentialPressure,E.tiltX=_.tiltX,E.tiltY=_.tiltY,E.twist=_.twist)}copyMouseData(_,E){_ instanceof FederatedMouseEvent&&E instanceof FederatedMouseEvent&&(E.altKey=_.altKey,E.button=_.button,E.buttons=_.buttons,E.client.copyFrom(_.client),E.ctrlKey=_.ctrlKey,E.metaKey=_.metaKey,E.movement.copyFrom(_.movement),E.screen.copyFrom(_.screen),E.shiftKey=_.shiftKey,E.global.copyFrom(_.global))}copyData(_,E){E.isTrusted=_.isTrusted,E.srcElement=_.srcElement,E.timeStamp=performance.now(),E.type=_.type,E.detail=_.detail,E.view=_.view,E.which=_.which,E.layer.copyFrom(_.layer),E.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const E=this.eventPool.get(_).pop()||new _(this);return E.eventPhase=E.NONE,E.currentTarget=null,E.path=null,E.target=null,E}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const E=_.constructor;this.eventPool.has(E)||this.eventPool.set(E,[]),this.eventPool.get(E).push(_)}notifyListeners(_,E){const C=_.currentTarget._events[E];if(C&&_.currentTarget.isInteractive())if("fn"in C)C.once&&_.currentTarget.removeListener(E,C.fn,void 0,!0),C.fn.call(C.context,_);else for(let A=0,R=C.length;A<R&&!_.propagationImmediatelyStopped;A++)C[A].once&&_.currentTarget.removeListener(E,C[A].fn,void 0,!0),C[A].fn.call(C[A].context,_)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class $l{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...$l.defaultEventFeatures},{set:(E,C,A)=>(C==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=A),E[C]=A,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){const{view:E,resolution:C}=this.renderer;this.setTargetElement(E),this.resolution=C,$l._defaultEventMode=_.eventMode??"auto",Object.assign(this.features,_.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let E=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(E=!1),this.currentCursor===_)return;this.currentCursor=_;const C=this.cursorStyles[_];if(C)switch(typeof C){case"string":E&&(this.domElement.style.cursor=C);break;case"function":C(_);break;case"object":E&&Object.assign(this.domElement.style,C);break}else E&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const E=this.normalizeToPointerData(_);this.autoPreventDefault&&E[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let C=0,A=E.length;C<A;C++){const R=E[C],I=this.bootstrapEvent(this.rootPointerEvent,R);this.rootBoundary.mapEvent(I)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const E=this.normalizeToPointerData(_);for(let C=0,A=E.length;C<A;C++){const R=this.bootstrapEvent(this.rootPointerEvent,E[C]);this.rootBoundary.mapEvent(R)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let E=_.target;_.composedPath&&_.composedPath().length>0&&(E=_.composedPath()[0]);const C=E!==this.domElement?"outside":"",A=this.normalizeToPointerData(_);for(let R=0,I=A.length;R<I;R++){const F=this.bootstrapEvent(this.rootPointerEvent,A[R]);F.type+=C,this.rootBoundary.mapEvent(F)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const E=this.normalizeToPointerData(_);for(let C=0,A=E.length;C<A;C++){const R=this.bootstrapEvent(this.rootPointerEvent,E[C]);this.rootBoundary.mapEvent(R)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const E=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(E)}setTargetElement(_){this.removeEvents(),this.domElement=_,EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,E,C){const A=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},R=1/this.resolution;_.x=(E-A.left)*(this.domElement.width/A.width)*R,_.y=(C-A.top)*(this.domElement.height/A.height)*R}normalizeToPointerData(_){const E=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let C=0,A=_.changedTouches.length;C<A;C++){const R=_.changedTouches[C];typeof R.button>"u"&&(R.button=0),typeof R.buttons>"u"&&(R.buttons=1),typeof R.isPrimary>"u"&&(R.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof R.width>"u"&&(R.width=R.radiusX||1),typeof R.height>"u"&&(R.height=R.radiusY||1),typeof R.tiltX>"u"&&(R.tiltX=0),typeof R.tiltY>"u"&&(R.tiltY=0),typeof R.pointerType>"u"&&(R.pointerType="touch"),typeof R.pointerId>"u"&&(R.pointerId=R.identifier||0),typeof R.pressure>"u"&&(R.pressure=R.force||.5),typeof R.twist>"u"&&(R.twist=0),typeof R.tangentialPressure>"u"&&(R.tangentialPressure=0),typeof R.layerX>"u"&&(R.layerX=R.offsetX=R.clientX),typeof R.layerY>"u"&&(R.layerY=R.offsetY=R.clientY),R.isNormalized=!0,R.type=_.type,E.push(R)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const C=_;typeof C.isPrimary>"u"&&(C.isPrimary=!0),typeof C.width>"u"&&(C.width=1),typeof C.height>"u"&&(C.height=1),typeof C.tiltX>"u"&&(C.tiltX=0),typeof C.tiltY>"u"&&(C.tiltY=0),typeof C.pointerType>"u"&&(C.pointerType="mouse"),typeof C.pointerId>"u"&&(C.pointerId=MOUSE_POINTER_ID),typeof C.pressure>"u"&&(C.pressure=.5),typeof C.twist>"u"&&(C.twist=0),typeof C.tangentialPressure>"u"&&(C.tangentialPressure=0),C.isNormalized=!0,E.push(C)}else E.push(_);return E}normalizeWheelEvent(_){const E=this.rootWheelEvent;return this.transferMouseData(E,_),E.deltaX=_.deltaX,E.deltaY=_.deltaY,E.deltaZ=_.deltaZ,E.deltaMode=_.deltaMode,this.mapPositionToPoint(E.screen,_.clientX,_.clientY),E.global.copyFrom(E.screen),E.offset.copyFrom(E.screen),E.nativeEvent=_,E.type=_.type,E}bootstrapEvent(_,E){return _.originalEvent=null,_.nativeEvent=E,_.pointerId=E.pointerId,_.width=E.width,_.height=E.height,_.isPrimary=E.isPrimary,_.pointerType=E.pointerType,_.pressure=E.pressure,_.tangentialPressure=E.tangentialPressure,_.tiltX=E.tiltX,_.tiltY=E.tiltY,_.twist=E.twist,this.transferMouseData(_,E),this.mapPositionToPoint(_.screen,E.clientX,E.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=E.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=TOUCH_TO_POINTER[_.type]||_.type),_}transferMouseData(_,E){_.isTrusted=E.isTrusted,_.srcElement=E.srcElement,_.timeStamp=performance.now(),_.type=E.type,_.altKey=E.altKey,_.button=E.button,_.buttons=E.buttons,_.client.x=E.clientX,_.client.y=E.clientY,_.ctrlKey=E.ctrlKey,_.metaKey=E.metaKey,_.movement.x=E.movementX,_.movement.y=E.movementY,_.page.x=E.pageX,_.page.y=E.pageY,_.relatedTarget=null,_.shiftKey=E.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(T){return T==="dynamic"||T==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(T){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=T,this.eventMode=T?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(T){this._internalInteractive=convertEventModeToInteractiveMode(T),this._internalEventMode=T},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(T,_,E){const C=typeof E=="boolean"&&E||typeof E=="object"&&E.capture,A=typeof E=="object"?E.signal:void 0,R=typeof E=="object"?E.once===!0:!1,I=typeof _=="function"?void 0:_;T=C?`${T}capture`:T;const F=typeof _=="function"?_:_.handleEvent,B=this;A&&A.addEventListener("abort",()=>{B.off(T,F,I)}),R?B.once(T,F,I):B.on(T,F,I)},removeEventListener(T,_,E){const C=typeof E=="boolean"&&E||typeof E=="object"&&E.capture,A=typeof _=="function"?void 0:_;T=C?`${T}capture`:T,_=typeof _=="function"?_:_.handleEvent,this.off(T,_,A)},dispatchEvent(T){if(!(T instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return T.defaultPrevented=!1,T.path=null,T.target=this,T.manager.dispatchEvent(T),!T.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(_){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const E=document.createElement("div");E.style.width=`${DIV_TOUCH_SIZE}px`,E.style.height=`${DIV_TOUCH_SIZE}px`,E.style.position="absolute",E.style.top=`${DIV_TOUCH_POS_X}px`,E.style.left=`${DIV_TOUCH_POS_Y}px`,E.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=E,this.renderer=_,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const _=document.createElement("button");_.style.width=`${DIV_HOOK_SIZE}px`,_.style.height=`${DIV_HOOK_SIZE}px`,_.style.position="absolute",_.style.top=`${DIV_HOOK_POS_X}px`,_.style.left=`${DIV_HOOK_POS_Y}px`,_.style.zIndex=DIV_HOOK_ZINDEX.toString(),_.style.backgroundColor="#FF0000",_.title="select to enable accessibility for this content",_.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(_),this._hookDiv=_}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var _;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_=this.renderer.view.parentNode)==null||_.appendChild(this.div))}deactivate(){var _;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_=this.div.parentNode)==null||_.removeChild(this.div))}updateAccessibleObjects(_){if(!_.visible||!_.accessibleChildren)return;_.accessible&&_.isInteractive()&&(_._accessibleActive||this.addChild(_),_.renderId=this.renderId);const E=_.children;if(E)for(let C=0;C<E.length;C++)this.updateAccessibleObjects(E[C])}update(){const _=performance.now();if(isMobile.android.device&&_<this.androidUpdateCount||(this.androidUpdateCount=_+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:E,y:C,width:A,height:R}=this.renderer.view.getBoundingClientRect(),{width:I,height:F,resolution:B}=this.renderer,U=A/I*B,V=R/F*B;let D=this.div;D.style.left=`${E}px`,D.style.top=`${C}px`,D.style.width=`${I}px`,D.style.height=`${F}px`;for(let O=0;O<this.children.length;O++){const L=this.children[O];if(L.renderId!==this.renderId)L._accessibleActive=!1,removeItems(this.children,O,1),this.div.removeChild(L._accessibleDiv),this.pool.push(L._accessibleDiv),L._accessibleDiv=null,O--;else{D=L._accessibleDiv;let z=L.hitArea;const W=L.worldTransform;L.hitArea?(D.style.left=`${(W.tx+z.x*W.a)*U}px`,D.style.top=`${(W.ty+z.y*W.d)*V}px`,D.style.width=`${z.width*W.a*U}px`,D.style.height=`${z.height*W.d*V}px`):(z=L.getBounds(),this.capHitArea(z),D.style.left=`${z.x*U}px`,D.style.top=`${z.y*V}px`,D.style.width=`${z.width*U}px`,D.style.height=`${z.height*V}px`,D.title!==L.accessibleTitle&&L.accessibleTitle!==null&&(D.title=L.accessibleTitle),D.getAttribute("aria-label")!==L.accessibleHint&&L.accessibleHint!==null&&D.setAttribute("aria-label",L.accessibleHint)),(L.accessibleTitle!==D.title||L.tabIndex!==D.tabIndex)&&(D.title=L.accessibleTitle,D.tabIndex=L.tabIndex,this.debug&&this.updateDebugHTML(D))}}this.renderId++}updateDebugHTML(_){_.innerHTML=`type: ${_.type}</br> title : ${_.title}</br> tabIndex: ${_.tabIndex}`}capHitArea(_){_.x<0&&(_.width+=_.x,_.x=0),_.y<0&&(_.height+=_.y,_.y=0);const{width:E,height:C}=this.renderer;_.x+_.width>E&&(_.width=E-_.x),_.y+_.height>C&&(_.height=C-_.y)}addChild(_){let E=this.pool.pop();E||(E=document.createElement("button"),E.style.width=`${DIV_TOUCH_SIZE}px`,E.style.height=`${DIV_TOUCH_SIZE}px`,E.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",E.style.position="absolute",E.style.zIndex=DIV_TOUCH_ZINDEX.toString(),E.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?E.setAttribute("aria-live","off"):E.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?E.setAttribute("aria-relevant","additions"):E.setAttribute("aria-relevant","text"),E.addEventListener("click",this._onClick.bind(this)),E.addEventListener("focus",this._onFocus.bind(this)),E.addEventListener("focusout",this._onFocusOut.bind(this))),E.style.pointerEvents=_.accessiblePointerEvents,E.type=_.accessibleType,_.accessibleTitle&&_.accessibleTitle!==null?E.title=_.accessibleTitle:(!_.accessibleHint||_.accessibleHint===null)&&(E.title=`displayObject ${_.tabIndex}`),_.accessibleHint&&_.accessibleHint!==null&&E.setAttribute("aria-label",_.accessibleHint),this.debug&&this.updateDebugHTML(E),_._accessibleActive=!0,_._accessibleDiv=E,E.displayObject=_,this.children.push(_),this.div.appendChild(_._accessibleDiv),_._accessibleDiv.tabIndex=_.tabIndex}_dispatchEvent(_,E){const{displayObject:C}=_.target,A=this.renderer.events.rootBoundary,R=Object.assign(new FederatedEvent(A),{target:C});A.rootTarget=this.renderer.lastObjectRendered,E.forEach(I=>A.dispatchEvent(R,I))}_onClick(_){this._dispatchEvent(_,["click","pointertap","tap"])}_onFocus(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","assertive"),this._dispatchEvent(_,["mouseover"])}_onFocusOut(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","polite"),this._dispatchEvent(_,["mouseout"])}_onKeyDown(_){_.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(_){_.movementX===0&&_.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class Nl{constructor(_){this.stage=new Container,_=Object.assign({forceCanvas:!1},_),this.renderer=autoDetectRenderer(_),Nl._plugins.forEach(E=>{E.init.call(this,_)})}render(){this.renderer.render(this.stage)}get view(){var _;return(_=this.renderer)==null?void 0:_.view}get screen(){var _;return(_=this.renderer)==null?void 0:_.screen}destroy(_,E){const C=Nl._plugins.slice(0);C.reverse(),C.forEach(A=>{A.destroy.call(this)}),this.stage.destroy(E),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(_){Object.defineProperty(this,"resizeTo",{set(E){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=E,E&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let E,C;if(this._resizeTo===globalThis.window)E=globalThis.innerWidth,C=globalThis.innerHeight;else{const{clientWidth:A,clientHeight:R}=this._resizeTo;E=A,C=R}this.renderer.resize(E,C),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=_.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,T=>{const _=T.ref;Object.entries(assetKeyMap).filter(([E])=>!!_[E]).forEach(([E,C])=>extensions$1.add(Object.assign(_[E],{extension:_[E].extension??C})))},T=>{const _=T.ref;Object.keys(assetKeyMap).filter(E=>!!_[E]).forEach(E=>extensions$1.remove(_[E]))});class BackgroundLoader{constructor(_,E=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=E}add(_){_.forEach(E=>{this._assetList.push(E)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],E=Math.min(this._assetList.length,this._maxConcurrent);for(let C=0;C<E;C++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(T,_){if(Array.isArray(_)){for(const E of _)if(T.startsWith(`data:${E}`))return!0;return!1}return T.startsWith(`data:${_}`)}function checkExtension(T,_){const E=T.split("?")[0],C=path.extname(E).toLowerCase();return Array.isArray(_)?_.includes(C):C===_}const convertToList=(T,_,E=!1)=>(Array.isArray(T)||(T=[T]),_?T.map(C=>typeof C=="string"||E?_(C):C):T),copySearchParams=(T,_)=>{const E=_.split("?")[1];return E&&(T+=`?${E}`),T};function processX(T,_,E,C,A){const R=_[E];for(let I=0;I<R.length;I++){const F=R[I];E<_.length-1?processX(T.replace(C[E],F),_,E+1,C,A):A.push(T.replace(C[E],F))}}function createStringVariations(T){const _=/\{(.*?)\}/g,E=T.match(_),C=[];if(E){const A=[];E.forEach(R=>{const I=R.substring(1,R.length-1).split(",");A.push(I)}),processX(T,A,0,E,C)}else C.push(T);return C}const isSingleItem=T=>!Array.isArray(T);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const E=this._cache.get(_);return E||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),E}set(_,E){const C=convertToList(_);let A;for(let F=0;F<this.parsers.length;F++){const B=this.parsers[F];if(B.test(E)){A=B.getCacheableAssets(C,E);break}}A||(A={},C.forEach(F=>{A[F]=E}));const R=Object.keys(A),I={cacheKeys:R,keys:C};if(C.forEach(F=>{this._cacheMap.set(F,I)}),R.forEach(F=>{this._cache.has(F)&&this._cache.get(F)!==E&&console.warn("[Cache] already has key:",F),this._cache.set(F,A[F])}),E instanceof Texture){const F=E;C.forEach(B=>{F.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(F.baseTexture,B),Texture.addToCache(F,B)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const E=this._cacheMap.get(_);E.cacheKeys.forEach(C=>{this._cache.delete(C)}),E.keys.forEach(C=>{this._cacheMap.delete(C)})}get parsers(){return this._parsers}}const Cache=new CacheClass;let Loader$1=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,E,C)=>(this._parsersValidated=!1,_[E]=C,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,E){const C={promise:null,parser:null};return C.promise=(async()=>{var I,F;let A=null,R=null;if(E.loadParser&&(R=this._parserHash[E.loadParser],R||console.warn(`[Assets] specified load parser "${E.loadParser}" not found while loading ${_}`)),!R){for(let B=0;B<this.parsers.length;B++){const U=this.parsers[B];if(U.load&&((I=U.test)!=null&&I.call(U,_,E,this))){R=U;break}}if(!R)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}A=await R.load(_,E,this),C.parser=R;for(let B=0;B<this.parsers.length;B++){const U=this.parsers[B];U.parse&&U.parse&&await((F=U.testParse)==null?void 0:F.call(U,A,E,this))&&(A=await U.parse(A,E,this)||A,C.parser=U)}return A})(),C}async load(_,E){this._parsersValidated||this._validateParsers();let C=0;const A={},R=isSingleItem(_),I=convertToList(_,U=>({alias:[U],src:U})),F=I.length,B=I.map(async U=>{const V=path.toAbsolute(U.src);if(!A[U.src])try{this.promiseCache[V]||(this.promiseCache[V]=this._getLoadPromiseAndParser(V,U)),A[U.src]=await this.promiseCache[V].promise,E&&E(++C/F)}catch(D){throw delete this.promiseCache[V],delete A[U.src],new Error(`[Loader.load] Failed to load ${V}.
${D}`)}});return await Promise.all(B),R?A[I[0].src]:A}async unload(_){const E=convertToList(_,C=>({alias:[C],src:C})).map(async C=>{var I,F;const A=path.toAbsolute(C.src),R=this.promiseCache[A];if(R){const B=await R.promise;delete this.promiseCache[A],(F=(I=R.parser)==null?void 0:I.unload)==null||F.call(I,B,C,this)}});await Promise.all(E)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,E)=>(_[E.name]&&console.warn(`[Assets] loadParser name conflict "${E.name}"`),{..._,[E.name]:E}),{})}};var LoaderParserPriority=(T=>(T[T.Low=0]="Low",T[T.Normal=1]="Normal",T[T.High=2]="High",T))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(T){return checkDataUrl(T,validJSONMIME)||checkExtension(T,validJSONExtension)},async load(T){return await(await settings.ADAPTER.fetch(T)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(T){return checkDataUrl(T,validTXTMIME)||checkExtension(T,validTXTExtension)},async load(T){return await(await settings.ADAPTER.fetch(T)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(T){const _=path.extname(T),E=path.basename(T,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1));let C=E.length>0;for(const R of E)if(!R.match(CSS_IDENT_TOKEN_REGEX)){C=!1;break}let A=E.join(" ");return C||(A=`"${A.replace(/[\\"]/g,"\\$&")}"`),A}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(T){return validURICharactersRegex.test(T)?T:encodeURI(T)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(T){return checkDataUrl(T,validFontMIMEs)||checkExtension(T,validFontExtensions)},async load(T,_){var C,A,R;const E=settings.ADAPTER.getFontFaceSet();if(E){const I=[],F=((C=_.data)==null?void 0:C.family)??getFontFamilyName(T),B=((R=(A=_.data)==null?void 0:A.weights)==null?void 0:R.filter(V=>validWeights.includes(V)))??["normal"],U=_.data??{};for(let V=0;V<B.length;V++){const D=B[V],O=new FontFace(F,`url(${encodeURIWhenNeeded(T)})`,{...U,weight:D});await O.load(),E.add(O),I.push(O)}return I.length===1?I[0]:I}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(T){(Array.isArray(T)?T:[T]).forEach(_=>settings.ADAPTER.getFontFaceSet().delete(_))}};extensions$1.add(loadWebFont);const WORKER_CODE$1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const WORKER_CODE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const{worker:E}=new WorkerInstance$1;E.addEventListener("message",C=>{E.terminate(),WorkerInstance$1.revokeObjectURL(),_(C.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,_=new WorkerInstance().worker,_.addEventListener("message",E=>{this.complete(E.data),this.returnWorker(E.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,E){await this._initWorkers();const C=new Promise((A,R)=>{this.queue.push({id:_,arguments:E,resolve:A,reject:R})});return this.next(),C}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const E=this.queue.pop(),C=E.id;this.resolveHash[UUID]={resolve:E.resolve,reject:E.reject},_.postMessage({data:E.arguments,uuid:UUID++,id:C})}}const WorkerManager=new WorkerManagerClass;function createTexture$1(T,_,E){T.resource.internal=!0;const C=new Texture(T),A=()=>{delete _.promiseCache[E],Cache.has(E)&&Cache.remove(E)};return C.baseTexture.once("destroyed",()=>{E in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),A())}),C.once("destroyed",()=>{T.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),A())}),C}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(T){const _=await settings.ADAPTER.fetch(T);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${T}: ${_.status} ${_.statusText}`);const E=await _.blob();return await createImageBitmap(E)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(T){return checkDataUrl(T,validImageMIMEs)||checkExtension(T,validImageExtensions)},async load(T,_,E){var F;const C=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let A;C?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?A=await WorkerManager.loadImageBitmap(T):A=await loadImageBitmap(T):A=await new Promise((B,U)=>{const V=new Image;V.crossOrigin=this.config.crossOrigin,V.src=T,V.complete?B(V):(V.onload=()=>B(V),V.onerror=D=>U(D))});const R={..._.data};R.resolution??(R.resolution=getResolutionOfUrl(T)),C&&((F=R.resourceOptions)==null?void 0:F.ownsImageBitmap)===void 0&&(R.resourceOptions={...R.resourceOptions},R.resourceOptions.ownsImageBitmap=!0);const I=new BaseTexture(A,R);return I.resource.src=T,createTexture$1(I,E,T)},unload(T){T.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(T){return checkDataUrl(T,validSVGMIME)||checkExtension(T,validSVGExtension)},async testParse(T){return SVGResource.test(T)},async parse(T,_,E){var R;const C=new SVGResource(T,(R=_==null?void 0:_.data)==null?void 0:R.resourceOptions);await C.load();const A=new BaseTexture(C,{resolution:getResolutionOfUrl(T),..._==null?void 0:_.data});return A.resource.src=_.src,createTexture$1(A,E,_.src)},async load(T,_){return(await settings.ADAPTER.fetch(T)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(T){return checkDataUrl(T,validVideoMIMEs)||checkExtension(T,validVideoExtensions)},async load(T,_,E){var I;let C;const A=await(await settings.ADAPTER.fetch(T)).blob(),R=URL.createObjectURL(A);try{const F={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(I=_==null?void 0:_.data)==null?void 0:I.resourceOptions,autoLoad:!0},B=new VideoResource(R,F);await B.load();const U=new BaseTexture(B,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(T),..._==null?void 0:_.data});U.resource.src=T,C=createTexture$1(U,E,T),C.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(R)})}catch(F){throw URL.revokeObjectURL(R),F}return C},unload(T){T.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,E)=>`${_}${this._bundleIdConnector}${E}`,extractAssetIdFromBundle:(_,E)=>E.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(E=>{this._preferredOrder.push(E),E.priority||(E.priority=Object.keys(E.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const E=_;this._defaultSearchParams=Object.keys(E).map(C=>`${encodeURIComponent(C)}=${encodeURIComponent(E[C])}`).join("&")}}getAlias(_){const{alias:E,name:C,src:A,srcs:R}=_;return convertToList(E||C||A||R,I=>typeof I=="string"?I:Array.isArray(I)?I.map(F=>(F==null?void 0:F.src)??(F==null?void 0:F.srcs)??F):I!=null&&I.src||I!=null&&I.srcs?I.src??I.srcs:I,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(E=>{this.addBundle(E.name,E.assets)})}addBundle(_,E){const C=[];Array.isArray(E)?E.forEach(A=>{const R=A.src??A.srcs,I=A.alias??A.name;let F;if(typeof I=="string"){const B=this._createBundleAssetId(_,I);C.push(B),F=[I,B]}else{const B=I.map(U=>this._createBundleAssetId(_,U));C.push(...B),F=[...I,...B]}this.add({...A,alias:F,src:R})}):Object.keys(E).forEach(A=>{const R=[A,this._createBundleAssetId(_,A)];if(typeof E[A]=="string")this.add({alias:R,src:E[A]});else if(Array.isArray(E[A]))this.add({alias:R,src:E[A]});else{const I=E[A],F=I.src??I.srcs;this.add({...I,alias:R,src:Array.isArray(F)?F:[F]})}C.push(...R)}),this._bundles[_]=C}add(_,E,C,A,R){const I=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),I.push({alias:_,src:E,data:C,format:A,loadParser:R})):Array.isArray(_)?I.push(..._):I.push(_);let F;F=B=>{this.hasKey(B)&&console.warn(`[Resolver] already has key: ${B} overwriting`)},convertToList(I).forEach(B=>{const{src:U,srcs:V}=B;let{data:D,format:O,loadParser:L}=B;const z=convertToList(U||V).map(Y=>typeof Y=="string"?createStringVariations(Y):Array.isArray(Y)?Y:[Y]),W=this.getAlias(B);Array.isArray(W)?W.forEach(F):F(W);const X=[];z.forEach(Y=>{Y.forEach(K=>{let Q={};if(typeof K!="object"){Q.src=K;for(let ee=0;ee<this._parsers.length;ee++){const J=this._parsers[ee];if(J.test(K)){Q=J.parse(K);break}}}else D=K.data??D,O=K.format??O,L=K.loadParser??L,Q={...Q,...K};if(!W)throw new Error(`[Resolver] alias is undefined for this asset: ${Q.src}`);Q=this.buildResolvedAsset(Q,{aliases:W,data:D,format:O,loadParser:L}),X.push(Q)})}),W.forEach(Y=>{this._assetMap[Y]=X})})}resolveBundle(_){const E=isSingleItem(_);_=convertToList(_);const C={};return _.forEach(A=>{const R=this._bundles[A];if(R){const I=this.resolve(R),F={};for(const B in I){const U=I[B];F[this._extractAssetIdFromBundle(A,B)]=U}C[A]=F}}),E?C[_[0]]:C}resolveUrl(_){const E=this.resolve(_);if(typeof _!="string"){const C={};for(const A in E)C[A]=E[A].src;return C}return E.src}resolve(_){const E=isSingleItem(_);_=convertToList(_);const C={};return _.forEach(A=>{if(!this._resolverHash[A])if(this._assetMap[A]){let R=this._assetMap[A];const I=R[0],F=this._getPreferredOrder(R);F==null||F.priority.forEach(B=>{F.params[B].forEach(U=>{const V=R.filter(D=>D[B]?D[B]===U:!1);V.length&&(R=V)})}),this._resolverHash[A]=R[0]??I}else this._resolverHash[A]=this.buildResolvedAsset({alias:[A],src:A},{});C[A]=this._resolverHash[A]}),E?C[_[0]]:C}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let E=0;E<_.length;E++){const C=_[0],A=this._preferredOrder.find(R=>R.params.format.includes(C.format));if(A)return A}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const E=/\?/.test(_)?"&":"?";return`${_}${E}${this._defaultSearchParams}`}buildResolvedAsset(_,E){const{aliases:C,data:A,loadParser:R,format:I}=E;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=C??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...A||{},..._.data},_.loadParser=R??_.loadParser,_.format=I??_.format??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader$1,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var R,I;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let F=_.manifest;typeof F=="string"&&(F=await this.load(F)),this.resolver.addManifest(F)}const E=((R=_.texturePreference)==null?void 0:R.resolution)??1,C=typeof E=="number"?[E]:E,A=await this._detectFormats({preferredFormats:(I=_.texturePreference)==null?void 0:I.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:A,resolution:C}}),_.preferences&&this.setPreferences(_.preferences)}add(_,E,C,A,R){this.resolver.add(_,E,C,A,R)}async load(_,E){this._initialized||await this.init();const C=isSingleItem(_),A=convertToList(_).map(F=>{if(typeof F!="string"){const B=this.resolver.getAlias(F);return B.some(U=>!this.resolver.hasKey(U))&&this.add(F),Array.isArray(B)?B[0]:B}return this.resolver.hasKey(F)||this.add({alias:F,src:F}),F}),R=this.resolver.resolve(A),I=await this._mapLoadToResolve(R,E);return C?I[A[0]]:I}addBundle(_,E){this.resolver.addBundle(_,E)}async loadBundle(_,E){this._initialized||await this.init();let C=!1;typeof _=="string"&&(C=!0,_=[_]);const A=this.resolver.resolveBundle(_),R={},I=Object.keys(A);let F=0,B=0;const U=()=>{E==null||E(++F/B)},V=I.map(D=>{const O=A[D];return B+=Object.keys(O).length,this._mapLoadToResolve(O,U).then(L=>{R[D]=L})});return await Promise.all(V),C?R[_[0]]:R}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const E=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(E))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const E=this.resolver.resolveBundle(_);Object.values(E).forEach(C=>{this._backgroundLoader.add(Object.values(C))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache.get(_);const E={};for(let C=0;C<_.length;C++)E[C]=Cache.get(_[C]);return E}async _mapLoadToResolve(_,E){const C=Object.values(_),A=Object.keys(_);this._backgroundLoader.active=!1;const R=await this.loader.load(C,E);this._backgroundLoader.active=!0;const I={};return C.forEach((F,B)=>{const U=R[F.src],V=[F.src];F.alias&&V.push(...F.alias),I[A[B]]=U,Cache.set(V,U)}),I}async unload(_){this._initialized||await this.init();const E=convertToList(_).map(A=>typeof A!="string"?A.src:A),C=this.resolver.resolve(E);await this._unloadFromResolved(C)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const E=this.resolver.resolveBundle(_),C=Object.keys(E).map(A=>this._unloadFromResolved(E[A]));await Promise.all(C)}async _unloadFromResolved(_){const E=Object.values(_);E.forEach(C=>{Cache.remove(C.src)}),await this.loader.unload(E)}async _detectFormats(_){let E=[];_.preferredFormats&&(E=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const C of _.detections)_.skipDetections||await C.test()?E=await C.add(E):_.skipDetections||(E=await C.remove(E));return E=E.filter((C,A)=>E.indexOf(C)===A),E}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(E=>{E.config&&Object.keys(E.config).filter(C=>C in _).forEach(C=>{E.config[C]=_[C]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:T=>Array.isArray(T)&&T.every(_=>_ instanceof Texture),getCacheableAssets:(T,_)=>{const E={};return T.forEach(C=>{_.forEach((A,R)=>{E[C+(R===0?"":R+1)]=A})}),E}};extensions$1.add(cacheTextureArray);async function testImageFormat(T){if("Image"in globalThis)return new Promise(_=>{const E=new Image;E.onload=()=>{_(!0)},E.onerror=()=>{_(!1)},E.src=T});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(T)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async T=>[...T,"avif"],remove:async T=>T.filter(_=>_!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async T=>[...T,"webp"],remove:async T=>T.filter(_=>_!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async T=>[...T,...imageFormats],remove:async T=>T.filter(_=>!imageFormats.includes(_))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(T){return inWorker?!1:document.createElement("video").canPlayType(T)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async T=>[...T,"webm"],remove:async T=>T.filter(_=>_!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async T=>[...T,"mp4","m4v"],remove:async T=>T.filter(_=>_!=="mp4"&&_!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async T=>[...T,"ogv"],remove:async T=>T.filter(_=>_!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:T=>{var _;return{resolution:parseFloat(((_=settings.RETINA_PREFIX.exec(T))==null?void 0:_[1])??"1"),format:path.extname(T).slice(1),src:T}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(T=>(T[T.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",T[T.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",T[T.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",T[T.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",T[T.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",T[T.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",T[T.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",T[T.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",T[T.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",T[T.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",T[T.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",T[T.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",T[T.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",T[T.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",T[T.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",T[T.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",T[T.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",T[T.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",T[T.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",T[T.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",T[T.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",T[T.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",T[T.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",T[T.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",T[T.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",T[T.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",T[T.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",T[T.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",T[T.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",T[T.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",T[T.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",T))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={bptc:storedGl.getExtension("EXT_texture_compression_bptc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const T=settings.ADAPTER.createCanvas().getContext("webgl");return T?(storedGl=T,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async T=>{extensions||getCompressedTextureExtensions();const _=[];for(const E in extensions)extensions[E]&&_.push(E);return[..._,...T]},remove:async T=>(extensions||getCompressedTextureExtensions(),T.filter(_=>!(_ in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(_,E={width:1,height:1,autoLoad:!0}){let C,A;typeof _=="string"?(C=_,A=new Uint8Array):(C=null,A=_),super(A,E),this.origin=C,this.buffer=A?new ViewableBuffer(A):null,this._load=null,this.loaded=!1,this.origin!==null&&E.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(_){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(_=>_.blob()).then(_=>_.arrayBuffer()).then(_=>(this.data=new Uint32Array(_),this.buffer=new ViewableBuffer(_),this.loaded=!0,this.onBlobLoaded(_),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(_,E){super(_,E),this.format=E.format,this.levels=E.levels||1,this._width=E.width,this._height=E.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(E.levelBuffers||this.buffer)&&(this._levelBuffers=E.levelBuffers||CompressedTextureResource._createLevelBuffers(_ instanceof Uint8Array?_:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(_,E,C){const A=_.gl;if(!_.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;A.pixelStorei(A.UNPACK_ALIGNMENT,4);for(let R=0,I=this.levels;R<I;R++){const{levelID:F,levelWidth:B,levelHeight:U,levelBuffer:V}=this._levelBuffers[R];A.compressedTexImage2D(A.TEXTURE_2D,F,this.format,B,U,0,V)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(_){if(_>=33776&&_<=33779)return"s3tc";if(_>=35916&&_<=35919)return"s3tc_sRGB";if(_>=37488&&_<=37497)return"etc";if(_>=35840&&_<=35843)return"pvrtc";if(_===36196)return"etc1";if(_===35986||_===35987||_===34798)return"atc";if(_>=36492&&_<=36495)return"bptc";if(_===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${_}`)}static _createLevelBuffers(_,E,C,A,R,I,F){const B=new Array(C);let U=_.byteOffset,V=I,D=F,O=V+A-1&~(A-1),L=D+R-1&~(R-1),z=O*L*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[E];for(let W=0;W<C;W++)B[W]={levelID:W,levelWidth:C>1?V:O,levelHeight:C>1?D:L,levelBuffer:new Uint8Array(_.buffer,U,z)},U+=z,V=V>>1||1,D=D>>1||1,O=V+A-1&~(A-1),L=D+R-1&~(R-1),z=O*L*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[E];return B}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={FOURCC:2},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:INTERNAL_FORMATS.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function parseDDS(T){const _=new Uint32Array(T);if(_[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const E=new Uint32Array(T,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),C=E[DDS_FIELDS.HEIGHT],A=E[DDS_FIELDS.WIDTH],R=E[DDS_FIELDS.MIPMAP_COUNT],I=new Uint32Array(T,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),F=I[PF_FLAGS];if(F&DDPF_FOURCC){const B=I[DDS_PF_FIELDS.FOURCC];if(B!==FOURCC_DX10){const K=FOURCC_TO_FORMAT[B],Q=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,ee=new Uint8Array(T,Q);return[new CompressedTextureResource(ee,{format:K,width:A,height:C,levels:R})]}const U=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,V=new Uint32Array(_.buffer,U,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),D=V[DDS_DX10_FIELDS.DXGI_FORMAT],O=V[DDS_DX10_FIELDS.RESOURCE_DIMENSION],L=V[DDS_DX10_FIELDS.MISC_FLAG],z=V[DDS_DX10_FIELDS.ARRAY_SIZE],W=DXGI_TO_FORMAT[D];if(W===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${D}`);if(L===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(O===6)throw new Error("DDSParser does not supported 3D texture data");const X=new Array,Y=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(z===1)X.push(new Uint8Array(T,Y));else{const K=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[W];let Q=0,ee=A,J=C;for(let re=0;re<R;re++){const se=Math.max(1,ee+3&-4),ne=Math.max(1,J+3&-4),oe=se*ne*K;Q+=oe,ee=ee>>>1,J=J>>>1}let ie=Y;for(let re=0;re<z;re++)X.push(new Uint8Array(T,ie,Q)),ie+=Q}return X.map(K=>new CompressedTextureResource(K,{format:W,width:A,height:C,levels:R}))}throw F&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):F&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):F&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):F&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(T,_,E=!1){const C=new DataView(_);if(!validate(T,C))return null;const A=C.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,R=C.getUint32(KTX_FIELDS.GL_TYPE,A),I=C.getUint32(KTX_FIELDS.GL_FORMAT,A),F=C.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,A),B=C.getUint32(KTX_FIELDS.PIXEL_WIDTH,A),U=C.getUint32(KTX_FIELDS.PIXEL_HEIGHT,A)||1,V=C.getUint32(KTX_FIELDS.PIXEL_DEPTH,A)||1,D=C.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,A)||1,O=C.getUint32(KTX_FIELDS.NUMBER_OF_FACES,A),L=C.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,A),z=C.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,A);if(U===0||V!==1)throw new Error("Only 2D textures are supported");if(O!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(D!==1)throw new Error("WebGL does not support array textures");const W=4,X=4,Y=B+3&-4,K=U+3&-4,Q=new Array(D);let ee=B*U;R===0&&(ee=Y*K);let J;if(R!==0?TYPES_TO_BYTES_PER_COMPONENT[R]?J=TYPES_TO_BYTES_PER_COMPONENT[R]*FORMATS_TO_COMPONENTS[I]:J=TYPES_TO_BYTES_PER_PIXEL[R]:J=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[F],J===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const ie=E?parseKvData(C,z,A):null;let re=ee*J,se=B,ne=U,oe=Y,fe=K,he=FILE_HEADER_SIZE+z;for(let ge=0;ge<L;ge++){const ye=C.getUint32(he,A);let we=he+4;for(let le=0;le<D;le++){let de=Q[le];de||(de=Q[le]=new Array(L)),de[ge]={levelID:ge,levelWidth:L>1||R!==0?se:oe,levelHeight:L>1||R!==0?ne:fe,levelBuffer:new Uint8Array(_,we,re)},we+=re}he+=ye+4,he=he%4!==0?he+4-he%4:he,se=se>>1||1,ne=ne>>1||1,oe=se+W-1&-4,fe=ne+X-1&-4,re=oe*fe*J}return R!==0?{uncompressed:Q.map(ge=>{let ye=ge[0].levelBuffer,we=!1;return R===TYPES.FLOAT?ye=new Float32Array(ge[0].levelBuffer.buffer,ge[0].levelBuffer.byteOffset,ge[0].levelBuffer.byteLength/4):R===TYPES.UNSIGNED_INT?(we=!0,ye=new Uint32Array(ge[0].levelBuffer.buffer,ge[0].levelBuffer.byteOffset,ge[0].levelBuffer.byteLength/4)):R===TYPES.INT&&(we=!0,ye=new Int32Array(ge[0].levelBuffer.buffer,ge[0].levelBuffer.byteOffset,ge[0].levelBuffer.byteLength/4)),{resource:new BufferResource(ye,{width:ge[0].levelWidth,height:ge[0].levelHeight}),type:R,format:we?convertFormatToInteger(I):I}}),kvData:ie}:{compressed:Q.map(ge=>new CompressedTextureResource(null,{format:F,width:B,height:U,levels:L,levelBuffers:ge})),kvData:ie}}function validate(T,_){for(let E=0;E<FILE_IDENTIFIER.length;E++)if(_.getUint8(E)!==FILE_IDENTIFIER[E])return console.error(`${T} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(T){switch(T){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return T}}function parseKvData(T,_,E){const C=new Map;let A=0;for(;A<_;){const R=T.getUint32(FILE_HEADER_SIZE+A,E),I=FILE_HEADER_SIZE+A+4,F=3-(R+3)%4;if(R===0||R>_-A){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let B=0;for(;B<R&&T.getUint8(I+B)!==0;B++);if(B===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const U=new TextDecoder().decode(new Uint8Array(T.buffer,I,B)),V=new DataView(T.buffer,I+B+1,R-B-1);C.set(U,V),A+=4+R+F}return C}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(T){return checkExtension(T,".dds")},async load(T,_,E){const C=await(await settings.ADAPTER.fetch(T)).arrayBuffer(),A=parseDDS(C).map(R=>{const I=new BaseTexture(R,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(T),..._.data});return createTexture$1(I,E,T)});return A.length===1?A[0]:A},unload(T){Array.isArray(T)?T.forEach(_=>_.destroy(!0)):T.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(T){return checkExtension(T,".ktx")},async load(T,_,E){const C=await(await settings.ADAPTER.fetch(T)).arrayBuffer(),{compressed:A,uncompressed:R,kvData:I}=parseKTX(T,C),F=A??R,B={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(T),..._.data},U=F.map(V=>{F===R&&Object.assign(B,{type:V.type,format:V.format});const D=V.resource??V,O=new BaseTexture(D,B);return O.ktxKeyValueData=I,createTexture$1(O,E,T)});return U.length===1?U[0]:U},unload(T){Array.isArray(T)?T.forEach(_=>_.destroy(!0)):T.destroy(!0)}};extensions$1.add(loadKTX);const knownFormats=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:T=>{const _=path.extname(T).slice(1);return["basis","ktx","dds"].includes(_)},parse:T=>{var C,A;const _=T.split("."),E=_.pop();if(["ktx","dds"].includes(E)){const R=_.pop();if(knownFormats.includes(R))return{resolution:parseFloat(((C=settings.RETINA_PREFIX.exec(T))==null?void 0:C[1])??"1"),format:R,src:T}}return{resolution:parseFloat(((A=settings.RETINA_PREFIX.exec(T))==null?void 0:A[1])??"1"),format:E,src:T}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle$1,BYTES_PER_PIXEL=4,_Extract=class Ws{constructor(_){this.renderer=_,this._rendererPremultipliedAlpha=!1}contextChange(){var E;const _=(E=this.renderer)==null?void 0:E.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}async image(_,E,C,A){const R=new Image;return R.src=await this.base64(_,E,C,A),R}async base64(_,E,C,A){const R=this.canvas(_,A);if(R.toBlob!==void 0)return new Promise((I,F)=>{R.toBlob(B=>{if(!B){F(new Error("ICanvas.toBlob failed!"));return}const U=new FileReader;U.onload=()=>I(U.result),U.onerror=F,U.readAsDataURL(B)},E,C)});if(R.toDataURL!==void 0)return R.toDataURL(E,C);if(R.convertToBlob!==void 0){const I=await R.convertToBlob({type:E,quality:C});return new Promise((F,B)=>{const U=new FileReader;U.onload=()=>F(U.result),U.onerror=B,U.readAsDataURL(I)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(_,E){const{pixels:C,width:A,height:R,flipY:I,premultipliedAlpha:F}=this._rawPixels(_,E);I&&Ws._flipY(C,A,R),F&&Ws._unpremultiplyAlpha(C);const B=new CanvasRenderTarget(A,R,1),U=new ImageData(new Uint8ClampedArray(C.buffer),A,R);return B.context.putImageData(U,0,0),B.canvas}pixels(_,E){const{pixels:C,width:A,height:R,flipY:I,premultipliedAlpha:F}=this._rawPixels(_,E);return I&&Ws._flipY(C,A,R),F&&Ws._unpremultiplyAlpha(C),C}_rawPixels(_,E){const C=this.renderer;if(!C)throw new Error("The Extract has already been destroyed");let A,R=!1,I=!1,F,B=!1;_&&(_ instanceof RenderTexture?F=_:(F=C.generateTexture(_,{region:E,resolution:C.resolution,multisample:C.multisample}),B=!0,E&&(TEMP_RECT.width=E.width,TEMP_RECT.height=E.height,E=TEMP_RECT)));const U=C.gl;if(F){if(A=F.baseTexture.resolution,E=E??F.frame,R=!1,I=F.baseTexture.alphaMode>0&&F.baseTexture.format===FORMATS.RGBA,!B){C.renderTexture.bind(F);const L=F.framebuffer.glFramebuffers[C.CONTEXT_UID];L.blitFramebuffer&&C.framebuffer.bind(L.blitFramebuffer)}}else A=C.resolution,E||(E=TEMP_RECT,E.width=C.width/A,E.height=C.height/A),R=!0,I=this._rendererPremultipliedAlpha,C.renderTexture.bind();const V=Math.max(Math.round(E.width*A),1),D=Math.max(Math.round(E.height*A),1),O=new Uint8Array(BYTES_PER_PIXEL*V*D);return U.readPixels(Math.round(E.x*A),Math.round(E.y*A),V,D,U.RGBA,U.UNSIGNED_BYTE,O),B&&(F==null||F.destroy(!0)),{pixels:O,width:V,height:D,flipY:R,premultipliedAlpha:I}}destroy(){this.renderer=null}static _flipY(_,E,C){const A=E<<2,R=C>>1,I=new Uint8Array(A);for(let F=0;F<R;F++){const B=F*A,U=(C-F-1)*A;I.set(_.subarray(B,B+A)),_.copyWithin(B,U,U+A),_.set(I,U)}}static _unpremultiplyAlpha(_){_ instanceof Uint8ClampedArray&&(_=new Uint8Array(_.buffer));const E=_.length;for(let C=0;C<E;C+=4){const A=_[C+3];if(A!==0){const R=255.001/A;_[C]=_[C]*R+.5,_[C+1]=_[C+1]*R+.5,_[C+2]=_[C+2]*R+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);const buildCircle={build(T){const _=T.points;let E,C,A,R,I,F;if(T.type===SHAPES.CIRC){const z=T.shape;E=z.x,C=z.y,I=F=z.radius,A=R=0}else if(T.type===SHAPES.ELIP){const z=T.shape;E=z.x,C=z.y,I=z.width,F=z.height,A=R=0}else{const z=T.shape,W=z.width/2,X=z.height/2;E=z.x+W,C=z.y+X,I=F=Math.max(0,Math.min(z.radius,Math.min(W,X))),A=W-I,R=X-F}if(!(I>=0&&F>=0&&A>=0&&R>=0)){_.length=0;return}const B=Math.ceil(2.3*Math.sqrt(I+F)),U=B*8+(A?4:0)+(R?4:0);if(_.length=U,U===0)return;if(B===0){_.length=8,_[0]=_[6]=E+A,_[1]=_[3]=C+R,_[2]=_[4]=E-A,_[5]=_[7]=C-R;return}let V=0,D=B*4+(A?2:0)+2,O=D,L=U;{const z=A+I,W=R,X=E+z,Y=E-z,K=C+W;if(_[V++]=X,_[V++]=K,_[--D]=K,_[--D]=Y,R){const Q=C-W;_[O++]=Y,_[O++]=Q,_[--L]=Q,_[--L]=X}}for(let z=1;z<B;z++){const W=Math.PI/2*(z/B),X=A+Math.cos(W)*I,Y=R+Math.sin(W)*F,K=E+X,Q=E-X,ee=C+Y,J=C-Y;_[V++]=K,_[V++]=ee,_[--D]=ee,_[--D]=Q,_[O++]=Q,_[O++]=J,_[--L]=J,_[--L]=K}{const z=A,W=R+F,X=E+z,Y=E-z,K=C+W,Q=C-W;_[V++]=X,_[V++]=K,_[--L]=Q,_[--L]=X,A&&(_[V++]=Y,_[V++]=K,_[--L]=Q,_[--L]=Y)}},triangulate(T,_){const E=T.points,C=_.points,A=_.indices;if(E.length===0)return;let R=C.length/2;const I=R;let F,B;if(T.type!==SHAPES.RREC){const V=T.shape;F=V.x,B=V.y}else{const V=T.shape;F=V.x+V.width/2,B=V.y+V.height/2}const U=T.matrix;C.push(T.matrix?U.a*F+U.c*B+U.tx:F,T.matrix?U.b*F+U.d*B+U.ty:B),R++,C.push(E[0],E[1]);for(let V=2;V<E.length;V+=2)C.push(E[V],E[V+1]),A.push(R++,I,R);A.push(I+1,I,R)}};function fixOrientation(T,_=!1){const E=T.length;if(E<6)return;let C=0;for(let A=0,R=T[E-2],I=T[E-1];A<E;A+=2){const F=T[A],B=T[A+1];C+=(F-R)*(B+I),R=F,I=B}if(!_&&C>0||_&&C<=0){const A=E/2;for(let R=A+A%2;R<E;R+=2){const I=E-R-2,F=E-R-1,B=R,U=R+1;[T[I],T[B]]=[T[B],T[I]],[T[F],T[U]]=[T[U],T[F]]}}}const buildPoly={build(T){T.points=T.shape.points.slice()},triangulate(T,_){let E=T.points;const C=T.holes,A=_.points,R=_.indices;if(E.length>=6){fixOrientation(E,!1);const I=[];for(let U=0;U<C.length;U++){const V=C[U];fixOrientation(V.points,!0),I.push(E.length/2),E=E.concat(V.points)}const F=earcut(E,I,2);if(!F)return;const B=A.length/2;for(let U=0;U<F.length;U+=3)R.push(F[U]+B),R.push(F[U+1]+B),R.push(F[U+2]+B);for(let U=0;U<E.length;U++)A.push(E[U])}}},buildRectangle={build(T){const _=T.shape,E=_.x,C=_.y,A=_.width,R=_.height,I=T.points;I.length=0,A>=0&&R>=0&&I.push(E,C,E+A,C,E+A,C+R,E,C+R)},triangulate(T,_){const E=T.points,C=_.points;if(E.length===0)return;const A=C.length/2;C.push(E[0],E[1],E[2],E[3],E[6],E[7],E[4],E[5]),_.indices.push(A,A+1,A+2,A+1,A+2,A+3)}},buildRoundedRectangle={build(T){buildCircle.build(T)},triangulate(T,_){buildCircle.triangulate(T,_)}};var LINE_JOIN=(T=>(T.MITER="miter",T.BEVEL="bevel",T.ROUND="round",T))(LINE_JOIN||{}),LINE_CAP=(T=>(T.BUTT="butt",T.ROUND="round",T.SQUARE="square",T))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(T,_=20){if(!this.adaptive||!T||isNaN(T))return _;let E=Math.ceil(T/this.maxLength);return E<this.minSegments?E=this.minSegments:E>this.maxSegments&&(E=this.maxSegments),E}};class ArcUtils{static curveTo(_,E,C,A,R,I){const F=I[I.length-2],B=I[I.length-1]-E,U=F-_,V=A-E,D=C-_,O=Math.abs(B*D-U*V);if(O<1e-8||R===0)return(I[I.length-2]!==_||I[I.length-1]!==E)&&I.push(_,E),null;const L=B*B+U*U,z=V*V+D*D,W=B*V+U*D,X=R*Math.sqrt(L)/O,Y=R*Math.sqrt(z)/O,K=X*W/L,Q=Y*W/z,ee=X*D+Y*U,J=X*V+Y*B,ie=U*(Y+K),re=B*(Y+K),se=D*(X+Q),ne=V*(X+Q),oe=Math.atan2(re-J,ie-ee),fe=Math.atan2(ne-J,se-ee);return{cx:ee+_,cy:J+E,radius:R,startAngle:oe,endAngle:fe,anticlockwise:U*V>D*B}}static arc(_,E,C,A,R,I,F,B,U){const V=F-I,D=curves._segmentsCount(Math.abs(V)*R,Math.ceil(Math.abs(V)/PI_2)*40),O=V/(D*2),L=O*2,z=Math.cos(O),W=Math.sin(O),X=D-1,Y=X%1/X;for(let K=0;K<=X;++K){const Q=K+Y*K,ee=O+I+L*Q,J=Math.cos(ee),ie=-Math.sin(ee);U.push((z*J+W*ie)*R+C,(z*-ie+W*J)*R+A)}}}class BatchPart{constructor(){this.reset()}begin(_,E,C){this.reset(),this.style=_,this.start=E,this.attribStart=C}end(_,E){this.attribSize=E-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,E,C,A,R,I,F,B){let U=0,V=0,D=0,O=0,L=0,z=0,W=0,X=0,Y=0,K=0,Q=0,ee=_,J=E;for(let ie=1;ie<=10;++ie)V=ie/10,D=V*V,O=D*V,L=1-V,z=L*L,W=z*L,X=W*_+3*z*V*C+3*L*D*R+O*F,Y=W*E+3*z*V*A+3*L*D*I+O*B,K=ee-X,Q=J-Y,ee=X,J=Y,U+=Math.sqrt(K*K+Q*Q);return U}static curveTo(_,E,C,A,R,I,F){const B=F[F.length-2],U=F[F.length-1];F.length-=2;const V=curves._segmentsCount(BezierUtils.curveLength(B,U,_,E,C,A,R,I));let D=0,O=0,L=0,z=0,W=0;F.push(B,U);for(let X=1,Y=0;X<=V;++X)Y=X/V,D=1-Y,O=D*D,L=O*D,z=Y*Y,W=z*Y,F.push(L*B+3*O*Y*_+3*D*z*C+W*R,L*U+3*O*Y*E+3*D*z*A+W*I)}}function square(T,_,E,C,A,R,I,F){const B=T-E*A,U=_-C*A,V=T+E*R,D=_+C*R;let O,L;I?(O=C,L=-E):(O=-C,L=E);const z=B+O,W=U+L,X=V+O,Y=D+L;return F.push(z,W,X,Y),2}function round(T,_,E,C,A,R,I,F){const B=E-T,U=C-_;let V=Math.atan2(B,U),D=Math.atan2(A-T,R-_);F&&V<D?V+=Math.PI*2:!F&&V>D&&(D+=Math.PI*2);let O=V;const L=D-V,z=Math.abs(L),W=Math.sqrt(B*B+U*U),X=(15*z*Math.sqrt(W)/Math.PI>>0)+1,Y=L/X;if(O+=Y,F){I.push(T,_,E,C);for(let K=1,Q=O;K<X;K++,Q+=Y)I.push(T,_,T+Math.sin(Q)*W,_+Math.cos(Q)*W);I.push(T,_,A,R)}else{I.push(E,C,T,_);for(let K=1,Q=O;K<X;K++,Q+=Y)I.push(T+Math.sin(Q)*W,_+Math.cos(Q)*W,T,_);I.push(A,R,T,_)}return X*2}function buildNonNativeLine(T,_){const E=T.shape;let C=T.points||E.points.slice();const A=_.closePointEps;if(C.length===0)return;const R=T.lineStyle,I=new Point(C[0],C[1]),F=new Point(C[C.length-2],C[C.length-1]),B=E.type!==SHAPES.POLY||E.closeStroke,U=Math.abs(I.x-F.x)<A&&Math.abs(I.y-F.y)<A;if(B){C=C.slice(),U&&(C.pop(),C.pop(),F.set(C[C.length-2],C[C.length-1]));const de=(I.x+F.x)*.5,ce=(F.y+I.y)*.5;C.unshift(de,ce),C.push(de,ce)}const V=_.points,D=C.length/2;let O=C.length;const L=V.length/2,z=R.width/2,W=z*z,X=R.miterLimit*R.miterLimit;let Y=C[0],K=C[1],Q=C[2],ee=C[3],J=0,ie=0,re=-(K-ee),se=Y-Q,ne=0,oe=0,fe=Math.sqrt(re*re+se*se);re/=fe,se/=fe,re*=z,se*=z;const he=R.alignment,ge=(1-he)*2,ye=he*2;B||(R.cap===LINE_CAP.ROUND?O+=round(Y-re*(ge-ye)*.5,K-se*(ge-ye)*.5,Y-re*ge,K-se*ge,Y+re*ye,K+se*ye,V,!0)+2:R.cap===LINE_CAP.SQUARE&&(O+=square(Y,K,re,se,ge,ye,!0,V))),V.push(Y-re*ge,K-se*ge,Y+re*ye,K+se*ye);for(let de=1;de<D-1;++de){Y=C[(de-1)*2],K=C[(de-1)*2+1],Q=C[de*2],ee=C[de*2+1],J=C[(de+1)*2],ie=C[(de+1)*2+1],re=-(K-ee),se=Y-Q,fe=Math.sqrt(re*re+se*se),re/=fe,se/=fe,re*=z,se*=z,ne=-(ee-ie),oe=Q-J,fe=Math.sqrt(ne*ne+oe*oe),ne/=fe,oe/=fe,ne*=z,oe*=z;const ce=Q-Y,ve=K-ee,be=Q-J,me=ie-ee,xe=ce*be+ve*me,Ae=ve*be-me*ce,De=Ae<0;if(Math.abs(Ae)<.001*Math.abs(xe)){V.push(Q-re*ge,ee-se*ge,Q+re*ye,ee+se*ye),xe>=0&&(R.join===LINE_JOIN.ROUND?O+=round(Q,ee,Q-re*ge,ee-se*ge,Q-ne*ge,ee-oe*ge,V,!1)+4:O+=2,V.push(Q-ne*ye,ee-oe*ye,Q+ne*ge,ee+oe*ge));continue}const Ie=(-re+Y)*(-se+ee)-(-re+Q)*(-se+K),je=(-ne+J)*(-oe+ee)-(-ne+Q)*(-oe+ie),Ye=(ce*je-be*Ie)/Ae,ke=(me*Ie-ve*je)/Ae,Le=(Ye-Q)*(Ye-Q)+(ke-ee)*(ke-ee),Ne=Q+(Ye-Q)*ge,Qe=ee+(ke-ee)*ge,et=Q-(Ye-Q)*ye,Je=ee-(ke-ee)*ye,ut=Math.min(ce*ce+ve*ve,be*be+me*me),lt=De?ge:ye,it=ut+lt*lt*W,Bt=Le<=it;let Yt=R.join;if(Yt===LINE_JOIN.MITER&&Le/W>X&&(Yt=LINE_JOIN.BEVEL),Bt)switch(Yt){case LINE_JOIN.MITER:{V.push(Ne,Qe,et,Je);break}case LINE_JOIN.BEVEL:{De?V.push(Ne,Qe,Q+re*ye,ee+se*ye,Ne,Qe,Q+ne*ye,ee+oe*ye):V.push(Q-re*ge,ee-se*ge,et,Je,Q-ne*ge,ee-oe*ge,et,Je),O+=2;break}case LINE_JOIN.ROUND:{De?(V.push(Ne,Qe,Q+re*ye,ee+se*ye),O+=round(Q,ee,Q+re*ye,ee+se*ye,Q+ne*ye,ee+oe*ye,V,!0)+4,V.push(Ne,Qe,Q+ne*ye,ee+oe*ye)):(V.push(Q-re*ge,ee-se*ge,et,Je),O+=round(Q,ee,Q-re*ge,ee-se*ge,Q-ne*ge,ee-oe*ge,V,!1)+4,V.push(Q-ne*ge,ee-oe*ge,et,Je));break}}else{switch(V.push(Q-re*ge,ee-se*ge,Q+re*ye,ee+se*ye),Yt){case LINE_JOIN.MITER:{De?V.push(et,Je,et,Je):V.push(Ne,Qe,Ne,Qe),O+=2;break}case LINE_JOIN.ROUND:{De?O+=round(Q,ee,Q+re*ye,ee+se*ye,Q+ne*ye,ee+oe*ye,V,!0)+2:O+=round(Q,ee,Q-re*ge,ee-se*ge,Q-ne*ge,ee-oe*ge,V,!1)+2;break}}V.push(Q-ne*ge,ee-oe*ge,Q+ne*ye,ee+oe*ye),O+=2}}Y=C[(D-2)*2],K=C[(D-2)*2+1],Q=C[(D-1)*2],ee=C[(D-1)*2+1],re=-(K-ee),se=Y-Q,fe=Math.sqrt(re*re+se*se),re/=fe,se/=fe,re*=z,se*=z,V.push(Q-re*ge,ee-se*ge,Q+re*ye,ee+se*ye),B||(R.cap===LINE_CAP.ROUND?O+=round(Q-re*(ge-ye)*.5,ee-se*(ge-ye)*.5,Q-re*ge,ee-se*ge,Q+re*ye,ee+se*ye,V,!1)+2:R.cap===LINE_CAP.SQUARE&&(O+=square(Q,ee,re,se,ge,ye,!1,V)));const we=_.indices,le=curves.epsilon*curves.epsilon;for(let de=L;de<O+L-2;++de)Y=V[de*2],K=V[de*2+1],Q=V[(de+1)*2],ee=V[(de+1)*2+1],J=V[(de+2)*2],ie=V[(de+2)*2+1],!(Math.abs(Y*(ee-ie)+Q*(ie-K)+J*(K-ee))<le)&&we.push(de,de+1,de+2)}function buildNativeLine(T,_){let E=0;const C=T.shape,A=T.points||C.points,R=C.type!==SHAPES.POLY||C.closeStroke;if(A.length===0)return;const I=_.points,F=_.indices,B=A.length/2,U=I.length/2;let V=U;for(I.push(A[0],A[1]),E=1;E<B;E++)I.push(A[E*2],A[E*2+1]),F.push(V,V+1),V++;R&&F.push(V,U)}function buildLine(T,_){T.lineStyle.native?buildNativeLine(T,_):buildNonNativeLine(T,_)}class QuadraticUtils{static curveLength(_,E,C,A,R,I){const F=_-2*C+R,B=E-2*A+I,U=2*C-2*_,V=2*A-2*E,D=4*(F*F+B*B),O=4*(F*U+B*V),L=U*U+V*V,z=2*Math.sqrt(D+O+L),W=Math.sqrt(D),X=2*D*W,Y=2*Math.sqrt(L),K=O/W;return(X*z+W*O*(z-Y)+(4*L*D-O*O)*Math.log((2*W+K+z)/(K+Y)))/(4*X)}static curveTo(_,E,C,A,R){const I=R[R.length-2],F=R[R.length-1],B=curves._segmentsCount(QuadraticUtils.curveLength(I,F,_,E,C,A));let U=0,V=0;for(let D=1;D<=B;++D){const O=D/B;U=I+(_-I)*O,V=F+(E-F)*O,R.push(U+(_+(C-_)*O-U)*O,V+(E+(A-E)*O-V)*O)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,E=null,C=null,A=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=C,this.fillStyle=E,this.matrix=A,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class dh extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const E=this.batches[_];E.reset(),BATCH_POOL.push(E)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,E=null,C=null,A=null){const R=new GraphicsData(_,E,C,A);return this.graphicsData.push(R),this.dirty++,this}drawHole(_,E=null){if(!this.graphicsData.length)return null;const C=new GraphicsData(_,null,null,E),A=this.graphicsData[this.graphicsData.length-1];return C.lineStyle=A.lineStyle,A.holes.push(C),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const E=this.graphicsData;for(let C=0;C<E.length;++C){const A=E[C];if(A.fillStyle.visible&&A.shape&&(A.matrix?A.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),A.shape.contains(tmpPoint.x,tmpPoint.y))){let R=!1;if(A.holes){for(let I=0;I<A.holes.length;I++)if(A.holes[I].shape.contains(tmpPoint.x,tmpPoint.y)){R=!0;break}}if(!R)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,E=this.graphicsData;let C=null,A=null;this.batches.length>0&&(C=this.batches[this.batches.length-1],A=C.style);for(let B=this.shapeIndex;B<E.length;B++){this.shapeIndex++;const U=E[B],V=U.fillStyle,D=U.lineStyle;FILL_COMMANDS[U.type].build(U),U.matrix&&this.transformPoints(U.points,U.matrix),(V.visible||D.visible)&&this.processHoles(U.holes);for(let O=0;O<2;O++){const L=O===0?V:D;if(!L.visible)continue;const z=L.texture.baseTexture,W=this.indices.length,X=this.points.length/2;z.wrapMode=WRAP_MODES.REPEAT,O===0?this.processFill(U):this.processLine(U);const Y=this.points.length/2-X;Y!==0&&(C&&!this._compareStyles(A,L)&&(C.end(W,X),C=null),C||(C=BATCH_POOL.pop()||new BatchPart,C.begin(L,W,X),this.batches.push(C),A=L),this.addUvs(this.points,_,L.texture,X,Y,L.matrix))}}const R=this.indices.length,I=this.points.length/2;if(C&&C.end(R,I),this.batches.length===0){this.batchable=!0;return}const F=I>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&F===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=F?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,E){return!(!_||!E||_.texture.baseTexture!==E.texture.baseTexture||_.color+_.alpha!==E.color+E.alpha||!!_.native!=!!E.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,E=this.graphicsData.length;_<E;_++){const C=this.graphicsData[_],A=C.fillStyle,R=C.lineStyle;if(A&&!A.texture.baseTexture.valid||R&&!R.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let E=0,C=_.length;E<C;E++){const A=_[E];for(let R=0;R<A.size;R++){const I=A.start+R;this.indicesUint16[I]=this.indicesUint16[I]-A.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let E=0;E<_.length;E++)if(_[E].style.native)return!1;return this.points.length<dh.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let D=0;D<this.drawCalls.length;D++)this.drawCalls[D].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[D]);this.drawCalls.length=0;const E=this.colors,C=this.textureIds;let A=DRAW_CALL_POOL.pop();A||(A=new BatchDrawCall,A.texArray=new BatchTextureArray),A.texArray.count=0,A.start=0,A.size=0,A.type=DRAW_MODES.TRIANGLES;let R=0,I=null,F=0,B=!1,U=DRAW_MODES.TRIANGLES,V=0;this.drawCalls.push(A);for(let D=0;D<this.batches.length;D++){const O=this.batches[D],L=8,z=O.style,W=z.texture.baseTexture;B!==!!z.native&&(B=!!z.native,U=B?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,I=null,R=L,_++),I!==W&&(I=W,W._batchEnabled!==_&&(R===L&&(_++,R=0,A.size>0&&(A=DRAW_CALL_POOL.pop(),A||(A=new BatchDrawCall,A.texArray=new BatchTextureArray),this.drawCalls.push(A)),A.start=V,A.size=0,A.texArray.count=0,A.type=U),W.touched=1,W._batchEnabled=_,W._batchLocation=R,W.wrapMode=WRAP_MODES.REPEAT,A.texArray.elements[A.texArray.count++]=W,R++)),A.size+=O.size,V+=O.size,F=W._batchLocation,this.addColors(E,z.color,z.alpha,O.attribSize,O.attribStart),this.addTextureIds(C,F,O.attribSize,O.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,E=this.uvs,C=this.colors,A=this.textureIds,R=new ArrayBuffer(_.length*3*4),I=new Float32Array(R),F=new Uint32Array(R);let B=0;for(let U=0;U<_.length/2;U++)I[B++]=_[U*2],I[B++]=_[U*2+1],I[B++]=E[U*2],I[B++]=E[U*2+1],F[B++]=C[U],I[B++]=A[U];this._buffer.update(R),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let E=0;E<_.holes.length;E++)buildLine(_.holes[E],this)}processHoles(_){for(let E=0;E<_.length;E++){const C=_[E];FILL_COMMANDS[C.type].build(C),C.matrix&&this.transformPoints(C.points,C.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,E){for(let C=0;C<_.length/2;C++){const A=_[C*2],R=_[C*2+1];_[C*2]=E.a*A+E.c*R+E.tx,_[C*2+1]=E.b*A+E.d*R+E.ty}}addColors(_,E,C,A,R=0){const I=Color.shared.setValue(E).toLittleEndianNumber(),F=Color.shared.setValue(I).toPremultiplied(C);_.length=Math.max(_.length,R+A);for(let B=0;B<A;B++)_[R+B]=F}addTextureIds(_,E,C,A=0){_.length=Math.max(_.length,A+C);for(let R=0;R<C;R++)_[A+R]=E}addUvs(_,E,C,A,R,I=null){let F=0;const B=E.length,U=C.frame;for(;F<R;){let D=_[(A+F)*2],O=_[(A+F)*2+1];if(I){const L=I.a*D+I.c*O+I.tx;O=I.b*D+I.d*O+I.ty,D=L}F++,E.push(D/U.width,O/U.height)}const V=C.baseTexture;(U.width<V.width||U.height<V.height)&&this.adjustUvs(E,C,B,R)}adjustUvs(_,E,C,A){const R=E.baseTexture,I=1e-6,F=C+A*2,B=E.frame,U=B.width/R.width,V=B.height/R.height;let D=B.x/B.width,O=B.y/B.height,L=Math.floor(_[C]+I),z=Math.floor(_[C+1]+I);for(let W=C+2;W<F;W+=2)L=Math.min(L,Math.floor(_[W]+I)),z=Math.min(z,Math.floor(_[W+1]+I));D-=L,O-=z;for(let W=C;W<F;W+=2)_[W]=(_[W]+D)*U,_[W+1]=(_[W+1]+O)*V}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class na extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new na(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,E=0,C,A=.5,R=!1){return typeof _=="number"&&(_={width:_,color:E,alpha:C,alignment:A,native:R}),this.lineTextureStyle(_)}lineTextureStyle(_){const E={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(E,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const C=_.width>0&&_.alpha>0;return C?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:C},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,E=this.currentPath.points.length;E>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[E-2],_[E-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,E){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=E,this}lineTo(_,E){this.currentPath||this.moveTo(0,0);const C=this.currentPath.points,A=C[C.length-2],R=C[C.length-1];return(A!==_||R!==E)&&C.push(_,E),this}_initCurve(_=0,E=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,E]):this.moveTo(_,E)}quadraticCurveTo(_,E,C,A){this._initCurve();const R=this.currentPath.points;return R.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,E,C,A,R),this}bezierCurveTo(_,E,C,A,R,I){return this._initCurve(),BezierUtils.curveTo(_,E,C,A,R,I,this.currentPath.points),this}arcTo(_,E,C,A,R){this._initCurve(_,E);const I=this.currentPath.points,F=ArcUtils.curveTo(_,E,C,A,R,I);if(F){const{cx:B,cy:U,radius:V,startAngle:D,endAngle:O,anticlockwise:L}=F;this.arc(B,U,V,D,O,L)}return this}arc(_,E,C,A,R,I=!1){if(A===R)return this;if(!I&&R<=A?R+=PI_2:I&&A<=R&&(A+=PI_2),R-A===0)return this;const F=_+Math.cos(A)*C,B=E+Math.sin(A)*C,U=this._geometry.closePointEps;let V=this.currentPath?this.currentPath.points:null;if(V){const D=Math.abs(V[V.length-2]-F),O=Math.abs(V[V.length-1]-B);D<U&&O<U||V.push(F,B)}else this.moveTo(F,B),V=this.currentPath.points;return ArcUtils.arc(F,B,_,E,C,A,R,I,V),this}beginFill(_=0,E){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:E})}normalizeColor(_){const E=Color.shared.setValue(_.color??0);_.color=E.toNumber(),_.alpha??(_.alpha=E.alpha)}beginTextureFill(_){const E={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(E,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const C=_.alpha>0;return C?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:C},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,E,C,A){return this.drawShape(new Rectangle$1(_,E,C,A))}drawRoundedRect(_,E,C,A,R){return this.drawShape(new RoundedRectangle(_,E,C,A,R))}drawCircle(_,E,C){return this.drawShape(new Circle(_,E,C))}drawEllipse(_,E,C,A){return this.drawShape(new Ellipse(_,E,C,A))}drawPolygon(..._){let E,C=!0;const A=_[0];A.points?(C=A.closeStroke,E=A.points):Array.isArray(_[0])?E=_[0]:E=_;const R=new Polygon(E);return R.closeStroke=C,this.drawShape(R),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const E=this._geometry;E.updateBatches(),E.batchable?(this.batchDirty!==E.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,E=this.blendMode,C=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=C,this.vertexData=new Float32Array(_.points);for(let A=0;A<C;A++){const R=_.batches[A],I=R.style.color,F=new Float32Array(this.vertexData.buffer,R.attribStart*4*2,R.attribSize*2),B=new Float32Array(_.uvsFloat32.buffer,R.attribStart*4*2,R.attribSize*2),U=new Uint16Array(_.indicesUint16.buffer,R.start*2,R.size),V={vertexData:F,blendMode:E,indices:U,uvs:B,_batchRGB:Color.shared.setValue(I).toRgbArray(),_tintRGB:I,_texture:R.style.texture,alpha:R.style.alpha,worldAlpha:1};this.batches[A]=V}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let E=0,C=this.batches.length;E<C;E++){const A=this.batches[E];A.worldAlpha=this.worldAlpha*A.alpha,_.plugins[this.pluginName].render(A)}}}_renderDirect(_){const E=this._resolveDirectShader(_),C=this._geometry,A=this.worldAlpha,R=E.uniforms,I=C.drawCalls;R.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(A).toArray(R.tint),_.shader.bind(E),_.geometry.bind(C,E),_.state.set(this.state);for(let F=0,B=I.length;F<B;F++)this._renderDrawCallDirect(_,C.drawCalls[F])}_renderDrawCallDirect(_,E){const{texArray:C,type:A,size:R,start:I}=E,F=C.count;for(let B=0;B<F;B++)_.texture.bind(C.elements[B],B);_.geometry.draw(A,R,I)}_resolveDirectShader(_){let E=this.shader;const C=this.pluginName;if(!E){if(!DEFAULT_SHADERS[C]){const{maxTextures:A}=_.plugins[C],R=new Int32Array(A);for(let B=0;B<A;B++)R[B]=B;const I={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:R},!0)},F=_.plugins[C]._shader.program;DEFAULT_SHADERS[C]=new Shader(F,I)}E=DEFAULT_SHADERS[C]}return E}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:E,minY:C,maxX:A,maxY:R}=_.bounds;this._bounds.addFrame(this.transform,E,C,A,R)}containsPoint(_){return this.worldTransform.applyInverse(_,na._TEMP_POINT),this._geometry.containsPoint(na._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const E=this.batches[_];E._tintRGB=Color.shared.setValue(this._tintColor).multiply(E._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const E=this.transform.worldTransform,C=E.a,A=E.b,R=E.c,I=E.d,F=E.tx,B=E.ty,U=this._geometry.points,V=this.vertexData;let D=0;for(let O=0;O<U.length;O+=2){const L=U[O],z=U[O+1];V[D++]=C*L+R*z+F,V[D++]=I*z+A*L+B}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;class MeshBatchUvs{constructor(_,E){this.uvBuffer=_,this.uvMatrix=E,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const E=this.uvBuffer.data;(!this.data||this.data.length!==E.length)&&(this.data=new Float32Array(E.length)),this.uvMatrix.multiplyUvs(E,this.data),this._updateID++}}const tempPoint$1=new Point,tempPolygon=new Polygon,_Mesh=class hh extends Container{constructor(_,E,C,A=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=E,this.state=C||State.for2d(),this.drawMode=A,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const E=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&E.length<hh.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const E=this.shader;E.alpha=this.worldAlpha,E.update&&E.update(),_.batch.flush(),E.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(E),_.state.set(this.state),_.geometry.bind(this.geometry,E),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const E=this.geometry,C=this.shader;C.uvMatrix&&(C.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=E.indexBuffer.data,this._tintRGB=C._tintRGB,this._texture=C.texture;const A=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[A]),_.plugins[A].render(this)}calculateVertices(){const _=this.geometry.buffers[0],E=_.data,C=_._updateID;if(C===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==E.length&&(this.vertexData=new Float32Array(E.length));const A=this.transform.worldTransform,R=A.a,I=A.b,F=A.c,B=A.d,U=A.tx,V=A.ty,D=this.vertexData;for(let O=0;O<D.length/2;O++){const L=E[O*2],z=E[O*2+1];D[O*2]=R*L+F*z+U,D[O*2+1]=I*L+B*z+V}if(this._roundPixels){const O=settings.RESOLUTION;for(let L=0;L<D.length;++L)D[L]=Math.round(D[L]*O)/O}this.vertexDirty=C}calculateUvs(){const _=this.geometry.buffers[1],E=this.shader;E.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,E.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint$1);const E=this.geometry.getBuffer("aVertexPosition").data,C=tempPolygon.points,A=this.geometry.getIndex().data,R=A.length,I=this.drawMode===4?3:1;for(let F=0;F+2<R;F+=I){const B=A[F]*2,U=A[F+1]*2,V=A[F+2]*2;if(C[0]=E[B],C[1]=E[B+1],C[2]=E[U],C[3]=E[U+1],C[4]=E[V],C[5]=E[V+1],tempPolygon.contains(tempPoint$1.x,tempPoint$1.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,E,C){super();const A=new Buffer(_),R=new Buffer(E,!0),I=new Buffer(C,!0,!0);this.addAttribute("aVertexPosition",A,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",R,2,!1,TYPES.FLOAT).addIndex(I),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,E){const C={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};E=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},E),E.uniforms&&Object.assign(C,E.uniforms),super(E.program||Program.from(vertex$1,fragment$1),C),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=E.program===void 0,this.pluginName=E.pluginName,this._tintColor=new Color(E.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=E.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(_,E,C){this.geometry=new Geometry,this.indexBuffer=null,this.size=C,this.dynamicProperties=[],this.staticProperties=[];for(let A=0;A<_.length;++A){let R=_[A];R={attributeName:R.attributeName,size:R.size,uploadFunction:R.uploadFunction,type:R.type||TYPES.FLOAT,offset:R.offset},E[A]?this.dynamicProperties.push(R):this.staticProperties.push(R)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const _=this.geometry;let E=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),_.addIndex(this.indexBuffer),this.dynamicStride=0;for(let I=0;I<this.dynamicProperties.length;++I){const F=this.dynamicProperties[I];F.offset=E,E+=F.size,this.dynamicStride+=F.size}const C=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(C),this.dynamicDataUint32=new Uint32Array(C),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let A=0;this.staticStride=0;for(let I=0;I<this.staticProperties.length;++I){const F=this.staticProperties[I];F.offset=A,A+=F.size,this.staticStride+=F.size}const R=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(R),this.staticDataUint32=new Uint32Array(R),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let I=0;I<this.dynamicProperties.length;++I){const F=this.dynamicProperties[I];_.addAttribute(F.attributeName,this.dynamicBuffer,0,F.type===TYPES.UNSIGNED_BYTE,F.type,this.dynamicStride*4,F.offset*4)}for(let I=0;I<this.staticProperties.length;++I){const F=this.staticProperties[I];_.addAttribute(F.attributeName,this.staticBuffer,0,F.type===TYPES.UNSIGNED_BYTE,F.type,this.staticStride*4,F.offset*4)}}uploadDynamic(_,E,C){for(let A=0;A<this.dynamicProperties.length;A++){const R=this.dynamicProperties[A];R.uploadFunction(_,E,C,R.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,R.offset)}this.dynamicBuffer._updateID++}uploadStatic(_,E,C){for(let A=0;A<this.staticProperties.length;A++){const R=this.staticProperties[A];R.uploadFunction(_,E,C,R.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,R.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(_){super(_),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(_){const E=_.children,C=_._maxSize,A=_._batchSize,R=this.renderer;let I=E.length;if(I===0)return;I>C&&!_.autoResize&&(I=C);let F=_._buffers;F||(F=_._buffers=this.generateBuffers(_));const B=E[0]._texture.baseTexture,U=B.alphaMode>0;this.state.blendMode=correctBlendMode(_.blendMode,U),R.state.set(this.state);const V=R.gl,D=_.worldTransform.copyTo(this.tempMatrix);D.prepend(R.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=D.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(_.tintRgb).premultiply(_.worldAlpha,U).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=B,this.renderer.shader.bind(this.shader);let O=!1;for(let L=0,z=0;L<I;L+=A,z+=1){let W=I-L;W>A&&(W=A),z>=F.length&&F.push(this._generateOneMoreBuffer(_));const X=F[z];X.uploadDynamic(E,L,W);const Y=_._bufferUpdateIDs[z]||0;O=O||X._updateID<Y,O&&(X._updateID=_._updateID,X.uploadStatic(E,L,W)),R.geometry.bind(X.geometry),V.drawElements(V.TRIANGLES,W*6,V.UNSIGNED_SHORT,0)}}generateBuffers(_){const E=[],C=_._maxSize,A=_._batchSize,R=_._properties;for(let I=0;I<C;I+=A)E.push(new ParticleBuffer(this.properties,R,A));return E}_generateOneMoreBuffer(_){const E=_._batchSize,C=_._properties;return new ParticleBuffer(this.properties,C,E)}uploadVertices(_,E,C,A,R,I){let F=0,B=0,U=0,V=0;for(let D=0;D<C;++D){const O=_[E+D],L=O._texture,z=O.scale.x,W=O.scale.y,X=L.trim,Y=L.orig;X?(B=X.x-O.anchor.x*Y.width,F=B+X.width,V=X.y-O.anchor.y*Y.height,U=V+X.height):(F=Y.width*(1-O.anchor.x),B=Y.width*-O.anchor.x,U=Y.height*(1-O.anchor.y),V=Y.height*-O.anchor.y),A[I]=B*z,A[I+1]=V*W,A[I+R]=F*z,A[I+R+1]=V*W,A[I+R*2]=F*z,A[I+R*2+1]=U*W,A[I+R*3]=B*z,A[I+R*3+1]=U*W,I+=R*4}}uploadPosition(_,E,C,A,R,I){for(let F=0;F<C;F++){const B=_[E+F].position;A[I]=B.x,A[I+1]=B.y,A[I+R]=B.x,A[I+R+1]=B.y,A[I+R*2]=B.x,A[I+R*2+1]=B.y,A[I+R*3]=B.x,A[I+R*3+1]=B.y,I+=R*4}}uploadRotation(_,E,C,A,R,I){for(let F=0;F<C;F++){const B=_[E+F].rotation;A[I]=B,A[I+R]=B,A[I+R*2]=B,A[I+R*3]=B,I+=R*4}}uploadUvs(_,E,C,A,R,I){for(let F=0;F<C;++F){const B=_[E+F]._texture._uvs;B?(A[I]=B.x0,A[I+1]=B.y0,A[I+R]=B.x1,A[I+R+1]=B.y1,A[I+R*2]=B.x2,A[I+R*2+1]=B.y2,A[I+R*3]=B.x3,A[I+R*3+1]=B.y3,I+=R*4):(A[I]=0,A[I+1]=0,A[I+R]=0,A[I+R+1]=0,A[I+R*2]=0,A[I+R*2+1]=0,A[I+R*3]=0,A[I+R*3+1]=0,I+=R*4)}}uploadTint(_,E,C,A,R,I){for(let F=0;F<C;++F){const B=_[E+F],U=Color.shared.setValue(B._tintRGB).toPremultiplied(B.alpha,B.texture.baseTexture.alphaMode>0);A[I]=U,A[I+R]=U,A[I+R*2]=U,A[I+R*3]=U,I+=R*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(T=>(T[T.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",T[T.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",T))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class _t{static get experimentalLetterSpacingSupported(){let _=_t._experimentalLetterSpacingSupported;if(_!==void 0){const E=settings.ADAPTER.getCanvasRenderingContext2D().prototype;_=_t._experimentalLetterSpacingSupported="letterSpacing"in E||"textLetterSpacing"in E}return _}constructor(_,E,C,A,R,I,F,B,U){this.text=_,this.style=E,this.width=C,this.height=A,this.lines=R,this.lineWidths=I,this.lineHeight=F,this.maxLineWidth=B,this.fontProperties=U}static measureText(_,E,C,A=_t._canvas){C=C??E.wordWrap;const R=E.toFontString(),I=_t.measureFont(R);I.fontSize===0&&(I.fontSize=E.fontSize,I.ascent=E.fontSize);const F=A.getContext("2d",contextSettings);F.font=R;const B=(C?_t.wordWrap(_,E,A):_).split(/(?:\r\n|\r|\n)/),U=new Array(B.length);let V=0;for(let z=0;z<B.length;z++){const W=_t._measureText(B[z],E.letterSpacing,F);U[z]=W,V=Math.max(V,W)}let D=V+E.strokeThickness;E.dropShadow&&(D+=E.dropShadowDistance);const O=E.lineHeight||I.fontSize+E.strokeThickness;let L=Math.max(O,I.fontSize+E.strokeThickness*2)+E.leading+(B.length-1)*(O+E.leading);return E.dropShadow&&(L+=E.dropShadowDistance),new _t(_,E,D,L,B,U,O+E.leading,V,I)}static _measureText(_,E,C){let A=!1;_t.experimentalLetterSpacingSupported&&(_t.experimentalLetterSpacing?(C.letterSpacing=`${E}px`,C.textLetterSpacing=`${E}px`,A=!0):(C.letterSpacing="0px",C.textLetterSpacing="0px"));let R=C.measureText(_).width;return R>0&&(A?R-=E:R+=(_t.graphemeSegmenter(_).length-1)*E),R}static wordWrap(_,E,C=_t._canvas){const A=C.getContext("2d",contextSettings);let R=0,I="",F="";const B=Object.create(null),{letterSpacing:U,whiteSpace:V}=E,D=_t.collapseSpaces(V),O=_t.collapseNewlines(V);let L=!D;const z=E.wordWrapWidth+U,W=_t.tokenize(_);for(let X=0;X<W.length;X++){let Y=W[X];if(_t.isNewline(Y)){if(!O){F+=_t.addLine(I),L=!D,I="",R=0;continue}Y=" "}if(D){const Q=_t.isBreakingSpace(Y),ee=_t.isBreakingSpace(I[I.length-1]);if(Q&&ee)continue}const K=_t.getFromCache(Y,U,B,A);if(K>z)if(I!==""&&(F+=_t.addLine(I),I="",R=0),_t.canBreakWords(Y,E.breakWords)){const Q=_t.wordWrapSplit(Y);for(let ee=0;ee<Q.length;ee++){let J=Q[ee],ie=J,re=1;for(;Q[ee+re];){const ne=Q[ee+re];if(!_t.canBreakChars(ie,ne,Y,ee,E.breakWords))J+=ne;else break;ie=ne,re++}ee+=re-1;const se=_t.getFromCache(J,U,B,A);se+R>z&&(F+=_t.addLine(I),L=!1,I="",R=0),I+=J,R+=se}}else{I.length>0&&(F+=_t.addLine(I),I="",R=0);const Q=X===W.length-1;F+=_t.addLine(Y,!Q),L=!1,I="",R=0}else K+R>z&&(L=!1,F+=_t.addLine(I),I="",R=0),(I.length>0||!_t.isBreakingSpace(Y)||L)&&(I+=Y,R+=K)}return F+=_t.addLine(I,!1),F}static addLine(_,E=!0){return _=_t.trimRight(_),_=E?`${_}
`:_,_}static getFromCache(_,E,C,A){let R=C[_];return typeof R!="number"&&(R=_t._measureText(_,E,A)+E,C[_]=R),R}static collapseSpaces(_){return _==="normal"||_==="pre-line"}static collapseNewlines(_){return _==="normal"}static trimRight(_){if(typeof _!="string")return"";for(let E=_.length-1;E>=0;E--){const C=_[E];if(!_t.isBreakingSpace(C))break;_=_.slice(0,-1)}return _}static isNewline(_){return typeof _!="string"?!1:_t._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,E){return typeof _!="string"?!1:_t._breakingSpaces.includes(_.charCodeAt(0))}static tokenize(_){const E=[];let C="";if(typeof _!="string")return E;for(let A=0;A<_.length;A++){const R=_[A],I=_[A+1];if(_t.isBreakingSpace(R,I)||_t.isNewline(R)){C!==""&&(E.push(C),C=""),E.push(R);continue}C+=R}return C!==""&&E.push(C),E}static canBreakWords(_,E){return E}static canBreakChars(_,E,C,A,R){return!0}static wordWrapSplit(_){return _t.graphemeSegmenter(_)}static measureFont(_){if(_t._fonts[_])return _t._fonts[_];const E={ascent:0,descent:0,fontSize:0},C=_t._canvas,A=_t._context;A.font=_;const R=_t.METRICS_STRING+_t.BASELINE_SYMBOL,I=Math.ceil(A.measureText(R).width);let F=Math.ceil(A.measureText(_t.BASELINE_SYMBOL).width);const B=Math.ceil(_t.HEIGHT_MULTIPLIER*F);if(F=F*_t.BASELINE_MULTIPLIER|0,I===0||B===0)return _t._fonts[_]=E,E;C.width=I,C.height=B,A.fillStyle="#f00",A.fillRect(0,0,I,B),A.font=_,A.textBaseline="alphabetic",A.fillStyle="#000",A.fillText(R,0,F);const U=A.getImageData(0,0,I,B).data,V=U.length,D=I*4;let O=0,L=0,z=!1;for(O=0;O<F;++O){for(let W=0;W<D;W+=4)if(U[L+W]!==255){z=!0;break}if(!z)L+=D;else break}for(E.ascent=F-O,L=V-D,z=!1,O=B;O>F;--O){for(let W=0;W<D;W+=4)if(U[L+W]!==255){z=!0;break}if(!z)L-=D;else break}return E.descent=O-F,E.fontSize=E.ascent+E.descent,_t._fonts[_]=E,E}static clearMetrics(_=""){_?delete _t._fonts[_]:_t._fonts={}}static get _canvas(){var _;if(!_t.__canvas){let E;try{const C=new OffscreenCanvas(0,0);if((_=C.getContext("2d",contextSettings))!=null&&_.measureText)return _t.__canvas=C,C;E=settings.ADAPTER.createCanvas()}catch{E=settings.ADAPTER.createCanvas()}E.width=E.height=10,_t.__canvas=E}return _t.__canvas}static get _context(){return _t.__context||(_t.__context=_t._canvas.getContext("2d",contextSettings)),_t.__context}};_TextMetrics.METRICS_STRING="|ÉqÅ",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const T=new Intl.Segmenter;return _=>[...T.segment(_)].map(E=>E.segment)}return T=>[...T]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class Hs{constructor(_){this.styleID=0,this.reset(),deepCopyProperties(this,_,_)}clone(){const _={};return deepCopyProperties(_,this,Hs.defaultStyle),new Hs(_)}reset(){deepCopyProperties(this,Hs.defaultStyle,Hs.defaultStyle)}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords!==_&&(this._breakWords=_,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(_){this._dropShadow!==_&&(this._dropShadow=_,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(_){this._dropShadowAlpha!==_&&(this._dropShadowAlpha=_,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(_){this._dropShadowAngle!==_&&(this._dropShadowAngle=_,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(_){this._dropShadowBlur!==_&&(this._dropShadowBlur=_,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(_){const E=getColor(_);this._dropShadowColor!==E&&(this._dropShadowColor=E,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(_){this._dropShadowDistance!==_&&(this._dropShadowDistance=_,this.styleID++)}get fill(){return this._fill}set fill(_){const E=getColor(_);this._fill!==E&&(this._fill=E,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(_){this._fillGradientType!==_&&(this._fillGradientType=_,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(_){areArraysEqual(this._fillGradientStops,_)||(this._fillGradientStops=_,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(_){this.fontFamily!==_&&(this._fontFamily=_,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant!==_&&(this._fontVariant=_,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight!==_&&(this._lineHeight=_,this.styleID++)}get leading(){return this._leading}set leading(_){this._leading!==_&&(this._leading=_,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(_){this._lineJoin!==_&&(this._lineJoin=_,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(_){this._miterLimit!==_&&(this._miterLimit=_,this.styleID++)}get padding(){return this._padding}set padding(_){this._padding!==_&&(this._padding=_,this.styleID++)}get stroke(){return this._stroke}set stroke(_){const E=getColor(_);this._stroke!==E&&(this._stroke=E,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(_){this._strokeThickness!==_&&(this._strokeThickness=_,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline!==_&&(this._textBaseline=_,this.styleID++)}get trim(){return this._trim}set trim(_){this._trim!==_&&(this._trim=_,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace!==_&&(this._whiteSpace=_,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap!==_&&(this._wordWrap=_,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth!==_&&(this._wordWrapWidth=_,this.styleID++)}toFontString(){const _=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let E=this.fontFamily;Array.isArray(this.fontFamily)||(E=this.fontFamily.split(","));for(let C=E.length-1;C>=0;C--){let A=E[C].trim();!/([\"\'])[^\'\"]+\1/.test(A)&&!genericFontFamilies.includes(A)&&(A=`"${A}"`),E[C]=A}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${_} ${E.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(T){const _=Color.shared,E=C=>{const A=_.setValue(C);return A.alpha===1?A.toHex():A.toRgbaString()};return Array.isArray(T)?T.map(E):E(T)}function areArraysEqual(T,_){if(!Array.isArray(T)||!Array.isArray(_)||T.length!==_.length)return!1;for(let E=0;E<T.length;++E)if(T[E]!==_[E])return!1;return!0}function deepCopyProperties(T,_,E){for(const C in E)Array.isArray(_[C])?T[C]=_[C].slice():T[C]=_[C]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class Bl extends Sprite{constructor(_,E,C){let A=!1;C||(C=settings.ADAPTER.createCanvas(),A=!0),C.width=3,C.height=3;const R=Texture.from(C);R.orig=new Rectangle$1,R.trim=new Rectangle$1,super(R),this._ownCanvas=A,this.canvas=C,this.context=C.getContext("2d",{willReadFrequently:!0}),this._resolution=Bl.defaultResolution??settings.RESOLUTION,this._autoResolution=Bl.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=_,this.style=E,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(_){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=_}updateText(_){const E=this._style;if(this.localStyleID!==E.styleID&&(this.dirty=!0,this.localStyleID=E.styleID),!this.dirty&&_)return;this._font=this._style.toFontString();const C=this.context,A=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),R=A.width,I=A.height,F=A.lines,B=A.lineHeight,U=A.lineWidths,V=A.maxLineWidth,D=A.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,R)+E.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,I)+E.padding*2)*this._resolution),C.scale(this._resolution,this._resolution),C.clearRect(0,0,this.canvas.width,this.canvas.height),C.font=this._font,C.lineWidth=E.strokeThickness,C.textBaseline=E.textBaseline,C.lineJoin=E.lineJoin,C.miterLimit=E.miterLimit;let O,L;const z=E.dropShadow?2:1;for(let W=0;W<z;++W){const X=E.dropShadow&&W===0,Y=X?Math.ceil(Math.max(1,I)+E.padding*2):0,K=Y*this._resolution;if(X){C.fillStyle="black",C.strokeStyle="black";const ee=E.dropShadowColor,J=E.dropShadowBlur*this._resolution,ie=E.dropShadowDistance*this._resolution;C.shadowColor=Color.shared.setValue(ee).setAlpha(E.dropShadowAlpha).toRgbaString(),C.shadowBlur=J,C.shadowOffsetX=Math.cos(E.dropShadowAngle)*ie,C.shadowOffsetY=Math.sin(E.dropShadowAngle)*ie+K}else C.fillStyle=this._generateFillStyle(E,F,A),C.strokeStyle=E.stroke,C.shadowColor="black",C.shadowBlur=0,C.shadowOffsetX=0,C.shadowOffsetY=0;let Q=(B-D.fontSize)/2;B-D.fontSize<0&&(Q=0);for(let ee=0;ee<F.length;ee++)O=E.strokeThickness/2,L=E.strokeThickness/2+ee*B+D.ascent+Q,E.align==="right"?O+=V-U[ee]:E.align==="center"&&(O+=(V-U[ee])/2),E.stroke&&E.strokeThickness&&this.drawLetterSpacing(F[ee],O+E.padding,L+E.padding-Y,!0),E.fill&&this.drawLetterSpacing(F[ee],O+E.padding,L+E.padding-Y)}this.updateTexture()}drawLetterSpacing(_,E,C,A=!1){const R=this._style.letterSpacing;let I=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${R}px`,this.context.textLetterSpacing=`${R}px`,I=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),R===0||I){A?this.context.strokeText(_,E,C):this.context.fillText(_,E,C);return}let F=E;const B=TextMetrics.graphemeSegmenter(_);let U=this.context.measureText(_).width,V=0;for(let D=0;D<B.length;++D){const O=B[D];A?this.context.strokeText(O,F,C):this.context.fillText(O,F,C);let L="";for(let z=D+1;z<B.length;++z)L+=B[z];V=this.context.measureText(L).width,F+=U-V+R,U=V}}updateTexture(){const _=this.canvas;if(this._style.trim){const I=trimCanvas(_);I.data&&(_.width=I.width,_.height=I.height,this.context.putImageData(I.data,0,0))}const E=this._texture,C=this._style,A=C.trim?0:C.padding,R=E.baseTexture;E.trim.width=E._frame.width=_.width/this._resolution,E.trim.height=E._frame.height=_.height/this._resolution,E.trim.x=-A,E.trim.y=-A,E.orig.width=E._frame.width-A*2,E.orig.height=E._frame.height-A*2,this._onTextureUpdate(),R.setRealSize(_.width,_.height,this._resolution),E.updateUvs(),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(_,E){return this.updateText(!0),this._textureID===-1&&(_=!1),super.getBounds(_,E)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds.call(this,_)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(_,E,C){const A=_.fill;if(Array.isArray(A)){if(A.length===1)return A[0]}else return A;let R;const I=_.dropShadow?_.dropShadowDistance:0,F=_.padding||0,B=this.canvas.width/this._resolution-I-F*2,U=this.canvas.height/this._resolution-I-F*2,V=A.slice(),D=_.fillGradientStops.slice();if(!D.length){const O=V.length+1;for(let L=1;L<O;++L)D.push(L/O)}if(V.unshift(A[0]),D.unshift(0),V.push(A[A.length-1]),D.push(1),_.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){R=this.context.createLinearGradient(B/2,F,B/2,U+F);const O=C.fontProperties.fontSize+_.strokeThickness;for(let L=0;L<E.length;L++){const z=C.lineHeight*(L-1)+O,W=C.lineHeight*L;let X=W;L>0&&z>W&&(X=(W+z)/2);const Y=W+O,K=C.lineHeight*(L+1);let Q=Y;L+1<E.length&&K<Y&&(Q=(Y+K)/2);const ee=(Q-X)/U;for(let J=0;J<V.length;J++){let ie=0;typeof D[J]=="number"?ie=D[J]:ie=J/V.length;let re=Math.min(1,Math.max(0,X/U+ie*ee));re=Number(re.toFixed(5)),R.addColorStop(re,V[J])}}}else{R=this.context.createLinearGradient(F,U/2,B+F,U/2);const O=V.length+1;let L=1;for(let z=0;z<V.length;z++){let W;typeof D[z]=="number"?W=D[z]:W=L/O,R.addColorStop(W,V[z]),L++}}return R}destroy(_){typeof _=="boolean"&&(_={children:_}),_=Object.assign({},defaultDestroyOptions,_),super.destroy(_),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this.updateText(!0);const E=sign(this.scale.x)||1;this.scale.x=E*_/this._texture.orig.width,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this.updateText(!0);const E=sign(this.scale.y)||1;this.scale.y=E*_/this._texture.orig.height,this._height=_}get style(){return this._style}set style(_){_=_||{},_ instanceof TextStyle?this._style=_:this._style=new TextStyle(_),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(_){this.maxItemsPerFrame=_,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(T,_){var C;let E=!1;if((C=T==null?void 0:T._textures)!=null&&C.length){for(let A=0;A<T._textures.length;A++)if(T._textures[A]instanceof Texture){const R=T._textures[A].baseTexture;_.includes(R)||(_.push(R),E=!0)}}return E}function findBaseTexture(T,_){if(T.baseTexture instanceof BaseTexture){const E=T.baseTexture;return _.includes(E)||_.push(E),!0}return!1}function findTexture(T,_){if(T._texture&&T._texture instanceof Texture){const E=T._texture.baseTexture;return _.includes(E)||_.push(E),!0}return!1}function drawText(T,_){return _ instanceof Text?(_.updateText(!0),!0):!1}function calculateTextStyle(T,_){if(_ instanceof TextStyle){const E=_.toFontString();return TextMetrics.measureFont(E),!0}return!1}function findText(T,_){if(T instanceof Text){_.includes(T.style)||_.push(T.style),_.includes(T)||_.push(T);const E=T._texture.baseTexture;return _.includes(E)||_.push(E),!0}return!1}function findTextStyle(T,_){return T instanceof TextStyle?(_.includes(T)||_.push(T),!0):!1}const _BasePrepare=class fh{constructor(_){this.limiter=new CountLimiter(fh.uploadsPerFrame),this.renderer=_,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(_){return new Promise(E=>{_&&this.add(_),this.queue.length?(this.completes.push(E),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):E()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const _=this.queue[0];let E=!1;if(_&&!_._destroyed){for(let C=0,A=this.uploadHooks.length;C<A;C++)if(this.uploadHooks[C](this.uploadHookHelper,_)){this.queue.shift(),E=!0;break}}E||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const _=this.completes.slice(0);this.completes.length=0;for(let E=0,C=_.length;E<C;E++)_[E]()}}registerFindHook(_){return _&&this.addHooks.push(_),this}registerUploadHook(_){return _&&this.uploadHooks.push(_),this}add(_){for(let E=0,C=this.addHooks.length;E<C&&!this.addHooks[E](_,this.queue);E++);if(_ instanceof Container)for(let E=_.children.length-1;E>=0;E--)this.add(_.children[E]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(T){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=T}}});function uploadBaseTextures(T,_){return _ instanceof BaseTexture?(_._glTextures[T.CONTEXT_UID]||T.texture.bind(_),!0):!1}function uploadGraphics(T,_){if(!(_ instanceof Graphics))return!1;const{geometry:E}=_;_.finishPoly(),E.updateBatches();const{batches:C}=E;for(let A=0;A<C.length;A++){const{texture:R}=C[A].style;R&&uploadBaseTextures(T,R.baseTexture)}return E.batchable||T.geometry.bind(E,_._resolveDirectShader(T)),!0}function findGraphics(T,_){return T instanceof Graphics?(_.push(T),!0):!1}class Prepare extends BasePrepare{constructor(_){super(_),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(_){super(_),_.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const _=this.renderer,E={globals:_.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,E),this.shader=_.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,E):Shader.from(gl1VertexSrc,gl1FragmentSrc,E)}render(_){const E=this.renderer,C=this.quad;let A=C.vertices;A[0]=A[6]=_._width*-_.anchor.x,A[1]=A[3]=_._height*-_.anchor.y,A[2]=A[4]=_._width*(1-_.anchor.x),A[5]=A[7]=_._height*(1-_.anchor.y);const R=_.uvRespectAnchor?_.anchor.x:0,I=_.uvRespectAnchor?_.anchor.y:0;A=C.uvs,A[0]=A[6]=-R,A[1]=A[3]=-I,A[2]=A[4]=1-R,A[5]=A[7]=1-I,C.invalidate();const F=_._texture,B=F.baseTexture,U=B.alphaMode>0,V=_.tileTransform.localTransform,D=_.uvMatrix;let O=B.isPowerOfTwo&&F.frame.width===B.width&&F.frame.height===B.height;O&&(B._glTextures[E.CONTEXT_UID]?O=B.wrapMode!==WRAP_MODES.CLAMP:B.wrapMode===WRAP_MODES.CLAMP&&(B.wrapMode=WRAP_MODES.REPEAT));const L=O?this.simpleShader:this.shader,z=F.width,W=F.height,X=_._width,Y=_._height;tempMat.set(V.a*z/X,V.b*z/Y,V.c*W/X,V.d*W/Y,V.tx/X,V.ty/Y),tempMat.invert(),O?tempMat.prepend(D.mapCoord):(L.uniforms.uMapCoord=D.mapCoord.toArray(!0),L.uniforms.uClampFrame=D.uClampFrame,L.uniforms.uClampOffset=D.uClampOffset),L.uniforms.uTransform=tempMat.toArray(!0),L.uniforms.uColor=Color.shared.setValue(_.tint).premultiply(_.worldAlpha,U).toArray(L.uniforms.uColor),L.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),L.uniforms.uSampler=F,E.shader.bind(L),E.geometry.bind(C),this.state.blendMode=correctBlendMode(_.blendMode,U),E.state.set(this.state),E.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class qs{constructor(_,E,C){this.linkedSheets=[],(_ instanceof BaseTexture||_ instanceof Texture)&&(_={texture:_,data:E,resolutionFilename:C});const{texture:A,data:R,resolutionFilename:I=null,cachePrefix:F=""}=_;this.cachePrefix=F,this._texture=A instanceof Texture?A:null,this.baseTexture=A instanceof BaseTexture?A:this._texture.baseTexture,this.textures={},this.animations={},this.data=R;const B=this.baseTexture.resource;this.resolution=this._updateResolution(I||(B?B.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(_=null){const{scale:E}=this.data.meta;let C=getResolutionOfUrl(_,null);return C===null&&(C=typeof E=="number"?E:parseFloat(E??"1")),C!==1&&this.baseTexture.setResolution(C),C}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=qs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let E=_;const C=qs.BATCH_SIZE;for(;E-_<C&&E<this._frameKeys.length;){const A=this._frameKeys[E],R=this._frames[A],I=R.frame;if(I){let F=null,B=null;const U=R.trimmed!==!1&&R.sourceSize?R.sourceSize:R.frame,V=new Rectangle$1(0,0,Math.floor(U.w)/this.resolution,Math.floor(U.h)/this.resolution);R.rotated?F=new Rectangle$1(Math.floor(I.x)/this.resolution,Math.floor(I.y)/this.resolution,Math.floor(I.h)/this.resolution,Math.floor(I.w)/this.resolution):F=new Rectangle$1(Math.floor(I.x)/this.resolution,Math.floor(I.y)/this.resolution,Math.floor(I.w)/this.resolution,Math.floor(I.h)/this.resolution),R.trimmed!==!1&&R.spriteSourceSize&&(B=new Rectangle$1(Math.floor(R.spriteSourceSize.x)/this.resolution,Math.floor(R.spriteSourceSize.y)/this.resolution,Math.floor(I.w)/this.resolution,Math.floor(I.h)/this.resolution)),this.textures[A]=new Texture(this.baseTexture,F,V,B,R.rotated?2:0,R.anchor,R.borders),Texture.addToCache(this.textures[A],this.cachePrefix+A.toString())}E++}}_processAnimations(){const _=this.data.animations||{};for(const E in _){this.animations[E]=[];for(let C=0;C<_[E].length;C++){const A=_[E][C];this.animations[E].push(this.textures[A])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*qs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*qs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var E;for(const C in this.textures)this.textures[C].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((E=this._texture)==null||E.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function getCacheableAssets(T,_,E){const C={};if(T.forEach(A=>{C[A]=_}),Object.keys(_.textures).forEach(A=>{C[`${_.cachePrefix}${A}`]=_.textures[A]}),!E){const A=path.dirname(T[0]);_.linkedSheets.forEach((R,I)=>{Object.assign(C,getCacheableAssets([`${A}/${_.data.meta.related_multi_packs[I]}`],R,!0))})}return C}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:T=>T instanceof Spritesheet,getCacheableAssets:(T,_)=>getCacheableAssets(T,_,!1)},resolver:{test:T=>{const _=T.split("?")[0].split("."),E=_.pop(),C=_.pop();return E==="json"&&validImages.includes(C)},parse:T=>{var E;const _=T.split(".");return{resolution:parseFloat(((E=settings.RETINA_PREFIX.exec(T))==null?void 0:E[1])??"1"),format:_[_.length-2],src:T}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(T,_){return path.extname(_.src).toLowerCase()===".json"&&!!T.frames},async parse(T,_,E){var V,D;const{texture:C,imageFilename:A,cachePrefix:R}=(_==null?void 0:_.data)??{};let I=path.dirname(_.src);I&&I.lastIndexOf("/")!==I.length-1&&(I+="/");let F;if(C&&C.baseTexture)F=C;else{const O=copySearchParams(I+(A??T.meta.image),_.src);F=(await E.load([O]))[O]}const B=new Spritesheet({texture:F.baseTexture,data:T,resolutionFilename:_.src,cachePrefix:R});await B.parse();const U=(V=T==null?void 0:T.meta)==null?void 0:V.related_multi_packs;if(Array.isArray(U)){const O=[];for(const z of U){if(typeof z!="string")continue;let W=I+z;(D=_.data)!=null&&D.ignoreMultiPack||(W=copySearchParams(W,_.src),O.push(E.load({src:W,data:{ignoreMultiPack:!0}})))}const L=await Promise.all(O);B.linkedSheets=L,L.forEach(z=>{z.linkedSheets=[B].concat(B.linkedSheets.filter(W=>W!==z))})}return B},unload(T){T.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(_){return typeof _=="string"&&_.startsWith("info face=")}static parse(_){const E=_.match(/^[a-z]+\s+.+$/gm),C={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const R in E){const I=E[R].match(/^[a-z]+/gm)[0],F=E[R].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),B={};for(const U in F){const V=F[U].split("="),D=V[0],O=V[1].replace(/"/gm,""),L=parseFloat(O),z=isNaN(L)?O:L;B[D]=z}C[I].push(B)}const A=new BitmapFontData;return C.info.forEach(R=>A.info.push({face:R.face,size:parseInt(R.size,10)})),C.common.forEach(R=>A.common.push({lineHeight:parseInt(R.lineHeight,10)})),C.page.forEach(R=>A.page.push({id:parseInt(R.id,10),file:R.file})),C.char.forEach(R=>A.char.push({id:parseInt(R.id,10),page:parseInt(R.page,10),x:parseInt(R.x,10),y:parseInt(R.y,10),width:parseInt(R.width,10),height:parseInt(R.height,10),xoffset:parseInt(R.xoffset,10),yoffset:parseInt(R.yoffset,10),xadvance:parseInt(R.xadvance,10)})),C.kerning.forEach(R=>A.kerning.push({first:parseInt(R.first,10),second:parseInt(R.second,10),amount:parseInt(R.amount,10)})),C.distanceField.forEach(R=>A.distanceField.push({distanceRange:parseInt(R.distanceRange,10),fieldType:R.fieldType})),A}}class XMLFormat{static test(_){const E=_;return typeof _!="string"&&"getElementsByTagName"in _&&E.getElementsByTagName("page").length&&E.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(_){const E=new BitmapFontData,C=_.getElementsByTagName("info"),A=_.getElementsByTagName("common"),R=_.getElementsByTagName("page"),I=_.getElementsByTagName("char"),F=_.getElementsByTagName("kerning"),B=_.getElementsByTagName("distanceField");for(let U=0;U<C.length;U++)E.info.push({face:C[U].getAttribute("face"),size:parseInt(C[U].getAttribute("size"),10)});for(let U=0;U<A.length;U++)E.common.push({lineHeight:parseInt(A[U].getAttribute("lineHeight"),10)});for(let U=0;U<R.length;U++)E.page.push({id:parseInt(R[U].getAttribute("id"),10)||0,file:R[U].getAttribute("file")});for(let U=0;U<I.length;U++){const V=I[U];E.char.push({id:parseInt(V.getAttribute("id"),10),page:parseInt(V.getAttribute("page"),10)||0,x:parseInt(V.getAttribute("x"),10),y:parseInt(V.getAttribute("y"),10),width:parseInt(V.getAttribute("width"),10),height:parseInt(V.getAttribute("height"),10),xoffset:parseInt(V.getAttribute("xoffset"),10),yoffset:parseInt(V.getAttribute("yoffset"),10),xadvance:parseInt(V.getAttribute("xadvance"),10)})}for(let U=0;U<F.length;U++)E.kerning.push({first:parseInt(F[U].getAttribute("first"),10),second:parseInt(F[U].getAttribute("second"),10),amount:parseInt(F[U].getAttribute("amount"),10)});for(let U=0;U<B.length;U++)E.distanceField.push({fieldType:B[U].getAttribute("fieldType"),distanceRange:parseInt(B[U].getAttribute("distanceRange"),10)});return E}}class XMLStringFormat{static test(_){return typeof _=="string"&&_.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(_)):!1}static parse(_){return XMLFormat.parse(settings.ADAPTER.parseXML(_))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(T){for(let _=0;_<formats.length;_++)if(formats[_].test(T))return formats[_];return null}function generateFillStyle(T,_,E,C,A,R){const I=E.fill;if(Array.isArray(I)){if(I.length===1)return I[0]}else return I;let F;const B=E.dropShadow?E.dropShadowDistance:0,U=E.padding||0,V=T.width/C-B-U*2,D=T.height/C-B-U*2,O=I.slice(),L=E.fillGradientStops.slice();if(!L.length){const z=O.length+1;for(let W=1;W<z;++W)L.push(W/z)}if(O.unshift(I[0]),L.unshift(0),O.push(I[I.length-1]),L.push(1),E.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){F=_.createLinearGradient(V/2,U,V/2,D+U);let z=0;const W=(R.fontProperties.fontSize+E.strokeThickness)/D;for(let X=0;X<A.length;X++){const Y=R.lineHeight*X;for(let K=0;K<O.length;K++){let Q=0;typeof L[K]=="number"?Q=L[K]:Q=K/O.length;const ee=Y/D+Q*W;let J=Math.max(z,ee);J=Math.min(J,1),F.addColorStop(J,O[K]),z=J}}}else{F=_.createLinearGradient(U,D/2,V+U,D/2);const z=O.length+1;let W=1;for(let X=0;X<O.length;X++){let Y;typeof L[X]=="number"?Y=L[X]:Y=W/z,F.addColorStop(Y,O[X]),W++}}return F}function drawGlyph(T,_,E,C,A,R,I){const F=E.text,B=E.fontProperties;_.translate(C,A),_.scale(R,R);const U=I.strokeThickness/2,V=-(I.strokeThickness/2);if(_.font=I.toFontString(),_.lineWidth=I.strokeThickness,_.textBaseline=I.textBaseline,_.lineJoin=I.lineJoin,_.miterLimit=I.miterLimit,_.fillStyle=generateFillStyle(T,_,I,R,[F],E),_.strokeStyle=I.stroke,I.dropShadow){const D=I.dropShadowColor,O=I.dropShadowBlur*R,L=I.dropShadowDistance*R;_.shadowColor=Color.shared.setValue(D).setAlpha(I.dropShadowAlpha).toRgbaString(),_.shadowBlur=O,_.shadowOffsetX=Math.cos(I.dropShadowAngle)*L,_.shadowOffsetY=Math.sin(I.dropShadowAngle)*L}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0;I.stroke&&I.strokeThickness&&_.strokeText(F,U,V+E.lineHeight-B.descent),I.fill&&_.fillText(F,U,V+E.lineHeight-B.descent),_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(T){return T.codePointAt?T.codePointAt(0):T.charCodeAt(0)}function splitTextToCharacters(T){return Array.from?Array.from(T):T.split("")}function resolveCharacters(T){typeof T=="string"&&(T=[T]);const _=[];for(let E=0,C=T.length;E<C;E++){const A=T[E];if(Array.isArray(A)){if(A.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${A.length}.`);const R=A[0].charCodeAt(0),I=A[1].charCodeAt(0);if(I<R)throw new Error("[BitmapFont]: Invalid character range.");for(let F=R,B=I;F<=B;F++)_.push(String.fromCharCode(F))}else _.push(...splitTextToCharacters(A))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _BitmapFont=class Un{constructor(_,E,C){var V;const[A]=_.info,[R]=_.common,[I]=_.page,[F]=_.distanceField,B=getResolutionOfUrl(I.file),U={};this._ownsTextures=C,this.font=A.face,this.size=A.size,this.lineHeight=R.lineHeight/B,this.chars={},this.pageTextures=U;for(let D=0;D<_.page.length;D++){const{id:O,file:L}=_.page[D];U[O]=E instanceof Array?E[D]:E[L],F!=null&&F.fieldType&&F.fieldType!=="none"&&(U[O].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,U[O].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let D=0;D<_.char.length;D++){const{id:O,page:L}=_.char[D];let{x:z,y:W,width:X,height:Y,xoffset:K,yoffset:Q,xadvance:ee}=_.char[D];z/=B,W/=B,X/=B,Y/=B,K/=B,Q/=B,ee/=B;const J=new Rectangle$1(z+U[L].frame.x/B,W+U[L].frame.y/B,X,Y);this.chars[O]={xOffset:K,yOffset:Q,xAdvance:ee,kerning:{},texture:new Texture(U[L].baseTexture,J),page:L}}for(let D=0;D<_.kerning.length;D++){let{first:O,second:L,amount:z}=_.kerning[D];O/=B,L/=B,z/=B,this.chars[L]&&(this.chars[L].kerning[O]=z)}this.distanceFieldRange=F==null?void 0:F.distanceRange,this.distanceFieldType=((V=F==null?void 0:F.fieldType)==null?void 0:V.toLowerCase())??"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,E,C){let A;if(_ instanceof BitmapFontData)A=_;else{const I=autoDetectFormat(_);if(!I)throw new Error("Unrecognized data format for font.");A=I.parse(_)}E instanceof Texture&&(E=[E]);const R=new Un(A,E,C);return Un.available[R.font]=R,R}static uninstall(_){const E=Un.available[_];if(!E)throw new Error(`No font found named '${_}'`);E.destroy(),delete Un.available[_]}static from(_,E,C){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const{chars:A,padding:R,resolution:I,textureWidth:F,textureHeight:B,...U}=Object.assign({},Un.defaultOptions,C),V=resolveCharacters(A),D=E instanceof TextStyle?E:new TextStyle(E),O=F,L=new BitmapFontData;L.info[0]={face:D.fontFamily,size:D.fontSize},L.common[0]={lineHeight:D.fontSize};let z=0,W=0,X,Y,K,Q=0;const ee=[];for(let ie=0;ie<V.length;ie++){X||(X=settings.ADAPTER.createCanvas(),X.width=F,X.height=B,Y=X.getContext("2d"),K=new BaseTexture(X,{resolution:I,...U}),ee.push(new Texture(K)),L.page.push({id:ee.length-1,file:""}));const re=V[ie],se=TextMetrics.measureText(re,D,!1,X),ne=se.width,oe=Math.ceil(se.height),fe=Math.ceil((D.fontStyle==="italic"?2:1)*ne);if(W>=B-oe*I){if(W===0)throw new Error(`[BitmapFont] textureHeight ${B}px is too small (fontFamily: '${D.fontFamily}', fontSize: ${D.fontSize}px, char: '${re}')`);--ie,X=null,Y=null,K=null,W=0,z=0,Q=0;continue}if(Q=Math.max(oe+se.fontProperties.descent,Q),fe*I+z>=O){if(z===0)throw new Error(`[BitmapFont] textureWidth ${F}px is too small (fontFamily: '${D.fontFamily}', fontSize: ${D.fontSize}px, char: '${re}')`);--ie,W+=Q*I,W=Math.ceil(W),z=0,Q=0;continue}drawGlyph(X,Y,se,z,W,I,D);const he=extractCharCode(se.text);L.char.push({id:he,page:ee.length-1,x:z/I,y:W/I,width:fe,height:oe,xoffset:0,yoffset:0,xadvance:ne-(D.dropShadow?D.dropShadowDistance:0)-(D.stroke?D.strokeThickness:0)}),z+=(fe+2*R)*I,z=Math.ceil(z)}if(!(C!=null&&C.skipKerning))for(let ie=0,re=V.length;ie<re;ie++){const se=V[ie];for(let ne=0;ne<re;ne++){const oe=V[ne],fe=Y.measureText(se).width,he=Y.measureText(oe).width,ge=Y.measureText(se+oe).width-(fe+he);ge&&L.kerning.push({first:extractCharCode(se),second:extractCharCode(oe),amount:ge})}}const J=new Un(L,ee,!0);return Un.available[_]!==void 0&&Un.uninstall(_),Un.available[_]=J,J}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class ph extends Container{constructor(_,E={}){super();const{align:C,tint:A,maxWidth:R,letterSpacing:I,fontName:F,fontSize:B}=Object.assign({},ph.styleDefaults,E);if(!BitmapFont.available[F])throw new Error(`Missing BitmapFont "${F}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=C,this._tintColor=new Color(A),this._font=void 0,this._fontName=F,this._fontSize=B,this.text=_,this._maxWidth=R,this._maxLineHeight=0,this._letterSpacing=I,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var fe;const _=BitmapFont.available[this._fontName],E=this.fontSize,C=E/_.size,A=new Point,R=[],I=[],F=[],B=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",U=splitTextToCharacters(B),V=this._maxWidth*_.size/E,D=_.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let O=null,L=0,z=0,W=0,X=-1,Y=0,K=0,Q=0,ee=0;for(let he=0;he<U.length;he++){const ge=U[he],ye=extractCharCode(ge);if(/(?:\s)/.test(ge)&&(X=he,Y=L,ee++),ge==="\r"||ge===`
`){I.push(L),F.push(-1),z=Math.max(z,L),++W,++K,A.x=0,A.y+=_.lineHeight,O=null,ee=0;continue}const we=_.chars[ye];if(!we)continue;O&&we.kerning[O]&&(A.x+=we.kerning[O]);const le=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};le.texture=we.texture,le.line=W,le.charCode=ye,le.position.x=Math.round(A.x+we.xOffset+this._letterSpacing/2),le.position.y=Math.round(A.y+we.yOffset),le.prevSpaces=ee,R.push(le),L=le.position.x+Math.max(we.xAdvance-we.xOffset,we.texture.orig.width),A.x+=we.xAdvance+this._letterSpacing,Q=Math.max(Q,we.yOffset+we.texture.height),O=ye,X!==-1&&V>0&&A.x>V&&(++K,removeItems(R,1+X-K,1+he-X),he=X,X=-1,I.push(Y),F.push(R.length>0?R[R.length-1].prevSpaces:0),z=Math.max(z,Y),W++,A.x=0,A.y+=_.lineHeight,O=null,ee=0)}const J=U[U.length-1];J!=="\r"&&J!==`
`&&(/(?:\s)/.test(J)&&(L=Y),I.push(L),z=Math.max(z,L),F.push(-1));const ie=[];for(let he=0;he<=W;he++){let ge=0;this._align==="right"?ge=z-I[he]:this._align==="center"?ge=(z-I[he])/2:this._align==="justify"&&(ge=F[he]<0?0:(z-I[he])/F[he]),ie.push(ge)}const re=R.length,se={},ne=[],oe=this._activePagesMeshData;D.push(...oe);for(let he=0;he<re;he++){const ge=R[he].texture,ye=ge.baseTexture.uid;if(!se[ye]){let we=D.pop();if(!we){const de=new MeshGeometry;let ce,ve;_.distanceFieldType==="none"?(ce=new MeshMaterial(Texture.EMPTY),ve=BLEND_MODES.NORMAL):(ce=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),ve=BLEND_MODES.NORMAL_NPM);const be=new Mesh(de,ce);be.blendMode=ve,we={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:be,vertices:null,uvs:null,indices:null}}we.index=0,we.indexCount=0,we.vertexCount=0,we.uvsCount=0,we.total=0;const{_textureCache:le}=this;le[ye]=le[ye]||new Texture(ge.baseTexture),we.mesh.texture=le[ye],we.mesh.tint=this._tintColor.value,ne.push(we),se[ye]=we}se[ye].total++}for(let he=0;he<oe.length;he++)ne.includes(oe[he])||this.removeChild(oe[he].mesh);for(let he=0;he<ne.length;he++)ne[he].mesh.parent!==this&&this.addChild(ne[he].mesh);this._activePagesMeshData=ne;for(const he in se){const ge=se[he],ye=ge.total;if(!(((fe=ge.indices)==null?void 0:fe.length)>6*ye)||ge.vertices.length<Mesh.BATCHABLE_SIZE*2)ge.vertices=new Float32Array(4*2*ye),ge.uvs=new Float32Array(4*2*ye),ge.indices=new Uint16Array(6*ye);else{const we=ge.total,le=ge.vertices;for(let de=we*4*2;de<le.length;de++)le[de]=0}ge.mesh.size=6*ye}for(let he=0;he<re;he++){const ge=R[he];let ye=ge.position.x+ie[ge.line]*(this._align==="justify"?ge.prevSpaces:1);this._roundPixels&&(ye=Math.round(ye));const we=ye*C,le=ge.position.y*C,de=ge.texture,ce=se[de.baseTexture.uid],ve=de.frame,be=de._uvs,me=ce.index++;ce.indices[me*6+0]=0+me*4,ce.indices[me*6+1]=1+me*4,ce.indices[me*6+2]=2+me*4,ce.indices[me*6+3]=0+me*4,ce.indices[me*6+4]=2+me*4,ce.indices[me*6+5]=3+me*4,ce.vertices[me*8+0]=we,ce.vertices[me*8+1]=le,ce.vertices[me*8+2]=we+ve.width*C,ce.vertices[me*8+3]=le,ce.vertices[me*8+4]=we+ve.width*C,ce.vertices[me*8+5]=le+ve.height*C,ce.vertices[me*8+6]=we,ce.vertices[me*8+7]=le+ve.height*C,ce.uvs[me*8+0]=be.x0,ce.uvs[me*8+1]=be.y0,ce.uvs[me*8+2]=be.x1,ce.uvs[me*8+3]=be.y1,ce.uvs[me*8+4]=be.x2,ce.uvs[me*8+5]=be.y2,ce.uvs[me*8+6]=be.x3,ce.uvs[me*8+7]=be.y3}this._textWidth=z*C,this._textHeight=(A.y+_.lineHeight)*C;for(const he in se){const ge=se[he];if(this.anchor.x!==0||this.anchor.y!==0){let de=0;const ce=this._textWidth*this.anchor.x,ve=this._textHeight*this.anchor.y;for(let be=0;be<ge.total;be++)ge.vertices[de++]-=ce,ge.vertices[de++]-=ve,ge.vertices[de++]-=ce,ge.vertices[de++]-=ve,ge.vertices[de++]-=ce,ge.vertices[de++]-=ve,ge.vertices[de++]-=ce,ge.vertices[de++]-=ve}this._maxLineHeight=Q*C;const ye=ge.mesh.geometry.getBuffer("aVertexPosition"),we=ge.mesh.geometry.getBuffer("aTextureCoord"),le=ge.mesh.geometry.getIndex();ye.data=ge.vertices,we.data=ge.uvs,le.data=ge.indices,ye.update(),we.update(),le.update()}for(let he=0;he<R.length;he++)charRenderDataPool.push(R[he]);this._font=_,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0);const{distanceFieldRange:E,distanceFieldType:C,size:A}=BitmapFont.available[this._fontName];if(C!=="none"){const{a:R,b:I,c:F,d:B}=this.worldTransform,U=Math.sqrt(R*R+I*I),V=Math.sqrt(F*F+B*B),D=(Math.abs(U)+Math.abs(V))/2,O=this.fontSize/A,L=_._view.resolution;for(const z of this._activePagesMeshData)z.mesh.shader.uniforms.uFWidth=D*E*O*L}super._render(_)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const _=BitmapFont.available[this._fontName];if(!_)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==_&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(_){if(this.tint!==_){this._tintColor.setValue(_);for(let E=0;E<this._activePagesMeshData.length;E++)this._activePagesMeshData[E].mesh.tint=_}}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.dirty=!0)}get fontName(){return this._fontName}set fontName(_){if(!BitmapFont.available[_])throw new Error(`Missing BitmapFont "${_}"`);this._fontName!==_&&(this._fontName=_,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.dirty=!0)}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(_){this._maxWidth!==_&&(this._maxWidth=_,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(_){_!==this._roundPixels&&(this._roundPixels=_,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}destroy(_){const{_textureCache:E}=this,C=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;C.push(...this._activePagesMeshData);for(const A of this._activePagesMeshData)this.removeChild(A.mesh);this._activePagesMeshData=[],C.filter(A=>E[A.mesh.texture.baseTexture.uid]).forEach(A=>{A.mesh.texture=Texture.EMPTY});for(const A in E)E[A].destroy(),delete E[A];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(_)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(T){return validExtensions.includes(path.extname(T).toLowerCase())},async testParse(T){return TextFormat.test(T)||XMLStringFormat.test(T)},async parse(T,_,E){const C=TextFormat.test(T)?TextFormat.parse(T):XMLStringFormat.parse(T),{src:A}=_,{page:R}=C,I=[];for(let U=0;U<R.length;++U){const V=R[U].file;let D=path.join(path.dirname(A),V);D=copySearchParams(D,A),I.push(D)}const F=await E.load(I),B=I.map(U=>F[U]);return BitmapFont.install(C,B,!0)},async load(T,_){return(await settings.ADAPTER.fetch(T)).text()},unload(T){T.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class us extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(_){return new us(Object.keys(us.defaultOptions).reduce((E,C)=>({...E,[C]:_[C]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(_=>{URL.revokeObjectURL(_.src),_.refs--,_.refs===0&&(_.fontFace&&document.fonts.delete(_.fontFace),delete us.availableFonts[_.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(_,E={}){const{availableFonts:C}=us;if(C[_]){const A=C[_];return this._fonts.push(A),A.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(_).then(A=>A.blob()).then(async A=>new Promise((R,I)=>{const F=URL.createObjectURL(A),B=new FileReader;B.onload=()=>R([F,B.result]),B.onerror=I,B.readAsDataURL(A)})).then(async([A,R])=>{const I=Object.assign({family:path.basename(_,path.extname(_)),weight:"normal",style:"normal",display:"auto",src:A,dataSrc:R,refs:1,originalUrl:_,fontFace:null},E);C[_]=I,this._fonts.push(I),this.styleID++;const F=new FontFace(I.family,`url(${I.src})`,{weight:I.weight,style:I.style,display:I.display});I.fontFace=F,await F.load(),document.fonts.add(F),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(..._){const E=_.filter(C=>!this._overrides.includes(C));E.length>0&&(this._overrides.push(...E),this.styleID++)}removeOverride(..._){const E=_.filter(C=>this._overrides.includes(C));E.length>0&&(this._overrides=this._overrides.filter(C=>!E.includes(C)),this.styleID++)}toCSS(_){return[`transform: scale(${_})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((_,E)=>`${_}
            @font-face {
                font-family: "${E.family}";
                src: url('${E.dataSrc}');
                font-weight: ${E.weight};
                font-style: ${E.style};
                font-display: ${E.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(_){this._stylesheet!==_&&(this._stylesheet=_,this.styleID++)}normalizeColor(_){return Array.isArray(_)&&(_=rgb2hex(_)),typeof _=="number"?hex2string(_):_}dropShadowToCSS(){let _=this.normalizeColor(this.dropShadowColor);const E=this.dropShadowAlpha,C=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),A=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_.startsWith("#")&&E<1&&(_+=(E*255|0).toString(16).padStart(2,"0"));const R=`${C}px ${A}px`;return this.dropShadowBlur>0?`text-shadow: ${R} ${this.dropShadowBlur}px ${_}`:`text-shadow: ${R} ${_}`}reset(){Object.assign(this,us.defaultOptions)}onBeforeDraw(){const{fontsDirty:_}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_?new Promise(E=>setTimeout(E,100)):Promise.resolve()}get isSafari(){const{userAgent:_}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(_)}set fillGradientStops(_){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class cs extends Sprite{constructor(_="",E={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const C=new Image,A=Texture.from(C,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});A.orig=new Rectangle$1,A.trim=new Rectangle$1,this.texture=A;const R="http://www.w3.org/2000/svg",I="http://www.w3.org/1999/xhtml",F=document.createElementNS(R,"svg"),B=document.createElementNS(R,"foreignObject"),U=document.createElementNS(I,"div"),V=document.createElementNS(I,"style");B.setAttribute("width","10000"),B.setAttribute("height","10000"),B.style.overflow="hidden",F.appendChild(B),this.maxWidth=cs.defaultMaxWidth,this.maxHeight=cs.defaultMaxHeight,this._domElement=U,this._styleElement=V,this._svgRoot=F,this._foreignObject=B,this._foreignObject.appendChild(V),this._foreignObject.appendChild(U),this._image=C,this._loadImage=new Image,this._autoResolution=cs.defaultAutoResolution,this._resolution=cs.defaultResolution??settings.RESOLUTION,this.text=_,this.style=E}measureText(_){var V,D;const{text:E,style:C,resolution:A}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_);Object.assign(this._domElement,{innerHTML:E,style:C.toCSS(A)}),this._styleElement.textContent=C.toGlobalCSS(),document.body.appendChild(this._svgRoot);const R=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:I,height:F}=R;(I>this.maxWidth||F>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const B=Math.min(this.maxWidth,Math.ceil(I)),U=Math.min(this.maxHeight,Math.ceil(F));return this._svgRoot.setAttribute("width",B.toString()),this._svgRoot.setAttribute("height",U.toString()),E!==this._text&&(this._domElement.innerHTML=this._text),C!==this._style&&(Object.assign(this._domElement,{style:(V=this._style)==null?void 0:V.toCSS(A)}),this._styleElement.textContent=(D=this._style)==null?void 0:D.toGlobalCSS()),{width:B+C.padding*2,height:U+C.padding*2}}async updateText(_=!0){const{style:E,_image:C,_loadImage:A}=this;if(this.localStyleID!==E.styleID&&(this.dirty=!0,this.localStyleID=E.styleID),!this.dirty&&_)return;const{width:R,height:I}=this.measureText();C.width=A.width=Math.ceil(Math.max(1,R)),C.height=A.height=Math.ceil(Math.max(1,I)),this._updateID++;const F=this._updateID;await new Promise(B=>{A.onload=async()=>{if(F<this._updateID){B();return}await E.onBeforeDraw(),C.src=A.src,A.onload=null,A.src="",this.updateTexture(),B()};const U=new XMLSerializer().serializeToString(this._svgRoot);A.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(U)}`})}get source(){return this._image}updateTexture(){const{style:_,texture:E,_image:C,resolution:A}=this,{padding:R}=_,{baseTexture:I}=E;E.trim.width=E._frame.width=C.width/A,E.trim.height=E._frame.height=C.height/A,E.trim.x=-R,E.trim.y=-R,E.orig.width=E._frame.width-R*2,E.orig.height=E._frame.height-R*2,this._onTextureUpdate(),I.setRealSize(C.width,C.height,A),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}_renderCanvas(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(_)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds(_)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(_){var C,A,R,I,F;typeof _=="boolean"&&(_={children:_}),_=Object.assign({},cs.defaultDestroyOptions,_),super.destroy(_);const E=null;this.ownsStyle&&((C=this._style)==null||C.cleanFonts()),this._style=E,(A=this._svgRoot)==null||A.remove(),this._svgRoot=E,(R=this._domElement)==null||R.remove(),this._domElement=E,(I=this._foreignObject)==null||I.remove(),this._foreignObject=E,(F=this._styleElement)==null||F.remove(),this._styleElement=E,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=E,this._image.src="",this._image=E}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(_){this.updateText(!0);const E=sign(this.scale.x)||1;this.scale.x=E*_/this._image.width/this.resolution,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(_){this.updateText(!0);const E=sign(this.scale.y)||1;this.scale.y=E*_/this._image.height/this.resolution,this._height=_}get style(){return this._style}set style(_){this._style!==_&&(_=_||{},_ instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=_):_ instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(_)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(_)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(_){_=String(_===""||_===null||_===void 0?" ":_),_=this.sanitiseText(_),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}sanitiseText(_){return _.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;var __defProp=Object.defineProperty,__pow=Math.pow,__defNormalProp=(T,_,E)=>_ in T?__defProp(T,_,{enumerable:!0,configurable:!0,writable:!0,value:E}):T[_]=E,__publicField=(T,_,E)=>(__defNormalProp(T,typeof _!="symbol"?_+"":_,E),E),__async=(T,_,E)=>new Promise((C,A)=>{var R=B=>{try{F(E.next(B))}catch(U){A(U)}},I=B=>{try{F(E.throw(B))}catch(U){A(U)}},F=B=>B.done?C(B.value):Promise.resolve(B.value).then(R,I);F((E=E.apply(T,_)).next())});const LOGICAL_WIDTH=2,LOGICAL_HEIGHT=2;var CubismConfig;(T=>{T.supportMoreMaskDivisions=!0,T.setOpacityFromMotion=!1})(CubismConfig||(CubismConfig={}));const config$1={motionFadingDuration:500,idleMotionFadingDuration:2e3,expressionFadingDuration:500},logger={log(T,..._){},warn(T,..._){console.warn(`[${T}]`,..._)},error(T,..._){console.error(`[${T}]`,..._)}};function clamp$1(T,_,E){return T<_?_:T>E?E:T}function rand(T,_){return Math.random()*(_-T)+T}function copyProperty(T,_,E,C,A){const R=_[C];R!==null&&typeof R===T&&(E[A]=R)}function copyArray(T,_,E,C,A){const R=_[C];Array.isArray(R)&&(E[A]=R.filter(I=>I!==null&&typeof I===T))}function applyMixins(T,_){_.forEach(E=>{Object.getOwnPropertyNames(E.prototype).forEach(C=>{C!=="constructor"&&Object.defineProperty(T.prototype,C,Object.getOwnPropertyDescriptor(E.prototype,C))})})}function folderName(T){let _=T.lastIndexOf("/");return _!=-1&&(T=T.slice(0,_)),_=T.lastIndexOf("/"),_!==-1&&(T=T.slice(_+1)),T}function remove$1(T,_){const E=T.indexOf(_);E!==-1&&T.splice(E,1)}class ExpressionManager extends EventEmitter{constructor(_,E){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"expressions",[]),__publicField(this,"defaultExpression"),__publicField(this,"currentExpression"),__publicField(this,"reserveExpressionIndex",-1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`ExpressionManager(${_.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(_){return __async(this,null,function*(){if(!this.definitions[_]){logger.warn(this.tag,`Undefined expression at [${_}]`);return}if(this.expressions[_]===null){logger.warn(this.tag,`Cannot set expression at [${_}] because it's already failed in loading.`);return}if(this.expressions[_])return this.expressions[_];const E=yield this._loadExpression(_);return this.expressions[_]=E,E})}_loadExpression(_){throw new Error("Not implemented.")}setRandomExpression(){return __async(this,null,function*(){if(this.definitions.length){const _=[];for(let E=0;E<this.definitions.length;E++)this.expressions[E]!==null&&this.expressions[E]!==this.currentExpression&&E!==this.reserveExpressionIndex&&_.push(E);if(_.length){const E=Math.floor(Math.random()*_.length);return this.setExpression(E)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(_){return __async(this,null,function*(){if(typeof _!="number"&&(_=this.getExpressionIndex(_)),!(_>-1&&_<this.definitions.length)||_===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=_;const E=yield this.loadExpression(_);return!E||this.reserveExpressionIndex!==_?!1:(this.reserveExpressionIndex=-1,this.currentExpression=E,this._setExpression(E),!0)})}update(_,E){return this.isFinished()?!1:this.updateParameters(_,E)}destroy(){this.destroyed=!0,this.emit("destroy");const _=this;_.definitions=void 0,_.expressions=void 0}}const EPSILON=.01,MAX_SPEED=40/7.5,ACCELERATION_TIME=1/(.15*1e3);class FocusController{constructor(){__publicField(this,"targetX",0),__publicField(this,"targetY",0),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"vx",0),__publicField(this,"vy",0)}focus(_,E,C=!1){this.targetX=clamp$1(_,-1,1),this.targetY=clamp$1(E,-1,1),C&&(this.x=this.targetX,this.y=this.targetY)}update(_){const E=this.targetX-this.x,C=this.targetY-this.y;if(Math.abs(E)<EPSILON&&Math.abs(C)<EPSILON)return;const A=Math.sqrt(__pow(E,2)+__pow(C,2)),R=MAX_SPEED/(1e3/_);let I=R*(E/A)-this.vx,F=R*(C/A)-this.vy;const B=Math.sqrt(__pow(I,2)+__pow(F,2)),U=R*ACCELERATION_TIME*_;B>U&&(I*=U/B,F*=U/B),this.vx+=I,this.vy+=F;const V=Math.sqrt(__pow(this.vx,2)+__pow(this.vy,2)),D=.5*(Math.sqrt(__pow(U,2)+8*U*A)-U);V>D&&(this.vx*=D/V,this.vy*=D/V),this.x+=this.vx,this.y+=this.vy}}class ModelSettings{constructor(_){__publicField(this,"json"),__publicField(this,"name"),__publicField(this,"url"),__publicField(this,"pose"),__publicField(this,"physics"),this.json=_;const E=_.url;if(typeof E!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=E,this.name=folderName(this.url)}resolveURL(_){return url.resolve(this.url,_)}replaceFiles(_){this.moc=_(this.moc,"moc"),this.pose!==void 0&&(this.pose=_(this.pose,"pose")),this.physics!==void 0&&(this.physics=_(this.physics,"physics"));for(let E=0;E<this.textures.length;E++)this.textures[E]=_(this.textures[E],`textures[${E}]`)}getDefinedFiles(){const _=[];return this.replaceFiles(E=>(_.push(E),E)),_}validateFiles(_){const E=(R,I)=>{const F=this.resolveURL(R);if(!_.includes(F)){if(I)throw new Error(`File "${R}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(R=>E(R,!0)),this.getDefinedFiles().filter(R=>E(R,!1))}}var MotionPriority=(T=>(T[T.NONE=0]="NONE",T[T.IDLE=1]="IDLE",T[T.NORMAL=2]="NORMAL",T[T.FORCE=3]="FORCE",T))(MotionPriority||{});class MotionState{constructor(){__publicField(this,"tag"),__publicField(this,"debug",!1),__publicField(this,"currentPriority",0),__publicField(this,"reservePriority",0),__publicField(this,"currentGroup"),__publicField(this,"currentIndex"),__publicField(this,"reservedGroup"),__publicField(this,"reservedIndex"),__publicField(this,"reservedIdleGroup"),__publicField(this,"reservedIdleIndex")}reserve(_,E,C){if(C<=0)return logger.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(_===this.currentGroup&&E===this.currentIndex)return logger.log(this.tag,"Motion is already playing.",this.dump(_,E)),!1;if(_===this.reservedGroup&&E===this.reservedIndex||_===this.reservedIdleGroup&&E===this.reservedIdleIndex)return logger.log(this.tag,"Motion is already reserved.",this.dump(_,E)),!1;if(C===1){if(this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(_,E)),!1;if(this.reservedIdleGroup!==void 0)return logger.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(_,E)),!1;this.setReservedIdle(_,E)}else{if(C<3){if(C<=this.currentPriority)return logger.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(_,E)),!1;if(C<=this.reservePriority)return logger.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(_,E)),!1}this.setReserved(_,E,C)}return!0}start(_,E,C,A){if(A===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(E,C)),!1}else{if(E!==this.reservedGroup||C!==this.reservedIndex)return logger.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(E,C)),!1;this.setReserved(void 0,void 0,0)}return _?(this.setCurrent(E,C,A),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(_,E,C){this.currentPriority=C,this.currentGroup=_,this.currentIndex=E}setReserved(_,E,C){this.reservePriority=C,this.reservedGroup=_,this.reservedIndex=E}setReservedIdle(_,E){this.reservedIdleGroup=_,this.reservedIdleIndex=E}isActive(_,E){return _===this.currentGroup&&E===this.currentIndex||_===this.reservedGroup&&E===this.reservedIndex||_===this.reservedIdleGroup&&E===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!1}dump(_,E){if(this.debug){const C=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${_}", index = ${E}
`+C.map(A=>"["+A+"] "+this[A]).join(`
`)}return""}}const TAG$2="SoundManager",VOLUME=.5;class SoundManager{static get volume(){return this._volume}static set volume(_){this._volume=(_>1?1:_<0?0:_)||0,this.audios.forEach(E=>E.volume=this._volume)}static add(_,E,C,A){const R=new Audio(_);return R.volume=this._volume,R.preload="auto",R.crossOrigin=A,R.addEventListener("ended",()=>{this.dispose(R),E==null||E()}),R.addEventListener("error",I=>{this.dispose(R),logger.warn(TAG$2,`Error occurred on "${_}"`,I.error),C==null||C(I.error)}),this.audios.push(R),R}static play(_){return new Promise((E,C)=>{var A;(A=_.play())==null||A.catch(R=>{_.dispatchEvent(new ErrorEvent("error",{error:R})),C(R)}),_.readyState===_.HAVE_ENOUGH_DATA?E():_.addEventListener("canplaythrough",E)})}static addContext(_){const E=new AudioContext;return this.contexts.push(E),E}static addAnalyzer(_,E){const C=E.createMediaElementSource(_),A=E.createAnalyser();return A.fftSize=256,A.minDecibels=-90,A.maxDecibels=-10,A.smoothingTimeConstant=.85,C.connect(A),A.connect(E.destination),this.analysers.push(A),A}static analyze(_){if(_!=null){const E=new Float32Array(_.fftSize);let C=0;_.getFloatTimeDomainData(E);for(const A of E)C+=A*A;return parseFloat(Math.sqrt(C/E.length*20).toFixed(1))}else return parseFloat(Math.random().toFixed(1))}static dispose(_){_.pause(),_.removeAttribute("src"),remove$1(this.audios,_)}static destroy(){for(let _=this.contexts.length-1;_>=0;_--)this.contexts[_].close();for(let _=this.audios.length-1;_>=0;_--)this.dispose(this.audios[_])}}__publicField(SoundManager,"audios",[]);__publicField(SoundManager,"analysers",[]);__publicField(SoundManager,"contexts",[]);__publicField(SoundManager,"_volume",VOLUME);var MotionPreloadStrategy=(T=>(T.ALL="ALL",T.IDLE="IDLE",T.NONE="NONE",T))(MotionPreloadStrategy||{});class MotionManager extends EventEmitter{constructor(_,E){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"motionGroups",{}),__publicField(this,"state",new MotionState),__publicField(this,"currentAudio"),__publicField(this,"currentAnalyzer"),__publicField(this,"currentContext"),__publicField(this,"playing",!1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`MotionManager(${_.name})`,this.state.tag=this.tag}init(_){_!=null&&_.idleMotionGroup&&(this.groups.idle=_.idleMotionGroup),this.setupMotions(_),this.stopAllMotions()}setupMotions(_){for(const C of Object.keys(this.definitions))this.motionGroups[C]=[];let E;switch(_==null?void 0:_.motionPreload){case"NONE":return;case"ALL":E=Object.keys(this.definitions);break;case"IDLE":default:E=[this.groups.idle];break}for(const C of E)if(this.definitions[C])for(let A=0;A<this.definitions[C].length;A++)this.loadMotion(C,A).then()}loadMotion(_,E){return __async(this,null,function*(){var C;if(!((C=this.definitions[_])!=null&&C[E])){logger.warn(this.tag,`Undefined motion at "${_}"[${E}]`);return}if(this.motionGroups[_][E]===null){logger.warn(this.tag,`Cannot start motion at "${_}"[${E}] because it's already failed in loading.`);return}if(this.motionGroups[_][E])return this.motionGroups[_][E];const A=yield this._loadMotion(_,E);if(!this.destroyed)return this.motionGroups[_][E]=A??null,A})}_loadMotion(_,E){throw new Error("Not implemented.")}speak(_){return __async(this,arguments,function*(E,{volume:C=VOLUME,expression:A,resetExpression:R=!0,crossOrigin:I,onFinish:F,onError:B}={}){let U,V,D;if(this.currentAudio&&!this.currentAudio.ended)return!1;let O;const L=E&&E.startsWith("data:");if(console.log(F),E&&!L){const W=document.createElement("a");W.href=E,E=W.href,O=E}else O="data:audio/";const z=E;if(z)try{U=SoundManager.add(z,(W=this)=>{console.log("Audio finished playing"),F==null||F(),R&&A&&W.expressionManager&&W.expressionManager.resetExpression(),W.currentAudio=void 0},(W,X=this)=>{console.log("Error during audio playback:",W),B==null||B(W),R&&A&&X.expressionManager&&X.expressionManager.resetExpression(),X.currentAudio=void 0},I),this.currentAudio=U,SoundManager.volume=C,D=SoundManager.addContext(this.currentAudio),this.currentContext=D,V=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=V}catch(W){return logger.warn(this.tag,"Failed to create audio",O,W),!1}if(U){let W=!0;if(yield SoundManager.play(U).catch(Y=>{logger.warn(this.tag,"Failed to play audio",U.src,Y),W=!1}),!W)return!1}return this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),A&&this.expressionManager&&this.expressionManager.setExpression(A),this.playing=!0,!0})}startMotion(_,E){return __async(this,arguments,function*(C,A,R=MotionPriority.NORMAL,{sound:I=void 0,volume:F=VOLUME,expression:B=void 0,resetExpression:U=!0,crossOrigin:V,onFinish:D,onError:O}={}){var L;if(!this.state.reserve(C,A,R)||this.currentAudio&&!this.currentAudio.ended&&R!=MotionPriority.FORCE)return!1;const z=(L=this.definitions[C])==null?void 0:L[A];if(!z)return!1;this.currentAudio&&SoundManager.dispose(this.currentAudio);let W,X,Y,K;const Q=I&&I.startsWith("data:");if(I&&!Q){const ie=document.createElement("a");ie.href=I,I=ie.href,K=I}else K=this.getSoundFile(z),K&&(K=this.settings.resolveURL(K));const ee=K;if(ee)try{W=SoundManager.add(ee,(ie=this)=>{console.log("Audio finished playing"),D==null||D(),console.log(D),U&&B&&ie.expressionManager&&ie.expressionManager.resetExpression(),ie.currentAudio=void 0},(ie,re=this)=>{console.log("Error during audio playback:",ie),O==null||O(ie),U&&B&&re.expressionManager&&re.expressionManager.resetExpression(),re.currentAudio=void 0},V),this.currentAudio=W,SoundManager.volume=F,Y=SoundManager.addContext(this.currentAudio),this.currentContext=Y,X=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=X}catch(ie){logger.warn(this.tag,"Failed to create audio",K,ie)}const J=yield this.loadMotion(C,A);return W&&(yield SoundManager.play(W).catch(re=>logger.warn(this.tag,"Failed to play audio",W.src,re))),this.state.start(J,C,A,R)?(this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),logger.log(this.tag,"Start motion:",this.getMotionName(z)),this.emit("motionStart",C,A,W),B&&this.expressionManager&&this.state.shouldOverrideExpression()&&this.expressionManager.setExpression(B),this.playing=!0,this._startMotion(J),!0):(W&&(SoundManager.dispose(W),this.currentAudio=void 0),!1)})}startRandomMotion(_,E){return __async(this,arguments,function*(C,A,{sound:R,volume:I=VOLUME,expression:F,resetExpression:B=!0,crossOrigin:U,onFinish:V,onError:D}={}){const O=this.definitions[C];if(O!=null&&O.length){const L=[];for(let z=0;z<O.length;z++)this.motionGroups[C][z]!==null&&!this.state.isActive(C,z)&&L.push(z);if(L.length){const z=L[Math.floor(Math.random()*L.length)];return this.startMotion(C,z,A,{sound:R,volume:I,expression:F,resetExpression:B,crossOrigin:U,onFinish:V,onError:D})}}return!1})}stopSpeaking(){this.currentAudio&&(SoundManager.dispose(this.currentAudio),this.currentAudio=void 0)}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.stopSpeaking()}update(_,E){var C;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((C=this.expressionManager)==null||C.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,MotionPriority.IDLE)),this.updateParameters(_,E)}mouthSync(){return this.currentAnalyzer?SoundManager.analyze(this.currentAnalyzer):0}destroy(){var _;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(_=this.expressionManager)==null||_.destroy();const E=this;E.definitions=void 0,E.motionGroups=void 0}}const tempBounds={x:0,y:0,width:0,height:0};class InternalModel extends EventEmitter{constructor(){super(...arguments),__publicField(this,"focusController",new FocusController),__publicField(this,"pose"),__publicField(this,"physics"),__publicField(this,"originalWidth",0),__publicField(this,"originalHeight",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"localTransform",new Matrix),__publicField(this,"drawingMatrix",new Matrix),__publicField(this,"hitAreas",{}),__publicField(this,"textureFlipY",!1),__publicField(this,"viewport",[0,0,0,0]),__publicField(this,"destroyed",!1)}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const _=this,E=this.getSize();_.originalWidth=E[0],_.originalHeight=E[1];const C=Object.assign({width:LOGICAL_WIDTH,height:LOGICAL_HEIGHT},this.getLayout());this.localTransform.scale(C.width/LOGICAL_WIDTH,C.height/LOGICAL_HEIGHT),_.width=this.originalWidth*this.localTransform.a,_.height=this.originalHeight*this.localTransform.d;const A=C.x!==void 0&&C.x-C.width/2||C.centerX!==void 0&&C.centerX||C.left!==void 0&&C.left-C.width/2||C.right!==void 0&&C.right+C.width/2||0,R=C.y!==void 0&&C.y-C.height/2||C.centerY!==void 0&&C.centerY||C.top!==void 0&&C.top-C.height/2||C.bottom!==void 0&&C.bottom+C.height/2||0;this.localTransform.translate(this.width*A,-this.height*R)}setupHitAreas(){const _=this.getHitAreaDefs().filter(E=>E.index>=0);for(const E of _)this.hitAreas[E.name]=E}hitTest(_,E){return Object.keys(this.hitAreas).filter(C=>this.isHit(C,_,E))}isHit(_,E,C){if(!this.hitAreas[_])return!1;const A=this.hitAreas[_].index,R=this.getDrawableBounds(A,tempBounds);return R.x<=E&&E<=R.x+R.width&&R.y<=C&&C<=R.y+R.height}getDrawableBounds(_,E){const C=this.getDrawableVertices(_);let A=C[0],R=C[0],I=C[1],F=C[1];for(let B=0;B<C.length;B+=2){const U=C[B],V=C[B+1];A=Math.min(U,A),R=Math.max(U,R),I=Math.min(V,I),F=Math.max(V,F)}return E??(E={}),E.x=A,E.y=I,E.width=R-A,E.height=F-I,E}updateTransform(_){this.drawingMatrix.copyFrom(_).append(this.localTransform)}update(_,E){this.focusController.update(_)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const TAG$1="XHRLoader";class NetworkError extends Error{constructor(_,E,C,A=!1){super(_),this.url=E,this.status=C,this.aborted=A}}const _XHRLoader=class Qr{static createXHR(_,E,C,A,R){const I=new XMLHttpRequest;if(Qr.allXhrSet.add(I),_){let F=Qr.xhrMap.get(_);F?F.add(I):(F=new Set([I]),Qr.xhrMap.set(_,F)),_.listeners("destroy").includes(Qr.cancelXHRs)||_.once("destroy",Qr.cancelXHRs)}return I.open("GET",E),I.responseType=C,I.onload=()=>{(I.status===200||I.status===0)&&I.response?A(I.response):I.onerror()},I.onerror=()=>{logger.warn(TAG$1,`Failed to load resource as ${I.responseType} (Status ${I.status}): ${E}`),R(new NetworkError("Network error.",E,I.status))},I.onabort=()=>R(new NetworkError("Aborted.",E,I.status,!0)),I.onloadend=()=>{var F;Qr.allXhrSet.delete(I),_&&((F=Qr.xhrMap.get(_))==null||F.delete(I))},I}static cancelXHRs(){var _;(_=Qr.xhrMap.get(this))==null||_.forEach(E=>{E.abort(),Qr.allXhrSet.delete(E)}),Qr.xhrMap.delete(this)}static release(){Qr.allXhrSet.forEach(_=>_.abort()),Qr.allXhrSet.clear(),Qr.xhrMap=new WeakMap}};__publicField(_XHRLoader,"xhrMap",new WeakMap);__publicField(_XHRLoader,"allXhrSet",new Set);__publicField(_XHRLoader,"loader",(T,_)=>new Promise((E,C)=>{_XHRLoader.createXHR(T.target,T.settings?T.settings.resolveURL(T.url):T.url,T.type,R=>{T.result=R,E()},C).send()}));let XHRLoader=_XHRLoader;function runMiddlewares(T,_){let E=-1;return C(0);function C(A,R){if(R)return Promise.reject(R);if(A<=E)return Promise.reject(new Error("next() called multiple times"));E=A;const I=T[A];if(!I)return Promise.resolve();try{return Promise.resolve(I(_,C.bind(null,A+1)))}catch(F){return Promise.reject(F)}}}class Live2DLoader{static load(_){return runMiddlewares(this.middlewares,_).then(()=>_.result)}}__publicField(Live2DLoader,"middlewares",[XHRLoader.loader]);function createTexture(T,_={}){var E;const C={resourceOptions:{crossorigin:_.crossOrigin}};if(Texture.fromURL)return Texture.fromURL(T,C).catch(I=>{if(I instanceof Error)throw I;const F=new Error("Texture loading error");throw F.event=I,F});C.resourceOptions.autoLoad=!1;const A=Texture.from(T,C);if(A.baseTexture.valid)return Promise.resolve(A);const R=A.baseTexture.resource;return(E=R._live2d_load)!=null||(R._live2d_load=new Promise((I,F)=>{const B=U=>{R.source.removeEventListener("error",B);const V=new Error("Texture loading error");V.event=U,F(V)};R.source.addEventListener("error",B),R.load().then(()=>I(A)).catch(B)})),R._live2d_load}function noop$2(){}const TAG="Live2DFactory",urlToJSON=(T,_)=>__async(void 0,null,function*(){if(typeof T.source=="string"){const E=yield Live2DLoader.load({url:T.source,type:"json",target:T.live2dModel});E.url=T.source,T.source=E,T.live2dModel.emit("settingsJSONLoaded",E)}return _()}),jsonToSettings=(T,_)=>__async(void 0,null,function*(){if(T.source instanceof ModelSettings)return T.settings=T.source,_();if(typeof T.source=="object"){const E=Live2DFactory.findRuntime(T.source);if(E){const C=E.createModelSettings(T.source);return T.settings=C,T.live2dModel.emit("settingsLoaded",C),_()}}throw new TypeError("Unknown settings format.")}),waitUntilReady=(T,_)=>{if(T.settings){const E=Live2DFactory.findRuntime(T.settings);if(E)return E.ready().then(_)}return _()},setupOptionals=(T,_)=>__async(void 0,null,function*(){yield _();const E=T.internalModel;if(E){const C=T.settings,A=Live2DFactory.findRuntime(C);if(A){const R=[];C.pose&&R.push(Live2DLoader.load({settings:C,url:C.pose,type:"json",target:E}).then(I=>{E.pose=A.createPose(E.coreModel,I),T.live2dModel.emit("poseLoaded",E.pose)}).catch(I=>{T.live2dModel.emit("poseLoadError",I),logger.warn(TAG,"Failed to load pose.",I)})),C.physics&&R.push(Live2DLoader.load({settings:C,url:C.physics,type:"json",target:E}).then(I=>{E.physics=A.createPhysics(E.coreModel,I),T.live2dModel.emit("physicsLoaded",E.physics)}).catch(I=>{T.live2dModel.emit("physicsLoadError",I),logger.warn(TAG,"Failed to load physics.",I)})),R.length&&(yield Promise.all(R))}}}),setupEssentials=(T,_)=>__async(void 0,null,function*(){if(T.settings){const E=T.live2dModel,C=Promise.all(T.settings.textures.map(A=>{const R=T.settings.resolveURL(A);return createTexture(R,{crossOrigin:T.options.crossOrigin})}));if(C.catch(noop$2),yield _(),T.internalModel)E.internalModel=T.internalModel,E.emit("modelLoaded",T.internalModel);else throw new TypeError("Missing internal model.");E.textures=yield C,E.emit("textureLoaded",E.textures)}else throw new TypeError("Missing settings.")}),createInternalModel=(T,_)=>__async(void 0,null,function*(){const E=T.settings;if(E instanceof ModelSettings){const C=Live2DFactory.findRuntime(E);if(!C)throw new TypeError("Unknown model settings.");const A=yield Live2DLoader.load({settings:E,url:E.moc,type:"arraybuffer",target:T.live2dModel});if(!C.isValidMoc(A))throw new Error("Invalid moc data");const R=C.createCoreModel(A);return T.internalModel=C.createInternalModel(R,E,T.options),_()}throw new TypeError("Missing settings.")}),_ZipLoader=class ds{static unzip(_,E){return __async(this,null,function*(){const C=yield ds.getFilePaths(_),A=[];for(const I of E.getDefinedFiles()){const F=decodeURI(url.resolve(E.url,I));C.includes(F)&&A.push(F)}const R=yield ds.getFiles(_,A);for(let I=0;I<R.length;I++){const F=A[I],B=R[I];Object.defineProperty(B,"webkitRelativePath",{value:F})}return R})}static createSettings(_){return __async(this,null,function*(){const C=(yield ds.getFilePaths(_)).find(F=>F.endsWith("model.json")||F.endsWith("model3.json"));if(!C)throw new Error("Settings file not found");const A=yield ds.readText(_,C);if(!A)throw new Error("Empty settings file: "+C);const R=JSON.parse(A);R.url=C;const I=ds.live2dFactory.findRuntime(R);if(!I)throw new Error("Unknown settings JSON");return I.createModelSettings(R)})}static zipReader(_,E){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(_){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFiles(_,E){return __async(this,null,function*(){throw new Error("Not implemented")})}static readText(_,E){return __async(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(_){}};__publicField(_ZipLoader,"live2dFactory");__publicField(_ZipLoader,"ZIP_PROTOCOL","zip://");__publicField(_ZipLoader,"uid",0);__publicField(_ZipLoader,"factory",(T,_)=>__async(_ZipLoader,null,function*(){const E=T.source;let C,A,R;if(typeof E=="string"&&(E.endsWith(".zip")||E.startsWith(_ZipLoader.ZIP_PROTOCOL))?(E.startsWith(_ZipLoader.ZIP_PROTOCOL)?C=E.slice(_ZipLoader.ZIP_PROTOCOL.length):C=E,A=yield Live2DLoader.load({url:C,type:"blob",target:T.live2dModel})):Array.isArray(E)&&E.length===1&&E[0]instanceof File&&E[0].name.endsWith(".zip")&&(A=E[0],C=URL.createObjectURL(A),R=E.settings),A){if(!A.size)throw new Error("Empty zip file");const I=yield _ZipLoader.zipReader(A,C);R||(R=yield _ZipLoader.createSettings(I)),R._objectURL=_ZipLoader.ZIP_PROTOCOL+_ZipLoader.uid+"/"+R.url;const F=yield _ZipLoader.unzip(I,R);F.settings=R,T.source=F,C.startsWith("blob:")&&T.live2dModel.once("modelLoaded",B=>{B.once("destroy",function(){URL.revokeObjectURL(C)})}),_ZipLoader.releaseReader(I)}return _()}));let ZipLoader=_ZipLoader;const _FileLoader=class ia{static resolveURL(_,E){var C;const A=(C=ia.filesMap[_])==null?void 0:C[E];if(A===void 0)throw new Error("Cannot find this file from uploaded files: "+E);return A}static upload(_,E){return __async(this,null,function*(){const C={};for(const A of E.getDefinedFiles()){const R=decodeURI(url.resolve(E.url,A)),I=_.find(F=>F.webkitRelativePath===R);I&&(C[A]=URL.createObjectURL(I))}ia.filesMap[E._objectURL]=C})}static createSettings(_){return __async(this,null,function*(){const E=_.find(F=>F.name.endsWith("model.json")||F.name.endsWith("model3.json"));if(!E)throw new TypeError("Settings file not found");const C=yield ia.readText(E),A=JSON.parse(C);A.url=E.webkitRelativePath;const R=Live2DFactory.findRuntime(A);if(!R)throw new Error("Unknown settings JSON");const I=R.createModelSettings(A);return I._objectURL=URL.createObjectURL(E),I})}static readText(_){return __async(this,null,function*(){return new Promise((E,C)=>{const A=new FileReader;A.onload=()=>E(A.result),A.onerror=C,A.readAsText(_,"utf8")})})}};__publicField(_FileLoader,"live2dFactory");__publicField(_FileLoader,"filesMap",{});__publicField(_FileLoader,"factory",(T,_)=>__async(_FileLoader,null,function*(){if(Array.isArray(T.source)&&T.source[0]instanceof File){const E=T.source;let C=E.settings;if(!C)C=yield _FileLoader.createSettings(E);else if(!C._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');C.validateFiles(E.map(A=>encodeURI(A.webkitRelativePath))),yield _FileLoader.upload(E,C),C.resolveURL=function(A){return _FileLoader.resolveURL(this._objectURL,A)},T.source=C,T.live2dModel.once("modelLoaded",A=>{A.once("destroy",function(){const R=this.settings._objectURL;if(URL.revokeObjectURL(R),_FileLoader.filesMap[R])for(const I of Object.values(_FileLoader.filesMap[R]))URL.revokeObjectURL(I);delete _FileLoader.filesMap[R]})})}return _()}));let FileLoader=_FileLoader;const _Live2DFactory=class Tr{static registerRuntime(_){Tr.runtimes.push(_),Tr.runtimes.sort((E,C)=>C.version-E.version)}static findRuntime(_){for(const E of Tr.runtimes)if(E.test(_))return E}static setupLive2DModel(_,E,C){return __async(this,null,function*(){const A=new Promise(F=>_.once("textureLoaded",F)),R=new Promise(F=>_.once("modelLoaded",F)),I=Promise.all([A,R]).then(()=>_.emit("ready"));yield runMiddlewares(Tr.live2DModelMiddlewares,{live2dModel:_,source:E,options:C||{}}),yield I,_.emit("load")})}static loadMotion(_,E,C){var A,R;const I=F=>_.emit("motionLoadError",E,C,F);try{const F=(A=_.definitions[E])==null?void 0:A[C];if(!F)return Promise.resolve(void 0);_.listeners("destroy").includes(Tr.releaseTasks)||_.once("destroy",Tr.releaseTasks);let B=Tr.motionTasksMap.get(_);B||(B={},Tr.motionTasksMap.set(_,B));let U=B[E];U||(U=[],B[E]=U);const V=_.getMotionFile(F);return(R=U[C])!=null||(U[C]=Live2DLoader.load({url:V,settings:_.settings,type:_.motionDataType,target:_}).then(D=>{var O;const L=(O=Tr.motionTasksMap.get(_))==null?void 0:O[E];L&&delete L[C];const z=_.createMotion(D,E,F);return _.emit("motionLoaded",E,C,z),z}).catch(D=>{logger.warn(_.tag,`Failed to load motion: ${V}
`,D),I(D)})),U[C]}catch(F){logger.warn(_.tag,`Failed to load motion at "${E}"[${C}]
`,F),I(F)}return Promise.resolve(void 0)}static loadExpression(_,E){var C;const A=R=>_.emit("expressionLoadError",E,R);try{const R=_.definitions[E];if(!R)return Promise.resolve(void 0);_.listeners("destroy").includes(Tr.releaseTasks)||_.once("destroy",Tr.releaseTasks);let I=Tr.expressionTasksMap.get(_);I||(I=[],Tr.expressionTasksMap.set(_,I));const F=_.getExpressionFile(R);return(C=I[E])!=null||(I[E]=Live2DLoader.load({url:F,settings:_.settings,type:"json",target:_}).then(B=>{const U=Tr.expressionTasksMap.get(_);U&&delete U[E];const V=_.createExpression(B,R);return _.emit("expressionLoaded",E,V),V}).catch(B=>{logger.warn(_.tag,`Failed to load expression: ${F}
`,B),A(B)})),I[E]}catch(R){logger.warn(_.tag,`Failed to load expression at [${E}]
`,R),A(R)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof MotionManager?Tr.motionTasksMap.delete(this):Tr.expressionTasksMap.delete(this)}};__publicField(_Live2DFactory,"runtimes",[]);__publicField(_Live2DFactory,"urlToJSON",urlToJSON);__publicField(_Live2DFactory,"jsonToSettings",jsonToSettings);__publicField(_Live2DFactory,"waitUntilReady",waitUntilReady);__publicField(_Live2DFactory,"setupOptionals",setupOptionals);__publicField(_Live2DFactory,"setupEssentials",setupEssentials);__publicField(_Live2DFactory,"createInternalModel",createInternalModel);__publicField(_Live2DFactory,"live2DModelMiddlewares",[ZipLoader.factory,FileLoader.factory,urlToJSON,jsonToSettings,waitUntilReady,setupOptionals,setupEssentials,createInternalModel]);__publicField(_Live2DFactory,"motionTasksMap",new WeakMap);__publicField(_Live2DFactory,"expressionTasksMap",new WeakMap);let Live2DFactory=_Live2DFactory;MotionManager.prototype._loadMotion=function(T,_){return Live2DFactory.loadMotion(this,T,_)};ExpressionManager.prototype._loadExpression=function(T){return Live2DFactory.loadExpression(this,T)};FileLoader.live2dFactory=Live2DFactory;ZipLoader.live2dFactory=Live2DFactory;const _Automator=class jl{constructor(_,{autoUpdate:E=!0,autoHitTest:C=!0,autoFocus:A=!0,autoInteract:R,ticker:I}={}){__publicField(this,"model"),__publicField(this,"destroyed",!1),__publicField(this,"_ticker"),__publicField(this,"_autoUpdate",!1),__publicField(this,"_autoHitTest",!1),__publicField(this,"_autoFocus",!1),I||(jl.defaultTicker?I=jl.defaultTicker:typeof PIXI<"u"&&(I=PIXI.Ticker.shared)),R!==void 0&&(C=R,A=R,logger.warn(_.tag,"options.autoInteract is deprecated since v0.5.0, use autoHitTest and autoFocus instead.")),this.model=_,this.ticker=I,this.autoUpdate=E,this.autoHitTest=C,this.autoFocus=A,(C||A)&&(this.model.eventMode="static")}get ticker(){return this._ticker}set ticker(_){var E;this._ticker&&this._ticker.remove(onTickerUpdate,this),this._ticker=_,this._autoUpdate&&((E=this._ticker)==null||E.add(onTickerUpdate,this))}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){var E;this.destroyed||(_?this._ticker?(this._ticker.add(onTickerUpdate,this),this._autoUpdate=!0):logger.warn(this.model.tag,"No Ticker to be used for automatic updates. Either set option.ticker when creating Live2DModel, or expose PIXI to global scope (window.PIXI = PIXI)."):((E=this._ticker)==null||E.remove(onTickerUpdate,this),this._autoUpdate=!1))}get autoHitTest(){return this._autoHitTest}set autoHitTest(_){_!==this.autoHitTest&&(_?this.model.on("pointertap",onTap,this):this.model.off("pointertap",onTap,this),this._autoHitTest=_)}get autoFocus(){return this._autoFocus}set autoFocus(_){_!==this.autoFocus&&(_?this.model.on("globalpointermove",onPointerMove,this):this.model.off("globalpointermove",onPointerMove,this),this._autoFocus=_)}get autoInteract(){return this._autoHitTest&&this._autoFocus}set autoInteract(_){this.autoHitTest=_,this.autoFocus=_}onTickerUpdate(){const _=this.ticker.deltaMS;this.model.update(_)}onTap(_){this.model.tap(_.global.x,_.global.y)}onPointerMove(_){this.model.focus(_.global.x,_.global.y)}destroy(){this.autoFocus=!1,this.autoHitTest=!1,this.autoUpdate=!1,this.ticker=void 0,this.destroyed=!0}};__publicField(_Automator,"defaultTicker");let Automator=_Automator;function onTickerUpdate(){this.onTickerUpdate()}function onTap(T){this.onTap(T)}function onPointerMove(T){this.onPointerMove(T)}class Live2DTransform extends Transform{}const tempPoint=new Point,tempMatrix$1=new Matrix;class Live2DModel extends Container{constructor(_){super(),__publicField(this,"tag","Live2DModel(uninitialized)"),__publicField(this,"internalModel"),__publicField(this,"textures",[]),__publicField(this,"transform",new Live2DTransform),__publicField(this,"anchor",new ObservablePoint(this.onAnchorChange,this,0,0)),__publicField(this,"glContextID",-1),__publicField(this,"elapsedTime",0),__publicField(this,"deltaTime",0),__publicField(this,"automator"),this.automator=new Automator(this,_),this.once("modelLoaded",()=>this.init(_))}static from(_,E){const C=new this(E);return Live2DFactory.setupLive2DModel(C,_,E).then(()=>C)}static fromSync(_,E){const C=new this(E);return Live2DFactory.setupLive2DModel(C,_,E).then(E==null?void 0:E.onLoad).catch(E==null?void 0:E.onError),C}static registerTicker(_){Automator.defaultTicker=_.shared}init(_){this.tag=`Live2DModel(${this.internalModel.settings.name})`}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(_,E,C,{sound:A=void 0,volume:R=VOLUME,expression:I=void 0,resetExpression:F=!0,crossOrigin:B,onFinish:U,onError:V}={}){return E===void 0?this.internalModel.motionManager.startRandomMotion(_,C,{sound:A,volume:R,expression:I,resetExpression:F,crossOrigin:B,onFinish:U,onError:V}):this.internalModel.motionManager.startMotion(_,E,C,{sound:A,volume:R,expression:I,resetExpression:F,crossOrigin:B,onFinish:U,onError:V})}stopMotions(){return this.internalModel.motionManager.stopAllMotions()}speak(_,{volume:E=VOLUME,expression:C,resetExpression:A=!0,crossOrigin:R,onFinish:I,onError:F}={}){return this.internalModel.motionManager.speak(_,{volume:E,expression:C,resetExpression:A,crossOrigin:R,onFinish:I,onError:F})}stopSpeaking(){return this.internalModel.motionManager.stopSpeaking()}expression(_){return this.internalModel.motionManager.expressionManager?_===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(_):Promise.resolve(!1)}focus(_,E,C=!1){tempPoint.x=_,tempPoint.y=E,this.toModelPosition(tempPoint,tempPoint,!0);const A=tempPoint.x/this.internalModel.originalWidth*2-1,R=tempPoint.y/this.internalModel.originalHeight*2-1,I=Math.atan2(R,A);this.internalModel.focusController.focus(Math.cos(I),-Math.sin(I),C)}tap(_,E){const C=this.hitTest(_,E);C.length&&(logger.log(this.tag,"Hit",C),this.emit("hit",C))}hitTest(_,E){return tempPoint.x=_,tempPoint.y=E,this.toModelPosition(tempPoint,tempPoint),this.internalModel.hitTest(tempPoint.x,tempPoint.y)}toModelPosition(_,E=_.clone(),C){return C||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(_,E),this.internalModel.localTransform.applyInverse(E,E),E}containsPoint(_){return this.getBounds(!0).contains(_.x,_.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}update(_){this.deltaTime+=_,this.elapsedTime+=_}_render(_){_.batch.reset(),_.geometry.reset(),_.shader.reset(),_.state.reset();let E=!1;this.glContextID!==_.CONTEXT_UID&&(this.glContextID=_.CONTEXT_UID,this.internalModel.updateWebGLContext(_.gl,this.glContextID),E=!0);for(let R=0;R<this.textures.length;R++){const I=this.textures[R];I.valid&&((E||!I.baseTexture._glTextures[this.glContextID])&&(_.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),_.texture.bind(I.baseTexture,0)),this.internalModel.bindTexture(R,I.baseTexture._glTextures[this.glContextID].texture),I.baseTexture.touched=_.textureGC.count)}const C=_.framebuffer.viewport;this.internalModel.viewport=[C.x,C.y,C.width,C.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const A=tempMatrix$1.copyFrom(_.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(A),this.internalModel.draw(_.gl),_.state.reset(),_.texture.reset()}destroy(_){this.emit("destroy"),_!=null&&_.texture&&this.textures.forEach(E=>E.destroy(_.baseTexture)),this.automator.destroy(),this.internalModel.destroy(),super.destroy(_)}}if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const originalUpdateParam=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(T,_){originalUpdateParam.call(this,T,_),_.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Live2DExpression extends AMotion{constructor(_){super(),__publicField(this,"params",[]),this.setFadeIn(_.fade_in>0?_.fade_in:config$1.expressionFadingDuration),this.setFadeOut(_.fade_out>0?_.fade_out:config$1.expressionFadingDuration),Array.isArray(_.params)&&_.params.forEach(E=>{const C=E.calc||"add";if(C==="add"){const A=E.def||0;E.val-=A}else if(C==="mult"){const A=E.def||1;E.val/=A}this.params.push({calc:C,val:E.val,id:E.id})})}updateParamExe(_,E,C,A){this.params.forEach(R=>{_.setParamFloat(R.id,R.val*C)})}}class Cubism2ExpressionManager extends ExpressionManager{constructor(_,E){var C;super(_,E),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"definitions"),this.definitions=(C=this.settings.expressions)!=null?C:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(E=>E.name===_)}getExpressionFile(_){return _.file}createExpression(_,E){return new Live2DExpression(_)}_setExpression(_){return this.queueManager.startMotion(_)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,E){return this.queueManager.updateParam(_)}}class Cubism2MotionManager extends MotionManager{constructor(_,E){super(_,E),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"idle"}),__publicField(this,"motionDataType","arraybuffer"),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"lipSyncIds"),__publicField(this,"expressionManager"),this.definitions=this.settings.motions,this.init(E),this.lipSyncIds=["PARAM_MOUTH_OPEN_Y"]}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism2ExpressionManager(this.settings,_))}isFinished(){return this.queueManager.isFinished()}createMotion(_,E,C){const A=Live2DMotion.loadMotion(_),R=E===this.groups.idle?config$1.idleMotionFadingDuration:config$1.motionFadingDuration;return A.setFadeIn(C.fade_in>0?C.fade_in:R),A.setFadeOut(C.fade_out>0?C.fade_out:R),A}getMotionFile(_){return _.file}getMotionName(_){return _.file}getSoundFile(_){return _.sound}_startMotion(_,E){return _.onFinishHandler=E,this.queueManager.stopAllMotions(),this.queueManager.startMotion(_)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(_,E){return this.queueManager.updateParam(_)}destroy(){super.destroy(),this.queueManager=void 0}}class Live2DEyeBlink{constructor(_){__publicField(this,"leftParam"),__publicField(this,"rightParam"),__publicField(this,"blinkInterval",4e3),__publicField(this,"closingDuration",100),__publicField(this,"closedDuration",50),__publicField(this,"openingDuration",150),__publicField(this,"eyeState",0),__publicField(this,"eyeParamValue",1),__publicField(this,"closedTimer",0),__publicField(this,"nextBlinkTimeLeft",this.blinkInterval),this.coreModel=_,this.leftParam=_.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=_.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(_){this.eyeParamValue=clamp$1(_,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(_){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=_,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+rand(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+_/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=_,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+_/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const tempMatrixArray=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Cubism2InternalModel extends InternalModel{constructor(_,E,C){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"eyeBlink"),__publicField(this,"eyeballXParamIndex"),__publicField(this,"eyeballYParamIndex"),__publicField(this,"angleXParamIndex"),__publicField(this,"angleYParamIndex"),__publicField(this,"angleZParamIndex"),__publicField(this,"bodyAngleXParamIndex"),__publicField(this,"breathParamIndex"),__publicField(this,"textureFlipY",!0),__publicField(this,"lipSync",!0),__publicField(this,"drawDataCount",0),__publicField(this,"disableCulling",!1),__publicField(this,"hasDrawn",!1),this.coreModel=_,this.settings=E,this.motionManager=new Cubism2MotionManager(E,C),this.eyeBlink=new Live2DEyeBlink(_),this.eyeballXParamIndex=_.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=_.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=_.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=_.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=_.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=_.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=_.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:R,value:I})=>this.coreModel.setParamFloat(R,I)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:R,value:I})=>this.coreModel.setPartsOpacity(R,I)),this.coreModel.saveParam();const _=this.coreModel.getModelContext()._$aS;_!=null&&_.length&&(this.drawDataCount=_.length);let E=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:R=>E=R,get:()=>this.disableCulling?!1:E});const C=this.coreModel.getModelContext().clipManager,A=C.setupClip;C.setupClip=(R,I)=>{A.call(C,R,I),I.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const _={};if(this.settings.layout)for(const[E,C]of Object.entries(this.settings.layout)){let A=E;E==="center_x"?A="centerX":E==="center_y"&&(A="centerY"),_[A]=C}return _}updateWebGLContext(_,E){const C=this.coreModel.drawParamWebGL;C.firstDraw=!0,C.setGL(_),C.glno=E;for(const[I,F]of Object.entries(C))F instanceof WebGLBuffer&&(C[I]=null);const A=this.coreModel.getModelContext().clipManager;A.curFrameNo=E;const R=_.getParameter(_.FRAMEBUFFER_BINDING);A.getMaskRenderTexture(),_.bindFramebuffer(_.FRAMEBUFFER,R)}bindTexture(_,E){this.coreModel.setTexture(_,E)}getHitAreaDefs(){var _;return((_=this.settings.hitAreas)==null?void 0:_.map(E=>({id:E.id,name:E.name,index:this.coreModel.getDrawDataIndex(E.id)})))||[]}getDrawableIDs(){const _=this.coreModel.getModelContext(),E=[];for(let C=0;C<this.drawDataCount;C++){const A=_.getDrawData(C);A&&E.push(A.getDrawDataID().id)}return E}getDrawableIndex(_){return this.coreModel.getDrawDataIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawDataIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);return this.coreModel.getTransformedPoints(_).slice()}hitTest(_,E){return this.hasDrawn||logger.warn("Trying to hit-test a Cubism 2 model that has not been rendered yet. The result will always be empty since the draw data is not ready."),super.hitTest(_,E)}update(_,E){var C,A,R,I;super.update(_,E);const F=this.coreModel;this.emit("beforeMotionUpdate");const B=this.motionManager.update(this.coreModel,E);if(this.emit("afterMotionUpdate"),F.saveParam(),(C=this.motionManager.expressionManager)==null||C.update(F,E),B||(A=this.eyeBlink)==null||A.update(_),this.updateFocus(),this.updateNaturalMovements(_,E),this.lipSync&&this.motionManager.currentAudio){let U=this.motionManager.mouthSync(),V=0;const D=1,O=1.2,L=.7;U>0&&(V=.4),U=Math.pow(U,L),U=clamp$1(U*O,V,D);for(let z=0;z<this.motionManager.lipSyncIds.length;++z)this.coreModel.setParamFloat(this.coreModel.getParamIndex(this.motionManager.lipSyncIds[z]),U)}(R=this.physics)==null||R.update(E),(I=this.pose)==null||I.update(_),this.emit("beforeModelUpdate"),F.update(),F.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(_,E){const C=E/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(C/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(C/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(C/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(C/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(C/3.2345))}draw(_){const E=this.disableCulling;_.getParameter(_.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const C=this.drawingMatrix;tempMatrixArray[0]=C.a,tempMatrixArray[1]=C.b,tempMatrixArray[4]=C.c,tempMatrixArray[5]=C.d,tempMatrixArray[12]=C.tx,tempMatrixArray[13]=C.ty,this.coreModel.setMatrix(tempMatrixArray),this.coreModel.draw(),this.hasDrawn=!0,this.disableCulling=E}destroy(){super.destroy(),this.coreModel=void 0}}class Cubism2ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),__publicField(this,"layout"),__publicField(this,"hitAreas"),__publicField(this,"initParams"),__publicField(this,"initOpacities"),__publicField(this,"expressions"),__publicField(this,"motions",{}),!Cubism2ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");this.moc=_.model,copyArray("string",_,this,"textures","textures"),this.copy(_)}static isValidJSON(_){var E;return!!_&&typeof _.model=="string"&&((E=_.textures)==null?void 0:E.length)>0&&_.textures.every(C=>typeof C=="string")}copy(_){copyProperty("string",_,this,"name","name"),copyProperty("string",_,this,"pose","pose"),copyProperty("string",_,this,"physics","physics"),copyProperty("object",_,this,"layout","layout"),copyProperty("object",_,this,"motions","motions"),copyArray("object",_,this,"hit_areas","hitAreas"),copyArray("object",_,this,"expressions","expressions"),copyArray("object",_,this,"init_params","initParams"),copyArray("object",_,this,"init_opacities","initOpacities")}replaceFiles(_){super.replaceFiles(_);for(const[E,C]of Object.entries(this.motions))for(let A=0;A<C.length;A++)C[A].file=_(C[A].file,`motions.${E}[${A}].file`),C[A].sound!==void 0&&(C[A].sound=_(C[A].sound,`motions.${E}[${A}].sound`));if(this.expressions)for(let E=0;E<this.expressions.length;E++)this.expressions[E].file=_(this.expressions[E].file,`expressions[${E}].file`)}}const SRC_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},TARGET_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class Live2DPhysics{constructor(_,E){__publicField(this,"physicsHairs",[]),this.coreModel=_,E.physics_hair&&(this.physicsHairs=E.physics_hair.map(C=>{const A=new PhysicsHair;return A.setup(C.setup.length,C.setup.regist,C.setup.mass),C.src.forEach(({id:R,ptype:I,scale:F,weight:B})=>{const U=SRC_TYPE_MAP[I];U&&A.addSrcParam(U,R,F,B)}),C.targets.forEach(({id:R,ptype:I,scale:F,weight:B})=>{const U=TARGET_TYPE_MAP[I];U&&A.addTargetParam(U,R,F,B)}),A}))}update(_){this.physicsHairs.forEach(E=>E.update(this.coreModel,_))}}class Live2DPartsParam{constructor(_){__publicField(this,"paramIndex",-1),__publicField(this,"partsIndex",-1),__publicField(this,"link",[]),this.id=_}initIndex(_){this.paramIndex=_.getParamIndex("VISIBLE:"+this.id),this.partsIndex=_.getPartsDataIndex(PartsDataID.getID(this.id)),_.setParamFloat(this.paramIndex,1)}}class Live2DPose{constructor(_,E){__publicField(this,"opacityAnimDuration",500),__publicField(this,"partsGroups",[]),this.coreModel=_,E.parts_visible&&(this.partsGroups=E.parts_visible.map(({group:C})=>C.map(({id:A,link:R})=>{const I=new Live2DPartsParam(A);return R&&(I.link=R.map(F=>new Live2DPartsParam(F))),I})),this.init())}init(){this.partsGroups.forEach(_=>{_.forEach(E=>{if(E.initIndex(this.coreModel),E.paramIndex>=0){const C=this.coreModel.getParamFloat(E.paramIndex)!==0;this.coreModel.setPartsOpacity(E.partsIndex,C?1:0),this.coreModel.setParamFloat(E.paramIndex,C?1:0),E.link.length>0&&E.link.forEach(A=>A.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(_,E){const C=this.coreModel,A=.5,R=.15;let I=1,F=_.findIndex(({paramIndex:B,partsIndex:U})=>U>=0&&C.getParamFloat(B)!==0);if(F>=0){const B=C.getPartsOpacity(_[F].partsIndex);I=clamp$1(B+E/this.opacityAnimDuration,0,1)}else F=0,I=1;_.forEach(({partsIndex:B},U)=>{if(B>=0)if(F==U)C.setPartsOpacity(B,I);else{let V=C.getPartsOpacity(B),D;I<A?D=I*(A-1)/A+1:D=(1-I)*A/(1-A),(1-D)*(1-I)>R&&(D=1-R/(1-I)),V>D&&(V=D),C.setPartsOpacity(B,V)}})}copyOpacity(_){const E=this.coreModel;_.forEach(({partsIndex:C,link:A})=>{if(C>=0&&A){const R=E.getPartsOpacity(C);A.forEach(({partsIndex:I})=>{I>=0&&E.setPartsOpacity(I,R)})}})}update(_){this.partsGroups.forEach(E=>{this.normalizePartsOpacityGroup(E,_),this.copyOpacity(E)})}}Live2DFactory.registerRuntime({version:2,test(T){return T instanceof Cubism2ModelSettings||Cubism2ModelSettings.isValidJSON(T)},ready(){return Promise.resolve()},isValidMoc(T){if(T.byteLength<3)return!1;const _=new Int8Array(T,0,3);return String.fromCharCode(..._)==="moc"},createModelSettings(T){return new Cubism2ModelSettings(T)},createCoreModel(T){const _=Live2DModelWebGL.loadModel(T),E=Live2D.getError();if(E)throw E;return _},createInternalModel(T,_,E){return new Cubism2InternalModel(T,_,E)},createPose(T,_){return new Live2DPose(T,_)},createPhysics(T,_){return new Live2DPhysics(T,_)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class CubismVector2{constructor(_,E){this.x=_||0,this.y=E||0}add(_){const E=new CubismVector2(0,0);return E.x=this.x+_.x,E.y=this.y+_.y,E}substract(_){const E=new CubismVector2(0,0);return E.x=this.x-_.x,E.y=this.y-_.y,E}multiply(_){const E=new CubismVector2(0,0);return E.x=this.x*_.x,E.y=this.y*_.y,E}multiplyByScaler(_){return this.multiply(new CubismVector2(_,_))}division(_){const E=new CubismVector2(0,0);return E.x=this.x/_.x,E.y=this.y/_.y,E}divisionByScalar(_){return this.division(new CubismVector2(_,_))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(_){return Math.sqrt((this.x-_.x)*(this.x-_.x)+(this.y-_.y)*(this.y-_.y))}dot(_){return this.x*_.x+this.y*_.y}normalize(){const _=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/_,this.y=this.y/_}isEqual(_){return this.x==_.x&&this.y==_.y}isNotEqual(_){return!this.isEqual(_)}}const _CubismMath=class sa{static range(_,E,C){return _<E?_=E:_>C&&(_=C),_}static sin(_){return Math.sin(_)}static cos(_){return Math.cos(_)}static abs(_){return Math.abs(_)}static sqrt(_){return Math.sqrt(_)}static cbrt(_){if(_===0)return _;let E=_;const C=E<0;C&&(E=-E);let A;return E===1/0?A=1/0:(A=Math.exp(Math.log(E)/3),A=(E/(A*A)+2*A)/3),C?-A:A}static getEasingSine(_){return _<0?0:_>1?1:.5-.5*this.cos(_*Math.PI)}static max(_,E){return _>E?_:E}static min(_,E){return _>E?E:_}static degreesToRadian(_){return _/180*Math.PI}static radianToDegrees(_){return _*180/Math.PI}static directionToRadian(_,E){const C=Math.atan2(E.y,E.x),A=Math.atan2(_.y,_.x);let R=C-A;for(;R<-Math.PI;)R+=Math.PI*2;for(;R>Math.PI;)R-=Math.PI*2;return R}static directionToDegrees(_,E){const C=this.directionToRadian(_,E);let A=this.radianToDegrees(C);return E.x-_.x>0&&(A=-A),A}static radianToDirection(_){const E=new CubismVector2;return E.x=this.sin(_),E.y=this.cos(_),E}static quadraticEquation(_,E,C){return this.abs(_)<sa.Epsilon?this.abs(E)<sa.Epsilon?-C:-C/E:-(E+this.sqrt(E*E-4*_*C))/(2*_)}static cardanoAlgorithmForBezier(_,E,C,A){if(this.sqrt(_)<sa.Epsilon)return this.range(this.quadraticEquation(E,C,A),0,1);const R=E/_,I=C/_,F=A/_,B=(3*I-R*R)/3,U=B/3,V=(2*R*R*R-9*R*I+27*F)/27,D=V/2,O=D*D+U*U*U,L=.5,z=L+.01;if(O<0){const Q=-B/3,ee=Q*Q*Q,J=this.sqrt(ee),ie=-V/(2*J),re=this.range(ie,-1,1),se=Math.acos(re),oe=2*this.cbrt(J),fe=oe*this.cos(se/3)-R/3;if(this.abs(fe-L)<z)return this.range(fe,0,1);const he=oe*this.cos((se+2*Math.PI)/3)-R/3;if(this.abs(he-L)<z)return this.range(he,0,1);const ge=oe*this.cos((se+4*Math.PI)/3)-R/3;return this.range(ge,0,1)}if(O==0){let Q;D<0?Q=this.cbrt(-D):Q=-this.cbrt(D);const ee=2*Q-R/3;if(this.abs(ee-L)<z)return this.range(ee,0,1);const J=-Q-R/3;return this.range(J,0,1)}const W=this.sqrt(O),X=this.cbrt(W-D),Y=this.cbrt(W+D),K=X-Y-R/3;return this.range(K,0,1)}constructor(){}};_CubismMath.Epsilon=1e-5;let CubismMath=_CubismMath;class CubismMatrix44{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(_,E,C){const A=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),R=4;for(let I=0;I<R;++I)for(let F=0;F<R;++F)for(let B=0;B<R;++B)A[F+I*4]+=_[B+I*4]*E[F+B*4];for(let I=0;I<16;++I)C[I]=A[I]}loadIdentity(){const _=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(_)}setMatrix(_){for(let E=0;E<16;++E)this._tr[E]=_[E]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(_){return this._tr[0]*_+this._tr[12]}transformY(_){return this._tr[5]*_+this._tr[13]}invertTransformX(_){return(_-this._tr[12])/this._tr[0]}invertTransformY(_){return(_-this._tr[13])/this._tr[5]}translateRelative(_,E){const C=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,_,E,0,1]);CubismMatrix44.multiply(C,this._tr,this._tr)}translate(_,E){this._tr[12]=_,this._tr[13]=E}translateX(_){this._tr[12]=_}translateY(_){this._tr[13]=_}scaleRelative(_,E){const C=new Float32Array([_,0,0,0,0,E,0,0,0,0,1,0,0,0,0,1]);CubismMatrix44.multiply(C,this._tr,this._tr)}scale(_,E){this._tr[0]=_,this._tr[5]=E}multiplyByMatrix(_){CubismMatrix44.multiply(_.getArray(),this._tr,this._tr)}clone(){const _=new CubismMatrix44;for(let E=0;E<this._tr.length;E++)_._tr[E]=this._tr[E];return _}}class CubismRenderer{initialize(_){this._model=_}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(_){this._mvpMatrix4x4.setMatrix(_.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(_,E,C,A){_<0?_=0:_>1&&(_=1),E<0?E=0:E>1&&(E=1),C<0?C=0:C>1&&(C=1),A<0?A=0:A>1&&(A=1),this._modelColor.R=_,this._modelColor.G=E,this._modelColor.B=C,this._modelColor.A=A}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(_){this._isPremultipliedAlpha=_}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(_){this._isCulling=_}isCulling(){return this._isCulling}setAnisotropy(_){this._anisotropy=_}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(_){this._useHighPrecisionMask=_}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._modelColor=new CubismTextureColor,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new CubismMatrix44,this._mvpMatrix4x4.loadIdentity()}}var CubismBlendMode=(T=>(T[T.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",T[T.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",T[T.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",T))(CubismBlendMode||{});class CubismTextureColor{constructor(_=1,E=1,C=1,A=1){this.R=_,this.G=E,this.B=C,this.A=A}}let s_isStarted=!1,s_isInitialized=!1,s_option;const Constant={vertexOffset:0,vertexStep:2};class CubismFramework{static startUp(_){if(s_isStarted)return CubismLogInfo("CubismFramework.startUp() is already done."),s_isStarted;if(Live2DCubismCore._isStarted)return s_isStarted=!0,!0;if(Live2DCubismCore._isStarted=!0,s_option=_,s_option&&Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction),s_isStarted=!0,s_isStarted){const E=Live2DCubismCore.Version.csmGetVersion(),C=(E&4278190080)>>24,A=(E&16711680)>>16,R=E&65535,I=E;CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+C).slice(-2),("00"+A).slice(-2),("0000"+R).slice(-4),I)}return CubismLogInfo("CubismFramework.startUp() is complete."),s_isStarted}static cleanUp(){s_isStarted=!1,s_isInitialized=!1,s_option=void 0}static initialize(_=0){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(s_isInitialized){CubismLogWarning("CubismFramework.initialize() skipped, already initialized.");return}Live2DCubismCore.Memory.initializeAmountOfMemory(_),s_isInitialized=!0,CubismLogInfo("CubismFramework.initialize() is complete.")}static dispose(){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(!s_isInitialized){CubismLogWarning("CubismFramework.dispose() skipped, not initialized.");return}CubismRenderer.staticRelease(),s_isInitialized=!1,CubismLogInfo("CubismFramework.dispose() is complete.")}static isStarted(){return s_isStarted}static isInitialized(){return s_isInitialized}static coreLogFunction(_){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(_)}static getLoggingLevel(){return s_option!=null?s_option.loggingLevel:5}constructor(){}}var LogLevel=(T=>(T[T.LogLevel_Verbose=0]="LogLevel_Verbose",T[T.LogLevel_Debug=1]="LogLevel_Debug",T[T.LogLevel_Info=2]="LogLevel_Info",T[T.LogLevel_Warning=3]="LogLevel_Warning",T[T.LogLevel_Error=4]="LogLevel_Error",T[T.LogLevel_Off=5]="LogLevel_Off",T))(LogLevel||{});const CSM_ASSERT=typeof process<"u"?()=>{}:T=>console.assert(T);function CubismLogDebug(T,..._){CubismDebug.print(LogLevel.LogLevel_Debug,"[CSM][D]"+T+`
`,_)}function CubismLogInfo(T,..._){CubismDebug.print(LogLevel.LogLevel_Info,"[CSM][I]"+T+`
`,_)}function CubismLogWarning(T,..._){CubismDebug.print(LogLevel.LogLevel_Warning,"[CSM][W]"+T+`
`,_)}function CubismLogError(T,..._){CubismDebug.print(LogLevel.LogLevel_Error,"[CSM][E]"+T+`
`,_)}class CubismDebug{static print(_,E,C){if(_<CubismFramework.getLoggingLevel())return;const A=CubismFramework.coreLogFunction;if(!A)return;const R=E.replace(/{(\d+)}/g,(I,F)=>C[F]);A(R)}static dumpBytes(_,E,C){for(let A=0;A<C;A++)A%16==0&&A>0?this.print(_,`
`):A%8==0&&A>0&&this.print(_,"  "),this.print(_,"{0} ",[E[A]&255]);this.print(_,`
`)}constructor(){}}class ACubismMotion{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(_,E,C){if(!E.isAvailable()||E.isFinished())return;if(!E.isStarted()){E.setIsStarted(!0),E.setStartTime(C-this._offsetSeconds),E.setFadeInStartTime(C);const F=this.getDuration();E.getEndTime()<0&&E.setEndTime(F<=0?-1:E.getStartTime()+F)}let A=this._weight;const R=this._fadeInSeconds==0?1:CubismMath.getEasingSine((C-E.getFadeInStartTime())/this._fadeInSeconds),I=this._fadeOutSeconds==0||E.getEndTime()<0?1:CubismMath.getEasingSine((E.getEndTime()-C)/this._fadeOutSeconds);A=A*R*I,E.setState(C,A),CSM_ASSERT(0<=A&&A<=1),this.doUpdateParameters(_,C,A,E),E.getEndTime()>0&&E.getEndTime()<C&&E.setIsFinished(!0)}setFadeInTime(_){this._fadeInSeconds=_}setFadeOutTime(_){this._fadeOutSeconds=_}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(_){this._weight=_}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(_){this._offsetSeconds=_}getFiredEvent(_,E){return this._firedEventValues}setFinishedMotionHandler(_){this._onFinishedMotion=_}getFinishedMotionHandler(){return this._onFinishedMotion}isExistModelOpacity(){return!1}getModelOpacityIndex(){return-1}getModelOpacityId(_){}getModelOpacityValue(){return 1}}const DefaultFadeTime=1;class CubismExpressionMotion extends ACubismMotion{static create(_){const E=new CubismExpressionMotion;return E.parse(_),E}doUpdateParameters(_,E,C,A){for(let R=0;R<this._parameters.length;++R){const I=this._parameters[R];switch(I.blendType){case 0:{_.addParameterValueById(I.parameterId,I.value,C);break}case 1:{_.multiplyParameterValueById(I.parameterId,I.value,C);break}case 2:{_.setParameterValueById(I.parameterId,I.value,C);break}}}}parse(_){this.setFadeInTime(_.FadeInTime!=null?_.FadeInTime:DefaultFadeTime),this.setFadeOutTime(_.FadeOutTime!=null?_.FadeOutTime:DefaultFadeTime);const E=(_.Parameters||[]).length;for(let C=0;C<E;++C){const A=_.Parameters[C],R=A.Id,I=A.Value;let F;!A.Blend||A.Blend==="Add"?F=0:A.Blend==="Multiply"?F=1:A.Blend==="Overwrite"?F=2:F=0;const B={parameterId:R,blendType:F,value:I};this._parameters.push(B)}}constructor(){super(),this._parameters=[]}}class CubismMotionQueueEntry{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(_){this._fadeOutSeconds=_,this._isTriggeredFadeOut=!0}startFadeOut(_,E){const C=E+_;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||C<this._endTimeSeconds)&&(this._endTimeSeconds=C)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(_){this._startTimeSeconds=_}setFadeInStartTime(_){this._fadeInStartTimeSeconds=_}setEndTime(_){this._endTimeSeconds=_}setIsFinished(_){this._finished=_}setIsStarted(_){this._started=_}isAvailable(){return this._available}setIsAvailable(_){this._available=_}setState(_,E){this._stateTimeSeconds=_,this._stateWeight=E}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(_){this._lastEventCheckSeconds=_}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class CubismMotionQueueManager{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let _=0;_<this._motions.length;++_)this._motions[_]&&this._motions[_].release();this._motions=void 0}startMotion(_,E,C){if(_==null)return InvalidMotionQueueEntryHandleValue;let A;for(let R=0;R<this._motions.length;++R)A=this._motions[R],A!=null&&A.setFadeOut(A._motion.getFadeOutTime());return A=new CubismMotionQueueEntry,A._autoDelete=E,A._motion=_,this._motions.push(A),A._motionQueueEntryHandle}isFinished(){let _=0;for(;_<this._motions.length;){const E=this._motions[_];if(E==null){this._motions.splice(_,1);continue}if(E._motion==null){E.release(),this._motions.splice(_,1);continue}if(!E.isFinished())return!1;_++}return!0}isFinishedByHandle(_){for(let E=0;E<this._motions.length;E++){const C=this._motions[E];if(C!=null&&C._motionQueueEntryHandle==_&&!C.isFinished())return!1}return!0}stopAllMotions(){for(let _=0;_<this._motions.length;_++){const E=this._motions[_];E!=null&&E.release()}this._motions=[]}getCubismMotionQueueEntry(_){return this._motions.find(E=>E!=null&&E._motionQueueEntryHandle==_)}setEventCallback(_,E=null){this._eventCallBack=_,this._eventCustomData=E}doUpdateMotion(_,E){let C=!1,A=0;for(;A<this._motions.length;){const R=this._motions[A];if(R==null){this._motions.splice(A,1);continue}const I=R._motion;if(I==null){R.release(),this._motions.splice(A,1);continue}I.updateParameters(_,R,E),C=!0;const F=I.getFiredEvent(R.getLastCheckEventSeconds()-R.getStartTime(),E-R.getStartTime());for(let B=0;B<F.length;++B)this._eventCallBack(this,F[B],this._eventCustomData);R.setLastCheckEventSeconds(E),R.isFinished()?(R.release(),this._motions.splice(A,1)):(R.isTriggeredFadeOut()&&R.startFadeOut(R.getFadeOutSeconds(),E),A++)}return C}}const InvalidMotionQueueEntryHandleValue=-1;class Cubism4ExpressionManager extends ExpressionManager{constructor(_,E){var C;super(_,E),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"definitions"),this.definitions=(C=_.expressions)!=null?C:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(E=>E.Name===_)}getExpressionFile(_){return _.File}createExpression(_,E){return CubismExpressionMotion.create(_)}_setExpression(_){return this.queueManager.startMotion(_,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,E){return this.queueManager.doUpdateMotion(_,E)}}var CubismMotionCurveTarget=(T=>(T[T.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",T[T.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",T[T.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",T))(CubismMotionCurveTarget||{}),CubismMotionSegmentType=(T=>(T[T.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",T[T.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",T[T.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",T[T.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",T))(CubismMotionSegmentType||{});class CubismMotionPoint{constructor(_=0,E=0){this.time=_,this.value=E}}class CubismMotionSegment{constructor(){this.basePointIndex=0,this.segmentType=0}}class CubismMotionCurve{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class CubismMotionEvent{constructor(){this.fireTime=0,this.value=""}}class CubismMotionData{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class CubismMotionJson{constructor(_){this._json=_}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(_){return _==0?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(_){return this._json.Curves[_].Target}getMotionCurveId(_){return this._json.Curves[_].Id}getMotionCurveFadeInTime(_){return this._json.Curves[_].FadeInTime}getMotionCurveFadeOutTime(_){return this._json.Curves[_].FadeOutTime}getMotionCurveSegmentCount(_){return this._json.Curves[_].Segments.length}getMotionCurveSegment(_,E){return this._json.Curves[_].Segments[E]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(_){return this._json.UserData[_].Time}getEventValue(_){return this._json.UserData[_].Value}}var EvaluationOptionFlag=(T=>(T[T.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",T))(EvaluationOptionFlag||{});const EffectNameEyeBlink="EyeBlink",EffectNameLipSync="LipSync",TargetNameModel="Model",TargetNameParameter="Parameter",TargetNamePartOpacity="PartOpacity",IdNameOpacity="Opacity",UseOldBeziersCurveMotion=!1;function lerpPoints(T,_,E){const C=new CubismMotionPoint;return C.time=T.time+(_.time-T.time)*E,C.value=T.value+(_.value-T.value)*E,C}function linearEvaluate(T,_){let E=(_-T[0].time)/(T[1].time-T[0].time);return E<0&&(E=0),T[0].value+(T[1].value-T[0].value)*E}function bezierEvaluate(T,_){let E=(_-T[0].time)/(T[3].time-T[0].time);E<0&&(E=0);const C=lerpPoints(T[0],T[1],E),A=lerpPoints(T[1],T[2],E),R=lerpPoints(T[2],T[3],E),I=lerpPoints(C,A,E),F=lerpPoints(A,R,E);return lerpPoints(I,F,E).value}function bezierEvaluateCardanoInterpretation(T,_){const E=_,C=T[0].time,A=T[3].time,R=T[1].time,I=T[2].time,F=A-3*I+3*R-C,B=3*I-6*R+3*C,U=3*R-3*C,V=C-E,D=CubismMath.cardanoAlgorithmForBezier(F,B,U,V),O=lerpPoints(T[0],T[1],D),L=lerpPoints(T[1],T[2],D),z=lerpPoints(T[2],T[3],D),W=lerpPoints(O,L,D),X=lerpPoints(L,z,D);return lerpPoints(W,X,D).value}function steppedEvaluate(T,_){return T[0].value}function inverseSteppedEvaluate(T,_){return T[1].value}function evaluateCurve(T,_,E){const C=T.curves[_];let A=-1;const R=C.baseSegmentIndex+C.segmentCount;let I=0;for(let B=C.baseSegmentIndex;B<R;++B)if(I=T.segments[B].basePointIndex+(T.segments[B].segmentType==CubismMotionSegmentType.CubismMotionSegmentType_Bezier?3:1),T.points[I].time>E){A=B;break}if(A==-1)return T.points[I].value;const F=T.segments[A];return F.evaluate(T.points.slice(F.basePointIndex),E)}class CubismMotion extends ACubismMotion{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._modelOpacity=1}static create(_,E){const C=new CubismMotion;return C.parse(_),C._sourceFrameRate=C._motionData.fps,C._loopDurationSeconds=C._motionData.duration,C._onFinishedMotion=E,C}doUpdateParameters(_,E,C,A){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=EffectNameEyeBlink),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=EffectNameLipSync),this._modelCurveIdOpacity==null&&(this._modelCurveIdOpacity=IdNameOpacity);let R=E-A.getStartTime();R<0&&(R=0);let I=Number.MAX_VALUE,F=Number.MAX_VALUE;const B=64;let U=0,V=0;this._eyeBlinkParameterIds.length>B&&CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>B&&CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const D=this._fadeInSeconds<=0?1:CubismMath.getEasingSine((E-A.getFadeInStartTime())/this._fadeInSeconds),O=this._fadeOutSeconds<=0||A.getEndTime()<0?1:CubismMath.getEasingSine((A.getEndTime()-E)/this._fadeOutSeconds);let L,z,W,X=R;if(this._isLoop)for(;X>this._motionData.duration;)X-=this._motionData.duration;const Y=this._motionData.curves;for(z=0;z<this._motionData.curveCount&&Y[z].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model;++z)L=evaluateCurve(this._motionData,z,X),Y[z].id==this._modelCurveIdEyeBlink?F=L:Y[z].id==this._modelCurveIdLipSync?I=L:Y[z].id==this._modelCurveIdOpacity&&(this._modelOpacity=L,_.setModelOapcity(this.getModelOpacityValue()));for(;z<this._motionData.curveCount&&Y[z].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;++z){if(W=_.getParameterIndex(Y[z].id),W==-1)continue;const K=_.getParameterValueByIndex(W);if(L=evaluateCurve(this._motionData,z,X),F!=Number.MAX_VALUE){for(let ee=0;ee<this._eyeBlinkParameterIds.length&&ee<B;++ee)if(this._eyeBlinkParameterIds[ee]==Y[z].id){L*=F,V|=1<<ee;break}}if(I!=Number.MAX_VALUE){for(let ee=0;ee<this._lipSyncParameterIds.length&&ee<B;++ee)if(this._lipSyncParameterIds[ee]==Y[z].id){L+=I,U|=1<<ee;break}}let Q;if(Y[z].fadeInTime<0&&Y[z].fadeOutTime<0)Q=K+(L-K)*C;else{let ee,J;Y[z].fadeInTime<0?ee=D:ee=Y[z].fadeInTime==0?1:CubismMath.getEasingSine((E-A.getFadeInStartTime())/Y[z].fadeInTime),Y[z].fadeOutTime<0?J=O:J=Y[z].fadeOutTime==0||A.getEndTime()<0?1:CubismMath.getEasingSine((A.getEndTime()-E)/Y[z].fadeOutTime);const ie=this._weight*ee*J;Q=K+(L-K)*ie}_.setParameterValueByIndex(W,Q,1)}{if(F!=Number.MAX_VALUE)for(let K=0;K<this._eyeBlinkParameterIds.length&&K<B;++K){const Q=_.getParameterValueById(this._eyeBlinkParameterIds[K]);if(V>>K&1)continue;const ee=Q+(F-Q)*C;_.setParameterValueById(this._eyeBlinkParameterIds[K],ee)}if(I!=Number.MAX_VALUE)for(let K=0;K<this._lipSyncParameterIds.length&&K<B;++K){const Q=_.getParameterValueById(this._lipSyncParameterIds[K]);if(U>>K&1)continue;const ee=Q+(I-Q)*C;_.setParameterValueById(this._lipSyncParameterIds[K],ee)}}for(;z<this._motionData.curveCount&&Y[z].type==CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;++z)if(L=evaluateCurve(this._motionData,z,X),CubismConfig.setOpacityFromMotion)_.setPartOpacityById(Y[z].id,L);else{if(W=_.getParameterIndex(Y[z].id),W==-1)continue;_.setParameterValueByIndex(W,L)}R>=this._motionData.duration&&(this._isLoop?(A.setStartTime(E),this._isLoopFadeIn&&A.setFadeInStartTime(E)):(this._onFinishedMotion&&this._onFinishedMotion(this),A.setIsFinished(!0))),this._lastWeight=C}setIsLoop(_){this._isLoop=_}isLoop(){return this._isLoop}setIsLoopFadeIn(_){this._isLoopFadeIn=_}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(_,E){const C=this._motionData.curves;for(let A=0;A<this._motionData.curveCount;++A)if(_==C[A].id){C[A].fadeInTime=E;return}}setParameterFadeOutTime(_,E){const C=this._motionData.curves;for(let A=0;A<this._motionData.curveCount;++A)if(_==C[A].id){C[A].fadeOutTime=E;return}}getParameterFadeInTime(_){const E=this._motionData.curves;for(let C=0;C<this._motionData.curveCount;++C)if(_==E[C].id)return E[C].fadeInTime;return-1}getParameterFadeOutTime(_){const E=this._motionData.curves;for(let C=0;C<this._motionData.curveCount;++C)if(_==E[C].id)return E[C].fadeOutTime;return-1}setEffectIds(_,E){this._eyeBlinkParameterIds=_,this._lipSyncParameterIds=E}release(){this._motionData=void 0}parse(_){this._motionData=new CubismMotionData;const E=new CubismMotionJson(_);this._motionData.duration=E.getMotionDuration(),this._motionData.loop=E.isMotionLoop(),this._motionData.curveCount=E.getMotionCurveCount(),this._motionData.fps=E.getMotionFps(),this._motionData.eventCount=E.getEventCount();const C=E.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted),A=E.getMotionFadeInTime(),R=E.getMotionFadeOutTime();A!==void 0?this._fadeInSeconds=A<0?1:A:this._fadeInSeconds=1,R!==void 0?this._fadeOutSeconds=R<0?1:R:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new CubismMotionCurve),this._motionData.segments=Array.from({length:E.getMotionTotalSegmentCount()}).map(()=>new CubismMotionSegment),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new CubismMotionEvent),this._motionData.points=[];let I=0,F=0;for(let B=0;B<this._motionData.curveCount;++B){const U=this._motionData.curves[B];switch(E.getMotionCurveTarget(B)){case TargetNameModel:U.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Model;break;case TargetNameParameter:U.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;break;case TargetNamePartOpacity:U.type=CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;break;default:CubismLogWarning('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}U.id=E.getMotionCurveId(B),U.baseSegmentIndex=F;const V=E.getMotionCurveFadeInTime(B),D=E.getMotionCurveFadeOutTime(B);U.fadeInTime=V!==void 0?V:-1,U.fadeOutTime=D!==void 0?D:-1;for(let O=0;O<E.getMotionCurveSegmentCount(B);){switch(O==0?(this._motionData.segments[F].basePointIndex=I,this._motionData.points[I]=new CubismMotionPoint(E.getMotionCurveSegment(B,O),E.getMotionCurveSegment(B,O+1)),I+=1,O+=2):this._motionData.segments[F].basePointIndex=I-1,E.getMotionCurveSegment(B,O)){case CubismMotionSegmentType.CubismMotionSegmentType_Linear:{this._motionData.segments[F].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Linear,this._motionData.segments[F].evaluate=linearEvaluate,this._motionData.points[I]=new CubismMotionPoint(E.getMotionCurveSegment(B,O+1),E.getMotionCurveSegment(B,O+2)),I+=1,O+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_Bezier:{this._motionData.segments[F].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Bezier,C||UseOldBeziersCurveMotion?this._motionData.segments[F].evaluate=bezierEvaluate:this._motionData.segments[F].evaluate=bezierEvaluateCardanoInterpretation,this._motionData.points[I]=new CubismMotionPoint(E.getMotionCurveSegment(B,O+1),E.getMotionCurveSegment(B,O+2)),this._motionData.points[I+1]=new CubismMotionPoint(E.getMotionCurveSegment(B,O+3),E.getMotionCurveSegment(B,O+4)),this._motionData.points[I+2]=new CubismMotionPoint(E.getMotionCurveSegment(B,O+5),E.getMotionCurveSegment(B,O+6)),I+=3,O+=7;break}case CubismMotionSegmentType.CubismMotionSegmentType_Stepped:{this._motionData.segments[F].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Stepped,this._motionData.segments[F].evaluate=steppedEvaluate,this._motionData.points[I]=new CubismMotionPoint(E.getMotionCurveSegment(B,O+1),E.getMotionCurveSegment(B,O+2)),I+=1,O+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[F].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped,this._motionData.segments[F].evaluate=inverseSteppedEvaluate,this._motionData.points[I]=new CubismMotionPoint(E.getMotionCurveSegment(B,O+1),E.getMotionCurveSegment(B,O+2)),I+=1,O+=3;break}default:{CSM_ASSERT(0);break}}++U.segmentCount,++F}this._motionData.curves.push(U)}for(let B=0;B<E.getEventCount();++B)this._motionData.events[B].fireTime=E.getEventTime(B),this._motionData.events[B].value=E.getEventValue(B);E.release()}getFiredEvent(_,E){this._firedEventValues.length=0;for(let C=0;C<this._motionData.eventCount;++C)this._motionData.events[C].fireTime>_&&this._motionData.events[C].fireTime<=E&&this._firedEventValues.push(this._motionData.events[C].value);return this._firedEventValues}isExistModelOpacity(){for(let _=0;_<this._motionData.curveCount;_++){const E=this._motionData.curves[_];if(E.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&E.id===IdNameOpacity)return!0}return!1}getModelOpacityIndex(){if(this.isExistModelOpacity())for(let _=0;_<this._motionData.curveCount;_++){const E=this._motionData.curves[_];if(E.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&E.id===IdNameOpacity)return _}return-1}getModelOpacityId(_){if(_!=-1){const E=this._motionData.curves[_];if(E.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&E.id===IdNameOpacity)return E.id}}getModelOpacityValue(){return this._modelOpacity}}class Cubism4MotionManager extends MotionManager{constructor(_,E){var C;super(_,E),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"Idle"}),__publicField(this,"motionDataType","json"),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"expressionManager"),__publicField(this,"eyeBlinkIds"),__publicField(this,"lipSyncIds",["ParamMouthOpenY"]),this.definitions=(C=_.motions)!=null?C:{},this.eyeBlinkIds=_.getEyeBlinkParameters()||[];const A=_.getLipSyncParameters();A!=null&&A.length&&(this.lipSyncIds=A),this.init(E)}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism4ExpressionManager(this.settings,_)),this.queueManager.setEventCallback((E,C,A)=>{this.emit("motion:"+C)})}isFinished(){return this.queueManager.isFinished()}_startMotion(_,E){return _.setFinishedMotionHandler(E),this.queueManager.stopAllMotions(),this.queueManager.startMotion(_,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(_,E,C){const A=CubismMotion.create(_),R=new CubismMotionJson(_),I=(E===this.groups.idle?config$1.idleMotionFadingDuration:config$1.motionFadingDuration)/1e3;return R.getMotionFadeInTime()===void 0&&A.setFadeInTime(C.FadeInTime>0?C.FadeInTime:I),R.getMotionFadeOutTime()===void 0&&A.setFadeOutTime(C.FadeOutTime>0?C.FadeOutTime:I),A.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),A}getMotionFile(_){return _.File}getMotionName(_){return _.File}getSoundFile(_){return _.Sound}updateParameters(_,E){return this.queueManager.doUpdateMotion(_,E)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const ParamAngleX="ParamAngleX",ParamAngleY="ParamAngleY",ParamAngleZ="ParamAngleZ",ParamEyeBallX="ParamEyeBallX",ParamEyeBallY="ParamEyeBallY",ParamMouthForm="ParamMouthForm",ParamBodyAngleX="ParamBodyAngleX",ParamBreath="ParamBreath";class CubismBreath{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new CubismBreath}setParameters(_){this._breathParameters=_}getParameters(){return this._breathParameters}updateParameters(_,E){this._currentTime+=E;const C=this._currentTime*2*3.14159;for(let A=0;A<this._breathParameters.length;++A){const R=this._breathParameters[A];_.addParameterValueById(R.parameterId,R.offset+R.peak*Math.sin(C/R.cycle),R.weight)}}}class BreathParameterData{constructor(_,E,C,A,R){this.parameterId=_??void 0,this.offset=E??0,this.peak=C??0,this.cycle=A??0,this.weight=R??0}}const _CubismEyeBlink=class Ul{static create(_){return new Ul(_)}setBlinkingInterval(_){this._blinkingIntervalSeconds=_}setBlinkingSetting(_,E,C){this._closingSeconds=_,this._closedSeconds=E,this._openingSeconds=C}setParameterIds(_){this._parameterIds=_}getParameterIds(){return this._parameterIds}updateParameters(_,E){this._userTimeSeconds+=E;let C,A=0;switch(this._blinkingState){case 2:A=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,A>=1&&(A=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),C=1-A;break;case 3:A=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,A>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),C=0;break;case 4:A=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,A>=1&&(A=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),C=A;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),C=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),C=1;break}Ul.CloseIfZero||(C=-C);for(let R=0;R<this._parameterIds.length;++R)_.setParameterValueById(this._parameterIds[R],C)}constructor(_){var E,C;this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],_!=null&&(this._parameterIds=(C=(E=_.getEyeBlinkParameters())==null?void 0:E.slice())!=null?C:this._parameterIds)}determinNextBlinkingTiming(){const _=Math.random();return this._userTimeSeconds+_*(2*this._blinkingIntervalSeconds-1)}};_CubismEyeBlink.CloseIfZero=!0;let CubismEyeBlink=_CubismEyeBlink;class csmRect{constructor(_=0,E=0,C=0,A=0){this.x=_,this.y=E,this.width=C,this.height=A}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(_){this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height}expand(_,E){this.x-=_,this.y-=E,this.width+=_*2,this.height+=E*2}}const ColorChannelCount=4,ClippingMaskMaxCountOnDefault=36,ClippingMaskMaxCountOnMultiRenderTexture=32,ShaderCount=10;let s_instance,s_viewport,s_fbo;class CubismClippingManager_WebGL{getChannelFlagAsColor(_){return this._channelColors[_]}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures=[],this._maskColorBuffers=[];const _=this._clippingMaskBufferSize;for(let E=0;E<this._renderTextureCount;E++)this._maskColorBuffers.push(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers[E]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,_,_,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.push(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures[E]),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers[E],0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this._maskTexture=new CubismRenderTextureResource(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(_){this.gl=_}calcClippedDrawTotalBounds(_,E){let C=Number.MAX_VALUE,A=Number.MAX_VALUE,R=Number.MIN_VALUE,I=Number.MIN_VALUE;const F=E._clippedDrawableIndexList.length;for(let B=0;B<F;B++){const U=E._clippedDrawableIndexList[B],V=_.getDrawableVertexCount(U),D=_.getDrawableVertices(U);let O=Number.MAX_VALUE,L=Number.MAX_VALUE,z=-Number.MAX_VALUE,W=-Number.MAX_VALUE;const X=V*Constant.vertexStep;for(let Y=Constant.vertexOffset;Y<X;Y+=Constant.vertexStep){const K=D[Y],Q=D[Y+1];K<O&&(O=K),K>z&&(z=K),Q<L&&(L=Q),Q>W&&(W=Q)}if(O!=Number.MAX_VALUE)if(O<C&&(C=O),L<A&&(A=L),z>R&&(R=z),W>I&&(I=W),C==Number.MAX_VALUE)E._allClippedDrawRect.x=0,E._allClippedDrawRect.y=0,E._allClippedDrawRect.width=0,E._allClippedDrawRect.height=0,E._isUsing=!1;else{E._isUsing=!0;const Y=R-C,K=I-A;E._allClippedDrawRect.x=C,E._allClippedDrawRect.y=A,E._allClippedDrawRect.width=Y,E._allClippedDrawRect.height=K}}}constructor(){this._currentMaskRenderTexture=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new csmRect,this._tmpMatrix=new CubismMatrix44,this._tmpMatrixForMask=new CubismMatrix44,this._tmpMatrixForDraw=new CubismMatrix44;let _=new CubismTextureColor;_.R=1,_.G=0,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=1,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=1,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=0,_.A=1,this._channelColors.push(_)}release(){var _;const E=this;for(let C=0;C<this._clippingContextListForMask.length;C++)this._clippingContextListForMask[C]&&((_=this._clippingContextListForMask[C])==null||_.release());if(E._clippingContextListForMask=void 0,E._clippingContextListForDraw=void 0,this._maskTexture){for(let C=0;C<this._maskTexture.textures.length;C++)this.gl.deleteFramebuffer(this._maskTexture.textures[C]);this._maskTexture=void 0}if(E._channelColors=void 0,this._maskColorBuffers)for(let C=0;C<this._maskColorBuffers.length;C++)this.gl.deleteTexture(this._maskColorBuffers[C]);this._maskColorBuffers=void 0,this._maskRenderTextures=void 0,this._clearedFrameBufferflags=void 0}initialize(_,E,C,A,R){R%1!=0&&(CubismLogWarning("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),R=~~R),R<1&&CubismLogWarning("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=R<1?1:R,this._clearedFrameBufferflags=[];for(let I=0;I<E;I++){if(A[I]<=0){this._clippingContextListForDraw.push(null);continue}let F=this.findSameClip(C[I],A[I]);F==null&&(F=new CubismClippingContext(this,C[I],A[I]),this._clippingContextListForMask.push(F)),F.addClippedDrawable(I),this._clippingContextListForDraw.push(F)}}setupClippingContext(_,E){this._currentFrameNo++;let C=0;for(let A=0;A<this._clippingContextListForMask.length;A++){const R=this._clippingContextListForMask[A];this.calcClippedDrawTotalBounds(_,R),R._isUsing&&C++}if(C>0){this.setupLayoutBounds(E.isUsingHighPrecisionMask()?0:C),E.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture()[0],E.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags||(this._clearedFrameBufferflags=[]);for(let A=0;A<this._renderTextureCount;A++)this._clearedFrameBufferflags[A]=!1;for(let A=0;A<this._clippingContextListForMask.length;A++){const R=this._clippingContextListForMask[A],I=R._allClippedDrawRect,F=R._layoutBounds,B=.05;let U=0,V=0;const D=this.getMaskRenderTexture()[R._bufferIndex];if(this._currentMaskRenderTexture!=D&&!E.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=D,E.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),E.isUsingHighPrecisionMask()){const O=_.getPixelsPerUnit(),L=R.getClippingManager()._clippingMaskBufferSize,z=F.width*L,W=F.height*L;this._tmpBoundsOnModel.setRect(I),this._tmpBoundsOnModel.width*O>z?(this._tmpBoundsOnModel.expand(I.width*B,0),U=F.width/this._tmpBoundsOnModel.width):U=O/z,this._tmpBoundsOnModel.height*O>W?(this._tmpBoundsOnModel.expand(0,I.height*B),V=F.height/this._tmpBoundsOnModel.height):V=O/W}else this._tmpBoundsOnModel.setRect(I),this._tmpBoundsOnModel.expand(I.width*B,I.height*B),U=F.width/this._tmpBoundsOnModel.width,V=F.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(F.x,F.y),this._tmpMatrix.scaleRelative(U,V),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(F.x,F.y),this._tmpMatrix.scaleRelative(U,V),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),R._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),R._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!E.isUsingHighPrecisionMask()){const O=R._clippingIdCount;for(let L=0;L<O;L++){const z=R._clippingIdList[L];_.getDrawableDynamicFlagVertexPositionsDidChange(z)&&(E.setIsCulling(_.getDrawableCulling(z)!=!1),this._clearedFrameBufferflags[R._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[R._bufferIndex]=!0),E.setClippingContextBufferForMask(R),E.drawMesh(_.getDrawableTextureIndex(z),_.getDrawableVertexIndexCount(z),_.getDrawableVertexCount(z),_.getDrawableVertexIndices(z),_.getDrawableVertices(z),_.getDrawableVertexUvs(z),_.getMultiplyColor(z),_.getScreenColor(z),_.getDrawableOpacity(z),CubismBlendMode.CubismBlendMode_Normal,!1))}}}E.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),E.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]))}}findSameClip(_,E){for(let C=0;C<this._clippingContextListForMask.length;C++){const A=this._clippingContextListForMask[C],R=A._clippingIdCount;if(R!=E)continue;let I=0;for(let F=0;F<R;F++){const B=A._clippingIdList[F];for(let U=0;U<R;U++)if(_[U]==B){I++;break}}if(I==R)return A}return null}setupLayoutBounds(_){const E=this._renderTextureCount<=1?ClippingMaskMaxCountOnDefault:ClippingMaskMaxCountOnMultiRenderTexture*this._renderTextureCount;if(_<=0||_>E){_>E&&CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-E,this._renderTextureCount,_);for(let U=0;U<this._clippingContextListForMask.length;U++){const V=this._clippingContextListForMask[U];V._layoutChannelNo=0,V._layoutBounds.x=0,V._layoutBounds.y=0,V._layoutBounds.width=1,V._layoutBounds.height=1,V._bufferIndex=0}return}const C=this._renderTextureCount<=1?9:8;let A=_/this._renderTextureCount,R=_%this._renderTextureCount;A=~~A,R=~~R;let I=A/ColorChannelCount,F=A%ColorChannelCount;I=~~I,F=~~F;let B=0;for(let U=0;U<this._renderTextureCount;U++)for(let V=0;V<ColorChannelCount;V++){let D=I+(V<F?1:0);const O=F+1>=ColorChannelCount?0:F+1;if(D<C&&V==O&&(D+=U<R?1:0),D!=0)if(D==1){const L=this._clippingContextListForMask[B++];L._layoutChannelNo=V,L._layoutBounds.x=0,L._layoutBounds.y=0,L._layoutBounds.width=1,L._layoutBounds.height=1,L._bufferIndex=U}else if(D==2)for(let L=0;L<D;L++){let z=L%2;z=~~z;const W=this._clippingContextListForMask[B++];W._layoutChannelNo=V,W._layoutBounds.x=z*.5,W._layoutBounds.y=0,W._layoutBounds.width=.5,W._layoutBounds.height=1,W._bufferIndex=U}else if(D<=4)for(let L=0;L<D;L++){let z=L%2,W=L/2;z=~~z,W=~~W;const X=this._clippingContextListForMask[B++];X._layoutChannelNo=V,X._layoutBounds.x=z*.5,X._layoutBounds.y=W*.5,X._layoutBounds.width=.5,X._layoutBounds.height=.5,X._bufferIndex=U}else if(D<=C)for(let L=0;L<D;L++){let z=L%3,W=L/3;z=~~z,W=~~W;const X=this._clippingContextListForMask[B++];X._layoutChannelNo=V,X._layoutBounds.x=z/3,X._layoutBounds.y=W/3,X._layoutBounds.width=1/3,X._layoutBounds.height=1/3,X._bufferIndex=U}else if(CubismConfig.supportMoreMaskDivisions&&D<=16)for(let L=0;L<D;L++){let z=L%4,W=L/4;z=~~z,W=~~W;const X=this._clippingContextListForMask[B++];X._layoutChannelNo=V,X._layoutBounds.x=z/4,X._layoutBounds.y=W/4,X._layoutBounds.width=1/4,X._layoutBounds.height=1/4,X._bufferIndex=U}else{CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-E,this._renderTextureCount,_);for(let L=0;L<D;L++){const z=this._clippingContextListForMask[B++];z._layoutChannelNo=0,z._layoutBounds.x=0,z._layoutBounds.y=0,z._layoutBounds.width=1,z._layoutBounds.height=1,z._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.length}setClippingMaskBufferSize(_){this._clippingMaskBufferSize=_}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}}class CubismRenderTextureResource{constructor(_,E){this.frameNo=_,this.textures=E}}class CubismClippingContext{constructor(_,E,C){this._isUsing=!1,this._owner=_,this._clippingIdList=E,this._clippingIdCount=C,this._allClippedDrawRect=new csmRect,this._layoutBounds=new csmRect,this._clippedDrawableIndexList=[],this._matrixForMask=new CubismMatrix44,this._matrixForDraw=new CubismMatrix44,this._bufferIndex=0}release(){const _=this;_._layoutBounds=void 0,_._allClippedDrawRect=void 0,_._clippedDrawableIndexList=void 0}addClippedDrawable(_){this._clippedDrawableIndexList.push(_)}getClippingManager(){return this._owner}setGl(_){this._owner.setGL(_)}}class CubismRendererProfile_WebGL{setGlEnable(_,E){E?this.gl.enable(_):this.gl.disable(_)}setGlEnableVertexAttribArray(_,E){E?this.gl.enableVertexAttribArray(_):this.gl.disableVertexAttribArray(_)}save(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(_){this.gl=_}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}}class CubismShader_WebGL{static getInstance(){return s_instance==null&&(s_instance=new CubismShader_WebGL),s_instance}static deleteInstance(){s_instance&&(s_instance.release(),s_instance=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(_,E,C,A,R,I,F,B,U,V,D,O,L,z,W){L||CubismLogError("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let X,Y,K,Q;const ee=_.getClippingContextBufferForMask();if(ee!=null){const J=this._shaderSets[0];this.gl.useProgram(J.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,E),this.gl.uniform1i(J.samplerTexture0Location,0),F.vertex==null&&(F.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,F.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,A,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(J.attributePositionLocation),this.gl.vertexAttribPointer(J.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),F.uv==null&&(F.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,F.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,I,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(J.attributeTexCoordLocation),this.gl.vertexAttribPointer(J.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const ie=ee._layoutChannelNo,re=ee.getClippingManager().getChannelFlagAsColor(ie);this.gl.uniform4f(J.uniformChannelFlagLocation,re.R,re.G,re.B,re.A),this.gl.uniformMatrix4fv(J.uniformClipMatrixLocation,!1,ee._matrixForMask.getArray());const se=ee._layoutBounds;this.gl.uniform4f(J.uniformBaseColorLocation,se.x*2-1,se.y*2-1,se.getRight()*2-1,se.getBottom()*2-1),this.gl.uniform4f(J.uniformMultiplyColorLocation,D.R,D.G,D.B,D.A),this.gl.uniform4f(J.uniformScreenColorLocation,O.R,O.G,O.B,O.A),X=this.gl.ZERO,Y=this.gl.ONE_MINUS_SRC_COLOR,K=this.gl.ZERO,Q=this.gl.ONE_MINUS_SRC_ALPHA}else{const J=_.getClippingContextBufferForDraw(),re=J!=null?W?2:1:0;let se;switch(U){case CubismBlendMode.CubismBlendMode_Normal:default:se=this._shaderSets[1+re],X=this.gl.ONE,Y=this.gl.ONE_MINUS_SRC_ALPHA,K=this.gl.ONE,Q=this.gl.ONE_MINUS_SRC_ALPHA;break;case CubismBlendMode.CubismBlendMode_Additive:se=this._shaderSets[4+re],X=this.gl.ONE,Y=this.gl.ONE,K=this.gl.ZERO,Q=this.gl.ONE;break;case CubismBlendMode.CubismBlendMode_Multiplicative:se=this._shaderSets[7+re],X=this.gl.DST_COLOR,Y=this.gl.ONE_MINUS_SRC_ALPHA,K=this.gl.ZERO,Q=this.gl.ONE;break}if(this.gl.useProgram(se.shaderProgram),F.vertex==null&&(F.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,F.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,A,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(se.attributePositionLocation),this.gl.vertexAttribPointer(se.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),F.uv==null&&(F.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,F.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,I,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(se.attributeTexCoordLocation),this.gl.vertexAttribPointer(se.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),J!=null){this.gl.activeTexture(this.gl.TEXTURE1);const ne=J.getClippingManager().getColorBuffer()[_.getClippingContextBufferForDraw()._bufferIndex];this.gl.bindTexture(this.gl.TEXTURE_2D,ne),this.gl.uniform1i(se.samplerTexture1Location,1),this.gl.uniformMatrix4fv(se.uniformClipMatrixLocation,!1,J._matrixForDraw.getArray());const oe=J._layoutChannelNo,fe=J.getClippingManager().getChannelFlagAsColor(oe);this.gl.uniform4f(se.uniformChannelFlagLocation,fe.R,fe.G,fe.B,fe.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,E),this.gl.uniform1i(se.samplerTexture0Location,0),this.gl.uniformMatrix4fv(se.uniformMatrixLocation,!1,z.getArray()),this.gl.uniform4f(se.uniformBaseColorLocation,V.R,V.G,V.B,V.A),this.gl.uniform4f(se.uniformMultiplyColorLocation,D.R,D.G,D.B,D.A),this.gl.uniform4f(se.uniformScreenColorLocation,O.R,O.G,O.B,O.A)}F.index==null&&(F.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,F.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,R,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(X,Y,K,Q)}releaseShaderProgram(){for(let _=0;_<this._shaderSets.length;_++)this.gl.deleteProgram(this._shaderSets[_].shaderProgram),this._shaderSets[_].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let _=0;_<ShaderCount;_++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(vertexShaderSrcSetupMask,fragmentShaderSrcsetupMask),this._shaderSets[1].shaderProgram=this.loadShaderProgram(vertexShaderSrc,fragmentShaderSrcPremultipliedAlpha),this._shaderSets[2].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets[3].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[0].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_multiplyColor"),this._shaderSets[0].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_screenColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[1].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_multiplyColor"),this._shaderSets[1].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_screenColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[2].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_multiplyColor"),this._shaderSets[2].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_screenColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[3].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_multiplyColor"),this._shaderSets[3].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_screenColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[4].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_multiplyColor"),this._shaderSets[4].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_screenColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[5].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_multiplyColor"),this._shaderSets[5].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_screenColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[6].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_multiplyColor"),this._shaderSets[6].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_screenColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[7].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_multiplyColor"),this._shaderSets[7].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_screenColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[8].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_multiplyColor"),this._shaderSets[8].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_screenColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor"),this._shaderSets[9].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_multiplyColor"),this._shaderSets[9].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_screenColor")}loadShaderProgram(_,E){const C=this.gl.createProgram(),A=this.compileShaderSource(this.gl.VERTEX_SHADER,_);if(!A)return CubismLogError("Vertex shader compile error!"),0;const R=this.compileShaderSource(this.gl.FRAGMENT_SHADER,E);return R?(this.gl.attachShader(C,A),this.gl.attachShader(C,R),this.gl.linkProgram(C),this.gl.getProgramParameter(C,this.gl.LINK_STATUS)?(this.gl.deleteShader(A),this.gl.deleteShader(R),C):(CubismLogError("Failed to link program: {0}",C),this.gl.deleteShader(A),this.gl.deleteShader(R),C&&this.gl.deleteProgram(C),0)):(CubismLogError("Vertex shader compile error!"),0)}compileShaderSource(_,E){const C=E,A=this.gl.createShader(_);if(this.gl.shaderSource(A,C),this.gl.compileShader(A),!A){const I=this.gl.getShaderInfoLog(A);CubismLogError("Shader compile log: {0} ",I)}return this.gl.getShaderParameter(A,this.gl.COMPILE_STATUS)?A:(this.gl.deleteShader(A),null)}setGl(_){this.gl=_}}const vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class CubismRenderer_WebGL extends CubismRenderer{initialize(_,E=1){_.isUsingMasking()&&(this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.initialize(_,_.getDrawableCount(),_.getDrawableMasks(),_.getDrawableMaskCounts(),E));for(let C=_.getDrawableCount()-1;C>=0;C--)this._sortedDrawableIndexList[C]=0;super.initialize(_)}bindTexture(_,E){this._textures[_]=E}getBindedTextures(){return this._textures}setClippingMaskBufferSize(_){if(!this._model.isUsingMasking())return;const E=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.setClippingMaskBufferSize(_),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),E)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new CubismRendererProfile_WebGL,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}release(){var _,E,C;const A=this;this._clippingManager.release(),A._clippingManager=void 0,(_=this.gl)==null||_.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(E=this.gl)==null||E.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(C=this.gl)==null||C.deleteBuffer(this._bufferData.index),this._bufferData.index=null,A._bufferData=void 0,A._textures=void 0}doDrawModel(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const _=this.getModel().getDrawableCount(),E=this.getModel().getDrawableRenderOrders();for(let C=0;C<_;++C){const A=E[C];this._sortedDrawableIndexList[A]=C}for(let C=0;C<_;++C){const A=this._sortedDrawableIndexList[C];if(!this.getModel().getDrawableDynamicFlagIsVisible(A))continue;const R=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[A]:null;if(R!=null&&this.isUsingHighPrecisionMask()){R._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,R.getClippingManager().getMaskRenderTexture()[R._bufferIndex]),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const I=R._clippingIdCount;for(let F=0;F<I;F++){const B=R._clippingIdList[F];this._model.getDrawableDynamicFlagVertexPositionsDidChange(B)&&(this.setIsCulling(this._model.getDrawableCulling(B)!=!1),this.setClippingContextBufferForMask(R),this.drawMesh(this.getModel().getDrawableTextureIndex(B),this.getModel().getDrawableVertexIndexCount(B),this.getModel().getDrawableVertexCount(B),this.getModel().getDrawableVertexIndices(B),this.getModel().getDrawableVertices(B),this.getModel().getDrawableVertexUvs(B),this.getModel().getMultiplyColor(B),this.getModel().getScreenColor(B),this.getModel().getDrawableOpacity(B),CubismBlendMode.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]),this.preDraw()}this.setClippingContextBufferForDraw(R),this.setIsCulling(this.getModel().getDrawableCulling(A)),this.drawMesh(this.getModel().getDrawableTextureIndex(A),this.getModel().getDrawableVertexIndexCount(A),this.getModel().getDrawableVertexCount(A),this.getModel().getDrawableVertexIndices(A),this.getModel().getDrawableVertices(A),this.getModel().getDrawableVertexUvs(A),this.getModel().getMultiplyColor(A),this.getModel().getScreenColor(A),this.getModel().getDrawableOpacity(A),this.getModel().getDrawableBlendMode(A),this.getModel().getDrawableInvertedMaskBit(A))}}drawMesh(_,E,C,A,R,I,F,B,U,V,D){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const O=this.getModelColor();this.getClippingContextBufferForMask()==null&&(O.A*=U,this.isPremultipliedAlpha()&&(O.R*=O.A,O.G*=O.A,O.B*=O.A));let L=null;this._textures[_]!=null&&(L=this._textures[_]),CubismShader_WebGL.getInstance().setupShaderProgram(this,L,C,R,A,I,this._bufferData,U,V,O,F,B,this.isPremultipliedAlpha(),this.getMvpMatrix(),D),this.gl.drawElements(this.gl.TRIANGLES,E,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){CubismShader_WebGL.deleteInstance()}setRenderState(_,E){s_fbo=_,s_viewport=E}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(const _ of Object.entries(this._textures))this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(_){this._clippingContextBufferForMask=_}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(_){this._clippingContextBufferForDraw=_}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(_){this.gl=_,this._clippingManager&&this._clippingManager.setGL(_),CubismShader_WebGL.getInstance().setGl(_),this._rendererProfile.setGl(_),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}CubismRenderer.staticRelease=()=>{CubismRenderer_WebGL.doStaticRelease()};const tempMatrix=new CubismMatrix44;class Cubism4InternalModel extends InternalModel{constructor(_,E,C){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"lipSync",!0),__publicField(this,"breath",CubismBreath.create()),__publicField(this,"eyeBlink"),__publicField(this,"userData"),__publicField(this,"renderer",new CubismRenderer_WebGL),__publicField(this,"idParamAngleX",ParamAngleX),__publicField(this,"idParamAngleY",ParamAngleY),__publicField(this,"idParamAngleZ",ParamAngleZ),__publicField(this,"idParamEyeBallX",ParamEyeBallX),__publicField(this,"idParamEyeBallY",ParamEyeBallY),__publicField(this,"idParamBodyAngleX",ParamBodyAngleX),__publicField(this,"idParamBreath",ParamBreath),__publicField(this,"idParamMouthForm",ParamMouthForm),__publicField(this,"pixelsPerUnit",1),__publicField(this,"centeringTransform",new Matrix),this.coreModel=_,this.settings=E,this.motionManager=new Cubism4MotionManager(E,C),this.init()}init(){var _;super.init(),(_=this.settings.getEyeBlinkParameters())!=null&&_.length&&(this.eyeBlink=CubismEyeBlink.create(this.settings)),this.breath.setParameters([new BreathParameterData(this.idParamAngleX,0,15,6.5345,.5),new BreathParameterData(this.idParamAngleY,0,8,3.5345,.5),new BreathParameterData(this.idParamAngleZ,0,10,5.5345,.5),new BreathParameterData(this.idParamBodyAngleX,0,4,15.5345,.5),new BreathParameterData(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const _={};if(this.settings.layout)for(const[E,C]of Object.entries(this.settings.layout)){const A=E.charAt(0).toLowerCase()+E.slice(1);_[A]=C}return _}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(_,E){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(_),this.renderer._clippingManager._currentFrameNo=E,this.renderer._clippingManager._maskTexture=void 0,CubismShader_WebGL.getInstance()._shaderSets=[]}bindTexture(_,E){this.renderer.bindTexture(_,E)}getHitAreaDefs(){var _,E;return(E=(_=this.settings.hitAreas)==null?void 0:_.map(C=>({id:C.Id,name:C.Name,index:this.coreModel.getDrawableIndex(C.Id)})))!=null?E:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(_){return this.coreModel.getDrawableIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawableIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);const E=this.coreModel.getDrawableVertices(_).slice();for(let C=0;C<E.length;C+=2)E[C]=E[C]*this.pixelsPerUnit+this.originalWidth/2,E[C+1]=-E[C+1]*this.pixelsPerUnit+this.originalHeight/2;return E}updateTransform(_){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(_)}update(_,E){var C,A,R,I;super.update(_,E),_/=1e3,E/=1e3;const F=this.coreModel;this.emit("beforeMotionUpdate");const B=this.motionManager.update(this.coreModel,E);if(this.emit("afterMotionUpdate"),F.saveParameters(),(C=this.motionManager.expressionManager)==null||C.update(F,E),B||(A=this.eyeBlink)==null||A.updateParameters(F,_),this.updateFocus(),this.updateNaturalMovements(_*1e3,E*1e3),this.lipSync&&this.motionManager.currentAudio){let U=this.motionManager.mouthSync(),V=0;const D=1,O=1.2;U>0&&(V=.4),U=clamp$1(U*O,V,D);for(let L=0;L<this.motionManager.lipSyncIds.length;++L)F.addParameterValueById(this.motionManager.lipSyncIds[L],U,.8)}(R=this.physics)==null||R.evaluate(F,_),(I=this.pose)==null||I.updateParameters(F,_),this.emit("beforeModelUpdate"),F.update(),F.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateFacialEmotion(_){this.coreModel.addParameterValueById(this.idParamMouthForm,_)}updateNaturalMovements(_,E){var C;(C=this.breath)==null||C.updateParameters(this.coreModel,_/1e3)}draw(_){const E=this.drawingMatrix,C=tempMatrix.getArray();C[0]=E.a,C[1]=E.b,C[4]=-E.c,C[5]=-E.d,C[12]=E.tx,C[13]=E.ty,this.renderer.setMvpMatrix(tempMatrix),this.renderer.setRenderState(_.getParameter(_.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}class CubismModelSettingsJson{constructor(_){this.groups=_.Groups,this.hitAreas=_.HitAreas,this.layout=_.Layout,this.moc=_.FileReferences.Moc,this.expressions=_.FileReferences.Expressions,this.motions=_.FileReferences.Motions,this.textures=_.FileReferences.Textures,this.physics=_.FileReferences.Physics,this.pose=_.FileReferences.Pose}getEyeBlinkParameters(){var _,E;return(E=(_=this.groups)==null?void 0:_.find(C=>C.Name==="EyeBlink"))==null?void 0:E.Ids}getLipSyncParameters(){var _,E;return(E=(_=this.groups)==null?void 0:_.find(C=>C.Name==="LipSync"))==null?void 0:E.Ids}}class Cubism4ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),!Cubism4ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");Object.assign(this,new CubismModelSettingsJson(_))}static isValidJSON(_){var E;return!!(_!=null&&_.FileReferences)&&typeof _.FileReferences.Moc=="string"&&((E=_.FileReferences.Textures)==null?void 0:E.length)>0&&_.FileReferences.Textures.every(C=>typeof C=="string")}replaceFiles(_){if(super.replaceFiles(_),this.motions)for(const[E,C]of Object.entries(this.motions))for(let A=0;A<C.length;A++)C[A].File=_(C[A].File,`motions.${E}[${A}].File`),C[A].Sound!==void 0&&(C[A].Sound=_(C[A].Sound,`motions.${E}[${A}].Sound`));if(this.expressions)for(let E=0;E<this.expressions.length;E++)this.expressions[E].File=_(this.expressions[E].File,`expressions[${E}].File`)}}applyMixins(Cubism4ModelSettings,[CubismModelSettingsJson]);let startupPromise,startupRetries=20;function cubism4Ready(){return CubismFramework.isStarted()?Promise.resolve():(startupPromise??(startupPromise=new Promise((T,_)=>{function E(){try{startUpCubism4(),T()}catch(C){if(startupRetries--,startupRetries<0){const A=new Error("Failed to start up Cubism 4 framework.");A.cause=C,_(A);return}setTimeout(E,10)}}E()})),startupPromise)}function startUpCubism4(T){T=Object.assign({logFunction:console.log,loggingLevel:LogLevel.LogLevel_Verbose},T),CubismFramework.startUp(T),CubismFramework.initialize()}const Epsilon=.001,DefaultFadeInSeconds=.5;class CubismPose{static create(_){const E=new CubismPose;typeof _.FadeInTime=="number"&&(E._fadeTimeSeconds=_.FadeInTime,E._fadeTimeSeconds<=0&&(E._fadeTimeSeconds=DefaultFadeInSeconds));const C=_.Groups,A=C.length;for(let R=0;R<A;++R){const I=C[R],F=I.length;let B=0;for(let U=0;U<F;++U){const V=I[U],D=new PartData;D.partId=V.Id;const O=V.Link;if(O){const L=O.length;for(let z=0;z<L;++z){const W=new PartData;W.partId=O[z],D.link.push(W)}}E._partGroups.push(D),++B}E._partGroupCounts.push(B)}return E}updateParameters(_,E){_!=this._lastModel&&this.reset(_),this._lastModel=_,E<0&&(E=0);let C=0;for(let A=0;A<this._partGroupCounts.length;A++){const R=this._partGroupCounts[A];this.doFade(_,E,C,R),C+=R}this.copyPartOpacities(_)}reset(_){let E=0;for(let C=0;C<this._partGroupCounts.length;++C){const A=this._partGroupCounts[C];for(let R=E;R<E+A;++R){this._partGroups[R].initialize(_);const I=this._partGroups[R].partIndex,F=this._partGroups[R].parameterIndex;if(!(I<0)){_.setPartOpacityByIndex(I,R==E?1:0),_.setParameterValueByIndex(F,R==E?1:0);for(let B=0;B<this._partGroups[R].link.length;++B)this._partGroups[R].link[B].initialize(_)}}E+=A}}copyPartOpacities(_){for(let E=0;E<this._partGroups.length;++E){const C=this._partGroups[E];if(C.link.length==0)continue;const A=this._partGroups[E].partIndex,R=_.getPartOpacityByIndex(A);for(let I=0;I<C.link.length;++I){const B=C.link[I].partIndex;B<0||_.setPartOpacityByIndex(B,R)}}}doFade(_,E,C,A){let R=-1,I=1;const F=.5,B=.15;for(let U=C;U<C+A;++U){const V=this._partGroups[U].partIndex,D=this._partGroups[U].parameterIndex;if(_.getParameterValueByIndex(D)>Epsilon){if(R>=0)break;R=U,I=_.getPartOpacityByIndex(V),I+=E/this._fadeTimeSeconds,I>1&&(I=1)}}R<0&&(R=0,I=1);for(let U=C;U<C+A;++U){const V=this._partGroups[U].partIndex;if(R==U)_.setPartOpacityByIndex(V,I);else{let D=_.getPartOpacityByIndex(V),O;I<F?O=I*(F-1)/F+1:O=(1-I)*F/(1-F),(1-O)*(1-I)>B&&(O=1-B/(1-I)),D>O&&(D=O),_.setPartOpacityByIndex(V,D)}}}constructor(){this._fadeTimeSeconds=DefaultFadeInSeconds,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class PartData{constructor(_){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],_!=null&&this.assignment(_)}assignment(_){return this.partId=_.partId,this.link=_.link.map(E=>E.clone()),this}initialize(_){this.parameterIndex=_.getParameterIndex(this.partId),this.partIndex=_.getPartIndex(this.partId),_.setParameterValueByIndex(this.parameterIndex,1)}clone(){const _=new PartData;return _.partId=this.partId,_.parameterIndex=this.parameterIndex,_.partIndex=this.partIndex,_.link=this.link.map(E=>E.clone()),_}}class DrawableColorData{constructor(_=!1,E=new CubismTextureColor){this.isOverwritten=_,this.Color=E}}class PartColorData{constructor(_=!1,E=new CubismTextureColor){this.isOverwritten=_,this.Color=E}}class DrawableCullingData{constructor(_=!1,E=!1){this.isOverwritten=_,this.isCulling=E}}class CubismModel{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const _=this._model.parameters.count,E=this._savedParameters.length;for(let C=0;C<_;++C)C<E?this._savedParameters[C]=this._parameterValues[C]:this._savedParameters.push(this._parameterValues[C])}getMultiplyColor(_){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(_)?this._userMultiplyColors[_].Color:this.getDrawableMultiplyColor(_)}getScreenColor(_){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(_)?this._userScreenColors[_].Color:this.getDrawableScreenColor(_)}setMultiplyColorByTextureColor(_,E){this.setMultiplyColorByRGBA(_,E.R,E.G,E.B,E.A)}setMultiplyColorByRGBA(_,E,C,A,R=1){this._userMultiplyColors[_].Color.R=E,this._userMultiplyColors[_].Color.G=C,this._userMultiplyColors[_].Color.B=A,this._userMultiplyColors[_].Color.A=R}setScreenColorByTextureColor(_,E){this.setScreenColorByRGBA(_,E.R,E.G,E.B,E.A)}setScreenColorByRGBA(_,E,C,A,R=1){this._userScreenColors[_].Color.R=E,this._userScreenColors[_].Color.G=C,this._userScreenColors[_].Color.B=A,this._userScreenColors[_].Color.A=R}getPartMultiplyColor(_){return this._userPartMultiplyColors[_].Color}getPartScreenColor(_){return this._userPartScreenColors[_].Color}setPartColor(_,E,C,A,R,I,F){if(I[_].Color.R=E,I[_].Color.G=C,I[_].Color.B=A,I[_].Color.A=R,I[_].isOverwritten)for(let B=0;B<this._partChildDrawables[_].length;++B){const U=this._partChildDrawables[_][B];F[U].Color.R=E,F[U].Color.G=C,F[U].Color.B=A,F[U].Color.A=R}}setPartMultiplyColorByTextureColor(_,E){this.setPartMultiplyColorByRGBA(_,E.R,E.G,E.B,E.A)}setPartMultiplyColorByRGBA(_,E,C,A,R){this.setPartColor(_,E,C,A,R,this._userPartMultiplyColors,this._userMultiplyColors)}setPartScreenColorByTextureColor(_,E){this.setPartScreenColorByRGBA(_,E.R,E.G,E.B,E.A)}setPartScreenColorByRGBA(_,E,C,A,R){this.setPartColor(_,E,C,A,R,this._userPartScreenColors,this._userScreenColors)}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(_){this._isOverwrittenModelMultiplyColors=_}setOverwriteFlagForModelScreenColors(_){this._isOverwrittenModelScreenColors=_}getOverwriteFlagForDrawableMultiplyColors(_){return this._userMultiplyColors[_].isOverwritten}getOverwriteFlagForDrawableScreenColors(_){return this._userScreenColors[_].isOverwritten}setOverwriteFlagForDrawableMultiplyColors(_,E){this._userMultiplyColors[_].isOverwritten=E}setOverwriteFlagForDrawableScreenColors(_,E){this._userScreenColors[_].isOverwritten=E}getOverwriteColorForPartMultiplyColors(_){return this._userPartMultiplyColors[_].isOverwritten}getOverwriteColorForPartScreenColors(_){return this._userPartScreenColors[_].isOverwritten}setOverwriteColorForPartColors(_,E,C,A){C[_].isOverwritten=E;for(let R=0;R<this._partChildDrawables[_].length;++R){const I=this._partChildDrawables[_][R];A[I].isOverwritten=E,E&&(A[I].Color.R=C[_].Color.R,A[I].Color.G=C[_].Color.G,A[I].Color.B=C[_].Color.B,A[I].Color.A=C[_].Color.A)}}setOverwriteColorForPartMultiplyColors(_,E){this._userPartMultiplyColors[_].isOverwritten=E,this.setOverwriteColorForPartColors(_,E,this._userPartMultiplyColors,this._userMultiplyColors)}setOverwriteColorForPartScreenColors(_,E){this._userPartScreenColors[_].isOverwritten=E,this.setOverwriteColorForPartColors(_,E,this._userPartScreenColors,this._userScreenColors)}getDrawableCulling(_){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(_))return this._userCullings[_].isCulling;const E=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(E[_])}setDrawableCulling(_,E){this._userCullings[_].isCulling=E}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(_){this._isOverwrittenCullings=_}getOverwriteFlagForDrawableCullings(_){return this._userCullings[_].isOverwritten}setOverwriteFlagForDrawableCullings(_,E){this._userCullings[_].isOverwritten=E}getModelOapcity(){return this._modelOpacity}setModelOapcity(_){this._modelOpacity=_}getModel(){return this._model}getPartIndex(_){let E;const C=this._model.parts.count;for(E=0;E<C;++E)if(_==this._partIds[E])return E;return _ in this._notExistPartId?this._notExistPartId[_]:(E=C+this._notExistPartId.length,this._notExistPartId[_]=E,this._notExistPartOpacities[E]=0,E)}getPartId(_){return this._model.parts.ids[_]}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(_,E){if(_ in this._notExistPartOpacities){this._notExistPartOpacities[_]=E;return}CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_]=E}setPartOpacityById(_,E){const C=this.getPartIndex(_);C<0||this.setPartOpacityByIndex(C,E)}getPartOpacityByIndex(_){return _ in this._notExistPartOpacities?this._notExistPartOpacities[_]:(CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_])}getPartOpacityById(_){const E=this.getPartIndex(_);return E<0?0:this.getPartOpacityByIndex(E)}getParameterIndex(_){let E;const C=this._model.parameters.count;for(E=0;E<C;++E)if(_==this._parameterIds[E])return E;return _ in this._notExistParameterId?this._notExistParameterId[_]:(E=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[_]=E,this._notExistParameterValues[E]=0,E)}getParameterCount(){return this._model.parameters.count}getParameterType(_){return this._model.parameters.types[_]}getParameterMaximumValue(_){return this._model.parameters.maximumValues[_]}getParameterMinimumValue(_){return this._model.parameters.minimumValues[_]}getParameterDefaultValue(_){return this._model.parameters.defaultValues[_]}getParameterValueByIndex(_){return _ in this._notExistParameterValues?this._notExistParameterValues[_]:(CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._parameterValues[_])}getParameterValueById(_){const E=this.getParameterIndex(_);return this.getParameterValueByIndex(E)}setParameterValueByIndex(_,E,C=1){if(_ in this._notExistParameterValues){this._notExistParameterValues[_]=C==1?E:this._notExistParameterValues[_]*(1-C)+E*C;return}CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._model.parameters.maximumValues[_]<E&&(E=this._model.parameters.maximumValues[_]),this._model.parameters.minimumValues[_]>E&&(E=this._model.parameters.minimumValues[_]),this._parameterValues[_]=C==1?E:this._parameterValues[_]=this._parameterValues[_]*(1-C)+E*C}setParameterValueById(_,E,C=1){const A=this.getParameterIndex(_);this.setParameterValueByIndex(A,E,C)}addParameterValueByIndex(_,E,C=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)+E*C)}addParameterValueById(_,E,C=1){const A=this.getParameterIndex(_);this.addParameterValueByIndex(A,E,C)}multiplyParameterValueById(_,E,C=1){const A=this.getParameterIndex(_);this.multiplyParameterValueByIndex(A,E,C)}multiplyParameterValueByIndex(_,E,C=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)*(1+(E-1)*C))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(_){const E=this._model.drawables.count;for(let C=0;C<E;++C)if(this._drawableIds[C]==_)return C;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(_){return this._model.drawables.ids[_]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(_){return this.getDrawableTextureIndex(_)}getDrawableTextureIndex(_){return this._model.drawables.textureIndices[_]}getDrawableDynamicFlagVertexPositionsDidChange(_){const E=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(E[_])}getDrawableVertexIndexCount(_){return this._model.drawables.indexCounts[_]}getDrawableVertexCount(_){return this._model.drawables.vertexCounts[_]}getDrawableVertices(_){return this.getDrawableVertexPositions(_)}getDrawableVertexIndices(_){return this._model.drawables.indices[_]}getDrawableVertexPositions(_){return this._model.drawables.vertexPositions[_]}getDrawableVertexUvs(_){return this._model.drawables.vertexUvs[_]}getDrawableOpacity(_){return this._model.drawables.opacities[_]}getDrawableMultiplyColor(_){const E=this._model.drawables.multiplyColors,C=_*4,A=new CubismTextureColor;return A.R=E[C],A.G=E[C+1],A.B=E[C+2],A.A=E[C+3],A}getDrawableScreenColor(_){const E=this._model.drawables.screenColors,C=_*4,A=new CubismTextureColor;return A.R=E[C],A.G=E[C+1],A.B=E[C+2],A.A=E[C+3],A}getDrawableParentPartIndex(_){return this._model.drawables.parentPartIndices[_]}getDrawableBlendMode(_){const E=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(E[_])?CubismBlendMode.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(E[_])?CubismBlendMode.CubismBlendMode_Multiplicative:CubismBlendMode.CubismBlendMode_Normal}getDrawableInvertedMaskBit(_){const E=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(E[_])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let _=0;_<this._model.drawables.count;++_)if(!(this._model.drawables.maskCounts[_]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(_){const E=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(E[_])}getDrawableDynamicFlagVisibilityDidChange(_){const E=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(E[_])}getDrawableDynamicFlagOpacityDidChange(_){const E=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(E[_])}getDrawableDynamicFlagRenderOrderDidChange(_){const E=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(E[_])}getDrawableDynamicFlagBlendColorDidChange(_){const E=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(E[_])}loadParameters(){let _=this._model.parameters.count;const E=this._savedParameters.length;_>E&&(_=E);for(let C=0;C<_;++C)this._parameterValues[C]=this._savedParameters[C]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const E=this._model.parameters.ids,C=this._model.parameters.count;for(let A=0;A<C;++A)this._parameterIds.push(E[A])}const _=this._model.parts.count;{const E=this._model.parts.ids;for(let C=0;C<_;++C)this._partIds.push(E[C])}{const E=this._model.drawables.ids,C=this._model.drawables.count,A=new DrawableCullingData(!1,!1);for(let R=0;R<_;++R){const I=new CubismTextureColor(1,1,1,1),F=new CubismTextureColor(0,0,0,1),B=new PartColorData(!1,I),U=new PartColorData(!1,F);this._userPartMultiplyColors.push(B),this._userPartScreenColors.push(U),this._partChildDrawables.push([])}for(let R=0;R<C;++R){const I=new CubismTextureColor(1,1,1,1),F=new CubismTextureColor(0,0,0,1),B=new DrawableColorData(!1,I),U=new DrawableColorData(!1,F);this._drawableIds.push(E[R]),this._userMultiplyColors.push(B),this._userScreenColors.push(U),this._userCullings.push(A);const V=this.getDrawableParentPartIndex(R);V>=0&&this._partChildDrawables[V].push(R)}}}constructor(_){this._model=_,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._modelOpacity=1,this._userMultiplyColors=[],this._userScreenColors=[],this._userCullings=[],this._userPartMultiplyColors=[],this._userPartScreenColors=[],this._partChildDrawables=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class CubismMoc{static create(_,E){if(E&&!this.hasMocConsistency(_))throw new Error("Inconsistent MOC3.");const C=Live2DCubismCore.Moc.fromArrayBuffer(_);if(C){const A=new CubismMoc(C);return A._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(C,_),A}throw new Error("Failed to CubismMoc.create().")}createModel(){let _;const E=Live2DCubismCore.Model.fromMoc(this._moc);if(E)return _=new CubismModel(E),++this._modelCount,_;throw new Error("Unknown error")}deleteModel(_){_!=null&&--this._modelCount}constructor(_){this._moc=_,this._modelCount=0,this._mocVersion=0}release(){this._moc._release(),this._moc=void 0}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(_){return Live2DCubismCore.Moc.prototype.hasMocConsistency(_)===1}}var CubismPhysicsTargetType=(T=>(T[T.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",T))(CubismPhysicsTargetType||{}),CubismPhysicsSource=(T=>(T[T.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",T[T.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",T[T.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",T))(CubismPhysicsSource||{});class CubismPhysicsParticle{constructor(){this.initialPosition=new CubismVector2(0,0),this.position=new CubismVector2(0,0),this.lastPosition=new CubismVector2(0,0),this.lastGravity=new CubismVector2(0,0),this.force=new CubismVector2(0,0),this.velocity=new CubismVector2(0,0)}}class CubismPhysicsSubRig{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class CubismPhysicsInput{constructor(){this.source={}}}class CubismPhysicsOutput{constructor(){this.destination={},this.translationScale=new CubismVector2(0,0)}}class CubismPhysicsRig{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0),this.fps=0}}class CubismPhysicsJson{constructor(_){this._json=_}release(){this._json=void 0}getGravity(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Gravity.X,_.y=this._json.Meta.EffectiveForces.Gravity.Y,_}getWind(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Wind.X,_.y=this._json.Meta.EffectiveForces.Wind.Y,_}getFps(){return this._json.Meta.Fps||0}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Default}getNormalizationAngleMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Default}getInputCount(_){return this._json.PhysicsSettings[_].Input.length}getInputWeight(_,E){return this._json.PhysicsSettings[_].Input[E].Weight}getInputReflect(_,E){return this._json.PhysicsSettings[_].Input[E].Reflect}getInputType(_,E){return this._json.PhysicsSettings[_].Input[E].Type}getInputSourceId(_,E){return this._json.PhysicsSettings[_].Input[E].Source.Id}getOutputCount(_){return this._json.PhysicsSettings[_].Output.length}getOutputVertexIndex(_,E){return this._json.PhysicsSettings[_].Output[E].VertexIndex}getOutputAngleScale(_,E){return this._json.PhysicsSettings[_].Output[E].Scale}getOutputWeight(_,E){return this._json.PhysicsSettings[_].Output[E].Weight}getOutputDestinationId(_,E){return this._json.PhysicsSettings[_].Output[E].Destination.Id}getOutputType(_,E){return this._json.PhysicsSettings[_].Output[E].Type}getOutputReflect(_,E){return this._json.PhysicsSettings[_].Output[E].Reflect}getParticleCount(_){return this._json.PhysicsSettings[_].Vertices.length}getParticleMobility(_,E){return this._json.PhysicsSettings[_].Vertices[E].Mobility}getParticleDelay(_,E){return this._json.PhysicsSettings[_].Vertices[E].Delay}getParticleAcceleration(_,E){return this._json.PhysicsSettings[_].Vertices[E].Acceleration}getParticleRadius(_,E){return this._json.PhysicsSettings[_].Vertices[E].Radius}getParticlePosition(_,E){const C=new CubismVector2(0,0);return C.x=this._json.PhysicsSettings[_].Vertices[E].Position.X,C.y=this._json.PhysicsSettings[_].Vertices[E].Position.Y,C}}const PhysicsTypeTagX="X",PhysicsTypeTagY="Y",PhysicsTypeTagAngle="Angle",AirResistance=5,MaximumWeight=100,MovementThreshold=.001,MaxDeltaTime=5;class CubismPhysics{static create(_){const E=new CubismPhysics;return E.parse(_),E._physicsRig.gravity.y=0,E}static delete(_){_!=null&&_.release()}parse(_){this._physicsRig=new CubismPhysicsRig;const E=new CubismPhysicsJson(_);this._physicsRig.gravity=E.getGravity(),this._physicsRig.wind=E.getWind(),this._physicsRig.subRigCount=E.getSubRigCount(),this._physicsRig.fps=E.getFps(),this._currentRigOutputs=[],this._previousRigOutputs=[];let C=0,A=0,R=0;for(let I=0;I<this._physicsRig.subRigCount;++I){const F=new CubismPhysicsSubRig;F.normalizationPosition.minimum=E.getNormalizationPositionMinimumValue(I),F.normalizationPosition.maximum=E.getNormalizationPositionMaximumValue(I),F.normalizationPosition.defalut=E.getNormalizationPositionDefaultValue(I),F.normalizationAngle.minimum=E.getNormalizationAngleMinimumValue(I),F.normalizationAngle.maximum=E.getNormalizationAngleMaximumValue(I),F.normalizationAngle.defalut=E.getNormalizationAngleDefaultValue(I),F.inputCount=E.getInputCount(I),F.baseInputIndex=C,C+=F.inputCount;for(let V=0;V<F.inputCount;++V){const D=new CubismPhysicsInput;switch(D.sourceParameterIndex=-1,D.weight=E.getInputWeight(I,V),D.reflect=E.getInputReflect(I,V),E.getInputType(I,V)){case PhysicsTypeTagX:D.type=CubismPhysicsSource.CubismPhysicsSource_X,D.getNormalizedParameterValue=getInputTranslationXFromNormalizedParameterValue;break;case PhysicsTypeTagY:D.type=CubismPhysicsSource.CubismPhysicsSource_Y,D.getNormalizedParameterValue=getInputTranslationYFromNormalizedParamterValue;break;case PhysicsTypeTagAngle:D.type=CubismPhysicsSource.CubismPhysicsSource_Angle,D.getNormalizedParameterValue=getInputAngleFromNormalizedParameterValue;break}D.source.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,D.source.id=E.getInputSourceId(I,V),this._physicsRig.inputs.push(D)}F.outputCount=E.getOutputCount(I),F.baseOutputIndex=A;const B=new PhysicsOutput,U=new PhysicsOutput;for(let V=0;V<F.outputCount;++V){B.outputs[V]=0,U.outputs[V]=0;let D=this._physicsRig.outputs[A+V];switch(D||(D=new CubismPhysicsOutput,this._physicsRig.outputs[A+V]=D),D.destinationParameterIndex=-1,D.vertexIndex=E.getOutputVertexIndex(I,V),D.angleScale=E.getOutputAngleScale(I,V),D.weight=E.getOutputWeight(I,V),D.destination.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,D.destination.id=E.getOutputDestinationId(I,V),E.getOutputType(I,V)){case PhysicsTypeTagX:D.type=CubismPhysicsSource.CubismPhysicsSource_X,D.getValue=getOutputTranslationX,D.getScale=getOutputScaleTranslationX;break;case PhysicsTypeTagY:D.type=CubismPhysicsSource.CubismPhysicsSource_Y,D.getValue=getOutputTranslationY,D.getScale=getOutputScaleTranslationY;break;case PhysicsTypeTagAngle:D.type=CubismPhysicsSource.CubismPhysicsSource_Angle,D.getValue=getOutputAngle,D.getScale=getOutputScaleAngle;break}D.reflect=E.getOutputReflect(I,V)}this._currentRigOutputs.push(B),this._previousRigOutputs.push(U),A+=F.outputCount,F.particleCount=E.getParticleCount(I),F.baseParticleIndex=R,R+=F.particleCount;for(let V=0;V<F.particleCount;++V){const D=new CubismPhysicsParticle;D.mobility=E.getParticleMobility(I,V),D.delay=E.getParticleDelay(I,V),D.acceleration=E.getParticleAcceleration(I,V),D.radius=E.getParticleRadius(I,V),D.position=E.getParticlePosition(I,V),this._physicsRig.particles.push(D)}this._physicsRig.settings.push(F)}this.initialize(),E.release()}stabilization(_){var E,C,A,R;let I,F,B,U;const V=new CubismVector2;let D,O,L,z,W,X,Y,K;W=_.getModel().parameters.values,X=_.getModel().parameters.maximumValues,Y=_.getModel().parameters.minimumValues,K=_.getModel().parameters.defaultValues,((C=(E=this._parameterCaches)==null?void 0:E.length)!=null?C:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((R=(A=this._parameterInputCaches)==null?void 0:A.length)!=null?R:0)<_.getParameterCount()&&(this._parameterInputCaches=new Float32Array(_.getParameterCount()));for(let Q=0;Q<_.getParameterCount();++Q)this._parameterCaches[Q]=W[Q],this._parameterInputCaches[Q]=W[Q];for(let Q=0;Q<this._physicsRig.subRigCount;++Q){I={angle:0},V.x=0,V.y=0,D=this._physicsRig.settings[Q],O=this._physicsRig.inputs.slice(D.baseInputIndex),L=this._physicsRig.outputs.slice(D.baseOutputIndex),z=this._physicsRig.particles.slice(D.baseParticleIndex);for(let ee=0;ee<D.inputCount;++ee)F=O[ee].weight/MaximumWeight,O[ee].sourceParameterIndex==-1&&(O[ee].sourceParameterIndex=_.getParameterIndex(O[ee].source.id)),O[ee].getNormalizedParameterValue(V,I,W[O[ee].sourceParameterIndex],Y[O[ee].sourceParameterIndex],X[O[ee].sourceParameterIndex],K[O[ee].sourceParameterIndex],D.normalizationPosition,D.normalizationAngle,O[ee].reflect,F),this._parameterCaches[O[ee].sourceParameterIndex]=W[O[ee].sourceParameterIndex];B=CubismMath.degreesToRadian(-I.angle),V.x=V.x*CubismMath.cos(B)-V.y*CubismMath.sin(B),V.y=V.x*CubismMath.sin(B)+V.y*CubismMath.cos(B),updateParticlesForStabilization(z,D.particleCount,V,I.angle,this._options.wind,MovementThreshold*D.normalizationPosition.maximum);for(let ee=0;ee<D.outputCount;++ee){const J=L[ee].vertexIndex;if(L[ee].destinationParameterIndex==-1&&(L[ee].destinationParameterIndex=_.getParameterIndex(L[ee].destination.id)),J<1||J>=D.particleCount)continue;let ie=new CubismVector2;ie=z[J].position.substract(z[J-1].position),U=L[ee].getValue(ie,z,J,L[ee].reflect,this._options.gravity),this._currentRigOutputs[Q].outputs[ee]=U,this._previousRigOutputs[Q].outputs[ee]=U;const re=L[ee].destinationParameterIndex,se=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(W.subarray(re))):W.slice(re);updateOutputParameterValue(se,Y[re],X[re],U,L[ee]);for(let ne=re,oe=0;ne<this._parameterCaches.length;ne++,oe++)W[ne]=this._parameterCaches[ne]=se[oe]}}}evaluate(_,E){var C,A,R,I;let F,B,U,V;const D=new CubismVector2;let O,L,z,W;if(0>=E)return;let X,Y,K,Q,ee;if(this._currentRemainTime+=E,this._currentRemainTime>MaxDeltaTime&&(this._currentRemainTime=0),X=_.getModel().parameters.values,Y=_.getModel().parameters.maximumValues,K=_.getModel().parameters.minimumValues,Q=_.getModel().parameters.defaultValues,((A=(C=this._parameterCaches)==null?void 0:C.length)!=null?A:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((I=(R=this._parameterInputCaches)==null?void 0:R.length)!=null?I:0)<_.getParameterCount()){this._parameterInputCaches=new Float32Array(_.getParameterCount());for(let ie=0;ie<_.getParameterCount();++ie)this._parameterInputCaches[ie]=X[ie]}for(this._physicsRig.fps>0?ee=1/this._physicsRig.fps:ee=E;this._currentRemainTime>=ee;){for(let re=0;re<this._physicsRig.subRigCount;++re){O=this._physicsRig.settings[re],z=this._physicsRig.outputs.slice(O.baseOutputIndex);for(let se=0;se<O.outputCount;++se)this._previousRigOutputs[re].outputs[se]=this._currentRigOutputs[re].outputs[se]}const ie=ee/this._currentRemainTime;for(let re=0;re<_.getParameterCount();++re)this._parameterCaches[re]=this._parameterInputCaches[re]*(1-ie)+X[re]*ie,this._parameterInputCaches[re]=this._parameterCaches[re];for(let re=0;re<this._physicsRig.subRigCount;++re){F={angle:0},D.x=0,D.y=0,O=this._physicsRig.settings[re],L=this._physicsRig.inputs.slice(O.baseInputIndex),z=this._physicsRig.outputs.slice(O.baseOutputIndex),W=this._physicsRig.particles.slice(O.baseParticleIndex);for(let se=0;se<O.inputCount;++se)B=L[se].weight/MaximumWeight,L[se].sourceParameterIndex==-1&&(L[se].sourceParameterIndex=_.getParameterIndex(L[se].source.id)),L[se].getNormalizedParameterValue(D,F,this._parameterCaches[L[se].sourceParameterIndex],K[L[se].sourceParameterIndex],Y[L[se].sourceParameterIndex],Q[L[se].sourceParameterIndex],O.normalizationPosition,O.normalizationAngle,L[se].reflect,B);U=CubismMath.degreesToRadian(-F.angle),D.x=D.x*CubismMath.cos(U)-D.y*CubismMath.sin(U),D.y=D.x*CubismMath.sin(U)+D.y*CubismMath.cos(U),updateParticles(W,O.particleCount,D,F.angle,this._options.wind,MovementThreshold*O.normalizationPosition.maximum,ee,AirResistance);for(let se=0;se<O.outputCount;++se){const ne=z[se].vertexIndex;if(z[se].destinationParameterIndex==-1&&(z[se].destinationParameterIndex=_.getParameterIndex(z[se].destination.id)),ne<1||ne>=O.particleCount)continue;const oe=new CubismVector2;oe.x=W[ne].position.x-W[ne-1].position.x,oe.y=W[ne].position.y-W[ne-1].position.y,V=z[se].getValue(oe,W,ne,z[se].reflect,this._options.gravity),this._currentRigOutputs[re].outputs[se]=V;const fe=z[se].destinationParameterIndex,he=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(fe))):this._parameterCaches.slice(fe);updateOutputParameterValue(he,K[fe],Y[fe],V,z[se]);for(let ge=fe,ye=0;ge<this._parameterCaches.length;ge++,ye++)this._parameterCaches[ge]=he[ye]}}this._currentRemainTime-=ee}const J=this._currentRemainTime/ee;this.interpolate(_,J)}interpolate(_,E){let C,A,R,I,F;R=_.getModel().parameters.values,I=_.getModel().parameters.maximumValues,F=_.getModel().parameters.minimumValues;for(let B=0;B<this._physicsRig.subRigCount;++B){A=this._physicsRig.settings[B],C=this._physicsRig.outputs.slice(A.baseOutputIndex);for(let U=0;U<A.outputCount;++U){if(C[U].destinationParameterIndex==-1)continue;const V=C[U].destinationParameterIndex,D=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(R.subarray(V))):R.slice(V);updateOutputParameterValue(D,F[V],I[V],this._previousRigOutputs[B].outputs[U]*(1-E)+this._currentRigOutputs[B].outputs[U]*E,C[U]);for(let O=V,L=0;O<R.length;O++,L++)R[O]=D[L]}}}setOptions(_){this._options=_}getOption(){return this._options}constructor(){this._options=new Options,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=[],this._previousRigOutputs=[],this._currentRemainTime=0}release(){this._physicsRig=void 0}initialize(){let _,E,C;for(let A=0;A<this._physicsRig.subRigCount;++A){E=this._physicsRig.settings[A],_=this._physicsRig.particles.slice(E.baseParticleIndex),_[0].initialPosition=new CubismVector2(0,0),_[0].lastPosition=new CubismVector2(_[0].initialPosition.x,_[0].initialPosition.y),_[0].lastGravity=new CubismVector2(0,-1),_[0].lastGravity.y*=-1,_[0].velocity=new CubismVector2(0,0),_[0].force=new CubismVector2(0,0);for(let R=1;R<E.particleCount;++R)C=new CubismVector2(0,0),C.y=_[R].radius,_[R].initialPosition=new CubismVector2(_[R-1].initialPosition.x+C.x,_[R-1].initialPosition.y+C.y),_[R].position=new CubismVector2(_[R].initialPosition.x,_[R].initialPosition.y),_[R].lastPosition=new CubismVector2(_[R].initialPosition.x,_[R].initialPosition.y),_[R].lastGravity=new CubismVector2(0,-1),_[R].lastGravity.y*=-1,_[R].velocity=new CubismVector2(0,0),_[R].force=new CubismVector2(0,0)}}}class Options{constructor(){this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0)}}class PhysicsOutput{constructor(){this.outputs=[]}}function getInputTranslationXFromNormalizedParameterValue(T,_,E,C,A,R,I,F,B,U){T.x+=normalizeParameterValue(E,C,A,R,I.minimum,I.maximum,I.defalut,B)*U}function getInputTranslationYFromNormalizedParamterValue(T,_,E,C,A,R,I,F,B,U){T.y+=normalizeParameterValue(E,C,A,R,I.minimum,I.maximum,I.defalut,B)*U}function getInputAngleFromNormalizedParameterValue(T,_,E,C,A,R,I,F,B,U){_.angle+=normalizeParameterValue(E,C,A,R,F.minimum,F.maximum,F.defalut,B)*U}function getOutputTranslationX(T,_,E,C,A){let R=T.x;return C&&(R*=-1),R}function getOutputTranslationY(T,_,E,C,A){let R=T.y;return C&&(R*=-1),R}function getOutputAngle(T,_,E,C,A){let R;return E>=2?A=_[E-1].position.substract(_[E-2].position):A=A.multiplyByScaler(-1),R=CubismMath.directionToRadian(A,T),C&&(R*=-1),R}function getRangeValue(T,_){return Math.abs(Math.max(T,_)-Math.min(T,_))}function getDefaultValue(T,_){return Math.min(T,_)+getRangeValue(T,_)/2}function getOutputScaleTranslationX(T,_){return T.x}function getOutputScaleTranslationY(T,_){return T.y}function getOutputScaleAngle(T,_){return _}function updateParticles(T,_,E,C,A,R,I,F){let B,U,V,D,O=new CubismVector2(0,0),L=new CubismVector2(0,0),z=new CubismVector2(0,0),W=new CubismVector2(0,0);T[0].position=new CubismVector2(E.x,E.y),B=CubismMath.degreesToRadian(C),D=CubismMath.radianToDirection(B),D.normalize();for(let X=1;X<_;++X)T[X].force=D.multiplyByScaler(T[X].acceleration).add(A),T[X].lastPosition=new CubismVector2(T[X].position.x,T[X].position.y),U=T[X].delay*I*30,O=T[X].position.substract(T[X-1].position),V=CubismMath.directionToRadian(T[X].lastGravity,D)/F,O.x=CubismMath.cos(V)*O.x-O.y*CubismMath.sin(V),O.y=CubismMath.sin(V)*O.x+O.y*CubismMath.cos(V),T[X].position=T[X-1].position.add(O),L=T[X].velocity.multiplyByScaler(U),z=T[X].force.multiplyByScaler(U).multiplyByScaler(U),T[X].position=T[X].position.add(L).add(z),W=T[X].position.substract(T[X-1].position),W.normalize(),T[X].position=T[X-1].position.add(W.multiplyByScaler(T[X].radius)),CubismMath.abs(T[X].position.x)<R&&(T[X].position.x=0),U!=0&&(T[X].velocity=T[X].position.substract(T[X].lastPosition),T[X].velocity=T[X].velocity.divisionByScalar(U),T[X].velocity=T[X].velocity.multiplyByScaler(T[X].mobility)),T[X].force=new CubismVector2(0,0),T[X].lastGravity=new CubismVector2(D.x,D.y)}function updateParticlesForStabilization(T,_,E,C,A,R){let I,F,B=new CubismVector2(0,0);T[0].position=new CubismVector2(E.x,E.y),I=CubismMath.degreesToRadian(C),F=CubismMath.radianToDirection(I),F.normalize();for(let U=1;U<_;++U)T[U].force=F.multiplyByScaler(T[U].acceleration).add(A),T[U].lastPosition=new CubismVector2(T[U].position.x,T[U].position.y),T[U].velocity=new CubismVector2(0,0),B=T[U].force,B.normalize(),B=B.multiplyByScaler(T[U].radius),T[U].position=T[U-1].position.add(B),CubismMath.abs(T[U].position.x)<R&&(T[U].position.x=0),T[U].force=new CubismVector2(0,0),T[U].lastGravity=new CubismVector2(F.x,F.y)}function updateOutputParameterValue(T,_,E,C,A){let R,I,F;R=A.getScale(A.translationScale,A.angleScale),I=C*R,I<_?(I<A.valueBelowMinimum&&(A.valueBelowMinimum=I),I=_):I>E&&(I>A.valueExceededMaximum&&(A.valueExceededMaximum=I),I=E),F=A.weight/MaximumWeight,F>=1||(I=T[0]*(1-F)+I*F),T[0]=I}function normalizeParameterValue(T,_,E,C,A,R,I,F){let B=0;const U=CubismMath.max(E,_);U<T&&(T=U);const V=CubismMath.min(E,_);V>T&&(T=V);const D=CubismMath.min(A,R),O=CubismMath.max(A,R),L=I,z=getDefaultValue(V,U),W=T-z;switch(Math.sign(W)){case 1:{const X=O-L,Y=U-z;Y!=0&&(B=W*(X/Y),B+=L);break}case-1:{const X=D-L,Y=V-z;Y!=0&&(B=W*(X/Y),B+=L);break}case 0:{B=L;break}}return F?B:B*-1}Live2DFactory.registerRuntime({version:4,ready:cubism4Ready,test(T){return T instanceof Cubism4ModelSettings||Cubism4ModelSettings.isValidJSON(T)},isValidMoc(T){if(T.byteLength<4)return!1;const _=new Int8Array(T,0,4);return String.fromCharCode(..._)==="MOC3"},createModelSettings(T){return new Cubism4ModelSettings(T)},createCoreModel(T,_){const E=CubismMoc.create(T,!!(_!=null&&_.checkMocConsistency));try{const C=E.createModel();return C.__moc=E,C}catch(C){try{E.release()}catch{}throw C}},createInternalModel(T,_,E){const C=new Cubism4InternalModel(T,_,E),A=T;return A.__moc&&(C.__moc=A.__moc,delete A.__moc,C.once("destroy",releaseMoc)),C},createPhysics(T,_){return CubismPhysics.create(_)},createPose(T,_){return CubismPose.create(_)}});function releaseMoc(){var T;(T=this.__moc)==null||T.release()}/*!
 * @pixi/particle-emitter - v5.0.8
 * Compiled Mon, 28 Nov 2022 04:01:38 UTC
 *
 * @pixi/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class PropertyNode{constructor(_,E,C){this.value=_,this.time=E,this.next=null,this.isStepped=!1,C?this.ease=typeof C=="function"?C:generateEase(C):this.ease=null}static createList(_){if("list"in _){const C=_.list;let A;const{value:R,time:I}=C[0],F=A=new PropertyNode(typeof R=="string"?hexToRGB(R):R,I,_.ease);if(C.length>2||C.length===2&&C[1].value!==R)for(let B=1;B<C.length;++B){const{value:U,time:V}=C[B];A.next=new PropertyNode(typeof U=="string"?hexToRGB(U):U,V),A=A.next}return F.isStepped=!!_.isStepped,F}const E=new PropertyNode(typeof _.start=="string"?hexToRGB(_.start):_.start,0);return _.end!==_.start&&(E.next=new PropertyNode(typeof _.end=="string"?hexToRGB(_.end):_.end,1)),E}}let GetTextureFromString=Texture.from;const DEG_TO_RADS=Math.PI/180;function rotatePoint(T,_){if(!T)return;const E=Math.sin(T),C=Math.cos(T),A=_.x*C-_.y*E,R=_.x*E+_.y*C;_.x=A,_.y=R}function combineRGBComponents(T,_,E){return T<<16|_<<8|E}function length(T){return Math.sqrt(T.x*T.x+T.y*T.y)}function normalize$1(T){const _=1/length(T);T.x*=_,T.y*=_}function scaleBy(T,_){T.x*=_,T.y*=_}function hexToRGB(T,_){_||(_={}),T.charAt(0)==="#"?T=T.substr(1):T.indexOf("0x")===0&&(T=T.substr(2));let E;return T.length===8&&(E=T.substr(0,2),T=T.substr(2)),_.r=parseInt(T.substr(0,2),16),_.g=parseInt(T.substr(2,2),16),_.b=parseInt(T.substr(4,2),16),E&&(_.a=parseInt(E,16)),_}function generateEase(T){const _=T.length,E=1/_;return function(C){const A=_*C|0,R=(C-A*E)*_,I=T[A]||T[_-1];return I.s+R*(2*(1-R)*(I.cp-I.s)+R*(I.e-I.s))}}function getBlendMode(T){return T?(T=T.toUpperCase().replace(/ /g,"_"),BLEND_MODES[T]||BLEND_MODES.NORMAL):BLEND_MODES.NORMAL}class Particle extends Sprite{constructor(_){super(),this.prevChild=this.nextChild=null,this.emitter=_,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(_){this.maxLife=_,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var BehaviorOrder;(function(T){T[T.Spawn=0]="Spawn",T[T.Normal=2]="Normal",T[T.Late=5]="Late"})(BehaviorOrder||(BehaviorOrder={}));const ticker=Ticker.shared,PositionParticle=Symbol("Position particle per emitter position");class Emitter{constructor(_,E){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new Point,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new Point,this._prevEmitterPos=new Point,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=_,E&&this.init(E),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(_){Emitter.knownBehaviors[_.type]=_}get frequency(){return this._frequency}set frequency(_){typeof _=="number"&&_>0?this._frequency=_:this._frequency=1}get parent(){return this._parent}set parent(_){this.cleanup(),this._parent=_}init(_){if(!_)return;this.cleanup(),this._origConfig=_,this.minLifetime=_.lifetime.min,this.maxLifetime=_.lifetime.max,_.ease?this.customEase=typeof _.ease=="function"?_.ease:generateEase(_.ease):this.customEase=null,this.particlesPerWave=1,_.particlesPerWave&&_.particlesPerWave>1&&(this.particlesPerWave=_.particlesPerWave),this.frequency=_.frequency,this.spawnChance=typeof _.spawnChance=="number"&&_.spawnChance>0?_.spawnChance:1,this.emitterLifetime=_.emitterLifetime||-1,this.maxParticles=_.maxParticles>0?_.maxParticles:1e3,this.addAtBack=!!_.addAtBack,this.rotation=0,this.ownerPos.set(0),_.pos?this.spawnPos.copyFrom(_.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=_.emit===void 0?!0:!!_.emit,this.autoUpdate=!!_.autoUpdate;const E=_.behaviors.map(C=>{const A=Emitter.knownBehaviors[C.type];return A?new A(C.config):(console.error(`Unknown behavior: ${C.type}`),null)}).filter(C=>!!C);E.push(PositionParticle),E.sort((C,A)=>C===PositionParticle?A.order===BehaviorOrder.Spawn?1:-1:A===PositionParticle?C.order===BehaviorOrder.Spawn?-1:1:C.order-A.order),this.initBehaviors=E.slice(),this.updateBehaviors=E.filter(C=>C!==PositionParticle&&C.updateParticle),this.recycleBehaviors=E.filter(C=>C!==PositionParticle&&C.recycleParticle)}getBehavior(_){return Emitter.knownBehaviors[_]&&this.initBehaviors.find(E=>E instanceof Emitter.knownBehaviors[_])||null}fillPool(_){for(;_>0;--_){const E=new Particle(this);E.next=this._poolFirst,this._poolFirst=E}}recycle(_,E=!1){for(let C=0;C<this.recycleBehaviors.length;++C)this.recycleBehaviors[C].recycleParticle(_,!E);_.next&&(_.next.prev=_.prev),_.prev&&(_.prev.next=_.next),_===this._activeParticlesLast&&(this._activeParticlesLast=_.prev),_===this._activeParticlesFirst&&(this._activeParticlesFirst=_.next),_.prev=null,_.next=this._poolFirst,this._poolFirst=_,_.parent&&_.parent.removeChild(_),--this.particleCount}rotate(_){if(this.rotation===_)return;const E=_-this.rotation;this.rotation=_,rotatePoint(E,this.spawnPos),this._posChanged=!0}updateSpawnPos(_,E){this._posChanged=!0,this.spawnPos.x=_,this.spawnPos.y=E}updateOwnerPos(_,E){this._posChanged=!0,this.ownerPos.x=_,this.ownerPos.y=E}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(_){this._emit=!!_,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){this._autoUpdate&&!_?ticker.remove(this.update,this):!this._autoUpdate&&_&&ticker.add(this.update,this),this._autoUpdate=!!_}playOnceAndDestroy(_){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=_}playOnce(_){this.emit=!0,this._completeCallback=_}update(_){if(this._autoUpdate&&(_=ticker.elapsedMS*.001),!this._parent)return;for(let I=this._activeParticlesFirst,F;I;I=F)if(F=I.next,I.age+=_,I.age>I.maxLife||I.age<0)this.recycle(I);else{let B=I.age*I.oneOverLife;this.customEase&&(this.customEase.length===4?B=this.customEase(B,0,1,1):B=this.customEase(B)),I.agePercent=B;for(let U=0;U<this.updateBehaviors.length;++U)if(this.updateBehaviors[U].updateParticle(I,_)){this.recycle(I);break}}let E,C;this._prevPosIsValid&&(E=this._prevEmitterPos.x,C=this._prevEmitterPos.y);const A=this.ownerPos.x+this.spawnPos.x,R=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=_<0?0:_;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let I,F;if(this._prevPosIsValid&&this._posChanged){const V=1+this._spawnTimer/_;I=(A-E)*V+E,F=(R-C)*V+C}else I=A,F=R;let B=null,U=null;for(let V=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),D=0;D<V;++D){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let O;if(this.minLifetime===this.maxLifetime?O=this.minLifetime:O=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=O)continue;let L;this._poolFirst?(L=this._poolFirst,this._poolFirst=this._poolFirst.next,L.next=null):L=new Particle(this),L.init(O),this.addAtBack?this._parent.addChildAt(L,0):this._parent.addChild(L),B?(U.next=L,L.prev=U,U=L):U=B=L,++this.particleCount}if(B){this._activeParticlesLast?(this._activeParticlesLast.next=B,B.prev=this._activeParticlesLast,this._activeParticlesLast=U):(this._activeParticlesFirst=B,this._activeParticlesLast=U);for(let V=0;V<this.initBehaviors.length;++V){const D=this.initBehaviors[V];if(D===PositionParticle)for(let O=B,L;O;O=L){L=O.next,this.rotation!==0&&(rotatePoint(this.rotation,O.position),O.rotation+=this.rotation),O.position.x+=I,O.position.y+=F,O.age+=-this._spawnTimer;let z=O.age*O.oneOverLife;this.customEase&&(this.customEase.length===4?z=this.customEase(z,0,1,1):z=this.customEase(z)),O.agePercent=z}else D.initParticles(B)}for(let V=B,D;V;V=D){D=V.next;for(let O=0;O<this.updateBehaviors.length;++O)if(this.updateBehaviors[O].updateParticle(V,-this._spawnTimer)){this.recycle(V);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=A,this._prevEmitterPos.y=R,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const I=this._completeCallback;this._completeCallback=null,I()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const _=this.ownerPos.x+this.spawnPos.x,E=this.ownerPos.y+this.spawnPos.y;let C=null,A=null;for(let R=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),I=0;I<R;++I){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let F;this._poolFirst?(F=this._poolFirst,this._poolFirst=this._poolFirst.next,F.next=null):F=new Particle(this);let B;this.minLifetime===this.maxLifetime?B=this.minLifetime:B=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,F.init(B),this.addAtBack?this._parent.addChildAt(F,0):this._parent.addChild(F),C?(A.next=F,F.prev=A,A=F):A=C=F,++this.particleCount}if(C){this._activeParticlesLast?(this._activeParticlesLast.next=C,C.prev=this._activeParticlesLast,this._activeParticlesLast=A):(this._activeParticlesFirst=C,this._activeParticlesLast=A);for(let R=0;R<this.initBehaviors.length;++R){const I=this.initBehaviors[R];if(I===PositionParticle)for(let F=C,B;F;F=B)B=F.next,this.rotation!==0&&(rotatePoint(this.rotation,F.position),F.rotation+=this.rotation),F.position.x+=_,F.position.y+=E;else I.initParticles(C)}}}cleanup(){let _,E;for(_=this._activeParticlesFirst;_;_=E)E=_.next,this.recycle(_,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let _;for(let E=this._poolFirst;E;E=_)_=E.next,E.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}Emitter.knownBehaviors={};class Rectangle{constructor(_){this.x=_.x,this.y=_.y,this.w=_.w,this.h=_.h}getRandPos(_){_.x=Math.random()*this.w+this.x,_.y=Math.random()*this.h+this.y}}Rectangle.type="rect";Rectangle.editorConfig=null;class Torus{constructor(_){this.x=_.x||0,this.y=_.y||0,this.radius=_.radius,this.innerRadius=_.innerRadius||0,this.rotation=!!_.affectRotation}getRandPos(_){this.innerRadius!==this.radius?_.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:_.x=this.radius,_.y=0;const E=Math.random()*Math.PI*2;this.rotation&&(_.rotation+=E),rotatePoint(E,_.position),_.position.x+=this.x,_.position.y+=this.y}}Torus.type="torus";Torus.editorConfig=null;class PolygonalChain{constructor(_){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(_)}init(_){if(!_||!_.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(_[0]))for(let E=0;E<_.length;++E){const C=_[E];let A=C[0];for(let R=1;R<C.length;++R){const I=C[R];this.segments.push({p1:A,p2:I,l:0}),A=I}}else{let E=_[0];for(let C=1;C<_.length;++C){const A=_[C];this.segments.push({p1:E,p2:A,l:0}),E=A}}for(let E=0;E<this.segments.length;++E){const{p1:C,p2:A}=this.segments[E],R=Math.sqrt((A.x-C.x)*(A.x-C.x)+(A.y-C.y)*(A.y-C.y));this.segments[E].l=R,this.totalLength+=R,this.countingLengths.push(this.totalLength)}}getRandPos(_){const E=Math.random()*this.totalLength;let C,A;if(this.segments.length===1)C=this.segments[0],A=E;else for(let F=0;F<this.countingLengths.length;++F)if(E<this.countingLengths[F]){C=this.segments[F],A=F===0?E:E-this.countingLengths[F-1];break}A/=C.l||1;const{p1:R,p2:I}=C;_.x=R.x+A*(I.x-R.x),_.y=R.y+A*(I.y-R.y)}}PolygonalChain.type="polygonalChain";PolygonalChain.editorConfig=null;class AccelerationBehavior{constructor(_){var E;this.order=BehaviorOrder.Late,this.minStart=_.minStart,this.maxStart=_.maxStart,this.accel=_.accel,this.rotate=!!_.rotate,this.maxSpeed=(E=_.maxSpeed)!==null&&E!==void 0?E:0}initParticles(_){let E=_;for(;E;){const C=Math.random()*(this.maxStart-this.minStart)+this.minStart;E.config.velocity?E.config.velocity.set(C,0):E.config.velocity=new Point(C,0),rotatePoint(E.rotation,E.config.velocity),E=E.next}}updateParticle(_,E){const C=_.config.velocity,A=C.x,R=C.y;if(C.x+=this.accel.x*E,C.y+=this.accel.y*E,this.maxSpeed){const I=length(C);I>this.maxSpeed&&scaleBy(C,this.maxSpeed/I)}_.x+=(A+C.x)/2*E,_.y+=(R+C.y)/2*E,this.rotate&&(_.rotation=Math.atan2(C.y,C.x))}}AccelerationBehavior.type="moveAcceleration";AccelerationBehavior.editorConfig=null;function intValueSimple(T){return this.ease&&(T=this.ease(T)),(this.first.next.value-this.first.value)*T+this.first.value}function intColorSimple(T){this.ease&&(T=this.ease(T));const _=this.first.value,E=this.first.next.value,C=(E.r-_.r)*T+_.r,A=(E.g-_.g)*T+_.g,R=(E.b-_.b)*T+_.b;return combineRGBComponents(C,A,R)}function intValueComplex(T){this.ease&&(T=this.ease(T));let _=this.first,E=_.next;for(;T>E.time;)_=E,E=E.next;return T=(T-_.time)/(E.time-_.time),(E.value-_.value)*T+_.value}function intColorComplex(T){this.ease&&(T=this.ease(T));let _=this.first,E=_.next;for(;T>E.time;)_=E,E=E.next;T=(T-_.time)/(E.time-_.time);const C=_.value,A=E.value,R=(A.r-C.r)*T+C.r,I=(A.g-C.g)*T+C.g,F=(A.b-C.b)*T+C.b;return combineRGBComponents(R,I,F)}function intValueStepped(T){this.ease&&(T=this.ease(T));let _=this.first;for(;_.next&&T>_.next.time;)_=_.next;return _.value}function intColorStepped(T){this.ease&&(T=this.ease(T));let _=this.first;for(;_.next&&T>_.next.time;)_=_.next;const E=_.value;return combineRGBComponents(E.r,E.g,E.b)}class PropertyList{constructor(_=!1){this.first=null,this.isColor=!!_,this.interpolate=null,this.ease=null}reset(_){this.first=_,_.next&&_.next.time>=1?this.interpolate=this.isColor?intColorSimple:intValueSimple:_.isStepped?this.interpolate=this.isColor?intColorStepped:intValueStepped:this.interpolate=this.isColor?intColorComplex:intValueComplex,this.ease=this.first.ease}}class AlphaBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(_.alpha))}initParticles(_){let E=_;for(;E;)E.alpha=this.list.first.value,E=E.next}updateParticle(_){_.alpha=this.list.interpolate(_.agePercent)}}AlphaBehavior.type="alpha";AlphaBehavior.editorConfig=null;class StaticAlphaBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.value=_.alpha}initParticles(_){let E=_;for(;E;)E.alpha=this.value,E=E.next}}StaticAlphaBehavior.type="alphaStatic";StaticAlphaBehavior.editorConfig=null;function getTextures(T){const _=[];for(let E=0;E<T.length;++E){let C=T[E];if(typeof C=="string")_.push(GetTextureFromString(C));else if(C instanceof Texture)_.push(C);else{let A=C.count||1;for(typeof C.texture=="string"?C=GetTextureFromString(C.texture):C=C.texture;A>0;--A)_.push(C)}}return _}class RandomAnimatedTextureBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.anims=[];for(let E=0;E<_.anims.length;++E){const C=_.anims[E],A=getTextures(C.textures),R=C.framerate<0?-1:C.framerate>0?C.framerate:60,I={textures:A,duration:R>0?A.length/R:0,framerate:R,loop:R>0?!!C.loop:!1};this.anims.push(I)}}initParticles(_){let E=_;for(;E;){const C=Math.floor(Math.random()*this.anims.length),A=E.config.anim=this.anims[C];E.texture=A.textures[0],E.config.animElapsed=0,A.framerate===-1?(E.config.animDuration=E.maxLife,E.config.animFramerate=A.textures.length/E.maxLife):(E.config.animDuration=A.duration,E.config.animFramerate=A.framerate),E=E.next}}updateParticle(_,E){const C=_.config,A=C.anim;C.animElapsed+=E,C.animElapsed>=C.animDuration&&(C.anim.loop?C.animElapsed=C.animElapsed%C.animDuration:C.animElapsed=C.animDuration-1e-6);const R=C.animElapsed*C.animFramerate+1e-7|0;_.texture=A.textures[R]||A.textures[A.textures.length-1]||Texture.EMPTY}}RandomAnimatedTextureBehavior.type="animatedRandom";RandomAnimatedTextureBehavior.editorConfig=null;class SingleAnimatedTextureBehavior{constructor(_){this.order=BehaviorOrder.Normal;const E=_.anim,C=getTextures(E.textures),A=E.framerate<0?-1:E.framerate>0?E.framerate:60;this.anim={textures:C,duration:A>0?C.length/A:0,framerate:A,loop:A>0?!!E.loop:!1}}initParticles(_){let E=_;const C=this.anim;for(;E;)E.texture=C.textures[0],E.config.animElapsed=0,C.framerate===-1?(E.config.animDuration=E.maxLife,E.config.animFramerate=C.textures.length/E.maxLife):(E.config.animDuration=C.duration,E.config.animFramerate=C.framerate),E=E.next}updateParticle(_,E){const C=this.anim,A=_.config;A.animElapsed+=E,A.animElapsed>=A.animDuration&&(C.loop?A.animElapsed=A.animElapsed%A.animDuration:A.animElapsed=A.animDuration-1e-6);const R=A.animElapsed*A.animFramerate+1e-7|0;_.texture=C.textures[R]||C.textures[C.textures.length-1]||Texture.EMPTY}}SingleAnimatedTextureBehavior.type="animatedSingle";SingleAnimatedTextureBehavior.editorConfig=null;class BlendModeBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.value=_.blendMode}initParticles(_){let E=_;for(;E;)E.blendMode=getBlendMode(this.value),E=E.next}}BlendModeBehavior.type="blendMode";BlendModeBehavior.editorConfig=null;class BurstSpawnBehavior{constructor(_){this.order=BehaviorOrder.Spawn,this.spacing=_.spacing*DEG_TO_RADS,this.start=_.start*DEG_TO_RADS,this.distance=_.distance}initParticles(_){let E=0,C=_;for(;C;){let A;this.spacing?A=this.start+this.spacing*E:A=Math.random()*Math.PI*2,C.rotation=A,this.distance&&(C.position.x=this.distance,rotatePoint(A,C.position)),C=C.next,++E}}}BurstSpawnBehavior.type="spawnBurst";BurstSpawnBehavior.editorConfig=null;class ColorBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.list=new PropertyList(!0),this.list.reset(PropertyNode.createList(_.color))}initParticles(_){let E=_;const C=this.list.first.value,A=combineRGBComponents(C.r,C.g,C.b);for(;E;)E.tint=A,E=E.next}updateParticle(_){_.tint=this.list.interpolate(_.agePercent)}}ColorBehavior.type="color";ColorBehavior.editorConfig=null;class StaticColorBehavior{constructor(_){this.order=BehaviorOrder.Normal;let E=_.color;E.charAt(0)==="#"?E=E.substr(1):E.indexOf("0x")===0&&(E=E.substr(2)),this.value=parseInt(E,16)}initParticles(_){let E=_;for(;E;)E.tint=this.value,E=E.next}}StaticColorBehavior.type="colorStatic";StaticColorBehavior.editorConfig=null;class OrderedTextureBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.index=0,this.textures=_.textures.map(E=>typeof E=="string"?GetTextureFromString(E):E)}initParticles(_){let E=_;for(;E;)E.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),E=E.next}}OrderedTextureBehavior.type="textureOrdered";OrderedTextureBehavior.editorConfig=null;const helperPoint=new Point,MATH_FUNCS=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],WHITELISTER=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(MATH_FUNCS).join("|"),"g");function parsePath(T){const _=T.match(WHITELISTER);for(let E=_.length-1;E>=0;--E)MATH_FUNCS.indexOf(_[E])>=0&&(_[E]=`Math.${_[E]}`);return T=_.join(""),new Function("x",`return ${T};`)}class PathBehavior{constructor(_){var E;if(this.order=BehaviorOrder.Late,_.path)if(typeof _.path=="function")this.path=_.path;else try{this.path=parsePath(_.path)}catch{this.path=null}else this.path=C=>C;this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(_.speed)),this.minMult=(E=_.minMult)!==null&&E!==void 0?E:1}initParticles(_){let E=_;for(;E;){E.config.initRotation=E.rotation,E.config.initPosition?E.config.initPosition.copyFrom(E.position):E.config.initPosition=new Point(E.x,E.y),E.config.movement=0;const C=Math.random()*(1-this.minMult)+this.minMult;E.config.speedMult=C,E=E.next}}updateParticle(_,E){const C=this.list.interpolate(_.agePercent)*_.config.speedMult;_.config.movement+=C*E,helperPoint.x=_.config.movement,helperPoint.y=this.path(helperPoint.x),rotatePoint(_.config.initRotation,helperPoint),_.position.x=_.config.initPosition.x+helperPoint.x,_.position.y=_.config.initPosition.y+helperPoint.y}}PathBehavior.type="movePath";PathBehavior.editorConfig=null;class PointSpawnBehavior{constructor(){this.order=BehaviorOrder.Spawn}initParticles(_){}}PointSpawnBehavior.type="spawnPoint";PointSpawnBehavior.editorConfig=null;class RandomTextureBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.textures=_.textures.map(E=>typeof E=="string"?GetTextureFromString(E):E)}initParticles(_){let E=_;for(;E;){const C=Math.floor(Math.random()*this.textures.length);E.texture=this.textures[C],E=E.next}}}RandomTextureBehavior.type="textureRandom";RandomTextureBehavior.editorConfig=null;class RotationBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.minStart=_.minStart*DEG_TO_RADS,this.maxStart=_.maxStart*DEG_TO_RADS,this.minSpeed=_.minSpeed*DEG_TO_RADS,this.maxSpeed=_.maxSpeed*DEG_TO_RADS,this.accel=_.accel*DEG_TO_RADS}initParticles(_){let E=_;for(;E;)this.minStart===this.maxStart?E.rotation+=this.maxStart:E.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,E.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,E=E.next}updateParticle(_,E){if(this.accel){const C=_.config.rotSpeed;_.config.rotSpeed+=this.accel*E,_.rotation+=(_.config.rotSpeed+C)/2*E}else _.rotation+=_.config.rotSpeed*E}}RotationBehavior.type="rotation";RotationBehavior.editorConfig=null;class StaticRotationBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.min=_.min*DEG_TO_RADS,this.max=_.max*DEG_TO_RADS}initParticles(_){let E=_;for(;E;)this.min===this.max?E.rotation+=this.max:E.rotation+=Math.random()*(this.max-this.min)+this.min,E=E.next}}StaticRotationBehavior.type="rotationStatic";StaticRotationBehavior.editorConfig=null;class NoRotationBehavior{constructor(_){this.order=BehaviorOrder.Late+1,this.rotation=(_.rotation||0)*DEG_TO_RADS}initParticles(_){let E=_;for(;E;)E.rotation=this.rotation,E=E.next}}NoRotationBehavior.type="noRotation";NoRotationBehavior.editorConfig=null;class ScaleBehavior{constructor(_){var E;this.order=BehaviorOrder.Normal,this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(_.scale)),this.minMult=(E=_.minMult)!==null&&E!==void 0?E:1}initParticles(_){let E=_;for(;E;){const C=Math.random()*(1-this.minMult)+this.minMult;E.config.scaleMult=C,E.scale.x=E.scale.y=this.list.first.value*C,E=E.next}}updateParticle(_){_.scale.x=_.scale.y=this.list.interpolate(_.agePercent)*_.config.scaleMult}}ScaleBehavior.type="scale";ScaleBehavior.editorConfig=null;class StaticScaleBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.min=_.min,this.max=_.max}initParticles(_){let E=_;for(;E;){const C=Math.random()*(this.max-this.min)+this.min;E.scale.x=E.scale.y=C,E=E.next}}}StaticScaleBehavior.type="scaleStatic";StaticScaleBehavior.editorConfig=null;class ShapeSpawnBehavior{constructor(_){this.order=BehaviorOrder.Spawn;const E=ShapeSpawnBehavior.shapes[_.type];if(!E)throw new Error(`No shape found with type '${_.type}'`);this.shape=new E(_.data)}static registerShape(_,E){ShapeSpawnBehavior.shapes[E||_.type]=_}initParticles(_){let E=_;for(;E;)this.shape.getRandPos(E),E=E.next}}ShapeSpawnBehavior.type="spawnShape";ShapeSpawnBehavior.editorConfig=null;ShapeSpawnBehavior.shapes={};ShapeSpawnBehavior.registerShape(PolygonalChain);ShapeSpawnBehavior.registerShape(Rectangle);ShapeSpawnBehavior.registerShape(Torus);ShapeSpawnBehavior.registerShape(Torus,"circle");class SingleTextureBehavior{constructor(_){this.order=BehaviorOrder.Normal,this.texture=typeof _.texture=="string"?GetTextureFromString(_.texture):_.texture}initParticles(_){let E=_;for(;E;)E.texture=this.texture,E=E.next}}SingleTextureBehavior.type="textureSingle";SingleTextureBehavior.editorConfig=null;class SpeedBehavior{constructor(_){var E;this.order=BehaviorOrder.Late,this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(_.speed)),this.minMult=(E=_.minMult)!==null&&E!==void 0?E:1}initParticles(_){let E=_;for(;E;){const C=Math.random()*(1-this.minMult)+this.minMult;E.config.speedMult=C,E.config.velocity?E.config.velocity.set(this.list.first.value*C,0):E.config.velocity=new Point(this.list.first.value*C,0),rotatePoint(E.rotation,E.config.velocity),E=E.next}}updateParticle(_,E){const C=this.list.interpolate(_.agePercent)*_.config.speedMult,A=_.config.velocity;normalize$1(A),scaleBy(A,C),_.x+=A.x*E,_.y+=A.y*E}}SpeedBehavior.type="moveSpeed";SpeedBehavior.editorConfig=null;class StaticSpeedBehavior{constructor(_){this.order=BehaviorOrder.Late,this.min=_.min,this.max=_.max}initParticles(_){let E=_;for(;E;){const C=Math.random()*(this.max-this.min)+this.min;E.config.velocity?E.config.velocity.set(C,0):E.config.velocity=new Point(C,0),rotatePoint(E.rotation,E.config.velocity),E=E.next}}updateParticle(_,E){const C=_.config.velocity;_.x+=C.x*E,_.y+=C.y*E}}StaticSpeedBehavior.type="moveSpeedStatic";StaticSpeedBehavior.editorConfig=null;Emitter.registerBehavior(AccelerationBehavior);Emitter.registerBehavior(AlphaBehavior);Emitter.registerBehavior(StaticAlphaBehavior);Emitter.registerBehavior(RandomAnimatedTextureBehavior);Emitter.registerBehavior(SingleAnimatedTextureBehavior);Emitter.registerBehavior(BlendModeBehavior);Emitter.registerBehavior(BurstSpawnBehavior);Emitter.registerBehavior(ColorBehavior);Emitter.registerBehavior(StaticColorBehavior);Emitter.registerBehavior(OrderedTextureBehavior);Emitter.registerBehavior(PathBehavior);Emitter.registerBehavior(PointSpawnBehavior);Emitter.registerBehavior(RandomTextureBehavior);Emitter.registerBehavior(RotationBehavior);Emitter.registerBehavior(StaticRotationBehavior);Emitter.registerBehavior(NoRotationBehavior);Emitter.registerBehavior(ScaleBehavior);Emitter.registerBehavior(StaticScaleBehavior);Emitter.registerBehavior(ShapeSpawnBehavior);Emitter.registerBehavior(SingleTextureBehavior);Emitter.registerBehavior(SpeedBehavior);Emitter.registerBehavior(StaticSpeedBehavior);const snowflakeImg=""+new URL("snowflake-CtaH31BT.png",import.meta.url).href,heartImg=""+new URL("heart-Btev9kkm.png",import.meta.url).href,micImg=""+new URL("mic-88lgJskc.png",import.meta.url).href;function _assertThisInitialized$4(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function _inheritsLoose(T,_){T.prototype=Object.create(_.prototype),T.prototype.constructor=T,T.__proto__=_}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _config$1={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function T(_){return typeof _=="string"},_isFunction=function T(_){return typeof _=="function"},_isNumber=function T(_){return typeof _=="number"},_isUndefined=function T(_){return typeof _>"u"},_isObject=function T(_){return typeof _=="object"},_isNotFalse=function T(_){return _!==!1},_windowExists$1=function T(){return typeof window<"u"},_isFuncOrString=function T(_){return _isFunction(_)||_isString(_)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function T(_){return(_installScope=_merge(_,_globals))&&gsap},_missingPlugin=function T(_,E){return console.warn("Invalid property",_,"set to",E,"Missing plugin? gsap.registerPlugin()")},_warn=function T(_,E){return!E&&console.warn(_)},_addGlobal=function T(_,E){return _&&(_globals[_]=E)&&_installScope&&(_installScope[_]=E)||_globals},_emptyFunc=function T(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function T(_){var E=_[0],C,A;if(_isObject(E)||_isFunction(E)||(_=[_]),!(C=(E._gsap||{}).harness)){for(A=_harnessPlugins.length;A--&&!_harnessPlugins[A].targetTest(E););C=_harnessPlugins[A]}for(A=_.length;A--;)_[A]&&(_[A]._gsap||(_[A]._gsap=new GSCache(_[A],C)))||_.splice(A,1);return _},_getCache=function T(_){return _._gsap||_harness(toArray(_))[0]._gsap},_getProperty=function T(_,E,C){return(C=_[E])&&_isFunction(C)?_[E]():_isUndefined(C)&&_.getAttribute&&_.getAttribute(E)||C},_forEachName=function T(_,E){return(_=_.split(",")).forEach(E)||_},_round=function T(_){return Math.round(_*1e5)/1e5||0},_roundPrecise=function T(_){return Math.round(_*1e7)/1e7||0},_parseRelative=function T(_,E){var C=E.charAt(0),A=parseFloat(E.substr(2));return _=parseFloat(_),C==="+"?_+A:C==="-"?_-A:C==="*"?_*A:_/A},_arrayContainsAny=function T(_,E){for(var C=E.length,A=0;_.indexOf(E[A])<0&&++A<C;);return A<C},_lazyRender=function T(){var _=_lazyTweens.length,E=_lazyTweens.slice(0),C,A;for(_lazyLookup={},_lazyTweens.length=0,C=0;C<_;C++)A=E[C],A&&A._lazy&&(A.render(A._lazy[0],A._lazy[1],!0)._lazy=0)},_isRevertWorthy=function T(_){return!!(_._initted||_._startAt||_.add)},_lazySafeRender=function T(_,E,C,A){_lazyTweens.length&&!_reverting$1&&_lazyRender(),_.render(E,C,!!(_reverting$1&&E<0&&_isRevertWorthy(_))),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function T(_){var E=parseFloat(_);return(E||E===0)&&(_+"").match(_delimitedValueExp).length<2?E:_isString(_)?_.trim():_},_passThrough=function T(_){return _},_setDefaults=function T(_,E){for(var C in E)C in _||(_[C]=E[C]);return _},_setKeyframeDefaults=function T(_){return function(E,C){for(var A in C)A in E||A==="duration"&&_||A==="ease"||(E[A]=C[A])}},_merge=function T(_,E){for(var C in E)_[C]=E[C];return _},_mergeDeep=function T(_,E){for(var C in E)C!=="__proto__"&&C!=="constructor"&&C!=="prototype"&&(_[C]=_isObject(E[C])?T(_[C]||(_[C]={}),E[C]):E[C]);return _},_copyExcluding=function T(_,E){var C={},A;for(A in _)A in E||(C[A]=_[A]);return C},_inheritDefaults=function T(_){var E=_.parent||_globalTimeline,C=_.keyframes?_setKeyframeDefaults(_isArray(_.keyframes)):_setDefaults;if(_isNotFalse(_.inherit))for(;E;)C(_,E.vars.defaults),E=E.parent||E._dp;return _},_arraysMatch=function T(_,E){for(var C=_.length,A=C===E.length;A&&C--&&_[C]===E[C];);return C<0},_addLinkedListItem=function T(_,E,C,A,R){var I=_[A],F;if(R)for(F=E[R];I&&I[R]>F;)I=I._prev;return I?(E._next=I._next,I._next=E):(E._next=_[C],_[C]=E),E._next?E._next._prev=E:_[A]=E,E._prev=I,E.parent=E._dp=_,E},_removeLinkedListItem=function T(_,E,C,A){C===void 0&&(C="_first"),A===void 0&&(A="_last");var R=E._prev,I=E._next;R?R._next=I:_[C]===E&&(_[C]=I),I?I._prev=R:_[A]===E&&(_[A]=R),E._next=E._prev=E.parent=null},_removeFromParent=function T(_,E){_.parent&&(!E||_.parent.autoRemoveChildren)&&_.parent.remove&&_.parent.remove(_),_._act=0},_uncache=function T(_,E){if(_&&(!E||E._end>_._dur||E._start<0))for(var C=_;C;)C._dirty=1,C=C.parent;return _},_recacheAncestors=function T(_){for(var E=_.parent;E&&E.parent;)E._dirty=1,E.totalDuration(),E=E.parent;return _},_rewindStartAt=function T(_,E,C,A){return _._startAt&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_.vars.immediateRender&&!_.vars.autoRevert||_._startAt.render(E,!0,A))},_hasNoPausedAncestors=function T(_){return!_||_._ts&&T(_.parent)},_elapsedCycleDuration=function T(_){return _._repeat?_animationCycle(_._tTime,_=_.duration()+_._rDelay)*_:0},_animationCycle=function T(_,E){var C=Math.floor(_=_roundPrecise(_/E));return _&&C===_?C-1:C},_parentToChildTotalTime=function T(_,E){return(_-E._start)*E._ts+(E._ts>=0?0:E._dirty?E.totalDuration():E._tDur)},_setEnd=function T(_){return _._end=_roundPrecise(_._start+(_._tDur/Math.abs(_._ts||_._rts||_tinyNum)||0))},_alignPlayhead=function T(_,E){var C=_._dp;return C&&C.smoothChildTiming&&_._ts&&(_._start=_roundPrecise(C._time-(_._ts>0?E/_._ts:((_._dirty?_.totalDuration():_._tDur)-E)/-_._ts)),_setEnd(_),C._dirty||_uncache(C,_)),_},_postAddChecks=function T(_,E){var C;if((E._time||!E._dur&&E._initted||E._start<_._time&&(E._dur||!E.add))&&(C=_parentToChildTotalTime(_.rawTime(),E),(!E._dur||_clamp(0,E.totalDuration(),C)-E._tTime>_tinyNum)&&E.render(C,!0)),_uncache(_,E)._dp&&_._initted&&_._time>=_._dur&&_._ts){if(_._dur<_.duration())for(C=_;C._dp;)C.rawTime()>=0&&C.totalTime(C._tTime),C=C._dp;_._zTime=-1e-8}},_addToTimeline=function T(_,E,C,A){return E.parent&&_removeFromParent(E),E._start=_roundPrecise((_isNumber(C)?C:C||_!==_globalTimeline?_parsePosition(_,C,E):_._time)+E._delay),E._end=_roundPrecise(E._start+(E.totalDuration()/Math.abs(E.timeScale())||0)),_addLinkedListItem(_,E,"_first","_last",_._sort?"_start":0),_isFromOrFromStart(E)||(_._recent=E),A||_postAddChecks(_,E),_._ts<0&&_alignPlayhead(_,_._tTime),_},_scrollTrigger=function T(_,E){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",E))&&_globals.ScrollTrigger.create(E,_)},_attemptInitTween=function T(_,E,C,A,R){if(_initTween(_,E,R),!_._initted)return 1;if(!C&&_._pt&&!_reverting$1&&(_._dur&&_.vars.lazy!==!1||!_._dur&&_.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(_),_._lazy=[R,A],1},_parentPlayheadIsBeforeStart=function T(_){var E=_.parent;return E&&E._ts&&E._initted&&!E._lock&&(E.rawTime()<0||T(E))},_isFromOrFromStart=function T(_){var E=_.data;return E==="isFromStart"||E==="isStart"},_renderZeroDurationTween=function T(_,E,C,A){var R=_.ratio,I=E<0||!E&&(!_._start&&_parentPlayheadIsBeforeStart(_)&&!(!_._initted&&_isFromOrFromStart(_))||(_._ts<0||_._dp._ts<0)&&!_isFromOrFromStart(_))?0:1,F=_._rDelay,B=0,U,V,D;if(F&&_._repeat&&(B=_clamp(0,_._tDur,E),V=_animationCycle(B,F),_._yoyo&&V&1&&(I=1-I),V!==_animationCycle(_._tTime,F)&&(R=1-I,_.vars.repeatRefresh&&_._initted&&_.invalidate())),I!==R||_reverting$1||A||_._zTime===_tinyNum||!E&&_._zTime){if(!_._initted&&_attemptInitTween(_,E,A,C,B))return;for(D=_._zTime,_._zTime=E||(C?_tinyNum:0),C||(C=E&&!D),_.ratio=I,_._from&&(I=1-I),_._time=0,_._tTime=B,U=_._pt;U;)U.r(I,U.d),U=U._next;E<0&&_rewindStartAt(_,E,C,!0),_._onUpdate&&!C&&_callback(_,"onUpdate"),B&&_._repeat&&!C&&_.parent&&_callback(_,"onRepeat"),(E>=_._tDur||E<0)&&_.ratio===I&&(I&&_removeFromParent(_,1),!C&&!_reverting$1&&(_callback(_,I?"onComplete":"onReverseComplete",!0),_._prom&&_._prom()))}else _._zTime||(_._zTime=E)},_findNextPauseTween=function T(_,E,C){var A;if(C>E)for(A=_._first;A&&A._start<=C;){if(A.data==="isPause"&&A._start>E)return A;A=A._next}else for(A=_._last;A&&A._start>=C;){if(A.data==="isPause"&&A._start<E)return A;A=A._prev}},_setDuration=function T(_,E,C,A){var R=_._repeat,I=_roundPrecise(E)||0,F=_._tTime/_._tDur;return F&&!A&&(_._time*=I/_._dur),_._dur=I,_._tDur=R?R<0?1e10:_roundPrecise(I*(R+1)+_._rDelay*R):I,F>0&&!A&&_alignPlayhead(_,_._tTime=_._tDur*F),_.parent&&_setEnd(_),C||_uncache(_.parent,_),_},_onUpdateTotalDuration=function T(_){return _ instanceof Timeline?_uncache(_):_setDuration(_,_._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function T(_,E,C){var A=_.labels,R=_._recent||_zeroPosition,I=_.duration()>=_bigNum$1?R.endTime(!1):_._dur,F,B,U;return _isString(E)&&(isNaN(E)||E in A)?(B=E.charAt(0),U=E.substr(-1)==="%",F=E.indexOf("="),B==="<"||B===">"?(F>=0&&(E=E.replace(/=/,"")),(B==="<"?R._start:R.endTime(R._repeat>=0))+(parseFloat(E.substr(1))||0)*(U?(F<0?R:C).totalDuration()/100:1)):F<0?(E in A||(A[E]=I),A[E]):(B=parseFloat(E.charAt(F-1)+E.substr(F+1)),U&&C&&(B=B/100*(_isArray(C)?C[0]:C).totalDuration()),F>1?T(_,E.substr(0,F-1),C)+B:I+B)):E==null?I:+E},_createTweenType=function T(_,E,C){var A=_isNumber(E[1]),R=(A?2:1)+(_<2?0:1),I=E[R],F,B;if(A&&(I.duration=E[1]),I.parent=C,_){for(F=I,B=C;B&&!("immediateRender"in F);)F=B.vars.defaults||{},B=_isNotFalse(B.vars.inherit)&&B.parent;I.immediateRender=_isNotFalse(F.immediateRender),_<2?I.runBackwards=1:I.startAt=E[R-1]}return new Tween(E[0],I,E[R+1])},_conditionalReturn=function T(_,E){return _||_===0?E(_):E},_clamp=function T(_,E,C){return C<_?_:C>E?E:C},getUnit=function T(_,E){return!_isString(_)||!(E=_unitExp.exec(_))?"":E[1]},clamp=function T(_,E,C){return _conditionalReturn(C,function(A){return _clamp(_,E,A)})},_slice=[].slice,_isArrayLike=function T(_,E){return _&&_isObject(_)&&"length"in _&&(!E&&!_.length||_.length-1 in _&&_isObject(_[0]))&&!_.nodeType&&_!==_win$1},_flatten=function T(_,E,C){return C===void 0&&(C=[]),_.forEach(function(A){var R;return _isString(A)&&!E||_isArrayLike(A,1)?(R=C).push.apply(R,toArray(A)):C.push(A)})||C},toArray=function T(_,E,C){return _context&&!E&&_context.selector?_context.selector(_):_isString(_)&&!C&&(_coreInitted||!_wake())?_slice.call((E||_doc$1).querySelectorAll(_),0):_isArray(_)?_flatten(_,C):_isArrayLike(_)?_slice.call(_,0):_?[_]:[]},selector=function T(_){return _=toArray(_)[0]||_warn("Invalid scope")||{},function(E){var C=_.current||_.nativeElement||_;return toArray(E,C.querySelectorAll?C:C===_?_warn("Invalid scope")||_doc$1.createElement("div"):_)}},shuffle=function T(_){return _.sort(function(){return .5-Math.random()})},distribute=function T(_){if(_isFunction(_))return _;var E=_isObject(_)?_:{each:_},C=_parseEase(E.ease),A=E.from||0,R=parseFloat(E.base)||0,I={},F=A>0&&A<1,B=isNaN(A)||F,U=E.axis,V=A,D=A;return _isString(A)?V=D={center:.5,edges:.5,end:1}[A]||0:!F&&B&&(V=A[0],D=A[1]),function(O,L,z){var W=(z||E).length,X=I[W],Y,K,Q,ee,J,ie,re,se,ne;if(!X){if(ne=E.grid==="auto"?0:(E.grid||[1,_bigNum$1])[1],!ne){for(re=-1e8;re<(re=z[ne++].getBoundingClientRect().left)&&ne<W;);ne<W&&ne--}for(X=I[W]=[],Y=B?Math.min(ne,W)*V-.5:A%ne,K=ne===_bigNum$1?0:B?W*D/ne-.5:A/ne|0,re=0,se=_bigNum$1,ie=0;ie<W;ie++)Q=ie%ne-Y,ee=K-(ie/ne|0),X[ie]=J=U?Math.abs(U==="y"?ee:Q):_sqrt(Q*Q+ee*ee),J>re&&(re=J),J<se&&(se=J);A==="random"&&shuffle(X),X.max=re-se,X.min=se,X.v=W=(parseFloat(E.amount)||parseFloat(E.each)*(ne>W?W-1:U?U==="y"?W/ne:ne:Math.max(ne,W/ne))||0)*(A==="edges"?-1:1),X.b=W<0?R-W:R,X.u=getUnit(E.amount||E.each)||0,C=C&&W<0?_invertEase(C):C}return W=(X[O]-X.min)/X.max||0,_roundPrecise(X.b+(C?C(W):W)*X.v)+X.u}},_roundModifier=function T(_){var E=Math.pow(10,((_+"").split(".")[1]||"").length);return function(C){var A=_roundPrecise(Math.round(parseFloat(C)/_)*_*E);return(A-A%1)/E+(_isNumber(C)?0:getUnit(C))}},snap=function T(_,E){var C=_isArray(_),A,R;return!C&&_isObject(_)&&(A=C=_.radius||_bigNum$1,_.values?(_=toArray(_.values),(R=!_isNumber(_[0]))&&(A*=A)):_=_roundModifier(_.increment)),_conditionalReturn(E,C?_isFunction(_)?function(I){return R=_(I),Math.abs(R-I)<=A?R:I}:function(I){for(var F=parseFloat(R?I.x:I),B=parseFloat(R?I.y:0),U=_bigNum$1,V=0,D=_.length,O,L;D--;)R?(O=_[D].x-F,L=_[D].y-B,O=O*O+L*L):O=Math.abs(_[D]-F),O<U&&(U=O,V=D);return V=!A||U<=A?_[V]:I,R||V===I||_isNumber(I)?V:V+getUnit(I)}:_roundModifier(_))},random=function T(_,E,C,A){return _conditionalReturn(_isArray(_)?!E:C===!0?!!(C=0):!A,function(){return _isArray(_)?_[~~(Math.random()*_.length)]:(C=C||1e-5)&&(A=C<1?Math.pow(10,(C+"").length-2):1)&&Math.floor(Math.round((_-C/2+Math.random()*(E-_+C*.99))/C)*C*A)/A})},pipe=function T(){for(var _=arguments.length,E=new Array(_),C=0;C<_;C++)E[C]=arguments[C];return function(A){return E.reduce(function(R,I){return I(R)},A)}},unitize=function T(_,E){return function(C){return _(parseFloat(C))+(E||getUnit(C))}},normalize=function T(_,E,C){return mapRange(_,E,0,1,C)},_wrapArray=function T(_,E,C){return _conditionalReturn(C,function(A){return _[~~E(A)]})},wrap=function T(_,E,C){var A=E-_;return _isArray(_)?_wrapArray(_,T(0,_.length),E):_conditionalReturn(C,function(R){return(A+(R-_)%A)%A+_})},wrapYoyo=function T(_,E,C){var A=E-_,R=A*2;return _isArray(_)?_wrapArray(_,T(0,_.length-1),E):_conditionalReturn(C,function(I){return I=(R+(I-_)%R)%R||0,_+(I>A?R-I:I)})},_replaceRandom=function T(_){for(var E=0,C="",A,R,I,F;~(A=_.indexOf("random(",E));)I=_.indexOf(")",A),F=_.charAt(A+7)==="[",R=_.substr(A+7,I-A-7).match(F?_delimitedValueExp:_strictNumExp),C+=_.substr(E,A-E)+random(F?R:+R[0],F?0:+R[1],+R[2]||1e-5),E=I+1;return C+_.substr(E,_.length-E)},mapRange=function T(_,E,C,A,R){var I=E-_,F=A-C;return _conditionalReturn(R,function(B){return C+((B-_)/I*F||0)})},interpolate=function T(_,E,C,A){var R=isNaN(_+E)?0:function(L){return(1-L)*_+L*E};if(!R){var I=_isString(_),F={},B,U,V,D,O;if(C===!0&&(A=1)&&(C=null),I)_={p:_},E={p:E};else if(_isArray(_)&&!_isArray(E)){for(V=[],D=_.length,O=D-2,U=1;U<D;U++)V.push(T(_[U-1],_[U]));D--,R=function(z){z*=D;var W=Math.min(O,~~z);return V[W](z-W)},C=E}else A||(_=_merge(_isArray(_)?[]:{},_));if(!V){for(B in E)_addPropTween.call(F,_,B,"get",E[B]);R=function(z){return _renderPropTweens(z,F)||(I?_.p:_)}}}return _conditionalReturn(C,R)},_getLabelInDirection=function T(_,E,C){var A=_.labels,R=_bigNum$1,I,F,B;for(I in A)F=A[I]-E,F<0==!!C&&F&&R>(F=Math.abs(F))&&(B=I,R=F);return B},_callback=function T(_,E,C){var A=_.vars,R=A[E],I=_context,F=_._ctx,B,U,V;if(R)return B=A[E+"Params"],U=A.callbackScope||_,C&&_lazyTweens.length&&_lazyRender(),F&&(_context=F),V=B?R.apply(U,B):R.call(U),_context=I,V},_interrupt=function T(_){return _removeFromParent(_),_.scrollTrigger&&_.scrollTrigger.kill(!!_reverting$1),_.progress()<1&&_callback(_,"onInterrupt"),_},_quickTween,_registerPluginQueue=[],_createPlugin=function T(_){if(_)if(_=!_.name&&_.default||_,_windowExists$1()||_.headless){var E=_.name,C=_isFunction(_),A=E&&!C&&_.init?function(){this._props=[]}:_,R={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},I={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),_!==A){if(_plugins[E])return;_setDefaults(A,_setDefaults(_copyExcluding(_,R),I)),_merge(A.prototype,_merge(R,_copyExcluding(_,I))),_plugins[A.prop=E]=A,_.targetTest&&(_harnessPlugins.push(A),_reservedProps[E]=1),E=(E==="css"?"CSS":E.charAt(0).toUpperCase()+E.substr(1))+"Plugin"}_addGlobal(E,A),_.register&&_.register(gsap,A,PropTween)}else _registerPluginQueue.push(_)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function T(_,E,C){return _+=_<0?1:_>1?-1:0,(_*6<1?E+(C-E)*_*6:_<.5?C:_*3<2?E+(C-E)*(2/3-_)*6:E)*_255+.5|0},splitColor=function T(_,E,C){var A=_?_isNumber(_)?[_>>16,_>>8&_255,_&_255]:0:_colorLookup.black,R,I,F,B,U,V,D,O,L,z;if(!A){if(_.substr(-1)===","&&(_=_.substr(0,_.length-1)),_colorLookup[_])A=_colorLookup[_];else if(_.charAt(0)==="#"){if(_.length<6&&(R=_.charAt(1),I=_.charAt(2),F=_.charAt(3),_="#"+R+R+I+I+F+F+(_.length===5?_.charAt(4)+_.charAt(4):"")),_.length===9)return A=parseInt(_.substr(1,6),16),[A>>16,A>>8&_255,A&_255,parseInt(_.substr(7),16)/255];_=parseInt(_.substr(1),16),A=[_>>16,_>>8&_255,_&_255]}else if(_.substr(0,3)==="hsl"){if(A=z=_.match(_strictNumExp),!E)B=+A[0]%360/360,U=+A[1]/100,V=+A[2]/100,I=V<=.5?V*(U+1):V+U-V*U,R=V*2-I,A.length>3&&(A[3]*=1),A[0]=_hue(B+1/3,R,I),A[1]=_hue(B,R,I),A[2]=_hue(B-1/3,R,I);else if(~_.indexOf("="))return A=_.match(_numExp),C&&A.length<4&&(A[3]=1),A}else A=_.match(_strictNumExp)||_colorLookup.transparent;A=A.map(Number)}return E&&!z&&(R=A[0]/_255,I=A[1]/_255,F=A[2]/_255,D=Math.max(R,I,F),O=Math.min(R,I,F),V=(D+O)/2,D===O?B=U=0:(L=D-O,U=V>.5?L/(2-D-O):L/(D+O),B=D===R?(I-F)/L+(I<F?6:0):D===I?(F-R)/L+2:(R-I)/L+4,B*=60),A[0]=~~(B+.5),A[1]=~~(U*100+.5),A[2]=~~(V*100+.5)),C&&A.length<4&&(A[3]=1),A},_colorOrderData=function T(_){var E=[],C=[],A=-1;return _.split(_colorExp).forEach(function(R){var I=R.match(_numWithUnitExp)||[];E.push.apply(E,I),C.push(A+=I.length+1)}),E.c=C,E},_formatColors=function T(_,E,C){var A="",R=(_+A).match(_colorExp),I=E?"hsla(":"rgba(",F=0,B,U,V,D;if(!R)return _;if(R=R.map(function(O){return(O=splitColor(O,E,1))&&I+(E?O[0]+","+O[1]+"%,"+O[2]+"%,"+O[3]:O.join(","))+")"}),C&&(V=_colorOrderData(_),B=C.c,B.join(A)!==V.c.join(A)))for(U=_.replace(_colorExp,"1").split(_numWithUnitExp),D=U.length-1;F<D;F++)A+=U[F]+(~B.indexOf(F)?R.shift()||I+"0,0,0,0)":(V.length?V:R.length?R:C).shift());if(!U)for(U=_.split(_colorExp),D=U.length-1;F<D;F++)A+=U[F]+R[F];return A+U[D]},_colorExp=function(){var T="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",_;for(_ in _colorLookup)T+="|"+_+"\\b";return new RegExp(T+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function T(_){var E=_.join(" "),C;if(_colorExp.lastIndex=0,_colorExp.test(E))return C=_hslExp.test(E),_[1]=_formatColors(_[1],C),_[0]=_formatColors(_[0],C,_colorOrderData(_[1])),!0},_tickerActive,_ticker=function(){var T=Date.now,_=500,E=33,C=T(),A=C,R=1e3/240,I=R,F=[],B,U,V,D,O,L,z=function W(X){var Y=T()-A,K=X===!0,Q,ee,J,ie;if((Y>_||Y<0)&&(C+=Y-E),A+=Y,J=A-C,Q=J-I,(Q>0||K)&&(ie=++D.frame,O=J-D.time*1e3,D.time=J=J/1e3,I+=Q+(Q>=R?4:R-Q),ee=1),K||(B=U(W)),ee)for(L=0;L<F.length;L++)F[L](J,O,ie,X)};return D={time:0,frame:0,tick:function(){z(!0)},deltaRatio:function(X){return O/(1e3/(X||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),_registerPluginQueue.forEach(_createPlugin)),V=typeof requestAnimationFrame<"u"&&requestAnimationFrame,B&&D.sleep(),U=V||function(X){return setTimeout(X,I-D.time*1e3+1|0)},_tickerActive=1,z(2))},sleep:function(){(V?cancelAnimationFrame:clearTimeout)(B),_tickerActive=0,U=_emptyFunc},lagSmoothing:function(X,Y){_=X||1/0,E=Math.min(Y||33,_)},fps:function(X){R=1e3/(X||240),I=D.time*1e3+R},add:function(X,Y,K){var Q=Y?function(ee,J,ie,re){X(ee,J,ie,re),D.remove(Q)}:X;return D.remove(X),F[K?"unshift":"push"](Q),_wake(),Q},remove:function(X,Y){~(Y=F.indexOf(X))&&F.splice(Y,1)&&L>=Y&&L--},_listeners:F},D}(),_wake=function T(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function T(_){for(var E={},C=_.substr(1,_.length-3).split(":"),A=C[0],R=1,I=C.length,F,B,U;R<I;R++)B=C[R],F=R!==I-1?B.lastIndexOf(","):B.length,U=B.substr(0,F),E[A]=isNaN(U)?U.replace(_quotesExp,"").trim():+U,A=B.substr(F+1).trim();return E},_valueInParentheses=function T(_){var E=_.indexOf("(")+1,C=_.indexOf(")"),A=_.indexOf("(",E);return _.substring(E,~A&&A<C?_.indexOf(")",C+1):C)},_configEaseFromString=function T(_){var E=(_+"").split("("),C=_easeMap[E[0]];return C&&E.length>1&&C.config?C.config.apply(null,~_.indexOf("{")?[_parseObjectInString(E[1])]:_valueInParentheses(_).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(_)?_easeMap._CE("",_):C},_invertEase=function T(_){return function(E){return 1-_(1-E)}},_propagateYoyoEase=function T(_,E){for(var C=_._first,A;C;)C instanceof Timeline?T(C,E):C.vars.yoyoEase&&(!C._yoyo||!C._repeat)&&C._yoyo!==E&&(C.timeline?T(C.timeline,E):(A=C._ease,C._ease=C._yEase,C._yEase=A,C._yoyo=E)),C=C._next},_parseEase=function T(_,E){return _&&(_isFunction(_)?_:_easeMap[_]||_configEaseFromString(_))||E},_insertEase=function T(_,E,C,A){C===void 0&&(C=function(B){return 1-E(1-B)}),A===void 0&&(A=function(B){return B<.5?E(B*2)/2:1-E((1-B)*2)/2});var R={easeIn:E,easeOut:C,easeInOut:A},I;return _forEachName(_,function(F){_easeMap[F]=_globals[F]=R,_easeMap[I=F.toLowerCase()]=C;for(var B in R)_easeMap[I+(B==="easeIn"?".in":B==="easeOut"?".out":".inOut")]=_easeMap[F+"."+B]=R[B]}),R},_easeInOutFromOut=function T(_){return function(E){return E<.5?(1-_(1-E*2))/2:.5+_((E-.5)*2)/2}},_configElastic=function T(_,E,C){var A=E>=1?E:1,R=(C||(_?.3:.45))/(E<1?E:1),I=R/_2PI*(Math.asin(1/A)||0),F=function(V){return V===1?1:A*Math.pow(2,-10*V)*_sin((V-I)*R)+1},B=_==="out"?F:_==="in"?function(U){return 1-F(1-U)}:_easeInOutFromOut(F);return R=_2PI/R,B.config=function(U,V){return T(_,U,V)},B},_configBack=function T(_,E){E===void 0&&(E=1.70158);var C=function(I){return I?--I*I*((E+1)*I+E)+1:0},A=_==="out"?C:_==="in"?function(R){return 1-C(1-R)}:_easeInOutFromOut(C);return A.config=function(R){return T(_,R)},A};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(T,_){var E=_<5?_+1:_;_insertEase(T+",Power"+(E-1),_?function(C){return Math.pow(C,E)}:function(C){return C},function(C){return 1-Math.pow(1-C,E)},function(C){return C<.5?Math.pow(C*2,E)/2:1-Math.pow((1-C)*2,E)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(T,_){var E=1/_,C=2*E,A=2.5*E,R=function(F){return F<E?T*F*F:F<C?T*Math.pow(F-1.5/_,2)+.75:F<A?T*(F-=2.25/_)*F+.9375:T*Math.pow(F-2.625/_,2)+.984375};_insertEase("Bounce",function(I){return 1-R(1-I)},R)})(7.5625,2.75);_insertEase("Expo",function(T){return Math.pow(2,10*(T-1))*T+T*T*T*T*T*T*(1-T)});_insertEase("Circ",function(T){return-(_sqrt(1-T*T)-1)});_insertEase("Sine",function(T){return T===1?1:-_cos(T*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function T(_,E){_===void 0&&(_=1);var C=1/_,A=_+(E?0:1),R=E?1:0,I=1-_tinyNum;return function(F){return((A*_clamp(0,I,F)|0)+R)*C}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(T){return _callbackNames+=T+","+T+"Params,"});var GSCache=function T(_,E){this.id=_gsID++,_._gsap=this,this.target=_,this.harness=E,this.get=E?E.get:_getProperty,this.set=E?E.getSetter:_getSetter},Animation=function(){function T(E){this.vars=E,this._delay=+E.delay||0,(this._repeat=E.repeat===1/0?-2:E.repeat||0)&&(this._rDelay=E.repeatDelay||0,this._yoyo=!!E.yoyo||!!E.yoyoEase),this._ts=1,_setDuration(this,+E.duration,1,1),this.data=E.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var _=T.prototype;return _.delay=function(C){return C||C===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+C-this._delay),this._delay=C,this):this._delay},_.duration=function(C){return arguments.length?this.totalDuration(this._repeat>0?C+(C+this._rDelay)*this._repeat:C):this.totalDuration()&&this._dur},_.totalDuration=function(C){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?C:(C-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},_.totalTime=function(C,A){if(_wake(),!arguments.length)return this._tTime;var R=this._dp;if(R&&R.smoothChildTiming&&this._ts){for(_alignPlayhead(this,C),!R._dp||R.parent||_postAddChecks(R,this);R&&R.parent;)R.parent._time!==R._start+(R._ts>=0?R._tTime/R._ts:(R.totalDuration()-R._tTime)/-R._ts)&&R.totalTime(R._tTime,!0),R=R.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&C<this._tDur||this._ts<0&&C>0||!this._tDur&&!C)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==C||!this._dur&&!A||this._initted&&Math.abs(this._zTime)===_tinyNum||!C&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=C),_lazySafeRender(this,C,A)),this},_.time=function(C,A){return arguments.length?this.totalTime(Math.min(this.totalDuration(),C+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(C?this._dur:0),A):this._time},_.totalProgress=function(C,A){return arguments.length?this.totalTime(this.totalDuration()*C,A):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},_.progress=function(C,A){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-C:C)+_elapsedCycleDuration(this),A):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},_.iteration=function(C,A){var R=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(C-1)*R,A):this._repeat?_animationCycle(this._tTime,R)+1:1},_.timeScale=function(C,A){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===C)return this;var R=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+C||0,this._ts=this._ps||C===-1e-8?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this.totalDuration(),R),A!==!1),_setEnd(this),_recacheAncestors(this)},_.paused=function(C){return arguments.length?(this._ps!==C&&(this._ps=C,C?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},_.startTime=function(C){if(arguments.length){this._start=C;var A=this.parent||this._dp;return A&&(A._sort||!this.parent)&&_addToTimeline(A,this,C-this._delay),this}return this._start},_.endTime=function(C){return this._start+(_isNotFalse(C)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},_.rawTime=function(C){var A=this.parent||this._dp;return A?C&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(A.rawTime(C),this):this._tTime:this._tTime},_.revert=function(C){C===void 0&&(C=_revertConfig);var A=_reverting$1;return _reverting$1=C,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(C),this.totalTime(-.01,C.suppressEvents)),this.data!=="nested"&&C.kill!==!1&&this.kill(),_reverting$1=A,this},_.globalTime=function(C){for(var A=this,R=arguments.length?C:A.rawTime();A;)R=A._start+R/(Math.abs(A._ts)||1),A=A._dp;return!this.parent&&this._sat?this._sat.globalTime(C):R},_.repeat=function(C){return arguments.length?(this._repeat=C===1/0?-2:C,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},_.repeatDelay=function(C){if(arguments.length){var A=this._time;return this._rDelay=C,_onUpdateTotalDuration(this),A?this.time(A):this}return this._rDelay},_.yoyo=function(C){return arguments.length?(this._yoyo=C,this):this._yoyo},_.seek=function(C,A){return this.totalTime(_parsePosition(this,C),_isNotFalse(A))},_.restart=function(C,A){return this.play().totalTime(C?-this._delay:0,_isNotFalse(A)),this._dur||(this._zTime=-1e-8),this},_.play=function(C,A){return C!=null&&this.seek(C,A),this.reversed(!1).paused(!1)},_.reverse=function(C,A){return C!=null&&this.seek(C||this.totalDuration(),A),this.reversed(!0).paused(!1)},_.pause=function(C,A){return C!=null&&this.seek(C,A),this.paused(!0)},_.resume=function(){return this.paused(!1)},_.reversed=function(C){return arguments.length?(!!C!==this.reversed()&&this.timeScale(-this._rts||(C?-1e-8:0)),this):this._rts<0},_.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},_.isActive=function(){var C=this.parent||this._dp,A=this._start,R;return!!(!C||this._ts&&this._initted&&C.isActive()&&(R=C.rawTime(!0))>=A&&R<this.endTime(!0)-_tinyNum)},_.eventCallback=function(C,A,R){var I=this.vars;return arguments.length>1?(A?(I[C]=A,R&&(I[C+"Params"]=R),C==="onUpdate"&&(this._onUpdate=A)):delete I[C],this):I[C]},_.then=function(C){var A=this;return new Promise(function(R){var I=_isFunction(C)?C:_passThrough,F=function(){var U=A.then;A.then=null,_isFunction(I)&&(I=I(A))&&(I.then||I===A)&&(A.then=U),R(I),A.then=U};A._initted&&A.totalProgress()===1&&A._ts>=0||!A._tTime&&A._ts<0?F():A._prom=F})},_.kill=function(){_interrupt(this)},T}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Timeline=function(T){_inheritsLoose(_,T);function _(C,A){var R;return C===void 0&&(C={}),R=T.call(this,C)||this,R.labels={},R.smoothChildTiming=!!C.smoothChildTiming,R.autoRemoveChildren=!!C.autoRemoveChildren,R._sort=_isNotFalse(C.sortChildren),_globalTimeline&&_addToTimeline(C.parent||_globalTimeline,_assertThisInitialized$4(R),A),C.reversed&&R.reverse(),C.paused&&R.paused(!0),C.scrollTrigger&&_scrollTrigger(_assertThisInitialized$4(R),C.scrollTrigger),R}var E=_.prototype;return E.to=function(A,R,I){return _createTweenType(0,arguments,this),this},E.from=function(A,R,I){return _createTweenType(1,arguments,this),this},E.fromTo=function(A,R,I,F){return _createTweenType(2,arguments,this),this},E.set=function(A,R,I){return R.duration=0,R.parent=this,_inheritDefaults(R).repeatDelay||(R.repeat=0),R.immediateRender=!!R.immediateRender,new Tween(A,R,_parsePosition(this,I),1),this},E.call=function(A,R,I){return _addToTimeline(this,Tween.delayedCall(0,A,R),I)},E.staggerTo=function(A,R,I,F,B,U,V){return I.duration=R,I.stagger=I.stagger||F,I.onComplete=U,I.onCompleteParams=V,I.parent=this,new Tween(A,I,_parsePosition(this,B)),this},E.staggerFrom=function(A,R,I,F,B,U,V){return I.runBackwards=1,_inheritDefaults(I).immediateRender=_isNotFalse(I.immediateRender),this.staggerTo(A,R,I,F,B,U,V)},E.staggerFromTo=function(A,R,I,F,B,U,V,D){return F.startAt=I,_inheritDefaults(F).immediateRender=_isNotFalse(F.immediateRender),this.staggerTo(A,R,F,B,U,V,D)},E.render=function(A,R,I){var F=this._time,B=this._dirty?this.totalDuration():this._tDur,U=this._dur,V=A<=0?0:_roundPrecise(A),D=this._zTime<0!=A<0&&(this._initted||!U),O,L,z,W,X,Y,K,Q,ee,J,ie,re;if(this!==_globalTimeline&&V>B&&A>=0&&(V=B),V!==this._tTime||I||D){if(F!==this._time&&U&&(V+=this._time-F,A+=this._time-F),O=V,ee=this._start,Q=this._ts,Y=!Q,D&&(U||(F=this._zTime),(A||!R)&&(this._zTime=A)),this._repeat){if(ie=this._yoyo,X=U+this._rDelay,this._repeat<-1&&A<0)return this.totalTime(X*100+A,R,I);if(O=_roundPrecise(V%X),V===B?(W=this._repeat,O=U):(J=_roundPrecise(V/X),W=~~J,W&&W===J&&(O=U,W--),O>U&&(O=U)),J=_animationCycle(this._tTime,X),!F&&this._tTime&&J!==W&&this._tTime-J*X-this._dur<=0&&(J=W),ie&&W&1&&(O=U-O,re=1),W!==J&&!this._lock){var se=ie&&J&1,ne=se===(ie&&W&1);if(W<J&&(se=!se),F=se?0:V%U?U:V,this._lock=1,this.render(F||(re?0:_roundPrecise(W*X)),R,!U)._lock=0,this._tTime=V,!R&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!re&&(this.invalidate()._lock=1),F&&F!==this._time||Y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(U=this._dur,B=this._tDur,ne&&(this._lock=2,F=se?U:-1e-4,this.render(F,!0),this.vars.repeatRefresh&&!re&&this.invalidate()),this._lock=0,!this._ts&&!Y)return this;_propagateYoyoEase(this,re)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(K=_findNextPauseTween(this,_roundPrecise(F),_roundPrecise(O)),K&&(V-=O-(O=K._start))),this._tTime=V,this._time=O,this._act=!Q,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=A,F=0),!F&&V&&!R&&!J&&(_callback(this,"onStart"),this._tTime!==V))return this;if(O>=F&&A>=0)for(L=this._first;L;){if(z=L._next,(L._act||O>=L._start)&&L._ts&&K!==L){if(L.parent!==this)return this.render(A,R,I);if(L.render(L._ts>0?(O-L._start)*L._ts:(L._dirty?L.totalDuration():L._tDur)+(O-L._start)*L._ts,R,I),O!==this._time||!this._ts&&!Y){K=0,z&&(V+=this._zTime=-1e-8);break}}L=z}else{L=this._last;for(var oe=A<0?A:O;L;){if(z=L._prev,(L._act||oe<=L._end)&&L._ts&&K!==L){if(L.parent!==this)return this.render(A,R,I);if(L.render(L._ts>0?(oe-L._start)*L._ts:(L._dirty?L.totalDuration():L._tDur)+(oe-L._start)*L._ts,R,I||_reverting$1&&_isRevertWorthy(L)),O!==this._time||!this._ts&&!Y){K=0,z&&(V+=this._zTime=oe?-1e-8:_tinyNum);break}}L=z}}if(K&&!R&&(this.pause(),K.render(O>=F?0:-1e-8)._zTime=O>=F?1:-1,this._ts))return this._start=ee,_setEnd(this),this.render(A,R,I);this._onUpdate&&!R&&_callback(this,"onUpdate",!0),(V===B&&this._tTime>=this.totalDuration()||!V&&F)&&(ee===this._start||Math.abs(Q)!==Math.abs(this._ts))&&(this._lock||((A||!U)&&(V===B&&this._ts>0||!V&&this._ts<0)&&_removeFromParent(this,1),!R&&!(A<0&&!F)&&(V||F||!B)&&(_callback(this,V===B&&A>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(V<B&&this.timeScale()>0)&&this._prom())))}return this},E.add=function(A,R){var I=this;if(_isNumber(R)||(R=_parsePosition(this,R,A)),!(A instanceof Animation)){if(_isArray(A))return A.forEach(function(F){return I.add(F,R)}),this;if(_isString(A))return this.addLabel(A,R);if(_isFunction(A))A=Tween.delayedCall(0,A);else return this}return this!==A?_addToTimeline(this,A,R):this},E.getChildren=function(A,R,I,F){A===void 0&&(A=!0),R===void 0&&(R=!0),I===void 0&&(I=!0),F===void 0&&(F=-1e8);for(var B=[],U=this._first;U;)U._start>=F&&(U instanceof Tween?R&&B.push(U):(I&&B.push(U),A&&B.push.apply(B,U.getChildren(!0,R,I)))),U=U._next;return B},E.getById=function(A){for(var R=this.getChildren(1,1,1),I=R.length;I--;)if(R[I].vars.id===A)return R[I]},E.remove=function(A){return _isString(A)?this.removeLabel(A):_isFunction(A)?this.killTweensOf(A):(A.parent===this&&_removeLinkedListItem(this,A),A===this._recent&&(this._recent=this._last),_uncache(this))},E.totalTime=function(A,R){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?A/this._ts:(this.totalDuration()-A)/-this._ts))),T.prototype.totalTime.call(this,A,R),this._forcing=0,this):this._tTime},E.addLabel=function(A,R){return this.labels[A]=_parsePosition(this,R),this},E.removeLabel=function(A){return delete this.labels[A],this},E.addPause=function(A,R,I){var F=Tween.delayedCall(0,R||_emptyFunc,I);return F.data="isPause",this._hasPause=1,_addToTimeline(this,F,_parsePosition(this,A))},E.removePause=function(A){var R=this._first;for(A=_parsePosition(this,A);R;)R._start===A&&R.data==="isPause"&&_removeFromParent(R),R=R._next},E.killTweensOf=function(A,R,I){for(var F=this.getTweensOf(A,I),B=F.length;B--;)_overwritingTween!==F[B]&&F[B].kill(A,R);return this},E.getTweensOf=function(A,R){for(var I=[],F=toArray(A),B=this._first,U=_isNumber(R),V;B;)B instanceof Tween?_arrayContainsAny(B._targets,F)&&(U?(!_overwritingTween||B._initted&&B._ts)&&B.globalTime(0)<=R&&B.globalTime(B.totalDuration())>R:!R||B.isActive())&&I.push(B):(V=B.getTweensOf(F,R)).length&&I.push.apply(I,V),B=B._next;return I},E.tweenTo=function(A,R){R=R||{};var I=this,F=_parsePosition(I,A),B=R,U=B.startAt,V=B.onStart,D=B.onStartParams,O=B.immediateRender,L,z=Tween.to(I,_setDefaults({ease:R.ease||"none",lazy:!1,immediateRender:!1,time:F,overwrite:"auto",duration:R.duration||Math.abs((F-(U&&"time"in U?U.time:I._time))/I.timeScale())||_tinyNum,onStart:function(){if(I.pause(),!L){var X=R.duration||Math.abs((F-(U&&"time"in U?U.time:I._time))/I.timeScale());z._dur!==X&&_setDuration(z,X,0,1).render(z._time,!0,!0),L=1}V&&V.apply(z,D||[])}},R));return O?z.render(0):z},E.tweenFromTo=function(A,R,I){return this.tweenTo(R,_setDefaults({startAt:{time:_parsePosition(this,A)}},I))},E.recent=function(){return this._recent},E.nextLabel=function(A){return A===void 0&&(A=this._time),_getLabelInDirection(this,_parsePosition(this,A))},E.previousLabel=function(A){return A===void 0&&(A=this._time),_getLabelInDirection(this,_parsePosition(this,A),1)},E.currentLabel=function(A){return arguments.length?this.seek(A,!0):this.previousLabel(this._time+_tinyNum)},E.shiftChildren=function(A,R,I){I===void 0&&(I=0);for(var F=this._first,B=this.labels,U;F;)F._start>=I&&(F._start+=A,F._end+=A),F=F._next;if(R)for(U in B)B[U]>=I&&(B[U]+=A);return _uncache(this)},E.invalidate=function(A){var R=this._first;for(this._lock=0;R;)R.invalidate(A),R=R._next;return T.prototype.invalidate.call(this,A)},E.clear=function(A){A===void 0&&(A=!0);for(var R=this._first,I;R;)I=R._next,this.remove(R),R=I;return this._dp&&(this._time=this._tTime=this._pTime=0),A&&(this.labels={}),_uncache(this)},E.totalDuration=function(A){var R=0,I=this,F=I._last,B=_bigNum$1,U,V,D;if(arguments.length)return I.timeScale((I._repeat<0?I.duration():I.totalDuration())/(I.reversed()?-A:A));if(I._dirty){for(D=I.parent;F;)U=F._prev,F._dirty&&F.totalDuration(),V=F._start,V>B&&I._sort&&F._ts&&!I._lock?(I._lock=1,_addToTimeline(I,F,V-F._delay,1)._lock=0):B=V,V<0&&F._ts&&(R-=V,(!D&&!I._dp||D&&D.smoothChildTiming)&&(I._start+=V/I._ts,I._time-=V,I._tTime-=V),I.shiftChildren(-V,!1,-1/0),B=0),F._end>R&&F._ts&&(R=F._end),F=U;_setDuration(I,I===_globalTimeline&&I._time>R?I._time:R,1,1),I._dirty=0}return I._tDur},_.updateRoot=function(A){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(A,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config$1.autoSleep||120;var R=_globalTimeline._first;if((!R||!R._ts)&&_config$1.autoSleep&&_ticker._listeners.length<2){for(;R&&!R._ts;)R=R._next;R||_ticker.sleep()}}},_}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function T(_,E,C,A,R,I,F){var B=new PropTween(this._pt,_,E,0,1,_renderComplexString,null,R),U=0,V=0,D,O,L,z,W,X,Y,K;for(B.b=C,B.e=A,C+="",A+="",(Y=~A.indexOf("random("))&&(A=_replaceRandom(A)),I&&(K=[C,A],I(K,_,E),C=K[0],A=K[1]),O=C.match(_complexStringNumExp)||[];D=_complexStringNumExp.exec(A);)z=D[0],W=A.substring(U,D.index),L?L=(L+1)%5:W.substr(-5)==="rgba("&&(L=1),z!==O[V++]&&(X=parseFloat(O[V-1])||0,B._pt={_next:B._pt,p:W||V===1?W:",",s:X,c:z.charAt(1)==="="?_parseRelative(X,z)-X:parseFloat(z)-X,m:L&&L<4?Math.round:0},U=_complexStringNumExp.lastIndex);return B.c=U<A.length?A.substring(U,A.length):"",B.fp=F,(_relExp.test(A)||Y)&&(B.e=0),this._pt=B,B},_addPropTween=function T(_,E,C,A,R,I,F,B,U,V){_isFunction(A)&&(A=A(R||0,_,I));var D=_[E],O=C!=="get"?C:_isFunction(D)?U?_[E.indexOf("set")||!_isFunction(_["get"+E.substr(3)])?E:"get"+E.substr(3)](U):_[E]():D,L=_isFunction(D)?U?_setterFuncWithParam:_setterFunc:_setterPlain,z;if(_isString(A)&&(~A.indexOf("random(")&&(A=_replaceRandom(A)),A.charAt(1)==="="&&(z=_parseRelative(O,A)+(getUnit(O)||0),(z||z===0)&&(A=z))),!V||O!==A||_forceAllPropTweens)return!isNaN(O*A)&&A!==""?(z=new PropTween(this._pt,_,E,+O||0,A-(O||0),typeof D=="boolean"?_renderBoolean:_renderPlain,0,L),U&&(z.fp=U),F&&z.modifier(F,this,_),this._pt=z):(!D&&!(E in _)&&_missingPlugin(E,A),_addComplexStringPropTween.call(this,_,E,O,A,L,B||_config$1.stringFilter,U))},_processVars=function T(_,E,C,A,R){if(_isFunction(_)&&(_=_parseFuncOrString(_,R,E,C,A)),!_isObject(_)||_.style&&_.nodeType||_isArray(_)||_isTypedArray(_))return _isString(_)?_parseFuncOrString(_,R,E,C,A):_;var I={},F;for(F in _)I[F]=_parseFuncOrString(_[F],R,E,C,A);return I},_checkPlugin=function T(_,E,C,A,R,I){var F,B,U,V;if(_plugins[_]&&(F=new _plugins[_]).init(R,F.rawVars?E[_]:_processVars(E[_],A,R,I,C),C,A,I)!==!1&&(C._pt=B=new PropTween(C._pt,R,_,0,1,F.render,F,0,F.priority),C!==_quickTween))for(U=C._ptLookup[C._targets.indexOf(R)],V=F._props.length;V--;)U[F._props[V]]=B;return F},_overwritingTween,_forceAllPropTweens,_initTween=function T(_,E,C){var A=_.vars,R=A.ease,I=A.startAt,F=A.immediateRender,B=A.lazy,U=A.onUpdate,V=A.runBackwards,D=A.yoyoEase,O=A.keyframes,L=A.autoRevert,z=_._dur,W=_._startAt,X=_._targets,Y=_.parent,K=Y&&Y.data==="nested"?Y.vars.targets:X,Q=_._overwrite==="auto"&&!_suppressOverwrites,ee=_.timeline,J,ie,re,se,ne,oe,fe,he,ge,ye,we,le,de;if(ee&&(!O||!R)&&(R="none"),_._ease=_parseEase(R,_defaults.ease),_._yEase=D?_invertEase(_parseEase(D===!0?R:D,_defaults.ease)):0,D&&_._yoyo&&!_._repeat&&(D=_._yEase,_._yEase=_._ease,_._ease=D),_._from=!ee&&!!A.runBackwards,!ee||O&&!A.stagger){if(he=X[0]?_getCache(X[0]).harness:0,le=he&&A[he.prop],J=_copyExcluding(A,_reservedProps),W&&(W._zTime<0&&W.progress(1),E<0&&V&&F&&!L?W.render(-1,!0):W.revert(V&&z?_revertConfigNoKill:_startAtRevertConfig),W._lazy=0),I){if(_removeFromParent(_._startAt=Tween.set(X,_setDefaults({data:"isStart",overwrite:!1,parent:Y,immediateRender:!0,lazy:!W&&_isNotFalse(B),startAt:null,delay:0,onUpdate:U&&function(){return _callback(_,"onUpdate")},stagger:0},I))),_._startAt._dp=0,_._startAt._sat=_,E<0&&(_reverting$1||!F&&!L)&&_._startAt.revert(_revertConfigNoKill),F&&z&&E<=0&&C<=0){E&&(_._zTime=E);return}}else if(V&&z&&!W){if(E&&(F=!1),re=_setDefaults({overwrite:!1,data:"isFromStart",lazy:F&&!W&&_isNotFalse(B),immediateRender:F,stagger:0,parent:Y},J),le&&(re[he.prop]=le),_removeFromParent(_._startAt=Tween.set(X,re)),_._startAt._dp=0,_._startAt._sat=_,E<0&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_._startAt.render(-1,!0)),_._zTime=E,!F)T(_._startAt,_tinyNum,_tinyNum);else if(!E)return}for(_._pt=_._ptCache=0,B=z&&_isNotFalse(B)||B&&!z,ie=0;ie<X.length;ie++){if(ne=X[ie],fe=ne._gsap||_harness(X)[ie]._gsap,_._ptLookup[ie]=ye={},_lazyLookup[fe.id]&&_lazyTweens.length&&_lazyRender(),we=K===X?ie:K.indexOf(ne),he&&(ge=new he).init(ne,le||J,_,we,K)!==!1&&(_._pt=se=new PropTween(_._pt,ne,ge.name,0,1,ge.render,ge,0,ge.priority),ge._props.forEach(function(ce){ye[ce]=se}),ge.priority&&(oe=1)),!he||le)for(re in J)_plugins[re]&&(ge=_checkPlugin(re,J,_,we,ne,K))?ge.priority&&(oe=1):ye[re]=se=_addPropTween.call(_,ne,re,"get",J[re],we,K,0,A.stringFilter);_._op&&_._op[ie]&&_.kill(ne,_._op[ie]),Q&&_._pt&&(_overwritingTween=_,_globalTimeline.killTweensOf(ne,ye,_.globalTime(E)),de=!_.parent,_overwritingTween=0),_._pt&&B&&(_lazyLookup[fe.id]=1)}oe&&_sortPropTweensByPriority(_),_._onInit&&_._onInit(_)}_._onUpdate=U,_._initted=(!_._op||_._pt)&&!de,O&&E<=0&&ee.render(_bigNum$1,!0,!0)},_updatePropTweens=function T(_,E,C,A,R,I,F,B){var U=(_._pt&&_._ptCache||(_._ptCache={}))[E],V,D,O,L;if(!U)for(U=_._ptCache[E]=[],O=_._ptLookup,L=_._targets.length;L--;){if(V=O[L][E],V&&V.d&&V.d._pt)for(V=V.d._pt;V&&V.p!==E&&V.fp!==E;)V=V._next;if(!V)return _forceAllPropTweens=1,_.vars[E]="+=0",_initTween(_,F),_forceAllPropTweens=0,B?_warn(E+" not eligible for reset"):1;U.push(V)}for(L=U.length;L--;)D=U[L],V=D._pt||D,V.s=(A||A===0)&&!R?A:V.s+(A||0)+I*V.c,V.c=C-V.s,D.e&&(D.e=_round(C)+getUnit(D.e)),D.b&&(D.b=V.s+getUnit(D.b))},_addAliasesToVars=function T(_,E){var C=_[0]?_getCache(_[0]).harness:0,A=C&&C.aliases,R,I,F,B;if(!A)return E;R=_merge({},E);for(I in A)if(I in R)for(B=A[I].split(","),F=B.length;F--;)R[B[F]]=R[I];return R},_parseKeyframe=function T(_,E,C,A){var R=E.ease||A||"power1.inOut",I,F;if(_isArray(E))F=C[_]||(C[_]=[]),E.forEach(function(B,U){return F.push({t:U/(E.length-1)*100,v:B,e:R})});else for(I in E)F=C[I]||(C[I]=[]),I==="ease"||F.push({t:parseFloat(_),v:E[I],e:R})},_parseFuncOrString=function T(_,E,C,A,R){return _isFunction(_)?_.call(E,C,A,R):_isString(_)&&~_.indexOf("random(")?_replaceRandom(_):_},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(T){return _staggerPropsToSkip[T]=1});var Tween=function(T){_inheritsLoose(_,T);function _(C,A,R,I){var F;typeof A=="number"&&(R.duration=A,A=R,R=null),F=T.call(this,I?A:_inheritDefaults(A))||this;var B=F.vars,U=B.duration,V=B.delay,D=B.immediateRender,O=B.stagger,L=B.overwrite,z=B.keyframes,W=B.defaults,X=B.scrollTrigger,Y=B.yoyoEase,K=A.parent||_globalTimeline,Q=(_isArray(C)||_isTypedArray(C)?_isNumber(C[0]):"length"in A)?[C]:toArray(C),ee,J,ie,re,se,ne,oe,fe;if(F._targets=Q.length?_harness(Q):_warn("GSAP target "+C+" not found. https://gsap.com",!_config$1.nullTargetWarn)||[],F._ptLookup=[],F._overwrite=L,z||O||_isFuncOrString(U)||_isFuncOrString(V)){if(A=F.vars,ee=F.timeline=new Timeline({data:"nested",defaults:W||{},targets:K&&K.data==="nested"?K.vars.targets:Q}),ee.kill(),ee.parent=ee._dp=_assertThisInitialized$4(F),ee._start=0,O||_isFuncOrString(U)||_isFuncOrString(V)){if(re=Q.length,oe=O&&distribute(O),_isObject(O))for(se in O)~_staggerTweenProps.indexOf(se)&&(fe||(fe={}),fe[se]=O[se]);for(J=0;J<re;J++)ie=_copyExcluding(A,_staggerPropsToSkip),ie.stagger=0,Y&&(ie.yoyoEase=Y),fe&&_merge(ie,fe),ne=Q[J],ie.duration=+_parseFuncOrString(U,_assertThisInitialized$4(F),J,ne,Q),ie.delay=(+_parseFuncOrString(V,_assertThisInitialized$4(F),J,ne,Q)||0)-F._delay,!O&&re===1&&ie.delay&&(F._delay=V=ie.delay,F._start+=V,ie.delay=0),ee.to(ne,ie,oe?oe(J,ne,Q):0),ee._ease=_easeMap.none;ee.duration()?U=V=0:F.timeline=0}else if(z){_inheritDefaults(_setDefaults(ee.vars.defaults,{ease:"none"})),ee._ease=_parseEase(z.ease||A.ease||"none");var he=0,ge,ye,we;if(_isArray(z))z.forEach(function(le){return ee.to(Q,le,">")}),ee.duration();else{ie={};for(se in z)se==="ease"||se==="easeEach"||_parseKeyframe(se,z[se],ie,z.easeEach);for(se in ie)for(ge=ie[se].sort(function(le,de){return le.t-de.t}),he=0,J=0;J<ge.length;J++)ye=ge[J],we={ease:ye.e,duration:(ye.t-(J?ge[J-1].t:0))/100*U},we[se]=ye.v,ee.to(Q,we,he),he+=we.duration;ee.duration()<U&&ee.to({},{duration:U-ee.duration()})}}U||F.duration(U=ee.duration())}else F.timeline=0;return L===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized$4(F),_globalTimeline.killTweensOf(Q),_overwritingTween=0),_addToTimeline(K,_assertThisInitialized$4(F),R),A.reversed&&F.reverse(),A.paused&&F.paused(!0),(D||!U&&!z&&F._start===_roundPrecise(K._time)&&_isNotFalse(D)&&_hasNoPausedAncestors(_assertThisInitialized$4(F))&&K.data!=="nested")&&(F._tTime=-1e-8,F.render(Math.max(0,-V)||0)),X&&_scrollTrigger(_assertThisInitialized$4(F),X),F}var E=_.prototype;return E.render=function(A,R,I){var F=this._time,B=this._tDur,U=this._dur,V=A<0,D=A>B-_tinyNum&&!V?B:A<_tinyNum?0:A,O,L,z,W,X,Y,K,Q,ee;if(!U)_renderZeroDurationTween(this,A,R,I);else if(D!==this._tTime||!A||I||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==V||this._lazy){if(O=D,Q=this.timeline,this._repeat){if(W=U+this._rDelay,this._repeat<-1&&V)return this.totalTime(W*100+A,R,I);if(O=_roundPrecise(D%W),D===B?(z=this._repeat,O=U):(X=_roundPrecise(D/W),z=~~X,z&&z===X?(O=U,z--):O>U&&(O=U)),Y=this._yoyo&&z&1,Y&&(ee=this._yEase,O=U-O),X=_animationCycle(this._tTime,W),O===F&&!I&&this._initted&&z===X)return this._tTime=D,this;z!==X&&(Q&&this._yEase&&_propagateYoyoEase(Q,Y),this.vars.repeatRefresh&&!Y&&!this._lock&&O!==W&&this._initted&&(this._lock=I=1,this.render(_roundPrecise(W*z),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,V?A:O,I,R,D))return this._tTime=0,this;if(F!==this._time&&!(I&&this.vars.repeatRefresh&&z!==X))return this;if(U!==this._dur)return this.render(A,R,I)}if(this._tTime=D,this._time=O,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=K=(ee||this._ease)(O/U),this._from&&(this.ratio=K=1-K),!F&&D&&!R&&!X&&(_callback(this,"onStart"),this._tTime!==D))return this;for(L=this._pt;L;)L.r(K,L.d),L=L._next;Q&&Q.render(A<0?A:Q._dur*Q._ease(O/this._dur),R,I)||this._startAt&&(this._zTime=A),this._onUpdate&&!R&&(V&&_rewindStartAt(this,A,R,I),_callback(this,"onUpdate")),this._repeat&&z!==X&&this.vars.onRepeat&&!R&&this.parent&&_callback(this,"onRepeat"),(D===this._tDur||!D)&&this._tTime===D&&(V&&!this._onUpdate&&_rewindStartAt(this,A,!0,!0),(A||!U)&&(D===this._tDur&&this._ts>0||!D&&this._ts<0)&&_removeFromParent(this,1),!R&&!(V&&!F)&&(D||F||Y)&&(_callback(this,D===B?"onComplete":"onReverseComplete",!0),this._prom&&!(D<B&&this.timeScale()>0)&&this._prom()))}return this},E.targets=function(){return this._targets},E.invalidate=function(A){return(!A||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(A),T.prototype.invalidate.call(this,A)},E.resetTo=function(A,R,I,F,B){_tickerActive||_ticker.wake(),this._ts||this.play();var U=Math.min(this._dur,(this._dp._time-this._start)*this._ts),V;return this._initted||_initTween(this,U),V=this._ease(U/this._dur),_updatePropTweens(this,A,R,I,F,V,U,B)?this.resetTo(A,R,I,F,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},E.kill=function(A,R){if(R===void 0&&(R="all"),!A&&(!R||R==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_reverting$1),this;if(this.timeline){var I=this.timeline.totalDuration();return this.timeline.killTweensOf(A,R,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&I!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/I,0,1),this}var F=this._targets,B=A?toArray(A):F,U=this._ptLookup,V=this._pt,D,O,L,z,W,X,Y;if((!R||R==="all")&&_arraysMatch(F,B))return R==="all"&&(this._pt=0),_interrupt(this);for(D=this._op=this._op||[],R!=="all"&&(_isString(R)&&(W={},_forEachName(R,function(K){return W[K]=1}),R=W),R=_addAliasesToVars(F,R)),Y=F.length;Y--;)if(~B.indexOf(F[Y])){O=U[Y],R==="all"?(D[Y]=R,z=O,L={}):(L=D[Y]=D[Y]||{},z=R);for(W in z)X=O&&O[W],X&&((!("kill"in X.d)||X.d.kill(W)===!0)&&_removeLinkedListItem(this,X,"_pt"),delete O[W]),L!=="all"&&(L[W]=1)}return this._initted&&!this._pt&&V&&_interrupt(this),this},_.to=function(A,R){return new _(A,R,arguments[2])},_.from=function(A,R){return _createTweenType(1,arguments)},_.delayedCall=function(A,R,I,F){return new _(R,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:A,onComplete:R,onReverseComplete:R,onCompleteParams:I,onReverseCompleteParams:I,callbackScope:F})},_.fromTo=function(A,R,I){return _createTweenType(2,arguments)},_.set=function(A,R){return R.duration=0,R.repeatDelay||(R.repeat=0),new _(A,R)},_.killTweensOf=function(A,R,I){return _globalTimeline.killTweensOf(A,R,I)},_}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(T){Tween[T]=function(){var _=new Timeline,E=_slice.call(arguments,0);return E.splice(T==="staggerFromTo"?5:4,0,0),_[T].apply(_,E)}});var _setterPlain=function T(_,E,C){return _[E]=C},_setterFunc=function T(_,E,C){return _[E](C)},_setterFuncWithParam=function T(_,E,C,A){return _[E](A.fp,C)},_setterAttribute=function T(_,E,C){return _.setAttribute(E,C)},_getSetter=function T(_,E){return _isFunction(_[E])?_setterFunc:_isUndefined(_[E])&&_.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function T(_,E){return E.set(E.t,E.p,Math.round((E.s+E.c*_)*1e6)/1e6,E)},_renderBoolean=function T(_,E){return E.set(E.t,E.p,!!(E.s+E.c*_),E)},_renderComplexString=function T(_,E){var C=E._pt,A="";if(!_&&E.b)A=E.b;else if(_===1&&E.e)A=E.e;else{for(;C;)A=C.p+(C.m?C.m(C.s+C.c*_):Math.round((C.s+C.c*_)*1e4)/1e4)+A,C=C._next;A+=E.c}E.set(E.t,E.p,A,E)},_renderPropTweens=function T(_,E){for(var C=E._pt;C;)C.r(_,C.d),C=C._next},_addPluginModifier=function T(_,E,C,A){for(var R=this._pt,I;R;)I=R._next,R.p===A&&R.modifier(_,E,C),R=I},_killPropTweensOf=function T(_){for(var E=this._pt,C,A;E;)A=E._next,E.p===_&&!E.op||E.op===_?_removeLinkedListItem(this,E,"_pt"):E.dep||(C=1),E=A;return!C},_setterWithModifier=function T(_,E,C,A){A.mSet(_,E,A.m.call(A.tween,C,A.mt),A)},_sortPropTweensByPriority=function T(_){for(var E=_._pt,C,A,R,I;E;){for(C=E._next,A=R;A&&A.pr>E.pr;)A=A._next;(E._prev=A?A._prev:I)?E._prev._next=E:R=E,(E._next=A)?A._prev=E:I=E,E=C}_._pt=R},PropTween=function(){function T(E,C,A,R,I,F,B,U,V){this.t=C,this.s=R,this.c=I,this.p=A,this.r=F||_renderPlain,this.d=B||this,this.set=U||_setterPlain,this.pr=V||0,this._next=E,E&&(E._prev=this)}var _=T.prototype;return _.modifier=function(C,A,R){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=C,this.mt=R,this.tween=A},T}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(T){return _reservedProps[T]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config$1.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function T(_){return(_listeners[_]||_emptyArray).map(function(E){return E()})},_onMediaChange=function T(){var _=Date.now(),E=[];_-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(C){var A=C.queries,R=C.conditions,I,F,B,U;for(F in A)I=_win$1.matchMedia(A[F]).matches,I&&(B=1),I!==R[F]&&(R[F]=I,U=1);U&&(C.revert(),B&&E.push(C))}),_dispatch("matchMediaRevert"),E.forEach(function(C){return C.onMatch(C,function(A){return C.add(null,A)})}),_lastMediaTime=_,_dispatch("matchMedia"))},Context=function(){function T(E,C){this.selector=C&&selector(C),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,E&&this.add(E)}var _=T.prototype;return _.add=function(C,A,R){_isFunction(C)&&(R=A,A=C,C=_isFunction);var I=this,F=function(){var U=_context,V=I.selector,D;return U&&U!==I&&U.data.push(I),R&&(I.selector=selector(R)),_context=I,D=A.apply(I,arguments),_isFunction(D)&&I._r.push(D),_context=U,I.selector=V,I.isReverted=!1,D};return I.last=F,C===_isFunction?F(I,function(B){return I.add(null,B)}):C?I[C]=F:F},_.ignore=function(C){var A=_context;_context=null,C(this),_context=A},_.getTweens=function(){var C=[];return this.data.forEach(function(A){return A instanceof T?C.push.apply(C,A.getTweens()):A instanceof Tween&&!(A.parent&&A.parent.data==="nested")&&C.push(A)}),C},_.clear=function(){this._r.length=this.data.length=0},_.kill=function(C,A){var R=this;if(C?function(){for(var F=R.getTweens(),B=R.data.length,U;B--;)U=R.data[B],U.data==="isFlip"&&(U.revert(),U.getChildren(!0,!0,!1).forEach(function(V){return F.splice(F.indexOf(V),1)}));for(F.map(function(V){return{g:V._dur||V._delay||V._sat&&!V._sat.vars.immediateRender?V.globalTime(0):-1/0,t:V}}).sort(function(V,D){return D.g-V.g||-1/0}).forEach(function(V){return V.t.revert(C)}),B=R.data.length;B--;)U=R.data[B],U instanceof Timeline?U.data!=="nested"&&(U.scrollTrigger&&U.scrollTrigger.revert(),U.kill()):!(U instanceof Tween)&&U.revert&&U.revert(C);R._r.forEach(function(V){return V(C,R)}),R.isReverted=!0}():this.data.forEach(function(F){return F.kill&&F.kill()}),this.clear(),A)for(var I=_media.length;I--;)_media[I].id===this.id&&_media.splice(I,1)},_.revert=function(C){this.kill(C||{})},T}(),MatchMedia=function(){function T(E){this.contexts=[],this.scope=E,_context&&_context.data.push(this)}var _=T.prototype;return _.add=function(C,A,R){_isObject(C)||(C={matches:C});var I=new Context(0,R||this.scope),F=I.conditions={},B,U,V;_context&&!I.selector&&(I.selector=_context.selector),this.contexts.push(I),A=I.add("onMatch",A),I.queries=C;for(U in C)U==="all"?V=1:(B=_win$1.matchMedia(C[U]),B&&(_media.indexOf(I)<0&&_media.push(I),(F[U]=B.matches)&&(V=1),B.addListener?B.addListener(_onMediaChange):B.addEventListener("change",_onMediaChange)));return V&&A(I,function(D){return I.add(null,D)}),this},_.revert=function(C){this.kill(C||{})},_.kill=function(C){this.contexts.forEach(function(A){return A.kill(C,!0)})},T}(),_gsap={registerPlugin:function T(){for(var _=arguments.length,E=new Array(_),C=0;C<_;C++)E[C]=arguments[C];E.forEach(function(A){return _createPlugin(A)})},timeline:function T(_){return new Timeline(_)},getTweensOf:function T(_,E){return _globalTimeline.getTweensOf(_,E)},getProperty:function T(_,E,C,A){_isString(_)&&(_=toArray(_)[0]);var R=_getCache(_||{}).get,I=C?_passThrough:_numericIfPossible;return C==="native"&&(C=""),_&&(E?I((_plugins[E]&&_plugins[E].get||R)(_,E,C,A)):function(F,B,U){return I((_plugins[F]&&_plugins[F].get||R)(_,F,B,U))})},quickSetter:function T(_,E,C){if(_=toArray(_),_.length>1){var A=_.map(function(V){return gsap.quickSetter(V,E,C)}),R=A.length;return function(V){for(var D=R;D--;)A[D](V)}}_=_[0]||{};var I=_plugins[E],F=_getCache(_),B=F.harness&&(F.harness.aliases||{})[E]||E,U=I?function(V){var D=new I;_quickTween._pt=0,D.init(_,C?V+C:V,_quickTween,0,[_]),D.render(1,D),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:F.set(_,B);return I?U:function(V){return U(_,B,C?V+C:V,F,1)}},quickTo:function T(_,E,C){var A,R=gsap.to(_,_setDefaults((A={},A[E]="+=0.1",A.paused=!0,A.stagger=0,A),C||{})),I=function(B,U,V){return R.resetTo(E,B,U,V)};return I.tween=R,I},isTweening:function T(_){return _globalTimeline.getTweensOf(_,!0).length>0},defaults:function T(_){return _&&_.ease&&(_.ease=_parseEase(_.ease,_defaults.ease)),_mergeDeep(_defaults,_||{})},config:function T(_){return _mergeDeep(_config$1,_||{})},registerEffect:function T(_){var E=_.name,C=_.effect,A=_.plugins,R=_.defaults,I=_.extendTimeline;(A||"").split(",").forEach(function(F){return F&&!_plugins[F]&&!_globals[F]&&_warn(E+" effect requires "+F+" plugin.")}),_effects[E]=function(F,B,U){return C(toArray(F),_setDefaults(B||{},R),U)},I&&(Timeline.prototype[E]=function(F,B,U){return this.add(_effects[E](F,_isObject(B)?B:(U=B)&&{},this),U)})},registerEase:function T(_,E){_easeMap[_]=_parseEase(E)},parseEase:function T(_,E){return arguments.length?_parseEase(_,E):_easeMap},getById:function T(_){return _globalTimeline.getById(_)},exportRoot:function T(_,E){_===void 0&&(_={});var C=new Timeline(_),A,R;for(C.smoothChildTiming=_isNotFalse(_.smoothChildTiming),_globalTimeline.remove(C),C._dp=0,C._time=C._tTime=_globalTimeline._time,A=_globalTimeline._first;A;)R=A._next,(E||!(!A._dur&&A instanceof Tween&&A.vars.onComplete===A._targets[0]))&&_addToTimeline(C,A,A._start-A._delay),A=R;return _addToTimeline(_globalTimeline,C,0),C},context:function T(_,E){return _?new Context(_,E):_context},matchMedia:function T(_){return new MatchMedia(_)},matchMediaRefresh:function T(){return _media.forEach(function(_){var E=_.conditions,C,A;for(A in E)E[A]&&(E[A]=!1,C=1);C&&_.revert()})||_onMediaChange()},addEventListener:function T(_,E){var C=_listeners[_]||(_listeners[_]=[]);~C.indexOf(E)||C.push(E)},removeEventListener:function T(_,E){var C=_listeners[_],A=C&&C.indexOf(E);A>=0&&C.splice(A,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function T(){return _reverting$1},context:function T(_){return _&&_context&&(_context.data.push(_),_._ctx=_context),_context},suppressOverwrites:function T(_){return _suppressOverwrites=_}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(T){return _gsap[T]=Tween[T]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function T(_,E){for(var C=_._pt;C&&C.p!==E&&C.op!==E&&C.fp!==E;)C=C._next;return C},_addModifiers=function T(_,E){var C=_._targets,A,R,I;for(A in E)for(R=C.length;R--;)I=_._ptLookup[R][A],I&&(I=I.d)&&(I._pt&&(I=_getPluginPropTween(I,A)),I&&I.modifier&&I.modifier(E[A],_,C[R],A))},_buildModifierPlugin=function T(_,E){return{name:_,headless:1,rawVars:1,init:function(A,R,I){I._onInit=function(F){var B,U;if(_isString(R)&&(B={},_forEachName(R,function(V){return B[V]=1}),R=B),E){B={};for(U in R)B[U]=E(R[U]);R=B}_addModifiers(F,R)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function T(_,E,C,A,R){var I,F,B;this.tween=C;for(I in E)B=_.getAttribute(I)||"",F=this.add(_,"setAttribute",(B||0)+"",E[I],A,R,0,0,I),F.op=I,F.b=B,this._props.push(I)},render:function T(_,E){for(var C=E._pt;C;)_reverting$1?C.set(C.t,C.p,C.b,C):C.r(_,C.d),C=C._next}},{name:"endArray",headless:1,init:function T(_,E){for(var C=E.length;C--;)this.add(_,C,_[C]||0,E[C],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.13.0";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function T(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function T(_,E){return E.set(E.t,E.p,Math.round((E.s+E.c*_)*1e4)/1e4+E.u,E)},_renderPropWithEnd=function T(_,E){return E.set(E.t,E.p,_===1?E.e:Math.round((E.s+E.c*_)*1e4)/1e4+E.u,E)},_renderCSSPropWithBeginning=function T(_,E){return E.set(E.t,E.p,_?Math.round((E.s+E.c*_)*1e4)/1e4+E.u:E.b,E)},_renderRoundedCSSProp=function T(_,E){var C=E.s+E.c*_;E.set(E.t,E.p,~~(C+(C<0?-.5:.5))+E.u,E)},_renderNonTweeningValue=function T(_,E){return E.set(E.t,E.p,_?E.e:E.b,E)},_renderNonTweeningValueOnlyAtEnd=function T(_,E){return E.set(E.t,E.p,_!==1?E.b:E.e,E)},_setterCSSStyle=function T(_,E,C){return _.style[E]=C},_setterCSSProp=function T(_,E,C){return _.style.setProperty(E,C)},_setterTransform=function T(_,E,C){return _._gsap[E]=C},_setterScale=function T(_,E,C){return _._gsap.scaleX=_._gsap.scaleY=C},_setterScaleWithRender=function T(_,E,C,A,R){var I=_._gsap;I.scaleX=I.scaleY=C,I.renderTransform(R,I)},_setterTransformWithRender=function T(_,E,C,A,R){var I=_._gsap;I[E]=C,I.renderTransform(R,I)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function T(_,E){var C=this,A=this.target,R=A.style,I=A._gsap;if(_ in _transformProps&&R){if(this.tfm=this.tfm||{},_!=="transform")_=_propertyAliases[_]||_,~_.indexOf(",")?_.split(",").forEach(function(F){return C.tfm[F]=_get(A,F)}):this.tfm[_]=I.x?I[_]:_get(A,_),_===_transformOriginProp&&(this.tfm.zOrigin=I.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(F){return T.call(C,F,E)});if(this.props.indexOf(_transformProp)>=0)return;I.svg&&(this.svgo=A.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,E,"")),_=_transformProp}(R||E)&&this.props.push(_,E,R[_])},_removeIndependentTransforms=function T(_){_.translate&&(_.removeProperty("translate"),_.removeProperty("scale"),_.removeProperty("rotate"))},_revertStyle=function T(){var _=this.props,E=this.target,C=E.style,A=E._gsap,R,I;for(R=0;R<_.length;R+=3)_[R+1]?_[R+1]===2?E[_[R]](_[R+2]):E[_[R]]=_[R+2]:_[R+2]?C[_[R]]=_[R+2]:C.removeProperty(_[R].substr(0,2)==="--"?_[R]:_[R].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(I in this.tfm)A[I]=this.tfm[I];A.svg&&(A.renderTransform(),E.setAttribute("data-svg-origin",this.svgo||"")),R=_reverting(),(!R||!R.isStart)&&!C[_transformProp]&&(_removeIndependentTransforms(C),A.zOrigin&&C[_transformOriginProp]&&(C[_transformOriginProp]+=" "+A.zOrigin+"px",A.zOrigin=0,A.renderTransform()),A.uncache=1)}},_getStyleSaver=function T(_,E){var C={target:_,props:[],revert:_revertStyle,save:_saveStyle};return _._gsap||gsap.core.getCache(_),E&&_.style&&_.nodeType&&E.split(",").forEach(function(A){return C.save(A)}),C},_supports3D,_createElement=function T(_,E){var C=_doc.createElementNS?_doc.createElementNS((E||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),_):_doc.createElement(_);return C&&C.style?C:_doc.createElement(_)},_getComputedProperty=function T(_,E,C){var A=getComputedStyle(_);return A[E]||A.getPropertyValue(E.replace(_capsExp,"-$1").toLowerCase())||A.getPropertyValue(E)||!C&&T(_,_checkPropPrefix(E)||E,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function T(_,E,C){var A=E||_tempDiv,R=A.style,I=5;if(_ in R&&!C)return _;for(_=_.charAt(0).toUpperCase()+_.substr(1);I--&&!(_prefixes[I]+_ in R););return I<0?null:(I===3?"ms":I>=0?_prefixes[I]:"")+_},_initCore=function T(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap.core.reverting,_pluginInitted=1)},_getReparentedCloneBBox=function T(_){var E=_.ownerSVGElement,C=_createElement("svg",E&&E.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),A=_.cloneNode(!0),R;A.style.display="block",C.appendChild(A),_docElement.appendChild(C);try{R=A.getBBox()}catch{}return C.removeChild(A),_docElement.removeChild(C),R},_getAttributeFallbacks=function T(_,E){for(var C=E.length;C--;)if(_.hasAttribute(E[C]))return _.getAttribute(E[C])},_getBBox=function T(_){var E,C;try{E=_.getBBox()}catch{E=_getReparentedCloneBBox(_),C=1}return E&&(E.width||E.height)||C||(E=_getReparentedCloneBBox(_)),E&&!E.width&&!E.x&&!E.y?{x:+_getAttributeFallbacks(_,["x","cx","x1"])||0,y:+_getAttributeFallbacks(_,["y","cy","y1"])||0,width:0,height:0}:E},_isSVG=function T(_){return!!(_.getCTM&&(!_.parentNode||_.ownerSVGElement)&&_getBBox(_))},_removeProperty=function T(_,E){if(E){var C=_.style,A;E in _transformProps&&E!==_transformOriginProp&&(E=_transformProp),C.removeProperty?(A=E.substr(0,2),(A==="ms"||E.substr(0,6)==="webkit")&&(E="-"+E),C.removeProperty(A==="--"?E:E.replace(_capsExp,"-$1").toLowerCase())):C.removeAttribute(E)}},_addNonTweeningPT=function T(_,E,C,A,R,I){var F=new PropTween(_._pt,E,C,0,1,I?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return _._pt=F,F.b=A,F.e=R,_._props.push(C),F},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function T(_,E,C,A){var R=parseFloat(C)||0,I=(C+"").trim().substr((R+"").length)||"px",F=_tempDiv.style,B=_horizontalExp.test(E),U=_.tagName.toLowerCase()==="svg",V=(U?"client":"offset")+(B?"Width":"Height"),D=100,O=A==="px",L=A==="%",z,W,X,Y;if(A===I||!R||_nonConvertibleUnits[A]||_nonConvertibleUnits[I])return R;if(I!=="px"&&!O&&(R=T(_,E,C,"px")),Y=_.getCTM&&_isSVG(_),(L||I==="%")&&(_transformProps[E]||~E.indexOf("adius")))return z=Y?_.getBBox()[B?"width":"height"]:_[V],_round(L?R/z*D:R/100*z);if(F[B?"width":"height"]=D+(O?I:A),W=A!=="rem"&&~E.indexOf("adius")||A==="em"&&_.appendChild&&!U?_:_.parentNode,Y&&(W=(_.ownerSVGElement||{}).parentNode),(!W||W===_doc||!W.appendChild)&&(W=_doc.body),X=W._gsap,X&&L&&X.width&&B&&X.time===_ticker.time&&!X.uncache)return _round(R/X.width*D);if(L&&(E==="height"||E==="width")){var K=_.style[E];_.style[E]=D+A,z=_[V],K?_.style[E]=K:_removeProperty(_,E)}else(L||I==="%")&&!_nonStandardLayouts[_getComputedProperty(W,"display")]&&(F.position=_getComputedProperty(_,"position")),W===_&&(F.position="static"),W.appendChild(_tempDiv),z=_tempDiv[V],W.removeChild(_tempDiv),F.position="absolute";return B&&L&&(X=_getCache(W),X.time=_ticker.time,X.width=W[V]),_round(O?z*R/D:z&&R?D/z*R:0)},_get=function T(_,E,C,A){var R;return _pluginInitted||_initCore(),E in _propertyAliases&&E!=="transform"&&(E=_propertyAliases[E],~E.indexOf(",")&&(E=E.split(",")[0])),_transformProps[E]&&E!=="transform"?(R=_parseTransform(_,A),R=E!=="transformOrigin"?R[E]:R.svg?R.origin:_firstTwoOnly(_getComputedProperty(_,_transformOriginProp))+" "+R.zOrigin+"px"):(R=_.style[E],(!R||R==="auto"||A||~(R+"").indexOf("calc("))&&(R=_specialProps[E]&&_specialProps[E](_,E,C)||_getComputedProperty(_,E)||_getProperty(_,E)||(E==="opacity"?1:0))),C&&!~(R+"").trim().indexOf(" ")?_convertToUnit(_,E,R,C)+C:R},_tweenComplexCSSString=function T(_,E,C,A){if(!C||C==="none"){var R=_checkPropPrefix(E,_,1),I=R&&_getComputedProperty(_,R,1);I&&I!==C?(E=R,C=I):E==="borderColor"&&(C=_getComputedProperty(_,"borderTopColor"))}var F=new PropTween(this._pt,_.style,E,0,1,_renderComplexString),B=0,U=0,V,D,O,L,z,W,X,Y,K,Q,ee,J;if(F.b=C,F.e=A,C+="",A+="",A.substring(0,6)==="var(--"&&(A=_getComputedProperty(_,A.substring(4,A.indexOf(")")))),A==="auto"&&(W=_.style[E],_.style[E]=A,A=_getComputedProperty(_,E)||A,W?_.style[E]=W:_removeProperty(_,E)),V=[C,A],_colorStringFilter(V),C=V[0],A=V[1],O=C.match(_numWithUnitExp)||[],J=A.match(_numWithUnitExp)||[],J.length){for(;D=_numWithUnitExp.exec(A);)X=D[0],K=A.substring(B,D.index),z?z=(z+1)%5:(K.substr(-5)==="rgba("||K.substr(-5)==="hsla(")&&(z=1),X!==(W=O[U++]||"")&&(L=parseFloat(W)||0,ee=W.substr((L+"").length),X.charAt(1)==="="&&(X=_parseRelative(L,X)+ee),Y=parseFloat(X),Q=X.substr((Y+"").length),B=_numWithUnitExp.lastIndex-Q.length,Q||(Q=Q||_config$1.units[E]||ee,B===A.length&&(A+=Q,F.e+=Q)),ee!==Q&&(L=_convertToUnit(_,E,W,Q)||0),F._pt={_next:F._pt,p:K||U===1?K:",",s:L,c:Y-L,m:z&&z<4||E==="zIndex"?Math.round:0});F.c=B<A.length?A.substring(B,A.length):""}else F.r=E==="display"&&A==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(A)&&(F.e=0),this._pt=F,F},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function T(_){var E=_.split(" "),C=E[0],A=E[1]||"50%";return(C==="top"||C==="bottom"||A==="left"||A==="right")&&(_=C,C=A,A=_),E[0]=_keywordToPercent[C]||C,E[1]=_keywordToPercent[A]||A,E.join(" ")},_renderClearProps=function T(_,E){if(E.tween&&E.tween._time===E.tween._dur){var C=E.t,A=C.style,R=E.u,I=C._gsap,F,B,U;if(R==="all"||R===!0)A.cssText="",B=1;else for(R=R.split(","),U=R.length;--U>-1;)F=R[U],_transformProps[F]&&(B=1,F=F==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(C,F);B&&(_removeProperty(C,_transformProp),I&&(I.svg&&C.removeAttribute("transform"),A.scale=A.rotate=A.translate="none",_parseTransform(C,1),I.uncache=1,_removeIndependentTransforms(A)))}},_specialProps={clearProps:function T(_,E,C,A,R){if(R.data!=="isFromStart"){var I=_._pt=new PropTween(_._pt,E,C,0,0,_renderClearProps);return I.u=A,I.pr=-10,I.tween=R,_._props.push(C),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function T(_){return _==="matrix(1, 0, 0, 1, 0, 0)"||_==="none"||!_},_getComputedTransformMatrixAsArray=function T(_){var E=_getComputedProperty(_,_transformProp);return _isNullTransform(E)?_identity2DMatrix:E.substr(7).match(_numExp).map(_round)},_getMatrix=function T(_,E){var C=_._gsap||_getCache(_),A=_.style,R=_getComputedTransformMatrixAsArray(_),I,F,B,U;return C.svg&&_.getAttribute("transform")?(B=_.transform.baseVal.consolidate().matrix,R=[B.a,B.b,B.c,B.d,B.e,B.f],R.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:R):(R===_identity2DMatrix&&!_.offsetParent&&_!==_docElement&&!C.svg&&(B=A.display,A.display="block",I=_.parentNode,(!I||!_.offsetParent&&!_.getBoundingClientRect().width)&&(U=1,F=_.nextElementSibling,_docElement.appendChild(_)),R=_getComputedTransformMatrixAsArray(_),B?A.display=B:_removeProperty(_,"display"),U&&(F?I.insertBefore(_,F):I?I.appendChild(_):_docElement.removeChild(_))),E&&R.length>6?[R[0],R[1],R[4],R[5],R[12],R[13]]:R)},_applySVGOrigin=function T(_,E,C,A,R,I){var F=_._gsap,B=R||_getMatrix(_,!0),U=F.xOrigin||0,V=F.yOrigin||0,D=F.xOffset||0,O=F.yOffset||0,L=B[0],z=B[1],W=B[2],X=B[3],Y=B[4],K=B[5],Q=E.split(" "),ee=parseFloat(Q[0])||0,J=parseFloat(Q[1])||0,ie,re,se,ne;C?B!==_identity2DMatrix&&(re=L*X-z*W)&&(se=ee*(X/re)+J*(-W/re)+(W*K-X*Y)/re,ne=ee*(-z/re)+J*(L/re)-(L*K-z*Y)/re,ee=se,J=ne):(ie=_getBBox(_),ee=ie.x+(~Q[0].indexOf("%")?ee/100*ie.width:ee),J=ie.y+(~(Q[1]||Q[0]).indexOf("%")?J/100*ie.height:J)),A||A!==!1&&F.smooth?(Y=ee-U,K=J-V,F.xOffset=D+(Y*L+K*W)-Y,F.yOffset=O+(Y*z+K*X)-K):F.xOffset=F.yOffset=0,F.xOrigin=ee,F.yOrigin=J,F.smooth=!!A,F.origin=E,F.originIsAbsolute=!!C,_.style[_transformOriginProp]="0px 0px",I&&(_addNonTweeningPT(I,F,"xOrigin",U,ee),_addNonTweeningPT(I,F,"yOrigin",V,J),_addNonTweeningPT(I,F,"xOffset",D,F.xOffset),_addNonTweeningPT(I,F,"yOffset",O,F.yOffset)),_.setAttribute("data-svg-origin",ee+" "+J)},_parseTransform=function T(_,E){var C=_._gsap||new GSCache(_);if("x"in C&&!E&&!C.uncache)return C;var A=_.style,R=C.scaleX<0,I="px",F="deg",B=getComputedStyle(_),U=_getComputedProperty(_,_transformOriginProp)||"0",V,D,O,L,z,W,X,Y,K,Q,ee,J,ie,re,se,ne,oe,fe,he,ge,ye,we,le,de,ce,ve,be,me,xe,Ae,De,Ie;return V=D=O=W=X=Y=K=Q=ee=0,L=z=1,C.svg=!!(_.getCTM&&_isSVG(_)),B.translate&&((B.translate!=="none"||B.scale!=="none"||B.rotate!=="none")&&(A[_transformProp]=(B.translate!=="none"?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(B.rotate!=="none"?"rotate("+B.rotate+") ":"")+(B.scale!=="none"?"scale("+B.scale.split(" ").join(",")+") ":"")+(B[_transformProp]!=="none"?B[_transformProp]:"")),A.scale=A.rotate=A.translate="none"),re=_getMatrix(_,C.svg),C.svg&&(C.uncache?(ce=_.getBBox(),U=C.xOrigin-ce.x+"px "+(C.yOrigin-ce.y)+"px",de=""):de=!E&&_.getAttribute("data-svg-origin"),_applySVGOrigin(_,de||U,!!de||C.originIsAbsolute,C.smooth!==!1,re)),J=C.xOrigin||0,ie=C.yOrigin||0,re!==_identity2DMatrix&&(fe=re[0],he=re[1],ge=re[2],ye=re[3],V=we=re[4],D=le=re[5],re.length===6?(L=Math.sqrt(fe*fe+he*he),z=Math.sqrt(ye*ye+ge*ge),W=fe||he?_atan2(he,fe)*_RAD2DEG:0,K=ge||ye?_atan2(ge,ye)*_RAD2DEG+W:0,K&&(z*=Math.abs(Math.cos(K*_DEG2RAD))),C.svg&&(V-=J-(J*fe+ie*ge),D-=ie-(J*he+ie*ye))):(Ie=re[6],Ae=re[7],be=re[8],me=re[9],xe=re[10],De=re[11],V=re[12],D=re[13],O=re[14],se=_atan2(Ie,xe),X=se*_RAD2DEG,se&&(ne=Math.cos(-se),oe=Math.sin(-se),de=we*ne+be*oe,ce=le*ne+me*oe,ve=Ie*ne+xe*oe,be=we*-oe+be*ne,me=le*-oe+me*ne,xe=Ie*-oe+xe*ne,De=Ae*-oe+De*ne,we=de,le=ce,Ie=ve),se=_atan2(-ge,xe),Y=se*_RAD2DEG,se&&(ne=Math.cos(-se),oe=Math.sin(-se),de=fe*ne-be*oe,ce=he*ne-me*oe,ve=ge*ne-xe*oe,De=ye*oe+De*ne,fe=de,he=ce,ge=ve),se=_atan2(he,fe),W=se*_RAD2DEG,se&&(ne=Math.cos(se),oe=Math.sin(se),de=fe*ne+he*oe,ce=we*ne+le*oe,he=he*ne-fe*oe,le=le*ne-we*oe,fe=de,we=ce),X&&Math.abs(X)+Math.abs(W)>359.9&&(X=W=0,Y=180-Y),L=_round(Math.sqrt(fe*fe+he*he+ge*ge)),z=_round(Math.sqrt(le*le+Ie*Ie)),se=_atan2(we,le),K=Math.abs(se)>2e-4?se*_RAD2DEG:0,ee=De?1/(De<0?-De:De):0),C.svg&&(de=_.getAttribute("transform"),C.forceCSS=_.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(_,_transformProp)),de&&_.setAttribute("transform",de))),Math.abs(K)>90&&Math.abs(K)<270&&(R?(L*=-1,K+=W<=0?180:-180,W+=W<=0?180:-180):(z*=-1,K+=K<=0?180:-180)),E=E||C.uncache,C.x=V-((C.xPercent=V&&(!E&&C.xPercent||(Math.round(_.offsetWidth/2)===Math.round(-V)?-50:0)))?_.offsetWidth*C.xPercent/100:0)+I,C.y=D-((C.yPercent=D&&(!E&&C.yPercent||(Math.round(_.offsetHeight/2)===Math.round(-D)?-50:0)))?_.offsetHeight*C.yPercent/100:0)+I,C.z=O+I,C.scaleX=_round(L),C.scaleY=_round(z),C.rotation=_round(W)+F,C.rotationX=_round(X)+F,C.rotationY=_round(Y)+F,C.skewX=K+F,C.skewY=Q+F,C.transformPerspective=ee+I,(C.zOrigin=parseFloat(U.split(" ")[2])||!E&&C.zOrigin||0)&&(A[_transformOriginProp]=_firstTwoOnly(U)),C.xOffset=C.yOffset=0,C.force3D=_config$1.force3D,C.renderTransform=C.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,C.uncache=0,C},_firstTwoOnly=function T(_){return(_=_.split(" "))[0]+" "+_[1]},_addPxTranslate=function T(_,E,C){var A=getUnit(E);return _round(parseFloat(E)+parseFloat(_convertToUnit(_,"x",C+"px",A)))+A},_renderNon3DTransforms=function T(_,E){E.z="0px",E.rotationY=E.rotationX="0deg",E.force3D=0,_renderCSSTransforms(_,E)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function T(_,E){var C=E||this,A=C.xPercent,R=C.yPercent,I=C.x,F=C.y,B=C.z,U=C.rotation,V=C.rotationY,D=C.rotationX,O=C.skewX,L=C.skewY,z=C.scaleX,W=C.scaleY,X=C.transformPerspective,Y=C.force3D,K=C.target,Q=C.zOrigin,ee="",J=Y==="auto"&&_&&_!==1||Y===!0;if(Q&&(D!==_zeroDeg||V!==_zeroDeg)){var ie=parseFloat(V)*_DEG2RAD,re=Math.sin(ie),se=Math.cos(ie),ne;ie=parseFloat(D)*_DEG2RAD,ne=Math.cos(ie),I=_addPxTranslate(K,I,re*ne*-Q),F=_addPxTranslate(K,F,-Math.sin(ie)*-Q),B=_addPxTranslate(K,B,se*ne*-Q+Q)}X!==_zeroPx&&(ee+="perspective("+X+_endParenthesis),(A||R)&&(ee+="translate("+A+"%, "+R+"%) "),(J||I!==_zeroPx||F!==_zeroPx||B!==_zeroPx)&&(ee+=B!==_zeroPx||J?"translate3d("+I+", "+F+", "+B+") ":"translate("+I+", "+F+_endParenthesis),U!==_zeroDeg&&(ee+="rotate("+U+_endParenthesis),V!==_zeroDeg&&(ee+="rotateY("+V+_endParenthesis),D!==_zeroDeg&&(ee+="rotateX("+D+_endParenthesis),(O!==_zeroDeg||L!==_zeroDeg)&&(ee+="skew("+O+", "+L+_endParenthesis),(z!==1||W!==1)&&(ee+="scale("+z+", "+W+_endParenthesis),K.style[_transformProp]=ee||"translate(0, 0)"},_renderSVGTransforms=function T(_,E){var C=E||this,A=C.xPercent,R=C.yPercent,I=C.x,F=C.y,B=C.rotation,U=C.skewX,V=C.skewY,D=C.scaleX,O=C.scaleY,L=C.target,z=C.xOrigin,W=C.yOrigin,X=C.xOffset,Y=C.yOffset,K=C.forceCSS,Q=parseFloat(I),ee=parseFloat(F),J,ie,re,se,ne;B=parseFloat(B),U=parseFloat(U),V=parseFloat(V),V&&(V=parseFloat(V),U+=V,B+=V),B||U?(B*=_DEG2RAD,U*=_DEG2RAD,J=Math.cos(B)*D,ie=Math.sin(B)*D,re=Math.sin(B-U)*-O,se=Math.cos(B-U)*O,U&&(V*=_DEG2RAD,ne=Math.tan(U-V),ne=Math.sqrt(1+ne*ne),re*=ne,se*=ne,V&&(ne=Math.tan(V),ne=Math.sqrt(1+ne*ne),J*=ne,ie*=ne)),J=_round(J),ie=_round(ie),re=_round(re),se=_round(se)):(J=D,se=O,ie=re=0),(Q&&!~(I+"").indexOf("px")||ee&&!~(F+"").indexOf("px"))&&(Q=_convertToUnit(L,"x",I,"px"),ee=_convertToUnit(L,"y",F,"px")),(z||W||X||Y)&&(Q=_round(Q+z-(z*J+W*re)+X),ee=_round(ee+W-(z*ie+W*se)+Y)),(A||R)&&(ne=L.getBBox(),Q=_round(Q+A/100*ne.width),ee=_round(ee+R/100*ne.height)),ne="matrix("+J+","+ie+","+re+","+se+","+Q+","+ee+")",L.setAttribute("transform",ne),K&&(L.style[_transformProp]=ne)},_addRotationalPropTween=function T(_,E,C,A,R){var I=360,F=_isString(R),B=parseFloat(R)*(F&&~R.indexOf("rad")?_RAD2DEG:1),U=B-A,V=A+U+"deg",D,O;return F&&(D=R.split("_")[1],D==="short"&&(U%=I,U!==U%(I/2)&&(U+=U<0?I:-360)),D==="cw"&&U<0?U=(U+I*_bigNum)%I-~~(U/I)*I:D==="ccw"&&U>0&&(U=(U-I*_bigNum)%I-~~(U/I)*I)),_._pt=O=new PropTween(_._pt,E,C,A,U,_renderPropWithEnd),O.e=V,O.u="deg",_._props.push(C),O},_assign=function T(_,E){for(var C in E)_[C]=E[C];return _},_addRawTransformPTs=function T(_,E,C){var A=_assign({},C._gsap),R="perspective,force3D,transformOrigin,svgOrigin",I=C.style,F,B,U,V,D,O,L,z;A.svg?(U=C.getAttribute("transform"),C.setAttribute("transform",""),I[_transformProp]=E,F=_parseTransform(C,1),_removeProperty(C,_transformProp),C.setAttribute("transform",U)):(U=getComputedStyle(C)[_transformProp],I[_transformProp]=E,F=_parseTransform(C,1),I[_transformProp]=U);for(B in _transformProps)U=A[B],V=F[B],U!==V&&R.indexOf(B)<0&&(L=getUnit(U),z=getUnit(V),D=L!==z?_convertToUnit(C,B,U,z):parseFloat(U),O=parseFloat(V),_._pt=new PropTween(_._pt,F,B,D,O-D,_renderCSSProp),_._pt.u=z||0,_._props.push(B));_assign(F,A)};_forEachName("padding,margin,Width,Radius",function(T,_){var E="Top",C="Right",A="Bottom",R="Left",I=(_<3?[E,C,A,R]:[E+R,E+C,A+C,A+R]).map(function(F){return _<2?T+F:"border"+F+T});_specialProps[_>1?"border"+T:T]=function(F,B,U,V,D){var O,L;if(arguments.length<4)return O=I.map(function(z){return _get(F,z,U)}),L=O.join(" "),L.split(O[0]).length===5?O[0]:L;O=(V+"").split(" "),L={},I.forEach(function(z,W){return L[z]=O[W]=O[W]||O[(W-1)/2|0]}),F.init(B,L,D)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function T(_){return _.style&&_.nodeType},init:function T(_,E,C,A,R){var I=this._props,F=_.style,B=C.vars.startAt,U,V,D,O,L,z,W,X,Y,K,Q,ee,J,ie,re,se;_pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(_),se=this.styles.props,this.tween=C;for(W in E)if(W!=="autoRound"&&(V=E[W],!(_plugins[W]&&_checkPlugin(W,E,C,A,_,R)))){if(L=typeof V,z=_specialProps[W],L==="function"&&(V=V.call(C,A,_,R),L=typeof V),L==="string"&&~V.indexOf("random(")&&(V=_replaceRandom(V)),z)z(this,_,W,V,C)&&(re=1);else if(W.substr(0,2)==="--")U=(getComputedStyle(_).getPropertyValue(W)+"").trim(),V+="",_colorExp.lastIndex=0,_colorExp.test(U)||(X=getUnit(U),Y=getUnit(V)),Y?X!==Y&&(U=_convertToUnit(_,W,U,Y)+Y):X&&(V+=X),this.add(F,"setProperty",U,V,A,R,0,0,W),I.push(W),se.push(W,0,F[W]);else if(L!=="undefined"){if(B&&W in B?(U=typeof B[W]=="function"?B[W].call(C,A,_,R):B[W],_isString(U)&&~U.indexOf("random(")&&(U=_replaceRandom(U)),getUnit(U+"")||U==="auto"||(U+=_config$1.units[W]||getUnit(_get(_,W))||""),(U+"").charAt(1)==="="&&(U=_get(_,W))):U=_get(_,W),O=parseFloat(U),K=L==="string"&&V.charAt(1)==="="&&V.substr(0,2),K&&(V=V.substr(2)),D=parseFloat(V),W in _propertyAliases&&(W==="autoAlpha"&&(O===1&&_get(_,"visibility")==="hidden"&&D&&(O=0),se.push("visibility",0,F.visibility),_addNonTweeningPT(this,F,"visibility",O?"inherit":"hidden",D?"inherit":"hidden",!D)),W!=="scale"&&W!=="transform"&&(W=_propertyAliases[W],~W.indexOf(",")&&(W=W.split(",")[0]))),Q=W in _transformProps,Q){if(this.styles.save(W),L==="string"&&V.substring(0,6)==="var(--"&&(V=_getComputedProperty(_,V.substring(4,V.indexOf(")"))),D=parseFloat(V)),ee||(J=_._gsap,J.renderTransform&&!E.parseTransform||_parseTransform(_,E.parseTransform),ie=E.smoothOrigin!==!1&&J.smooth,ee=this._pt=new PropTween(this._pt,F,_transformProp,0,1,J.renderTransform,J,0,-1),ee.dep=1),W==="scale")this._pt=new PropTween(this._pt,J,"scaleY",J.scaleY,(K?_parseRelative(J.scaleY,K+D):D)-J.scaleY||0,_renderCSSProp),this._pt.u=0,I.push("scaleY",W),W+="X";else if(W==="transformOrigin"){se.push(_transformOriginProp,0,F[_transformOriginProp]),V=_convertKeywordsToPercentages(V),J.svg?_applySVGOrigin(_,V,0,ie,0,this):(Y=parseFloat(V.split(" ")[2])||0,Y!==J.zOrigin&&_addNonTweeningPT(this,J,"zOrigin",J.zOrigin,Y),_addNonTweeningPT(this,F,W,_firstTwoOnly(U),_firstTwoOnly(V)));continue}else if(W==="svgOrigin"){_applySVGOrigin(_,V,1,ie,0,this);continue}else if(W in _rotationalProperties){_addRotationalPropTween(this,J,W,O,K?_parseRelative(O,K+V):V);continue}else if(W==="smoothOrigin"){_addNonTweeningPT(this,J,"smooth",J.smooth,V);continue}else if(W==="force3D"){J[W]=V;continue}else if(W==="transform"){_addRawTransformPTs(this,V,_);continue}}else W in F||(W=_checkPropPrefix(W)||W);if(Q||(D||D===0)&&(O||O===0)&&!_complexExp.test(V)&&W in F)X=(U+"").substr((O+"").length),D||(D=0),Y=getUnit(V)||(W in _config$1.units?_config$1.units[W]:X),X!==Y&&(O=_convertToUnit(_,W,U,Y)),this._pt=new PropTween(this._pt,Q?J:F,W,O,(K?_parseRelative(O,K+D):D)-O,!Q&&(Y==="px"||W==="zIndex")&&E.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=Y||0,X!==Y&&Y!=="%"&&(this._pt.b=U,this._pt.r=_renderCSSPropWithBeginning);else if(W in F)_tweenComplexCSSString.call(this,_,W,U,K?K+V:V);else if(W in _)this.add(_,W,U||_[W],K?K+V:V,A,R);else if(W!=="parseTransform"){_missingPlugin(W,V);continue}Q||(W in F?se.push(W,0,F[W]):typeof _[W]=="function"?se.push(W,2,_[W]()):se.push(W,1,U||_[W])),I.push(W)}}re&&_sortPropTweensByPriority(this)},render:function T(_,E){if(E.tween._time||!_reverting())for(var C=E._pt;C;)C.r(_,C.d),C=C._next;else E.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function T(_,E,C){var A=_propertyAliases[E];return A&&A.indexOf(",")<0&&(E=A),E in _transformProps&&E!==_transformOriginProp&&(_._gsap.x||_get(_,"x"))?C&&_recentSetterPlugin===C?E==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=C||{})&&(E==="scale"?_setterScaleWithRender:_setterTransformWithRender):_.style&&!_isUndefined(_.style[E])?_setterCSSStyle:~E.indexOf("-")?_setterCSSProp:_getSetter(_,E)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;gsap.core.getStyleSaver=_getStyleSaver;(function(T,_,E,C){var A=_forEachName(T+","+_+","+E,function(R){_transformProps[R]=1});_forEachName(_,function(R){_config$1.units[R]="deg",_rotationalProperties[R]=1}),_propertyAliases[A[13]]=T+","+_,_forEachName(C,function(R){var I=R.split(":");_propertyAliases[I[1]]=A[I[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(T){_config$1.units[T]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;const DEFAULT_MODEL_STATE={currentModel:null},Live2DModelContext=reactExports.createContext(null),Live2DModelProvider=reactExports.memo(({children:T})=>{const[_,E]=reactExports.useState(DEFAULT_MODEL_STATE.currentModel),C=reactExports.useCallback(R=>{E(I=>I?Object.assign(I,R):null)},[]),A=reactExports.useMemo(()=>({currentModel:_,setCurrentModel:E,updateModelState:C}),[_,C]);return jsxRuntimeExports.jsx(Live2DModelContext.Provider,{value:A,children:T})});function useLive2DModel$1(){const T=reactExports.useContext(Live2DModelContext);if(!T)throw new Error("useLive2DModel must be used within a Live2DModelProvider");return T}const SCALE_SPEED=.01,resetModelPosition=(T,_,E,C,A)=>{if(!T)return;const R=Number(C||0),I=Number(A||0),F=(_-T.width)/2+R,B=(E-T.height)/2+I;T.position.set(F,B)},handleModelScale=(T,_)=>{const E=_>0?-.01:SCALE_SPEED,C=T.scale.x,A=C+E,I=C+(A-C)*.3;return T.scale.set(I),I},setModelSize=(T,_)=>{if(!T||!_)return;const E=Number(window.devicePixelRatio||1);T.scale.set(Number(_)),T.filters&&T.filters.forEach(C=>{"resolution"in C&&Object.defineProperty(C,"resolution",{value:E})})},useLive2DResize=(T,_,E,C,A)=>{const{updateModelScale:R}=useLive2DConfig(),I=reactExports.useRef(null),F=reactExports.useRef(null),B=reactExports.useCallback(U=>{if(!E.current||!(C!=null&&C.scrollToResize))return;U.preventDefault();const V=handleModelScale(E.current,U.deltaY);(!F.current||Math.abs(V-F.current)>1e-4)&&(I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{R(V),F.current=V},500))},[E,C==null?void 0:C.scrollToResize,R]);reactExports.useEffect(()=>{var V;const U=(V=T.current)==null?void 0:V.querySelector("canvas");if(U)return U.addEventListener("wheel",B,{passive:!1}),()=>U.removeEventListener("wheel",B)},[B,T]),reactExports.useEffect(()=>{const U=new ResizeObserver(()=>{var V;if(E.current&&_.current){const{width:D,height:O}=A?{width:window.innerWidth,height:window.innerHeight}:((V=T.current)==null?void 0:V.getBoundingClientRect())||{width:0,height:0};_.current.renderer.resize(D,O),_.current.renderer.clear(),resetModelPosition(E.current,D,O,C==null?void 0:C.initialXshift,C==null?void 0:C.initialYshift)}});return T.current&&U.observe(T.current),()=>{U.disconnect()}},[E,T,A,_]),reactExports.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[])},useLive2DModel=({isPet:T,modelInfo:_})=>{const E=reactExports.useRef(null),C=reactExports.useRef(null),A=reactExports.useRef(null),R=reactExports.useRef(null),I=reactExports.useRef(void 0),{setCurrentModel:F}=useLive2DModel$1(),{setIsLoading:B}=useLive2DConfig(),U=reactExports.useRef(!1),{setAiState:V,aiState:D}=useAiState(),[O,L]=reactExports.useState(!1),{forceIgnoreMouse:z}=useForceIgnoreMouse(),[W,X]=reactExports.useState(!1),Y=reactExports.useRef(),K=reactExports.useRef(),Q=reactExports.useCallback(()=>{A.current&&(A.current.removeAllListeners(),F(null),C.current&&(C.current.stage.removeChild(A.current),A.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache(),A.current=null)),L(!1)},[F]),ee=reactExports.useCallback(()=>{C.current&&(A.current&&Q(),C.current.stage.removeChildren(),clearTextureCache(),C.current.renderer.clear(),C.current.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),destroyTextureCache(),C.current=null)},[Q]);reactExports.useEffect(()=>{if(!C.current&&E.current){const oe=new Application({view:E.current,autoStart:!0,width:window.innerWidth,height:window.innerHeight,backgroundAlpha:0,antialias:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,powerPreference:"high-performance",resolution:window.devicePixelRatio||1,autoDensity:!0});oe.ticker.add(()=>{oe.renderer&&oe.renderer.render(oe.stage)}),C.current=oe}return()=>{ee()}},[ee]);const J=reactExports.useCallback(async oe=>{!C.current||!_||(A.current&&(A.current.removeAllListeners(),C.current.stage.removeChild(A.current),A.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache()),A.current=oe,F(oe),window.live2dModel=oe,C.current.stage.addChild(oe),oe.interactive=!0,oe.cursor="pointer",L(!0))},[F]),ie=reactExports.useCallback(()=>{var he;if(!A.current)return;setModelSize(A.current,I.current);const{width:oe,height:fe}=T?{width:window.innerWidth,height:window.innerHeight}:((he=R.current)==null?void 0:he.getBoundingClientRect())||{width:0,height:0};resetModelPosition(A.current,oe,fe,_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift)},[_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift]),re=reactExports.useCallback(async()=>{if(!(!(_!=null&&_.url)||!C.current)&&!U.current){console.log("Loading model:",_.url);try{U.current=!0,B(!0),V(AiStateEnum.LOADING);const oe=await Live2DModel.from(_.url,{autoHitTest:!0,autoFocus:_.pointerInteractive??!1,autoUpdate:!0,ticker:Ticker.shared,motionPreload:MotionPreloadStrategy.IDLE,idleMotionGroup:_.idleMotionGroupName});await J(oe)}catch(oe){console.error("Failed to load Live2D model:",oe),toaster.create({title:`Failed to load Live2D model: ${oe}`,type:"error",duration:2e3})}finally{U.current=!1,B(!1),V(AiStateEnum.IDLE)}}},[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,B,J]),se=reactExports.useCallback(oe=>{if(!oe)return;if(oe.removeAllListeners("pointerenter"),oe.removeAllListeners("pointerleave"),oe.removeAllListeners("rightdown"),oe.removeAllListeners("pointerdown"),oe.removeAllListeners("pointermove"),oe.removeAllListeners("pointerup"),oe.removeAllListeners("pointerupoutside"),z&&T){oe.interactive=!1,oe.cursor="default";return}oe.interactive=!0,oe.cursor="pointer";let fe=!1,he=0,ge=0,ye=!1;const we=5;T&&(oe.on("pointerenter",()=>{var le;(le=window.api)==null||le.updateComponentHover("live2d-model",!0)}),oe.on("pointerleave",()=>{var le;fe||(le=window.api)==null||le.updateComponentHover("live2d-model",!1)}),oe.on("rightdown",le=>{le.data.originalEvent.preventDefault(),window.api.showContextMenu()})),oe.on("pointerdown",le=>{le.button===0&&(fe=!0,ye=!0,he=le.global.x-oe.x,ge=le.global.y-oe.y)}),oe.on("pointermove",le=>{if(fe){const de=le.global.x-he,ce=le.global.y-ge,ve=de-oe.x,be=ce-oe.y;Math.hypot(ve,be)>we&&(ye=!1),oe.position.x=de,oe.position.y=ce}}),oe.on("pointerup",le=>{fe&&(fe=!1,ye&&ne(oe,le.global.x,le.global.y))}),oe.on("pointerupoutside",()=>{fe=!1}),oe.on("sing",()=>{var ce,ve;if(A.current==null)return;X(!0),(ce=A.current)==null||ce.scale.set(.38);const{width:le,height:de}=T?{width:window.innerWidth,height:window.innerHeight}:((ve=R.current)==null?void 0:ve.getBoundingClientRect())||{width:0,height:0};resetModelPosition(A.current,le,de+700,_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift)}),oe.on("singFinished",()=>{X(!1)})},[T,z]),ne=reactExports.useCallback((oe,fe,he)=>{if(!(_!=null&&_.tapMotions))return;console.log("handleTapMotion",_==null?void 0:_.tapMotions);const ge=oe.toLocal(new Point(fe,he));if(!oe.hitTest(ge.x,ge.y).find(le=>{var ce;const de=(ce=_==null?void 0:_.tapMotions)==null?void 0:ce[le];return de?(console.log(`Found motion group for area ${le}:`,de),playRandomMotion(oe,de),!0):!1})&&Object.keys(_.tapMotions).length>0){const le=getMergedMotionGroup(_.tapMotions);playRandomMotion(oe,le)}},[_==null?void 0:_.tapMotions]);return reactExports.useEffect(()=>{var oe,fe,he,ge;D===AiStateEnum.IDLE&&(console.log("defaultEmotion: ",_==null?void 0:_.defaultEmotion),_!=null&&_.defaultEmotion?(fe=(oe=A.current)==null?void 0:oe.internalModel.motionManager.expressionManager)==null||fe.setExpression(_.defaultEmotion):(ge=(he=A.current)==null?void 0:he.internalModel.motionManager.expressionManager)==null||ge.resetExpression())},[A.current,D,_==null?void 0:_.defaultEmotion]),reactExports.useEffect(()=>(_!=null&&_.url&&re(),()=>{Q()}),[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,re,Q]),reactExports.useEffect(()=>{I.current=_==null?void 0:_.kScale},[_==null?void 0:_.kScale]),reactExports.useEffect(()=>{ie()},[O,ie]),reactExports.useEffect(()=>{A.current&&O&&se(A.current)},[O,se,z]),reactExports.useEffect(()=>{if(!C.current)return;const oe=new Container,fe=new Container;C.current.stage.addChild(oe),C.current.stage.addChild(fe);const he=new Emitter(oe,{lifetime:{min:1,max:2},frequency:.5,emitterLifetime:-1,maxParticles:500,pos:{x:300,y:(_==null?void 0:_.initialYshift)??0},behaviors:[{type:"alpha",config:{alpha:{list:[{value:.8,time:0},{value:0,time:1}]}}},{type:"moveSpeed",config:{speed:{list:[{value:100,time:0},{value:50,time:1}]}}},{type:"scale",config:{scale:{list:[{value:.5,time:0},{value:.1,time:1}]}}},{type:"textureSingle",config:{texture:Texture.from(snowflakeImg)}}]}),ge=new Emitter(fe,{lifetime:{min:1,max:2},frequency:.2,emitterLifetime:-1,maxParticles:500,pos:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight},behaviors:[{type:"alpha",config:{alpha:{list:[{value:.8,time:0},{value:0,time:1}]}}},{type:"moveSpeed",config:{speed:{list:[{value:100,time:0},{value:50,time:1}]}}},{type:"scale",config:{scale:{list:[{value:Math.random()*.1+.5,time:0},{value:Math.random()*.1+.1,time:1}]}}},{type:"textureSingle",config:{texture:Texture.from(heartImg)}}]});var ye=de=>{const ce=Math.random()*window.innerWidth,ve=Math.random()*window.innerHeight;de.updateSpawnPos(ce,ve)};let we=Date.now();const le=()=>{const de=Date.now();he.update((de-we)*.001),ge.update((de-we)*.001),ye(ge),ye(he),we=de};return C.current.ticker.add(le),()=>{var de,ce,ve;he.cleanup(),(de=C.current)==null||de.ticker.remove(le),(ce=C.current)==null||ce.stage.removeChild(oe),(ve=C.current)==null||ve.stage.removeChild(fe),oe.destroy({children:!0})}},[_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift]),reactExports.useEffect(()=>{var oe,fe,he,ge;if(C.current)if(W){const ye=Texture.from(micImg),we=new Sprite(ye);we.x=((oe=A.current)==null?void 0:oe.position.x)??0,we.y=(((fe=A.current)==null?void 0:fe.position.y)??0)+200,we.name="mic",we.alpha=0,C.current.stage.addChild(we);let le=0;const de=ve=>{le<1&&(le+=ve*.05,we.alpha=Math.min(le,1))},ce=()=>{if(A.current){const ve=new Point(-50,1800),be=A.current.toGlobal(ve);+we.position.set(be.x,be.y),we.scale.set(2*A.current.scale.x),we.rotation=-Math.PI/6}};Y.current=ce,K.current=de,C.current.ticker.add(de),C.current.ticker.add(ce)}else{const ye=C.current.stage.getChildByName("mic");ye&&gsapWithCSS.to(ye,{alpha:0,duration:.5,onComplete:()=>{var we;(we=C.current)==null||we.stage.removeChild(ye)}}),Y.current&&((he=C.current)==null||he.ticker.remove(Y.current),Y.current=void 0),K.current&&((ge=C.current)==null||ge.ticker.remove(K.current),K.current=void 0)}},[W]),{canvasRef:E,appRef:C,modelRef:A,containerRef:R}},playRandomMotion=(T,_)=>{if(!_||Object.keys(_).length===0)return;const E=Object.values(_).reduce((A,R)=>A+R,0);let C=Math.random()*E;Object.entries(_).find(([A,R])=>{if(C-=R,C<=0){const I=audioTaskQueue.hasTask()?MotionPriority.NORMAL:MotionPriority.FORCE;return console.log(`Playing weighted motion: ${A} (weight: ${R}/${E}, priority: ${I})`),T.motion(A,void 0,I),!0}return!1})},getMergedMotionGroup=T=>{const _={};return Object.values(T).flatMap(E=>Object.entries(E)).reduce((E,[C,A])=>(E[C]||(E[C]={total:0,count:0}),E[C].total+=A,E[C].count+=1,E),_),Object.entries(_).reduce((E,[C,{total:A,count:R}])=>({...E,[C]:A/R}),{})},DEFAULT_HISTORY={messages:[],historyList:[],currentHistoryUid:null,fullResponse:""},ChatHistoryContext=reactExports.createContext(null);function ChatHistoryProvider({children:T}){const[_,E]=reactExports.useState(DEFAULT_HISTORY.messages),[C,A]=reactExports.useState(DEFAULT_HISTORY.historyList),[R,I]=reactExports.useState(DEFAULT_HISTORY.currentHistoryUid),[F,B]=reactExports.useState(DEFAULT_HISTORY.fullResponse),[U,V]=reactExports.useState(!1),D=reactExports.useCallback(Y=>{const K={id:Date.now().toString(),content:Y,role:"human",timestamp:new Date().toISOString()};E(Q=>[...Q,K])},[]),O=reactExports.useCallback((Y,K,Q)=>{E(ee=>{const J=ee[ee.length-1];return U||!J||J.role!=="ai"?(V(!1),[...ee,{id:Date.now().toString(),content:Y,role:"ai",timestamp:new Date().toISOString(),name:K,avatar:Q}]):[...ee.slice(0,-1),{...J,content:J.content+Y,timestamp:new Date().toISOString()}]})},[U,V]),L=reactExports.useCallback((Y,K)=>{Y||console.error("updateHistoryList: uid is null"),R||console.error("updateHistoryList: currentHistoryUid is null"),A(Q=>Q.map(ee=>ee.uid===Y?{...ee,latest_message:K?{content:K.content,role:K.role,timestamp:K.timestamp}:null,timestamp:(K==null?void 0:K.timestamp)||ee.timestamp}:ee))},[R]),z=reactExports.useCallback(Y=>{B(K=>K+(Y||""))},[]),W=reactExports.useCallback(()=>{B(DEFAULT_HISTORY.fullResponse)},[]),X=reactExports.useMemo(()=>({messages:_,historyList:C,currentHistoryUid:R,appendHumanMessage:D,appendAIMessage:O,setMessages:E,setHistoryList:A,setCurrentHistoryUid:I,updateHistoryList:L,fullResponse:F,setFullResponse:B,appendResponse:z,clearResponse:W,setForceNewMessage:V}),[_,C,R,D,O,L,F,z,W,V]);return jsxRuntimeExports.jsx(ChatHistoryContext.Provider,{value:X,children:T})}function useChatHistory(){const T=reactExports.useContext(ChatHistoryContext);if(!T)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return T}const useInterrupt=()=>{const{aiState:T,setAiState:_}=useAiState(),{sendMessage:E}=useWebSocket(),{fullResponse:C,clearResponse:A}=useChatHistory(),{currentModel:R}=useLive2DModel$1(),{subtitleText:I,setSubtitleText:F}=useSubtitle();return{interrupt:(U=!0)=>{T==="thinking-speaking"&&(console.log("Interrupting conversation chain"),U&&E({type:"interrupt-signal",text:C}),_("interrupted"),audioTaskQueue.clearQueue(),R?R.stopSpeaking():console.error("Live2D model is not initialized"),A(),I==="Thinking..."&&F(""),console.log("Interrupted!"))}}},useAudioTask=()=>{const{aiState:T,backendSynthComplete:_,setBackendSynthComplete:E}=useAiState(),{setSubtitleText:C}=useSubtitle(),{appendResponse:A,appendAIMessage:R}=useChatHistory(),{currentModel:I}=useLive2DModel$1(),{sendMessage:F}=useWebSocket(),B=reactExports.useRef({aiState:T,currentModel:I,setSubtitleText:C,appendResponse:A,appendAIMessage:R});B.current={aiState:T,currentModel:I,setSubtitleText:C,appendResponse:A,appendAIMessage:R};const U=D=>new Promise(O=>{const{aiState:L,currentModel:z,setSubtitleText:W,appendResponse:X,appendAIMessage:Y}=B.current;if(L==="interrupted"){console.error("Audio playback blocked. State:",L),O();return}const{audioBase64:K,displayText:Q,expressions:ee,forwarded:J}=D;if(Q&&(X(Q.text),Y(Q.text,Q.name,Q.avatar),K&&W(Q.text),J||F({type:"audio-play-start",display_text:Q,forwarded:!0})),!z){console.error("Model not initialized"),O();return}try{(ee==null?void 0:ee[0])!==void 0&&z.expression(ee[0]);let ie=!1;K?z.speak(`data:audio/wav;base64,${K}`,{onFinish:()=>{console.log("Voiceline is over"),ie=!0,O()},onError:se=>{console.error("Audio playback error:",se),ie=!0,O()}}):O();const re=()=>{ie||setTimeout(re,100)};re()}catch(ie){console.error("Speak function error:",ie),toaster.create({title:`Speak function error: ${ie}`,type:"error",duration:2e3}),O()}});return reactExports.useEffect(()=>{let D=!0;return(async()=>{await audioTaskQueue.waitForCompletion(),D&&_&&(F({type:"frontend-playback-complete"}),E(!1))})(),()=>{D=!1}},[_,F,E]),{addAudioTask:async D=>{var L;const{aiState:O}=B.current;if(O==="interrupted"){console.log("Skipping audio task due to interrupted state");return}console.log(`Adding audio task ${(L=D.displayText)==null?void 0:L.text} to queue`),audioTaskQueue.addTask(()=>U(D))},appendResponse:A}},Live2D$1=reactExports.memo(({isPet:T})=>{const{modelInfo:_,isLoading:E}=useLive2DConfig(),{forceIgnoreMouse:C}=useForceIgnoreMouse();useIpcHandlers({isPet:T});const{canvasRef:A,appRef:R,modelRef:I,containerRef:F}=useLive2DModel({isPet:T,modelInfo:_});return useLive2DResize(F,R,I,_,T),useInterrupt(),useAudioTask(),reactExports.useEffect(()=>(I.current&&(window.live2d={expression:B=>{var U;return(U=I.current)==null?void 0:U.expression(B)},setExpression:B=>{var U,V;B!==void 0&&((V=(U=I.current)==null?void 0:U.internalModel.motionManager.expressionManager)==null||V.setExpression(B))},setRandomExpression:()=>{var B,U;return(U=(B=I.current)==null?void 0:B.internalModel.motionManager.expressionManager)==null?void 0:U.setRandomExpression()},getExpressions:()=>{var B,U;return(U=(B=I.current)==null?void 0:B.internalModel.motionManager.expressionManager)==null?void 0:U.definitions.map(V=>V.name)}}),()=>{delete window.live2d}),[I.current]),jsxRuntimeExports.jsx("div",{ref:F,style:{width:T?"100vw":"100%",height:T?"100vh":"100%",pointerEvents:T&&C?"none":"auto",overflow:"hidden",opacity:E?0:1,transition:"opacity 0.3s ease-in-out"},children:jsxRuntimeExports.jsx("canvas",{id:"canvas",ref:A,style:{width:"100%",height:"100%",pointerEvents:T&&C?"none":"auto",display:"block"}})})});Live2D$1.displayName="Live2D";function Canvas(){return jsxRuntimeExports.jsx(Background,{children:jsxRuntimeExports.jsxs(Box,{...canvasStyles.canvas.container,children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:!1}),jsxRuntimeExports.jsx(WebSocketStatus,{}),jsxRuntimeExports.jsx(Subtitle,{})]})})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$x=["attr","size","title"];function _objectWithoutProperties$x(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$x(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$x(T,_){if(T==null)return{};var E={};for(var C in T)if(Object.prototype.hasOwnProperty.call(T,C)){if(_.indexOf(C)>=0)continue;E[C]=T[C]}return E}function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$w.apply(this,arguments)}function ownKeys$2(T,_){var E=Object.keys(T);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(T);_&&(C=C.filter(function(A){return Object.getOwnPropertyDescriptor(T,A).enumerable})),E.push.apply(E,C)}return E}function _objectSpread$2(T){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$2(Object(E),!0).forEach(function(C){_defineProperty$g(T,C,E[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(E)):ownKeys$2(Object(E)).forEach(function(C){Object.defineProperty(T,C,Object.getOwnPropertyDescriptor(E,C))})}return T}function _defineProperty$g(T,_,E){return _=_toPropertyKey$f(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$f(T){var _=_toPrimitive$f(T,"string");return typeof _=="symbol"?_:_+""}function _toPrimitive$f(T,_){if(typeof T!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function Tree2Element(T){return T&&T.map((_,E)=>React.createElement(_.tag,_objectSpread$2({key:E},_.attr),Tree2Element(_.child)))}function GenIcon(T){return _=>React.createElement(IconBase,_extends$w({attr:_objectSpread$2({},T.attr)},_),Tree2Element(T.child))}function IconBase(T){var _=E=>{var{attr:C,size:A,title:R}=T,I=_objectWithoutProperties$x(T,_excluded$x),F=A||E.size||"1em",B;return E.className&&(B=E.className),T.className&&(B=(B?B+" ":"")+T.className),React.createElement("svg",_extends$w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},E.attr,C,I,{className:B,style:_objectSpread$2(_objectSpread$2({color:T.color||E.color},E.style),T.style),height:F,width:F,xmlns:"http://www.w3.org/2000/svg"}),R&&React.createElement("title",null,R),T.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,E=>_(E)):_(DefaultContext)}function FiCamera(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(T)}function FiChevronDown(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(T)}function FiChevronLeft(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(T)}function FiChevronsDown(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"},child:[]},{tag:"polyline",attr:{points:"7 6 12 11 17 6"},child:[]}]})(T)}function FiClock(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(T)}function FiMaximize2(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(T)}function FiMinimize2(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"},child:[]},{tag:"polyline",attr:{points:"20 10 14 10 14 4"},child:[]},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(T)}function FiMinus(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(T)}function FiMonitor(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"},child:[]}]})(T)}function FiMusic(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(T)}function FiPlus(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(T)}function FiSettings(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(T)}function FiTrash2(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(T)}function FiUsers(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(T)}function FiX(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(T)}const isElectron$2=window.api!==void 0,commonStyles={scrollbar:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{bg:"whiteAlpha.100",borderRadius:"full"},"&::-webkit-scrollbar-thumb":{bg:"whiteAlpha.300",borderRadius:"full"}},panel:{border:"1px solid",borderColor:"whiteAlpha.200",borderRadius:"lg",bg:"blackAlpha.400"}},sidebarStyles={sidebar:{container:T=>({position:"absolute",left:0,top:0,height:"100%",width:"440px",bg:"gray.900",transform:T?"translateX(calc(-100% + 24px))":"translateX(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",gap:4,overflow:T?"visible":"hidden",pb:"4"}),toggleButton:{position:"absolute",right:0,top:0,width:"24px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"whiteAlpha.700",_hover:{color:"white"},bg:"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1},content:{flex:1,width:"100%",display:"flex",flexDirection:"column",gap:4,overflow:"hidden"},header:{width:"100%",display:"flex",alignItems:"center",gap:1,p:2}},chatHistoryPanel:{messageList:{...commonStyles.panel,p:4,width:"97%",flex:1,overflowY:"auto",css:{...commonStyles.scrollbar,scrollPaddingBottom:"1rem"},display:"flex",flexDirection:"column",gap:2}},historyDrawer:{listContainer:{flex:1,overflowY:"auto",px:4,py:2,css:commonStyles.scrollbar},historyItem:{mb:4,p:3,borderRadius:"md",bg:"whiteAlpha.50",cursor:"pointer",transition:"all 0.2s",_hover:{bg:"whiteAlpha.100"}},historyItemSelected:{bg:"whiteAlpha.200",borderLeft:"3px solid",borderColor:"blue.500"},historyHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},timestamp:{fontSize:"sm",color:"whiteAlpha.700",fontFamily:"mono"},deleteButton:{variant:"ghost",colorScheme:"red",size:"sm",color:"red.300",opacity:.8,_hover:{opacity:1,bg:"whiteAlpha.200"}},messagePreview:{fontSize:"sm",color:"whiteAlpha.900",noOfLines:2,overflow:"hidden",textOverflow:"ellipsis"},drawer:{content:{background:"var(--chakra-colors-gray-900)",maxWidth:"440px",marginTop:isElectron$2?"30px":"0",height:isElectron$2?"calc(100vh - 30px)":"100vh"},title:{color:"white"},closeButton:{color:"white"},actionButton:{color:"white",borderColor:"white",variant:"outline"}}},cameraPanel:{container:{width:"97%",overflow:"hidden",px:4,minH:"240px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},videoContainer:{...commonStyles.panel,width:"100%",height:"240px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",borderRadius:"8px",display:"block"}},screenPanel:{container:{width:"97%",overflow:"hidden",px:4,minH:"240px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},screenContainer:{...commonStyles.panel,width:"100%",height:"240px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s"},video:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",display:"block"}},bottomTab:{container:{width:"97%",px:4,position:"relative",zIndex:0},list:{borderBottom:"none",gap:"2"},trigger:{color:"whiteAlpha.700",display:"flex",alignItems:"center",gap:2,px:3,py:2,borderRadius:"md",_hover:{color:"white",bg:"whiteAlpha.50"},_selected:{color:"white",bg:"whiteAlpha.200"}}},groupDrawer:{section:{mb:6},sectionTitle:{fontSize:"lg",fontWeight:"semibold",color:"white",mb:3},inviteBox:{display:"flex",gap:2},input:{bg:"whiteAlpha.100",border:"none",color:"white",_placeholder:{color:"whiteAlpha.400"}},memberList:{display:"flex",flexDirection:"column",gap:2},memberItem:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderRadius:"md",bg:"whiteAlpha.100"},memberText:{color:"white",fontSize:"sm"},removeButton:{size:"sm",color:"red.300",bg:"transparent",_hover:{bg:"whiteAlpha.200"}},button:{color:"white",bg:"whiteAlpha.100",_hover:{bg:"whiteAlpha.200"}},clipboardButton:{color:"white",bg:"transparent",_hover:{bg:"whiteAlpha.200"},size:"sm"}}},chatPanelStyles=css$2`
  .cs-message-list {
    background: var(--chakra-colors-gray-900) !important;
    padding: var(--chakra-space-4);
  }
  
  .cs-message {
    margin: 12px 0;
    padding-top: 20px !important;
  }

  .cs-message__content {
    background-color: var(--chakra-colors-gray-700) !important;
    border-radius: var(--chakra-radii-md);
    padding: 8px !important;
    color: var(--chakra-colors-white) !important;
    font-size: 0.95rem !important;
    line-height: 1.5 !important;
    margin-top: 4px !important;
  }

  .cs-message__text {
    padding: 8px 0 !important;
  }

  .cs-message--outgoing .cs-message__content {
    background-color: var(--chakra-colors-gray-600) !important;
  }

  .cs-chat-container {
    background: transparent !important;
    border: 1px solid var(--chakra-colors-whiteAlpha-200);
    border-radius: var(--chakra-radii-lg);
    padding: var(--chakra-space-2);
  }

  .cs-main-container {
    border: none !important;
    background: transparent !important;
    width: calc(100% - 24px) !important;
    margin-left: 0 !important;
  }

  .cs-message__sender {
    position: absolute !important;
    top: 0 !important;
    left: 36px !important;
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    color: var(--chakra-colors-whiteAlpha-900) !important;
  }

  .cs-message__content-wrapper {
    max-width: 80%;
    margin: 0 8px;
  }

  .cs-avatar {
    background-color: var(--chakra-colors-blue-500) !important;
    color: white !important;
    width: 28px !important;
    height: 28px !important;
    font-size: 14px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 50% !important;
  }

  .cs-message--outgoing .cs-avatar {
    background-color: var(--chakra-colors-green-500) !important;
  }

  .cs-message__header {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
`;function LuBell(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"},child:[]},{tag:"path",attr:{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"},child:[]}]})(T)}function LuCheck(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 6 9 17l-5-5"},child:[]}]})(T)}function LuClipboard(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"},child:[]},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]}]})(T)}function LuHand(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"},child:[]},{tag:"path",attr:{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"},child:[]},{tag:"path",attr:{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"},child:[]},{tag:"path",attr:{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"},child:[]}]})(T)}function LuLink(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(T)}function LuMicOff(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"2",x2:"22",y1:"2",y2:"22"},child:[]},{tag:"path",attr:{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"},child:[]},{tag:"path",attr:{d:"M5 10v2a7 7 0 0 0 12 5"},child:[]},{tag:"path",attr:{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"},child:[]},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(T)}function LuMic(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"},child:[]},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(T)}function LuSend(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},child:[]},{tag:"path",attr:{d:"m21.854 2.147-10.94 10.939"},child:[]}]})(T)}function LuX(T){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(T)}const CloseButton=reactExports.forwardRef((T,_)=>jsxRuntimeExports.jsx(IconButton,{variant:"ghost","aria-label":"Close",ref:_,...T,children:T.children??jsxRuntimeExports.jsx(LuX,{})})),isElectron$1=window.api!==void 0,settingStyles={settingUI:{tabs:{root:{width:"100%",variant:"plain",colorPalette:"gray"},content:{},trigger:{color:"whiteAlpha.600",_selected:{color:"white"},_hover:{color:"white"}},list:{display:"flex",justifyContent:"flex-start",width:"100%",borderBottom:"1px solid",borderColor:"whiteAlpha.200",mb:4,pl:0}},drawerContent:{bg:"gray.900",maxWidth:"440px",height:isElectron$1?"calc(100vh - 30px)":"100vh",borderLeft:"1px solid",borderColor:"whiteAlpha.200"},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",position:"relative",px:6,py:4},drawerTitle:{color:"white",fontSize:"lg",fontWeight:"semibold"},closeButton:{position:"absolute",right:1,top:1,color:"white"}},general:{field:{label:{color:"whiteAlpha.800"}},select:{root:{colorPalette:"gray",bg:"gray.800"},trigger:{bg:"gray.800"}},input:{bg:"gray.800"}},common:{field:{orientation:"horizontal"},fieldLabel:{fontSize:"sm",color:"whiteAlpha.800",whiteSpace:"nowrap"},switch:{size:"md",colorPalette:"blue",variant:"solid"},numberInput:{root:{pattern:"[0-9]*\\.?[0-9]*",inputMode:"decimal"},input:{bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",_hover:{bg:"whiteAlpha.200"}}},container:{gap:8,maxW:"sm",css:{"--field-label-width":"120px"}}}},useGeneralSettings=({bgUrlContext:T,confName:_,setConfName:E,baseUrl:C,wsUrl:A,onWsUrlChange:R,onBaseUrlChange:I,onSave:F,onCancel:B})=>{var ge;const{showSubtitle:U,setShowSubtitle:V}=useSubtitle(),{setUseCameraBackground:D}=T||{},{startBackgroundCamera:O,stopBackgroundCamera:L}=useCamera(),{configFiles:z,getFilenameByName:W}=useConfig(),{switchCharacter:X}=useSwitchCharacter(),Y=()=>{if(!(T!=null&&T.backgroundUrl))return[];const we=T.backgroundUrl.replace(C,"");return we.startsWith("/bg/")?[we]:[]},K={language:["en"],customBgUrl:(ge=T==null?void 0:T.backgroundUrl)!=null&&ge.includes("/bg/")?"":(T==null?void 0:T.backgroundUrl)||"",selectedBgUrl:Y(),backgroundUrl:(T==null?void 0:T.backgroundUrl)||"",selectedCharacterPreset:[],useCameraBackground:(T==null?void 0:T.useCameraBackground)||!1,wsUrl:A||defaultWsUrl,baseUrl:C||defaultBaseUrl,showSubtitle:U},[Q,ee]=reactExports.useState(K),[J,ie]=reactExports.useState(K),re=_;reactExports.useEffect(()=>{V(Q.showSubtitle);const ye=Q.customBgUrl||Q.selectedBgUrl[0];if(ye&&T){const we=ye.startsWith("http")?ye:`${C}${ye}`;T.setBackgroundUrl(we)}R(Q.wsUrl),I(Q.baseUrl)},[Q]),reactExports.useEffect(()=>{if(_){const ye={...Q,selectedCharacterPreset:[_]};ee(ye),ie(ye)}},[_]),reactExports.useEffect(()=>{if(!F||!B)return;const ye=F(()=>{ne()}),we=B(()=>{oe()});return()=>{ye==null||ye(),we==null||we()}},[F,B]);const se=(ye,we)=>{ee(le=>({...le,[ye]:we})),ye==="wsUrl"&&R(we),ye==="baseUrl"&&I(we)},ne=()=>{ie(Q)},oe=()=>{ee(J),V(J.showSubtitle),T&&(T.setBackgroundUrl(J.backgroundUrl),T.setUseCameraBackground(J.useCameraBackground)),R(J.wsUrl),I(J.baseUrl),re&&E(re),J.useCameraBackground?O():L()};return{settings:Q,handleSettingChange:se,handleSave:ne,handleCancel:oe,handleCameraToggle:async ye=>{if(D)if(ye)try{await O(),se("useCameraBackground",!0),D(!0)}catch(we){console.error("Failed to start camera:",we),se("useCameraBackground",!1),D(!1)}else L(),se("useCameraBackground",!1),D(!1)},handleCharacterPresetChange:ye=>{const we=ye[0],le=z.find(ce=>ce.filename===we),de=_?W(_):"";se("selectedCharacterPreset",ye),de!==we&&le&&X(we)},showSubtitle:U,setShowSubtitle:V}},Field=reactExports.forwardRef((T,_)=>{const{label:E,children:C,helperText:A,errorText:R,optionalText:I,...F}=T;return jsxRuntimeExports.jsxs(FieldRoot,{ref:_,...F,children:[E&&jsxRuntimeExports.jsxs(FieldLabel,{children:[E,jsxRuntimeExports.jsx(FieldRequiredIndicator,{fallback:I})]}),C,A&&jsxRuntimeExports.jsx(FieldHelperText,{children:A}),R&&jsxRuntimeExports.jsx(FieldErrorText,{children:R})]})}),Switch=reactExports.forwardRef((T,_)=>{const{inputProps:E,children:C,rootRef:A,trackLabel:R,thumbLabel:I,...F}=T;return jsxRuntimeExports.jsxs(SwitchRoot,{ref:A,...F,children:[jsxRuntimeExports.jsx(SwitchHiddenInput,{ref:_,...E}),jsxRuntimeExports.jsxs(SwitchControl,{children:[jsxRuntimeExports.jsx(SwitchThumb,{children:I&&jsxRuntimeExports.jsx(SwitchThumbIndicator,{fallback:I==null?void 0:I.off,children:I==null?void 0:I.on})}),R&&jsxRuntimeExports.jsx(SwitchIndicator,{fallback:R.off,children:R.on})]}),C!=null&&jsxRuntimeExports.jsx(SwitchLabel,{children:C})]})}),SelectTrigger=reactExports.forwardRef((T,_)=>{const{children:E,clearable:C,...A}=T;return jsxRuntimeExports.jsxs(SelectControl,{...A,children:[jsxRuntimeExports.jsx(SelectTrigger$1,{ref:_,children:E}),jsxRuntimeExports.jsxs(SelectIndicatorGroup,{children:[C&&jsxRuntimeExports.jsx(SelectClearTrigger,{}),jsxRuntimeExports.jsx(SelectIndicator,{})]})]})}),SelectClearTrigger=reactExports.forwardRef((T,_)=>jsxRuntimeExports.jsx(SelectClearTrigger$1,{asChild:!0,...T,ref:_,children:jsxRuntimeExports.jsx(CloseButton,{size:"xs",variant:"plain",focusVisibleRing:"inside",focusRingWidth:"2px",pointerEvents:"auto"})})),SelectContent=reactExports.forwardRef((T,_)=>{const{portalled:E=!0,portalRef:C,...A}=T;return jsxRuntimeExports.jsx(Portal,{disabled:!E,container:C,children:jsxRuntimeExports.jsx(SelectPositioner,{children:jsxRuntimeExports.jsx(SelectContent$1,{...A,ref:_})})})}),SelectItem=reactExports.forwardRef((T,_)=>{const{item:E,children:C,...A}=T;return jsxRuntimeExports.jsxs(SelectItem$1,{item:E,...A,ref:_,children:[C,jsxRuntimeExports.jsx(SelectItemIndicator,{})]},E.value)}),SelectValueText=reactExports.forwardRef((T,_)=>{const{children:E,...C}=T;return jsxRuntimeExports.jsx(SelectValueText$1,{...C,ref:_,children:jsxRuntimeExports.jsx(SelectContext,{children:A=>{const R=A.selectedItems;return R.length===0?T.placeholder:E?E(R):R.length===1?A.collection.stringifyItem(R[0]):`${R.length} selected`}})})}),SelectRoot=reactExports.forwardRef((T,_)=>jsxRuntimeExports.jsx(SelectRoot$1,{...T,ref:_,positioning:{sameWidth:!0,...T.positioning},children:T.asChild?T.children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectHiddenSelect,{}),T.children]})}));reactExports.forwardRef((T,_)=>{const{children:E,label:C,...A}=T;return jsxRuntimeExports.jsxs(SelectItemGroup,{...A,ref:_,children:[jsxRuntimeExports.jsx(SelectItemGroupLabel,{children:C}),E]})});function SelectField({label:T,value:_,onChange:E,collection:C,placeholder:A}){return jsxRuntimeExports.jsx(Field,{...settingStyles.general.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.general.field.label,children:T}),children:jsxRuntimeExports.jsxs(SelectRoot,{...settingStyles.general.select.root,collection:C,value:_,onValueChange:R=>E(R.value),children:[jsxRuntimeExports.jsx(SelectTrigger,{...settingStyles.general.select.trigger,children:jsxRuntimeExports.jsx(SelectValueText,{placeholder:A})}),jsxRuntimeExports.jsx(SelectContent,{children:C.items.map(R=>jsxRuntimeExports.jsx(SelectItem,{item:R,children:R.label},R.value))})]})})}function NumberField({label:T,value:_,onChange:E,min:C,max:A,step:R,allowMouseWheel:I}){return jsxRuntimeExports.jsx(Field,{...settingStyles.common.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.common.fieldLabel,children:T}),children:jsxRuntimeExports.jsxs(NumberInputRoot,{...settingStyles.common.numberInput.root,value:_.toString(),onValueChange:F=>E(F.value),min:C,max:A,step:R,allowMouseWheel:I,children:[jsxRuntimeExports.jsx(NumberInputInput,{...settingStyles.common.numberInput.input}),jsxRuntimeExports.jsxs(NumberInputControl,{children:[jsxRuntimeExports.jsx(NumberInputIncrementTrigger,{}),jsxRuntimeExports.jsx(NumberInputDecrementTrigger,{})]})]})})}function SwitchField({label:T,checked:_,onChange:E}){return jsxRuntimeExports.jsx(Field,{...settingStyles.common.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.common.fieldLabel,children:T}),children:jsxRuntimeExports.jsx(Switch,{...settingStyles.common.switch,checked:_,onCheckedChange:C=>E(C.checked)})})}function InputField({label:T,value:_,onChange:E,placeholder:C}){return jsxRuntimeExports.jsx(Field,{...settingStyles.general.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.general.field.label,children:T}),children:jsxRuntimeExports.jsx(Input,{...settingStyles.general.input,placeholder:C,value:_,onChange:A=>E(A.target.value)})})}const useCollections=()=>{const{backgroundFiles:T}=useBgUrl()||{},{configFiles:_}=useConfig(),E=createListCollection({items:[{label:"English",value:"en"},{label:"中文",value:"zh"}]}),C=createListCollection({items:(T==null?void 0:T.map(R=>({label:String(R),value:`/bg/${R}`})))||[]}),A=createListCollection({items:_.map(R=>({label:R.name,value:R.filename}))});return{languages:E,backgrounds:C,characterPresets:A}};function General({onSave:T,onCancel:_}){const E=useBgUrl(),{confName:C,setConfName:A}=useConfig(),{wsUrl:R,setWsUrl:I,baseUrl:F,setBaseUrl:B}=useWebSocket(),U=useCollections(),{settings:V,handleSettingChange:D,handleCameraToggle:O,handleCharacterPresetChange:L,showSubtitle:z,setShowSubtitle:W}=useGeneralSettings({bgUrlContext:E,confName:C,setConfName:A,baseUrl:F,wsUrl:R,onWsUrlChange:I,onBaseUrlChange:B,onSave:T,onCancel:_});return jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SelectField,{label:"Language",value:V.language,onChange:X=>D("language",X),collection:U.languages,placeholder:"Select language"}),jsxRuntimeExports.jsx(SwitchField,{label:"Use Camera Background",checked:V.useCameraBackground,onChange:O}),jsxRuntimeExports.jsx(SwitchField,{label:"Show Subtitle",checked:z,onChange:W}),!V.useCameraBackground&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectField,{label:"Background Image",value:V.selectedBgUrl,onChange:X=>D("selectedBgUrl",X),collection:U.backgrounds,placeholder:"Select from available backgrounds"}),jsxRuntimeExports.jsx(InputField,{label:"Or enter a custom background URL",value:V.customBgUrl,onChange:X=>D("customBgUrl",X),placeholder:"Enter image URL"})]}),jsxRuntimeExports.jsx(SelectField,{label:"Character Preset",value:V.selectedCharacterPreset,onChange:L,collection:U.characterPresets,placeholder:C||"Select character preset"}),jsxRuntimeExports.jsx(InputField,{label:"WebSocket URL",value:V.wsUrl,onChange:X=>D("wsUrl",X),placeholder:"Enter WebSocket URL"}),jsxRuntimeExports.jsx(InputField,{label:"Base URL",value:V.baseUrl,onChange:X=>D("baseUrl",X),placeholder:"Enter Base URL"})]})}const useLive2dSettings=()=>{const T=useLive2DConfig(),_={url:"",kScale:.5,initialXshift:0,initialYshift:0,emotionMap:{},scrollToResize:!0},[E,C]=reactExports.useState((T==null?void 0:T.modelInfo)||_),[A,R]=reactExports.useState((T==null?void 0:T.modelInfo)||_);return reactExports.useEffect(()=>{T!=null&&T.modelInfo&&JSON.stringify(T.modelInfo)!==JSON.stringify(A)&&(R(T.modelInfo),C(T.modelInfo))},[T==null?void 0:T.modelInfo]),reactExports.useEffect(()=>{T&&E&&T.setModelInfo(E)},[E.pointerInteractive,E.scrollToResize]),{modelInfo:E,handleInputChange:(U,V)=>{C(D=>({...D,[U]:V}))},handleSave:()=>{T&&E&&R(E)},handleCancel:()=>{C(A),T&&A&&T.setModelInfo(A)}}};function live2D({onSave:T,onCancel:_}){const{modelInfo:E,handleInputChange:C,handleSave:A,handleCancel:R}=useLive2dSettings();return reactExports.useEffect(()=>{if(!T||!_)return;const I=T(A),F=_(R);return()=>{I==null||I(),F==null||F()}},[T,_]),jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Pointer Interactive",checked:E.pointerInteractive??!1,onChange:I=>C("pointerInteractive",I)}),jsxRuntimeExports.jsx(SwitchField,{label:"Enable Scroll to Resize",checked:E.scrollToResize??!0,onChange:I=>C("scrollToResize",I)})]})}const useASRSettings=()=>{const{settings:T,updateSettings:_,autoStopMic:E,setAutoStopMic:C,autoStartMicOn:A,setAutoStartMicOn:R,autoStartMicOnConvEnd:I,setAutoStartMicOnConvEnd:F}=useVAD(),B=reactExports.useRef(T),U=reactExports.useRef(T),V=reactExports.useRef(E),D=reactExports.useRef(A),O=reactExports.useRef(I),[L,z]=reactExports.useState(E),[W,X]=reactExports.useState(A),[Y,K]=reactExports.useState(I),[,Q]=React.useReducer(oe=>oe+1,0);reactExports.useEffect(()=>{z(E),X(A),K(I)},[E,A,I]);const ee=(oe,fe)=>{if(fe===""||fe==="-")B.current={...B.current,[oe]:fe};else{const he=Number(fe);isNaN(he)||(B.current={...B.current,[oe]:he})}Q()},J=oe=>{z(oe),C(oe)},ie=oe=>{X(oe),R(oe)},re=oe=>{K(oe),F(oe)},se=()=>{_(B.current),U.current=B.current,V.current=L,D.current=W,O.current=Y},ne=()=>{B.current=U.current,z(V.current),X(D.current),C(V.current),R(D.current),K(O.current),F(O.current),Q()};return{localSettings:B.current,autoStopMic:L,autoStartMicOn:W,autoStartMicOnConvEnd:Y,setAutoStopMic:J,setAutoStartMicOn:ie,setAutoStartMicOnConvEnd:re,handleInputChange:ee,handleSave:se,handleCancel:ne}};function ASR({onSave:T,onCancel:_}){const{localSettings:E,autoStopMic:C,autoStartMicOn:A,autoStartMicOnConvEnd:R,setAutoStopMic:I,setAutoStartMicOn:F,setAutoStartMicOnConvEnd:B,handleInputChange:U,handleSave:V,handleCancel:D}=useASRSettings();return reactExports.useEffect(()=>{if(!T||!_)return;const O=T(V),L=_(D);return()=>{O==null||O(),L==null||L()}},[T,_,V,D]),jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Auto Stop Mic When AI Start Speaking",checked:C,onChange:I}),jsxRuntimeExports.jsx(SwitchField,{label:"Auto Start Mic When Conversation End",checked:R,onChange:B}),jsxRuntimeExports.jsx(SwitchField,{label:"Auto Start Mic When AI Interrupted",checked:A,onChange:F}),jsxRuntimeExports.jsx(NumberField,{label:"Speech Prob Threshold",value:E.positiveSpeechThreshold,onChange:O=>U("positiveSpeechThreshold",O),min:1,max:100}),jsxRuntimeExports.jsx(NumberField,{label:"Negative Speech Threshold",value:E.negativeSpeechThreshold,onChange:O=>U("negativeSpeechThreshold",O),min:0,max:100}),jsxRuntimeExports.jsx(NumberField,{label:"Redemption Frames",value:E.redemptionFrames,onChange:O=>U("redemptionFrames",O),min:1,max:100})]})}function TTS(){return jsxRuntimeExports.jsx(Box,{children:"TTS Settings Content"})}function useTriggerSpeak(){const{sendMessage:T}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendTriggerSignal:reactExports.useCallback(async C=>{const A=await _();T({type:"ai-speak-signal",idle_time:C,images:A})},[T,_])}}const defaultSettings$1={allowProactiveSpeak:!1,idleSecondsToSpeak:5,allowButtonTrigger:!1},ProactiveSpeakContext=reactExports.createContext(null);function ProactiveSpeakProvider({children:T}){const[_,E]=useLocalStorage("proactiveSpeakSettings",defaultSettings$1),{aiState:C}=useAiState(),{sendTriggerSignal:A}=useTriggerSpeak(),R=reactExports.useRef(null),I=reactExports.useRef(null),F=reactExports.useCallback(()=>{R.current&&(clearTimeout(R.current),R.current=null),I.current=null},[]),B=reactExports.useCallback(()=>{F(),_.allowProactiveSpeak&&(I.current=Date.now(),R.current=setTimeout(()=>{const D=(Date.now()-I.current)/1e3;A(D)},_.idleSecondsToSpeak*1e3))},[_.allowProactiveSpeak,_.idleSecondsToSpeak,A,F]);reactExports.useEffect(()=>{C===AiStateEnum.IDLE?B():F()},[C,B,F]),reactExports.useEffect(()=>()=>{F()},[F]);const U=reactExports.useCallback(D=>{E(D)},[E]),V=reactExports.useMemo(()=>({settings:_,updateSettings:U}),[_,U]);return jsxRuntimeExports.jsx(ProactiveSpeakContext.Provider,{value:V,children:T})}function useProactiveSpeak(){const T=reactExports.useContext(ProactiveSpeakContext);if(!T)throw new Error("useProactiveSpeak must be used within a ProactiveSpeakProvider");return T}function useAgentSettings({onSave:T,onCancel:_}={}){const{settings:E,updateSettings:C}=useProactiveSpeak(),[A,R]=reactExports.useState({allowProactiveSpeak:E.allowProactiveSpeak,idleSecondsToSpeak:E.idleSecondsToSpeak,allowButtonTrigger:E.allowButtonTrigger}),[I,F]=reactExports.useState({...E});reactExports.useEffect(()=>{E&&(F(E),R(E))},[E]);const B=reactExports.useCallback(L=>{R(z=>({...z,allowProactiveSpeak:L}))},[]),U=reactExports.useCallback(L=>{R(z=>({...z,idleSecondsToSpeak:L}))},[]),V=reactExports.useCallback(L=>{R(z=>({...z,allowButtonTrigger:L}))},[]),D=reactExports.useCallback(()=>{C(A),F(A)},[C,A]),O=reactExports.useCallback(()=>{R(I),C(I)},[I,C]);return reactExports.useEffect(()=>{if(!T||!_)return;const L=T(D),z=_(O);return()=>{L==null||L(),z==null||z()}},[T,_,D,O]),{settings:A,handleAllowProactiveSpeakChange:B,handleIdleSecondsChange:U,handleAllowButtonTriggerChange:V}}function Agent({onSave:T,onCancel:_}){const{settings:E,handleAllowProactiveSpeakChange:C,handleIdleSecondsChange:A,handleAllowButtonTriggerChange:R}=useAgentSettings({onSave:T,onCancel:_});return jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Allow AI to Speak Proactively",checked:E.allowProactiveSpeak,onChange:C}),E.allowProactiveSpeak&&jsxRuntimeExports.jsx(NumberField,{label:"Idle seconds allow AI to speak",value:E.idleSecondsToSpeak,onChange:I=>A(Number(I)),min:0,step:.1,allowMouseWheel:!0}),jsxRuntimeExports.jsx(SwitchField,{label:"Prompt AI to Speak via Raise Hand Button",checked:E.allowButtonTrigger,onChange:R})]})}function About(){return jsxRuntimeExports.jsx(Box,{children:"About Settings Content"})}function SettingUI({open:T,onClose:_}){const[E,C]=reactExports.useState([]),[A,R]=reactExports.useState([]),[I,F]=reactExports.useState("general"),B=reactExports.useCallback(L=>(C(z=>[...z,L]),()=>{C(z=>z.filter(W=>W!==L))}),[]),U=reactExports.useCallback(L=>(R(z=>[...z,L]),()=>{R(z=>z.filter(W=>W!==L))}),[]),V=reactExports.useCallback(()=>{E.forEach(L=>L()),_()},[E,_]),D=reactExports.useCallback(()=>{A.forEach(L=>L()),_()},[A,_]),O=reactExports.useMemo(()=>jsxRuntimeExports.jsxs(TabsContentGroup,{children:[jsxRuntimeExports.jsx(TabsContent,{value:"general",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(General,{onSave:B,onCancel:U})}),jsxRuntimeExports.jsx(TabsContent,{value:"live2d",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(live2D,{onSave:B,onCancel:U})}),jsxRuntimeExports.jsx(TabsContent,{value:"asr",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(ASR,{onSave:B,onCancel:U})}),jsxRuntimeExports.jsx(TabsContent,{value:"tts",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(TTS,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"agent",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(Agent,{onSave:B,onCancel:U})}),jsxRuntimeExports.jsx(TabsContent,{value:"about",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(About,{})})]}),[B,U]);return jsxRuntimeExports.jsxs(DrawerRoot$1,{open:T,onOpenChange:L=>L.open?null:_(),placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop$1,{}),jsxRuntimeExports.jsxs(DrawerContent$1,{...settingStyles.settingUI.drawerContent,children:[jsxRuntimeExports.jsxs(DrawerHeader$1,{...settingStyles.settingUI.drawerHeader,children:[jsxRuntimeExports.jsx(DrawerTitle$1,{...settingStyles.settingUI.drawerTitle,children:"Settings"}),jsxRuntimeExports.jsx("div",{...settingStyles.settingUI.closeButton,children:jsxRuntimeExports.jsx(DrawerCloseTrigger$1,{asChild:!0,onClick:D,children:jsxRuntimeExports.jsx(CloseButton,{size:"sm",color:"white"})})})]}),jsxRuntimeExports.jsx(DrawerBody$1,{children:jsxRuntimeExports.jsxs(TabsRoot,{defaultValue:"general",value:I,onValueChange:L=>F(L.value),...settingStyles.settingUI.tabs.root,children:[jsxRuntimeExports.jsxs(TabsList,{...settingStyles.settingUI.tabs.list,children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"general",...settingStyles.settingUI.tabs.trigger,children:"General"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"live2d",...settingStyles.settingUI.tabs.trigger,children:"Live2D"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"asr",...settingStyles.settingUI.tabs.trigger,children:"ASR"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"tts",...settingStyles.settingUI.tabs.trigger,children:"TTS"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"agent",...settingStyles.settingUI.tabs.trigger,children:"Agent"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"about",...settingStyles.settingUI.tabs.trigger,children:"About"})]}),O]})}),jsxRuntimeExports.jsxs(DrawerFooter$1,{children:[jsxRuntimeExports.jsx(Button$1,{colorPalette:"red",onClick:D,children:"Cancel"}),jsxRuntimeExports.jsx(Button$1,{colorPalette:"blue",onClick:V,children:"Save"})]})]})]})}const Avatar$1=reactExports.forwardRef((T,_)=>{const{name:E,src:C,srcSet:A,loading:R,icon:I,fallback:F,children:B,...U}=T;return jsxRuntimeExports.jsxs(AvatarRoot,{ref:_,...U,children:[jsxRuntimeExports.jsx(AvatarFallback,{name:E,icon:I,children:F}),jsxRuntimeExports.jsx(AvatarImage,{src:C,srcSet:A,loading:R}),B]})}),AvatarFallback=reactExports.forwardRef((T,_)=>{const{name:E,icon:C,children:A,...R}=T;return jsxRuntimeExports.jsxs(AvatarFallback$1,{ref:_,...R,children:[A,E!=null&&A==null&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:getInitials(E)}),E==null&&A==null&&jsxRuntimeExports.jsx(AvatarIcon,{asChild:!!C,children:C})]})});function getInitials(T){const _=T.trim().split(" "),E=_[0]!=null?_[0]:"",C=_.length>1?_[_.length-1]:"";return E&&C?`${E.charAt(0)}${C.charAt(0)}`:E.charAt(0)}const AvatarGroup$1=reactExports.forwardRef((T,_)=>{const{size:E,variant:C,borderless:A,...R}=T;return jsxRuntimeExports.jsx(AvatarPropsProvider,{value:{size:E,variant:C,borderless:A},children:jsxRuntimeExports.jsx(Group,{gap:"0",spaceX:"-3",ref:_,...R})})});function ChatBubble({message:T,isSelected:_,onClick:E}){const C=T.role==="ai";return jsxRuntimeExports.jsx(Box,{onClick:E,cursor:"pointer",bg:_?"gray.100":"transparent",_hover:{bg:"gray.50"},p:2,borderRadius:"md",transition:"background-color 0.2s",children:jsxRuntimeExports.jsxs(Flex,{gap:3,children:[jsxRuntimeExports.jsx(AvatarGroup$1,{children:jsxRuntimeExports.jsx(Avatar$1,{size:"sm",name:T.name||(C?"AI":"Me"),bg:C?"blue.500":"green.500",color:"white"})}),jsxRuntimeExports.jsxs(Box,{flex:1,children:[jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",fontWeight:"bold",color:"gray.700",children:T.name||(C?"AI":"Me")}),jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",color:"gray.600",truncate:!0,children:T.content}),jsxRuntimeExports.jsx(Text$1,{fontSize:"xs",color:"gray.400",mt:1,children:new Date(T.timestamp).toLocaleTimeString()})]})]})})}var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var T="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=T,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var T=requireReactPropTypesSecret();function _(){}function E(){}return E.resetWarningCache=_,factoryWithThrowingShims=function(){function C(I,F,B,U,V,D){if(D!==T){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}}C.isRequired=C;function A(){return C}var R={array:C,bigint:C,bool:C,func:C,number:C,object:C,string:C,symbol:C,any:C,arrayOf:A,element:C,elementType:C,instanceOf:A,node:C,objectOf:A,oneOf:A,oneOfType:A,shape:A,exact:A,checkPropTypes:E,resetWarningCache:_};return R.PropTypes=R,R},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);var prefix="cs",classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,function(T){(function(){var _={}.hasOwnProperty;function E(){for(var R="",I=0;I<arguments.length;I++){var F=arguments[I];F&&(R=A(R,C(F)))}return R}function C(R){if(typeof R=="string"||typeof R=="number")return R;if(typeof R!="object")return"";if(Array.isArray(R))return E.apply(null,R);if(R.toString!==Object.prototype.toString&&!R.toString.toString().includes("[native code]"))return R.toString();var I="";for(var F in R)_.call(R,F)&&R[F]&&(I=A(I,F));return I}function A(R,I){return I?R?R+" "+I:R+I:R}T.exports?(E.default=E,T.exports=E):window.classNames=E})()}(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports);var StatusEnum=["available","unavailable","away","dnd","invisible","eager"],SizeEnum=["xs","sm","md","lg","fluid"];function _typeof$h(T){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$h(T)}var _excluded$w=["status","size","className","name","selected","children"];function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$v.apply(this,arguments)}function _defineProperty$f(T,_,E){return _=_toPropertyKey$e(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$e(T){var _=_toPrimitive$e(T,"string");return _typeof$h(_)=="symbol"?_:String(_)}function _toPrimitive$e(T,_){if(_typeof$h(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$h(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties$w(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$w(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$w(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var Status=function T(_){var E=_.status,C=_.size,A=C===void 0?"md":C,R=_.className,I=_.name,F=_.selected,B=_.children,U=_objectWithoutProperties$w(_,_excluded$w),V="".concat(prefix,"-status"),D=React.createElement("div",{className:"".concat(V,"__bullet")}),O=I||B;return React.createElement("div",_extends$v({},U,{"aria-selected":F===!0?"":null,className:classNames(V,"".concat(V,"--").concat(A),"".concat(V,"--").concat(E),_defineProperty$f({},"".concat(V,"--selected"),F),_defineProperty$f({},"".concat(V,"--named"),O),R)}),D,O&&React.createElement("div",{className:"".concat(V,"__name")},I||B))};function _typeof$g(T){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$g(T)}var _excluded$v=["name","src","size","status","className","active","children"];function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$u.apply(this,arguments)}function _defineProperty$e(T,_,E){return _=_toPropertyKey$d(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$d(T){var _=_toPrimitive$d(T,"string");return _typeof$g(_)=="symbol"?_:String(_)}function _toPrimitive$d(T,_){if(_typeof$g(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$g(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties$v(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$v(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$v(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}function AvatarInner(T,_){var E=T.name,C=E===void 0?"":E,A=T.src,R=A===void 0?"":A,I=T.size,F=I===void 0?"md":I,B=T.status,U=T.className,V=T.active,D=V===void 0?!1:V,O=T.children,L=_objectWithoutProperties$v(T,_excluded$v),z="".concat(prefix,"-avatar"),W=typeof F<"u"?" ".concat(z,"--").concat(F):"",X=reactExports.useRef();return reactExports.useImperativeHandle(_,function(){return{focus:function(){return X.current.focus()}}}),React.createElement("div",_extends$u({ref:X},L,{className:classNames("".concat(z).concat(W),_defineProperty$e({},"".concat(z,"--active"),D),U)}),O||React.createElement(React.Fragment,null,React.createElement("img",{src:R,alt:C}),typeof B=="string"&&React.createElement(Status,{status:B,size:F})," "))}var Avatar=reactExports.forwardRef(AvatarInner);Avatar.displayName="Avatar";Avatar.propTypes={children:PropTypes.node,name:PropTypes.string,src:PropTypes.string,size:PropTypes.oneOf(SizeEnum),status:PropTypes.oneOf(StatusEnum),active:PropTypes.bool,className:PropTypes.string};function ownKeys$1(T,_){var E=Object.keys(T);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(T);_&&(C=C.filter(function(A){return Object.getOwnPropertyDescriptor(T,A).enumerable})),E.push.apply(E,C)}return E}function _objectSpread$1(T){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(E),!0).forEach(function(C){_defineProperty$d(T,C,E[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(E)):ownKeys$1(Object(E)).forEach(function(C){Object.defineProperty(T,C,Object.getOwnPropertyDescriptor(E,C))})}return T}function _defineProperty$d(T,_,E){return _=_toPropertyKey$c(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$c(T){var _=_toPrimitive$c(T,"string");return _typeof$f(_)=="symbol"?_:String(_)}function _toPrimitive$c(T,_){if(_typeof$f(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$f(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _typeof$f(T){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$f(T)}var noop$1=function T(){},isChildrenNil=function T(_){return _==null||Array.isArray(_)&&_.length===0},getChildren=function T(_,E){var C=[],A=E.map(function(R){return R.displayName||R.name});return React.Children.toArray(_).forEach(function(R){var I=E.indexOf(R.type);if(I!==-1)C[I]=R;else{var F,B,U,V=(F=R==null||(B=R.props)===null||B===void 0?void 0:B.as)!==null&&F!==void 0?F:R==null||(U=R.props)===null||U===void 0?void 0:U.is,D=_typeof$f(V);if(D==="function"){var O=E.indexOf(V);O!==-1&&(C[O]=React.cloneElement(R,_objectSpread$1(_objectSpread$1({},R.props),{},{as:null})))}else if(D==="object"){var L=V.name||V.displayName,z=A.indexOf(L);z!==-1&&(C[z]=React.cloneElement(R,_objectSpread$1(_objectSpread$1({},R.props),{},{as:null})))}else if(D==="string"){var W=A.indexOf(V);W!==-1&&(C[W]=R)}}}),C},getComponentName=function T(_){if(typeof _=="string")return _;if("type"in _){var E=_typeof$f(_.type);if(E==="function"||E==="object"){if("displayName"in _.type)return _.type.displayName;if("name"in _.type)return _.type.name}else if(E==="string")return _.type;return"undefined"}return"undefined"},allowedChildren=function T(_){return function(E,C,A){var R=_.map(function(V){return V.name||V.displayName}),I=React.Children.toArray(E[C]).find(function(V){if(typeof V=="string"&&V.trim().length===0)return!1;if(_.indexOf(V.type)===-1){var D,O,L=(V==null||(D=V.props)===null||D===void 0?void 0:D.as)||(V==null||(O=V.props)===null||O===void 0?void 0:O.is),z=_typeof$f(L);if(z==="function")return _.indexOf(L)===-1;if(z==="object"){var W=L.name||L.displayName;return R.indexOf(W)===-1}else return z==="string"?R.indexOf(L)===-1:!0}});if(typeof I<"u"){var F=getComponentName(I),B=_.map(function(V){return V.name||V.displayName}).join(", "),U='"'.concat(F,'" is not a valid child for ').concat(A,". Allowed types: ").concat(B);return new Error(U)}}},_excluded$u=["children","size","className","max","activeIndex","hoverToFront"];function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$t.apply(this,arguments)}function _objectWithoutProperties$u(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$u(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$u(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var AvatarGroup=function T(_){var E=_.children,C=_.size,A=C===void 0?"md":C,R=_.className,I=_.max,F=_.activeIndex,B=_.hoverToFront,U=_objectWithoutProperties$u(_,_excluded$u),V="".concat(prefix,"-avatar-group"),D=typeof I=="number"&&React.Children.count(E)>I?React.Children.toArray(E).reverse().slice(0,I):React.Children.toArray(E).reverse(),O=typeof F=="number"?D.length-F-1:void 0;return React.createElement("div",_extends$t({},U,{className:classNames(V,"".concat(V,"--").concat(A),R)}),D.map(function(L,z){var W=typeof O=="number"?{active:O===z}:{};return B===!0&&(W.className=classNames("".concat(prefix,"-avatar--active-on-hover"),L.props.className)),React.cloneElement(L,W)}))};AvatarGroup.displayName="AvatarGroup";var _excluded$t=["children","className","icon","border","labelPosition"];function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$s.apply(this,arguments)}function _objectWithoutProperties$t(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$t(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$t(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var Button=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=A===void 0?"":A,I=_.icon,F=I===void 0?void 0:I,B=_.border,U=B===void 0?!1:B,V=_.labelPosition,D=V===void 0?void 0:V,O=_objectWithoutProperties$t(_,_excluded$t),L="".concat(prefix,"-button"),z=typeof D<"u"?D:"right",W=React.Children.count(C)>0?"".concat(L,"--").concat(z):"",X=U===!0?"".concat(L,"--border"):"";return React.createElement("button",_extends$s({},O,{className:classNames(L,W,X,R)}),z==="left"&&C,F,z==="right"&&C)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function _typeof$e(T){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(_){return typeof _}:_typeof$e=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$e(T)}function _classCallCheck$4(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(T,_){for(var E=0;E<_.length;E++){var C=_[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}function _createClass$4(T,_,E){return _&&_defineProperties$4(T.prototype,_),T}function _defineProperty$c(T,_,E){return _ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _objectSpread(T){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{},C=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(C=C.concat(Object.getOwnPropertySymbols(E).filter(function(A){return Object.getOwnPropertyDescriptor(E,A).enumerable}))),C.forEach(function(A){_defineProperty$c(T,A,E[A])})}return T}function _slicedToArray$7(T,_){return _arrayWithHoles$7(T)||_iterableToArrayLimit$7(T,_)||_nonIterableRest$7()}function _arrayWithHoles$7(T){if(Array.isArray(T))return T}function _iterableToArrayLimit$7(T,_){var E=[],C=!0,A=!1,R=void 0;try{for(var I=T[Symbol.iterator](),F;!(C=(F=I.next()).done)&&(E.push(F.value),!(_&&E.length===_));C=!0);}catch(B){A=!0,R=B}finally{try{!C&&I.return!=null&&I.return()}finally{if(A)throw R}}return E}function _nonIterableRest$7(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var noop=function T(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop,measure:noop};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(T){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function";~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/");var NAMESPACE_IDENTIFIER="___FONT_AWESOME___",DEFAULT_FAMILY_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var DUOTONE_CLASSES={GROUP:"group",PRIMARY:"primary",SECONDARY:"secondary"},initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(T){var _=DOCUMENT.querySelector("script["+T+"]");if(_)return _.getAttribute(T)}function coerce(T){return T===""?!0:T==="false"?!1:T==="true"?!0:T}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(T){var _=_slicedToArray$7(T,2),E=_[0],C=_[1],A=coerce(getAttrConfig(E));A!=null&&(initial[C]=A)})}var _default={familyPrefix:DEFAULT_FAMILY_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},_config=_objectSpread({},_default,initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config=_objectSpread({},_config);WINDOW.FontAwesomeConfig=config;var w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function T(){DOCUMENT.removeEventListener("DOMContentLoaded",T),loaded=1,functions.map(function(_){return _()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));var PENDING="pending",SETTLED="settled",FULFILLED="fulfilled",REJECTED="rejected",NOOP=function T(){},isNode=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",asyncSetTimer=typeof setImmediate>"u"?setTimeout:setImmediate,asyncQueue=[],asyncTimer;function asyncFlush(){for(var T=0;T<asyncQueue.length;T++)asyncQueue[T][0](asyncQueue[T][1]);asyncQueue=[],asyncTimer=!1}function asyncCall(T,_){asyncQueue.push([T,_]),asyncTimer||(asyncTimer=!0,asyncSetTimer(asyncFlush,0))}function invokeResolver(T,_){function E(A){resolve(_,A)}function C(A){reject(_,A)}try{T(E,C)}catch(A){C(A)}}function invokeCallback(T){var _=T.owner,E=_._state,C=_._data,A=T[E],R=T.then;if(typeof A=="function"){E=FULFILLED;try{C=A(C)}catch(I){reject(R,I)}}handleThenable(R,C)||(E===FULFILLED&&resolve(R,C),E===REJECTED&&reject(R,C))}function handleThenable(T,_){var E;try{if(T===_)throw new TypeError("A promises callback cannot return that same promise.");if(_&&(typeof _=="function"||_typeof$e(_)==="object")){var C=_.then;if(typeof C=="function")return C.call(_,function(A){E||(E=!0,_===A?fulfill(T,A):resolve(T,A))},function(A){E||(E=!0,reject(T,A))}),!0}}catch(A){return E||reject(T,A),!0}return!1}function resolve(T,_){(T===_||!handleThenable(T,_))&&fulfill(T,_)}function fulfill(T,_){T._state===PENDING&&(T._state=SETTLED,T._data=_,asyncCall(publishFulfillment,T))}function reject(T,_){T._state===PENDING&&(T._state=SETTLED,T._data=_,asyncCall(publishRejection,T))}function publish(T){T._then=T._then.forEach(invokeCallback)}function publishFulfillment(T){T._state=FULFILLED,publish(T)}function publishRejection(T){T._state=REJECTED,publish(T),!T._handled&&isNode&&global.process.emit("unhandledRejection",T._data,T)}function notifyRejectionHandled(T){global.process.emit("rejectionHandled",T)}function P(T){if(typeof T!="function")throw new TypeError("Promise resolver "+T+" is not a function");if(!(this instanceof P))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],invokeResolver(T,this)}P.prototype={constructor:P,_state:PENDING,_then:null,_data:void 0,_handled:!1,then:function T(_,E){var C={owner:this,then:new this.constructor(NOOP),fulfilled:_,rejected:E};return(E||_)&&!this._handled&&(this._handled=!0,this._state===REJECTED&&isNode&&asyncCall(notifyRejectionHandled,this)),this._state===FULFILLED||this._state===REJECTED?asyncCall(invokeCallback,C):this._then.push(C),C.then},catch:function T(_){return this.then(null,_)}};P.all=function(T){if(!Array.isArray(T))throw new TypeError("You must pass an array to Promise.all().");return new P(function(_,E){var C=[],A=0;function R(B){return A++,function(U){C[B]=U,--A||_(C)}}for(var I=0,F;I<T.length;I++)F=T[I],F&&typeof F.then=="function"?F.then(R(I),E):C[I]=F;A||_(C)})};P.race=function(T){if(!Array.isArray(T))throw new TypeError("You must pass an array to Promise.race().");return new P(function(_,E){for(var C=0,A;C<T.length;C++)A=T[C],A&&typeof A.then=="function"?A.then(_,E):_(A)})};P.resolve=function(T){return T&&_typeof$e(T)==="object"&&T.constructor===P?T:new P(function(_){_(T)})};P.reject=function(T){return new P(function(_,E){E(T)})};var meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(T){if(!(!T||!IS_DOM)){var _=DOCUMENT.createElement("style");_.setAttribute("type","text/css"),_.innerHTML=T;for(var E=DOCUMENT.head.childNodes,C=null,A=E.length-1;A>-1;A--){var R=E[A],I=(R.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(I)>-1&&(C=R)}return DOCUMENT.head.insertBefore(_,C),T}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var T=12,_="";T-- >0;)_+=idPool[Math.random()*62|0];return _}function htmlEscape(T){return"".concat(T).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(T){return Object.keys(T||{}).reduce(function(_,E){return _+"".concat(E,'="').concat(htmlEscape(T[E]),'" ')},"").trim()}function joinStyles(T){return Object.keys(T||{}).reduce(function(_,E){return _+"".concat(E,": ").concat(T[E],";")},"")}function transformIsMeaningful(T){return T.size!==meaninglessTransform.size||T.x!==meaninglessTransform.x||T.y!==meaninglessTransform.y||T.rotate!==meaninglessTransform.rotate||T.flipX||T.flipY}function transformForSvg(T){var _=T.transform,E=T.containerWidth,C=T.iconWidth,A={transform:"translate(".concat(E/2," 256)")},R="translate(".concat(_.x*32,", ").concat(_.y*32,") "),I="scale(".concat(_.size/16*(_.flipX?-1:1),", ").concat(_.size/16*(_.flipY?-1:1),") "),F="rotate(".concat(_.rotate," 0 0)"),B={transform:"".concat(R," ").concat(I," ").concat(F)},U={transform:"translate(".concat(C/2*-1," -256)")};return{outer:A,inner:B,path:U}}var ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return T.attributes&&(T.attributes.fill||_)&&(T.attributes.fill="black"),T}function deGroup(T){return T.tag==="g"?T.children:[T]}function makeIconMasking(T){var _=T.children,E=T.attributes,C=T.main,A=T.mask,R=T.maskId,I=T.transform,F=C.width,B=C.icon,U=A.width,V=A.icon,D=transformForSvg({transform:I,containerWidth:U,iconWidth:F}),O={tag:"rect",attributes:_objectSpread({},ALL_SPACE,{fill:"white"})},L=B.children?{children:B.children.map(fillBlack)}:{},z={tag:"g",attributes:_objectSpread({},D.inner),children:[fillBlack(_objectSpread({tag:B.tag,attributes:_objectSpread({},B.attributes,D.path)},L))]},W={tag:"g",attributes:_objectSpread({},D.outer),children:[z]},X="mask-".concat(R||nextUniqueId()),Y="clip-".concat(R||nextUniqueId()),K={tag:"mask",attributes:_objectSpread({},ALL_SPACE,{id:X,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[O,W]},Q={tag:"defs",children:[{tag:"clipPath",attributes:{id:Y},children:deGroup(V)},K]};return _.push(Q,{tag:"rect",attributes:_objectSpread({fill:"currentColor","clip-path":"url(#".concat(Y,")"),mask:"url(#".concat(X,")")},ALL_SPACE)}),{children:_,attributes:E}}function makeIconStandard(T){var _=T.children,E=T.attributes,C=T.main,A=T.transform,R=T.styles,I=joinStyles(R);if(I.length>0&&(E.style=I),transformIsMeaningful(A)){var F=transformForSvg({transform:A,containerWidth:C.width,iconWidth:C.width});_.push({tag:"g",attributes:_objectSpread({},F.outer),children:[{tag:"g",attributes:_objectSpread({},F.inner),children:[{tag:C.icon.tag,children:C.icon.children,attributes:_objectSpread({},C.icon.attributes,F.path)}]}]})}else _.push(C.icon);return{children:_,attributes:E}}function asIcon(T){var _=T.children,E=T.main,C=T.mask,A=T.attributes,R=T.styles,I=T.transform;if(transformIsMeaningful(I)&&E.found&&!C.found){var F=E.width,B=E.height,U={x:F/B/2,y:.5};A.style=joinStyles(_objectSpread({},R,{"transform-origin":"".concat(U.x+I.x/16,"em ").concat(U.y+I.y/16,"em")}))}return[{tag:"svg",attributes:A,children:_}]}function asSymbol(T){var _=T.prefix,E=T.iconName,C=T.children,A=T.attributes,R=T.symbol,I=R===!0?"".concat(_,"-").concat(config.familyPrefix,"-").concat(E):R;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread({},A,{id:I}),children:C}]}]}function makeInlineSvgAbstract(T){var _=T.icons,E=_.main,C=_.mask,A=T.prefix,R=T.iconName,I=T.transform,F=T.symbol,B=T.title,U=T.maskId,V=T.titleId,D=T.extra,O=T.watchable,L=O===void 0?!1:O,z=C.found?C:E,W=z.width,X=z.height,Y=A==="fak",K=Y?"":"fa-w-".concat(Math.ceil(W/X*16)),Q=[config.replacementClass,R?"".concat(config.familyPrefix,"-").concat(R):"",K].filter(function(oe){return D.classes.indexOf(oe)===-1}).filter(function(oe){return oe!==""||!!oe}).concat(D.classes).join(" "),ee={children:[],attributes:_objectSpread({},D.attributes,{"data-prefix":A,"data-icon":R,class:Q,role:D.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(W," ").concat(X)})},J=Y&&!~D.classes.indexOf("fa-fw")?{width:"".concat(W/X*16*.0625,"em")}:{};L&&(ee.attributes[DATA_FA_I2SVG]=""),B&&ee.children.push({tag:"title",attributes:{id:ee.attributes["aria-labelledby"]||"title-".concat(V||nextUniqueId())},children:[B]});var ie=_objectSpread({},ee,{prefix:A,iconName:R,main:E,mask:C,maskId:U,transform:I,symbol:F,styles:_objectSpread({},J,D.styles)}),re=C.found&&E.found?makeIconMasking(ie):makeIconStandard(ie),se=re.children,ne=re.attributes;return ie.children=se,ie.attributes=ne,F?asSymbol(ie):asIcon(ie)}config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure;var reduce=function T(_,E,C,A){var R=Object.keys(_),I=R.length,F=E,B,U,V;for(C===void 0?(B=1,V=_[R[0]]):(B=0,V=C);B<I;B++)U=R[B],V=F(V,_[U],U,_);return V};function defineIcons(T,_){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=E.skipHooks,A=C===void 0?!1:C,R=Object.keys(_).reduce(function(I,F){var B=_[F],U=!!B.icon;return U?I[B.iconName]=B.icon:I[F]=B,I},{});typeof namespace.hooks.addPack=="function"&&!A?namespace.hooks.addPack(T,R):namespace.styles[T]=_objectSpread({},namespace.styles[T]||{},R),T==="fas"&&defineIcons("fa",_)}var styles=namespace.styles,shims=namespace.shims,build=function T(){var _=function(A){return reduce(styles,function(R,I,F){return R[F]=reduce(I,A,{}),R},{})};_(function(C,A,R){return A[3]&&(C[A[3]]=R),C}),_(function(C,A,R){var I=A[2];return C[R]=R,I.forEach(function(F){C[F]=R}),C});var E="far"in styles;reduce(shims,function(C,A){var R=A[0],I=A[1],F=A[2];return I==="far"&&!E&&(I="fas"),C[R]={prefix:I,iconName:F},C},{})};build();namespace.styles;function iconFromMapping(T,_,E){if(T&&T[_]&&T[_][E])return{prefix:_,iconName:E,icon:T[_][E]}}function toHtml(T){var _=T.tag,E=T.attributes,C=E===void 0?{}:E,A=T.children,R=A===void 0?[]:A;return typeof T=="string"?htmlEscape(T):"<".concat(_," ").concat(joinAttributes(C),">").concat(R.map(toHtml).join(""),"</").concat(_,">")}var parseTransformString=function T(_){var E={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return _?_.toLowerCase().split(" ").reduce(function(C,A){var R=A.toLowerCase().split("-"),I=R[0],F=R.slice(1).join("-");if(I&&F==="h")return C.flipX=!0,C;if(I&&F==="v")return C.flipY=!0,C;if(F=parseFloat(F),isNaN(F))return C;switch(I){case"grow":C.size=C.size+F;break;case"shrink":C.size=C.size-F;break;case"left":C.x=C.x-F;break;case"right":C.x=C.x+F;break;case"up":C.y=C.y-F;break;case"down":C.y=C.y+F;break;case"rotate":C.rotate=C.rotate+F;break}return C},E):E};function MissingIcon(T){this.name="MissingIcon",this.message=T||"Icon unavailable",this.stack=new Error().stack}MissingIcon.prototype=Object.create(Error.prototype);MissingIcon.prototype.constructor=MissingIcon;var FILL={fill:"currentColor"},ANIMATION_BASE={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};_objectSpread({},FILL,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var OPACITY_ANIMATE=_objectSpread({},ANIMATION_BASE,{attributeName:"opacity"});_objectSpread({},FILL,{cx:"256",cy:"364",r:"28"}),_objectSpread({},ANIMATION_BASE,{attributeName:"r",values:"28;14;28;28;14;28;"}),_objectSpread({},OPACITY_ANIMATE,{values:"1;0;1;1;0;1;"});_objectSpread({},FILL,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),_objectSpread({},OPACITY_ANIMATE,{values:"1;0;0;0;0;1;"});_objectSpread({},FILL,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),_objectSpread({},OPACITY_ANIMATE,{values:"0;0;1;1;0;0;"});namespace.styles;function asFoundIcon(T){var _=T[0],E=T[1],C=T.slice(4),A=_slicedToArray$7(C,1),R=A[0],I=null;return Array.isArray(R)?I={tag:"g",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:R[0]}},{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:R[1]}}]}:I={tag:"path",attributes:{fill:"currentColor",d:R}},{found:!0,width:_,height:E,icon:I}}namespace.styles;var baseStyles=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function css(){var T=DEFAULT_FAMILY_PREFIX,_=DEFAULT_REPLACEMENT_CLASS,E=config.familyPrefix,C=config.replacementClass,A=baseStyles;if(E!==T||C!==_){var R=new RegExp("\\.".concat(T,"\\-"),"g"),I=new RegExp("\\--".concat(T,"\\-"),"g"),F=new RegExp("\\.".concat(_),"g");A=A.replace(R,".".concat(E,"-")).replace(I,"--".concat(E,"-")).replace(F,".".concat(C))}return A}var Library=function(){function T(){_classCallCheck$4(this,T),this.definitions={}}return _createClass$4(T,[{key:"add",value:function(){for(var E=this,C=arguments.length,A=new Array(C),R=0;R<C;R++)A[R]=arguments[R];var I=A.reduce(this._pullDefinitions,{});Object.keys(I).forEach(function(F){E.definitions[F]=_objectSpread({},E.definitions[F]||{},I[F]),defineIcons(F,I[F]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(E,C){var A=C.prefix&&C.iconName&&C.icon?{0:C}:C;return Object.keys(A).map(function(R){var I=A[R],F=I.prefix,B=I.iconName,U=I.icon;E[F]||(E[F]={}),E[F][B]=U}),E}}]),T}();function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}function apiObject(T,_){return Object.defineProperty(T,"abstract",{get:_}),Object.defineProperty(T,"html",{get:function(){return T.abstract.map(function(C){return toHtml(C)})}}),Object.defineProperty(T,"node",{get:function(){if(IS_DOM){var C=DOCUMENT.createElement("div");return C.innerHTML=T.html,C.children}}}),T}function findIconDefinition(T){var _=T.prefix,E=_===void 0?"fa":_,C=T.iconName;if(C)return iconFromMapping(library.definitions,E,C)||iconFromMapping(namespace.styles,E,C)}function resolveIcons(T){return function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=(_||{}).icon?_:findIconDefinition(_||{}),A=E.mask;return A&&(A=(A||{}).icon?A:findIconDefinition(A||{})),T(C,_objectSpread({},E,{mask:A}))}}var library=new Library,_cssInserted=!1,parse={transform:function T(_){return parseTransformString(_)}},icon=resolveIcons(function(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=_.transform,C=E===void 0?meaninglessTransform:E,A=_.symbol,R=A===void 0?!1:A,I=_.mask,F=I===void 0?null:I,B=_.maskId,U=B===void 0?null:B,V=_.title,D=V===void 0?null:V,O=_.titleId,L=O===void 0?null:O,z=_.classes,W=z===void 0?[]:z,X=_.attributes,Y=X===void 0?{}:X,K=_.styles,Q=K===void 0?{}:K;if(T){var ee=T.prefix,J=T.iconName,ie=T.icon;return apiObject(_objectSpread({type:"icon"},T),function(){return ensureCss(),config.autoA11y&&(D?Y["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(L||nextUniqueId()):(Y["aria-hidden"]="true",Y.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(ie),mask:F?asFoundIcon(F.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ee,iconName:J,transform:_objectSpread({},meaninglessTransform,C),symbol:R,title:D,maskId:U,titleId:L,extra:{attributes:Y,styles:Q,classes:W}})})}});function ownKeys(T,_){var E=Object.keys(T);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(T);_&&(C=C.filter(function(A){return Object.getOwnPropertyDescriptor(T,A).enumerable})),E.push.apply(E,C)}return E}function _objectSpread2(T){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(E),!0).forEach(function(C){_defineProperty$b(T,C,E[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(E)):ownKeys(Object(E)).forEach(function(C){Object.defineProperty(T,C,Object.getOwnPropertyDescriptor(E,C))})}return T}function _typeof$d(T){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$d(T)}function _defineProperty$b(T,_,E){return _ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _objectWithoutPropertiesLoose$s(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}function _objectWithoutProperties$s(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$s(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _toConsumableArray(T){return _arrayWithoutHoles(T)||_iterableToArray(T)||_unsupportedIterableToArray$7(T)||_nonIterableSpread()}function _arrayWithoutHoles(T){if(Array.isArray(T))return _arrayLikeToArray$7(T)}function _iterableToArray(T){if(typeof Symbol<"u"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}function _unsupportedIterableToArray$7(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$7(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$7(T,_)}}function _arrayLikeToArray$7(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(T){var _,E=T.beat,C=T.fade,A=T.beatFade,R=T.bounce,I=T.shake,F=T.flash,B=T.spin,U=T.spinPulse,V=T.spinReverse,D=T.pulse,O=T.fixedWidth,L=T.inverse,z=T.border,W=T.listItem,X=T.flip,Y=T.size,K=T.rotation,Q=T.pull,ee=(_={"fa-beat":E,"fa-fade":C,"fa-beat-fade":A,"fa-bounce":R,"fa-shake":I,"fa-flash":F,"fa-spin":B,"fa-spin-reverse":V,"fa-spin-pulse":U,"fa-pulse":D,"fa-fw":O,"fa-inverse":L,"fa-border":z,"fa-li":W,"fa-flip":X===!0,"fa-flip-horizontal":X==="horizontal"||X==="both","fa-flip-vertical":X==="vertical"||X==="both"},_defineProperty$b(_,"fa-".concat(Y),typeof Y<"u"&&Y!==null),_defineProperty$b(_,"fa-rotate-".concat(K),typeof K<"u"&&K!==null&&K!==0),_defineProperty$b(_,"fa-pull-".concat(Q),typeof Q<"u"&&Q!==null),_defineProperty$b(_,"fa-swap-opacity",T.swapOpacity),_);return Object.keys(ee).map(function(J){return ee[J]?J:null}).filter(function(J){return J})}function _isNumerical(T){return T=T-0,T===T}function camelize(T){return _isNumerical(T)?T:(T=T.replace(/[\-_\s]+(.)?/g,function(_,E){return E?E.toUpperCase():""}),T.substr(0,1).toLowerCase()+T.substr(1))}var _excluded$1$1=["style"];function capitalize(T){return T.charAt(0).toUpperCase()+T.slice(1)}function styleToObject(T){return T.split(";").map(function(_){return _.trim()}).filter(function(_){return _}).reduce(function(_,E){var C=E.indexOf(":"),A=camelize(E.slice(0,C)),R=E.slice(C+1).trim();return A.startsWith("webkit")?_[capitalize(A)]=R:_[A]=R,_},{})}function convert(T,_){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof _=="string")return _;var C=(_.children||[]).map(function(B){return convert(T,B)}),A=Object.keys(_.attributes||{}).reduce(function(B,U){var V=_.attributes[U];switch(U){case"class":B.attrs.className=V,delete _.attributes.class;break;case"style":B.attrs.style=styleToObject(V);break;default:U.indexOf("aria-")===0||U.indexOf("data-")===0?B.attrs[U.toLowerCase()]=V:B.attrs[camelize(U)]=V}return B},{attrs:{}}),R=E.style,I=R===void 0?{}:R,F=_objectWithoutProperties$s(E,_excluded$1$1);return A.attrs.style=_objectSpread2(_objectSpread2({},A.attrs.style),I),T.apply(void 0,[_.tag,_objectSpread2(_objectSpread2({},A.attrs),F)].concat(_toConsumableArray(C)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(T){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var T;(T=console).error.apply(T,arguments)}}function normalizeIconArgs(T){if(T&&_typeof$d(T)==="object"&&T.prefix&&T.iconName&&T.icon)return T;if(parse.icon)return parse.icon(T);if(T===null)return null;if(T&&_typeof$d(T)==="object"&&T.prefix&&T.iconName)return T;if(Array.isArray(T)&&T.length===2)return{prefix:T[0],iconName:T[1]};if(typeof T=="string")return{prefix:"fas",iconName:T}}function objectWithKey(T,_){return Array.isArray(_)&&_.length>0||!Array.isArray(_)&&_?_defineProperty$b({},T,_):{}}var _excluded$s=["forwardedRef"];function FontAwesomeIcon(T){var _=T.forwardedRef,E=_objectWithoutProperties$s(T,_excluded$s),C=E.icon,A=E.mask,R=E.symbol,I=E.className,F=E.title,B=E.titleId,U=E.maskId,V=normalizeIconArgs(C),D=objectWithKey("classes",[].concat(_toConsumableArray(classList(E)),_toConsumableArray(I.split(" ")))),O=objectWithKey("transform",typeof E.transform=="string"?parse.transform(E.transform):E.transform),L=objectWithKey("mask",normalizeIconArgs(A)),z=icon(V,_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},D),O),L),{},{symbol:R,title:F,titleId:B,maskId:U}));if(!z)return log("Could not find icon",V),null;var W=z.abstract,X={ref:_};return Object.keys(E).forEach(function(Y){FontAwesomeIcon.defaultProps.hasOwnProperty(Y)||(X[Y]=E[Y])}),convertCurry(W[0],X)}FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),faArrowUp={},hasRequiredFaArrowUp;function requireFaArrowUp(){return hasRequiredFaArrowUp||(hasRequiredFaArrowUp=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="arrow-up",C=448,A=512,R=[],I="f062",F="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faArrowUp=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faArrowUp)),faArrowUp}var faArrowUpExports=requireFaArrowUp(),faArrowRight={},hasRequiredFaArrowRight;function requireFaArrowRight(){return hasRequiredFaArrowRight||(hasRequiredFaArrowRight=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="arrow-right",C=448,A=512,R=[],I="f061",F="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faArrowRight=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faArrowRight)),faArrowRight}var faArrowRightExports=requireFaArrowRight(),faArrowDown={},hasRequiredFaArrowDown;function requireFaArrowDown(){return hasRequiredFaArrowDown||(hasRequiredFaArrowDown=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="arrow-down",C=448,A=512,R=[],I="f063",F="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faArrowDown=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faArrowDown)),faArrowDown}var faArrowDownExports=requireFaArrowDown(),faArrowLeft={},hasRequiredFaArrowLeft;function requireFaArrowLeft(){return hasRequiredFaArrowLeft||(hasRequiredFaArrowLeft=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="arrow-left",C=448,A=512,R=[],I="f060",F="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faArrowLeft=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faArrowLeft)),faArrowLeft}var faArrowLeftExports=requireFaArrowLeft(),_excluded$r=["className","direction","children"];function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$r.apply(this,arguments)}function _objectWithoutProperties$r(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$r(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$r(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ArrowButton=function T(_){var E=_.className,C=E===void 0?"":E,A=_.direction,R=A===void 0?"right":A,I=_.children,F=_objectWithoutProperties$r(_,_excluded$r),B="".concat(prefix,"-button--arrow"),U=function(){if(R==="up")return faArrowUpExports.faArrowUp;if(R==="right")return faArrowRightExports.faArrowRight;if(R==="down")return faArrowDownExports.faArrowDown;if(R==="left")return faArrowLeftExports.faArrowLeft}();return React.createElement(Button,_extends$r({},F,{className:classNames(B,C),icon:React.createElement(FontAwesomeIcon,{icon:U})}),I)},faEllipsisV={},hasRequiredFaEllipsisV;function requireFaEllipsisV(){return hasRequiredFaEllipsisV||(hasRequiredFaEllipsisV=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="ellipsis-v",C=192,A=512,R=[],I="f142",F="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faEllipsisV=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faEllipsisV)),faEllipsisV}var faEllipsisVExports=requireFaEllipsisV(),faPaperPlane={},hasRequiredFaPaperPlane;function requireFaPaperPlane(){return hasRequiredFaPaperPlane||(hasRequiredFaPaperPlane=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="paper-plane",C=512,A=512,R=[],I="f1d8",F="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faPaperPlane=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faPaperPlane)),faPaperPlane}var faPaperPlaneExports=requireFaPaperPlane(),_excluded$q=["className","children"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$q.apply(this,arguments)}function _objectWithoutProperties$q(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$q(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$q(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var SendButton=function T(_){var E=_.className,C=E===void 0?"":E,A=_.children,R=_objectWithoutProperties$q(_,_excluded$q),I="".concat(prefix,"-button--send");return React.createElement(Button,_extends$q({},R,{className:classNames(I,C),icon:React.createElement(FontAwesomeIcon,{icon:faPaperPlaneExports.faPaperPlane})}),A)},faPaperclip={},hasRequiredFaPaperclip;function requireFaPaperclip(){return hasRequiredFaPaperclip||(hasRequiredFaPaperclip=1,function(T){Object.defineProperty(T,"__esModule",{value:!0});var _="fas",E="paperclip",C=448,A=512,R=[],I="f0c6",F="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";T.definition={prefix:_,iconName:E,icon:[C,A,R,I,F]},T.faPaperclip=T.definition,T.prefix=_,T.iconName=E,T.width=C,T.height=A,T.ligatures=R,T.unicode=I,T.svgPathData=F}(faPaperclip)),faPaperclip}var faPaperclipExports=requireFaPaperclip(),_excluded$p=["className","children"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$p.apply(this,arguments)}function _objectWithoutProperties$p(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$p(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$p(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var AttachmentButton=function T(_){var E=_.className,C=E===void 0?"":E,A=_.children,R=_objectWithoutProperties$p(_,_excluded$p),I="".concat(prefix,"-button--attachment");return React.createElement(Button,_extends$p({},R,{className:classNames(I,C),icon:React.createElement(FontAwesomeIcon,{icon:faPaperclipExports.faPaperclip})}),A)},_excluded$o=["onClick","children","className"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$o.apply(this,arguments)}function _objectWithoutProperties$o(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$o(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$o(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ConversationHeaderBack=function T(_){var E=_.onClick,C=E===void 0?function(){}:E,A=_.children,R=A===void 0?void 0:A,I=_.className,F=_objectWithoutProperties$o(_,_excluded$o),B="".concat(prefix,"-conversation-header__back");return React.createElement("div",_extends$o({},F,{className:classNames(B,I)}),typeof R<"u"?R:React.createElement(ArrowButton,{direction:"left",onClick:C}))};ConversationHeaderBack.displayName="ConversationHeader.Back";var _excluded$n=["children","className"];function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$n.apply(this,arguments)}function _objectWithoutProperties$n(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$n(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$n(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ConversationHeaderActions=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=_objectWithoutProperties$n(_,_excluded$n),I="".concat(prefix,"-conversation-header__actions");return React.createElement("section",_extends$n({},R,{className:classNames(I,A)}),C)};ConversationHeaderActions.displayName="ConversationHeader.Actions";var _excluded$m=["userName","info","children","className"];function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$m.apply(this,arguments)}function _objectWithoutProperties$m(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$m(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$m(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ConversationHeaderContent=function T(_){var E=_.userName,C=E===void 0?"":E,A=_.info,R=A===void 0?"":A,I=_.children,F=I===void 0?void 0:I,B=_.className,U=_objectWithoutProperties$m(_,_excluded$m),V="".concat(prefix,"-conversation-header__content");return React.createElement("div",_extends$m({},U,{className:classNames(V,B)}),typeof F<"u"?F:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-conversation-header__user-name")},C),React.createElement("div",{className:"".concat(prefix,"-conversation-header__info")},R)))};ConversationHeaderContent.displayName="ConversationHeader.Content";var _excluded$l=["children","className"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$l.apply(this,arguments)}function _slicedToArray$6(T,_){return _arrayWithHoles$6(T)||_iterableToArrayLimit$6(T,_)||_unsupportedIterableToArray$6(T,_)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$6(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$6(T,_)}}function _arrayLikeToArray$6(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit$6(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles$6(T){if(Array.isArray(T))return T}function _objectWithoutProperties$l(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$l(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$l(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ConversationHeader=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=_objectWithoutProperties$l(_,_excluded$l),I="".concat(prefix,"-conversation-header"),F=getChildren(C,[ConversationHeaderBack,Avatar,AvatarGroup,ConversationHeaderContent,ConversationHeaderActions]),B=_slicedToArray$6(F,5),U=B[0],V=B[1],D=B[2],O=B[3],L=B[4];return React.createElement("div",_extends$l({},R,{className:classNames(I,A)}),U,V&&React.createElement("div",{className:"".concat(I,"__avatar")},V),!V&&D&&React.createElement("div",{className:"".concat(I,"__avatar")},D),O,L)};ConversationHeader.displayName="ConversationHeader";ConversationHeader.Back=ConversationHeaderBack;ConversationHeader.Actions=ConversationHeaderActions;ConversationHeader.Content=ConversationHeaderContent;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function get(T){return getComputedStyle(T)}function set(T,_){for(var E in _){var C=_[E];typeof C=="number"&&(C=C+"px"),T.style[E]=C}return T}function div(T){var _=document.createElement("div");return _.className=T,_}var elMatches=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function matches(T,_){if(!elMatches)throw new Error("No element matching method supported");return elMatches.call(T,_)}function remove(T){T.remove?T.remove():T.parentNode&&T.parentNode.removeChild(T)}function queryChildren(T,_){return Array.prototype.filter.call(T.children,function(E){return matches(E,_)})}var cls={main:"ps",rtl:"ps__rtl",element:{thumb:function T(_){return"ps__thumb-"+_},rail:function T(_){return"ps__rail-"+_},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function T(_){return"ps--active-"+_},scrolling:function T(_){return"ps--scrolling-"+_}}},scrollingClassTimeout={x:null,y:null};function addScrollingClass(T,_){var E=T.element.classList,C=cls.state.scrolling(_);E.contains(C)?clearTimeout(scrollingClassTimeout[_]):E.add(C)}function removeScrollingClass(T,_){scrollingClassTimeout[_]=setTimeout(function(){return T.isAlive&&T.element.classList.remove(cls.state.scrolling(_))},T.settings.scrollingThreshold)}function setScrollingClassInstantly(T,_){addScrollingClass(T,_),removeScrollingClass(T,_)}var EventElement=function T(_){this.element=_,this.handlers={}},prototypeAccessors={isEmpty:{configurable:!0}};EventElement.prototype.bind=function T(_,E){typeof this.handlers[_]>"u"&&(this.handlers[_]=[]),this.handlers[_].push(E);var C=["touchstart","wheel","touchmove"];C.indexOf(_)!==-1?this.element.addEventListener(_,E,{passive:!1}):this.element.addEventListener(_,E,!1)};EventElement.prototype.unbind=function T(_,E){var C=this;this.handlers[_]=this.handlers[_].filter(function(A){return E&&A!==E?!0:(C.element.removeEventListener(_,A,!1),!1)})};EventElement.prototype.unbindAll=function T(){for(var _ in this.handlers)this.unbind(_)};prototypeAccessors.isEmpty.get=function(){var T=this;return Object.keys(this.handlers).every(function(_){return T.handlers[_].length===0})};Object.defineProperties(EventElement.prototype,prototypeAccessors);var EventManager=function T(){this.eventElements=[]};EventManager.prototype.eventElement=function T(_){var E=this.eventElements.filter(function(C){return C.element===_})[0];return E||(E=new EventElement(_),this.eventElements.push(E)),E};EventManager.prototype.bind=function T(_,E,C){this.eventElement(_).bind(E,C)};EventManager.prototype.unbind=function T(_,E,C){var A=this.eventElement(_);A.unbind(E,C),A.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(A),1)};EventManager.prototype.unbindAll=function T(){this.eventElements.forEach(function(_){return _.unbindAll()}),this.eventElements=[]};EventManager.prototype.once=function T(_,E,C){var A=this.eventElement(_),R=function I(F){A.unbind(E,I),C(F)};A.bind(E,R)};function createEvent(T){if(typeof window.CustomEvent=="function")return new CustomEvent(T);var _=document.createEvent("CustomEvent");return _.initCustomEvent(T,!1,!1,void 0),_}function processScrollDiff(T,_,E,C,A,R){C===void 0&&(C=!0),A===void 0&&(A=!1);var I;if(_==="top")I=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(_==="left")I=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");processScrollDiff$1(T,E,I,C,A,R)}function processScrollDiff$1(T,_,E,C,A,R){var I=E[0],F=E[1],B=E[2],U=E[3],V=E[4],D=E[5];C===void 0&&(C=!0),A===void 0&&(A=!1);var O=T.element;T.reach[U]=null;var L=R===!0?T[I]!==T[F]:!0;L&&O[B]<1&&(T.reach[U]="start"),L&&O[B]>T[I]-T[F]-1&&(T.reach[U]="end"),_&&(O.dispatchEvent(createEvent("ps-scroll-"+U)),_<0?O.dispatchEvent(createEvent("ps-scroll-"+V)):_>0&&O.dispatchEvent(createEvent("ps-scroll-"+D)),C&&setScrollingClassInstantly(T,U)),T.reach[U]&&(_||A)&&O.dispatchEvent(createEvent("ps-"+U+"-reach-"+T.reach[U]))}function toInt(T){return parseInt(T,10)||0}function isEditable(T){return matches(T,"input,[contenteditable]")||matches(T,"select,[contenteditable]")||matches(T,"textarea,[contenteditable]")||matches(T,"button,[contenteditable]")}function outerWidth(T){var _=get(T);return toInt(_.width)+toInt(_.paddingLeft)+toInt(_.paddingRight)+toInt(_.borderLeftWidth)+toInt(_.borderRightWidth)}var env={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints};function updateGeometry(T){var _=T.element,E=Math.floor(_.scrollTop),C=_.getBoundingClientRect();T.containerWidth=Math.round(C.width),T.containerHeight=Math.round(C.height),T.contentWidth=_.scrollWidth,T.contentHeight=_.scrollHeight,_.contains(T.scrollbarXRail)||(queryChildren(_,cls.element.rail("x")).forEach(function(A){return remove(A)}),_.appendChild(T.scrollbarXRail)),_.contains(T.scrollbarYRail)||(queryChildren(_,cls.element.rail("y")).forEach(function(A){return remove(A)}),_.appendChild(T.scrollbarYRail)),!T.settings.suppressScrollX&&T.containerWidth+T.settings.scrollXMarginOffset<T.contentWidth?(T.scrollbarXActive=!0,T.railXWidth=T.containerWidth-T.railXMarginWidth,T.railXRatio=T.containerWidth/T.railXWidth,T.scrollbarXWidth=getThumbSize(T,toInt(T.railXWidth*T.containerWidth/T.contentWidth)),T.scrollbarXLeft=toInt((T.negativeScrollAdjustment+_.scrollLeft)*(T.railXWidth-T.scrollbarXWidth)/(T.contentWidth-T.containerWidth))):T.scrollbarXActive=!1,!T.settings.suppressScrollY&&T.containerHeight+T.settings.scrollYMarginOffset<T.contentHeight?(T.scrollbarYActive=!0,T.railYHeight=T.containerHeight-T.railYMarginHeight,T.railYRatio=T.containerHeight/T.railYHeight,T.scrollbarYHeight=getThumbSize(T,toInt(T.railYHeight*T.containerHeight/T.contentHeight)),T.scrollbarYTop=toInt(E*(T.railYHeight-T.scrollbarYHeight)/(T.contentHeight-T.containerHeight))):T.scrollbarYActive=!1,T.scrollbarXLeft>=T.railXWidth-T.scrollbarXWidth&&(T.scrollbarXLeft=T.railXWidth-T.scrollbarXWidth),T.scrollbarYTop>=T.railYHeight-T.scrollbarYHeight&&(T.scrollbarYTop=T.railYHeight-T.scrollbarYHeight),updateCss(_,T),T.scrollbarXActive?_.classList.add(cls.state.active("x")):(_.classList.remove(cls.state.active("x")),T.scrollbarXWidth=0,T.scrollbarXLeft=0,_.scrollLeft=T.isRtl===!0?T.contentWidth:0),T.scrollbarYActive?_.classList.add(cls.state.active("y")):(_.classList.remove(cls.state.active("y")),T.scrollbarYHeight=0,T.scrollbarYTop=0,_.scrollTop=0)}function getThumbSize(T,_){return T.settings.minScrollbarLength&&(_=Math.max(_,T.settings.minScrollbarLength)),T.settings.maxScrollbarLength&&(_=Math.min(_,T.settings.maxScrollbarLength)),_}function updateCss(T,_){var E={width:_.railXWidth},C=Math.floor(T.scrollTop);_.isRtl?E.left=_.negativeScrollAdjustment+T.scrollLeft+_.containerWidth-_.contentWidth:E.left=T.scrollLeft,_.isScrollbarXUsingBottom?E.bottom=_.scrollbarXBottom-C:E.top=_.scrollbarXTop+C,set(_.scrollbarXRail,E);var A={top:C,height:_.railYHeight};_.isScrollbarYUsingRight?_.isRtl?A.right=_.contentWidth-(_.negativeScrollAdjustment+T.scrollLeft)-_.scrollbarYRight-_.scrollbarYOuterWidth-9:A.right=_.scrollbarYRight-T.scrollLeft:_.isRtl?A.left=_.negativeScrollAdjustment+T.scrollLeft+_.containerWidth*2-_.contentWidth-_.scrollbarYLeft-_.scrollbarYOuterWidth:A.left=_.scrollbarYLeft+T.scrollLeft,set(_.scrollbarYRail,A),set(_.scrollbarX,{left:_.scrollbarXLeft,width:_.scrollbarXWidth-_.railBorderXWidth}),set(_.scrollbarY,{top:_.scrollbarYTop,height:_.scrollbarYHeight-_.railBorderYWidth})}function clickRail(T){T.element,T.event.bind(T.scrollbarY,"mousedown",function(_){return _.stopPropagation()}),T.event.bind(T.scrollbarYRail,"mousedown",function(_){var E=_.pageY-window.pageYOffset-T.scrollbarYRail.getBoundingClientRect().top,C=E>T.scrollbarYTop?1:-1;T.element.scrollTop+=C*T.containerHeight,updateGeometry(T),_.stopPropagation()}),T.event.bind(T.scrollbarX,"mousedown",function(_){return _.stopPropagation()}),T.event.bind(T.scrollbarXRail,"mousedown",function(_){var E=_.pageX-window.pageXOffset-T.scrollbarXRail.getBoundingClientRect().left,C=E>T.scrollbarXLeft?1:-1;T.element.scrollLeft+=C*T.containerWidth,updateGeometry(T),_.stopPropagation()})}function dragThumb(T){bindMouseScrollHandler(T,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),bindMouseScrollHandler(T,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function bindMouseScrollHandler(T,_){var E=_[0],C=_[1],A=_[2],R=_[3],I=_[4],F=_[5],B=_[6],U=_[7],V=_[8],D=T.element,O=null,L=null,z=null;function W(K){K.touches&&K.touches[0]&&(K[A]=K.touches[0].pageY),D[B]=O+z*(K[A]-L),addScrollingClass(T,U),updateGeometry(T),K.stopPropagation(),K.preventDefault()}function X(){removeScrollingClass(T,U),T[V].classList.remove(cls.state.clicking),T.event.unbind(T.ownerDocument,"mousemove",W)}function Y(K,Q){O=D[B],Q&&K.touches&&(K[A]=K.touches[0].pageY),L=K[A],z=(T[C]-T[E])/(T[R]-T[F]),Q?T.event.bind(T.ownerDocument,"touchmove",W):(T.event.bind(T.ownerDocument,"mousemove",W),T.event.once(T.ownerDocument,"mouseup",X),K.preventDefault()),T[V].classList.add(cls.state.clicking),K.stopPropagation()}T.event.bind(T[I],"mousedown",function(K){Y(K)}),T.event.bind(T[I],"touchstart",function(K){Y(K,!0)})}function keyboard(T){var _=T.element,E=function(){return matches(_,":hover")},C=function(){return matches(T.scrollbarX,":focus")||matches(T.scrollbarY,":focus")};function A(R,I){var F=Math.floor(_.scrollTop);if(R===0){if(!T.scrollbarYActive)return!1;if(F===0&&I>0||F>=T.contentHeight-T.containerHeight&&I<0)return!T.settings.wheelPropagation}var B=_.scrollLeft;if(I===0){if(!T.scrollbarXActive)return!1;if(B===0&&R<0||B>=T.contentWidth-T.containerWidth&&R>0)return!T.settings.wheelPropagation}return!0}T.event.bind(T.ownerDocument,"keydown",function(R){if(!(R.isDefaultPrevented&&R.isDefaultPrevented()||R.defaultPrevented)&&!(!E()&&!C())){var I=document.activeElement?document.activeElement:T.ownerDocument.activeElement;if(I){if(I.tagName==="IFRAME")I=I.contentDocument.activeElement;else for(;I.shadowRoot;)I=I.shadowRoot.activeElement;if(isEditable(I))return}var F=0,B=0;switch(R.which){case 37:R.metaKey?F=-T.contentWidth:R.altKey?F=-T.containerWidth:F=-30;break;case 38:R.metaKey?B=T.contentHeight:R.altKey?B=T.containerHeight:B=30;break;case 39:R.metaKey?F=T.contentWidth:R.altKey?F=T.containerWidth:F=30;break;case 40:R.metaKey?B=-T.contentHeight:R.altKey?B=-T.containerHeight:B=-30;break;case 32:R.shiftKey?B=T.containerHeight:B=-T.containerHeight;break;case 33:B=T.containerHeight;break;case 34:B=-T.containerHeight;break;case 36:B=T.contentHeight;break;case 35:B=-T.contentHeight;break;default:return}T.settings.suppressScrollX&&F!==0||T.settings.suppressScrollY&&B!==0||(_.scrollTop-=B,_.scrollLeft+=F,updateGeometry(T),A(F,B)&&R.preventDefault())}})}function wheel(T){var _=T.element;function E(I,F){var B=Math.floor(_.scrollTop),U=_.scrollTop===0,V=B+_.offsetHeight===_.scrollHeight,D=_.scrollLeft===0,O=_.scrollLeft+_.offsetWidth===_.scrollWidth,L;return Math.abs(F)>Math.abs(I)?L=U||V:L=D||O,L?!T.settings.wheelPropagation:!0}function C(I){var F=I.deltaX,B=-1*I.deltaY;return(typeof F>"u"||typeof B>"u")&&(F=-1*I.wheelDeltaX/6,B=I.wheelDeltaY/6),I.deltaMode&&I.deltaMode===1&&(F*=10,B*=10),F!==F&&B!==B&&(F=0,B=I.wheelDelta),I.shiftKey?[-B,-F]:[F,B]}function A(I,F,B){if(!env.isWebKit&&_.querySelector("select:focus"))return!0;if(!_.contains(I))return!1;for(var U=I;U&&U!==_;){if(U.classList.contains(cls.element.consuming))return!0;var V=get(U);if(B&&V.overflowY.match(/(scroll|auto)/)){var D=U.scrollHeight-U.clientHeight;if(D>0&&(U.scrollTop>0&&B<0||U.scrollTop<D&&B>0))return!0}if(F&&V.overflowX.match(/(scroll|auto)/)){var O=U.scrollWidth-U.clientWidth;if(O>0&&(U.scrollLeft>0&&F<0||U.scrollLeft<O&&F>0))return!0}U=U.parentNode}return!1}function R(I){var F=C(I),B=F[0],U=F[1];if(!A(I.target,B,U)){var V=!1;T.settings.useBothWheelAxes?T.scrollbarYActive&&!T.scrollbarXActive?(U?_.scrollTop-=U*T.settings.wheelSpeed:_.scrollTop+=B*T.settings.wheelSpeed,V=!0):T.scrollbarXActive&&!T.scrollbarYActive&&(B?_.scrollLeft+=B*T.settings.wheelSpeed:_.scrollLeft-=U*T.settings.wheelSpeed,V=!0):(_.scrollTop-=U*T.settings.wheelSpeed,_.scrollLeft+=B*T.settings.wheelSpeed),updateGeometry(T),V=V||E(B,U),V&&!I.ctrlKey&&(I.stopPropagation(),I.preventDefault())}}typeof window.onwheel<"u"?T.event.bind(_,"wheel",R):typeof window.onmousewheel<"u"&&T.event.bind(_,"mousewheel",R)}function touch(T){if(!env.supportsTouch&&!env.supportsIePointer)return;var _=T.element;function E(z,W){var X=Math.floor(_.scrollTop),Y=Math.ceil(_.scrollLeft),K=Math.abs(z),Q=Math.abs(W);if(!T.settings.wheelPropagation)return!0;if(Q>K){if(T.settings.suppressScrollY)return!1;if(W>0)return X!==0;if(W<0)return X<T.contentHeight-T.containerHeight}else if(K>Q){if(T.settings.suppressScrollX)return!1;if(z>0)return Y!==0;if(W<0)return Y<T.contentWidth-T.containerWidth}return!0}function C(z,W){_.scrollTop-=W,_.scrollLeft-=z,updateGeometry(T)}var A={},R=0,I={},F=null;function B(z){return z.targetTouches?z.targetTouches[0]:z}function U(z){return z.pointerType&&z.pointerType==="pen"&&z.buttons===0?!1:!!(z.targetTouches&&z.targetTouches.length===1||z.pointerType&&z.pointerType!=="mouse"&&z.pointerType!==z.MSPOINTER_TYPE_MOUSE)}function V(z){if(U(z)){var W=B(z);A.pageX=W.pageX,A.pageY=W.pageY,R=new Date().getTime(),F!==null&&clearInterval(F)}}function D(z,W,X){if(!_.contains(z))return!1;for(var Y=z;Y&&Y!==_;){if(Y.classList.contains(cls.element.consuming))return!0;var K=get(Y);if(X&&K.overflowY.match(/(scroll|auto)/)){var Q=Y.scrollHeight-Y.clientHeight;if(Q>0&&(Y.scrollTop>0&&X<0||Y.scrollTop<Q&&X>0))return!0}if(W&&K.overflowX.match(/(scroll|auto)/)){var ee=Y.scrollWidth-Y.clientWidth;if(ee>0&&(Y.scrollLeft>0&&W<0||Y.scrollLeft<ee&&W>0))return!0}Y=Y.parentNode}return!1}function O(z){if(U(z)){var W=B(z),X={pageX:W.pageX,pageY:W.pageY},Y=X.pageX-A.pageX,K=X.pageY-A.pageY;if(D(z.target,Y,K))return;C(Y,K),A=X;var Q=new Date().getTime(),ee=Q-R;ee>0&&(I.x=Y/ee,I.y=K/ee,R=Q),z.cancelable&&E(Y,K)&&z.preventDefault()}}function L(){T.settings.swipeEasing&&(clearInterval(F),F=setInterval(function(){if(T.isInitialized){clearInterval(F);return}if(!I.x&&!I.y){clearInterval(F);return}if(Math.abs(I.x)<.01&&Math.abs(I.y)<.01){clearInterval(F);return}C(I.x*30,I.y*30),I.x*=.8,I.y*=.8},10))}env.supportsTouch?(T.event.bind(_,"touchstart",V),T.event.bind(_,"touchmove",O),T.event.bind(_,"touchend",L)):env.supportsIePointer&&(window.PointerEvent?(T.event.bind(_,"pointerdown",V),T.event.bind(_,"pointermove",O),T.event.bind(_,"pointerup",L)):window.MSPointerEvent&&(T.event.bind(_,"MSPointerDown",V),T.event.bind(_,"MSPointerMove",O),T.event.bind(_,"MSPointerUp",L)))}var defaultSettings=function T(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},handlers={"click-rail":clickRail,"drag-thumb":dragThumb,keyboard,wheel,touch},PerfectScrollbar=function T(_,E){var C=this;if(E===void 0&&(E={}),typeof _=="string"&&(_=document.querySelector(_)),!_||!_.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=_,_.classList.add(cls.main),this.settings=defaultSettings();for(var A in E)this.settings[A]=E[A];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var R=function(){return _.classList.add(cls.state.focus)},I=function(){return _.classList.remove(cls.state.focus)};this.isRtl=get(_).direction==="rtl",this.isRtl===!0&&_.classList.add(cls.rtl),this.isNegativeScroll=function(){var U=_.scrollLeft,V=null;return _.scrollLeft=-1,V=_.scrollLeft<0,_.scrollLeft=U,V}(),this.negativeScrollAdjustment=this.isNegativeScroll?_.scrollWidth-_.clientWidth:0,this.event=new EventManager,this.ownerDocument=_.ownerDocument||document,this.scrollbarXRail=div(cls.element.rail("x")),_.appendChild(this.scrollbarXRail),this.scrollbarX=div(cls.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",R),this.event.bind(this.scrollbarX,"blur",I),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var F=get(this.scrollbarXRail);this.scrollbarXBottom=parseInt(F.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=toInt(F.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=toInt(F.borderLeftWidth)+toInt(F.borderRightWidth),set(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=toInt(F.marginLeft)+toInt(F.marginRight),set(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=div(cls.element.rail("y")),_.appendChild(this.scrollbarYRail),this.scrollbarY=div(cls.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",R),this.event.bind(this.scrollbarY,"blur",I),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var B=get(this.scrollbarYRail);this.scrollbarYRight=parseInt(B.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=toInt(B.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?outerWidth(this.scrollbarY):null,this.railBorderYWidth=toInt(B.borderTopWidth)+toInt(B.borderBottomWidth),set(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=toInt(B.marginTop)+toInt(B.marginBottom),set(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:_.scrollLeft<=0?"start":_.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:_.scrollTop<=0?"start":_.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(U){return handlers[U](C)}),this.lastScrollTop=Math.floor(_.scrollTop),this.lastScrollLeft=_.scrollLeft,this.event.bind(this.element,"scroll",function(U){return C.onScroll(U)}),updateGeometry(this)};PerfectScrollbar.prototype.update=function T(_){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,set(this.scrollbarXRail,{display:"block"}),set(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=toInt(get(this.scrollbarXRail).marginLeft)+toInt(get(this.scrollbarXRail).marginRight),this.railYMarginHeight=toInt(get(this.scrollbarYRail).marginTop)+toInt(get(this.scrollbarYRail).marginBottom),set(this.scrollbarXRail,{display:"none"}),set(this.scrollbarYRail,{display:"none"}),updateGeometry(this),processScrollDiff(this,"top",0,!1,!0,_),processScrollDiff(this,"left",0,!1,!0,_),set(this.scrollbarXRail,{display:""}),set(this.scrollbarYRail,{display:""}))};PerfectScrollbar.prototype.onScroll=function T(_){this.isAlive&&(updateGeometry(this),processScrollDiff(this,"top",this.element.scrollTop-this.lastScrollTop),processScrollDiff(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};PerfectScrollbar.prototype.destroy=function T(){this.isAlive&&(this.event.unbindAll(),remove(this.scrollbarX),remove(this.scrollbarY),remove(this.scrollbarXRail),remove(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};PerfectScrollbar.prototype.removePsClasses=function T(){this.element.className=this.element.className.split(" ").filter(function(_){return!_.match(/^ps([-_].+|)$/)}).join(" ")};function _typeof$c(T){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$c(T)}var _excluded$k=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$k.apply(this,arguments)}function _objectWithoutProperties$k(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$k(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$k(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}function _classCallCheck$3(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(T,_){for(var E=0;E<_.length;E++){var C=_[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,_toPropertyKey$b(C.key),C)}}function _createClass$3(T,_,E){return _&&_defineProperties$3(T.prototype,_),Object.defineProperty(T,"prototype",{writable:!1}),T}function _toPropertyKey$b(T){var _=_toPrimitive$b(T,"string");return _typeof$c(_)=="symbol"?_:String(_)}function _toPrimitive$b(T,_){if(_typeof$c(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$c(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)}function _callSuper$3(T,_,E){return _=_getPrototypeOf$3(_),_possibleConstructorReturn$3(T,_isNativeReflectConstruct$3()?Reflect.construct(_,E||[],_getPrototypeOf$3(T).constructor):_.apply(T,E))}function _possibleConstructorReturn$3(T,_){if(_&&(_typeof$c(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(T)}function _isNativeReflectConstruct$3(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!T})()}function _getPrototypeOf$3(T){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},_getPrototypeOf$3(T)}function _assertThisInitialized$3(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function _inherits$3(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),_&&_setPrototypeOf$3(T,_)}function _setPrototypeOf$3(T,_){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},_setPrototypeOf$3(T,_)}var handlerNameByEvent={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(handlerNameByEvent);var ScrollBar=function(T){_inherits$3(_,T);function _(E){var C;return _classCallCheck$3(this,_),C=_callSuper$3(this,_,[E]),C.handleRef=C.handleRef.bind(_assertThisInitialized$3(C)),C._handlerByEvent={},C}return _createClass$3(_,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new PerfectScrollbar(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(C){this._updateEventHook(C),this.updateScroll(),C.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var C=this;Object.keys(this._handlerByEvent).forEach(function(A){var R=C._handlerByEvent[A];R&&C._container.removeEventListener(A,R,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var C=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(handlerNameByEvent).forEach(function(R){var I=C.props[handlerNameByEvent[R]],F=A[handlerNameByEvent[R]];if(I!==F){if(F){var B=C._handlerByEvent[R];C._container.removeEventListener(R,B,!1),C._handlerByEvent[R]=null}if(I){var U=function(){return I(C._container)};C._container.addEventListener(R,U,!1),C._handlerByEvent[R]=U}}})}},{key:"_updateClassName",value:function(){var C=this.props.className,A=this._container.className.split(" ").filter(function(R){return R.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(C?" ".concat(C):"").concat(A?" ".concat(A):""))}},{key:"updateScroll",value:function(){var C=this.props.onSync;typeof C=="function"?C(this._ps):this._ps.update()}},{key:"handleRef",value:function(C){var A,R;this._container=C,(A=(R=this.props).containerRef)===null||A===void 0||A.call(R,C)}},{key:"render",value:function(){var C=this.props;C.className;var A=C.style;C.option,C.options,C.containerRef,C.onScrollY,C.onScrollX,C.onScrollUp,C.onScrollDown,C.onScrollLeft,C.onScrollRight,C.onYReachStart,C.onYReachEnd,C.onXReachStart,C.onXReachEnd;var R=C.component;C.onSync;var I=C.children,F=_objectWithoutProperties$k(C,_excluded$k),B=typeof R>"u"?"div":R;return React.createElement(B,_extends$k({style:A,ref:this.handleRef},F),I)}}]),_}(reactExports.Component);function _typeof$b(T){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$b(T)}var _excluded$j=["className","variant","children"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$j.apply(this,arguments)}function _defineProperty$a(T,_,E){return _=_toPropertyKey$a(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$a(T){var _=_toPrimitive$a(T,"string");return _typeof$b(_)=="symbol"?_:String(_)}function _toPrimitive$a(T,_){if(_typeof$b(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$b(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties$j(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$j(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$j(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var Loader=function T(_){var E=_.className,C=E===void 0?void 0:E,A=_.variant,R=A===void 0?"default":A,I=_.children,F=_objectWithoutProperties$j(_,_excluded$j),B="".concat(prefix,"-loader"),U=React.Children.count(I)>0?"".concat(B,"--content"):"";return React.createElement("div",_extends$j({},F,{className:classNames(B,U,_defineProperty$a({},"".concat(B,"--variant-").concat(R),R!=="default"),C),role:"status"}),I)};function _typeof$a(T){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$a(T)}var _excluded$i=["className","children","blur","grayscale"];function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$i.apply(this,arguments)}function _defineProperty$9(T,_,E){return _=_toPropertyKey$9(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$9(T){var _=_toPrimitive$9(T,"string");return _typeof$a(_)=="symbol"?_:String(_)}function _toPrimitive$9(T,_){if(_typeof$a(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$a(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties$i(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$i(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$i(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var Overlay=function T(_){var E=_.className,C=E===void 0?"":E,A=_.children,R=A===void 0?void 0:A,I=_.blur,F=I===void 0?!1:I,B=_.grayscale,U=B===void 0?!1:B,V=_objectWithoutProperties$i(_,_excluded$i),D="".concat(prefix,"-overlay"),O="".concat(D,"--blur"),L="".concat(D,"--grayscale");return React.createElement("div",_extends$i({},V,{className:classNames(D,_defineProperty$9({},O,F),_defineProperty$9({},L,U),C)}),React.createElement("div",{className:"".concat(D,"__content")},R))},_excluded$h=["sender","sentTime","children","className"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$h.apply(this,arguments)}function _objectWithoutProperties$h(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$h(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$h(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageHeader=function T(_){var E=_.sender,C=E===void 0?"":E,A=_.sentTime,R=A===void 0?"":A,I=_.children,F=I===void 0?void 0:I,B=_.className,U=_objectWithoutProperties$h(_,_excluded$h),V="".concat(prefix,"-message__header");return React.createElement("div",_extends$h({},U,{className:classNames(V,B)}),typeof F<"u"?F:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-message__sender-name")},C),React.createElement("div",{className:"".concat(prefix,"-message__sent-time")},R)))};MessageHeader.displayName="Message.Header";var _excluded$g=["sender","sentTime","children","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$g.apply(this,arguments)}function _objectWithoutProperties$g(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$g(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$g(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageFooter=function T(_){var E=_.sender,C=E===void 0?"":E,A=_.sentTime,R=A===void 0?"":A,I=_.children,F=I===void 0?void 0:I,B=_.className,U=_objectWithoutProperties$g(_,_excluded$g),V="".concat(prefix,"-message__footer");return React.createElement("div",_extends$g({},U,{className:classNames(V,B)}),typeof F<"u"?F:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-message__sender-name")},C),React.createElement("div",{className:"".concat(prefix,"-message__sent-time")},R)))};MessageFooter.displayName="Message.Footer";var MessageCustomContent=function T(_){var E=_.children,C=_.className,A="".concat(prefix,"-message__custom-content");return React.createElement("div",{className:classNames(A,C)},E)};MessageCustomContent.displayName="Message.CustomContent";var MessageImageContent=function T(_){var E=_.src,C=_.width,A=_.height,R=_.alt,I=_.className,F="".concat(prefix,"-message__image-content"),B={width:typeof C=="number"?"".concat(C,"px"):typeof C=="string"?C:void 0,height:typeof A=="number"?"".concat(A,"px"):typeof A=="string"?A:void 0};return React.createElement("div",{className:classNames(F,I)},React.createElement("img",{src:E,style:B,alt:R}))};MessageImageContent.displayName="Message.ImageContent";var MessageHtmlContent=function T(_){var E=_.html,C=_.className,A="".concat(prefix,"-message__html-content"),R=function(){return{__html:E}};return React.createElement("div",{className:classNames(A,C),dangerouslySetInnerHTML:R()})};MessageHtmlContent.displayName="Message.HtmlContent";var MessageTextContent=function T(_){var E=_.text,C=_.className,A=_.children,R="".concat(prefix,"-message__text-content"),I=A??E;return React.createElement("div",{className:classNames(R,C)},I)};MessageTextContent.displayName="Message.TextContent";var _excluded$f=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$f.apply(this,arguments)}function _defineProperty$8(T,_,E){return _=_toPropertyKey$8(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$8(T){var _=_toPrimitive$8(T,"string");return _typeof$9(_)=="symbol"?_:String(_)}function _toPrimitive$8(T,_){if(_typeof$9(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$9(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _typeof$9(T){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$9(T)}function _slicedToArray$5(T,_){return _arrayWithHoles$5(T)||_iterableToArrayLimit$5(T,_)||_unsupportedIterableToArray$5(T,_)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$5(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$5(T,_)}}function _arrayLikeToArray$5(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit$5(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles$5(T){if(Array.isArray(T))return T}function _objectWithoutProperties$f(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$f(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$f(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var Message=function T(_){var E,C,A=_.model,R=A.message,I=R===void 0?"":R,F=A.sentTime,B=F===void 0?"":F,U=A.sender,V=U===void 0?"":U,D=A.direction,O=D===void 0?1:D,L=A.position,z=A.type,W=A.payload,X=_.avatarSpacer,Y=X===void 0?!1:X,K=_.avatarPosition,Q=K===void 0?void 0:K,ee=_.type,J=ee===void 0?"html":ee,ie=_.payload,re=_.children,se=_.className,ne=_objectWithoutProperties$f(_,_excluded$f),oe="".concat(prefix,"-message"),fe=getChildren(re,[Avatar,MessageHeader,MessageFooter,MessageHtmlContent,MessageTextContent,MessageImageContent,MessageCustomContent]),he=_slicedToArray$5(fe,7),ge=he[0],ye=he[1],we=he[2],le=he[3],de=he[4],ce=he[5],ve=he[6],be=function(){if(O===0||O==="incoming")return"".concat(oe,"--incoming");if(O===1||O==="outgoing")return"".concat(oe,"--outgoing")}(),me=function(je){var Ye="".concat(oe,"--avatar-");if(je===0||je==="top-left"||je==="tl")return"".concat(Ye,"tl");if(je===1||je==="top-right"||je==="tr")return"".concat(Ye,"tr");if(je===2||je==="bottom-right"||je==="br")return"".concat(Ye,"br");if(je===3||je==="bottom-left"||je==="bl")return"".concat(Ye,"bl");if(je===4||je==="center-left"||je==="cl")return"".concat(Ye,"cl");if(je===5||je==="center-right"||je==="cr")return"".concat(Ye,"cr")}(Q),xe=function(je){var Ye="".concat(prefix,"-message--");if(je==="single"||je===0)return"".concat(Ye,"single");if(je==="first"||je===1)return"".concat(Ye,"first");if(je==="normal"||je===2)return"";if(je==="last"||je===3)return"".concat(Ye,"last")}(L),Ae=function(){return(V==null?void 0:V.length)>0&&(B==null?void 0:B.length)>0?"".concat(V,": ").concat(B):(V==null?void 0:V.length)>0&&(typeof B>"u"||(B==null?void 0:B.length)===0)?V:null}(),De=(E=(C=le??de)!==null&&C!==void 0?C:ce)!==null&&E!==void 0?E:ve,Ie=De??function(){var je=z??J,Ye=W??I,ke=Ye??ie,Le=_typeof$9(ke)==="object"?getComponentName(ke):"";if(je==="html"&&Le!=="Message.CustomContent")return React.createElement(MessageHtmlContent,{html:ke});if(je==="text")return React.createElement(MessageTextContent,{text:ke});if(je==="image")return React.createElement(MessageImageContent,ke);if(je==="custom"||Le==="Message.CustomContent")return ke}();return React.createElement("section",_extends$f({},ne,{"aria-label":Ae,className:classNames(oe,be,_defineProperty$8({},"".concat(oe,"--avatar-spacer"),Y),xe,me,se)},_defineProperty$8({},"data-".concat(prefix,"-message"),"")),typeof ge<"u"&&React.createElement("div",{className:"".concat(oe,"__avatar")},ge),React.createElement("div",{className:"".concat(oe,"__content-wrapper")},ye,React.createElement("div",{className:"".concat(oe,"__content")},Ie),we))};Message.Header=MessageHeader;Message.HtmlContent=MessageHtmlContent;Message.TextContent=MessageTextContent;Message.ImageContent=MessageImageContent;Message.CustomContent=MessageCustomContent;Message.Footer=MessageFooter;var _excluded$e=["children","className"];function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$e.apply(this,arguments)}function _objectWithoutProperties$e(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$e(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$e(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageGroupHeader=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=_objectWithoutProperties$e(_,_excluded$e),I="".concat(prefix,"-message-group__header");return React.createElement("div",_extends$e({},R,{className:classNames(I,A)}),C)};MessageGroupHeader.displayName="MessageGroup.Header";var _excluded$d=["children","className"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$d.apply(this,arguments)}function _objectWithoutProperties$d(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$d(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$d(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageGroupFooter=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=_objectWithoutProperties$d(_,_excluded$d),I="".concat(prefix,"-message-group__footer");return React.createElement("div",_extends$d({},R,{className:classNames(I,A)}),C)};MessageGroupFooter.displayName="MessageGroup.Footer";var _excluded$c=["children","className"];function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$c.apply(this,arguments)}function _objectWithoutProperties$c(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$c(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$c(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageGroupMessages=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=_objectWithoutProperties$c(_,_excluded$c),I="".concat(prefix,"-message-group");return React.createElement("div",_extends$c({},R,{className:classNames("".concat(I,"__messages"),A)}),C)};MessageGroupMessages.displayName="MessageGroup.Messages";function _typeof$8(T){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$8(T)}var _excluded$b=["direction","avatarPosition","sender","sentTime","children","className"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$b.apply(this,arguments)}function _defineProperty$7(T,_,E){return _=_toPropertyKey$7(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$7(T){var _=_toPrimitive$7(T,"string");return _typeof$8(_)=="symbol"?_:String(_)}function _toPrimitive$7(T,_){if(_typeof$8(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$8(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _slicedToArray$4(T,_){return _arrayWithHoles$4(T)||_iterableToArrayLimit$4(T,_)||_unsupportedIterableToArray$4(T,_)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$4(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$4(T,_)}}function _arrayLikeToArray$4(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit$4(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles$4(T){if(Array.isArray(T))return T}function _objectWithoutProperties$b(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$b(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$b(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageGroup=function T(_){var E=_.direction,C=E===void 0?"incoming":E,A=_.avatarPosition,R=A===void 0?void 0:A,I=_.sender,F=I===void 0?"":I,B=_.sentTime,U=B===void 0?"":B,V=_.children,D=_.className,O=_objectWithoutProperties$b(_,_excluded$b),L="".concat(prefix,"-message-group"),z=function(){if(C===0||C==="incoming")return"".concat(L,"--incoming");if(C===1||C==="outgoing")return"".concat(L,"--outgoing")}(),W=function(){var re="".concat(L,"--avatar-");if(typeof R=="string"&&(R==="tl"||R==="top-left"||R==="tr"||R==="top-right"||R==="bl"||R==="bottom-right"||R==="br"||R==="bottom-right"||R==="cl"||R==="center-left"||R==="cr"||R==="center-right"))return"".concat(re).concat(R)}(),X=getChildren(V,[Avatar,MessageGroupHeader,MessageGroupFooter,MessageGroupMessages]),Y=_slicedToArray$4(X,4),K=Y[0],Q=Y[1],ee=Y[2],J=Y[3],ie=function(){return F.length>0&&U.length>0?"".concat(F,": ").concat(U):F.length>0&&U.length===0?F:null}();return React.createElement("section",_extends$b({"aria-label":ie},O,{className:classNames(L,z,W,D)},_defineProperty$7({},"data-".concat(prefix,"-message-group"),"")),typeof K<"u"&&React.createElement("div",{className:"".concat(L,"__avatar")},K),React.createElement("div",{className:"".concat(L,"__content")},Q,J,ee))};MessageGroup.Header=MessageGroupHeader;MessageGroup.Footer=MessageGroupFooter;MessageGroup.Messages=MessageGroupMessages;var _excluded$a=["content","as","children","className"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$a.apply(this,arguments)}function _objectWithoutProperties$a(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$a(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$a(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageSeparator=function T(_){var E=_.content,C=E===void 0?void 0:E,A=_.as,R=A===void 0?"div":A,I=_.children,F=I===void 0?void 0:I,B=_.className,U=_objectWithoutProperties$a(_,_excluded$a),V="".concat(prefix,"-message-separator"),D=function(){return typeof R=="string"&&R.length>0?R:"div"}();return React.createElement(D,_extends$a({},U,{className:classNames(V,B)}),isChildrenNil(F)===!0?C:F)},_excluded$9=["className","children"];function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$9.apply(this,arguments)}function _objectWithoutProperties$9(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$9(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$9(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MessageListContent=function T(_){var E=_.className,C=_.children,A=_objectWithoutProperties$9(_,_excluded$9);return React.createElement("div",_extends$9({},A,{className:E}),C)};MessageListContent.displayName="MessageList.Content";var _excluded$8=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function _typeof$7(T){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$7(T)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$8.apply(this,arguments)}function _slicedToArray$3(T,_){return _arrayWithHoles$3(T)||_iterableToArrayLimit$3(T,_)||_unsupportedIterableToArray$3(T,_)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$3(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$3(T,_)}}function _arrayLikeToArray$3(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit$3(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles$3(T){if(Array.isArray(T))return T}function _objectWithoutProperties$8(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$8(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$8(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}function _classCallCheck$2(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(T,_){for(var E=0;E<_.length;E++){var C=_[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,_toPropertyKey$6(C.key),C)}}function _createClass$2(T,_,E){return _&&_defineProperties$2(T.prototype,_),Object.defineProperty(T,"prototype",{writable:!1}),T}function _callSuper$2(T,_,E){return _=_getPrototypeOf$2(_),_possibleConstructorReturn$2(T,_isNativeReflectConstruct$2()?Reflect.construct(_,E||[],_getPrototypeOf$2(T).constructor):_.apply(T,E))}function _possibleConstructorReturn$2(T,_){if(_&&(_typeof$7(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(T)}function _isNativeReflectConstruct$2(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!T})()}function _getPrototypeOf$2(T){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},_getPrototypeOf$2(T)}function _assertThisInitialized$2(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function _inherits$2(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),_&&_setPrototypeOf$2(T,_)}function _setPrototypeOf$2(T,_){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},_setPrototypeOf$2(T,_)}function _defineProperty$6(T,_,E){return _=_toPropertyKey$6(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$6(T){var _=_toPrimitive$6(T,"string");return _typeof$7(_)=="symbol"?_:String(_)}function _toPrimitive$6(T,_){if(_typeof$7(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$7(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}var MessageListInner=function(T){_inherits$2(_,T);function _(E){var C;return _classCallCheck$2(this,_),C=_callSuper$2(this,_,[E]),_defineProperty$6(_assertThisInitialized$2(C),"handleResize",function(){C.containerRef.current.clientHeight<C.lastClientHeight&&C.scrollToEnd(C.props.scrollBehavior),C.scrollRef.current.updateScroll()}),_defineProperty$6(_assertThisInitialized$2(C),"handleContainerResize",function(){C.resizeTicking===!1&&(window.requestAnimationFrame(function(){var A=C.containerRef.current;if(A){var R=A.clientHeight,I=R-C.lastClientHeight;I>=1?C.preventScrollTop===!1&&(A.scrollTop=Math.round(A.scrollTop)-I):A.scrollTop=A.scrollTop-I,C.lastClientHeight=A.clientHeight,C.scrollRef.current.updateScroll()}C.resizeTicking=!1}),C.resizeTicking=!0)}),_defineProperty$6(_assertThisInitialized$2(C),"isSticked",function(){var A=C.containerRef.current;return A.scrollHeight===Math.round(A.scrollTop+A.clientHeight)}),_defineProperty$6(_assertThisInitialized$2(C),"handleScroll",function(){C.scrollTicking===!1&&(window.requestAnimationFrame(function(){C.noScroll===!1?C.preventScrollTop=C.isSticked():C.noScroll=!1,C.scrollTicking=!1}),C.scrollTicking=!0)}),_defineProperty$6(_assertThisInitialized$2(C),"getLastMessageOrGroup",function(){var A=C.containerRef.current.querySelector("[data-".concat(prefix,"-message-list]>[data-").concat(prefix,"-message]:last-of-type,[data-").concat(prefix,"-message-list]>[data-").concat(prefix,"-message-group]:last-of-type")),R=A==null?void 0:A.querySelector("[data-".concat(prefix,"-message]:last-of-type"));return{lastElement:A,lastMessageInGroup:R}}),C.scrollPointRef=React.createRef(),C.containerRef=React.createRef(),C.scrollRef=React.createRef(),C.lastClientHeight=0,C.preventScrollTop=!1,C.resizeObserver=void 0,C.scrollTicking=!1,C.resizeTicking=!1,C.noScroll=void 0,C}return _createClass$2(_,[{key:"getSnapshotBeforeUpdate",value:function(){var C=this.containerRef.current,A=Math.round(C.scrollTop+C.clientHeight),R=C.scrollHeight===A||C.scrollHeight+1===A||C.scrollHeight-1===A;return{sticky:R,clientHeight:C.clientHeight,scrollHeight:C.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:C.scrollHeight-C.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(C,A,R){var I=this.props.autoScrollToBottom;if(typeof R<"u"){var F=this.containerRef.current,B=this.getLastMessageOrGroup(),U=B.lastElement,V=B.lastMessageInGroup;if(U===R.lastMessageOrGroup.lastElement&&(typeof V>"u"||V===R.lastMessageOrGroup.lastMessageInGroup)&&(F.scrollTop=F.scrollHeight-R.diff+(this.lastClientHeight-F.clientHeight)),R.sticky===!0)I===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(R.clientHeight<this.lastClientHeight){var D=F.scrollTop+this.lastClientHeight;F.scrollHeight===D||F.scrollHeight+1===D||F.scrollHeight-1===D?I===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,U===R.lastMessageOrGroup.lastElement&&(typeof V>"u"||V===R.lastMessageOrGroup.lastMessageInGroup)&&F.scrollTop===0&&F.scrollHeight>R.scrollHeight&&(F.scrollTop=F.scrollHeight-R.scrollHeight);this.lastClientHeight=R.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,A=this.containerRef.current,R=this.scrollPointRef.current,I=A.getBoundingClientRect(),F=R.getBoundingClientRect(),B=F.top+A.scrollTop-I.top;A.scrollBy?A.scrollBy({top:B,behavior:C}):A.scrollTop=B,this.lastClientHeight=A.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var C=this,A=this.props,R=A.children,I=A.typingIndicator,F=A.loading,B=A.loadingMore,U=A.loadingMorePosition,V=A.onYReachStart,D=A.onYReachEnd,O=A.className,L=A.disableOnYReachWhenNoScroll;A.scrollBehavior,A.autoScrollToBottom,A.autoScrollToBottomOnMount;var z=_objectWithoutProperties$8(A,_excluded$8),W="".concat(prefix,"-message-list"),X=getChildren(R,[MessageListContent]),Y=_slicedToArray$3(X,1),K=Y[0];return React.createElement("div",_extends$8({},z,{className:classNames(W,O)}),B&&React.createElement("div",{className:classNames("".concat(W,"__loading-more"),_defineProperty$6({},"".concat(W,"__loading-more--bottom"),U==="bottom"))},React.createElement(Loader,null)),F&&React.createElement(Overlay,null,React.createElement(Loader,null)),React.createElement(ScrollBar,_extends$8({onYReachStart:V,onYReachEnd:D,onSync:function(ee){return ee.update(L)},className:"".concat(W,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(ee){return C.containerRef.current=ee},options:{suppressScrollX:!0}},_defineProperty$6({},"data-".concat(prefix,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),K||R,React.createElement("div",{className:"".concat(W,"__scroll-to"),ref:this.scrollPointRef})),typeof I<"u"&&React.createElement("div",{className:"".concat(W,"__typing-indicator-container")},I))}}]),_}(React.Component);MessageListInner.displayName="MessageList";function MessageListFunc(T,_){var E=reactExports.useRef(),C=function(R){return E.current.scrollToEnd(R)};return reactExports.useImperativeHandle(_,function(){return{scrollToBottom:C}}),React.createElement(MessageListInner,_extends$8({ref:E},T))}var MessageList$1=reactExports.forwardRef(MessageListFunc);MessageList$1.propTypes={children:allowedChildren([Message,MessageGroup,MessageSeparator,MessageListContent]),typingIndicator:PropTypes.node,loading:PropTypes.bool,loadingMore:PropTypes.bool,loadingMorePosition:PropTypes.oneOf(["top","bottom"]),onYReachStart:PropTypes.func,onYReachEnd:PropTypes.func,disableOnYReachWhenNoScroll:PropTypes.bool,autoScrollToBottom:PropTypes.bool,autoScrollToBottomOnMount:PropTypes.bool,scrollBehavior:PropTypes.oneOf(["auto","smooth"]),className:PropTypes.string};MessageList$1.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};MessageListInner.defaultProps=MessageList$1.defaultProps;MessageList$1.Content=MessageListContent;function _typeof$6(T){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$6(T)}function _classCallCheck$1(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(T,_){for(var E=0;E<_.length;E++){var C=_[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,_toPropertyKey$5(C.key),C)}}function _createClass$1(T,_,E){return _&&_defineProperties$1(T.prototype,_),Object.defineProperty(T,"prototype",{writable:!1}),T}function _callSuper$1(T,_,E){return _=_getPrototypeOf$1(_),_possibleConstructorReturn$1(T,_isNativeReflectConstruct$1()?Reflect.construct(_,E||[],_getPrototypeOf$1(T).constructor):_.apply(T,E))}function _possibleConstructorReturn$1(T,_){if(_&&(_typeof$6(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(T)}function _isNativeReflectConstruct$1(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!T})()}function _getPrototypeOf$1(T){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},_getPrototypeOf$1(T)}function _assertThisInitialized$1(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function _inherits$1(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),_&&_setPrototypeOf$1(T,_)}function _setPrototypeOf$1(T,_){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},_setPrototypeOf$1(T,_)}function _defineProperty$5(T,_,E){return _=_toPropertyKey$5(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$5(T){var _=_toPrimitive$5(T,"string");return _typeof$6(_)=="symbol"?_:String(_)}function _toPrimitive$5(T,_){if(_typeof$6(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$6(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}var replaceCaret=function T(_,E){var C=document.activeElement===_,A=document.createTextNode("");if(_.appendChild(A),A!==null&&A.nodeValue!==null&&(C||E)){var R=window.getSelection();if(R!==null){var I=document.createRange();I.setStart(A,A.nodeValue.length),I.collapse(!0),R.removeAllRanges(),R.addRange(I)}}},ContentEditable=function(T){_inherits$1(_,T);function _(E){var C;return _classCallCheck$1(this,_),C=_callSuper$1(this,_,[E]),_defineProperty$5(_assertThisInitialized$1(C),"innerHTML",function(){var A=_assertThisInitialized$1(C),R=A.props.value;return{__html:typeof R<"u"?R:""}}),_defineProperty$5(_assertThisInitialized$1(C),"handleKeyPress",function(A){var R=_assertThisInitialized$1(C),I=R.props.onKeyPress;I==null||I(A)}),_defineProperty$5(_assertThisInitialized$1(C),"handleInput",function(A){var R=_assertThisInitialized$1(C),I=R.props.onChange,F=A.target;I==null||I(F.innerHTML,F.textContent,F.innerText)}),C.msgRef=React.createRef(),C}return _createClass$1(_,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(C){var A=this.msgRef,R=this.props,I=R.placeholder,F=R.disabled,B=R.activateAfterChange;return typeof A.current>"u"||C.value!==A.current.innerHTML?!0:I!==C.placeholder||F!==C.disabled||B!==C.activateAfterChange}},{key:"componentDidUpdate",value:function(){var C=this.msgRef,A=this.props,R=A.value,I=A.activateAfterChange;R!==C.current.innerHTML&&(C.current.innerHTML=typeof R=="string"?R:""),replaceCaret(C.current,I)}},{key:"render",value:function(){var C=this.msgRef,A=this.handleInput,R=this.handleKeyPress,I=this.innerHTML,F=this.props,B=F.placeholder,U=F.disabled,V=F.className,D=typeof B=="string"?B:"";return React.createElement("div",{ref:C,className:V,contentEditable:U===!1,disabled:U,"data-placeholder":D,onInput:A,onKeyPress:R,dangerouslySetInnerHTML:I()})}}]),_}(reactExports.Component);function _typeof$5(T){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$5(T)}var _excluded$7=["fancyScroll","children","forwardedRef"],_excluded2=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function _defineProperty$4(T,_,E){return _=_toPropertyKey$4(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _slicedToArray$2(T,_){return _arrayWithHoles$2(T)||_iterableToArrayLimit$2(T,_)||_unsupportedIterableToArray$2(T,_)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$2(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$2(T,_)}}function _arrayLikeToArray$2(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit$2(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles$2(T){if(Array.isArray(T))return T}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$7.apply(this,arguments)}function _objectWithoutProperties$7(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$7(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$7(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}function _classCallCheck(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties(T,_){for(var E=0;E<_.length;E++){var C=_[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,_toPropertyKey$4(C.key),C)}}function _createClass(T,_,E){return _&&_defineProperties(T.prototype,_),Object.defineProperty(T,"prototype",{writable:!1}),T}function _toPropertyKey$4(T){var _=_toPrimitive$4(T,"string");return _typeof$5(_)=="symbol"?_:String(_)}function _toPrimitive$4(T,_){if(_typeof$5(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$5(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _callSuper(T,_,E){return _=_getPrototypeOf(_),_possibleConstructorReturn(T,_isNativeReflectConstruct()?Reflect.construct(_,E||[],_getPrototypeOf(T).constructor):_.apply(T,E))}function _possibleConstructorReturn(T,_){if(_&&(_typeof$5(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(T)}function _assertThisInitialized(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function _isNativeReflectConstruct(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!T})()}function _getPrototypeOf(T){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},_getPrototypeOf(T)}function _inherits(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),_&&_setPrototypeOf(T,_)}function _setPrototypeOf(T,_){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},_setPrototypeOf(T,_)}function editorContainer(){var T=function(_){_inherits(E,_);function E(){return _classCallCheck(this,E),_callSuper(this,E,arguments)}return _createClass(E,[{key:"render",value:function(){var A=this.props,R=A.fancyScroll,I=A.children,F=A.forwardedRef,B=_objectWithoutProperties$7(A,_excluded$7);return React.createElement(React.Fragment,null,R===!0&&React.createElement(ScrollBar,_extends$7({ref:function(V){return F.current=V}},B,{options:{suppressScrollX:!0}}),I),R===!1&&React.createElement("div",_extends$7({ref:F},B),I))}}]),E}(reactExports.Component);return React.forwardRef(function(_,E){return React.createElement(T,_extends$7({forwardedRef:E},_))})}var EditorContainer=editorContainer(),useControllableState=function T(_,E){var C=typeof _<"u"?_:E,A=reactExports.useState(C),R=_slicedToArray$2(A,2),I=R[0],F=R[1],B=typeof _<"u"?_:I;return[B,function(U){F(U)}]};function MessageInputInner(T,_){var E=T.value,C=E===void 0?void 0:E,A=T.onSend,R=A===void 0?noop$1:A,I=T.onChange,F=I===void 0?noop$1:I,B=T.autoFocus,U=B===void 0?!1:B,V=T.placeholder,D=V===void 0?"":V,O=T.fancyScroll,L=O===void 0?!0:O,z=T.className,W=T.activateAfterChange,X=W===void 0?!1:W,Y=T.disabled,K=Y===void 0?!1:Y,Q=T.sendDisabled,ee=T.sendOnReturnDisabled,J=ee===void 0?!1:ee,ie=T.attachDisabled,re=ie===void 0?!1:ie,se=T.sendButton,ne=se===void 0?!0:se,oe=T.attachButton,fe=oe===void 0?!0:oe,he=T.onAttachClick,ge=he===void 0?noop$1:he,ye=_objectWithoutProperties$7(T,_excluded2),we=reactExports.useRef(),le=reactExports.useRef(),de=useControllableState(C,""),ce=_slicedToArray$2(de,2),ve=ce[0],be=ce[1],me=useControllableState(Q,!0),xe=_slicedToArray$2(me,2),Ae=xe[0],De=xe[1],Ie=function(){typeof le.current<"u"&&le.current.focus()};reactExports.useImperativeHandle(_,function(){return{focus:Ie}}),reactExports.useEffect(function(){U===!0&&Ie()},[]),reactExports.useEffect(function(){typeof we.current.updateScroll=="function"&&we.current.updateScroll()});var je=function(){var Je=le.current.msgRef.current;return[Je.textContent,Je.innerText,Je.cloneNode(!0).childNodes]},Ye=function(){if(ve.length>0){C===void 0&&be(""),typeof Q>"u"&&De(!0);var Je=je();R(ve,Je[0],Je[1],Je[2])}},ke=function(Je){Je.key==="Enter"&&Je.shiftKey===!1&&J===!1&&(Je.preventDefault(),Ye())},Le=function(Je,ut,lt){be(Je),typeof Q>"u"&&De(ut.length===0),typeof we.current.updateScroll=="function"&&we.current.updateScroll();var it=je();F(Je,ut,lt,it[2])},Ne="".concat(prefix,"-message-input"),Qe=typeof D=="string"?D:"";return React.createElement("div",_extends$7({},ye,{className:classNames(Ne,_defineProperty$4({},"".concat(Ne,"--disabled"),K),z)}),fe===!0&&React.createElement("div",{className:"".concat(Ne,"__tools")},React.createElement(AttachmentButton,{onClick:ge,disabled:K===!0||re===!0})),React.createElement("div",{className:"".concat(Ne,"__content-editor-wrapper")},React.createElement(EditorContainer,{fancyScroll:L,ref:we,className:"".concat(Ne,"__content-editor-container")},React.createElement(ContentEditable,{ref:le,className:"".concat(Ne,"__content-editor"),disabled:K,placeholder:Qe,onKeyPress:ke,onChange:Le,activateAfterChange:X,value:ve}))),ne===!0&&React.createElement("div",{className:"".concat(Ne,"__tools")},React.createElement(SendButton,{onClick:Ye,disabled:K===!0||Ae===!0})))}var MessageInput$1=reactExports.forwardRef(MessageInputInner);MessageInput$1.displayName="MessageInput";MessageInput$1.propTypes={value:PropTypes.string,placeholder:PropTypes.string,disabled:PropTypes.bool,sendOnReturnDisabled:PropTypes.bool,sendDisabled:PropTypes.bool,fancyScroll:PropTypes.bool,activateAfterChange:PropTypes.bool,autoFocus:PropTypes.bool,onChange:PropTypes.func,onSend:PropTypes.func,className:PropTypes.string,sendButton:PropTypes.bool,attachButton:PropTypes.bool,attachDisabled:PropTypes.bool,onAttachClick:PropTypes.func};var _excluded$6=["className","children"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$6.apply(this,arguments)}function _objectWithoutProperties$6(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$6(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$6(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var InputToolbox=function T(_){var E=_.className,C=_.children,A=_objectWithoutProperties$6(_,_excluded$6),R="".concat(prefix,"-input-toolbox");return React.createElement("div",_extends$6({},A,{className:classNames(R,E)}),C)};InputToolbox.displayName="InputToolbox";var _excluded$5=["children","className"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$5.apply(this,arguments)}function _slicedToArray$1(T,_){return _arrayWithHoles$1(T)||_iterableToArrayLimit$1(T,_)||_unsupportedIterableToArray$1(T,_)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray$1(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray$1(T,_)}}function _arrayLikeToArray$1(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit$1(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles$1(T){if(Array.isArray(T))return T}function _objectWithoutProperties$5(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$5(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$5(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ChatContainer=function T(_){var E=_.children,C=E===void 0?void 0:E,A=_.className,R=_objectWithoutProperties$5(_,_excluded$5),I="".concat(prefix,"-chat-container"),F=getChildren(C,[ConversationHeader,MessageList$1,MessageInput$1,InputToolbox]),B=_slicedToArray$1(F,4),U=B[0],V=B[1],D=B[2],O=B[3];return React.createElement("div",_extends$5({},R,{className:classNames(I,A)}),U,V,D,O)},cName="".concat(prefix,"-conversation");function _typeof$4(T){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$4(T)}var _excluded$4=["children","className","visible"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$4.apply(this,arguments)}function _defineProperty$3(T,_,E){return _=_toPropertyKey$3(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$3(T){var _=_toPrimitive$3(T,"string");return _typeof$4(_)=="symbol"?_:String(_)}function _toPrimitive$3(T,_){if(_typeof$4(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$4(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties$4(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$4(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$4(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var ConversationOperations=function T(_){var E=_.children,C=_.className,A=_.visible,R=_objectWithoutProperties$4(_,_excluded$4);return React.createElement("div",_extends$4({},R,{className:classNames("".concat(cName,"__operations"),_defineProperty$3({},"".concat(cName,"__operations--visible"),A),C)}),React.Children.count(E)>0?E:React.createElement(FontAwesomeIcon,{icon:faEllipsisVExports.faEllipsisV}))};ConversationOperations.displayName="Conversation.Operations";var _excluded$3=["lastSenderName","info","name","children","className"];function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$3.apply(this,arguments)}function _typeof$3(T){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$3(T)}function _objectWithoutProperties$3(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$3(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$3(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var LastSenderName=function T(_){var E=_.name;return React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(cName,"__last-sender")},E),":")},InfoContent=function T(_){var E=_.info;return React.createElement("div",{className:"".concat(cName,"__info-content")},E)},ConversationContent=function T(_){var E=_.lastSenderName,C=_.info,A=_.name,R=_.children,I=_.className,F=_objectWithoutProperties$3(_,_excluded$3),B=_typeof$3(E);return React.createElement("div",_extends$3({},F,{className:classNames("".concat(cName,"__content"),I)}),React.Children.count(R)>0?R:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(cName,"__name")},A),React.createElement("div",{className:"".concat(cName,"__info")},B!=="undefined"?React.createElement(React.Fragment,null,B==="string"?React.createElement(LastSenderName,{name:E}):E," "):null,typeof C<"u"&&React.createElement(InfoContent,{info:C}))))};ConversationContent.displayName="Conversation.Content";function _typeof$2(T){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$2(T)}var _excluded$2=["responsive","children","className"];function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$2.apply(this,arguments)}function _defineProperty$2(T,_,E){return _=_toPropertyKey$2(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$2(T){var _=_toPrimitive$2(T,"string");return _typeof$2(_)=="symbol"?_:String(_)}function _toPrimitive$2(T,_){if(_typeof$2(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$2(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties$2(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$2(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$2(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var MainContainer=function T(_){var E=_.responsive,C=E===void 0?!1:E,A=_.children,R=A===void 0?void 0:A,I=_.className,F=_objectWithoutProperties$2(_,_excluded$2),B="".concat(prefix,"-main-container");return React.createElement("div",_extends$2({},F,{className:classNames(B,_defineProperty$2({},"".concat(B,"--responsive"),C),I)}),R)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faSearch={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},faTimes={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function _typeof$1(T){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$1(T)}var _excluded$1=["placeholder","value","onChange","onClearClick","className","disabled"];function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends$1.apply(this,arguments)}function _defineProperty$1(T,_,E){return _=_toPropertyKey$1(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey$1(T){var _=_toPrimitive$1(T,"string");return _typeof$1(_)=="symbol"?_:String(_)}function _toPrimitive$1(T,_){if(_typeof$1(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof$1(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _slicedToArray(T,_){return _arrayWithHoles(T)||_iterableToArrayLimit(T,_)||_unsupportedIterableToArray(T,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(T,_){if(T){if(typeof T=="string")return _arrayLikeToArray(T,_);var E=Object.prototype.toString.call(T).slice(8,-1);if(E==="Object"&&T.constructor&&(E=T.constructor.name),E==="Map"||E==="Set")return Array.from(T);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray(T,_)}}function _arrayLikeToArray(T,_){(_==null||_>T.length)&&(_=T.length);for(var E=0,C=new Array(_);E<_;E++)C[E]=T[E];return C}function _iterableToArrayLimit(T,_){var E=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(E!=null){var C,A,R,I,F=[],B=!0,U=!1;try{if(R=(E=E.call(T)).next,_!==0)for(;!(B=(C=R.call(E)).done)&&(F.push(C.value),F.length!==_);B=!0);}catch(V){U=!0,A=V}finally{try{if(!B&&E.return!=null&&(I=E.return(),Object(I)!==I))return}finally{if(U)throw A}}return F}}function _arrayWithHoles(T){if(Array.isArray(T))return T}function _objectWithoutProperties$1(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose$1(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose$1(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}var useControlledOrNot=function T(_,E){return typeof E>"u"?reactExports.useState(_):[E,function(){}]};function SearchInner(T,_){var E=T.placeholder,C=E===void 0?"":E,A=T.value,R=A===void 0?void 0:A,I=T.onChange,F=I===void 0?function(){}:I,B=T.onClearClick,U=B===void 0?function(){}:B,V=T.className,D=T.disabled,O=D===void 0?!1:D,L=_objectWithoutProperties$1(T,_excluded$1),z="".concat(prefix,"-search"),W=reactExports.useMemo(function(){return typeof R<"u"},[]),X=useControlledOrNot("",R),Y=_slicedToArray(X,2),K=Y[0],Q=Y[1],ee=reactExports.useState(W?K.length>0:!1),J=_slicedToArray(ee,2),ie=J[0],re=J[1];if(W!==typeof R<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var se=reactExports.useRef(void 0),ne=function(){typeof se.current<"u"&&se.current.focus()};reactExports.useImperativeHandle(_,function(){return{focus:ne}});var oe=function(ge){var ye=ge.target.value;re(ye.length>0),W===!1&&Q(ye),F(ye)},fe=function(){W===!1&&Q(""),re(!1),U()};return React.createElement("div",_extends$1({},L,{className:classNames(z,_defineProperty$1({},"".concat(z,"--disabled"),O),V)}),React.createElement(FontAwesomeIcon,{icon:faSearch,className:"".concat(z,"__search-icon")}),React.createElement("input",{ref:se,type:"text",className:"".concat(z,"__input"),placeholder:C,onChange:oe,disabled:O,value:K}),React.createElement(FontAwesomeIcon,{icon:faTimes,className:classNames("".concat(z,"__clear-icon"),_defineProperty$1({},"".concat(z,"__clear-icon--active"),ie)),onClick:fe}))}var Search=reactExports.forwardRef(SearchInner);Search.displayName="Search";Search.propTypes={placeholder:PropTypes.string,value:PropTypes.string,onChange:PropTypes.func,onClearClick:PropTypes.func,className:PropTypes.string,disabled:PropTypes.bool};function _typeof(T){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof(T)}var _excluded=["className","children","size","selected","onChange","itemsTabIndex"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(T){for(var _=1;_<arguments.length;_++){var E=arguments[_];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C])}return T},_extends.apply(this,arguments)}function _defineProperty(T,_,E){return _=_toPropertyKey(_),_ in T?Object.defineProperty(T,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[_]=E,T}function _toPropertyKey(T){var _=_toPrimitive(T,"string");return _typeof(_)=="symbol"?_:String(_)}function _toPrimitive(T,_){if(_typeof(T)!="object"||!T)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var C=E.call(T,_);if(_typeof(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function _objectWithoutProperties(T,_){if(T==null)return{};var E=_objectWithoutPropertiesLoose(T,_),C,A;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(T);for(A=0;A<R.length;A++)C=R[A],!(_.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(T,C)&&(E[C]=T[C])}return E}function _objectWithoutPropertiesLoose(T,_){if(T==null)return{};var E={},C=Object.keys(T),A,R;for(R=0;R<C.length;R++)A=C[R],!(_.indexOf(A)>=0)&&(E[A]=T[A]);return E}function StatusListInner(T,_){var E=T.className,C=T.children,A=T.size,R=T.selected,I=T.onChange,F=I===void 0?noop$1:I,B=T.itemsTabIndex,U=_objectWithoutProperties(T,_excluded),V="".concat(prefix,"-status-list"),D=reactExports.useRef();reactExports.useImperativeHandle(_,function(){return{focus:function(z){var W=Array.from(D.current.querySelectorAll("li")),X=W.filter(function(Y){return Y.parentNode===D.current});typeof X[z]<"u"&&X[z].focus()}}});var O=B;return React.createElement("ul",_extends({ref:D},U,{className:classNames(V,E,_defineProperty({},"".concat(V,"--").concat(A),A))}),React.Children.map(C,function(L){var z={};R&&(z.selected=L.props.status===R),F&&(z.onClick=function(Y){F(L.props.status),L.onClick&&L.onClick(Y)});var W=function(K){F&&K.key==="Enter"&&K.shiftKey===!1&&K.altKey===!1&&F(L.props.status)},X=function(){if(typeof O=="number")return O>0?O++:O}();return React.createElement("li",{tabIndex:X,onKeyPress:W},React.cloneElement(L,z))}))}var StatusList=reactExports.forwardRef(StatusListInner);StatusList.displayName="StatusList";StatusList.propTypes={children:allowedChildren([Status]),selected:PropTypes.oneOf(StatusEnum),size:PropTypes.oneOf(SizeEnum),itemsTabIndex:PropTypes.number,className:PropTypes.string,onChange:PropTypes.func};const MessageList=reactExports.memo(({messages:T,messageListRef:_})=>{const E=reactExports.useRef(null),C=reactExports.useCallback(()=>{if(_.current){const{scrollHeight:A}=_.current,R=_.current.clientHeight,I=A-R;_.current.scrollTo({top:I+100,behavior:"smooth"})}},[_]);return reactExports.useEffect(()=>{C()},[T,C]),reactExports.useEffect(()=>{C()},[C]),jsxRuntimeExports.jsx(Box,{...sidebarStyles.chatHistoryPanel.messageList,ref:_,children:T.map((A,R)=>jsxRuntimeExports.jsx(Box,{ref:R===T.length-1?E:null,children:jsxRuntimeExports.jsx(ChatBubble,{message:A})},`${A.role}-${A.timestamp}-${A.id}`))})});MessageList.displayName="MessageList";function ChatHistoryPanel(){const{messages:T}=useChatHistory(),{confName:_}=useConfig(),{baseUrl:E}=useWebSocket(),C="Me",A=T.filter(R=>R.content&&R.content.trim().length>0);return jsxRuntimeExports.jsxs(Box,{h:"full",overflow:"hidden",bg:"gray.900",children:[jsxRuntimeExports.jsx(Global,{styles:chatPanelStyles}),jsxRuntimeExports.jsx(MainContainer,{children:jsxRuntimeExports.jsx(ChatContainer,{children:jsxRuntimeExports.jsx(MessageList$1,{children:A.length===0?jsxRuntimeExports.jsx(Box,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"whiteAlpha.500",fontSize:"sm",children:"No messages yet. Start a conversation!"}):A.map(R=>jsxRuntimeExports.jsx(Message,{model:{message:R.content,sentTime:R.timestamp,sender:R.role==="ai"?R.name||_||"AI":C,direction:R.role==="ai"?"incoming":"outgoing",position:"single"},avatarPosition:R.role==="ai"?"tl":"tr",avatarSpacer:!1,children:jsxRuntimeExports.jsx(Avatar,{children:R.role==="ai"?R.avatar?jsxRuntimeExports.jsx("img",{src:`${E}/avatars/${R.avatar}`,alt:"avatar",style:{width:"100%",height:"100%",borderRadius:"50%"}}):R.name&&R.name[0].toUpperCase()||_&&_[0].toUpperCase()||"A":C[0].toUpperCase()})},R.id))})})})]})}const Tooltip=reactExports.forwardRef((T,_)=>{const{showArrow:E,children:C,disabled:A,portalled:R,content:I,contentProps:F,portalRef:B,...U}=T;return A?C:jsxRuntimeExports.jsxs(TooltipRoot,{...U,children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:C}),jsxRuntimeExports.jsx(Portal,{disabled:!R,container:B,children:jsxRuntimeExports.jsx(TooltipPositioner,{children:jsxRuntimeExports.jsxs(TooltipContent,{ref:_,...F,children:[E&&jsxRuntimeExports.jsx(TooltipArrow,{children:jsxRuntimeExports.jsx(TooltipArrowTip,{})}),I]})})})]})}),useCameraPanel=()=>{const T=reactExports.useRef(null),[_,E]=reactExports.useState(""),[C,A]=reactExports.useState(!1),{isStreaming:R,stream:I,startCamera:F,stopCamera:B}=useCamera();return{videoRef:T,error:_,isHovering:C,isStreaming:R,stream:I,toggleCamera:async()=>{try{R?B():await F(),E("")}catch(O){let L="Unable to access camera";O instanceof Error&&(L=O.message),E(L)}},handleMouseEnter:()=>A(!0),handleMouseLeave:()=>A(!1)}};function LiveIndicator(){return jsxRuntimeExports.jsxs(Box,{color:"red.500",display:"flex",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(Box,{w:"8px",h:"8px",borderRadius:"full",bg:"red.500",animation:"pulse 2s infinite"}),jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",children:"Live"})]})}function CameraPlaceholder(){return jsxRuntimeExports.jsxs(Box,{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(FiCamera,{size:24}),jsxRuntimeExports.jsx(Text$1,{color:"whiteAlpha.600",fontSize:"sm",textAlign:"center",children:"Click to start camera"})]})}function VideoStream$1({videoRef:T,isStreaming:_}){return jsxRuntimeExports.jsx("video",{ref:T,autoPlay:!0,playsInline:!0,muted:!0,style:sidebarStyles.cameraPanel.video,..._?{}:{display:"none"}})}function CameraPanel(){const{videoRef:T,error:_,isHovering:E,isStreaming:C,stream:A,toggleCamera:R,handleMouseEnter:I,handleMouseLeave:F}=useCameraPanel();return reactExports.useEffect(()=>{T.current&&(T.current.srcObject=A)},[A]),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.cameraPanel.container,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.cameraPanel.header,children:C&&jsxRuntimeExports.jsx(LiveIndicator,{})}),jsxRuntimeExports.jsx(Tooltip,{showArrow:!0,content:C?"Click to stop camera":"Click to start camera",open:E&&!_,children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.cameraPanel.videoContainer,onClick:R,onMouseEnter:I,onMouseLeave:F,cursor:"pointer",position:"relative",_hover:{bg:"whiteAlpha.100"},children:_?jsxRuntimeExports.jsx(Text$1,{color:"red.300",fontSize:"sm",textAlign:"center",children:_}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(VideoStream$1,{videoRef:T,isStreaming:C}),!C&&jsxRuntimeExports.jsx(CameraPlaceholder,{})]})})})]})}function useCaptureScreen(){const T=reactExports.useRef(null),[_,E]=reactExports.useState(!1),{stream:C,isStreaming:A,error:R,startCapture:I,stopCapture:F}=useScreenCaptureContext(),B=()=>{A?F():I()},U=()=>E(!0),V=()=>E(!1);return reactExports.useEffect(()=>{T.current&&(T.current.srcObject=C)},[C]),{videoRef:T,error:R,isHovering:_,isStreaming:A,stream:C,toggleCapture:B,handleMouseEnter:U,handleMouseLeave:V}}function ScreenIndicator(){return jsxRuntimeExports.jsxs(Box,{color:"red.500",display:"flex",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(Box,{w:"8px",h:"8px",borderRadius:"full",bg:"red.500",animation:"pulse 2s infinite"}),jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",children:"Screen"})]})}function ScreenPlaceholder(){return jsxRuntimeExports.jsxs(Box,{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(FiMonitor,{size:24}),jsxRuntimeExports.jsx(Text$1,{color:"whiteAlpha.600",fontSize:"sm",textAlign:"center",children:"Click to start screen capture"})]})}function VideoStream({videoRef:T,isStreaming:_}){return jsxRuntimeExports.jsx("video",{ref:T,autoPlay:!0,playsInline:!0,muted:!0,style:sidebarStyles.screenPanel.video,..._?{}:{display:"none"}})}function ScreenPanel(){const{videoRef:T,error:_,isHovering:E,isStreaming:C,toggleCapture:A,handleMouseEnter:R,handleMouseLeave:I}=useCaptureScreen();return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.screenPanel.container,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.screenPanel.header,children:C&&jsxRuntimeExports.jsx(ScreenIndicator,{})}),jsxRuntimeExports.jsx(Tooltip,{showArrow:!0,content:C?"Click to stop screen capture":"Click to start screen capture",open:E&&!_,children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.screenPanel.screenContainer,onClick:A,onMouseEnter:R,onMouseLeave:I,cursor:"pointer",position:"relative",_hover:{bg:"whiteAlpha.100"},children:_?jsxRuntimeExports.jsx(Text$1,{color:"red.300",fontSize:"sm",textAlign:"center",children:_}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(VideoStream,{videoRef:T,isStreaming:C}),!C&&jsxRuntimeExports.jsx(ScreenPlaceholder,{})]})})})]})}function MusicPanel(){const[T,_]=reactExports.useState(""),[E,C]=reactExports.useState(!1),A=async()=>{if(T.trim()){C(!0);try{if(!(await fetch("http://localhost:12393/api/music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:T,id:window.ws_musicId})})).ok)throw new Error("伺服器錯誤");console.log("✅ 送出成功:",T),_("")}catch(I){console.error("❌ 送出失敗:",I.message)}finally{C(!1)}}};function R(){window.current_vocalSource.stop(),window.current_instrumentSource.stop(),window.stopTime=window.audioContext.currentTime-window.initStartTime,window.initStartTime=99999}return jsxRuntimeExports.jsxs(Box,{p:4,border:"1px solid",borderColor:"gray.600",borderRadius:"md",bg:"gray.800",children:[jsxRuntimeExports.jsx(Text$1,{fontSize:"lg",fontWeight:"bold",mb:2,color:"white",children:"播放"}),jsxRuntimeExports.jsx(Input,{id:"PlayMusic",placeholder:"輸入音樂網址",value:T,onChange:I=>_(I.target.value),mb:3,bg:"white",color:"black"}),jsxRuntimeExports.jsxs(Box,{textAlign:"right",children:[jsxRuntimeExports.jsx(Button$1,{colorScheme:"teal",onClick:A,disabled:!T.trim()||E,children:"送出"}),jsxRuntimeExports.jsx(Button$1,{id:"StopSing",colorScheme:"teal",onClick:R,children:"停止"})]})]})}function BottomTab(){return jsxRuntimeExports.jsxs(TabsRoot,{defaultValue:"camera",variant:"plain",...sidebarStyles.bottomTab.container,children:[jsxRuntimeExports.jsxs(TabsList,{...sidebarStyles.bottomTab.list,children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"camera",...sidebarStyles.bottomTab.trigger,children:[jsxRuntimeExports.jsx(FiCamera,{}),"Camera"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"screen",...sidebarStyles.bottomTab.trigger,children:[jsxRuntimeExports.jsx(FiMonitor,{}),"Screen"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"music",...sidebarStyles.bottomTab.trigger,children:[jsxRuntimeExports.jsx(FiMusic,{}),"Music"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"camera",children:jsxRuntimeExports.jsx(CameraPanel,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"screen",children:jsxRuntimeExports.jsx(ScreenPanel,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"music",children:jsxRuntimeExports.jsx(MusicPanel,{})})]})}const minutesInMonth=43200,minutesInDay=1440,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(T,_){return typeof T=="function"?T(_):T&&typeof T=="object"&&constructFromSymbol in T?T[constructFromSymbol](_):T instanceof Date?new T.constructor(_):new Date(_)}function toDate(T,_){return constructFrom(T,T)}let defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(T){const _=toDate(T),E=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes(),_.getSeconds(),_.getMilliseconds()));return E.setUTCFullYear(_.getFullYear()),+T-+E}function normalizeDates(T,..._){const E=constructFrom.bind(null,T||_.find(C=>typeof C=="object"));return _.map(E)}function compareAsc(T,_){const E=+toDate(T)-+toDate(_);return E<0?-1:E>0?1:E}function constructNow(T){return constructFrom(T,Date.now())}function differenceInCalendarMonths(T,_,E){const[C,A]=normalizeDates(E==null?void 0:E.in,T,_),R=C.getFullYear()-A.getFullYear(),I=C.getMonth()-A.getMonth();return R*12+I}function getRoundingMethod(T){return _=>{const C=(T?Math[T]:Math.trunc)(_);return C===0?0:C}}function differenceInMilliseconds(T,_){return+toDate(T)-+toDate(_)}function endOfDay(T,_){const E=toDate(T);return E.setHours(23,59,59,999),E}function endOfMonth(T,_){const E=toDate(T),C=E.getMonth();return E.setFullYear(E.getFullYear(),C+1,0),E.setHours(23,59,59,999),E}function isLastDayOfMonth(T,_){const E=toDate(T);return+endOfDay(E)==+endOfMonth(E)}function differenceInMonths(T,_,E){const[C,A,R]=normalizeDates(E==null?void 0:E.in,T,T,_),I=compareAsc(A,R),F=Math.abs(differenceInCalendarMonths(A,R));if(F<1)return 0;A.getMonth()===1&&A.getDate()>27&&A.setDate(30),A.setMonth(A.getMonth()-I*F);let B=compareAsc(A,R)===-I;isLastDayOfMonth(C)&&F===1&&compareAsc(C,R)===1&&(B=!1);const U=I*(F-+B);return U===0?0:U}function differenceInSeconds(T,_,E){const C=differenceInMilliseconds(T,_)/1e3;return getRoundingMethod(E==null?void 0:E.roundingMethod)(C)}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$1=(T,_,E)=>{let C;const A=formatDistanceLocale[T];return typeof A=="string"?C=A:_===1?C=A.one:C=A.other.replace("{{count}}",_.toString()),E!=null&&E.addSuffix?E.comparison&&E.comparison>0?"in "+C:C+" ago":C};function buildFormatLongFn(T){return(_={})=>{const E=_.width?String(_.width):T.defaultWidth;return T.formats[E]||T.formats[T.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(T,_,E,C)=>formatRelativeLocale[T];function buildLocalizeFn(T){return(_,E)=>{const C=E!=null&&E.context?String(E.context):"standalone";let A;if(C==="formatting"&&T.formattingValues){const I=T.defaultFormattingWidth||T.defaultWidth,F=E!=null&&E.width?String(E.width):I;A=T.formattingValues[F]||T.formattingValues[I]}else{const I=T.defaultWidth,F=E!=null&&E.width?String(E.width):T.defaultWidth;A=T.values[F]||T.values[I]}const R=T.argumentCallback?T.argumentCallback(_):_;return A[R]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(T,_)=>{const E=Number(T),C=E%100;if(C>20||C<10)switch(C%10){case 1:return E+"st";case 2:return E+"nd";case 3:return E+"rd"}return E+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:T=>T-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(T){return(_,E={})=>{const C=E.width,A=C&&T.matchPatterns[C]||T.matchPatterns[T.defaultMatchWidth],R=_.match(A);if(!R)return null;const I=R[0],F=C&&T.parsePatterns[C]||T.parsePatterns[T.defaultParseWidth],B=Array.isArray(F)?findIndex(F,D=>D.test(I)):findKey(F,D=>D.test(I));let U;U=T.valueCallback?T.valueCallback(B):B,U=E.valueCallback?E.valueCallback(U):U;const V=_.slice(I.length);return{value:U,rest:V}}}function findKey(T,_){for(const E in T)if(Object.prototype.hasOwnProperty.call(T,E)&&_(T[E]))return E}function findIndex(T,_){for(let E=0;E<T.length;E++)if(_(T[E]))return E}function buildMatchPatternFn(T){return(_,E={})=>{const C=_.match(T.matchPattern);if(!C)return null;const A=C[0],R=_.match(T.parsePattern);if(!R)return null;let I=T.valueCallback?T.valueCallback(R[0]):R[0];I=E.valueCallback?E.valueCallback(I):I;const F=_.slice(A.length);return{value:I,rest:F}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:T=>parseInt(T,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:T=>T+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance:formatDistance$1,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function formatDistance(T,_,E){const C=getDefaultOptions(),A=(E==null?void 0:E.locale)??C.locale??enUS,R=2520,I=compareAsc(T,_);if(isNaN(I))throw new RangeError("Invalid time value");const F=Object.assign({},E,{addSuffix:E==null?void 0:E.addSuffix,comparison:I}),[B,U]=normalizeDates(E==null?void 0:E.in,...I>0?[_,T]:[T,_]),V=differenceInSeconds(U,B),D=(getTimezoneOffsetInMilliseconds(U)-getTimezoneOffsetInMilliseconds(B))/1e3,O=Math.round((V-D)/60);let L;if(O<2)return E!=null&&E.includeSeconds?V<5?A.formatDistance("lessThanXSeconds",5,F):V<10?A.formatDistance("lessThanXSeconds",10,F):V<20?A.formatDistance("lessThanXSeconds",20,F):V<40?A.formatDistance("halfAMinute",0,F):V<60?A.formatDistance("lessThanXMinutes",1,F):A.formatDistance("xMinutes",1,F):O===0?A.formatDistance("lessThanXMinutes",1,F):A.formatDistance("xMinutes",O,F);if(O<45)return A.formatDistance("xMinutes",O,F);if(O<90)return A.formatDistance("aboutXHours",1,F);if(O<minutesInDay){const z=Math.round(O/60);return A.formatDistance("aboutXHours",z,F)}else{if(O<R)return A.formatDistance("xDays",1,F);if(O<minutesInMonth){const z=Math.round(O/minutesInDay);return A.formatDistance("xDays",z,F)}else if(O<minutesInMonth*2)return L=Math.round(O/minutesInMonth),A.formatDistance("aboutXMonths",L,F)}if(L=differenceInMonths(U,B),L<12){const z=Math.round(O/minutesInMonth);return A.formatDistance("xMonths",z,F)}else{const z=L%12,W=Math.trunc(L/12);return z<3?A.formatDistance("aboutXYears",W,F):z<9?A.formatDistance("overXYears",W,F):A.formatDistance("almostXYears",W+1,F)}}function formatDistanceToNow(T,_){return formatDistance(T,constructNow(T),_)}const DrawerContent=reactExports.forwardRef((T,_)=>{const{children:E,portalled:C=!0,portalRef:A,offset:R,...I}=T;return jsxRuntimeExports.jsx(Portal,{disabled:!C,container:A,children:jsxRuntimeExports.jsx(DrawerPositioner,{padding:R,children:jsxRuntimeExports.jsx(DrawerContent$1,{ref:_,...I,asChild:!1,children:E})})})}),DrawerCloseTrigger=reactExports.forwardRef((T,_)=>jsxRuntimeExports.jsx(DrawerCloseTrigger$1,{position:"absolute",top:"2",insetEnd:"2",...T,asChild:!0,children:jsxRuntimeExports.jsx(CloseButton,{size:"sm",ref:_})})),DrawerTrigger=DrawerTrigger$1,DrawerRoot=DrawerRoot$1,DrawerFooter=DrawerFooter$1,DrawerHeader=DrawerHeader$1,DrawerBody=DrawerBody$1,DrawerBackdrop=DrawerBackdrop$1,DrawerTitle=DrawerTitle$1,DrawerActionTrigger=DrawerActionTrigger$1,useHistoryDrawer=()=>{const[T,_]=reactExports.useState(!1),{historyList:E,currentHistoryUid:C,setCurrentHistoryUid:A,setHistoryList:R,messages:I,updateHistoryList:F}=useChatHistory(),{sendMessage:B}=useWebSocket();return{open:T,setOpen:_,historyList:E,currentHistoryUid:C,fetchAndSetHistory:O=>{if(!(!O||O===C)){if(C&&I.length>0){const L=I[I.length-1];F(C,L)}A(O),B({type:"fetch-and-set-history",history_uid:O})}},deleteHistory:O=>{if(O===C){toaster.create({title:"Cannot delete current chat history",type:"warning",duration:2e3});return}B({type:"delete-history",history_uid:O}),R(E.filter(L=>L.uid!==O))},getLatestMessageContent:O=>{var L;if(O.uid===C&&I.length>0){const z=I[I.length-1];return{content:z.content,timestamp:z.timestamp}}return{content:((L=O.latest_message)==null?void 0:L.content)||"",timestamp:O.timestamp}}}},HistoryItem=reactExports.memo(({isSelected:T,latestMessage:_,onSelect:E,onDelete:C,isDeleteDisabled:A})=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.historyItem,...T?sidebarStyles.historyDrawer.historyItemSelected:{},onClick:E,children:[jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.historyHeader,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.timestamp,children:_.timestamp?formatDistanceToNow(new Date(_.timestamp),{addSuffix:!0}):"No messages"}),jsxRuntimeExports.jsx(Button$1,{onClick:C,disabled:A,...sidebarStyles.historyDrawer.deleteButton,children:jsxRuntimeExports.jsx(FiTrash2,{})})]}),_.content&&jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.messagePreview,children:_.content})]}));HistoryItem.displayName="HistoryItem";function HistoryDrawer({children:T}){const{open:_,setOpen:E,historyList:C,currentHistoryUid:A,fetchAndSetHistory:R,deleteHistory:I,getLatestMessageContent:F}=useHistoryDrawer();return jsxRuntimeExports.jsxs(DrawerRoot,{open:_,onOpenChange:B=>E(B.open),placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop,{}),jsxRuntimeExports.jsx(DrawerTrigger,{asChild:!0,children:T}),jsxRuntimeExports.jsxs(DrawerContent,{style:sidebarStyles.historyDrawer.drawer.content,children:[jsxRuntimeExports.jsxs(DrawerHeader,{children:[jsxRuntimeExports.jsx(DrawerTitle,{style:sidebarStyles.historyDrawer.drawer.title,children:"Chat History List"}),jsxRuntimeExports.jsx(DrawerCloseTrigger,{style:sidebarStyles.historyDrawer.drawer.closeButton})]}),jsxRuntimeExports.jsx(DrawerBody,{children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.listContainer,children:C.map(B=>jsxRuntimeExports.jsx(HistoryItem,{isSelected:A===B.uid,latestMessage:F(B),onSelect:()=>R(B.uid),onDelete:U=>{U.stopPropagation(),I(B.uid)},isDeleteDisabled:A===B.uid},B.uid))})}),jsxRuntimeExports.jsx(DrawerFooter,{children:jsxRuntimeExports.jsx(DrawerActionTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button$1,{...sidebarStyles.historyDrawer.drawer.actionButton,children:"Close"})})})]})]})}const useSidebar=()=>{const{open:T,onOpen:_,onClose:E}=useDisclosure(),{sendMessage:C}=useWebSocket(),{interrupt:A}=useInterrupt(),{currentHistoryUid:R,messages:I,updateHistoryList:F}=useChatHistory();return{settingsOpen:T,onSettingsOpen:_,onSettingsClose:E,createNewHistory:()=>{if(R&&I.length>0){const U=I[I.length-1];F(R,U)}A(),C({type:"create-new-history"})}}},ClipboardIcon=reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardIndicator,{copied:jsxRuntimeExports.jsx(LuCheck,{}),..._,ref:E,children:jsxRuntimeExports.jsx(LuClipboard,{})})}),ClipboardCopyText=reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardIndicator,{copied:"Copied",..._,ref:E,children:"Copy"})});reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardLabel,{textStyle:"sm",fontWeight:"medium",display:"inline-block",mb:"1",..._,ref:E})});const ClipboardButton=reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button$1,{ref:E,size:"sm",variant:"surface",..._,children:[jsxRuntimeExports.jsx(ClipboardIcon,{}),jsxRuntimeExports.jsx(ClipboardCopyText,{})]})})});reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button$1,{unstyled:!0,variant:"plain",size:"xs",display:"inline-flex",alignItems:"center",gap:"2",ref:E,..._,children:[jsxRuntimeExports.jsx(LuLink,{}),jsxRuntimeExports.jsx(ClipboardCopyText,{})]})})});reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(IconButton,{ref:E,size:"xs",variant:"subtle",..._,children:[jsxRuntimeExports.jsx(ClipboardIcon,{}),jsxRuntimeExports.jsx(ClipboardCopyText,{srOnly:!0})]})})});reactExports.forwardRef(function T(_,E){return jsxRuntimeExports.jsx(ClipboardInput,{asChild:!0,children:jsxRuntimeExports.jsx(Input,{ref:E,..._})})});const ClipboardRoot=ClipboardRoot$1,useGroupDrawer=()=>{const[T,_]=reactExports.useState(!1),[E,C]=reactExports.useState(""),{sendMessage:A}=useWebSocket(),R=reactExports.useCallback(()=>{A({type:"request-group-info"})},[A]),I=reactExports.useCallback(async()=>{if(!E.trim()){toaster.create({title:"Please enter a valid UUID",type:"error",duration:2e3});return}A({type:"add-client-to-group",invitee_uid:E.trim()}),C(""),setTimeout(R,100)},[E,A,R]),F=reactExports.useCallback(U=>{A({type:"remove-client-from-group",target_uid:U}),setTimeout(R,100)},[A,R]),B=reactExports.useCallback(U=>{A({type:"remove-client-from-group",target_uid:U}),setTimeout(R,100)},[A,R]);return{isOpen:T,setIsOpen:_,inviteUid:E,setInviteUid:C,handleInvite:I,handleRemove:F,handleLeaveGroup:B,requestGroupInfo:R}},GroupContext=reactExports.createContext(null);function GroupProvider({children:T}){const[_,E]=reactExports.useState(""),[C,A]=reactExports.useState([]),[R,I]=reactExports.useState(!1),F=()=>{A([]),I(!1)},B=reactExports.useMemo(()=>C.includes(_)?[_,...C.filter(U=>U!==_)]:C,[C,_]);return jsxRuntimeExports.jsx(GroupContext.Provider,{value:{selfUid:_,groupMembers:C,isOwner:R,setSelfUid:E,setGroupMembers:A,setIsOwner:I,sortedGroupMembers:B,resetGroupState:F},children:T})}function useGroup(){const T=reactExports.useContext(GroupContext);if(!T)throw new Error("useGroup must be used within a GroupProvider");return T}function GroupDrawer({children:T}){const{selfUid:_,sortedGroupMembers:E,isOwner:C}=useGroup(),{isOpen:A,setIsOpen:R,inviteUid:I,setInviteUid:F,handleInvite:B,handleRemove:U,handleLeaveGroup:V,requestGroupInfo:D}=useGroupDrawer();return jsxRuntimeExports.jsxs(DrawerRoot,{open:A,onOpenChange:O=>{R(O.open),O.open&&D()},placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop,{}),jsxRuntimeExports.jsx(DrawerTrigger,{asChild:!0,children:T}),jsxRuntimeExports.jsxs(DrawerContent,{style:sidebarStyles.historyDrawer.drawer.content,children:[jsxRuntimeExports.jsxs(DrawerHeader,{children:[jsxRuntimeExports.jsx(DrawerTitle,{style:sidebarStyles.historyDrawer.drawer.title,children:"Group Management"}),jsxRuntimeExports.jsx(DrawerCloseTrigger,{style:sidebarStyles.historyDrawer.drawer.closeButton})]}),jsxRuntimeExports.jsx(DrawerBody,{children:jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.listContainer,children:[jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.section,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.sectionTitle,children:"Your UUID"}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.memberItem,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.memberText,children:_}),jsxRuntimeExports.jsx(ClipboardRoot,{value:_,children:jsxRuntimeExports.jsx(ClipboardButton,{...sidebarStyles.groupDrawer.clipboardButton,size:"sm"})})]})]}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.section,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.sectionTitle,children:"Invite Member From Other Clients"}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.inviteBox,children:[jsxRuntimeExports.jsx(Input,{value:I,onChange:O=>F(O.target.value),placeholder:"Enter member UUID",...sidebarStyles.groupDrawer.input}),jsxRuntimeExports.jsx(Button$1,{onClick:B,...sidebarStyles.groupDrawer.button,children:"Invite"})]})]}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.section,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.sectionTitle,children:"Members"}),jsxRuntimeExports.jsx(Box,{...sidebarStyles.groupDrawer.memberList,children:E.map(O=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.memberItem,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.memberText,children:O===_?`${O} (You)`:O}),(C&&O!==_||!C&&O===_)&&jsxRuntimeExports.jsx(IconButton,{"aria-label":O===_?"Leave group":"Remove member",onClick:()=>O===_?V(_):U(O),...sidebarStyles.groupDrawer.removeButton,size:"sm",title:O===_?"Leave group":"Remove member",children:O===_?"Leave":jsxRuntimeExports.jsx(FiX,{})})]},O))})]})]})}),jsxRuntimeExports.jsx(DrawerFooter,{children:jsxRuntimeExports.jsx(DrawerActionTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button$1,{...sidebarStyles.historyDrawer.drawer.actionButton,children:"Close"})})})]})]})}const ToggleButton$1=reactExports.memo(({isCollapsed:T,onToggle:_})=>jsxRuntimeExports.jsx(Box,{...sidebarStyles.sidebar.toggleButton,style:{transform:T?"rotate(180deg)":"rotate(0deg)"},onClick:_,children:jsxRuntimeExports.jsx(FiChevronLeft,{})}));ToggleButton$1.displayName="ToggleButton";const HeaderButtons=reactExports.memo(({onSettingsOpen:T,onNewHistory:_})=>jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,children:[jsxRuntimeExports.jsx(Button$1,{onClick:T,children:jsxRuntimeExports.jsx(FiSettings,{})}),jsxRuntimeExports.jsx(GroupDrawer,{children:jsxRuntimeExports.jsx(Button$1,{children:jsxRuntimeExports.jsx(FiUsers,{})})}),jsxRuntimeExports.jsx(HistoryDrawer,{children:jsxRuntimeExports.jsx(Button$1,{children:jsxRuntimeExports.jsx(FiClock,{})})}),jsxRuntimeExports.jsx(Button$1,{onClick:_,children:jsxRuntimeExports.jsx(FiPlus,{})})]}));HeaderButtons.displayName="HeaderButtons";const SidebarContent=reactExports.memo(({onSettingsOpen:T,onNewHistory:_})=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.sidebar.content,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.sidebar.header,children:jsxRuntimeExports.jsx(HeaderButtons,{onSettingsOpen:T,onNewHistory:_})}),jsxRuntimeExports.jsx(ChatHistoryPanel,{}),jsxRuntimeExports.jsx(BottomTab,{})]}));SidebarContent.displayName="SidebarContent";function Sidebar({isCollapsed:T=!1,onToggle:_}){const{settingsOpen:E,onSettingsOpen:C,onSettingsClose:A,createNewHistory:R}=useSidebar();return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.sidebar.container(T),children:[jsxRuntimeExports.jsx(ToggleButton$1,{isCollapsed:T,onToggle:_}),!T&&!E&&jsxRuntimeExports.jsx(SidebarContent,{onSettingsOpen:C,onNewHistory:R}),!T&&E&&jsxRuntimeExports.jsx(SettingUI,{open:E,onClose:A,onToggle:_})]})}function BsMicFill(T){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z"},child:[]},{tag:"path",attr:{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5"},child:[]}]})(T)}function BsMicMuteFill(T){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13 8c0 .564-.094 1.107-.266 1.613l-.814-.814A4 4 0 0 0 12 8V7a.5.5 0 0 1 1 0zm-5 4c.818 0 1.578-.245 2.212-.667l.718.719a5 5 0 0 1-2.43.923V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 1 0v1a4 4 0 0 0 4 4m3-9v4.879L5.158 2.037A3.001 3.001 0 0 1 11 3"},child:[]},{tag:"path",attr:{d:"M9.486 10.607 5 6.12V8a3 3 0 0 0 4.486 2.607m-7.84-9.253 12 12 .708-.708-12-12z"},child:[]}]})(T)}function BsPaperclip(T){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z"},child:[]}]})(T)}function IoHandRightSharp(T){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M82.42 209.08c15.06-6.62 32.38 1.31 38.5 17.62L156 312h11.27V80c0-17.6 13.3-32 29.55-32 16.26 0 29.55 14.4 29.55 32v151.75l14.78.25V32c0-17.6 13.3-32 29.55-32 16.3 0 29.55 14.4 29.55 32v199.75L315 232V64c0-17.6 13.3-32 29.55-32 16.26 0 29.55 14.4 29.55 32v183.75l14.78.25V128c0-17.6 13.3-32 29.55-32C434.7 96 448 110.4 448 128v216c0 75.8-37.13 168-169 168-40.8 0-79.42-7-100.66-21a121.41 121.41 0 0 1-33.72-33.31 138 138 0 0 1-16-31.78L66.16 250.77c-6.11-16.31 1.2-35.06 16.26-41.69z"},child:[]}]})(T)}const InputGroup=reactExports.forwardRef((T,_)=>{const{startElement:E,startElementProps:C,endElement:A,endElementProps:R,children:I,startOffset:F="6px",endOffset:B="6px",...U}=T,V=reactExports.Children.only(I);return jsxRuntimeExports.jsxs(Group,{ref:_,...U,children:[E&&jsxRuntimeExports.jsx(InputElement,{pointerEvents:"none",...C,children:E}),reactExports.cloneElement(V,{...E&&{ps:`calc(var(--input-height) - ${F})`},...A&&{pe:`calc(var(--input-height) - ${B})`},...I.props}),A&&jsxRuntimeExports.jsx(InputElement,{placement:"end",...R,children:A})]})}),footerStyles={footer:{container:T=>({bg:T?"transparent":"gray.800",borderTopRadius:T?"none":"lg",transform:T?"translateY(calc(100% - 24px))":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:"100%",position:"relative",overflow:T?"visible":"hidden",pb:"4"}),toggleButton:{height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"whiteAlpha.700",_hover:{color:"white"},bg:"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},actionButton:{borderRadius:"12px",width:"50px",height:"50px",minW:"50px"},input:{bg:"gray.700",border:"none",height:"80px",borderRadius:"12px",fontSize:"18px",pl:"12",pr:"4",color:"whiteAlpha.900",_placeholder:{color:"whiteAlpha.500"},_focus:{border:"none",bg:"gray.700"},resize:"none",minHeight:"80px",maxHeight:"80px",py:"0",display:"flex",alignItems:"center",paddingTop:"28px",lineHeight:"1.4"},attachButton:{position:"absolute",left:"1",top:"50%",transform:"translateY(-50%)",color:"whiteAlpha.700",zIndex:2,_hover:{bg:"transparent",color:"white"}}},aiIndicator:{container:{bg:"#7C5CFF",color:"white",width:"110px",height:"30px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",overflow:"hidden"},text:{fontSize:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}};function AIStateIndicator(){const{aiState:T}=useAiState(),_=footerStyles.aiIndicator;return jsxRuntimeExports.jsx(Box,{..._.container,children:jsxRuntimeExports.jsx(Text$1,{..._.text,children:T})})}function useTextInput(){const[T,_]=reactExports.useState(""),[E,C]=reactExports.useState(!1),A=useWebSocket(),{aiState:R,setAiState:I}=useAiState(),{interrupt:F}=useInterrupt(),{appendHumanMessage:B}=useChatHistory(),{stopMic:U,autoStopMic:V}=useVAD(),{captureAllMedia:D}=useMediaCapture(),O=Y=>{_(Y.target.value)},L=async()=>{if(!T.trim()||!A)return;R==="thinking-speaking"&&F();const Y=await D();B(T.trim()),A.sendMessage({type:"text-input",text:T.trim(),images:Y}),I("thinking-speaking"),V&&U(),_("")};return{inputText:T,setInputText:O,handleSend:L,handleKeyPress:Y=>{E||Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),L())},handleCompositionStart:()=>C(!0),handleCompositionEnd:()=>C(!1)}}const useFooter=()=>{const{inputText:T,setInputText:_,handleKeyPress:E,handleCompositionStart:C,handleCompositionEnd:A}=useTextInput(),{interrupt:R}=useInterrupt(),{startMic:I,autoStartMicOn:F}=useVAD(),{handleMicToggle:B,micOn:U}=useMicToggle(),{setAiState:V,aiState:D}=useAiState(),{sendTriggerSignal:O}=useTriggerSpeak(),{settings:L}=useProactiveSpeak();return{inputValue:T,handleInputChange:Y=>{_({target:{value:Y.target.value}}),V(AiStateEnum.WAITING)},handleKeyPress:Y=>{E(Y)},handleCompositionStart:C,handleCompositionEnd:A,handleInterrupt:()=>{D===AiStateEnum.THINKING_SPEAKING?(R(),F&&I()):L.allowButtonTrigger&&O(-1)},handleMicToggle:B,micOn:U}},ToggleButton=reactExports.memo(({isCollapsed:T,onToggle:_})=>jsxRuntimeExports.jsx(Box,{...footerStyles.footer.toggleButton,onClick:_,color:"whiteAlpha.500",style:{transform:T?"rotate(180deg)":"rotate(0deg)"},children:jsxRuntimeExports.jsx(FiChevronDown,{})}));ToggleButton.displayName="ToggleButton";const ActionButtons=reactExports.memo(({micOn:T,onMicToggle:_,onInterrupt:E})=>jsxRuntimeExports.jsxs(HStack,{gap:2,children:[jsxRuntimeExports.jsx(IconButton,{bg:T?"green.500":"red.500",...footerStyles.footer.actionButton,onClick:_,children:T?jsxRuntimeExports.jsx(BsMicFill,{}):jsxRuntimeExports.jsx(BsMicMuteFill,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Raise hand",bg:"yellow.500",...footerStyles.footer.actionButton,onClick:E,children:jsxRuntimeExports.jsx(IoHandRightSharp,{size:"24"})})]}));ActionButtons.displayName="ActionButtons";const MessageInput=reactExports.memo(({value:T,onChange:_,onKeyDown:E,onCompositionStart:C,onCompositionEnd:A})=>jsxRuntimeExports.jsx(InputGroup,{flex:1,children:jsxRuntimeExports.jsxs(Box,{position:"relative",width:"100%",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Attach file",variant:"ghost",...footerStyles.footer.attachButton,children:jsxRuntimeExports.jsx(BsPaperclip,{size:"24"})}),jsxRuntimeExports.jsx(Textarea,{value:T,onChange:_,onKeyDown:E,onCompositionStart:C,onCompositionEnd:A,placeholder:"Type your message...",...footerStyles.footer.input})]})}));MessageInput.displayName="MessageInput";function Footer({isCollapsed:T=!1,onToggle:_}){const{inputValue:E,handleInputChange:C,handleKeyPress:A,handleCompositionStart:R,handleCompositionEnd:I,handleInterrupt:F,handleMicToggle:B,micOn:U}=useFooter();return jsxRuntimeExports.jsxs(Box,{...footerStyles.footer.container(T),children:[jsxRuntimeExports.jsx(ToggleButton,{isCollapsed:T,onToggle:_}),jsxRuntimeExports.jsx(Box,{pt:"0",px:"4",children:jsxRuntimeExports.jsxs(HStack,{width:"100%",gap:4,children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Box,{mb:"1.5",children:jsxRuntimeExports.jsx(AIStateIndicator,{})}),jsxRuntimeExports.jsx(ActionButtons,{micOn:U,onMicToggle:B,onInterrupt:F})]}),jsxRuntimeExports.jsx(MessageInput,{value:E,onChange:C,onKeyDown:A,onCompositionStart:R,onCompositionEnd:I})]})})]})}const isElectron=window.api!==void 0,getAppHeight=()=>typeof window<"u"&&/Mobi|Android/i.test(navigator.userAgent)?`${window.innerHeight}px`:isElectron?"calc(100vh - 30px)":"100vh",layoutStyles={appContainer:{width:"100vw",height:getAppHeight(),bg:"gray.900",color:"white",overflow:"hidden",position:"relative",display:"flex",flexDirection:{base:"column",md:"row"}},sidebar:{position:"relative",width:{base:"100%",md:"440px"},height:{base:"auto",md:"100%"},bg:"gray.800",borderRight:"1px solid",borderColor:"whiteAlpha.200",overflow:"hidden",flexShrink:0,transition:"all 0.2s"},mainContent:{flex:1,height:{base:"calc(100% - 120px)",md:"100%"},position:"relative",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",overflow:"hidden"},footer:{width:"100%",height:{base:"100px",md:"120px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",position:"relative",zIndex:1},collapsedFooter:{height:{base:"20px",md:"24px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},windowsTitleBar:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"30px",backgroundColor:"gray.800",paddingX:"10px",css:{"-webkit-app-region":"drag"}},macTitleBar:{display:"flex",alignItems:"center",justifyContent:"center",height:"30px",backgroundColor:"gray.800",css:{"-webkit-app-region":"drag","-webkit-user-select":"none"}},titleBarTitle:{fontSize:"sm",color:"whiteAlpha.800",textAlign:"center"},titleBarButtons:{display:"flex",gap:"1"},titleBarButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"whiteAlpha.200"}},closeButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"red.500"}}};function WebSocketHandler({children:T}){const[_,E]=reactExports.useState("CLOSED"),[C,A]=useLocalStorage("wsUrl",defaultWsUrl),[R,I]=useLocalStorage("baseUrl",defaultBaseUrl),{aiState:F,setAiState:B,backendSynthComplete:U,setBackendSynthComplete:V}=useAiState(),{setModelInfo:D}=useLive2DConfig(),{setSubtitleText:O}=useSubtitle(),{clearResponse:L,setForceNewMessage:z}=useChatHistory(),{addAudioTask:W}=useAudioTask(),X=useBgUrl(),{confUid:Y,setConfName:K,setConfUid:Q,setConfigFiles:ee}=useConfig(),[J,ie]=reactExports.useState(void 0),{setSelfUid:re,setGroupMembers:se,setIsOwner:ne}=useGroup(),{startMic:oe,stopMic:fe,autoStartMicOnConvEnd:he}=useVAD(),ge=reactExports.useRef(he),{interrupt:ye}=useInterrupt();reactExports.useEffect(()=>{ge.current=he},[he]),reactExports.useEffect(()=>{J&&(D(J),ie(void 0))},[J,D,Y]);const{setCurrentHistoryUid:we,setMessages:le,setHistoryList:de,appendHumanMessage:ce}=useChatHistory(),ve=reactExports.useCallback(xe=>{switch(xe){case"start-mic":console.log("Starting microphone..."),oe();break;case"stop-mic":console.log("Stopping microphone..."),fe();break;case"conversation-chain-start":B("thinking-speaking"),audioTaskQueue.clearQueue(),L();break;case"conversation-chain-end":audioTaskQueue.addTask(()=>new Promise(Ae=>{B(De=>De==="thinking-speaking"?(ge.current&&oe(),"idle"):De),Ae()}));break;default:console.warn("Unknown control command:",xe)}},[B,L,z,oe,fe]),be=reactExports.useCallback(xe=>{var Ae,De;switch(console.log("Received message from server:",xe),xe.type){case"control":xe.text&&ve(xe.text);break;case"set-model-and-conf":if(B("loading"),xe.conf_name&&K(xe.conf_name),xe.conf_uid&&(Q(xe.conf_uid),console.log("confUid",xe.conf_uid)),xe.client_uid&&re(xe.client_uid),ie(xe.model_info),xe.model_info&&!xe.model_info.url.startsWith("http")){const Ie=R+xe.model_info.url;xe.model_info.url=Ie}B("idle");break;case"full-text":xe.text&&O(xe.text);break;case"config-files":xe.configs&&ee(xe.configs);break;case"config-switched":B("idle"),O("New Character Loaded"),toaster.create({title:"Character switched",type:"success",duration:2e3}),wsService.sendMessage({type:"fetch-history-list"}),wsService.sendMessage({type:"create-new-history"});break;case"background-files":xe.files&&(X==null||X.setBackgroundFiles(xe.files));break;case"audio":F==="interrupted"||F==="listening"?console.log("Audio playback intercepted. Sentence:",(Ae=xe.display_text)==null?void 0:Ae.text):(console.log("actions",xe.actions),W({audioBase64:xe.audio||"",volumes:xe.volumes||[],sliceLength:xe.slice_length||0,displayText:xe.display_text||null,expressions:((De=xe.actions)==null?void 0:De.expressions)||null,forwarded:xe.forwarded||!1}));break;case"history-data":xe.messages&&le(xe.messages),toaster.create({title:"History loaded",type:"success",duration:2e3});break;case"new-history-created":if(B("idle"),O("New Conversation Started"),xe.history_uid){we(xe.history_uid),le([]);const Ie={uid:xe.history_uid,latest_message:null,timestamp:new Date().toISOString()};de(je=>[Ie,...je]),toaster.create({title:"New chat history created",type:"success",duration:2e3})}break;case"history-deleted":toaster.create({title:xe.success?"History deleted successfully":"Failed to delete history",type:xe.success?"success":"error",duration:2e3});break;case"history-list":xe.histories&&(de(xe.histories),xe.histories.length>0&&we(xe.histories[0].uid));break;case"user-input-transcription":console.log("user-input-transcription: ",xe.text),xe.text&&ce(xe.text);break;case"error":toaster.create({title:xe.message,type:"error",duration:2e3});break;case"group-update":console.log("Received group-update:",xe.members),xe.members&&se(xe.members),xe.is_owner!==void 0&&ne(xe.is_owner);break;case"group-operation-result":toaster.create({title:xe.message,type:xe.success?"success":"error",duration:2e3});break;case"backend-synth-complete":V(!0);break;case"conversation-chain-end":audioTaskQueue.hasTask()||B(Ie=>Ie==="thinking-speaking"?"idle":Ie);break;case"force-new-message":z(!0);break;case"interrupt-signal":ye(!1);break;default:console.warn("Unknown message type:",xe.type)}},[F,W,ce,R,X,B,K,Q,ee,we,de,le,D,O,oe,fe,re,se,ne,U,V,L]);reactExports.useEffect(()=>{wsService.connect(C)},[C]),reactExports.useEffect(()=>{const xe=wsService.onStateChange(E),Ae=wsService.onMessage(be);return()=>{xe.unsubscribe(),Ae.unsubscribe()}},[C,be]);const me=reactExports.useMemo(()=>({sendMessage:wsService.sendMessage.bind(wsService),wsState:_,reconnect:()=>wsService.connect(C),wsUrl:C,setWsUrl:A,baseUrl:R,setBaseUrl:I}),[_,C,R]);return jsxRuntimeExports.jsxs(WebSocketContext.Provider,{value:me,children:[T,jsxRuntimeExports.jsx("button",{id:"asd",onClick:()=>{be({type:"audio",audio:"",volumes:[1],slice_length:200,display_text:{text:"這是一段測試語音",name:"TestBot",avatar:"avatar.png"},actions:{expressions:["smile"]},forwarded:!1})},children:"測試 Audio 播放"})]})}function TitleBar(){var B;const[T,_]=reactExports.useState(!1),[E,C]=reactExports.useState(!1),A=((B=window.electron)==null?void 0:B.process.platform)==="darwin";reactExports.useEffect(()=>{var D,O;const U=(L,z)=>{_(z)},V=(L,z)=>{C(z)};return(D=window.electron)==null||D.ipcRenderer.on("window-maximized-change",U),(O=window.electron)==null||O.ipcRenderer.on("window-fullscreen-change",V),()=>{var L,z;(L=window.electron)==null||L.ipcRenderer.removeAllListeners("window-maximized-change"),(z=window.electron)==null||z.ipcRenderer.removeAllListeners("window-fullscreen-change")}},[]);const R=()=>{var U,V;E?(U=window.electron)==null||U.ipcRenderer.send("window-unfullscreen"):(V=window.electron)==null||V.ipcRenderer.send("window-maximize")},I=()=>E?"Exit Full Screen":T?"Restore":"Maximize",F=()=>E?jsxRuntimeExports.jsx(FiChevronsDown,{}):T?jsxRuntimeExports.jsx(FiMinimize2,{}):jsxRuntimeExports.jsx(FiMaximize2,{});return A?jsxRuntimeExports.jsx(Box,{...layoutStyles.macTitleBar,children:jsxRuntimeExports.jsx(Box,{...layoutStyles.titleBarTitle,children:"Open LLM VTuber"})}):jsxRuntimeExports.jsxs(Box,{...layoutStyles.windowsTitleBar,children:[jsxRuntimeExports.jsx(Box,{...layoutStyles.titleBarTitle,children:"Open LLM VTuber"}),jsxRuntimeExports.jsxs(Box,{...layoutStyles.titleBarButtons,children:[jsxRuntimeExports.jsx(IconButton,{...layoutStyles.titleBarButton,onClick:()=>{var U;return(U=window.electron)==null?void 0:U.ipcRenderer.send("window-minimize")},"aria-label":"Minimize",children:jsxRuntimeExports.jsx(FiMinus,{})}),jsxRuntimeExports.jsx(IconButton,{...layoutStyles.titleBarButton,onClick:R,"aria-label":I(),children:F()}),jsxRuntimeExports.jsx(IconButton,{...layoutStyles.closeButton,onClick:()=>{var U;return(U=window.electron)==null?void 0:U.ipcRenderer.send("window-close")},"aria-label":"Close",children:jsxRuntimeExports.jsx(FiX,{})})]})]})}function useInputSubtitle(){const{inputText:T,setInputText:_,handleKeyPress:E,handleCompositionStart:C,handleCompositionEnd:A,handleSend:R}=useTextInput(),{messages:I}=useChatHistory(),{startMic:F,autoStartMicOn:B}=useVAD(),{handleMicToggle:U,micOn:V}=useMicToggle(),{aiState:D,setAiState:O}=useAiState(),{interrupt:L}=useInterrupt(),z=I.filter(Q=>Q.role==="ai").slice(-1).map(Q=>Q.content)[0],W=I.some(Q=>Q.role==="ai");return{inputValue:T,handleInputChange:Q=>{_({target:{value:Q.target.value}}),O(AiStateEnum.WAITING)},handleKeyPress:Q=>{E(Q)},handleCompositionStart:C,handleCompositionEnd:A,handleInterrupt:()=>{L(),B&&F()},handleMicToggle:U,lastAIMessage:z,hasAIMessages:W,aiState:D,micOn:V,handleSend:R}}function useDraggable({isPet:T=!1,componentId:_}){const[E,C]=reactExports.useState(!1),A=reactExports.useRef({x:0,y:0}),R=reactExports.useRef({x:0,y:0}),I=reactExports.useRef(null);return{elementRef:I,isDragging:E,handleMouseDown:V=>{C(!0),R.current={x:V.clientX-A.current.x,y:V.clientY-A.current.y};const D=L=>{if(!I.current)return;const z={x:L.clientX-R.current.x,y:L.clientY-R.current.y};A.current=z,I.current.style.transform=`translateX(-50%) translate(${A.current.x}px, ${A.current.y}px)`},O=()=>{C(!1),document.removeEventListener("mousemove",D,!0),document.removeEventListener("mouseup",O,!0)};document.addEventListener("mousemove",D,!0),document.addEventListener("mouseup",O,!0)},handleMouseEnter:()=>{var V;T&&((V=window.api)==null||V.updateComponentHover(_,!0))},handleMouseLeave:()=>{var V;T&&!E&&((V=window.api)==null||V.updateComponentHover(_,!1))}}}const inputSubtitleStyles={container:{display:"flex",alignItems:"flex-end",justifyContent:"center",maxW:"fit-content",position:"absolute",bottom:"120px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,userSelect:"none",willChange:"transform",padding:0},box:{w:"400px",rounded:"xl",overflow:"hidden",boxShadow:"lg",bg:"blackAlpha.700",backdropFilter:"blur(8px)",css:{WebkitUserSelect:"none"}},messageStack:{p:"3",gap:1,alignItems:"stretch",justify:"flex-end"},messageText:{color:"white",fontSize:"sm",lineHeight:"1.5",transition:"all 0.3s"},statusBox:{bg:"blackAlpha.600",p:"3",borderTop:"1px",borderColor:"whiteAlpha.200"},statusText:{fontSize:"xs",color:"whiteAlpha.800",transition:"all 0.3s"},iconButton:{size:"xs",variant:"ghost",color:"whiteAlpha.800",_hover:{bg:"whiteAlpha.200"}},inputBox:{bg:"blackAlpha.600",borderTop:"1px",borderColor:"whiteAlpha.200"},input:{size:"sm",bg:"blackAlpha.500",color:"white",_placeholder:{color:"whiteAlpha.500"},borderColor:"whiteAlpha.300",_focus:{borderColor:"whiteAlpha.500",outline:"none"},flex:"1"},sendButton:{p:"1.5",bg:"blackAlpha.500",rounded:"lg",_hover:{bg:"blackAlpha.600"},transition:"colors",color:"whiteAlpha.800",size:"sm"},draggableContainer:T=>({cursor:T?"grabbing":"grab",transition:T?"none":"transform 0.1s ease",_active:{cursor:"grabbing"}}),closeButton:{position:"absolute",top:0,right:0,size:"2xs",minW:"6",height:"6",padding:0,variant:"ghost",color:"whiteAlpha.400",bg:"transparent",_hover:{bg:"blackAlpha.300",color:"whiteAlpha.800"},zIndex:10}};function InputSubtitle({isPet:T=!1}){const{inputValue:_,handleInputChange:E,handleKeyPress:C,handleCompositionStart:A,handleCompositionEnd:R,handleInterrupt:I,handleMicToggle:F,handleSend:B,lastAIMessage:U,hasAIMessages:V,aiState:D,micOn:O}=useInputSubtitle(),{elementRef:L,isDragging:z,handleMouseDown:W,handleMouseEnter:X,handleMouseLeave:Y}=useDraggable({isPet:T,componentId:"input-subtitle"}),[K,Q]=reactExports.useState(!0),ee=reactExports.useCallback(()=>{var ie;T&&((ie=window.api)==null||ie.updateComponentHover("input-subtitle",!1)),Q(!1)},[T]),J=()=>{Q(!0)};return reactExports.useEffect(()=>{var ie;if(T){const re=(ie=window.api)==null?void 0:ie.onToggleInputSubtitle(()=>{K?ee():J()});return()=>re==null?void 0:re()}return()=>{}},[ee,T,K]),reactExports.useEffect(()=>(window.inputSubtitle={open:J,close:ee},()=>{delete window.inputSubtitle}),[T,ee]),K?jsxRuntimeExports.jsx(Box,{ref:L,...inputSubtitleStyles.container,...inputSubtitleStyles.draggableContainer(z),onMouseDown:W,onMouseEnter:X,onMouseLeave:Y,children:jsxRuntimeExports.jsxs(Box,{...inputSubtitleStyles.box,children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Close subtitle",onClick:ee,...inputSubtitleStyles.closeButton,children:jsxRuntimeExports.jsx(LuX,{size:12})}),V&&jsxRuntimeExports.jsx(VStack,{minH:U?"32px":"0px",...inputSubtitleStyles.messageStack,children:U&&jsxRuntimeExports.jsx(Text$1,{...inputSubtitleStyles.messageText,children:U})}),jsxRuntimeExports.jsx(Box,{...inputSubtitleStyles.statusBox,children:jsxRuntimeExports.jsxs(Flex,{align:"center",justify:"space-between",color:"whiteAlpha.700",children:[jsxRuntimeExports.jsxs(Flex,{align:"center",gap:"2",children:[jsxRuntimeExports.jsx(LuBell,{size:16}),jsxRuntimeExports.jsx(Text$1,{...inputSubtitleStyles.statusText,children:D})]}),jsxRuntimeExports.jsxs(Flex,{gap:"2",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Toggle microphone",onClick:F,...inputSubtitleStyles.iconButton,children:O?jsxRuntimeExports.jsx(LuMic,{size:16}):jsxRuntimeExports.jsx(LuMicOff,{size:16})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Interrupt",onClick:I,...inputSubtitleStyles.iconButton,children:jsxRuntimeExports.jsx(LuHand,{size:16})})]})]})}),jsxRuntimeExports.jsx(Box,{...inputSubtitleStyles.inputBox,children:jsxRuntimeExports.jsxs(Stack,{direction:"row",gap:"2",p:"2",children:[jsxRuntimeExports.jsx(Input,{value:_,onChange:E,onKeyDown:C,onCompositionStart:A,onCompositionEnd:R,placeholder:"Type your message...",...inputSubtitleStyles.input}),jsxRuntimeExports.jsx(Button$1,{onClick:B,...inputSubtitleStyles.sendButton,children:jsxRuntimeExports.jsx(LuSend,{size:16})})]})})]})}):null}function App(){const[T,_]=reactExports.useState(!0),[E,C]=reactExports.useState(!1),[A,R]=reactExports.useState("window"),I=window.api!==void 0;return reactExports.useEffect(()=>{I&&window.electron.ipcRenderer.on("pre-mode-changed",(F,B)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("renderer-ready-for-mode-change",B)})})})},[I]),reactExports.useEffect(()=>{I&&window.electron.ipcRenderer.on("mode-changed",(F,B)=>{R(B),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("mode-change-rendered")})})})},[I]),reactExports.useEffect(()=>{const F=()=>{const B=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${B}px`)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),jsxRuntimeExports.jsx(ChakraProvider,{value:defaultSystem,children:jsxRuntimeExports.jsx(Live2DModelProvider,{children:jsxRuntimeExports.jsx(CameraProvider,{children:jsxRuntimeExports.jsx(ScreenCaptureProvider,{children:jsxRuntimeExports.jsx(CharacterConfigProvider,{children:jsxRuntimeExports.jsx(ChatHistoryProvider,{children:jsxRuntimeExports.jsx(AiStateProvider,{children:jsxRuntimeExports.jsx(ProactiveSpeakProvider,{children:jsxRuntimeExports.jsx(Live2DConfigProvider,{children:jsxRuntimeExports.jsx(SubtitleProvider,{children:jsxRuntimeExports.jsx(VADProvider,{children:jsxRuntimeExports.jsx(BgUrlProvider,{children:jsxRuntimeExports.jsx(GroupProvider,{children:jsxRuntimeExports.jsxs(WebSocketHandler,{children:[jsxRuntimeExports.jsx(Toaster,{}),A==="window"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[I&&jsxRuntimeExports.jsx(TitleBar,{}),jsxRuntimeExports.jsxs(Flex,{...layoutStyles.appContainer,children:[jsxRuntimeExports.jsx(Box,{...layoutStyles.sidebar,...!T&&{width:"24px"},children:jsxRuntimeExports.jsx(Sidebar,{isCollapsed:!T,onToggle:()=>_(!T)})}),jsxRuntimeExports.jsxs(Box,{...layoutStyles.mainContent,children:[jsxRuntimeExports.jsx(Canvas,{}),jsxRuntimeExports.jsx(Box,{...layoutStyles.footer,...E&&layoutStyles.collapsedFooter,children:jsxRuntimeExports.jsx(Footer,{isCollapsed:E,onToggle:()=>C(!E)})})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:A==="pet"}),A==="pet"&&jsxRuntimeExports.jsx(InputSubtitle,{isPet:A==="pet"})]})]})})})})})})})})})})})})})})}const originalConsoleWarn=console.warn;console.warn=(...T)=>{typeof T[0]=="string"&&T[0].includes("onnxruntime")||originalConsoleWarn.apply(console,T)};typeof window<"u"&&clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
